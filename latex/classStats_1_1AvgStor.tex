\hypertarget{classStats_1_1AvgStor}{
\section{クラス AvgStor}
\label{classStats_1_1AvgStor}\index{Stats::AvgStor@{Stats::AvgStor}}
}


{\ttfamily \#include $<$statistics.hh$>$}\subsection*{構成}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structStats_1_1AvgStor_1_1Params}{Params}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classStats_1_1AvgStor_aff27955b5798abace5a5f0aef2421772}{AvgStor} (\hyperlink{classStats_1_1Info}{Info} $\ast$info)
\item 
void \hyperlink{classStats_1_1AvgStor_a7687ba04921eb09ab374fb40c4e1eb9d}{set} (\hyperlink{namespaceStats_ac35128c026c72bb36af9cea00774e8a6}{Counter} val)
\item 
void \hyperlink{classStats_1_1AvgStor_a8e52de5dde7b3cab8328c91dbbb1f229}{inc} (\hyperlink{namespaceStats_ac35128c026c72bb36af9cea00774e8a6}{Counter} val)
\item 
void \hyperlink{classStats_1_1AvgStor_a89d7b0cf8f0932a96f6728d61d5818b1}{dec} (\hyperlink{namespaceStats_ac35128c026c72bb36af9cea00774e8a6}{Counter} val)
\item 
\hyperlink{namespaceStats_ac35128c026c72bb36af9cea00774e8a6}{Counter} \hyperlink{classStats_1_1AvgStor_aa9e486cb7eb0ad44f5f89923594b68a4}{value} () const 
\item 
\hyperlink{namespaceStats_ad874d2cfd4b4a29ebd480bb2e67f20ae}{Result} \hyperlink{classStats_1_1AvgStor_ae050da86c3d8e8a677a0bdeb7971e1e3}{result} () const 
\item 
bool \hyperlink{classStats_1_1AvgStor_a4e72b01b727d3165e75cba84eb507491}{zero} () const 
\item 
void \hyperlink{classStats_1_1AvgStor_a496667796a30696e960f80f4e3d69e69}{prepare} (\hyperlink{classStats_1_1Info}{Info} $\ast$info)
\item 
void \hyperlink{classStats_1_1AvgStor_a10d9d71be6e0d2194999bb5dd5280e2d}{reset} (\hyperlink{classStats_1_1Info}{Info} $\ast$info)
\end{DoxyCompactItemize}
\subsection*{Private 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{namespaceStats_ac35128c026c72bb36af9cea00774e8a6}{Counter} \hyperlink{classStats_1_1AvgStor_a8ffc13ee1adbc256e2b14f5ffd475e46}{current}
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classStats_1_1AvgStor_a996b16fe37ded6fe6672ce165837dcda}{lastReset}
\item 
\hyperlink{namespaceStats_ad874d2cfd4b4a29ebd480bb2e67f20ae}{Result} \hyperlink{classStats_1_1AvgStor_a7e957a9c5865c112db82214b368136e6}{total}
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classStats_1_1AvgStor_ab8f820db3f03367136bd4f90c3e777ae}{last}
\end{DoxyCompactItemize}


\subsection{説明}
Templatized storage and interface to a per-\/tick average stat. This keeps a current count and updates a total (count $\ast$ ticks) when this count changes. This allows the quick calculation of a per tick count of the item being watched. This is good for keeping track of residencies in structures among other things. 

\subsection{コンストラクタとデストラクタ}
\hypertarget{classStats_1_1AvgStor_aff27955b5798abace5a5f0aef2421772}{
\index{Stats::AvgStor@{Stats::AvgStor}!AvgStor@{AvgStor}}
\index{AvgStor@{AvgStor}!Stats::AvgStor@{Stats::AvgStor}}
\subsubsection[{AvgStor}]{\setlength{\rightskip}{0pt plus 5cm}{\bf AvgStor} ({\bf Info} $\ast$ {\em info})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classStats_1_1AvgStor_aff27955b5798abace5a5f0aef2421772}
Build and initializes this stat storage. 


\begin{DoxyCode}
549         : current(0), lastReset(0), total(0), last(0)
550     { }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classStats_1_1AvgStor_a89d7b0cf8f0932a96f6728d61d5818b1}{
\index{Stats::AvgStor@{Stats::AvgStor}!dec@{dec}}
\index{dec@{dec}!Stats::AvgStor@{Stats::AvgStor}}
\subsubsection[{dec}]{\setlength{\rightskip}{0pt plus 5cm}void dec ({\bf Counter} {\em val})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classStats_1_1AvgStor_a89d7b0cf8f0932a96f6728d61d5818b1}
Deccrement the current count by the provided value, calls set. 
\begin{DoxyParams}{引数}
\item[{\em val}]The amount to decrement. \end{DoxyParams}



\begin{DoxyCode}
575 { set(current - val); }
\end{DoxyCode}
\hypertarget{classStats_1_1AvgStor_a8e52de5dde7b3cab8328c91dbbb1f229}{
\index{Stats::AvgStor@{Stats::AvgStor}!inc@{inc}}
\index{inc@{inc}!Stats::AvgStor@{Stats::AvgStor}}
\subsubsection[{inc}]{\setlength{\rightskip}{0pt plus 5cm}void inc ({\bf Counter} {\em val})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classStats_1_1AvgStor_a8e52de5dde7b3cab8328c91dbbb1f229}
Increment the current count by the provided value, calls set. 
\begin{DoxyParams}{引数}
\item[{\em val}]The amount to increment. \end{DoxyParams}



\begin{DoxyCode}
569 { set(current + val); }
\end{DoxyCode}
\hypertarget{classStats_1_1AvgStor_a496667796a30696e960f80f4e3d69e69}{
\index{Stats::AvgStor@{Stats::AvgStor}!prepare@{prepare}}
\index{prepare@{prepare}!Stats::AvgStor@{Stats::AvgStor}}
\subsubsection[{prepare}]{\setlength{\rightskip}{0pt plus 5cm}void prepare ({\bf Info} $\ast$ {\em info})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classStats_1_1AvgStor_a496667796a30696e960f80f4e3d69e69}
Prepare stat data for dumping or serialization 


\begin{DoxyCode}
604     {
605         total += current * (curTick() - last);
606         last = curTick();
607     }
\end{DoxyCode}
\hypertarget{classStats_1_1AvgStor_a10d9d71be6e0d2194999bb5dd5280e2d}{
\index{Stats::AvgStor@{Stats::AvgStor}!reset@{reset}}
\index{reset@{reset}!Stats::AvgStor@{Stats::AvgStor}}
\subsubsection[{reset}]{\setlength{\rightskip}{0pt plus 5cm}void reset ({\bf Info} $\ast$ {\em info})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classStats_1_1AvgStor_a10d9d71be6e0d2194999bb5dd5280e2d}
Reset stat value to default 


\begin{DoxyCode}
614     {
615         total = 0.0;
616         last = curTick();
617         lastReset = curTick();
618     }
\end{DoxyCode}
\hypertarget{classStats_1_1AvgStor_ae050da86c3d8e8a677a0bdeb7971e1e3}{
\index{Stats::AvgStor@{Stats::AvgStor}!result@{result}}
\index{result@{result}!Stats::AvgStor@{Stats::AvgStor}}
\subsubsection[{result}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Result} result () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classStats_1_1AvgStor_ae050da86c3d8e8a677a0bdeb7971e1e3}
Return the current average. \begin{DoxyReturn}{戻り値}
The current average. 
\end{DoxyReturn}



\begin{DoxyCode}
589     {
590         assert(last == curTick());
591         return (Result)(total + current) / (Result)(curTick() - lastReset + 1);
592     }
\end{DoxyCode}
\hypertarget{classStats_1_1AvgStor_a7687ba04921eb09ab374fb40c4e1eb9d}{
\index{Stats::AvgStor@{Stats::AvgStor}!set@{set}}
\index{set@{set}!Stats::AvgStor@{Stats::AvgStor}}
\subsubsection[{set}]{\setlength{\rightskip}{0pt plus 5cm}void set ({\bf Counter} {\em val})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classStats_1_1AvgStor_a7687ba04921eb09ab374fb40c4e1eb9d}
\hyperlink{classSet}{Set} the current count to the one provided, update the total and last set values. 
\begin{DoxyParams}{引数}
\item[{\em val}]The new count. \end{DoxyParams}



\begin{DoxyCode}
559     {
560         total += current * (curTick() - last);
561         last = curTick();
562         current = val;
563     }
\end{DoxyCode}
\hypertarget{classStats_1_1AvgStor_aa9e486cb7eb0ad44f5f89923594b68a4}{
\index{Stats::AvgStor@{Stats::AvgStor}!value@{value}}
\index{value@{value}!Stats::AvgStor@{Stats::AvgStor}}
\subsubsection[{value}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Counter} value () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classStats_1_1AvgStor_aa9e486cb7eb0ad44f5f89923594b68a4}
Return the current count. \begin{DoxyReturn}{戻り値}
The current count. 
\end{DoxyReturn}



\begin{DoxyCode}
581 { return current; }
\end{DoxyCode}
\hypertarget{classStats_1_1AvgStor_a4e72b01b727d3165e75cba84eb507491}{
\index{Stats::AvgStor@{Stats::AvgStor}!zero@{zero}}
\index{zero@{zero}!Stats::AvgStor@{Stats::AvgStor}}
\subsubsection[{zero}]{\setlength{\rightskip}{0pt plus 5cm}bool zero () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classStats_1_1AvgStor_a4e72b01b727d3165e75cba84eb507491}
\begin{DoxyReturn}{戻り値}
true if zero value 
\end{DoxyReturn}



\begin{DoxyCode}
597 { return total == 0.0; }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classStats_1_1AvgStor_a8ffc13ee1adbc256e2b14f5ffd475e46}{
\index{Stats::AvgStor@{Stats::AvgStor}!current@{current}}
\index{current@{current}!Stats::AvgStor@{Stats::AvgStor}}
\subsubsection[{current}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Counter} {\bf current}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classStats_1_1AvgStor_a8ffc13ee1adbc256e2b14f5ffd475e46}
The current count. \hypertarget{classStats_1_1AvgStor_ab8f820db3f03367136bd4f90c3e777ae}{
\index{Stats::AvgStor@{Stats::AvgStor}!last@{last}}
\index{last@{last}!Stats::AvgStor@{Stats::AvgStor}}
\subsubsection[{last}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} {\bf last}\hspace{0.3cm}{\ttfamily  \mbox{[}mutable, private\mbox{]}}}}
\label{classStats_1_1AvgStor_ab8f820db3f03367136bd4f90c3e777ae}
The tick that current last changed. \hypertarget{classStats_1_1AvgStor_a996b16fe37ded6fe6672ce165837dcda}{
\index{Stats::AvgStor@{Stats::AvgStor}!lastReset@{lastReset}}
\index{lastReset@{lastReset}!Stats::AvgStor@{Stats::AvgStor}}
\subsubsection[{lastReset}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} {\bf lastReset}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classStats_1_1AvgStor_a996b16fe37ded6fe6672ce165837dcda}
The tick of the last reset \hypertarget{classStats_1_1AvgStor_a7e957a9c5865c112db82214b368136e6}{
\index{Stats::AvgStor@{Stats::AvgStor}!total@{total}}
\index{total@{total}!Stats::AvgStor@{Stats::AvgStor}}
\subsubsection[{total}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Result} {\bf total}\hspace{0.3cm}{\ttfamily  \mbox{[}mutable, private\mbox{]}}}}
\label{classStats_1_1AvgStor_a7e957a9c5865c112db82214b368136e6}
The total count for all tick. 

このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
base/\hyperlink{statistics_8hh}{statistics.hh}\end{DoxyCompactItemize}
