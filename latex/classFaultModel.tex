\hypertarget{classFaultModel}{
\section{クラス FaultModel}
\label{classFaultModel}\index{FaultModel@{FaultModel}}
}


{\ttfamily \#include $<$FaultModel.hh$>$}FaultModelに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3cm]{classFaultModel}
\end{center}
\end{figure}
\subsection*{構成}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classFaultModel_1_1FaultModel}{FaultModel}
\item 
struct \hyperlink{structFaultModel_1_1system__conf}{system\_\-conf}
\end{DoxyCompactItemize}
\subsection*{Public 型}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5f}{fault\_\-type} \{ \par
\hyperlink{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fa5e3d5701e1e7ad68ef8ce6e61b343135}{data\_\-corruption\_\-\_\-few\_\-bits}, 
\hyperlink{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fab3d1223d794fade671b2f63bc14a87e0}{data\_\-corruption\_\-\_\-all\_\-bits}, 
\hyperlink{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fa2c8ad4552f3e7e28c7f43164f0cedea8}{flit\_\-conservation\_\-\_\-flit\_\-duplication}, 
\hyperlink{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fadb758411e26971d262e497483d6becf7}{flit\_\-conservation\_\-\_\-flit\_\-loss\_\-or\_\-split}, 
\par
\hyperlink{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fa78688a71f46ef6d5c915dacbbe65e564}{misrouting}, 
\hyperlink{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5faf319483361a14b6983f1e35359bc9afc}{credit\_\-conservation\_\-\_\-credit\_\-generation}, 
\hyperlink{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fae7401498e51398da99c21cb2e0acf056}{credit\_\-conservation\_\-\_\-credit\_\-loss}, 
\hyperlink{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fa40686ec21bc4f76a8013d2602a0b44c9}{erroneous\_\-allocation\_\-\_\-VC}, 
\par
\hyperlink{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fa5037400f494a1f7f958dbf08e78bd457}{erroneous\_\-allocation\_\-\_\-switch}, 
\hyperlink{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fa6bef1f2c7d102fec7019aa0cb548a275}{unfair\_\-arbitration}, 
\hyperlink{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fa8fd6d2a4b94af175b1e18503d1f2200f}{number\_\-of\_\-fault\_\-types}
 \}
\item 
enum \hyperlink{classFaultModel_a892d29ada597232548383eb62e8cf21f}{conf\_\-record\_\-format} \{ \par
\hyperlink{classFaultModel_a892d29ada597232548383eb62e8cf21fa661e3c1c70f1697835634d6120c27fba}{conf\_\-record\_\-buff\_\-per\_\-vc}, 
\hyperlink{classFaultModel_a892d29ada597232548383eb62e8cf21faddfdcf5391cbdeaa8eddaced808b95c1}{conf\_\-record\_\-vcs}, 
\hyperlink{classFaultModel_a892d29ada597232548383eb62e8cf21fae775c7c2b6014dd0e7cf2a21110a1439}{conf\_\-record\_\-first\_\-fault\_\-type}, 
\hyperlink{classFaultModel_a892d29ada597232548383eb62e8cf21fae0a9a36ceaa84ed33759c149e73175db}{conf\_\-record\_\-last\_\-fault\_\-type} =  conf\_\-record\_\-first\_\-fault\_\-type + number\_\-of\_\-fault\_\-types -\/ 1, 
\par
\hyperlink{classFaultModel_a892d29ada597232548383eb62e8cf21fa07bd82f54a5768393897ffc8ac9cc552}{fields\_\-per\_\-conf\_\-record}
 \}
\item 
enum \hyperlink{classFaultModel_a84543b68245449294e82d04eb844d743}{temperature\_\-record\_\-format} \{ \hyperlink{classFaultModel_a84543b68245449294e82d04eb844d743a403451297f147cd7d99fb6d8551c85bb}{temperature\_\-record\_\-temp}, 
\hyperlink{classFaultModel_a84543b68245449294e82d04eb844d743a9c15194df607ea0aa56be4487a131c7d}{temperature\_\-record\_\-weight}, 
\hyperlink{classFaultModel_a84543b68245449294e82d04eb844d743a188f80d79d5384c287be5edd519c6d8a}{fields\_\-per\_\-temperature\_\-record}
 \}
\item 
typedef FaultModelParams \hyperlink{classFaultModel_a7375aa39205bda869bcfb089a9163679}{Params}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classFaultModel_ad0752b1f7980300e4978b8ed20041fdc}{FaultModel} (const \hyperlink{classFaultModel_a7375aa39205bda869bcfb089a9163679}{Params} $\ast$p)
\item 
const \hyperlink{classFaultModel_a7375aa39205bda869bcfb089a9163679}{Params} $\ast$ \hyperlink{classFaultModel_acd3c3feb78ae7a8f88fe0f110a718dff}{params} () const 
\item 
int \hyperlink{classFaultModel_a9b0afb8ab704de6844484a41ecbad75f}{declare\_\-router} (int number\_\-of\_\-inputs, int number\_\-of\_\-outputs, int number\_\-of\_\-vcs\_\-per\_\-vnet, int number\_\-of\_\-buff\_\-per\_\-data\_\-vc, int number\_\-of\_\-buff\_\-per\_\-ctrl\_\-vc)
\item 
std::string \hyperlink{classFaultModel_a0b3a049c6918c05b4fb8a7702d65dd93}{fault\_\-type\_\-to\_\-string} (int fault\_\-type\_\-index)
\item 
bool \hyperlink{classFaultModel_a25ca83d60796d678cc73f46c3553368b}{fault\_\-vector} (int routerID, int temperature, float fault\_\-vector\mbox{[}$\,$\mbox{]})
\item 
bool \hyperlink{classFaultModel_ac7d54b266bf5b3e7b3054fdd875d89df}{fault\_\-prob} (int routerID, int temperature, float $\ast$aggregate\_\-fault\_\-prob)
\item 
void \hyperlink{classFaultModel_a7e8442e7139d840c15bdee83789f7ae8}{print} (void)
\end{DoxyCompactItemize}
\subsection*{Private 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classstd_1_1vector}{std::vector}$<$ \hyperlink{structFaultModel_1_1system__conf}{system\_\-conf} $>$ \hyperlink{classFaultModel_aa04aa52748b59c0c6e94daec54d0b10e}{configurations}
\item 
\hyperlink{classstd_1_1vector}{std::vector}$<$ \hyperlink{structFaultModel_1_1system__conf}{system\_\-conf} $>$ \hyperlink{classFaultModel_a3f1d61888ea857f30c7c8767847c2483}{routers}
\item 
\hyperlink{classstd_1_1vector}{std::vector}$<$ int $>$ \hyperlink{classFaultModel_ada85c55ffa43379d698989a8ee5c0391}{temperature\_\-weights}
\end{DoxyCompactItemize}


\subsection{型定義}
\hypertarget{classFaultModel_a7375aa39205bda869bcfb089a9163679}{
\index{FaultModel@{FaultModel}!Params@{Params}}
\index{Params@{Params}!FaultModel@{FaultModel}}
\subsubsection[{Params}]{\setlength{\rightskip}{0pt plus 5cm}typedef FaultModelParams {\bf Params}}}
\label{classFaultModel_a7375aa39205bda869bcfb089a9163679}


\hyperlink{classSimObject_a0f0761d2db586a23bb2a2880b8f387bb}{SimObject}を再定義しています。

\subsection{列挙型}
\hypertarget{classFaultModel_a892d29ada597232548383eb62e8cf21f}{
\index{FaultModel@{FaultModel}!conf\_\-record\_\-format@{conf\_\-record\_\-format}}
\index{conf\_\-record\_\-format@{conf\_\-record\_\-format}!FaultModel@{FaultModel}}
\subsubsection[{conf\_\-record\_\-format}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf conf\_\-record\_\-format}}}
\label{classFaultModel_a892d29ada597232548383eb62e8cf21f}
\begin{Desc}
\item[列挙型の値: ]\par
\begin{description}
\index{conf\_\-record\_\-buff\_\-per\_\-vc@{conf\_\-record\_\-buff\_\-per\_\-vc}!FaultModel@{FaultModel}}\index{FaultModel@{FaultModel}!conf\_\-record\_\-buff\_\-per\_\-vc@{conf\_\-record\_\-buff\_\-per\_\-vc}}\item[{\em 
\hypertarget{classFaultModel_a892d29ada597232548383eb62e8cf21fa661e3c1c70f1697835634d6120c27fba}{
conf\_\-record\_\-buff\_\-per\_\-vc}
\label{classFaultModel_a892d29ada597232548383eb62e8cf21fa661e3c1c70f1697835634d6120c27fba}
}]\index{conf\_\-record\_\-vcs@{conf\_\-record\_\-vcs}!FaultModel@{FaultModel}}\index{FaultModel@{FaultModel}!conf\_\-record\_\-vcs@{conf\_\-record\_\-vcs}}\item[{\em 
\hypertarget{classFaultModel_a892d29ada597232548383eb62e8cf21faddfdcf5391cbdeaa8eddaced808b95c1}{
conf\_\-record\_\-vcs}
\label{classFaultModel_a892d29ada597232548383eb62e8cf21faddfdcf5391cbdeaa8eddaced808b95c1}
}]\index{conf\_\-record\_\-first\_\-fault\_\-type@{conf\_\-record\_\-first\_\-fault\_\-type}!FaultModel@{FaultModel}}\index{FaultModel@{FaultModel}!conf\_\-record\_\-first\_\-fault\_\-type@{conf\_\-record\_\-first\_\-fault\_\-type}}\item[{\em 
\hypertarget{classFaultModel_a892d29ada597232548383eb62e8cf21fae775c7c2b6014dd0e7cf2a21110a1439}{
conf\_\-record\_\-first\_\-fault\_\-type}
\label{classFaultModel_a892d29ada597232548383eb62e8cf21fae775c7c2b6014dd0e7cf2a21110a1439}
}]\index{conf\_\-record\_\-last\_\-fault\_\-type@{conf\_\-record\_\-last\_\-fault\_\-type}!FaultModel@{FaultModel}}\index{FaultModel@{FaultModel}!conf\_\-record\_\-last\_\-fault\_\-type@{conf\_\-record\_\-last\_\-fault\_\-type}}\item[{\em 
\hypertarget{classFaultModel_a892d29ada597232548383eb62e8cf21fae0a9a36ceaa84ed33759c149e73175db}{
conf\_\-record\_\-last\_\-fault\_\-type}
\label{classFaultModel_a892d29ada597232548383eb62e8cf21fae0a9a36ceaa84ed33759c149e73175db}
}]\index{fields\_\-per\_\-conf\_\-record@{fields\_\-per\_\-conf\_\-record}!FaultModel@{FaultModel}}\index{FaultModel@{FaultModel}!fields\_\-per\_\-conf\_\-record@{fields\_\-per\_\-conf\_\-record}}\item[{\em 
\hypertarget{classFaultModel_a892d29ada597232548383eb62e8cf21fa07bd82f54a5768393897ffc8ac9cc552}{
fields\_\-per\_\-conf\_\-record}
\label{classFaultModel_a892d29ada597232548383eb62e8cf21fa07bd82f54a5768393897ffc8ac9cc552}
}]\end{description}
\end{Desc}




\begin{DoxyCode}
86     {
87         conf_record_buff_per_vc,
88         conf_record_vcs,
89         conf_record_first_fault_type,
90         conf_record_last_fault_type = conf_record_first_fault_type + 
      number_of_fault_types - 1,
91         fields_per_conf_record
92     };
\end{DoxyCode}
\hypertarget{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5f}{
\index{FaultModel@{FaultModel}!fault\_\-type@{fault\_\-type}}
\index{fault\_\-type@{fault\_\-type}!FaultModel@{FaultModel}}
\subsubsection[{fault\_\-type}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf fault\_\-type}}}
\label{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5f}
\begin{Desc}
\item[列挙型の値: ]\par
\begin{description}
\index{data\_\-corruption\_\-\_\-few\_\-bits@{data\_\-corruption\_\-\_\-few\_\-bits}!FaultModel@{FaultModel}}\index{FaultModel@{FaultModel}!data\_\-corruption\_\-\_\-few\_\-bits@{data\_\-corruption\_\-\_\-few\_\-bits}}\item[{\em 
\hypertarget{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fa5e3d5701e1e7ad68ef8ce6e61b343135}{
data\_\-corruption\_\-\_\-few\_\-bits}
\label{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fa5e3d5701e1e7ad68ef8ce6e61b343135}
}]\index{data\_\-corruption\_\-\_\-all\_\-bits@{data\_\-corruption\_\-\_\-all\_\-bits}!FaultModel@{FaultModel}}\index{FaultModel@{FaultModel}!data\_\-corruption\_\-\_\-all\_\-bits@{data\_\-corruption\_\-\_\-all\_\-bits}}\item[{\em 
\hypertarget{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fab3d1223d794fade671b2f63bc14a87e0}{
data\_\-corruption\_\-\_\-all\_\-bits}
\label{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fab3d1223d794fade671b2f63bc14a87e0}
}]\index{flit\_\-conservation\_\-\_\-flit\_\-duplication@{flit\_\-conservation\_\-\_\-flit\_\-duplication}!FaultModel@{FaultModel}}\index{FaultModel@{FaultModel}!flit\_\-conservation\_\-\_\-flit\_\-duplication@{flit\_\-conservation\_\-\_\-flit\_\-duplication}}\item[{\em 
\hypertarget{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fa2c8ad4552f3e7e28c7f43164f0cedea8}{
flit\_\-conservation\_\-\_\-flit\_\-duplication}
\label{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fa2c8ad4552f3e7e28c7f43164f0cedea8}
}]\index{flit\_\-conservation\_\-\_\-flit\_\-loss\_\-or\_\-split@{flit\_\-conservation\_\-\_\-flit\_\-loss\_\-or\_\-split}!FaultModel@{FaultModel}}\index{FaultModel@{FaultModel}!flit\_\-conservation\_\-\_\-flit\_\-loss\_\-or\_\-split@{flit\_\-conservation\_\-\_\-flit\_\-loss\_\-or\_\-split}}\item[{\em 
\hypertarget{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fadb758411e26971d262e497483d6becf7}{
flit\_\-conservation\_\-\_\-flit\_\-loss\_\-or\_\-split}
\label{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fadb758411e26971d262e497483d6becf7}
}]\index{misrouting@{misrouting}!FaultModel@{FaultModel}}\index{FaultModel@{FaultModel}!misrouting@{misrouting}}\item[{\em 
\hypertarget{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fa78688a71f46ef6d5c915dacbbe65e564}{
misrouting}
\label{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fa78688a71f46ef6d5c915dacbbe65e564}
}]\index{credit\_\-conservation\_\-\_\-credit\_\-generation@{credit\_\-conservation\_\-\_\-credit\_\-generation}!FaultModel@{FaultModel}}\index{FaultModel@{FaultModel}!credit\_\-conservation\_\-\_\-credit\_\-generation@{credit\_\-conservation\_\-\_\-credit\_\-generation}}\item[{\em 
\hypertarget{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5faf319483361a14b6983f1e35359bc9afc}{
credit\_\-conservation\_\-\_\-credit\_\-generation}
\label{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5faf319483361a14b6983f1e35359bc9afc}
}]\index{credit\_\-conservation\_\-\_\-credit\_\-loss@{credit\_\-conservation\_\-\_\-credit\_\-loss}!FaultModel@{FaultModel}}\index{FaultModel@{FaultModel}!credit\_\-conservation\_\-\_\-credit\_\-loss@{credit\_\-conservation\_\-\_\-credit\_\-loss}}\item[{\em 
\hypertarget{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fae7401498e51398da99c21cb2e0acf056}{
credit\_\-conservation\_\-\_\-credit\_\-loss}
\label{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fae7401498e51398da99c21cb2e0acf056}
}]\index{erroneous\_\-allocation\_\-\_\-VC@{erroneous\_\-allocation\_\-\_\-VC}!FaultModel@{FaultModel}}\index{FaultModel@{FaultModel}!erroneous\_\-allocation\_\-\_\-VC@{erroneous\_\-allocation\_\-\_\-VC}}\item[{\em 
\hypertarget{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fa40686ec21bc4f76a8013d2602a0b44c9}{
erroneous\_\-allocation\_\-\_\-VC}
\label{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fa40686ec21bc4f76a8013d2602a0b44c9}
}]\index{erroneous\_\-allocation\_\-\_\-switch@{erroneous\_\-allocation\_\-\_\-switch}!FaultModel@{FaultModel}}\index{FaultModel@{FaultModel}!erroneous\_\-allocation\_\-\_\-switch@{erroneous\_\-allocation\_\-\_\-switch}}\item[{\em 
\hypertarget{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fa5037400f494a1f7f958dbf08e78bd457}{
erroneous\_\-allocation\_\-\_\-switch}
\label{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fa5037400f494a1f7f958dbf08e78bd457}
}]\index{unfair\_\-arbitration@{unfair\_\-arbitration}!FaultModel@{FaultModel}}\index{FaultModel@{FaultModel}!unfair\_\-arbitration@{unfair\_\-arbitration}}\item[{\em 
\hypertarget{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fa6bef1f2c7d102fec7019aa0cb548a275}{
unfair\_\-arbitration}
\label{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fa6bef1f2c7d102fec7019aa0cb548a275}
}]\index{number\_\-of\_\-fault\_\-types@{number\_\-of\_\-fault\_\-types}!FaultModel@{FaultModel}}\index{FaultModel@{FaultModel}!number\_\-of\_\-fault\_\-types@{number\_\-of\_\-fault\_\-types}}\item[{\em 
\hypertarget{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fa8fd6d2a4b94af175b1e18503d1f2200f}{
number\_\-of\_\-fault\_\-types}
\label{classFaultModel_ad671111bc5a7e95e40340cfe3fb42f5fa8fd6d2a4b94af175b1e18503d1f2200f}
}]\end{description}
\end{Desc}




\begin{DoxyCode}
67     {
68         data_corruption__few_bits,
69         data_corruption__all_bits,
70         flit_conservation__flit_duplication,
71         flit_conservation__flit_loss_or_split,
72         misrouting,
73         credit_conservation__credit_generation,
74         credit_conservation__credit_loss,
75         erroneous_allocation__VC,
76         erroneous_allocation__switch,
77         unfair_arbitration,
78         number_of_fault_types
79     };
\end{DoxyCode}
\hypertarget{classFaultModel_a84543b68245449294e82d04eb844d743}{
\index{FaultModel@{FaultModel}!temperature\_\-record\_\-format@{temperature\_\-record\_\-format}}
\index{temperature\_\-record\_\-format@{temperature\_\-record\_\-format}!FaultModel@{FaultModel}}
\subsubsection[{temperature\_\-record\_\-format}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf temperature\_\-record\_\-format}}}
\label{classFaultModel_a84543b68245449294e82d04eb844d743}
\begin{Desc}
\item[列挙型の値: ]\par
\begin{description}
\index{temperature\_\-record\_\-temp@{temperature\_\-record\_\-temp}!FaultModel@{FaultModel}}\index{FaultModel@{FaultModel}!temperature\_\-record\_\-temp@{temperature\_\-record\_\-temp}}\item[{\em 
\hypertarget{classFaultModel_a84543b68245449294e82d04eb844d743a403451297f147cd7d99fb6d8551c85bb}{
temperature\_\-record\_\-temp}
\label{classFaultModel_a84543b68245449294e82d04eb844d743a403451297f147cd7d99fb6d8551c85bb}
}]\index{temperature\_\-record\_\-weight@{temperature\_\-record\_\-weight}!FaultModel@{FaultModel}}\index{FaultModel@{FaultModel}!temperature\_\-record\_\-weight@{temperature\_\-record\_\-weight}}\item[{\em 
\hypertarget{classFaultModel_a84543b68245449294e82d04eb844d743a9c15194df607ea0aa56be4487a131c7d}{
temperature\_\-record\_\-weight}
\label{classFaultModel_a84543b68245449294e82d04eb844d743a9c15194df607ea0aa56be4487a131c7d}
}]\index{fields\_\-per\_\-temperature\_\-record@{fields\_\-per\_\-temperature\_\-record}!FaultModel@{FaultModel}}\index{FaultModel@{FaultModel}!fields\_\-per\_\-temperature\_\-record@{fields\_\-per\_\-temperature\_\-record}}\item[{\em 
\hypertarget{classFaultModel_a84543b68245449294e82d04eb844d743a188f80d79d5384c287be5edd519c6d8a}{
fields\_\-per\_\-temperature\_\-record}
\label{classFaultModel_a84543b68245449294e82d04eb844d743a188f80d79d5384c287be5edd519c6d8a}
}]\end{description}
\end{Desc}




\begin{DoxyCode}
95     {
96         temperature_record_temp,
97         temperature_record_weight,
98         fields_per_temperature_record
99     };
\end{DoxyCode}


\subsection{コンストラクタとデストラクタ}
\hypertarget{classFaultModel_ad0752b1f7980300e4978b8ed20041fdc}{
\index{FaultModel@{FaultModel}!FaultModel@{FaultModel}}
\index{FaultModel@{FaultModel}!FaultModel@{FaultModel}}
\subsubsection[{FaultModel}]{\setlength{\rightskip}{0pt plus 5cm}{\bf FaultModel} (const {\bf Params} $\ast$ {\em p})}}
\label{classFaultModel_ad0752b1f7980300e4978b8ed20041fdc}



\begin{DoxyCode}
55                                       : SimObject(p)
56 {
57     // read configurations into "configurations" vector
58     // format: <buff/vc> <vcs> <10 fault types> 
59     bool more_records = true;
60     for (int i = 0; more_records; i += (fields_per_conf_record)){
61         system_conf configuration;
62         configuration.buff_per_vc = 
63             p->baseline_fault_vector_database[i + conf_record_buff_per_vc];
64         configuration.vcs = 
65             p->baseline_fault_vector_database[i + conf_record_vcs];
66         for (int fault_index = 0; fault_index < number_of_fault_types; 
67             fault_index++){
68             configuration.fault_type[fault_index] = 
69                 p->baseline_fault_vector_database[i + 
70                    conf_record_first_fault_type + fault_index] / 100;
71         }
72         configurations.push_back(configuration);
73         if (p->baseline_fault_vector_database[i+fields_per_conf_record] < 0){
74             more_records = false;
75         }
76     }
77 
78     // read temperature weights into "temperature_weights" vector
79     // format: <temperature> <weight>
80     more_records = true;
81     for (int i = 0; more_records; i += (fields_per_temperature_record)){
82         int record_temperature = 
83                p->temperature_weights_database[i + temperature_record_temp];
84         int record_weight =
85                p->temperature_weights_database[i + temperature_record_weight];
86         static int first_record = true;
87         if (first_record){
88             for (int temperature = 0; temperature < record_temperature; 
89                  temperature++){
90                  temperature_weights.push_back(0);
91             }
92             first_record = false;
93         }
94         assert(record_temperature == temperature_weights.size());
95         temperature_weights.push_back(record_weight);
96         if (p->temperature_weights_database[i + 
97                fields_per_temperature_record] < 0){
98             more_records = false;
99         }
100     }
101 }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classFaultModel_a9b0afb8ab704de6844484a41ecbad75f}{
\index{FaultModel@{FaultModel}!declare\_\-router@{declare\_\-router}}
\index{declare\_\-router@{declare\_\-router}!FaultModel@{FaultModel}}
\subsubsection[{declare\_\-router}]{\setlength{\rightskip}{0pt plus 5cm}int declare\_\-router (int {\em number\_\-of\_\-inputs}, \/  int {\em number\_\-of\_\-outputs}, \/  int {\em number\_\-of\_\-vcs\_\-per\_\-vnet}, \/  int {\em number\_\-of\_\-buff\_\-per\_\-data\_\-vc}, \/  int {\em number\_\-of\_\-buff\_\-per\_\-ctrl\_\-vc})}}
\label{classFaultModel_a9b0afb8ab704de6844484a41ecbad75f}



\begin{DoxyCode}
140 {
141     // check inputs (are they legal?)
142     if (number_of_inputs <= 0 || number_of_outputs <= 0 ||
143         number_of_vcs_per_input <= 0 || number_of_buff_per_data_vc <= 0 || 
144         number_of_buff_per_ctrl_vc <= 0){
145         fatal("Fault Model: ERROR in argument of FaultModel_declare_router!");
146     }
147     int number_of_buffers_per_vc = MAX(number_of_buff_per_data_vc,
148                                        number_of_buff_per_ctrl_vc);
149     int total_vcs = number_of_inputs * number_of_vcs_per_input;
150     if (total_vcs > MAX_VCs){
151         fatal("Fault Model: ERROR! Number inputs*VCs (MAX_VCs) unsupported");
152     }
153     if (number_of_buffers_per_vc > MAX_BUFFERS_per_VC){
154         fatal("Fault Model: ERROR! buffers/VC (MAX_BUFFERS_per_VC) too high");
155     }
156 
157     // link the router to a DB record
158     int record_hit = -1;
159     for (int record = 0; record < configurations.size(); record++){    
160         if ((configurations[record].buff_per_vc == number_of_buffers_per_vc)&&
161             (configurations[record].vcs == total_vcs)){
162             record_hit = record;
163         }
164     }
165     if (record_hit == -1){
166         panic("Fault Model: ERROR! configuration not found in DB. BUG?");
167     }
168 
169     // remember the router and return its ID
170     routers.push_back(configurations[record_hit]);
171     static int router_index = 0;
172     return router_index++;
173 }
\end{DoxyCode}
\hypertarget{classFaultModel_ac7d54b266bf5b3e7b3054fdd875d89df}{
\index{FaultModel@{FaultModel}!fault\_\-prob@{fault\_\-prob}}
\index{fault\_\-prob@{fault\_\-prob}!FaultModel@{FaultModel}}
\subsubsection[{fault\_\-prob}]{\setlength{\rightskip}{0pt plus 5cm}bool fault\_\-prob (int {\em routerID}, \/  int {\em temperature}, \/  float $\ast$ {\em aggregate\_\-fault\_\-prob})}}
\label{classFaultModel_ac7d54b266bf5b3e7b3054fdd875d89df}



\begin{DoxyCode}
214 {
215     *aggregate_fault_prob = 1.0;
216     bool ok = true;
217 
218     // is the routerID recorded?
219     if (routerID < 0 || routerID >= ((int) routers.size())){
220          warn("Fault Model: ERROR! unknown router ID argument.");
221         fatal("Fault Model: Did you enable the fault model flag)?");     
222     }
223 
224     // is the temperature too high/too low?
225     int temperature = temperature_input;
226     if (temperature_input >= ((int) temperature_weights.size()) ){
227         ok = false;
228         warn_once("Fault Model: Temperature exceeded simulated upper bound.");
229         warn_once("Fault Model: The fault model is not accurate any more.");
230         temperature = (temperature_weights.size()-1);
231     } else if (temperature_input < 0){
232         ok = false;
233         warn_once("Fault Model: Temperature exceeded simulated lower bound.");
234         warn_once("Fault Model: The fault model is not accurate any more.");
235         temperature = 0;
236     }
237 
238     // recover the router record and return its aggregate fault probability
239     for (int i = 0; i < number_of_fault_types; i++){
240         *aggregate_fault_prob=  *aggregate_fault_prob * 
241                                ( 1.0 - (routers[routerID].fault_type[i] * 
242                                  ((float)temperature_weights[temperature])) );
243     }
244     *aggregate_fault_prob = 1.0 - *aggregate_fault_prob;
245     return ok;
246 }
\end{DoxyCode}
\hypertarget{classFaultModel_a0b3a049c6918c05b4fb8a7702d65dd93}{
\index{FaultModel@{FaultModel}!fault\_\-type\_\-to\_\-string@{fault\_\-type\_\-to\_\-string}}
\index{fault\_\-type\_\-to\_\-string@{fault\_\-type\_\-to\_\-string}!FaultModel@{FaultModel}}
\subsubsection[{fault\_\-type\_\-to\_\-string}]{\setlength{\rightskip}{0pt plus 5cm}string fault\_\-type\_\-to\_\-string (int {\em fault\_\-type\_\-index})}}
\label{classFaultModel_a0b3a049c6918c05b4fb8a7702d65dd93}



\begin{DoxyCode}
105 {
106    if (ft == data_corruption__few_bits){
107        return "data_corruption__few_bits";
108    } else if (ft == data_corruption__all_bits){
109       return "data_corruption__all_bits";
110    } else if (ft == flit_conservation__flit_duplication){
111       return "flit_conservation__flit_duplication";
112    } else if (ft == flit_conservation__flit_loss_or_split){
113       return "flit_conservation__flit_loss_or_split";
114    } else if (ft == misrouting){
115       return "misrouting";
116    } else if (ft == credit_conservation__credit_generation){
117       return "credit_conservation__credit_generation";
118    } else if (ft == credit_conservation__credit_loss){
119       return "credit_conservation__credit_loss";
120    } else if (ft == erroneous_allocation__VC){
121       return "erroneous_allocation__VC";
122    } else if (ft == erroneous_allocation__switch){
123       return "erroneous_allocation__switch";
124    } else if (ft == unfair_arbitration){
125       return "unfair_arbitration";
126    } else if (ft == number_of_fault_types){
127       return "none";
128    } else {
129       return "none";
130    }
131 }
\end{DoxyCode}
\hypertarget{classFaultModel_a25ca83d60796d678cc73f46c3553368b}{
\index{FaultModel@{FaultModel}!fault\_\-vector@{fault\_\-vector}}
\index{fault\_\-vector@{fault\_\-vector}!FaultModel@{FaultModel}}
\subsubsection[{fault\_\-vector}]{\setlength{\rightskip}{0pt plus 5cm}bool fault\_\-vector (int {\em routerID}, \/  int {\em temperature}, \/  float {\em fault\_\-vector}\mbox{[}$\,$\mbox{]})}}
\label{classFaultModel_a25ca83d60796d678cc73f46c3553368b}



\begin{DoxyCode}
179 {
180     bool ok = true;
181 
182     // is the routerID recorded?
183     if (routerID < 0 || routerID >= ((int) routers.size())){
184          warn("Fault Model: ERROR! unknown router ID argument.");
185         fatal("Fault Model: Did you enable the fault model flag)?");     
186     }
187 
188     // is the temperature too high/too low?
189     int temperature = temperature_input;
190     if (temperature_input >= ((int) temperature_weights.size())){
191         ok = false;
192         warn_once("Fault Model: Temperature exceeded simulated upper bound.");
193         warn_once("Fault Model: The fault model is not accurate any more.");
194         temperature = (temperature_weights.size() - 1);
195     } else if (temperature_input < 0){
196         ok = false;
197         warn_once("Fault Model: Temperature exceeded simulated lower bound.");
198         warn_once("Fault Model: The fault model is not accurate any more.");
199         temperature = 0;
200     }
201 
202     // recover the router record and return its fault vector
203     for (int i = 0; i < number_of_fault_types; i++){
204         fault_vector[i] = routers[routerID].fault_type[i] * 
205                           ((float)temperature_weights[temperature]);
206     }
207     return ok;
208 }
\end{DoxyCode}
\hypertarget{classFaultModel_acd3c3feb78ae7a8f88fe0f110a718dff}{
\index{FaultModel@{FaultModel}!params@{params}}
\index{params@{params}!FaultModel@{FaultModel}}
\subsubsection[{params}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Params}$\ast$ params () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classFaultModel_acd3c3feb78ae7a8f88fe0f110a718dff}


\hyperlink{classSimObject_acd3c3feb78ae7a8f88fe0f110a718dff}{SimObject}を再定義しています。


\begin{DoxyCode}
60 { return (const Params *)_params; }
\end{DoxyCode}
\hypertarget{classFaultModel_a7e8442e7139d840c15bdee83789f7ae8}{
\index{FaultModel@{FaultModel}!print@{print}}
\index{print@{print}!FaultModel@{FaultModel}}
\subsubsection[{print}]{\setlength{\rightskip}{0pt plus 5cm}void print (void)}}
\label{classFaultModel_a7e8442e7139d840c15bdee83789f7ae8}



\begin{DoxyCode}
251 {
252     cout << "--- PRINTING configurations ---\n";
253     for (int record = 0; record < configurations.size(); record++){
254         cout << "(" << record << ") ";
255         cout << "VCs=" << configurations[record].vcs << " ";
256         cout << "Buff/VC=" << configurations[record].buff_per_vc << " [";
257         for (int fault_type_num = 0; 
258              fault_type_num < number_of_fault_types; 
259              fault_type_num++){
260             cout << (100 * configurations[record].fault_type[fault_type_num]); 
261             cout << "% ";
262         }
263         cout << "]\n";
264     }
265     cout << "--- PRINTING temperature weights ---\n";
266     for (int record = 0; record < temperature_weights.size(); record++){
267         cout << "temperature=" << record << " => ";
268         cout << "weight=" << temperature_weights[record];
269         cout << "\n";
270     }
271 }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classFaultModel_aa04aa52748b59c0c6e94daec54d0b10e}{
\index{FaultModel@{FaultModel}!configurations@{configurations}}
\index{configurations@{configurations}!FaultModel@{FaultModel}}
\subsubsection[{configurations}]{\setlength{\rightskip}{0pt plus 5cm}{\bf std::vector}$<${\bf system\_\-conf}$>$ {\bf configurations}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classFaultModel_aa04aa52748b59c0c6e94daec54d0b10e}
\hypertarget{classFaultModel_a3f1d61888ea857f30c7c8767847c2483}{
\index{FaultModel@{FaultModel}!routers@{routers}}
\index{routers@{routers}!FaultModel@{FaultModel}}
\subsubsection[{routers}]{\setlength{\rightskip}{0pt plus 5cm}{\bf std::vector}$<${\bf system\_\-conf}$>$ {\bf routers}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classFaultModel_a3f1d61888ea857f30c7c8767847c2483}
\hypertarget{classFaultModel_ada85c55ffa43379d698989a8ee5c0391}{
\index{FaultModel@{FaultModel}!temperature\_\-weights@{temperature\_\-weights}}
\index{temperature\_\-weights@{temperature\_\-weights}!FaultModel@{FaultModel}}
\subsubsection[{temperature\_\-weights}]{\setlength{\rightskip}{0pt plus 5cm}{\bf std::vector}$<$int$>$ {\bf temperature\_\-weights}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classFaultModel_ada85c55ffa43379d698989a8ee5c0391}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
mem/ruby/network/fault\_\-model/\hyperlink{FaultModel_8hh}{FaultModel.hh}\item 
mem/ruby/network/fault\_\-model/\hyperlink{FaultModel_8cc}{FaultModel.cc}\end{DoxyCompactItemize}
