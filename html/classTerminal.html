<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス Terminal</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>クラス Terminal</h1><!-- doxytag: class="Terminal" --><!-- doxytag: inherits="SimObject" -->
<p><code>#include &lt;<a class="el" href="terminal_8hh_source.html">terminal.hh</a>&gt;</code></p>
<div class="dynheader">
Terminalに対する継承グラフ</div>
<div class="dynsection">
 <div class="center">
  <img src="classTerminal.gif" usemap="#Terminal_map" alt=""/>
  <map id="Terminal_map" name="Terminal_map">
<area href="classSimObject.html" alt="SimObject" shape="rect" coords="105,56,200,80"/>
<area href="classEventManager.html" alt="EventManager" shape="rect" coords="0,0,95,24"/>
<area href="classSerializable.html" alt="Serializable" shape="rect" coords="105,0,200,24"/>
<area href="classDrainable.html" alt="Drainable" shape="rect" coords="210,0,305,24"/>
</map>
 </div>
</div>

<p><a href="classTerminal-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>構成</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal_1_1DataEvent.html">DataEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal_1_1ListenEvent.html">ListenEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal_1_1Terminal.html">Terminal</a></td></tr>
<tr><td colspan="2"><h2>Public 型</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef TerminalParams&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#aa60a1659eb9e560503e47d6cbedd5ace">Params</a></td></tr>
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#af67625ef23fe68d37a4fc8536c093b9f">Terminal</a> (const <a class="el" href="classTerminal.html#aa60a1659eb9e560503e47d6cbedd5ace">Params</a> *p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#a8495caff1d8ed60c107a562c9ceccbf3">~Terminal</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#a6617ba3e856d8b24979a2a44e5417172">data</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#ad584a0aa9613e91193e6d6649bf6c171">read</a> (uint8_t &amp;c)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#a9f8a094b410fa145da19663f83f241e3">read</a> (uint8_t *buf, size_t len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#ada436a4b74c69ffbd4dc02b4b03d2cd3">write</a> (uint8_t c)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#a215d71301eb6ae0ebffc5d2f8fe4a140">write</a> (const uint8_t *buf, size_t len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#ac295bade8aee589f6718dfa79edc2a34">detach</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#a4200167e7f31117dce374e1885e36b1e">in</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#abd9097353ba2e3b0552d2b731196e74a">console_in</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#acc9adc1d382d03684010f95ae14318d4">out</a> (char c)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#ae2c49c57a81bf30ab522f0eb98a45035">dataAvailable</a> ()</td></tr>
<tr><td colspan="2"><h2>Public 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classUart.html">Uart</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#a367b890cb271162bf5e8d879e09192cf">uart</a></td></tr>
<tr><td colspan="2"><h2>Protected メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#ac0c44c1417536740ffc2cf33117027cf">listen</a> (int port)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#aadb9f3b844fb4cf98288cd3c60a3af91">accept</a> ()</td></tr>
<tr><td colspan="2"><h2>Protected 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTerminal_1_1ListenEvent.html">ListenEvent</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#ad7f258b1b869b6152bc5040c38b79d39">listenEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTerminal_1_1DataEvent.html">DataEvent</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#a7a8501aba170bc353fe057e372612b93">dataEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#a7106e2abc437ad981830d14176d15f09">number</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#ae9994b62da601da68d4969c52d088910">data_fd</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classListenSocket.html">ListenSocket</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#acf9ea448b26a541b4a197f1ca92f700b">listener</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCircleBuf.html">CircleBuf</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#a49636a97ed2e363e47ffc2f0e2899b66">txbuf</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCircleBuf.html">CircleBuf</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#af804c397682f3186a1fdd9919d93dea1">rxbuf</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::ostream *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#a15518d8416f4c0090ede0c9699a7bef8">outfile</a></td></tr>
<tr><td colspan="2"><h2>フレンド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#a9465cdda0008b0e7b7f9ac919cd9cca6">ListenEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTerminal.html#a8a93830b802d4fc8562fa54ead43b1f9">DataEvent</a></td></tr>
</table>
<hr/><h2>型定義</h2>
<a class="anchor" id="aa60a1659eb9e560503e47d6cbedd5ace"></a><!-- doxytag: member="Terminal::Params" ref="aa60a1659eb9e560503e47d6cbedd5ace" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef TerminalParams <a class="el" href="classTerminal.html#aa60a1659eb9e560503e47d6cbedd5ace">Params</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classSimObject.html#a0f0761d2db586a23bb2a2880b8f387bb">SimObject</a>を再定義しています。</p>

</div>
</div>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="af67625ef23fe68d37a4fc8536c093b9f"></a><!-- doxytag: member="Terminal::Terminal" ref="af67625ef23fe68d37a4fc8536c093b9f" args="(const Params *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTerminal_1_1Terminal.html">Terminal</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTerminal.html#aa60a1659eb9e560503e47d6cbedd5ace">Params</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00102"></a>00102     : <a class="code" href="classSimObject.html#a153e2844edadce7c286efc5e3a7da911">SimObject</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>), <a class="code" href="classTerminal.html#ad7f258b1b869b6152bc5040c38b79d39">listenEvent</a>(<a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>), <a class="code" href="classTerminal.html#a7a8501aba170bc353fe057e372612b93">dataEvent</a>(<a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>), <a class="code" href="classTerminal.html#a7106e2abc437ad981830d14176d15f09">number</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;number),
<a name="l00103"></a>00103       <a class="code" href="classTerminal.html#ae9994b62da601da68d4969c52d088910">data_fd</a>(-1), <a class="code" href="classTerminal.html#a49636a97ed2e363e47ffc2f0e2899b66">txbuf</a>(16384), <a class="code" href="classTerminal.html#af804c397682f3186a1fdd9919d93dea1">rxbuf</a>(16384), <a class="code" href="classTerminal.html#a15518d8416f4c0090ede0c9699a7bef8">outfile</a>(<a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>)
<a name="l00104"></a>00104 <span class="preprocessor">#if TRACING_ON == 1</span>
<a name="l00105"></a>00105 <span class="preprocessor"></span>      , linebuf(16384)
<a name="l00106"></a>00106 <span class="preprocessor">#endif</span>
<a name="l00107"></a>00107 <span class="preprocessor"></span>{
<a name="l00108"></a>00108     <span class="keywordflow">if</span> (<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;output) {
<a name="l00109"></a>00109         <a class="code" href="classTerminal.html#a15518d8416f4c0090ede0c9699a7bef8">outfile</a> = <a class="code" href="output_8cc.html#a08819d32c217c58b155584845ddadd4a">simout</a>.<a class="code" href="classOutputDirectory.html#a4b6800ca94a140ee14fcdb169be55027">find</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;name);
<a name="l00110"></a>00110         <span class="keywordflow">if</span> (!<a class="code" href="classTerminal.html#a15518d8416f4c0090ede0c9699a7bef8">outfile</a>)
<a name="l00111"></a>00111             <a class="code" href="classTerminal.html#a15518d8416f4c0090ede0c9699a7bef8">outfile</a> = <a class="code" href="output_8cc.html#a08819d32c217c58b155584845ddadd4a">simout</a>.<a class="code" href="classOutputDirectory.html#a22e4aa8ec29a265a1c299a1a009c85cc">create</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;name);
<a name="l00112"></a>00112 
<a name="l00113"></a>00113         <a class="code" href="classTerminal.html#a15518d8416f4c0090ede0c9699a7bef8">outfile</a>-&gt;setf(ios::unitbuf);
<a name="l00114"></a>00114     }
<a name="l00115"></a>00115 
<a name="l00116"></a>00116     <span class="keywordflow">if</span> (<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;port)
<a name="l00117"></a>00117         <a class="code" href="classTerminal.html#ac0c44c1417536740ffc2cf33117027cf">listen</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;port);
<a name="l00118"></a>00118 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8495caff1d8ed60c107a562c9ceccbf3"></a><!-- doxytag: member="Terminal::~Terminal" ref="a8495caff1d8ed60c107a562c9ceccbf3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classTerminal_1_1Terminal.html">Terminal</a> </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00121"></a>00121 {
<a name="l00122"></a>00122     <span class="keywordflow">if</span> (<a class="code" href="classTerminal.html#ae9994b62da601da68d4969c52d088910">data_fd</a> != -1)
<a name="l00123"></a>00123         ::close(<a class="code" href="classTerminal.html#ae9994b62da601da68d4969c52d088910">data_fd</a>);
<a name="l00124"></a>00124 
<a name="l00125"></a>00125     <span class="keywordflow">if</span> (<a class="code" href="classTerminal.html#ad7f258b1b869b6152bc5040c38b79d39">listenEvent</a>)
<a name="l00126"></a>00126         <span class="keyword">delete</span> <a class="code" href="classTerminal.html#ad7f258b1b869b6152bc5040c38b79d39">listenEvent</a>;
<a name="l00127"></a>00127 
<a name="l00128"></a>00128     <span class="keywordflow">if</span> (<a class="code" href="classTerminal.html#a7a8501aba170bc353fe057e372612b93">dataEvent</a>)
<a name="l00129"></a>00129         <span class="keyword">delete</span> <a class="code" href="classTerminal.html#a7a8501aba170bc353fe057e372612b93">dataEvent</a>;
<a name="l00130"></a>00130 }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="aadb9f3b844fb4cf98288cd3c60a3af91"></a><!-- doxytag: member="Terminal::accept" ref="aadb9f3b844fb4cf98288cd3c60a3af91" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void accept </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00163"></a>00163 {
<a name="l00164"></a>00164     <span class="keywordflow">if</span> (!<a class="code" href="classTerminal.html#acf9ea448b26a541b4a197f1ca92f700b">listener</a>.<a class="code" href="classListenSocket.html#a2848e5513ce657609b8210b7d23e4f6b">islistening</a>())
<a name="l00165"></a>00165         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;%s: cannot accept a connection if not listening!&quot;</span>, <a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>());
<a name="l00166"></a>00166 
<a name="l00167"></a>00167     <span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a87001e8063b8b1b5dc88f5a4b43b2a5a">fd</a> = <a class="code" href="classTerminal.html#acf9ea448b26a541b4a197f1ca92f700b">listener</a>.<a class="code" href="classListenSocket.html#a456b2a8397007045eca1f89d086b5778">accept</a>(<span class="keyword">true</span>);
<a name="l00168"></a>00168     <span class="keywordflow">if</span> (<a class="code" href="classTerminal.html#ae9994b62da601da68d4969c52d088910">data_fd</a> != -1) {
<a name="l00169"></a>00169         <span class="keywordtype">char</span> message[] = <span class="stringliteral">&quot;terminal already attached!\n&quot;</span>;
<a name="l00170"></a>00170         <a class="code" href="atomicio_8cc.html#a301f476c6c8d75d54f43aea6ad1ff740">atomic_write</a>(fd, message, <span class="keyword">sizeof</span>(message));
<a name="l00171"></a>00171         ::close(fd);
<a name="l00172"></a>00172         <span class="keywordflow">return</span>;
<a name="l00173"></a>00173     }
<a name="l00174"></a>00174 
<a name="l00175"></a>00175     <a class="code" href="classTerminal.html#ae9994b62da601da68d4969c52d088910">data_fd</a> = fd;
<a name="l00176"></a>00176     <a class="code" href="classTerminal.html#a7a8501aba170bc353fe057e372612b93">dataEvent</a> = <span class="keyword">new</span> <a class="code" href="classTerminal.html#a8a93830b802d4fc8562fa54ead43b1f9">DataEvent</a>(<span class="keyword">this</span>, <a class="code" href="classTerminal.html#ae9994b62da601da68d4969c52d088910">data_fd</a>, POLLIN);
<a name="l00177"></a>00177     <a class="code" href="pollevent_8cc.html#a6d9704e1e32950ea3b587e96e8873739">pollQueue</a>.<a class="code" href="classPollQueue.html#a3f09bc14c53cce046dfdc7d11c96bb72">schedule</a>(<a class="code" href="classTerminal.html#a7a8501aba170bc353fe057e372612b93">dataEvent</a>);
<a name="l00178"></a>00178 
<a name="l00179"></a>00179     stringstream stream;
<a name="l00180"></a>00180     <a class="code" href="cprintf_8hh.html#ab172c0b086575bda3d04daee7df17da1">ccprintf</a>(stream, <span class="stringliteral">&quot;==== m5 slave terminal: Terminal %d ====&quot;</span>, <a class="code" href="classTerminal.html#a7106e2abc437ad981830d14176d15f09">number</a>);
<a name="l00181"></a>00181 
<a name="l00182"></a>00182     <span class="comment">// we need an actual carriage return followed by a newline for the</span>
<a name="l00183"></a>00183     <span class="comment">// terminal</span>
<a name="l00184"></a>00184     stream &lt;&lt; <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00185"></a>00185 
<a name="l00186"></a>00186     <a class="code" href="classTerminal.html#ada436a4b74c69ffbd4dc02b4b03d2cd3">write</a>((<span class="keyword">const</span> uint8_t *)stream.str().c_str(), stream.str().size());
<a name="l00187"></a>00187 
<a name="l00188"></a>00188     <a class="code" href="trace_8hh.html#a8743588cbe0ed2266fabe1090b16da34">DPRINTFN</a>(<span class="stringliteral">&quot;attach terminal %d\n&quot;</span>, <a class="code" href="classTerminal.html#a7106e2abc437ad981830d14176d15f09">number</a>);
<a name="l00189"></a>00189 
<a name="l00190"></a>00190     <a class="code" href="classTerminal.html#a49636a97ed2e363e47ffc2f0e2899b66">txbuf</a>.<a class="code" href="classCircleBuf.html#a3c78951b2792a613e4cff9194ced196c">readall</a>(<a class="code" href="classTerminal.html#ae9994b62da601da68d4969c52d088910">data_fd</a>);
<a name="l00191"></a>00191 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="abd9097353ba2e3b0552d2b731196e74a"></a><!-- doxytag: member="Terminal::console_in" ref="abd9097353ba2e3b0552d2b731196e74a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t console_in </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00280"></a>00280 {
<a name="l00281"></a>00281     uint64_t <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a>;
<a name="l00282"></a>00282 
<a name="l00283"></a>00283     <span class="keywordflow">if</span> (<a class="code" href="classTerminal.html#ae2c49c57a81bf30ab522f0eb98a45035">dataAvailable</a>()) {
<a name="l00284"></a>00284         value = <a class="code" href="terminal_8cc.html#ab1d19677ea24d48495d9727835a48843">RECEIVE_SUCCESS</a> | <a class="code" href="classTerminal.html#a4200167e7f31117dce374e1885e36b1e">in</a>();
<a name="l00285"></a>00285         <span class="keywordflow">if</span> (!<a class="code" href="classTerminal.html#af804c397682f3186a1fdd9919d93dea1">rxbuf</a>.<a class="code" href="classCircleBuf.html#ac6e61de369e994009e36f344f99c15ad">empty</a>())
<a name="l00286"></a>00286             value  |= <a class="code" href="terminal_8cc.html#abcdd42aa334a3a7c2dc8543a57f6abdb">MORE_PENDING</a>;
<a name="l00287"></a>00287     } <span class="keywordflow">else</span> {
<a name="l00288"></a>00288         value = <a class="code" href="terminal_8cc.html#a5e81322e710eb60db1e05a97b8a235e6">RECEIVE_NONE</a>;
<a name="l00289"></a>00289     }
<a name="l00290"></a>00290 
<a name="l00291"></a>00291     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(TerminalVerbose, <span class="stringliteral">&quot;console_in: return: %#x\n&quot;</span>, value);
<a name="l00292"></a>00292 
<a name="l00293"></a>00293     <span class="keywordflow">return</span> value;
<a name="l00294"></a>00294 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6617ba3e856d8b24979a2a44e5417172"></a><!-- doxytag: member="Terminal::data" ref="a6617ba3e856d8b24979a2a44e5417172" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void data </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00210"></a>00210 {
<a name="l00211"></a>00211     uint8_t buf[1024];
<a name="l00212"></a>00212     <span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a41a9f22a6c7645fac2f8d633371e354d">len</a>;
<a name="l00213"></a>00213 
<a name="l00214"></a>00214     len = <a class="code" href="classTerminal.html#ad584a0aa9613e91193e6d6649bf6c171">read</a>(buf, <span class="keyword">sizeof</span>(buf));
<a name="l00215"></a>00215     <span class="keywordflow">if</span> (len) {
<a name="l00216"></a>00216         <a class="code" href="classTerminal.html#af804c397682f3186a1fdd9919d93dea1">rxbuf</a>.<a class="code" href="classCircleBuf.html#a03ed9bf9f1a85f8085db042491f62b1d">write</a>((<span class="keywordtype">char</span> *)buf, len);
<a name="l00217"></a>00217         <span class="comment">// Inform the UART there is data available</span>
<a name="l00218"></a>00218         <a class="code" href="classTerminal.html#a367b890cb271162bf5e8d879e09192cf">uart</a>-&gt;<a class="code" href="classUart.html#a8e0026e4db90ce7efbddf2835f411b0b">dataAvailable</a>();
<a name="l00219"></a>00219     }
<a name="l00220"></a>00220 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae2c49c57a81bf30ab522f0eb98a45035"></a><!-- doxytag: member="Terminal::dataAvailable" ref="ae2c49c57a81bf30ab522f0eb98a45035" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool dataAvailable </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00143"></a>00143 { <span class="keywordflow">return</span> !<a class="code" href="classTerminal.html#af804c397682f3186a1fdd9919d93dea1">rxbuf</a>.<a class="code" href="classCircleBuf.html#ac6e61de369e994009e36f344f99c15ad">empty</a>(); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac295bade8aee589f6718dfa79edc2a34"></a><!-- doxytag: member="Terminal::detach" ref="ac295bade8aee589f6718dfa79edc2a34" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void detach </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00195"></a>00195 {
<a name="l00196"></a>00196     <span class="keywordflow">if</span> (<a class="code" href="classTerminal.html#ae9994b62da601da68d4969c52d088910">data_fd</a> != -1) {
<a name="l00197"></a>00197         ::close(<a class="code" href="classTerminal.html#ae9994b62da601da68d4969c52d088910">data_fd</a>);
<a name="l00198"></a>00198         <a class="code" href="classTerminal.html#ae9994b62da601da68d4969c52d088910">data_fd</a> = -1;
<a name="l00199"></a>00199     }
<a name="l00200"></a>00200 
<a name="l00201"></a>00201     <a class="code" href="pollevent_8cc.html#a6d9704e1e32950ea3b587e96e8873739">pollQueue</a>.<a class="code" href="classPollQueue.html#a4b43e98813c26772adf0d7488dfa1887">remove</a>(<a class="code" href="classTerminal.html#a7a8501aba170bc353fe057e372612b93">dataEvent</a>);
<a name="l00202"></a>00202     <span class="keyword">delete</span> <a class="code" href="classTerminal.html#a7a8501aba170bc353fe057e372612b93">dataEvent</a>;
<a name="l00203"></a>00203     <a class="code" href="classTerminal.html#a7a8501aba170bc353fe057e372612b93">dataEvent</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00204"></a>00204 
<a name="l00205"></a>00205     <a class="code" href="trace_8hh.html#a8743588cbe0ed2266fabe1090b16da34">DPRINTFN</a>(<span class="stringliteral">&quot;detach terminal %d\n&quot;</span>, <a class="code" href="classTerminal.html#a7106e2abc437ad981830d14176d15f09">number</a>);
<a name="l00206"></a>00206 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4200167e7f31117dce374e1885e36b1e"></a><!-- doxytag: member="Terminal::in" ref="a4200167e7f31117dce374e1885e36b1e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t in </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00266"></a>00266 {
<a name="l00267"></a>00267     uint8_t <a class="code" href="namespaceArmISA.html#a29b9f05234a93d5391014a3cfc5658b1">c</a>;
<a name="l00268"></a>00268 
<a name="l00269"></a>00269     assert(!<a class="code" href="classTerminal.html#af804c397682f3186a1fdd9919d93dea1">rxbuf</a>.<a class="code" href="classCircleBuf.html#ac6e61de369e994009e36f344f99c15ad">empty</a>());
<a name="l00270"></a>00270     <a class="code" href="classTerminal.html#af804c397682f3186a1fdd9919d93dea1">rxbuf</a>.<a class="code" href="classCircleBuf.html#a208ffb7fc988270a34244c2004d9a6e2">read</a>((<span class="keywordtype">char</span> *)&amp;c, 1);
<a name="l00271"></a>00271 
<a name="l00272"></a>00272     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(TerminalVerbose, <span class="stringliteral">&quot;in: \&apos;%c\&apos; %#02x more: %d\n&quot;</span>,
<a name="l00273"></a>00273             isprint(c) ? c : <span class="charliteral">&apos; &apos;</span>, c, !<a class="code" href="classTerminal.html#af804c397682f3186a1fdd9919d93dea1">rxbuf</a>.<a class="code" href="classCircleBuf.html#ac6e61de369e994009e36f344f99c15ad">empty</a>());
<a name="l00274"></a>00274 
<a name="l00275"></a>00275     <span class="keywordflow">return</span> c;
<a name="l00276"></a>00276 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac0c44c1417536740ffc2cf33117027cf"></a><!-- doxytag: member="Terminal::listen" ref="ac0c44c1417536740ffc2cf33117027cf" args="(int port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void listen </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>port</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00138"></a>00138 {
<a name="l00139"></a>00139     <span class="keywordflow">if</span> (<a class="code" href="classListenSocket.html#a70ba2cf446c7e6363080efd46cd330c5">ListenSocket::allDisabled</a>()) {
<a name="l00140"></a>00140         <a class="code" href="base_2misc_8hh.html#abb243c15dfbeedf4ae64aa213f4f18c7">warn_once</a>(<span class="stringliteral">&quot;Sockets disabled, not accepting terminal connections&quot;</span>);
<a name="l00141"></a>00141         <span class="keywordflow">return</span>;
<a name="l00142"></a>00142     }
<a name="l00143"></a>00143 
<a name="l00144"></a>00144     <span class="keywordflow">while</span> (!<a class="code" href="classTerminal.html#acf9ea448b26a541b4a197f1ca92f700b">listener</a>.<a class="code" href="classListenSocket.html#adc0204f049c93d5c4ed27c604d1127a4">listen</a>(port, <span class="keyword">true</span>)) {
<a name="l00145"></a>00145         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classTerminal.html">Terminal</a>,
<a name="l00146"></a>00146                 <span class="stringliteral">&quot;: can&apos;t bind address terminal port %d inuse PID %d\n&quot;</span>,
<a name="l00147"></a>00147                 port, getpid());
<a name="l00148"></a>00148         port++;
<a name="l00149"></a>00149     }
<a name="l00150"></a>00150 
<a name="l00151"></a>00151     <span class="keywordtype">int</span> p1, p2;
<a name="l00152"></a>00152     p2 = <a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>().rfind(<span class="charliteral">&apos;.&apos;</span>) - 1;
<a name="l00153"></a>00153     p1 = <a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>().rfind(<span class="charliteral">&apos;.&apos;</span>, p2);
<a name="l00154"></a>00154     <a class="code" href="cprintf_8hh.html#ab172c0b086575bda3d04daee7df17da1">ccprintf</a>(cerr, <span class="stringliteral">&quot;Listening for %s connection on port %d\n&quot;</span>,
<a name="l00155"></a>00155             <a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>().substr(p1+1,p2-p1), port);
<a name="l00156"></a>00156 
<a name="l00157"></a>00157     <a class="code" href="classTerminal.html#ad7f258b1b869b6152bc5040c38b79d39">listenEvent</a> = <span class="keyword">new</span> <a class="code" href="classTerminal.html#a9465cdda0008b0e7b7f9ac919cd9cca6">ListenEvent</a>(<span class="keyword">this</span>, <a class="code" href="classTerminal.html#acf9ea448b26a541b4a197f1ca92f700b">listener</a>.<a class="code" href="classListenSocket.html#a6246250322a585921fc1e9d27b0d7b80">getfd</a>(), POLLIN);
<a name="l00158"></a>00158     <a class="code" href="pollevent_8cc.html#a6d9704e1e32950ea3b587e96e8873739">pollQueue</a>.<a class="code" href="classPollQueue.html#a3f09bc14c53cce046dfdc7d11c96bb72">schedule</a>(<a class="code" href="classTerminal.html#ad7f258b1b869b6152bc5040c38b79d39">listenEvent</a>);
<a name="l00159"></a>00159 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acc9adc1d382d03684010f95ae14318d4"></a><!-- doxytag: member="Terminal::out" ref="acc9adc1d382d03684010f95ae14318d4" args="(char c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void out </td>
          <td>(</td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>c</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00298"></a>00298 {
<a name="l00299"></a>00299 <span class="preprocessor">#if TRACING_ON == 1</span>
<a name="l00300"></a>00300 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="trace_8hh.html#af76c9f7776aade1bf9d7dfa8a0c6b341">DTRACE</a>(<a class="code" href="classTerminal.html">Terminal</a>)) {
<a name="l00301"></a>00301         <span class="keyword">static</span> <span class="keywordtype">char</span> last = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l00302"></a>00302 
<a name="l00303"></a>00303         <span class="keywordflow">if</span> ((<a class="code" href="namespaceArmISA.html#a29b9f05234a93d5391014a3cfc5658b1">c</a> != <span class="charliteral">&apos;\n&apos;</span> &amp;&amp; <a class="code" href="namespaceArmISA.html#a29b9f05234a93d5391014a3cfc5658b1">c</a> != <span class="charliteral">&apos;\r&apos;</span>) || (last != <span class="charliteral">&apos;\n&apos;</span> &amp;&amp; last != <span class="charliteral">&apos;\r&apos;</span>)) {
<a name="l00304"></a>00304             <span class="keywordflow">if</span> (<a class="code" href="namespaceArmISA.html#a29b9f05234a93d5391014a3cfc5658b1">c</a> == <span class="charliteral">&apos;\n&apos;</span> || <a class="code" href="namespaceArmISA.html#a29b9f05234a93d5391014a3cfc5658b1">c</a> == <span class="charliteral">&apos;\r&apos;</span>) {
<a name="l00305"></a>00305                 <span class="keywordtype">int</span> size = linebuf.size();
<a name="l00306"></a>00306                 <span class="keywordtype">char</span> *buffer = <span class="keyword">new</span> <span class="keywordtype">char</span>[size + 1];
<a name="l00307"></a>00307                 linebuf.read(buffer, size);
<a name="l00308"></a>00308                 buffer[size] = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l00309"></a>00309                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classTerminal.html">Terminal</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, buffer);
<a name="l00310"></a>00310                 <span class="keyword">delete</span> [] buffer;
<a name="l00311"></a>00311             } <span class="keywordflow">else</span> {
<a name="l00312"></a>00312                 linebuf.write(<a class="code" href="namespaceArmISA.html#a29b9f05234a93d5391014a3cfc5658b1">c</a>);
<a name="l00313"></a>00313             }
<a name="l00314"></a>00314         }
<a name="l00315"></a>00315 
<a name="l00316"></a>00316         last = <a class="code" href="namespaceArmISA.html#a29b9f05234a93d5391014a3cfc5658b1">c</a>;
<a name="l00317"></a>00317     }
<a name="l00318"></a>00318 <span class="preprocessor">#endif</span>
<a name="l00319"></a>00319 <span class="preprocessor"></span>
<a name="l00320"></a>00320     <a class="code" href="classTerminal.html#a49636a97ed2e363e47ffc2f0e2899b66">txbuf</a>.<a class="code" href="classCircleBuf.html#a03ed9bf9f1a85f8085db042491f62b1d">write</a>(<a class="code" href="namespaceArmISA.html#a29b9f05234a93d5391014a3cfc5658b1">c</a>);
<a name="l00321"></a>00321 
<a name="l00322"></a>00322     <span class="keywordflow">if</span> (<a class="code" href="classTerminal.html#ae9994b62da601da68d4969c52d088910">data_fd</a> &gt;= 0)
<a name="l00323"></a>00323         <a class="code" href="classTerminal.html#ada436a4b74c69ffbd4dc02b4b03d2cd3">write</a>(<a class="code" href="namespaceArmISA.html#a29b9f05234a93d5391014a3cfc5658b1">c</a>);
<a name="l00324"></a>00324 
<a name="l00325"></a>00325     <span class="keywordflow">if</span> (<a class="code" href="classTerminal.html#a15518d8416f4c0090ede0c9699a7bef8">outfile</a>)
<a name="l00326"></a>00326         <a class="code" href="classTerminal.html#a15518d8416f4c0090ede0c9699a7bef8">outfile</a>-&gt;write(&amp;<a class="code" href="namespaceArmISA.html#a29b9f05234a93d5391014a3cfc5658b1">c</a>, 1);
<a name="l00327"></a>00327 
<a name="l00328"></a>00328     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(TerminalVerbose, <span class="stringliteral">&quot;out: \&apos;%c\&apos; %#02x\n&quot;</span>,
<a name="l00329"></a>00329             isprint(<a class="code" href="namespaceArmISA.html#a29b9f05234a93d5391014a3cfc5658b1">c</a>) ? <a class="code" href="namespaceArmISA.html#a29b9f05234a93d5391014a3cfc5658b1">c</a> : <span class="charliteral">&apos; &apos;</span>, (<span class="keywordtype">int</span>)c);
<a name="l00330"></a>00330 
<a name="l00331"></a>00331 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9f8a094b410fa145da19663f83f241e3"></a><!-- doxytag: member="Terminal::read" ref="a9f8a094b410fa145da19663f83f241e3" args="(uint8_t *buf, size_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t read </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00224"></a>00224 {
<a name="l00225"></a>00225     <span class="keywordflow">if</span> (<a class="code" href="classTerminal.html#ae9994b62da601da68d4969c52d088910">data_fd</a> &lt; 0)
<a name="l00226"></a>00226         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Terminal not properly attached.\n&quot;</span>);
<a name="l00227"></a>00227 
<a name="l00228"></a>00228     <span class="keywordtype">size_t</span> ret;
<a name="l00229"></a>00229     <span class="keywordflow">do</span> {
<a name="l00230"></a>00230       ret =<a class="code" href="classTerminal.html#ad584a0aa9613e91193e6d6649bf6c171"> ::read</a>(<a class="code" href="classTerminal.html#ae9994b62da601da68d4969c52d088910">data_fd</a>, buf, <a class="code" href="namespaceArmISA.html#a41a9f22a6c7645fac2f8d633371e354d">len</a>);
<a name="l00231"></a>00231     } <span class="keywordflow">while</span> (ret == -1 &amp;&amp; errno == EINTR);
<a name="l00232"></a>00232 
<a name="l00233"></a>00233 
<a name="l00234"></a>00234     <span class="keywordflow">if</span> (ret &lt; 0)
<a name="l00235"></a>00235         <a class="code" href="trace_8hh.html#a8743588cbe0ed2266fabe1090b16da34">DPRINTFN</a>(<span class="stringliteral">&quot;Read failed.\n&quot;</span>);
<a name="l00236"></a>00236 
<a name="l00237"></a>00237     <span class="keywordflow">if</span> (ret &lt;= 0) {
<a name="l00238"></a>00238         <a class="code" href="classTerminal.html#ac295bade8aee589f6718dfa79edc2a34">detach</a>();
<a name="l00239"></a>00239         <span class="keywordflow">return</span> 0;
<a name="l00240"></a>00240     }
<a name="l00241"></a>00241 
<a name="l00242"></a>00242     <span class="keywordflow">return</span> ret;
<a name="l00243"></a>00243 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad584a0aa9613e91193e6d6649bf6c171"></a><!-- doxytag: member="Terminal::read" ref="ad584a0aa9613e91193e6d6649bf6c171" args="(uint8_t &amp;c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void read </td>
          <td>(</td>
          <td class="paramtype">uint8_t &amp;&nbsp;</td>
          <td class="paramname"> <em>c</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00112"></a>00112 { <a class="code" href="classTerminal.html#ad584a0aa9613e91193e6d6649bf6c171">read</a>(&amp;<a class="code" href="namespaceArmISA.html#a29b9f05234a93d5391014a3cfc5658b1">c</a>, 1); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a215d71301eb6ae0ebffc5d2f8fe4a140"></a><!-- doxytag: member="Terminal::write" ref="a215d71301eb6ae0ebffc5d2f8fe4a140" args="(const uint8_t *buf, size_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t write </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00248"></a>00248 {
<a name="l00249"></a>00249     <span class="keywordflow">if</span> (<a class="code" href="classTerminal.html#ae9994b62da601da68d4969c52d088910">data_fd</a> &lt; 0)
<a name="l00250"></a>00250         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Terminal not properly attached.\n&quot;</span>);
<a name="l00251"></a>00251 
<a name="l00252"></a>00252     ssize_t ret = <a class="code" href="atomicio_8cc.html#a301f476c6c8d75d54f43aea6ad1ff740">atomic_write</a>(<a class="code" href="classTerminal.html#ae9994b62da601da68d4969c52d088910">data_fd</a>, buf, <a class="code" href="namespaceArmISA.html#a41a9f22a6c7645fac2f8d633371e354d">len</a>);
<a name="l00253"></a>00253     <span class="keywordflow">if</span> (ret &lt; <a class="code" href="namespaceArmISA.html#a41a9f22a6c7645fac2f8d633371e354d">len</a>)
<a name="l00254"></a>00254         <a class="code" href="classTerminal.html#ac295bade8aee589f6718dfa79edc2a34">detach</a>();
<a name="l00255"></a>00255 
<a name="l00256"></a>00256     <span class="keywordflow">return</span> ret;
<a name="l00257"></a>00257 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ada436a4b74c69ffbd4dc02b4b03d2cd3"></a><!-- doxytag: member="Terminal::write" ref="ada436a4b74c69ffbd4dc02b4b03d2cd3" args="(uint8_t c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void write </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>c</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00114"></a>00114 { <a class="code" href="classTerminal.html#ada436a4b74c69ffbd4dc02b4b03d2cd3">write</a>(&amp;<a class="code" href="namespaceArmISA.html#a29b9f05234a93d5391014a3cfc5658b1">c</a>, 1); }
</pre></div></p>

</div>
</div>
<hr/><h2>フレンドと関連する関数</h2>
<a class="anchor" id="a8a93830b802d4fc8562fa54ead43b1f9"></a><!-- doxytag: member="Terminal::DataEvent" ref="a8a93830b802d4fc8562fa54ead43b1f9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classTerminal_1_1DataEvent.html">DataEvent</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9465cdda0008b0e7b7f9ac919cd9cca6"></a><!-- doxytag: member="Terminal::ListenEvent" ref="a9465cdda0008b0e7b7f9ac919cd9cca6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classTerminal_1_1ListenEvent.html">ListenEvent</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="ae9994b62da601da68d4969c52d088910"></a><!-- doxytag: member="Terminal::data_fd" ref="ae9994b62da601da68d4969c52d088910" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classTerminal.html#ae9994b62da601da68d4969c52d088910">data_fd</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a7a8501aba170bc353fe057e372612b93"></a><!-- doxytag: member="Terminal::dataEvent" ref="a7a8501aba170bc353fe057e372612b93" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTerminal_1_1DataEvent.html">DataEvent</a>* <a class="el" href="classTerminal.html#a7a8501aba170bc353fe057e372612b93">dataEvent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="acf9ea448b26a541b4a197f1ca92f700b"></a><!-- doxytag: member="Terminal::listener" ref="acf9ea448b26a541b4a197f1ca92f700b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classListenSocket.html">ListenSocket</a> <a class="el" href="classTerminal.html#acf9ea448b26a541b4a197f1ca92f700b">listener</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad7f258b1b869b6152bc5040c38b79d39"></a><!-- doxytag: member="Terminal::listenEvent" ref="ad7f258b1b869b6152bc5040c38b79d39" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTerminal_1_1ListenEvent.html">ListenEvent</a>* <a class="el" href="classTerminal.html#ad7f258b1b869b6152bc5040c38b79d39">listenEvent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a7106e2abc437ad981830d14176d15f09"></a><!-- doxytag: member="Terminal::number" ref="a7106e2abc437ad981830d14176d15f09" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classTerminal.html#a7106e2abc437ad981830d14176d15f09">number</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a15518d8416f4c0090ede0c9699a7bef8"></a><!-- doxytag: member="Terminal::outfile" ref="a15518d8416f4c0090ede0c9699a7bef8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream* <a class="el" href="classTerminal.html#a15518d8416f4c0090ede0c9699a7bef8">outfile</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="af804c397682f3186a1fdd9919d93dea1"></a><!-- doxytag: member="Terminal::rxbuf" ref="af804c397682f3186a1fdd9919d93dea1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCircleBuf.html">CircleBuf</a> <a class="el" href="classTerminal.html#af804c397682f3186a1fdd9919d93dea1">rxbuf</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a49636a97ed2e363e47ffc2f0e2899b66"></a><!-- doxytag: member="Terminal::txbuf" ref="a49636a97ed2e363e47ffc2f0e2899b66" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCircleBuf.html">CircleBuf</a> <a class="el" href="classTerminal.html#a49636a97ed2e363e47ffc2f0e2899b66">txbuf</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a367b890cb271162bf5e8d879e09192cf"></a><!-- doxytag: member="Terminal::uart" ref="a367b890cb271162bf5e8d879e09192cf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classUart.html">Uart</a>* <a class="el" href="classTerminal.html#a367b890cb271162bf5e8d879e09192cf">uart</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>dev/<a class="el" href="terminal_8hh_source.html">terminal.hh</a></li>
<li>dev/<a class="el" href="terminal_8cc.html">terminal.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
