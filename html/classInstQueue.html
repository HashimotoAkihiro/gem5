<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス テンプレート InstQueue&lt; Impl &gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>クラス テンプレート InstQueue&lt; Impl &gt;</h1><!-- doxytag: class="InstQueue" -->
<p><code>#include &lt;<a class="el" href="ozone_2inst__queue_8hh_source.html">inst_queue.hh</a>&gt;</code></p>

<p><a href="classInstQueue-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>構成</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structInstQueue_1_1IQEntry.html">IQEntry</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structInstQueue_1_1pqCompare.html">pqCompare</a></td></tr>
<tr><td colspan="2"><h2>Public 型</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef Impl::FullCPU&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a90ba84e54618cc07f2e8f05e046cb5ce">FullCPU</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef Impl::DynInstPtr&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef Impl::Params&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a818e103eae798a24a06a0a34631849ea">Params</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef Impl::IssueStruct&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a568c86f6403070f1cb743e994405ba8b">IssueStruct</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classstd_1_1list.html">std::list</a>&lt; <a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &gt;<br class="typebreak"/>
::iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a184cb829e22cc656acb41864f68f51ea">ListIt</a></td></tr>
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a679ee5512f178ea331ab7cd3ebf2aa78">InstQueue</a> (<a class="el" href="classInstQueue.html#a818e103eae798a24a06a0a34631849ea">Params</a> *params)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#aac3885a1c3df6261e14208fc83713c17">~InstQueue</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a4dc637449366fcdfc4e764cdf12d9b11">regStats</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#aa783e99c55fd8695cb33c087d14bece0">setCPU</a> (<a class="el" href="classInstQueue.html#a90ba84e54618cc07f2e8f05e046cb5ce">FullCPU</a> *_cpu)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a7cbe625b8c47621898e7ca92d70c826b">setIssueToExecuteQueue</a> (<a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt; <a class="el" href="structIssueStruct.html">IssueStruct</a> &gt; *i2eQueue)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a028971a565aca048c67ea1c36a6a9d51">numFreeEntries</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#acc878f608deead5b5319a6a3f98b50c8">numFreeEntries</a> (<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a3e70330939fdfc4dbc2f60c1a660584d">isFull</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a30fac732df9b3fda011c7329a112cb31">isFull</a> (<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#ae59aad9cee1e45b5817a9d96553e4567">hasReadyInsts</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a786595aecf8ab7aae40868b5ac4a79a7">insert</a> (<a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;new_inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a4f7523e76440d88096a4eac14f2e0dd3">insertNonSpec</a> (<a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;new_inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a3694e72427d3a616808797f9343d1fc4">scheduleReadyInsts</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a15ca5aaeab5bd4c2169ed41bbc7fb79c">scheduleNonSpec</a> (const <a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> &amp;inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a04f8d2acf3cd0b90a1efc69b528f91bc">commit</a> (const <a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> &amp;inst, <a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#ab9afe94d332a563b9485d1bb9acd68b4">wakeDependents</a> (<a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;completed_inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a76bcc078140b3e79923f7b5be8b302fb">addReadyMemInst</a> (<a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;ready_inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#aad2715729f71f220e9cf9b99515384ca">completeMemInst</a> (<a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;completed_inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#ad33d65c18c323d90695d7c2355b49af9">squash</a> (<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#aaf7eb96b7ab2a8240d043b7d82494d15">getCount</a> (<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a358bf0d85e8cd8b606877b341c518b5e">updateFreeEntries</a> (int num)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#afc9c0c90c27fe0dc8bd4da915596bc21">printInsts</a> ()</td></tr>
<tr><td colspan="2"><h2>Private 型</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::priority_queue<br class="typebreak"/>
&lt; <a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>, <a class="el" href="classstd_1_1vector.html">std::vector</a><br class="typebreak"/>
&lt; <a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &gt;, <a class="el" href="structInstQueue_1_1pqCompare.html">pqCompare</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a60636ae8f3b649078c4f1bdd3b20dcad">ReadyInstQueue</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; <a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>, <br class="typebreak"/>
<a class="el" href="structInstQueue_1_1pqCompare.html">pqCompare</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#afca3a0ab9af7309428eb77c726724000">ReadyInstMap</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; <a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>, <br class="typebreak"/>
<a class="el" href="structInstQueue_1_1pqCompare.html">pqCompare</a> &gt;::iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a2ab2a44e2b7c4b408ceda3a9a2422ecb">ReadyMapIt</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; <a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a>, <br class="typebreak"/>
<a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &gt;::iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a0e9597437fae9e60d5449933949416ec">NonSpecMapIt</a></td></tr>
<tr><td colspan="2"><h2>Private メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a06cf52c4f09162bea03ec848f247151a">doSquash</a> (<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a7e3f1fa43ca939ed6fd9b3abcc47f06e">addIfReady</a> (<a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#ab654970f03abd90f0c397bba8e218bc9">countInsts</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a3d1dae45e8e0b5cf7c1f4f8c796d070e">dumpLists</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a80587b4fe043bbe1995536cb3b361588">dumpInsts</a> ()</td></tr>
<tr><td colspan="2"><h2>Private 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classInstQueue.html#a90ba84e54618cc07f2e8f05e046cb5ce">FullCPU</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a766385c2941cd46525f4d9dff90200a2">cpu</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">MemInterface *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a22dc8294eecb144fbdd951d2e32e9330">dcacheInterface</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt; <a class="el" href="structIssueStruct.html">IssueStruct</a> &gt; *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#af5c55240e63d9a13358eede4eb5352f1">issueToExecuteQueue</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1list.html">std::list</a>&lt; <a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a7f2828a4f877a4a4d4b85a6788536b82">instList</a> [Impl::MaxThreads]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classInstQueue.html#a60636ae8f3b649078c4f1bdd3b20dcad">ReadyInstQueue</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a73e22f052c708ca5c198bd0a01eb3604">readyInsts</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a>, <a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#ac0ba4d07026aaf6386c001a68d059cbf">nonSpecInsts</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a792311f13ea91008a88e902ef13b0341">numThreads</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#ac638062ba1de6609f143c5ee3a601109">count</a> [Impl::MaxThreads]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a51e5f9f0cb40d61e95b1518f1be90b73">maxEntries</a> [Impl::MaxThreads]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#ac2281ff630f82397bda33269f4ee8796">freeEntries</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a325de474a9f6652329339d9fc2ea09c0">numEntries</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#ab3c3a8cd00248d9cd6acad330da902a7">totalWidth</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a92c8d68d5f0e17758f89daa2647196f5">commitToIEWDelay</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a97d5a7e4630ad1d017909f7504b9ec32">squashedSeqNum</a> [Impl::MaxThreads]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classInstQueue.html#a184cb829e22cc656acb41864f68f51ea">ListIt</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a76b506d03788e72757da427226e10356">squashIt</a> [Impl::MaxThreads]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a435e1ce10c3a7f54a60941e583adeb09">iqInstsAdded</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#adf890a08fae50ea8249171b07c40adac">iqNonSpecInstsAdded</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a735f2023e70e53b7889a3a316bd3d57f">iqIntInstsIssued</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#aa9f2fa124c9f0b4b22461b6717449d9a">iqFloatInstsIssued</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a928f22a2c6ce592adc40e5242c9d6572">iqBranchInstsIssued</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a5e7d55d3f07e86e389ca3a715766e108">iqMemInstsIssued</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#ad234890bc414fffe7ed71840c51be5cb">iqMiscInstsIssued</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#ac91799c895e5aff3af0afdbd7691a163">iqSquashedInstsIssued</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a8312e8984bcfab5a77de40e1738103db">iqSquashedInstsExamined</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a4398b6005b81008bd163bbba78dfd929">iqSquashedOperandsExamined</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a6c0b47431b6e84536fd9bb61624d6d97">iqSquashedNonSpecRemoved</a></td></tr>
<tr><td colspan="2"><h2>フレンド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInstQueue.html#a0b1390899d1d55620476dd762bd7ac6c">Impl::FullCPU</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>説明</h2>
<h3>template&lt;class Impl&gt;<br/>
 class InstQueue&lt; Impl &gt;</h3>

<p>A standard instruction queue class. It holds ready instructions, in order, in seperate priority queues to facilitate the scheduling of instructions. The IQ uses a separate linked list to track dependencies. Similar to the rename map and the free list, it expects that floating point registers have their indices start after the integer registers (ie with 96 int and 96 fp registers, regs 0-95 are integer and 96-191 are fp). This remains true even for both logical and physical register indices. The IQ depends on the memory dependence unit to track when memory operations are ready in terms of ordering; register dependencies are tracked normally. Right now the IQ also handles the execution timing; this is mainly to allow back-to-back scheduling without requiring IEW to be able to peek into the IQ. At the end of the execution latency, the instruction is put into the queue to execute, where it will have the execute() function called on it. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000042">TODO:</a></b></dt><dd>: Make IQ able to handle multiple FU pools. </dd></dl>
<hr/><h2>型定義</h2>
<a class="anchor" id="a028ce10889c5f6450239d9e9a7347976"></a><!-- doxytag: member="InstQueue::DynInstPtr" ref="a028ce10889c5f6450239d9e9a7347976" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef Impl::DynInstPtr <a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a90ba84e54618cc07f2e8f05e046cb5ce"></a><!-- doxytag: member="InstQueue::FullCPU" ref="a90ba84e54618cc07f2e8f05e046cb5ce" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef Impl::FullCPU <a class="el" href="classInstQueue.html#a90ba84e54618cc07f2e8f05e046cb5ce">FullCPU</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a568c86f6403070f1cb743e994405ba8b"></a><!-- doxytag: member="InstQueue::IssueStruct" ref="a568c86f6403070f1cb743e994405ba8b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef Impl::IssueStruct <a class="el" href="structIssueStruct.html">IssueStruct</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a184cb829e22cc656acb41864f68f51ea"></a><!-- doxytag: member="InstQueue::ListIt" ref="a184cb829e22cc656acb41864f68f51ea" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classstd_1_1list.html">std::list</a>&lt;<a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>&gt;::iterator <a class="el" href="classInstQueue.html#a184cb829e22cc656acb41864f68f51ea">ListIt</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0e9597437fae9e60d5449933949416ec"></a><!-- doxytag: member="InstQueue::NonSpecMapIt" ref="a0e9597437fae9e60d5449933949416ec" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;<a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a>, <a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>&gt;::iterator <a class="el" href="classInstQueue.html#a0e9597437fae9e60d5449933949416ec">NonSpecMapIt</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a818e103eae798a24a06a0a34631849ea"></a><!-- doxytag: member="InstQueue::Params" ref="a818e103eae798a24a06a0a34631849ea" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef Impl::Params <a class="el" href="classInstQueue.html#a818e103eae798a24a06a0a34631849ea">Params</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="afca3a0ab9af7309428eb77c726724000"></a><!-- doxytag: member="InstQueue::ReadyInstMap" ref="afca3a0ab9af7309428eb77c726724000" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;<a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>, <a class="el" href="structInstQueue_1_1pqCompare.html">pqCompare</a>&gt; <a class="el" href="classInstQueue.html#afca3a0ab9af7309428eb77c726724000">ReadyInstMap</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a60636ae8f3b649078c4f1bdd3b20dcad"></a><!-- doxytag: member="InstQueue::ReadyInstQueue" ref="a60636ae8f3b649078c4f1bdd3b20dcad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::priority_queue&lt;<a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>, <a class="el" href="classstd_1_1vector.html">std::vector</a>&lt;<a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>&gt;, <a class="el" href="structInstQueue_1_1pqCompare.html">pqCompare</a>&gt; <a class="el" href="classInstQueue.html#a60636ae8f3b649078c4f1bdd3b20dcad">ReadyInstQueue</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2ab2a44e2b7c4b408ceda3a9a2422ecb"></a><!-- doxytag: member="InstQueue::ReadyMapIt" ref="a2ab2a44e2b7c4b408ceda3a9a2422ecb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;<a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>, <a class="el" href="structInstQueue_1_1pqCompare.html">pqCompare</a>&gt;::iterator <a class="el" href="classInstQueue.html#a2ab2a44e2b7c4b408ceda3a9a2422ecb">ReadyMapIt</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="a679ee5512f178ea331ab7cd3ebf2aa78"></a><!-- doxytag: member="InstQueue::InstQueue" ref="a679ee5512f178ea331ab7cd3ebf2aa78" args="(Params *params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classInstQueue.html">InstQueue</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classInstQueue.html#a818e103eae798a24a06a0a34631849ea">Params</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Constructs an IQ. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00074"></a>00074     : <a class="code" href="classInstQueue.html#a22dc8294eecb144fbdd951d2e32e9330">dcacheInterface</a>(params-&gt;dcacheInterface),
<a name="l00075"></a>00075 <span class="comment">//      fuPool(params-&gt;fuPool),</span>
<a name="l00076"></a>00076       <a class="code" href="classInstQueue.html#a325de474a9f6652329339d9fc2ea09c0">numEntries</a>(params-&gt;numIQEntries),
<a name="l00077"></a>00077       <a class="code" href="classInstQueue.html#ab3c3a8cd00248d9cd6acad330da902a7">totalWidth</a>(params-&gt;issueWidth),
<a name="l00078"></a>00078 <span class="comment">//      numPhysIntRegs(params-&gt;numPhysIntRegs),</span>
<a name="l00079"></a>00079 <span class="comment">//      numPhysFloatRegs(params-&gt;numPhysFloatRegs),</span>
<a name="l00080"></a>00080       <a class="code" href="classInstQueue.html#a92c8d68d5f0e17758f89daa2647196f5">commitToIEWDelay</a>(params-&gt;commitToIEWDelay)
<a name="l00081"></a>00081 {
<a name="l00082"></a>00082 <span class="comment">//    assert(fuPool);</span>
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 <span class="comment">//    numThreads = params-&gt;numberOfThreads;</span>
<a name="l00085"></a>00085     <a class="code" href="classInstQueue.html#a792311f13ea91008a88e902ef13b0341">numThreads</a> = 1;
<a name="l00086"></a>00086 
<a name="l00087"></a>00087     <span class="comment">//Initialize thread IQ counts</span>
<a name="l00088"></a>00088     <span class="keywordflow">for</span> (<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = 0; tid &lt;<a class="code" href="classInstQueue.html#a792311f13ea91008a88e902ef13b0341">numThreads</a>; tid++) {
<a name="l00089"></a>00089         <a class="code" href="classInstQueue.html#ac638062ba1de6609f143c5ee3a601109">count</a>[tid] = 0;
<a name="l00090"></a>00090     }
<a name="l00091"></a>00091 
<a name="l00092"></a>00092     <span class="comment">// Initialize the number of free IQ entries.</span>
<a name="l00093"></a>00093     <a class="code" href="classInstQueue.html#ac2281ff630f82397bda33269f4ee8796">freeEntries</a> = <a class="code" href="classInstQueue.html#a325de474a9f6652329339d9fc2ea09c0">numEntries</a>;
<a name="l00094"></a>00094 
<a name="l00095"></a>00095     <span class="comment">// Set the number of physical registers as the number of int + float</span>
<a name="l00096"></a>00096 <span class="comment">//    numPhysRegs = numPhysIntRegs + numPhysFloatRegs;</span>
<a name="l00097"></a>00097 
<a name="l00098"></a>00098 <span class="comment">//    DPRINTF(IQ, &quot;There are %i physical registers.\n&quot;, numPhysRegs);</span>
<a name="l00099"></a>00099 
<a name="l00100"></a>00100     <span class="comment">//Create an entry for each physical register within the</span>
<a name="l00101"></a>00101     <span class="comment">//dependency graph.</span>
<a name="l00102"></a>00102 <span class="comment">//    dependGraph = new DependencyEntry[numPhysRegs];</span>
<a name="l00103"></a>00103 
<a name="l00104"></a>00104     <span class="comment">// Resize the register scoreboard.</span>
<a name="l00105"></a>00105 <span class="comment">//    regScoreboard.resize(numPhysRegs);</span>
<a name="l00106"></a>00106 <span class="comment">/*</span>
<a name="l00107"></a>00107 <span class="comment">    //Initialize Mem Dependence Units</span>
<a name="l00108"></a>00108 <span class="comment">    for (ThreadID tid = 0; tid &lt; numThreads; tid++) {</span>
<a name="l00109"></a>00109 <span class="comment">        memDepUnit[tid].init(params, tid);</span>
<a name="l00110"></a>00110 <span class="comment">        memDepUnit[tid].setIQ(this);</span>
<a name="l00111"></a>00111 <span class="comment">    }</span>
<a name="l00112"></a>00112 <span class="comment"></span>
<a name="l00113"></a>00113 <span class="comment">    // Initialize all the head pointers to point to NULL, and all the</span>
<a name="l00114"></a>00114 <span class="comment">    // entries as unready.</span>
<a name="l00115"></a>00115 <span class="comment">    // Note that in actuality, the registers corresponding to the logical</span>
<a name="l00116"></a>00116 <span class="comment">    // registers start off as ready.  However this doesn&apos;t matter for the</span>
<a name="l00117"></a>00117 <span class="comment">    // IQ as the instruction should have been correctly told if those</span>
<a name="l00118"></a>00118 <span class="comment">    // registers are ready in rename.  Thus it can all be initialized as</span>
<a name="l00119"></a>00119 <span class="comment">    // unready.</span>
<a name="l00120"></a>00120 <span class="comment">    for (int i = 0; i &lt; numPhysRegs; ++i) {</span>
<a name="l00121"></a>00121 <span class="comment">        dependGraph[i].next = NULL;</span>
<a name="l00122"></a>00122 <span class="comment">        dependGraph[i].inst = NULL;</span>
<a name="l00123"></a>00123 <span class="comment">        regScoreboard[i] = false;</span>
<a name="l00124"></a>00124 <span class="comment">    }</span>
<a name="l00125"></a>00125 <span class="comment">*/</span>
<a name="l00126"></a>00126     <span class="keywordflow">for</span> (<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = 0; tid &lt; numThreads; ++tid) {
<a name="l00127"></a>00127         <a class="code" href="classInstQueue.html#a97d5a7e4630ad1d017909f7504b9ec32">squashedSeqNum</a>[tid] = 0;
<a name="l00128"></a>00128     }
<a name="l00129"></a>00129 <span class="comment">/*</span>
<a name="l00130"></a>00130 <span class="comment">    for (int i = 0; i &lt; Num_OpClasses; ++i) {</span>
<a name="l00131"></a>00131 <span class="comment">        queueOnList[i] = false;</span>
<a name="l00132"></a>00132 <span class="comment">        readyIt[i] = listOrder.end();</span>
<a name="l00133"></a>00133 <span class="comment">    }</span>
<a name="l00134"></a>00134 <span class="comment"></span>
<a name="l00135"></a>00135 <span class="comment">    string policy = params-&gt;smtIQPolicy;</span>
<a name="l00136"></a>00136 <span class="comment"></span>
<a name="l00137"></a>00137 <span class="comment">    //Convert string to lowercase</span>
<a name="l00138"></a>00138 <span class="comment">    std::transform(policy.begin(), policy.end(), policy.begin(),</span>
<a name="l00139"></a>00139 <span class="comment">                   (int(*)(int)) tolower);</span>
<a name="l00140"></a>00140 <span class="comment"></span>
<a name="l00141"></a>00141 <span class="comment">    //Figure out resource sharing policy</span>
<a name="l00142"></a>00142 <span class="comment">    if (policy == &quot;dynamic&quot;) {</span>
<a name="l00143"></a>00143 <span class="comment">        iqPolicy = Dynamic;</span>
<a name="l00144"></a>00144 <span class="comment"></span>
<a name="l00145"></a>00145 <span class="comment">        //Set Max Entries to Total ROB Capacity</span>
<a name="l00146"></a>00146 <span class="comment">        for (ThreadID tid = 0; tid &lt; numThreads; tid++) {</span>
<a name="l00147"></a>00147 <span class="comment">            maxEntries[tid] = numEntries;</span>
<a name="l00148"></a>00148 <span class="comment">        }</span>
<a name="l00149"></a>00149 <span class="comment"></span>
<a name="l00150"></a>00150 <span class="comment">    } else if (policy == &quot;partitioned&quot;) {</span>
<a name="l00151"></a>00151 <span class="comment">        iqPolicy = Partitioned;</span>
<a name="l00152"></a>00152 <span class="comment"></span>
<a name="l00153"></a>00153 <span class="comment">        //@todo:make work if part_amt doesnt divide evenly.</span>
<a name="l00154"></a>00154 <span class="comment">        int part_amt = numEntries / numThreads;</span>
<a name="l00155"></a>00155 <span class="comment"></span>
<a name="l00156"></a>00156 <span class="comment">        //Divide ROB up evenly</span>
<a name="l00157"></a>00157 <span class="comment">        for (ThreadID tid = 0; tid &lt; numThreads; tid++) {</span>
<a name="l00158"></a>00158 <span class="comment">            maxEntries[tid] = part_amt;</span>
<a name="l00159"></a>00159 <span class="comment">        }</span>
<a name="l00160"></a>00160 <span class="comment"></span>
<a name="l00161"></a>00161 <span class="comment">        DPRINTF(Fetch, &quot;IQ sharing policy set to Partitioned:&quot;</span>
<a name="l00162"></a>00162 <span class="comment">                &quot;%i entries per thread.\n&quot;,part_amt);</span>
<a name="l00163"></a>00163 <span class="comment"></span>
<a name="l00164"></a>00164 <span class="comment">    } else if (policy == &quot;threshold&quot;) {</span>
<a name="l00165"></a>00165 <span class="comment">        iqPolicy = Threshold;</span>
<a name="l00166"></a>00166 <span class="comment"></span>
<a name="l00167"></a>00167 <span class="comment">        double threshold =  (double)params-&gt;smtIQThreshold / 100;</span>
<a name="l00168"></a>00168 <span class="comment"></span>
<a name="l00169"></a>00169 <span class="comment">        int thresholdIQ = (int)((double)threshold * numEntries);</span>
<a name="l00170"></a>00170 <span class="comment"></span>
<a name="l00171"></a>00171 <span class="comment">        //Divide up by threshold amount</span>
<a name="l00172"></a>00172 <span class="comment">        for (ThreadID tid = 0; tid &lt; numThreads; tid++) {</span>
<a name="l00173"></a>00173 <span class="comment">            maxEntries[tid] = thresholdIQ;</span>
<a name="l00174"></a>00174 <span class="comment">        }</span>
<a name="l00175"></a>00175 <span class="comment"></span>
<a name="l00176"></a>00176 <span class="comment">        DPRINTF(Fetch, &quot;IQ sharing policy set to Threshold:&quot;</span>
<a name="l00177"></a>00177 <span class="comment">                &quot;%i entries per thread.\n&quot;,thresholdIQ);</span>
<a name="l00178"></a>00178 <span class="comment">   } else {</span>
<a name="l00179"></a>00179 <span class="comment">       assert(0 &amp;&amp; &quot;Invalid IQ Sharing Policy.Options Are:{Dynamic,&quot;</span>
<a name="l00180"></a>00180 <span class="comment">              &quot;Partitioned, Threshold}&quot;);</span>
<a name="l00181"></a>00181 <span class="comment">   }</span>
<a name="l00182"></a>00182 <span class="comment">*/</span>
<a name="l00183"></a>00183 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aac3885a1c3df6261e14208fc83713c17"></a><!-- doxytag: member="InstQueue::~InstQueue" ref="aac3885a1c3df6261e14208fc83713c17" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classInstQueue.html">InstQueue</a> </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Destructs the IQ. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00187"></a>00187 {
<a name="l00188"></a>00188     <span class="comment">// Clear the dependency graph</span>
<a name="l00189"></a>00189 <span class="comment">/*</span>
<a name="l00190"></a>00190 <span class="comment">    DependencyEntry *curr;</span>
<a name="l00191"></a>00191 <span class="comment">    DependencyEntry *prev;</span>
<a name="l00192"></a>00192 <span class="comment"></span>
<a name="l00193"></a>00193 <span class="comment">    for (int i = 0; i &lt; numPhysRegs; ++i) {</span>
<a name="l00194"></a>00194 <span class="comment">        curr = dependGraph[i].next;</span>
<a name="l00195"></a>00195 <span class="comment"></span>
<a name="l00196"></a>00196 <span class="comment">        while (curr) {</span>
<a name="l00197"></a>00197 <span class="comment">            DependencyEntry::mem_alloc_counter--;</span>
<a name="l00198"></a>00198 <span class="comment"></span>
<a name="l00199"></a>00199 <span class="comment">            prev = curr;</span>
<a name="l00200"></a>00200 <span class="comment">            curr = prev-&gt;next;</span>
<a name="l00201"></a>00201 <span class="comment">            prev-&gt;inst = NULL;</span>
<a name="l00202"></a>00202 <span class="comment"></span>
<a name="l00203"></a>00203 <span class="comment">            delete prev;</span>
<a name="l00204"></a>00204 <span class="comment">        }</span>
<a name="l00205"></a>00205 <span class="comment"></span>
<a name="l00206"></a>00206 <span class="comment">        if (dependGraph[i].inst) {</span>
<a name="l00207"></a>00207 <span class="comment">            dependGraph[i].inst = NULL;</span>
<a name="l00208"></a>00208 <span class="comment">        }</span>
<a name="l00209"></a>00209 <span class="comment"></span>
<a name="l00210"></a>00210 <span class="comment">        dependGraph[i].next = NULL;</span>
<a name="l00211"></a>00211 <span class="comment">    }</span>
<a name="l00212"></a>00212 <span class="comment"></span>
<a name="l00213"></a>00213 <span class="comment">    assert(DependencyEntry::mem_alloc_counter == 0);</span>
<a name="l00214"></a>00214 <span class="comment"></span>
<a name="l00215"></a>00215 <span class="comment">    delete [] dependGraph;</span>
<a name="l00216"></a>00216 <span class="comment">*/</span>
<a name="l00217"></a>00217 }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="a7e3f1fa43ca939ed6fd9b3abcc47f06e"></a><!-- doxytag: member="InstQueue::addIfReady" ref="a7e3f1fa43ca939ed6fd9b3abcc47f06e" args="(DynInstPtr &amp;inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void addIfReady </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Moves an instruction to the ready queue if it is ready. </p>

<p><div class="fragment"><pre class="fragment"><a name="l01166"></a>01166 {
<a name="l01167"></a>01167     <span class="comment">//If the instruction now has all of its source registers</span>
<a name="l01168"></a>01168     <span class="comment">// available, then add it to the list of ready instructions.</span>
<a name="l01169"></a>01169     <span class="keywordflow">if</span> (inst-&gt;readyToIssue()) {
<a name="l01170"></a>01170 
<a name="l01171"></a>01171         <span class="comment">//Add the instruction to the proper ready list.</span>
<a name="l01172"></a>01172         <span class="keywordflow">if</span> (inst-&gt;isMemRef()) {
<a name="l01173"></a>01173 
<a name="l01174"></a>01174             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(IQ, <span class="stringliteral">&quot;Checking if memory instruction can issue.\n&quot;</span>);
<a name="l01175"></a>01175 
<a name="l01176"></a>01176             <span class="comment">// Message to the mem dependence unit that this instruction has</span>
<a name="l01177"></a>01177             <span class="comment">// its registers ready.</span>
<a name="l01178"></a>01178 
<a name="l01179"></a>01179 <span class="comment">//            memDepUnit[inst-&gt;threadNumber].regsReady(inst);</span>
<a name="l01180"></a>01180 
<a name="l01181"></a>01181             <span class="keywordflow">return</span>;
<a name="l01182"></a>01182         }
<a name="l01183"></a>01183 
<a name="l01184"></a>01184 <span class="comment">//        OpClass op_class = inst-&gt;opClass();</span>
<a name="l01185"></a>01185 
<a name="l01186"></a>01186         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(IQ, <span class="stringliteral">&quot;Instruction is ready to issue, putting it onto &quot;</span>
<a name="l01187"></a>01187                 <span class="stringliteral">&quot;the ready list, PC %#x opclass:%i [sn:%lli].\n&quot;</span>,
<a name="l01188"></a>01188                 inst-&gt;readPC(), inst-&gt;opClass(), inst-&gt;seqNum);
<a name="l01189"></a>01189 
<a name="l01190"></a>01190         <a class="code" href="classInstQueue.html#a73e22f052c708ca5c198bd0a01eb3604">readyInsts</a>.push(inst);
<a name="l01191"></a>01191     }
<a name="l01192"></a>01192 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a76bcc078140b3e79923f7b5be8b302fb"></a><!-- doxytag: member="InstQueue::addReadyMemInst" ref="a76bcc078140b3e79923f7b5be8b302fb" args="(DynInstPtr &amp;ready_inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void addReadyMemInst </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>ready_inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Adds a ready memory instruction to the ready list. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00856"></a>00856 {
<a name="l00857"></a>00857 <span class="comment">//    OpClass op_class = ready_inst-&gt;opClass();</span>
<a name="l00858"></a>00858 
<a name="l00859"></a>00859     <a class="code" href="classInstQueue.html#a73e22f052c708ca5c198bd0a01eb3604">readyInsts</a>.push(ready_inst);
<a name="l00860"></a>00860 
<a name="l00861"></a>00861     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(IQ, <span class="stringliteral">&quot;Instruction is ready to issue, putting it onto &quot;</span>
<a name="l00862"></a>00862             <span class="stringliteral">&quot;the ready list, PC %#x opclass:%i [sn:%lli].\n&quot;</span>,
<a name="l00863"></a>00863             ready_inst-&gt;readPC(), ready_inst-&gt;opClass(), ready_inst-&gt;seqNum);
<a name="l00864"></a>00864 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a04f8d2acf3cd0b90a1efc69b528f91bc"></a><!-- doxytag: member="InstQueue::commit" ref="a04f8d2acf3cd0b90a1efc69b528f91bc" args="(const InstSeqNum &amp;inst, ThreadID tid=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void commit </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>inst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Commits all instructions up to and including the given sequence number, for a specific thread. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00758"></a>00758 {
<a name="l00759"></a>00759     <span class="comment">/*Need to go through each thread??*/</span>
<a name="l00760"></a>00760     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(IQ, <span class="stringliteral">&quot;[tid:%i]: Committing instructions older than [sn:%i]\n&quot;</span>,
<a name="l00761"></a>00761             tid,inst);
<a name="l00762"></a>00762 
<a name="l00763"></a>00763     <a class="code" href="classInstQueue.html#a184cb829e22cc656acb41864f68f51ea">ListIt</a> iq_it = <a class="code" href="classInstQueue.html#a7f2828a4f877a4a4d4b85a6788536b82">instList</a>[tid].begin();
<a name="l00764"></a>00764 
<a name="l00765"></a>00765     <span class="keywordflow">while</span> (iq_it != <a class="code" href="classInstQueue.html#a7f2828a4f877a4a4d4b85a6788536b82">instList</a>[tid].end() &amp;&amp;
<a name="l00766"></a>00766            (*iq_it)-&gt;seqNum &lt;= inst) {
<a name="l00767"></a>00767         ++iq_it;
<a name="l00768"></a>00768         <a class="code" href="classInstQueue.html#a7f2828a4f877a4a4d4b85a6788536b82">instList</a>[tid].pop_front();
<a name="l00769"></a>00769     }
<a name="l00770"></a>00770 
<a name="l00771"></a>00771     assert(<a class="code" href="classInstQueue.html#ac2281ff630f82397bda33269f4ee8796">freeEntries</a> == (<a class="code" href="classInstQueue.html#a325de474a9f6652329339d9fc2ea09c0">numEntries</a> - <a class="code" href="classInstQueue.html#ab654970f03abd90f0c397bba8e218bc9">countInsts</a>()));
<a name="l00772"></a>00772 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aad2715729f71f220e9cf9b99515384ca"></a><!-- doxytag: member="InstQueue::completeMemInst" ref="aad2715729f71f220e9cf9b99515384ca" args="(DynInstPtr &amp;completed_inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void completeMemInst </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>completed_inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Completes a memory operation. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00883"></a>00883 {
<a name="l00884"></a>00884     <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = completed_inst-&gt;threadNumber;
<a name="l00885"></a>00885 
<a name="l00886"></a>00886     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(IQ, <span class="stringliteral">&quot;Completing mem instruction PC:%#x [sn:%lli]\n&quot;</span>,
<a name="l00887"></a>00887             completed_inst-&gt;readPC(), completed_inst-&gt;seqNum);
<a name="l00888"></a>00888 
<a name="l00889"></a>00889     ++<a class="code" href="classInstQueue.html#ac2281ff630f82397bda33269f4ee8796">freeEntries</a>;
<a name="l00890"></a>00890 
<a name="l00891"></a>00891 <span class="comment">//    completed_inst-&gt;memOpDone = true;</span>
<a name="l00892"></a>00892 
<a name="l00893"></a>00893 <span class="comment">//    memDepUnit[tid].completed(completed_inst);</span>
<a name="l00894"></a>00894 
<a name="l00895"></a>00895     <a class="code" href="classInstQueue.html#ac638062ba1de6609f143c5ee3a601109">count</a>[tid]--;
<a name="l00896"></a>00896 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab654970f03abd90f0c397bba8e218bc9"></a><!-- doxytag: member="InstQueue::countInsts" ref="ab654970f03abd90f0c397bba8e218bc9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int countInsts </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Debugging function to count how many entries are in the IQ. It does a linear walk through the instructions, so do not call this function during normal execution. </p>

<p><div class="fragment"><pre class="fragment"><a name="l01197"></a>01197 {
<a name="l01198"></a>01198     <span class="comment">//ksewell:This works but definitely could use a cleaner write</span>
<a name="l01199"></a>01199     <span class="comment">//with a more intuitive way of counting. Right now it&apos;s</span>
<a name="l01200"></a>01200     <span class="comment">//just brute force ....</span>
<a name="l01201"></a>01201 
<a name="l01202"></a>01202 <span class="preprocessor">#if 0</span>
<a name="l01203"></a>01203 <span class="preprocessor"></span>    <span class="keywordtype">int</span> total_insts = 0;
<a name="l01204"></a>01204 
<a name="l01205"></a>01205     <span class="keywordflow">for</span> (<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = 0; tid &lt; <a class="code" href="classInstQueue.html#a792311f13ea91008a88e902ef13b0341">numThreads</a>; ++tid) {
<a name="l01206"></a>01206         <a class="code" href="classInstQueue.html#a184cb829e22cc656acb41864f68f51ea">ListIt</a> count_it = <a class="code" href="classInstQueue.html#a7f2828a4f877a4a4d4b85a6788536b82">instList</a>[tid].begin();
<a name="l01207"></a>01207 
<a name="l01208"></a>01208         <span class="keywordflow">while</span> (count_it != <a class="code" href="classInstQueue.html#a7f2828a4f877a4a4d4b85a6788536b82">instList</a>[tid].end()) {
<a name="l01209"></a>01209             <span class="keywordflow">if</span> (!(*count_it)-&gt;isSquashed() &amp;&amp; !(*count_it)-&gt;isSquashedInIQ()) {
<a name="l01210"></a>01210                 <span class="keywordflow">if</span> (!(*count_it)-&gt;isIssued()) {
<a name="l01211"></a>01211                     ++total_insts;
<a name="l01212"></a>01212                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*count_it)-&gt;isMemRef() &amp;&amp;
<a name="l01213"></a>01213                            !(*count_it)-&gt;memOpDone) {
<a name="l01214"></a>01214                     <span class="comment">// Loads that have not been marked as executed still count</span>
<a name="l01215"></a>01215                     <span class="comment">// towards the total instructions.</span>
<a name="l01216"></a>01216                     ++total_insts;
<a name="l01217"></a>01217                 }
<a name="l01218"></a>01218             }
<a name="l01219"></a>01219 
<a name="l01220"></a>01220             ++count_it;
<a name="l01221"></a>01221         }
<a name="l01222"></a>01222     }
<a name="l01223"></a>01223 
<a name="l01224"></a>01224     <span class="keywordflow">return</span> total_insts;
<a name="l01225"></a>01225 <span class="preprocessor">#else</span>
<a name="l01226"></a>01226 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="classInstQueue.html#a325de474a9f6652329339d9fc2ea09c0">numEntries</a> - <a class="code" href="classInstQueue.html#ac2281ff630f82397bda33269f4ee8796">freeEntries</a>;
<a name="l01227"></a>01227 <span class="preprocessor">#endif</span>
<a name="l01228"></a>01228 <span class="preprocessor"></span>}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a06cf52c4f09162bea03ec848f247151a"></a><!-- doxytag: member="InstQueue::doSquash" ref="a06cf52c4f09162bea03ec848f247151a" args="(ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void doSquash </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Does the actual squashing. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00933"></a>00933 {
<a name="l00934"></a>00934     <span class="comment">// Make sure the squashed sequence number is valid.</span>
<a name="l00935"></a>00935     assert(<a class="code" href="classInstQueue.html#a97d5a7e4630ad1d017909f7504b9ec32">squashedSeqNum</a>[tid] != 0);
<a name="l00936"></a>00936 
<a name="l00937"></a>00937     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(IQ, <span class="stringliteral">&quot;[tid:%i]: Squashing until sequence number %i!\n&quot;</span>,
<a name="l00938"></a>00938             tid, <a class="code" href="classInstQueue.html#a97d5a7e4630ad1d017909f7504b9ec32">squashedSeqNum</a>[tid]);
<a name="l00939"></a>00939 
<a name="l00940"></a>00940     <span class="comment">// Squash any instructions younger than the squashed sequence number</span>
<a name="l00941"></a>00941     <span class="comment">// given.</span>
<a name="l00942"></a>00942     <span class="keywordflow">while</span> (<a class="code" href="classInstQueue.html#a76b506d03788e72757da427226e10356">squashIt</a>[tid] != <a class="code" href="classInstQueue.html#a7f2828a4f877a4a4d4b85a6788536b82">instList</a>[tid].end() &amp;&amp;
<a name="l00943"></a>00943            (*<a class="code" href="classInstQueue.html#a76b506d03788e72757da427226e10356">squashIt</a>[tid])-&gt;seqNum &gt; <a class="code" href="classInstQueue.html#a97d5a7e4630ad1d017909f7504b9ec32">squashedSeqNum</a>[tid]) {
<a name="l00944"></a>00944 
<a name="l00945"></a>00945         <a class="code" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> squashed_inst = (*<a class="code" href="classInstQueue.html#a76b506d03788e72757da427226e10356">squashIt</a>[tid]);
<a name="l00946"></a>00946 
<a name="l00947"></a>00947         <span class="comment">// Only handle the instruction if it actually is in the IQ and</span>
<a name="l00948"></a>00948         <span class="comment">// hasn&apos;t already been squashed in the IQ.</span>
<a name="l00949"></a>00949         <span class="keywordflow">if</span> (squashed_inst-&gt;threadNumber != tid ||
<a name="l00950"></a>00950             squashed_inst-&gt;isSquashedInIQ()) {
<a name="l00951"></a>00951             --<a class="code" href="classInstQueue.html#a76b506d03788e72757da427226e10356">squashIt</a>[tid];
<a name="l00952"></a>00952             <span class="keywordflow">continue</span>;
<a name="l00953"></a>00953         }
<a name="l00954"></a>00954 
<a name="l00955"></a>00955         <span class="keywordflow">if</span> (!squashed_inst-&gt;isIssued() ||
<a name="l00956"></a>00956             (squashed_inst-&gt;isMemRef()<span class="comment">/* &amp;&amp;</span>
<a name="l00957"></a>00957 <span class="comment">                                         !squashed_inst-&gt;memOpDone*/</span>)) {
<a name="l00958"></a>00958 
<a name="l00959"></a>00959             <span class="comment">// Remove the instruction from the dependency list.</span>
<a name="l00960"></a>00960             <span class="keywordflow">if</span> (!squashed_inst-&gt;isNonSpeculative()) {
<a name="l00961"></a>00961 <span class="comment">/*</span>
<a name="l00962"></a>00962 <span class="comment">                for (int src_reg_idx = 0;</span>
<a name="l00963"></a>00963 <span class="comment">                     src_reg_idx &lt; squashed_inst-&gt;numSrcRegs();</span>
<a name="l00964"></a>00964 <span class="comment">                     src_reg_idx++)</span>
<a name="l00965"></a>00965 <span class="comment">                {</span>
<a name="l00966"></a>00966 <span class="comment">                    PhysRegIndex src_reg =</span>
<a name="l00967"></a>00967 <span class="comment">                        squashed_inst-&gt;renamedSrcRegIdx(src_reg_idx);</span>
<a name="l00968"></a>00968 <span class="comment"></span>
<a name="l00969"></a>00969 <span class="comment">                    // Only remove it from the dependency graph if it was</span>
<a name="l00970"></a>00970 <span class="comment">                    // placed there in the first place.</span>
<a name="l00971"></a>00971 <span class="comment">                    // HACK: This assumes that instructions woken up from the</span>
<a name="l00972"></a>00972 <span class="comment">                    // dependency chain aren&apos;t informed that a specific src</span>
<a name="l00973"></a>00973 <span class="comment">                    // register has become ready.  This may not always be true</span>
<a name="l00974"></a>00974 <span class="comment">                    // in the future.</span>
<a name="l00975"></a>00975 <span class="comment">                    // Instead of doing a linked list traversal, we can just</span>
<a name="l00976"></a>00976 <span class="comment">                    // remove these squashed instructions either at issue time,</span>
<a name="l00977"></a>00977 <span class="comment">                    // or when the register is overwritten.  The only downside</span>
<a name="l00978"></a>00978 <span class="comment">                    // to this is it leaves more room for error.</span>
<a name="l00979"></a>00979 <span class="comment"></span>
<a name="l00980"></a>00980 <span class="comment">                    if (!squashed_inst-&gt;isReadySrcRegIdx(src_reg_idx) &amp;&amp;</span>
<a name="l00981"></a>00981 <span class="comment">                        src_reg &lt; numPhysRegs) {</span>
<a name="l00982"></a>00982 <span class="comment">                        dependGraph[src_reg].remove(squashed_inst);</span>
<a name="l00983"></a>00983 <span class="comment">                    }</span>
<a name="l00984"></a>00984 <span class="comment"></span>
<a name="l00985"></a>00985 <span class="comment"></span>
<a name="l00986"></a>00986 <span class="comment">                    ++iqSquashedOperandsExamined;</span>
<a name="l00987"></a>00987 <span class="comment">                }</span>
<a name="l00988"></a>00988 <span class="comment">*/</span>
<a name="l00989"></a>00989                 <span class="comment">// Might want to remove producers as well.</span>
<a name="l00990"></a>00990             } <span class="keywordflow">else</span> {
<a name="l00991"></a>00991                 <a class="code" href="classInstQueue.html#ac0ba4d07026aaf6386c001a68d059cbf">nonSpecInsts</a>[squashed_inst-&gt;seqNum] = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00992"></a>00992 
<a name="l00993"></a>00993                 <a class="code" href="classInstQueue.html#ac0ba4d07026aaf6386c001a68d059cbf">nonSpecInsts</a>.erase(squashed_inst-&gt;seqNum);
<a name="l00994"></a>00994 
<a name="l00995"></a>00995                 ++<a class="code" href="classInstQueue.html#a6c0b47431b6e84536fd9bb61624d6d97">iqSquashedNonSpecRemoved</a>;
<a name="l00996"></a>00996             }
<a name="l00997"></a>00997 
<a name="l00998"></a>00998             <span class="comment">// Might want to also clear out the head of the dependency graph.</span>
<a name="l00999"></a>00999 
<a name="l01000"></a>01000             <span class="comment">// Mark it as squashed within the IQ.</span>
<a name="l01001"></a>01001             squashed_inst-&gt;setSquashedInIQ();
<a name="l01002"></a>01002 
<a name="l01003"></a>01003             <span class="comment">// @todo: Remove this hack where several statuses are set so the</span>
<a name="l01004"></a>01004             <span class="comment">// inst will flow through the rest of the pipeline.</span>
<a name="l01005"></a>01005             squashed_inst-&gt;setIssued();
<a name="l01006"></a>01006             squashed_inst-&gt;setCanCommit();
<a name="l01007"></a>01007 <span class="comment">//            squashed_inst-&gt;removeInIQ();</span>
<a name="l01008"></a>01008 
<a name="l01009"></a>01009             <span class="comment">//Update Thread IQ Count</span>
<a name="l01010"></a>01010             <a class="code" href="classInstQueue.html#ac638062ba1de6609f143c5ee3a601109">count</a>[squashed_inst-&gt;threadNumber]--;
<a name="l01011"></a>01011 
<a name="l01012"></a>01012             ++<a class="code" href="classInstQueue.html#ac2281ff630f82397bda33269f4ee8796">freeEntries</a>;
<a name="l01013"></a>01013 
<a name="l01014"></a>01014             <span class="keywordflow">if</span> (<a class="code" href="classInstQueue.html#a792311f13ea91008a88e902ef13b0341">numThreads</a> &gt; 1) {
<a name="l01015"></a>01015                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(IQ, <span class="stringliteral">&quot;[tid:%i]: Instruction PC %#x squashed.\n&quot;</span>,
<a name="l01016"></a>01016                         tid, squashed_inst-&gt;readPC());
<a name="l01017"></a>01017             } <span class="keywordflow">else</span> {
<a name="l01018"></a>01018                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(IQ, <span class="stringliteral">&quot;Instruction PC %#x squashed.\n&quot;</span>,
<a name="l01019"></a>01019                         squashed_inst-&gt;readPC());
<a name="l01020"></a>01020             }
<a name="l01021"></a>01021         }
<a name="l01022"></a>01022 
<a name="l01023"></a>01023         --<a class="code" href="classInstQueue.html#a76b506d03788e72757da427226e10356">squashIt</a>[tid];
<a name="l01024"></a>01024         ++<a class="code" href="classInstQueue.html#a8312e8984bcfab5a77de40e1738103db">iqSquashedInstsExamined</a>;
<a name="l01025"></a>01025     }
<a name="l01026"></a>01026 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a80587b4fe043bbe1995536cb3b361588"></a><!-- doxytag: member="InstQueue::dumpInsts" ref="a80587b4fe043bbe1995536cb3b361588" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dumpInsts </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Debugging function to dump out all instructions that are in the IQ. </p>

<p><div class="fragment"><pre class="fragment"><a name="l01304"></a>01304 {
<a name="l01305"></a>01305     <span class="keywordflow">for</span> (<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = 0; tid &lt; <a class="code" href="classInstQueue.html#a792311f13ea91008a88e902ef13b0341">numThreads</a>; ++tid) {
<a name="l01306"></a>01306 <span class="comment">//        int num = 0;</span>
<a name="l01307"></a>01307 <span class="comment">//        int valid_num = 0;</span>
<a name="l01308"></a>01308 <span class="comment">/*</span>
<a name="l01309"></a>01309 <span class="comment">      ListIt inst_list_it = instList[tid].begin();</span>
<a name="l01310"></a>01310 <span class="comment"></span>
<a name="l01311"></a>01311 <span class="comment">        while (inst_list_it != instList[tid].end())</span>
<a name="l01312"></a>01312 <span class="comment">        {</span>
<a name="l01313"></a>01313 <span class="comment">            cprintf(&quot;Instruction:%i\n&quot;,</span>
<a name="l01314"></a>01314 <span class="comment">                    num);</span>
<a name="l01315"></a>01315 <span class="comment">            if (!(*inst_list_it)-&gt;isSquashed()) {</span>
<a name="l01316"></a>01316 <span class="comment">                if (!(*inst_list_it)-&gt;isIssued()) {</span>
<a name="l01317"></a>01317 <span class="comment">                    ++valid_num;</span>
<a name="l01318"></a>01318 <span class="comment">                    cprintf(&quot;Count:%i\n&quot;, valid_num);</span>
<a name="l01319"></a>01319 <span class="comment">                } else if ((*inst_list_it)-&gt;isMemRef() &amp;&amp;</span>
<a name="l01320"></a>01320 <span class="comment">                           !(*inst_list_it)-&gt;memOpDone) {</span>
<a name="l01321"></a>01321 <span class="comment">                    // Loads that have not been marked as executed still count</span>
<a name="l01322"></a>01322 <span class="comment">                    // towards the total instructions.</span>
<a name="l01323"></a>01323 <span class="comment">                    ++valid_num;</span>
<a name="l01324"></a>01324 <span class="comment">                    cprintf(&quot;Count:%i\n&quot;, valid_num);</span>
<a name="l01325"></a>01325 <span class="comment">                }</span>
<a name="l01326"></a>01326 <span class="comment">            }</span>
<a name="l01327"></a>01327 <span class="comment"></span>
<a name="l01328"></a>01328 <span class="comment">            cprintf(&quot;PC:%#x\n[sn:%lli]\n[tid:%i]\n&quot;</span>
<a name="l01329"></a>01329 <span class="comment">                    &quot;Issued:%i\nSquashed:%i\n&quot;,</span>
<a name="l01330"></a>01330 <span class="comment">                    (*inst_list_it)-&gt;readPC(),</span>
<a name="l01331"></a>01331 <span class="comment">                    (*inst_list_it)-&gt;seqNum,</span>
<a name="l01332"></a>01332 <span class="comment">                    (*inst_list_it)-&gt;threadNumber,</span>
<a name="l01333"></a>01333 <span class="comment">                    (*inst_list_it)-&gt;isIssued(),</span>
<a name="l01334"></a>01334 <span class="comment">                    (*inst_list_it)-&gt;isSquashed());</span>
<a name="l01335"></a>01335 <span class="comment"></span>
<a name="l01336"></a>01336 <span class="comment">            if ((*inst_list_it)-&gt;isMemRef()) {</span>
<a name="l01337"></a>01337 <span class="comment">                cprintf(&quot;MemOpDone:%i\n&quot;, (*inst_list_it)-&gt;memOpDone);</span>
<a name="l01338"></a>01338 <span class="comment">            }</span>
<a name="l01339"></a>01339 <span class="comment"></span>
<a name="l01340"></a>01340 <span class="comment">            cprintf(&quot;\n&quot;);</span>
<a name="l01341"></a>01341 <span class="comment"></span>
<a name="l01342"></a>01342 <span class="comment">            inst_list_it++;</span>
<a name="l01343"></a>01343 <span class="comment">            ++num;</span>
<a name="l01344"></a>01344 <span class="comment">        }</span>
<a name="l01345"></a>01345 <span class="comment">*/</span>
<a name="l01346"></a>01346     }
<a name="l01347"></a>01347 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3d1dae45e8e0b5cf7c1f4f8c796d070e"></a><!-- doxytag: member="InstQueue::dumpLists" ref="a3d1dae45e8e0b5cf7c1f4f8c796d070e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dumpLists </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Debugging function to dump all the list sizes, as well as print out the list of nonspeculative instructions. Should not be used in any other capacity, but it has no harmful sideaffects. </p>

<p><div class="fragment"><pre class="fragment"><a name="l01261"></a>01261 {
<a name="l01262"></a>01262     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="op__class_8hh.html#a5e0e351c8afca390ef0a05a7dbb68b1b">Num_OpClasses</a>; ++<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>) {
<a name="l01263"></a>01263         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Ready list %i size: %i\n&quot;</span>, <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>, <a class="code" href="classInstQueue.html#a73e22f052c708ca5c198bd0a01eb3604">readyInsts</a>.size());
<a name="l01264"></a>01264 
<a name="l01265"></a>01265         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01266"></a>01266     }
<a name="l01267"></a>01267 
<a name="l01268"></a>01268     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Non speculative list size: %i\n&quot;</span>, <a class="code" href="classInstQueue.html#ac0ba4d07026aaf6386c001a68d059cbf">nonSpecInsts</a>.size());
<a name="l01269"></a>01269 
<a name="l01270"></a>01270     <a class="code" href="classInstQueue.html#a0e9597437fae9e60d5449933949416ec">NonSpecMapIt</a> non_spec_it = <a class="code" href="classInstQueue.html#ac0ba4d07026aaf6386c001a68d059cbf">nonSpecInsts</a>.begin();
<a name="l01271"></a>01271     <a class="code" href="classInstQueue.html#a0e9597437fae9e60d5449933949416ec">NonSpecMapIt</a> non_spec_end_it = <a class="code" href="classInstQueue.html#ac0ba4d07026aaf6386c001a68d059cbf">nonSpecInsts</a>.end();
<a name="l01272"></a>01272 
<a name="l01273"></a>01273     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Non speculative list: &quot;</span>);
<a name="l01274"></a>01274 
<a name="l01275"></a>01275     <span class="keywordflow">while</span> (non_spec_it != non_spec_end_it) {
<a name="l01276"></a>01276         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;%#x [sn:%lli]&quot;</span>, (*non_spec_it).second-&gt;readPC(),
<a name="l01277"></a>01277                 (*non_spec_it).second-&gt;seqNum);
<a name="l01278"></a>01278         ++non_spec_it;
<a name="l01279"></a>01279     }
<a name="l01280"></a>01280 
<a name="l01281"></a>01281     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01282"></a>01282 <span class="comment">/*</span>
<a name="l01283"></a>01283 <span class="comment">    ListOrderIt list_order_it = listOrder.begin();</span>
<a name="l01284"></a>01284 <span class="comment">    ListOrderIt list_order_end_it = listOrder.end();</span>
<a name="l01285"></a>01285 <span class="comment">    int i = 1;</span>
<a name="l01286"></a>01286 <span class="comment"></span>
<a name="l01287"></a>01287 <span class="comment">    cprintf(&quot;List order: &quot;);</span>
<a name="l01288"></a>01288 <span class="comment"></span>
<a name="l01289"></a>01289 <span class="comment">    while (list_order_it != list_order_end_it) {</span>
<a name="l01290"></a>01290 <span class="comment">        cprintf(&quot;%i OpClass:%i [sn:%lli] &quot;, i, (*list_order_it).queueType,</span>
<a name="l01291"></a>01291 <span class="comment">                (*list_order_it).oldestInst);</span>
<a name="l01292"></a>01292 <span class="comment"></span>
<a name="l01293"></a>01293 <span class="comment">        ++list_order_it;</span>
<a name="l01294"></a>01294 <span class="comment">        ++i;</span>
<a name="l01295"></a>01295 <span class="comment">    }</span>
<a name="l01296"></a>01296 <span class="comment">*/</span>
<a name="l01297"></a>01297     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01298"></a>01298 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aaf7eb96b7ab2a8240d043b7d82494d15"></a><!-- doxytag: member="InstQueue::getCount" ref="aaf7eb96b7ab2a8240d043b7d82494d15" args="(ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned getCount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the number of used entries for a thread. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00212"></a>00212 { <span class="keywordflow">return</span> <a class="code" href="classInstQueue.html#ac638062ba1de6609f143c5ee3a601109">count</a>[tid]; };
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae59aad9cee1e45b5817a9d96553e4567"></a><!-- doxytag: member="InstQueue::hasReadyInsts" ref="ae59aad9cee1e45b5817a9d96553e4567" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool hasReadyInsts </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns if there are any ready instructions in the IQ. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00405"></a>00405 {
<a name="l00406"></a>00406 <span class="comment">/*</span>
<a name="l00407"></a>00407 <span class="comment">    if (!listOrder.empty()) {</span>
<a name="l00408"></a>00408 <span class="comment">        return true;</span>
<a name="l00409"></a>00409 <span class="comment">    }</span>
<a name="l00410"></a>00410 <span class="comment"></span>
<a name="l00411"></a>00411 <span class="comment">    for (int i = 0; i &lt; Num_OpClasses; ++i) {</span>
<a name="l00412"></a>00412 <span class="comment">        if (!readyInsts[i].empty()) {</span>
<a name="l00413"></a>00413 <span class="comment">            return true;</span>
<a name="l00414"></a>00414 <span class="comment">        }</span>
<a name="l00415"></a>00415 <span class="comment">    }</span>
<a name="l00416"></a>00416 <span class="comment"></span>
<a name="l00417"></a>00417 <span class="comment">    return false;</span>
<a name="l00418"></a>00418 <span class="comment">*/</span>
<a name="l00419"></a>00419     <span class="keywordflow">return</span> <a class="code" href="classInstQueue.html#a73e22f052c708ca5c198bd0a01eb3604">readyInsts</a>.empty();
<a name="l00420"></a>00420 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a786595aecf8ab7aae40868b5ac4a79a7"></a><!-- doxytag: member="InstQueue::insert" ref="a786595aecf8ab7aae40868b5ac4a79a7" args="(DynInstPtr &amp;new_inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>new_inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Inserts a new instruction into the IQ. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00425"></a>00425 {
<a name="l00426"></a>00426     <span class="comment">// Make sure the instruction is valid</span>
<a name="l00427"></a>00427     assert(new_inst);
<a name="l00428"></a>00428 
<a name="l00429"></a>00429     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(IQ, <span class="stringliteral">&quot;Adding instruction PC %#x to the IQ.\n&quot;</span>,
<a name="l00430"></a>00430             new_inst-&gt;readPC());
<a name="l00431"></a>00431 
<a name="l00432"></a>00432     <span class="comment">// Check if there are any free entries.  Panic if there are none.</span>
<a name="l00433"></a>00433     <span class="comment">// Might want to have this return a fault in the future instead of</span>
<a name="l00434"></a>00434     <span class="comment">// panicing.</span>
<a name="l00435"></a>00435     assert(<a class="code" href="classInstQueue.html#ac2281ff630f82397bda33269f4ee8796">freeEntries</a> != 0);
<a name="l00436"></a>00436 
<a name="l00437"></a>00437     <a class="code" href="classInstQueue.html#a7f2828a4f877a4a4d4b85a6788536b82">instList</a>[new_inst-&gt;threadNumber].push_back(new_inst);
<a name="l00438"></a>00438 
<a name="l00439"></a>00439     <span class="comment">// Decrease the number of free entries.</span>
<a name="l00440"></a>00440     --<a class="code" href="classInstQueue.html#ac2281ff630f82397bda33269f4ee8796">freeEntries</a>;
<a name="l00441"></a>00441 
<a name="l00442"></a>00442     <span class="comment">//Mark Instruction as in IQ</span>
<a name="l00443"></a>00443 <span class="comment">//    new_inst-&gt;setInIQ();</span>
<a name="l00444"></a>00444 <span class="comment">/*</span>
<a name="l00445"></a>00445 <span class="comment">    // Look through its source registers (physical regs), and mark any</span>
<a name="l00446"></a>00446 <span class="comment">    // dependencies.</span>
<a name="l00447"></a>00447 <span class="comment">    addToDependents(new_inst);</span>
<a name="l00448"></a>00448 <span class="comment"></span>
<a name="l00449"></a>00449 <span class="comment">    // Have this instruction set itself as the producer of its destination</span>
<a name="l00450"></a>00450 <span class="comment">    // register(s).</span>
<a name="l00451"></a>00451 <span class="comment">    createDependency(new_inst);</span>
<a name="l00452"></a>00452 <span class="comment">*/</span>
<a name="l00453"></a>00453     <span class="comment">// If it&apos;s a memory instruction, add it to the memory dependency</span>
<a name="l00454"></a>00454     <span class="comment">// unit.</span>
<a name="l00455"></a>00455 <span class="comment">//    if (new_inst-&gt;isMemRef()) {</span>
<a name="l00456"></a>00456 <span class="comment">//        memDepUnit[new_inst-&gt;threadNumber].insert(new_inst);</span>
<a name="l00457"></a>00457 <span class="comment">//    } else {</span>
<a name="l00458"></a>00458         <span class="comment">// If the instruction is ready then add it to the ready list.</span>
<a name="l00459"></a>00459         <a class="code" href="classInstQueue.html#a7e3f1fa43ca939ed6fd9b3abcc47f06e">addIfReady</a>(new_inst);
<a name="l00460"></a>00460 <span class="comment">//    }</span>
<a name="l00461"></a>00461 
<a name="l00462"></a>00462     ++<a class="code" href="classInstQueue.html#a435e1ce10c3a7f54a60941e583adeb09">iqInstsAdded</a>;
<a name="l00463"></a>00463 
<a name="l00464"></a>00464 
<a name="l00465"></a>00465     <span class="comment">//Update Thread IQ Count</span>
<a name="l00466"></a>00466     <a class="code" href="classInstQueue.html#ac638062ba1de6609f143c5ee3a601109">count</a>[new_inst-&gt;threadNumber]++;
<a name="l00467"></a>00467 
<a name="l00468"></a>00468     assert(<a class="code" href="classInstQueue.html#ac2281ff630f82397bda33269f4ee8796">freeEntries</a> == (<a class="code" href="classInstQueue.html#a325de474a9f6652329339d9fc2ea09c0">numEntries</a> - <a class="code" href="classInstQueue.html#ab654970f03abd90f0c397bba8e218bc9">countInsts</a>()));
<a name="l00469"></a>00469 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4f7523e76440d88096a4eac14f2e0dd3"></a><!-- doxytag: member="InstQueue::insertNonSpec" ref="a4f7523e76440d88096a4eac14f2e0dd3" args="(DynInstPtr &amp;new_inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void insertNonSpec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>new_inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Inserts a new, non-speculative instruction into the IQ. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00474"></a>00474 {
<a name="l00475"></a>00475     <a class="code" href="classInstQueue.html#ac0ba4d07026aaf6386c001a68d059cbf">nonSpecInsts</a>[new_inst-&gt;seqNum] = new_inst;
<a name="l00476"></a>00476 
<a name="l00477"></a>00477     <span class="comment">// @todo: Clean up this code; can do it by setting inst as unable</span>
<a name="l00478"></a>00478     <span class="comment">// to issue, then calling normal insert on the inst.</span>
<a name="l00479"></a>00479 
<a name="l00480"></a>00480     <span class="comment">// Make sure the instruction is valid</span>
<a name="l00481"></a>00481     assert(new_inst);
<a name="l00482"></a>00482 
<a name="l00483"></a>00483     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(IQ, <span class="stringliteral">&quot;Adding instruction PC %#x to the IQ.\n&quot;</span>,
<a name="l00484"></a>00484             new_inst-&gt;readPC());
<a name="l00485"></a>00485 
<a name="l00486"></a>00486     <span class="comment">// Check if there are any free entries.  Panic if there are none.</span>
<a name="l00487"></a>00487     <span class="comment">// Might want to have this return a fault in the future instead of</span>
<a name="l00488"></a>00488     <span class="comment">// panicing.</span>
<a name="l00489"></a>00489     assert(<a class="code" href="classInstQueue.html#ac2281ff630f82397bda33269f4ee8796">freeEntries</a> != 0);
<a name="l00490"></a>00490 
<a name="l00491"></a>00491     <a class="code" href="classInstQueue.html#a7f2828a4f877a4a4d4b85a6788536b82">instList</a>[new_inst-&gt;threadNumber].push_back(new_inst);
<a name="l00492"></a>00492 
<a name="l00493"></a>00493     <span class="comment">// Decrease the number of free entries.</span>
<a name="l00494"></a>00494     --<a class="code" href="classInstQueue.html#ac2281ff630f82397bda33269f4ee8796">freeEntries</a>;
<a name="l00495"></a>00495 
<a name="l00496"></a>00496     <span class="comment">//Mark Instruction as in IQ</span>
<a name="l00497"></a>00497 <span class="comment">//    new_inst-&gt;setInIQ();</span>
<a name="l00498"></a>00498 <span class="comment">/*</span>
<a name="l00499"></a>00499 <span class="comment">    // Have this instruction set itself as the producer of its destination</span>
<a name="l00500"></a>00500 <span class="comment">    // register(s).</span>
<a name="l00501"></a>00501 <span class="comment">    createDependency(new_inst);</span>
<a name="l00502"></a>00502 <span class="comment"></span>
<a name="l00503"></a>00503 <span class="comment">    // If it&apos;s a memory instruction, add it to the memory dependency</span>
<a name="l00504"></a>00504 <span class="comment">    // unit.</span>
<a name="l00505"></a>00505 <span class="comment">    if (new_inst-&gt;isMemRef()) {</span>
<a name="l00506"></a>00506 <span class="comment">        memDepUnit[new_inst-&gt;threadNumber].insertNonSpec(new_inst);</span>
<a name="l00507"></a>00507 <span class="comment">    }</span>
<a name="l00508"></a>00508 <span class="comment">*/</span>
<a name="l00509"></a>00509     ++<a class="code" href="classInstQueue.html#adf890a08fae50ea8249171b07c40adac">iqNonSpecInstsAdded</a>;
<a name="l00510"></a>00510 
<a name="l00511"></a>00511     <span class="comment">//Update Thread IQ Count</span>
<a name="l00512"></a>00512     <a class="code" href="classInstQueue.html#ac638062ba1de6609f143c5ee3a601109">count</a>[new_inst-&gt;threadNumber]++;
<a name="l00513"></a>00513 
<a name="l00514"></a>00514     assert(<a class="code" href="classInstQueue.html#ac2281ff630f82397bda33269f4ee8796">freeEntries</a> == (<a class="code" href="classInstQueue.html#a325de474a9f6652329339d9fc2ea09c0">numEntries</a> - <a class="code" href="classInstQueue.html#ab654970f03abd90f0c397bba8e218bc9">countInsts</a>()));
<a name="l00515"></a>00515 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a30fac732df9b3fda011c7329a112cb31"></a><!-- doxytag: member="InstQueue::isFull" ref="a30fac732df9b3fda011c7329a112cb31" args="(ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool isFull </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns whether or not the IQ is full for a specific thread. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00394"></a>00394 {
<a name="l00395"></a>00395     <span class="keywordflow">if</span> (<a class="code" href="classInstQueue.html#a028971a565aca048c67ea1c36a6a9d51">numFreeEntries</a>(tid) == 0) {
<a name="l00396"></a>00396         <span class="keywordflow">return</span>(<span class="keyword">true</span>);
<a name="l00397"></a>00397     } <span class="keywordflow">else</span> {
<a name="l00398"></a>00398         <span class="keywordflow">return</span>(<span class="keyword">false</span>);
<a name="l00399"></a>00399     }
<a name="l00400"></a>00400 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3e70330939fdfc4dbc2f60c1a660584d"></a><!-- doxytag: member="InstQueue::isFull" ref="a3e70330939fdfc4dbc2f60c1a660584d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool isFull </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns whether or not the IQ is full. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00383"></a>00383 {
<a name="l00384"></a>00384     <span class="keywordflow">if</span> (<a class="code" href="classInstQueue.html#ac2281ff630f82397bda33269f4ee8796">freeEntries</a> == 0) {
<a name="l00385"></a>00385         <span class="keywordflow">return</span>(<span class="keyword">true</span>);
<a name="l00386"></a>00386     } <span class="keywordflow">else</span> {
<a name="l00387"></a>00387         <span class="keywordflow">return</span>(<span class="keyword">false</span>);
<a name="l00388"></a>00388     }
<a name="l00389"></a>00389 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a37627d5d5bba7f4a8690c71c2ab3cb07"></a><!-- doxytag: member="InstQueue::name" ref="a37627d5d5bba7f4a8690c71c2ab3cb07" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string name </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the name of the IQ. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00222"></a>00222 {
<a name="l00223"></a>00223     <span class="keywordflow">return</span> <a class="code" href="classInstQueue.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;name() + <span class="stringliteral">&quot;.iq&quot;</span>;
<a name="l00224"></a>00224 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acc878f608deead5b5319a6a3f98b50c8"></a><!-- doxytag: member="InstQueue::numFreeEntries" ref="acc878f608deead5b5319a6a3f98b50c8" args="(ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned numFreeEntries </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns number of free entries for a thread. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00374"></a>00374 {
<a name="l00375"></a>00375     <span class="keywordflow">return</span> <a class="code" href="classInstQueue.html#a51e5f9f0cb40d61e95b1518f1be90b73">maxEntries</a>[tid] - <a class="code" href="classInstQueue.html#ac638062ba1de6609f143c5ee3a601109">count</a>[tid];
<a name="l00376"></a>00376 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a028971a565aca048c67ea1c36a6a9d51"></a><!-- doxytag: member="InstQueue::numFreeEntries" ref="a028971a565aca048c67ea1c36a6a9d51" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned numFreeEntries </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns total number of free entries. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00367"></a>00367 {
<a name="l00368"></a>00368     <span class="keywordflow">return</span> <a class="code" href="classInstQueue.html#ac2281ff630f82397bda33269f4ee8796">freeEntries</a>;
<a name="l00369"></a>00369 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="afc9c0c90c27fe0dc8bd4da915596bc21"></a><!-- doxytag: member="InstQueue::printInsts" ref="afc9c0c90c27fe0dc8bd4da915596bc21" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void printInsts </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="namespaceDebug.html">Debug</a> function to print all instructions. </p>

</div>
</div>
<a class="anchor" id="a4dc637449366fcdfc4e764cdf12d9b11"></a><!-- doxytag: member="InstQueue::regStats" ref="a4dc637449366fcdfc4e764cdf12d9b11" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void regStats </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Registers statistics. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00229"></a>00229 {
<a name="l00230"></a>00230     <a class="code" href="classInstQueue.html#a435e1ce10c3a7f54a60941e583adeb09">iqInstsAdded</a>
<a name="l00231"></a>00231         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classInstQueue.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.iqInstsAdded&quot;</span>)
<a name="l00232"></a>00232         .desc(<span class="stringliteral">&quot;Number of instructions added to the IQ (excludes non-spec)&quot;</span>)
<a name="l00233"></a>00233         .prereq(<a class="code" href="classInstQueue.html#a435e1ce10c3a7f54a60941e583adeb09">iqInstsAdded</a>);
<a name="l00234"></a>00234 
<a name="l00235"></a>00235     <a class="code" href="classInstQueue.html#adf890a08fae50ea8249171b07c40adac">iqNonSpecInstsAdded</a>
<a name="l00236"></a>00236         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classInstQueue.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.iqNonSpecInstsAdded&quot;</span>)
<a name="l00237"></a>00237         .desc(<span class="stringliteral">&quot;Number of non-speculative instructions added to the IQ&quot;</span>)
<a name="l00238"></a>00238         .prereq(<a class="code" href="classInstQueue.html#adf890a08fae50ea8249171b07c40adac">iqNonSpecInstsAdded</a>);
<a name="l00239"></a>00239 
<a name="l00240"></a>00240 <span class="comment">//    iqIntInstsAdded;</span>
<a name="l00241"></a>00241 
<a name="l00242"></a>00242     <a class="code" href="classInstQueue.html#a735f2023e70e53b7889a3a316bd3d57f">iqIntInstsIssued</a>
<a name="l00243"></a>00243         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classInstQueue.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.iqIntInstsIssued&quot;</span>)
<a name="l00244"></a>00244         .desc(<span class="stringliteral">&quot;Number of integer instructions issued&quot;</span>)
<a name="l00245"></a>00245         .prereq(<a class="code" href="classInstQueue.html#a735f2023e70e53b7889a3a316bd3d57f">iqIntInstsIssued</a>);
<a name="l00246"></a>00246 
<a name="l00247"></a>00247 <span class="comment">//    iqFloatInstsAdded;</span>
<a name="l00248"></a>00248 
<a name="l00249"></a>00249     <a class="code" href="classInstQueue.html#aa9f2fa124c9f0b4b22461b6717449d9a">iqFloatInstsIssued</a>
<a name="l00250"></a>00250         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classInstQueue.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.iqFloatInstsIssued&quot;</span>)
<a name="l00251"></a>00251         .desc(<span class="stringliteral">&quot;Number of float instructions issued&quot;</span>)
<a name="l00252"></a>00252         .prereq(<a class="code" href="classInstQueue.html#aa9f2fa124c9f0b4b22461b6717449d9a">iqFloatInstsIssued</a>);
<a name="l00253"></a>00253 
<a name="l00254"></a>00254 <span class="comment">//    iqBranchInstsAdded;</span>
<a name="l00255"></a>00255 
<a name="l00256"></a>00256     <a class="code" href="classInstQueue.html#a928f22a2c6ce592adc40e5242c9d6572">iqBranchInstsIssued</a>
<a name="l00257"></a>00257         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classInstQueue.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.iqBranchInstsIssued&quot;</span>)
<a name="l00258"></a>00258         .desc(<span class="stringliteral">&quot;Number of branch instructions issued&quot;</span>)
<a name="l00259"></a>00259         .prereq(<a class="code" href="classInstQueue.html#a928f22a2c6ce592adc40e5242c9d6572">iqBranchInstsIssued</a>);
<a name="l00260"></a>00260 
<a name="l00261"></a>00261 <span class="comment">//    iqMemInstsAdded;</span>
<a name="l00262"></a>00262 
<a name="l00263"></a>00263     <a class="code" href="classInstQueue.html#a5e7d55d3f07e86e389ca3a715766e108">iqMemInstsIssued</a>
<a name="l00264"></a>00264         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classInstQueue.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.iqMemInstsIssued&quot;</span>)
<a name="l00265"></a>00265         .desc(<span class="stringliteral">&quot;Number of memory instructions issued&quot;</span>)
<a name="l00266"></a>00266         .prereq(<a class="code" href="classInstQueue.html#a5e7d55d3f07e86e389ca3a715766e108">iqMemInstsIssued</a>);
<a name="l00267"></a>00267 
<a name="l00268"></a>00268 <span class="comment">//    iqMiscInstsAdded;</span>
<a name="l00269"></a>00269 
<a name="l00270"></a>00270     <a class="code" href="classInstQueue.html#ad234890bc414fffe7ed71840c51be5cb">iqMiscInstsIssued</a>
<a name="l00271"></a>00271         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classInstQueue.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.iqMiscInstsIssued&quot;</span>)
<a name="l00272"></a>00272         .desc(<span class="stringliteral">&quot;Number of miscellaneous instructions issued&quot;</span>)
<a name="l00273"></a>00273         .prereq(<a class="code" href="classInstQueue.html#ad234890bc414fffe7ed71840c51be5cb">iqMiscInstsIssued</a>);
<a name="l00274"></a>00274 
<a name="l00275"></a>00275     <a class="code" href="classInstQueue.html#ac91799c895e5aff3af0afdbd7691a163">iqSquashedInstsIssued</a>
<a name="l00276"></a>00276         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classInstQueue.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.iqSquashedInstsIssued&quot;</span>)
<a name="l00277"></a>00277         .desc(<span class="stringliteral">&quot;Number of squashed instructions issued&quot;</span>)
<a name="l00278"></a>00278         .prereq(<a class="code" href="classInstQueue.html#ac91799c895e5aff3af0afdbd7691a163">iqSquashedInstsIssued</a>);
<a name="l00279"></a>00279 
<a name="l00280"></a>00280     <a class="code" href="classInstQueue.html#a8312e8984bcfab5a77de40e1738103db">iqSquashedInstsExamined</a>
<a name="l00281"></a>00281         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classInstQueue.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.iqSquashedInstsExamined&quot;</span>)
<a name="l00282"></a>00282         .desc(<span class="stringliteral">&quot;Number of squashed instructions iterated over during squash;&quot;</span>
<a name="l00283"></a>00283               <span class="stringliteral">&quot; mainly for profiling&quot;</span>)
<a name="l00284"></a>00284         .prereq(<a class="code" href="classInstQueue.html#a8312e8984bcfab5a77de40e1738103db">iqSquashedInstsExamined</a>);
<a name="l00285"></a>00285 
<a name="l00286"></a>00286     <a class="code" href="classInstQueue.html#a4398b6005b81008bd163bbba78dfd929">iqSquashedOperandsExamined</a>
<a name="l00287"></a>00287         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classInstQueue.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.iqSquashedOperandsExamined&quot;</span>)
<a name="l00288"></a>00288         .desc(<span class="stringliteral">&quot;Number of squashed operands that are examined and possibly &quot;</span>
<a name="l00289"></a>00289               <span class="stringliteral">&quot;removed from graph&quot;</span>)
<a name="l00290"></a>00290         .prereq(<a class="code" href="classInstQueue.html#a4398b6005b81008bd163bbba78dfd929">iqSquashedOperandsExamined</a>);
<a name="l00291"></a>00291 
<a name="l00292"></a>00292     <a class="code" href="classInstQueue.html#a6c0b47431b6e84536fd9bb61624d6d97">iqSquashedNonSpecRemoved</a>
<a name="l00293"></a>00293         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classInstQueue.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.iqSquashedNonSpecRemoved&quot;</span>)
<a name="l00294"></a>00294         .desc(<span class="stringliteral">&quot;Number of squashed non-spec instructions that were removed&quot;</span>)
<a name="l00295"></a>00295         .prereq(<a class="code" href="classInstQueue.html#a6c0b47431b6e84536fd9bb61624d6d97">iqSquashedNonSpecRemoved</a>);
<a name="l00296"></a>00296 <span class="comment">/*</span>
<a name="l00297"></a>00297 <span class="comment">    for (ThreadID tid = 0; tid &lt; numThreads; tid++) {</span>
<a name="l00298"></a>00298 <span class="comment">        // Tell mem dependence unit to reg stats as well.</span>
<a name="l00299"></a>00299 <span class="comment">        memDepUnit[tid].regStats();</span>
<a name="l00300"></a>00300 <span class="comment">    }</span>
<a name="l00301"></a>00301 <span class="comment">*/</span>
<a name="l00302"></a>00302 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a15ca5aaeab5bd4c2169ed41bbc7fb79c"></a><!-- doxytag: member="InstQueue::scheduleNonSpec" ref="a15ca5aaeab5bd4c2169ed41bbc7fb79c" args="(const InstSeqNum &amp;inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scheduleNonSpec </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Schedules a single specific non-speculative instruction. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00732"></a>00732 {
<a name="l00733"></a>00733     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(IQ, <span class="stringliteral">&quot;Marking nonspeculative instruction with sequence &quot;</span>
<a name="l00734"></a>00734             <span class="stringliteral">&quot;number %i as ready to execute.\n&quot;</span>, inst);
<a name="l00735"></a>00735 
<a name="l00736"></a>00736     <a class="code" href="classInstQueue.html#a0e9597437fae9e60d5449933949416ec">NonSpecMapIt</a> inst_it = <a class="code" href="classInstQueue.html#ac0ba4d07026aaf6386c001a68d059cbf">nonSpecInsts</a>.find(inst);
<a name="l00737"></a>00737 
<a name="l00738"></a>00738     assert(inst_it != <a class="code" href="classInstQueue.html#ac0ba4d07026aaf6386c001a68d059cbf">nonSpecInsts</a>.end());
<a name="l00739"></a>00739 
<a name="l00740"></a>00740 <span class="comment">//    ThreadID tid = (*inst_it).second-&gt;threadNumber;</span>
<a name="l00741"></a>00741 
<a name="l00742"></a>00742     <span class="comment">// Mark this instruction as ready to issue.</span>
<a name="l00743"></a>00743     (*inst_it).second-&gt;setCanIssue();
<a name="l00744"></a>00744 
<a name="l00745"></a>00745     <span class="comment">// Now schedule the instruction.</span>
<a name="l00746"></a>00746 <span class="comment">//    if (!(*inst_it).second-&gt;isMemRef()) {</span>
<a name="l00747"></a>00747         <a class="code" href="classInstQueue.html#a7e3f1fa43ca939ed6fd9b3abcc47f06e">addIfReady</a>((*inst_it).second);
<a name="l00748"></a>00748 <span class="comment">//    } else {</span>
<a name="l00749"></a>00749 <span class="comment">//        memDepUnit[tid].nonSpecInstReady((*inst_it).second);</span>
<a name="l00750"></a>00750 <span class="comment">//    }</span>
<a name="l00751"></a>00751 
<a name="l00752"></a>00752     <a class="code" href="classInstQueue.html#ac0ba4d07026aaf6386c001a68d059cbf">nonSpecInsts</a>.erase(inst_it);
<a name="l00753"></a>00753 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3694e72427d3a616808797f9343d1fc4"></a><!-- doxytag: member="InstQueue::scheduleReadyInsts" ref="a3694e72427d3a616808797f9343d1fc4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scheduleReadyInsts </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Schedules ready instructions, adding the ready ones (oldest first) to the queue to execute. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00600"></a>00600 {
<a name="l00601"></a>00601     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(IQ, <span class="stringliteral">&quot;Attempting to schedule ready instructions from &quot;</span>
<a name="l00602"></a>00602             <span class="stringliteral">&quot;the IQ.\n&quot;</span>);
<a name="l00603"></a>00603 
<a name="l00604"></a>00604 <span class="comment">//    IssueStruct *i2e_info = issueToExecuteQueue-&gt;access(0);</span>
<a name="l00605"></a>00605 <span class="comment">/*</span>
<a name="l00606"></a>00606 <span class="comment">    // Will need to reorder the list if either a queue is not on the list,</span>
<a name="l00607"></a>00607 <span class="comment">    // or it has an older instruction than last time.</span>
<a name="l00608"></a>00608 <span class="comment">    for (int i = 0; i &lt; Num_OpClasses; ++i) {</span>
<a name="l00609"></a>00609 <span class="comment">        if (!readyInsts[i].empty()) {</span>
<a name="l00610"></a>00610 <span class="comment">            if (!queueOnList[i]) {</span>
<a name="l00611"></a>00611 <span class="comment">                addToOrderList(OpClass(i));</span>
<a name="l00612"></a>00612 <span class="comment">            } else if (readyInsts[i].top()-&gt;seqNum  &lt;</span>
<a name="l00613"></a>00613 <span class="comment">                       (*readyIt[i]).oldestInst) {</span>
<a name="l00614"></a>00614 <span class="comment">                listOrder.erase(readyIt[i]);</span>
<a name="l00615"></a>00615 <span class="comment">                addToOrderList(OpClass(i));</span>
<a name="l00616"></a>00616 <span class="comment">            }</span>
<a name="l00617"></a>00617 <span class="comment">        }</span>
<a name="l00618"></a>00618 <span class="comment">    }</span>
<a name="l00619"></a>00619 <span class="comment"></span>
<a name="l00620"></a>00620 <span class="comment">    // Have iterator to head of the list</span>
<a name="l00621"></a>00621 <span class="comment">    // While I haven&apos;t exceeded bandwidth or reached the end of the list,</span>
<a name="l00622"></a>00622 <span class="comment">    // Try to get a FU that can do what this op needs.</span>
<a name="l00623"></a>00623 <span class="comment">    // If successful, change the oldestInst to the new top of the list, put</span>
<a name="l00624"></a>00624 <span class="comment">    // the queue in the proper place in the list.</span>
<a name="l00625"></a>00625 <span class="comment">    // Increment the iterator.</span>
<a name="l00626"></a>00626 <span class="comment">    // This will avoid trying to schedule a certain op class if there are no</span>
<a name="l00627"></a>00627 <span class="comment">    // FUs that handle it.</span>
<a name="l00628"></a>00628 <span class="comment">    ListOrderIt order_it = listOrder.begin();</span>
<a name="l00629"></a>00629 <span class="comment">    ListOrderIt order_end_it = listOrder.end();</span>
<a name="l00630"></a>00630 <span class="comment">    int total_issued = 0;</span>
<a name="l00631"></a>00631 <span class="comment">    int exec_queue_slot = i2e_info-&gt;size;</span>
<a name="l00632"></a>00632 <span class="comment"></span>
<a name="l00633"></a>00633 <span class="comment">    while (exec_queue_slot &lt; totalWidth &amp;&amp; order_it != order_end_it) {</span>
<a name="l00634"></a>00634 <span class="comment">        OpClass op_class = (*order_it).queueType;</span>
<a name="l00635"></a>00635 <span class="comment"></span>
<a name="l00636"></a>00636 <span class="comment">        assert(!readyInsts[op_class].empty());</span>
<a name="l00637"></a>00637 <span class="comment"></span>
<a name="l00638"></a>00638 <span class="comment">        DynInstPtr issuing_inst = readyInsts[op_class].top();</span>
<a name="l00639"></a>00639 <span class="comment"></span>
<a name="l00640"></a>00640 <span class="comment">        assert(issuing_inst-&gt;seqNum == (*order_it).oldestInst);</span>
<a name="l00641"></a>00641 <span class="comment"></span>
<a name="l00642"></a>00642 <span class="comment">        if (issuing_inst-&gt;isSquashed()) {</span>
<a name="l00643"></a>00643 <span class="comment">            readyInsts[op_class].pop();</span>
<a name="l00644"></a>00644 <span class="comment"></span>
<a name="l00645"></a>00645 <span class="comment">            if (!readyInsts[op_class].empty()) {</span>
<a name="l00646"></a>00646 <span class="comment">                moveToYoungerInst(order_it);</span>
<a name="l00647"></a>00647 <span class="comment">            } else {</span>
<a name="l00648"></a>00648 <span class="comment">                readyIt[op_class] = listOrder.end();</span>
<a name="l00649"></a>00649 <span class="comment">                queueOnList[op_class] = false;</span>
<a name="l00650"></a>00650 <span class="comment">            }</span>
<a name="l00651"></a>00651 <span class="comment"></span>
<a name="l00652"></a>00652 <span class="comment">            listOrder.erase(order_it++);</span>
<a name="l00653"></a>00653 <span class="comment"></span>
<a name="l00654"></a>00654 <span class="comment">            ++iqSquashedInstsIssued;</span>
<a name="l00655"></a>00655 <span class="comment"></span>
<a name="l00656"></a>00656 <span class="comment">            continue;</span>
<a name="l00657"></a>00657 <span class="comment">        }</span>
<a name="l00658"></a>00658 <span class="comment"></span>
<a name="l00659"></a>00659 <span class="comment">        int idx = fuPool-&gt;getUnit(op_class);</span>
<a name="l00660"></a>00660 <span class="comment"></span>
<a name="l00661"></a>00661 <span class="comment">        if (idx != -1) {</span>
<a name="l00662"></a>00662 <span class="comment">            int op_latency = fuPool-&gt;getOpLatency(op_class);</span>
<a name="l00663"></a>00663 <span class="comment"></span>
<a name="l00664"></a>00664 <span class="comment">            if (op_latency == 1) {</span>
<a name="l00665"></a>00665 <span class="comment">                i2e_info-&gt;insts[exec_queue_slot++] = issuing_inst;</span>
<a name="l00666"></a>00666 <span class="comment">                i2e_info-&gt;size++;</span>
<a name="l00667"></a>00667 <span class="comment"></span>
<a name="l00668"></a>00668 <span class="comment">                // Add the FU onto the list of FU&apos;s to be freed next cycle.</span>
<a name="l00669"></a>00669 <span class="comment">                fuPool-&gt;freeUnit(idx);</span>
<a name="l00670"></a>00670 <span class="comment">            } else {</span>
<a name="l00671"></a>00671 <span class="comment">                int issue_latency = fuPool-&gt;getIssueLatency(op_class);</span>
<a name="l00672"></a>00672 <span class="comment"></span>
<a name="l00673"></a>00673 <span class="comment">                if (issue_latency &gt; 1) {</span>
<a name="l00674"></a>00674 <span class="comment">                    // Generate completion event for the FU</span>
<a name="l00675"></a>00675 <span class="comment">                    FUCompletion *execution = new FUCompletion(issuing_inst,</span>
<a name="l00676"></a>00676 <span class="comment">                                                               idx, this);</span>
<a name="l00677"></a>00677 <span class="comment"></span>
<a name="l00678"></a>00678 <span class="comment">                    execution-&gt;schedule(curTick() + issue_latency - 1);</span>
<a name="l00679"></a>00679 <span class="comment">                } else {</span>
<a name="l00680"></a>00680 <span class="comment">                    i2e_info-&gt;insts[exec_queue_slot++] = issuing_inst;</span>
<a name="l00681"></a>00681 <span class="comment">                    i2e_info-&gt;size++;</span>
<a name="l00682"></a>00682 <span class="comment"></span>
<a name="l00683"></a>00683 <span class="comment">                    // Add the FU onto the list of FU&apos;s to be freed next cycle.</span>
<a name="l00684"></a>00684 <span class="comment">                    fuPool-&gt;freeUnit(idx);</span>
<a name="l00685"></a>00685 <span class="comment">                }</span>
<a name="l00686"></a>00686 <span class="comment">            }</span>
<a name="l00687"></a>00687 <span class="comment"></span>
<a name="l00688"></a>00688 <span class="comment">            DPRINTF(IQ, &quot;Thread %i: Issuing instruction PC %#x &quot;</span>
<a name="l00689"></a>00689 <span class="comment">                    &quot;[sn:%lli]\n&quot;,</span>
<a name="l00690"></a>00690 <span class="comment">                    issuing_inst-&gt;threadNumber, issuing_inst-&gt;readPC(),</span>
<a name="l00691"></a>00691 <span class="comment">                    issuing_inst-&gt;seqNum);</span>
<a name="l00692"></a>00692 <span class="comment"></span>
<a name="l00693"></a>00693 <span class="comment">            readyInsts[op_class].pop();</span>
<a name="l00694"></a>00694 <span class="comment"></span>
<a name="l00695"></a>00695 <span class="comment">            if (!readyInsts[op_class].empty()) {</span>
<a name="l00696"></a>00696 <span class="comment">                moveToYoungerInst(order_it);</span>
<a name="l00697"></a>00697 <span class="comment">            } else {</span>
<a name="l00698"></a>00698 <span class="comment">                readyIt[op_class] = listOrder.end();</span>
<a name="l00699"></a>00699 <span class="comment">                queueOnList[op_class] = false;</span>
<a name="l00700"></a>00700 <span class="comment">            }</span>
<a name="l00701"></a>00701 <span class="comment"></span>
<a name="l00702"></a>00702 <span class="comment">            issuing_inst-&gt;setIssued();</span>
<a name="l00703"></a>00703 <span class="comment">            ++total_issued;</span>
<a name="l00704"></a>00704 <span class="comment"></span>
<a name="l00705"></a>00705 <span class="comment">            if (!issuing_inst-&gt;isMemRef()) {</span>
<a name="l00706"></a>00706 <span class="comment">                // Memory instructions can not be freed from the IQ until they</span>
<a name="l00707"></a>00707 <span class="comment">                // complete.</span>
<a name="l00708"></a>00708 <span class="comment">                ++freeEntries;</span>
<a name="l00709"></a>00709 <span class="comment">                count[issuing_inst-&gt;threadNumber]--;</span>
<a name="l00710"></a>00710 <span class="comment">                issuing_inst-&gt;removeInIQ();</span>
<a name="l00711"></a>00711 <span class="comment">            } else {</span>
<a name="l00712"></a>00712 <span class="comment">                memDepUnit[issuing_inst-&gt;threadNumber].issue(issuing_inst);</span>
<a name="l00713"></a>00713 <span class="comment">            }</span>
<a name="l00714"></a>00714 <span class="comment"></span>
<a name="l00715"></a>00715 <span class="comment">            listOrder.erase(order_it++);</span>
<a name="l00716"></a>00716 <span class="comment">        } else {</span>
<a name="l00717"></a>00717 <span class="comment">            ++order_it;</span>
<a name="l00718"></a>00718 <span class="comment">        }</span>
<a name="l00719"></a>00719 <span class="comment">    }</span>
<a name="l00720"></a>00720 <span class="comment"></span>
<a name="l00721"></a>00721 <span class="comment">    if (total_issued) {</span>
<a name="l00722"></a>00722 <span class="comment">        cpu-&gt;activityThisCycle();</span>
<a name="l00723"></a>00723 <span class="comment">    } else {</span>
<a name="l00724"></a>00724 <span class="comment">        DPRINTF(IQ, &quot;Not able to schedule any instructions.\n&quot;);</span>
<a name="l00725"></a>00725 <span class="comment">    }</span>
<a name="l00726"></a>00726 <span class="comment">*/</span>
<a name="l00727"></a>00727 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa783e99c55fd8695cb33c087d14bece0"></a><!-- doxytag: member="InstQueue::setCPU" ref="aa783e99c55fd8695cb33c087d14bece0" args="(FullCPU *_cpu)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setCPU </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classInstQueue.html#a90ba84e54618cc07f2e8f05e046cb5ce">FullCPU</a> *&nbsp;</td>
          <td class="paramname"> <em>_cpu</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets CPU pointer. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00118"></a>00118 { <a class="code" href="classInstQueue.html#a766385c2941cd46525f4d9dff90200a2">cpu</a> = _cpu; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7cbe625b8c47621898e7ca92d70c826b"></a><!-- doxytag: member="InstQueue::setIssueToExecuteQueue" ref="a7cbe625b8c47621898e7ca92d70c826b" args="(TimeBuffer&lt; IssueStruct &gt; *i2eQueue)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setIssueToExecuteQueue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt; <a class="el" href="structIssueStruct.html">IssueStruct</a> &gt; *&nbsp;</td>
          <td class="paramname"> <em>i2eQueue</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the timer buffer between issue and execute. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00315"></a>00315 {
<a name="l00316"></a>00316     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(IQ, <span class="stringliteral">&quot;Set the issue to execute queue.\n&quot;</span>);
<a name="l00317"></a>00317     <a class="code" href="classInstQueue.html#af5c55240e63d9a13358eede4eb5352f1">issueToExecuteQueue</a> = i2e_ptr;
<a name="l00318"></a>00318 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad33d65c18c323d90695d7c2355b49af9"></a><!-- doxytag: member="InstQueue::squash" ref="ad33d65c18c323d90695d7c2355b49af9" args="(ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void squash </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Squashes instructions for a thread. Squashing information is obtained from the time buffer. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00909"></a>00909 {
<a name="l00910"></a>00910     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(IQ, <span class="stringliteral">&quot;[tid:%i]: Starting to squash instructions in &quot;</span>
<a name="l00911"></a>00911             <span class="stringliteral">&quot;the IQ.\n&quot;</span>, tid);
<a name="l00912"></a>00912 
<a name="l00913"></a>00913     <span class="comment">// Read instruction sequence number of last instruction out of the</span>
<a name="l00914"></a>00914     <span class="comment">// time buffer.</span>
<a name="l00915"></a>00915 <span class="comment">//    squashedSeqNum[tid] = fromCommit-&gt;commitInfo[tid].doneSeqNum;</span>
<a name="l00916"></a>00916 
<a name="l00917"></a>00917     <span class="comment">// Setup the squash iterator to point to the tail.</span>
<a name="l00918"></a>00918     <a class="code" href="classInstQueue.html#a76b506d03788e72757da427226e10356">squashIt</a>[tid] = <a class="code" href="classInstQueue.html#a7f2828a4f877a4a4d4b85a6788536b82">instList</a>[tid].end();
<a name="l00919"></a>00919     --<a class="code" href="classInstQueue.html#a76b506d03788e72757da427226e10356">squashIt</a>[tid];
<a name="l00920"></a>00920 
<a name="l00921"></a>00921     <span class="comment">// Call doSquash if there are insts in the IQ</span>
<a name="l00922"></a>00922     <span class="keywordflow">if</span> (<a class="code" href="classInstQueue.html#ac638062ba1de6609f143c5ee3a601109">count</a>[tid] &gt; 0) {
<a name="l00923"></a>00923         <a class="code" href="classInstQueue.html#a06cf52c4f09162bea03ec848f247151a">doSquash</a>(tid);
<a name="l00924"></a>00924     }
<a name="l00925"></a>00925 
<a name="l00926"></a>00926     <span class="comment">// Also tell the memory dependence unit to squash.</span>
<a name="l00927"></a>00927 <span class="comment">//    memDepUnit[tid].squash(squashedSeqNum[tid], tid);</span>
<a name="l00928"></a>00928 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a358bf0d85e8cd8b606877b341c518b5e"></a><!-- doxytag: member="InstQueue::updateFreeEntries" ref="a358bf0d85e8cd8b606877b341c518b5e" args="(int num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateFreeEntries </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Updates the number of free entries. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00215"></a>00215 { <a class="code" href="classInstQueue.html#ac2281ff630f82397bda33269f4ee8796">freeEntries</a> += num; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab9afe94d332a563b9485d1bb9acd68b4"></a><!-- doxytag: member="InstQueue::wakeDependents" ref="ab9afe94d332a563b9485d1bb9acd68b4" args="(DynInstPtr &amp;completed_inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wakeDependents </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>completed_inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Wakes all dependents of a completed instruction. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00777"></a>00777 {
<a name="l00778"></a>00778     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(IQ, <span class="stringliteral">&quot;Waking dependents of completed instruction.\n&quot;</span>);
<a name="l00779"></a>00779     <span class="comment">// Look at the physical destination register of the DynInst</span>
<a name="l00780"></a>00780     <span class="comment">// and look it up on the dependency graph.  Then mark as ready</span>
<a name="l00781"></a>00781     <span class="comment">// any instructions within the instruction queue.</span>
<a name="l00782"></a>00782 <span class="comment">/*</span>
<a name="l00783"></a>00783 <span class="comment">    DependencyEntry *curr;</span>
<a name="l00784"></a>00784 <span class="comment">    DependencyEntry *prev;</span>
<a name="l00785"></a>00785 <span class="comment">*/</span>
<a name="l00786"></a>00786     <span class="comment">// Tell the memory dependence unit to wake any dependents on this</span>
<a name="l00787"></a>00787     <span class="comment">// instruction if it is a memory instruction.  Also complete the memory</span>
<a name="l00788"></a>00788     <span class="comment">// instruction at this point since we know it executed fine.</span>
<a name="l00789"></a>00789     <span class="comment">// @todo: Might want to rename &quot;completeMemInst&quot; to</span>
<a name="l00790"></a>00790     <span class="comment">// something that indicates that it won&apos;t need to be replayed, and call</span>
<a name="l00791"></a>00791     <span class="comment">// this earlier.  Might not be a big deal.</span>
<a name="l00792"></a>00792     <span class="keywordflow">if</span> (completed_inst-&gt;isMemRef()) {
<a name="l00793"></a>00793 <span class="comment">//        memDepUnit[completed_inst-&gt;threadNumber].wakeDependents(completed_inst);</span>
<a name="l00794"></a>00794         <a class="code" href="classInstQueue.html#aad2715729f71f220e9cf9b99515384ca">completeMemInst</a>(completed_inst);
<a name="l00795"></a>00795     }
<a name="l00796"></a>00796     completed_inst-&gt;wakeDependents();
<a name="l00797"></a>00797 <span class="comment">/*</span>
<a name="l00798"></a>00798 <span class="comment">    for (int dest_reg_idx = 0;</span>
<a name="l00799"></a>00799 <span class="comment">         dest_reg_idx &lt; completed_inst-&gt;numDestRegs();</span>
<a name="l00800"></a>00800 <span class="comment">         dest_reg_idx++)</span>
<a name="l00801"></a>00801 <span class="comment">    {</span>
<a name="l00802"></a>00802 <span class="comment">        PhysRegIndex dest_reg =</span>
<a name="l00803"></a>00803 <span class="comment">            completed_inst-&gt;renamedDestRegIdx(dest_reg_idx);</span>
<a name="l00804"></a>00804 <span class="comment"></span>
<a name="l00805"></a>00805 <span class="comment">        // Special case of uniq or control registers.  They are not</span>
<a name="l00806"></a>00806 <span class="comment">        // handled by the IQ and thus have no dependency graph entry.</span>
<a name="l00807"></a>00807 <span class="comment">        // @todo Figure out a cleaner way to handle this.</span>
<a name="l00808"></a>00808 <span class="comment">        if (dest_reg &gt;= numPhysRegs) {</span>
<a name="l00809"></a>00809 <span class="comment">            continue;</span>
<a name="l00810"></a>00810 <span class="comment">        }</span>
<a name="l00811"></a>00811 <span class="comment"></span>
<a name="l00812"></a>00812 <span class="comment">        DPRINTF(IQ, &quot;Waking any dependents on register %i.\n&quot;,</span>
<a name="l00813"></a>00813 <span class="comment">                (int) dest_reg);</span>
<a name="l00814"></a>00814 <span class="comment"></span>
<a name="l00815"></a>00815 <span class="comment">        //Maybe abstract this part into a function.</span>
<a name="l00816"></a>00816 <span class="comment">        //Go through the dependency chain, marking the registers as ready</span>
<a name="l00817"></a>00817 <span class="comment">        //within the waiting instructions.</span>
<a name="l00818"></a>00818 <span class="comment"></span>
<a name="l00819"></a>00819 <span class="comment">        curr = dependGraph[dest_reg].next;</span>
<a name="l00820"></a>00820 <span class="comment"></span>
<a name="l00821"></a>00821 <span class="comment">        while (curr) {</span>
<a name="l00822"></a>00822 <span class="comment">            DPRINTF(IQ, &quot;Waking up a dependent instruction, PC%#x.\n&quot;,</span>
<a name="l00823"></a>00823 <span class="comment">                    curr-&gt;inst-&gt;readPC());</span>
<a name="l00824"></a>00824 <span class="comment"></span>
<a name="l00825"></a>00825 <span class="comment">            // Might want to give more information to the instruction</span>
<a name="l00826"></a>00826 <span class="comment">            // so that it knows which of its source registers is ready.</span>
<a name="l00827"></a>00827 <span class="comment">            // However that would mean that the dependency graph entries</span>
<a name="l00828"></a>00828 <span class="comment">            // would need to hold the src_reg_idx.</span>
<a name="l00829"></a>00829 <span class="comment">            curr-&gt;inst-&gt;markSrcRegReady();</span>
<a name="l00830"></a>00830 <span class="comment"></span>
<a name="l00831"></a>00831 <span class="comment">            addIfReady(curr-&gt;inst);</span>
<a name="l00832"></a>00832 <span class="comment"></span>
<a name="l00833"></a>00833 <span class="comment">            DependencyEntry::mem_alloc_counter--;</span>
<a name="l00834"></a>00834 <span class="comment"></span>
<a name="l00835"></a>00835 <span class="comment">            prev = curr;</span>
<a name="l00836"></a>00836 <span class="comment">            curr = prev-&gt;next;</span>
<a name="l00837"></a>00837 <span class="comment">            prev-&gt;inst = NULL;</span>
<a name="l00838"></a>00838 <span class="comment"></span>
<a name="l00839"></a>00839 <span class="comment">            delete prev;</span>
<a name="l00840"></a>00840 <span class="comment">        }</span>
<a name="l00841"></a>00841 <span class="comment"></span>
<a name="l00842"></a>00842 <span class="comment">        // Reset the head node now that all of its dependents have been woken</span>
<a name="l00843"></a>00843 <span class="comment">        // up.</span>
<a name="l00844"></a>00844 <span class="comment">        dependGraph[dest_reg].next = NULL;</span>
<a name="l00845"></a>00845 <span class="comment">        dependGraph[dest_reg].inst = NULL;</span>
<a name="l00846"></a>00846 <span class="comment"></span>
<a name="l00847"></a>00847 <span class="comment">        // Mark the scoreboard as having that register ready.</span>
<a name="l00848"></a>00848 <span class="comment">        regScoreboard[dest_reg] = true;</span>
<a name="l00849"></a>00849 <span class="comment">    }</span>
<a name="l00850"></a>00850 <span class="comment">*/</span>
<a name="l00851"></a>00851 }
</pre></div></p>

</div>
</div>
<hr/><h2>フレンドと関連する関数</h2>
<a class="anchor" id="a0b1390899d1d55620476dd762bd7ac6c"></a><!-- doxytag: member="InstQueue::Impl::FullCPU" ref="a0b1390899d1d55620476dd762bd7ac6c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class Impl::FullCPU<code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="a92c8d68d5f0e17758f89daa2647196f5"></a><!-- doxytag: member="InstQueue::commitToIEWDelay" ref="a92c8d68d5f0e17758f89daa2647196f5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classInstQueue.html#a92c8d68d5f0e17758f89daa2647196f5">commitToIEWDelay</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Delay between commit stage and the IQ. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000043">TODO:</a></b></dt><dd>: Make there be a distinction between the delays within IEW. </dd></dl>

</div>
</div>
<a class="anchor" id="ac638062ba1de6609f143c5ee3a601109"></a><!-- doxytag: member="InstQueue::count" ref="ac638062ba1de6609f143c5ee3a601109" args="[Impl::MaxThreads]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classInstQueue.html#ac638062ba1de6609f143c5ee3a601109">count</a>[Impl::MaxThreads]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Per Thread IQ count </p>

</div>
</div>
<a class="anchor" id="a766385c2941cd46525f4d9dff90200a2"></a><!-- doxytag: member="InstQueue::cpu" ref="a766385c2941cd46525f4d9dff90200a2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classInstQueue.html#a90ba84e54618cc07f2e8f05e046cb5ce">FullCPU</a>* <a class="el" href="classInstQueue.html#a766385c2941cd46525f4d9dff90200a2">cpu</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pointer to the CPU. </p>

</div>
</div>
<a class="anchor" id="a22dc8294eecb144fbdd951d2e32e9330"></a><!-- doxytag: member="InstQueue::dcacheInterface" ref="a22dc8294eecb144fbdd951d2e32e9330" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MemInterface* <a class="el" href="classInstQueue.html#a22dc8294eecb144fbdd951d2e32e9330">dcacheInterface</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classCache.html">Cache</a> interface. </p>

</div>
</div>
<a class="anchor" id="ac2281ff630f82397bda33269f4ee8796"></a><!-- doxytag: member="InstQueue::freeEntries" ref="ac2281ff630f82397bda33269f4ee8796" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classInstQueue.html#ac2281ff630f82397bda33269f4ee8796">freeEntries</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of free IQ entries left. </p>

</div>
</div>
<a class="anchor" id="a7f2828a4f877a4a4d4b85a6788536b82"></a><!-- doxytag: member="InstQueue::instList" ref="a7f2828a4f877a4a4d4b85a6788536b82" args="[Impl::MaxThreads]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1list.html">std::list</a>&lt;<a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>&gt; <a class="el" href="classInstQueue.html#a7f2828a4f877a4a4d4b85a6788536b82">instList</a>[Impl::MaxThreads]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>List of all the instructions in the IQ (some of which may be issued). </p>

</div>
</div>
<a class="anchor" id="a928f22a2c6ce592adc40e5242c9d6572"></a><!-- doxytag: member="InstQueue::iqBranchInstsIssued" ref="a928f22a2c6ce592adc40e5242c9d6572" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classInstQueue.html#a928f22a2c6ce592adc40e5242c9d6572">iqBranchInstsIssued</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stat for number of branch instructions issued. </p>

</div>
</div>
<a class="anchor" id="aa9f2fa124c9f0b4b22461b6717449d9a"></a><!-- doxytag: member="InstQueue::iqFloatInstsIssued" ref="aa9f2fa124c9f0b4b22461b6717449d9a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classInstQueue.html#aa9f2fa124c9f0b4b22461b6717449d9a">iqFloatInstsIssued</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stat for number of floating point instructions issued. </p>

</div>
</div>
<a class="anchor" id="a435e1ce10c3a7f54a60941e583adeb09"></a><!-- doxytag: member="InstQueue::iqInstsAdded" ref="a435e1ce10c3a7f54a60941e583adeb09" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classInstQueue.html#a435e1ce10c3a7f54a60941e583adeb09">iqInstsAdded</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stat for number of instructions added. </p>

</div>
</div>
<a class="anchor" id="a735f2023e70e53b7889a3a316bd3d57f"></a><!-- doxytag: member="InstQueue::iqIntInstsIssued" ref="a735f2023e70e53b7889a3a316bd3d57f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classInstQueue.html#a735f2023e70e53b7889a3a316bd3d57f">iqIntInstsIssued</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stat for number of integer instructions issued. </p>

</div>
</div>
<a class="anchor" id="a5e7d55d3f07e86e389ca3a715766e108"></a><!-- doxytag: member="InstQueue::iqMemInstsIssued" ref="a5e7d55d3f07e86e389ca3a715766e108" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classInstQueue.html#a5e7d55d3f07e86e389ca3a715766e108">iqMemInstsIssued</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stat for number of memory instructions issued. </p>

</div>
</div>
<a class="anchor" id="ad234890bc414fffe7ed71840c51be5cb"></a><!-- doxytag: member="InstQueue::iqMiscInstsIssued" ref="ad234890bc414fffe7ed71840c51be5cb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classInstQueue.html#ad234890bc414fffe7ed71840c51be5cb">iqMiscInstsIssued</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stat for number of miscellaneous instructions issued. </p>

</div>
</div>
<a class="anchor" id="adf890a08fae50ea8249171b07c40adac"></a><!-- doxytag: member="InstQueue::iqNonSpecInstsAdded" ref="adf890a08fae50ea8249171b07c40adac" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classInstQueue.html#adf890a08fae50ea8249171b07c40adac">iqNonSpecInstsAdded</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stat for number of non-speculative instructions added. </p>

</div>
</div>
<a class="anchor" id="a8312e8984bcfab5a77de40e1738103db"></a><!-- doxytag: member="InstQueue::iqSquashedInstsExamined" ref="a8312e8984bcfab5a77de40e1738103db" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classInstQueue.html#a8312e8984bcfab5a77de40e1738103db">iqSquashedInstsExamined</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stat for number of squashed instructions examined when squashing. </p>

</div>
</div>
<a class="anchor" id="ac91799c895e5aff3af0afdbd7691a163"></a><!-- doxytag: member="InstQueue::iqSquashedInstsIssued" ref="ac91799c895e5aff3af0afdbd7691a163" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classInstQueue.html#ac91799c895e5aff3af0afdbd7691a163">iqSquashedInstsIssued</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stat for number of squashed instructions that were ready to issue. </p>

</div>
</div>
<a class="anchor" id="a6c0b47431b6e84536fd9bb61624d6d97"></a><!-- doxytag: member="InstQueue::iqSquashedNonSpecRemoved" ref="a6c0b47431b6e84536fd9bb61624d6d97" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classInstQueue.html#a6c0b47431b6e84536fd9bb61624d6d97">iqSquashedNonSpecRemoved</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stat for number of non-speculative instructions removed due to a squash. </p>

</div>
</div>
<a class="anchor" id="a4398b6005b81008bd163bbba78dfd929"></a><!-- doxytag: member="InstQueue::iqSquashedOperandsExamined" ref="a4398b6005b81008bd163bbba78dfd929" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classInstQueue.html#a4398b6005b81008bd163bbba78dfd929">iqSquashedOperandsExamined</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stat for number of squashed instruction operands examined when squashing. </p>

</div>
</div>
<a class="anchor" id="af5c55240e63d9a13358eede4eb5352f1"></a><!-- doxytag: member="InstQueue::issueToExecuteQueue" ref="af5c55240e63d9a13358eede4eb5352f1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt;<a class="el" href="structIssueStruct.html">IssueStruct</a>&gt;* <a class="el" href="classInstQueue.html#af5c55240e63d9a13358eede4eb5352f1">issueToExecuteQueue</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The queue to the execute stage. Issued instructions will be written into it. </p>

</div>
</div>
<a class="anchor" id="a51e5f9f0cb40d61e95b1518f1be90b73"></a><!-- doxytag: member="InstQueue::maxEntries" ref="a51e5f9f0cb40d61e95b1518f1be90b73" args="[Impl::MaxThreads]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classInstQueue.html#a51e5f9f0cb40d61e95b1518f1be90b73">maxEntries</a>[Impl::MaxThreads]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Max IQ Entries Per Thread </p>

</div>
</div>
<a class="anchor" id="ac0ba4d07026aaf6386c001a68d059cbf"></a><!-- doxytag: member="InstQueue::nonSpecInsts" ref="ac0ba4d07026aaf6386c001a68d059cbf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a>, <a class="el" href="classInstQueue.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>&gt; <a class="el" href="classInstQueue.html#ac0ba4d07026aaf6386c001a68d059cbf">nonSpecInsts</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>List of non-speculative instructions that will be scheduled once the IQ gets a signal from commit. While it's redundant to have the key be a part of the value (the sequence number is stored inside of DynInst), when these instructions are woken up only the sequence number will be available. Thus it is most efficient to be able to search by the sequence number alone. </p>

</div>
</div>
<a class="anchor" id="a325de474a9f6652329339d9fc2ea09c0"></a><!-- doxytag: member="InstQueue::numEntries" ref="a325de474a9f6652329339d9fc2ea09c0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classInstQueue.html#a325de474a9f6652329339d9fc2ea09c0">numEntries</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The number of entries in the instruction queue. </p>

</div>
</div>
<a class="anchor" id="a792311f13ea91008a88e902ef13b0341"></a><!-- doxytag: member="InstQueue::numThreads" ref="a792311f13ea91008a88e902ef13b0341" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classInstQueue.html#a792311f13ea91008a88e902ef13b0341">numThreads</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of Total Threads </p>

</div>
</div>
<a class="anchor" id="a73e22f052c708ca5c198bd0a01eb3604"></a><!-- doxytag: member="InstQueue::readyInsts" ref="a73e22f052c708ca5c198bd0a01eb3604" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classInstQueue.html#a60636ae8f3b649078c4f1bdd3b20dcad">ReadyInstQueue</a> <a class="el" href="classInstQueue.html#a73e22f052c708ca5c198bd0a01eb3604">readyInsts</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>List of ready instructions. </p>

</div>
</div>
<a class="anchor" id="a97d5a7e4630ad1d017909f7504b9ec32"></a><!-- doxytag: member="InstQueue::squashedSeqNum" ref="a97d5a7e4630ad1d017909f7504b9ec32" args="[Impl::MaxThreads]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> <a class="el" href="classInstQueue.html#a97d5a7e4630ad1d017909f7504b9ec32">squashedSeqNum</a>[Impl::MaxThreads]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The sequence number of the squashed instruction. </p>

</div>
</div>
<a class="anchor" id="a76b506d03788e72757da427226e10356"></a><!-- doxytag: member="InstQueue::squashIt" ref="a76b506d03788e72757da427226e10356" args="[Impl::MaxThreads]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classInstQueue.html#a184cb829e22cc656acb41864f68f51ea">ListIt</a> <a class="el" href="classInstQueue.html#a76b506d03788e72757da427226e10356">squashIt</a>[Impl::MaxThreads]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Iterator that points to the last instruction that has been squashed. This will not be valid unless the IQ is in the process of squashing. </p>

</div>
</div>
<a class="anchor" id="ab3c3a8cd00248d9cd6acad330da902a7"></a><!-- doxytag: member="InstQueue::totalWidth" ref="ab3c3a8cd00248d9cd6acad330da902a7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classInstQueue.html#ab3c3a8cd00248d9cd6acad330da902a7">totalWidth</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The total number of instructions that can be issued in one cycle. </p>

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>cpu/ozone/<a class="el" href="ozone_2inst__queue_8hh_source.html">inst_queue.hh</a></li>
<li>cpu/ozone/<a class="el" href="ozone_2inst__queue__impl_8hh_source.html">inst_queue_impl.hh</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
