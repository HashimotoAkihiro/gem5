<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス IGbE</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>クラス IGbE</h1><!-- doxytag: class="IGbE" --><!-- doxytag: inherits="EtherDevice" -->
<p><code>#include &lt;<a class="el" href="i8254xGBe_8hh_source.html">i8254xGBe.hh</a>&gt;</code></p>
<div class="dynheader">
IGbEに対する継承グラフ</div>
<div class="dynsection">
 <div class="center">
  <img src="classIGbE.gif" usemap="#IGbE_map" alt=""/>
  <map id="IGbE_map" name="IGbE_map">
<area href="classEtherDevice.html" alt="EtherDevice" shape="rect" coords="105,392,200,416"/>
<area href="classPciDevice.html" alt="PciDevice" shape="rect" coords="105,336,200,360"/>
<area href="classDmaDevice.html" alt="DmaDevice" shape="rect" coords="105,280,200,304"/>
<area href="classPioDevice.html" alt="PioDevice" shape="rect" coords="105,224,200,248"/>
<area href="classMemObject.html" alt="MemObject" shape="rect" coords="105,168,200,192"/>
<area href="classClockedObject.html" alt="ClockedObject" shape="rect" coords="105,112,200,136"/>
<area href="classSimObject.html" alt="SimObject" shape="rect" coords="105,56,200,80"/>
<area href="classEventManager.html" alt="EventManager" shape="rect" coords="0,0,95,24"/>
<area href="classSerializable.html" alt="Serializable" shape="rect" coords="105,0,200,24"/>
<area href="classDrainable.html" alt="Drainable" shape="rect" coords="210,0,305,24"/>
</map>
 </div>
</div>

<p><a href="classIGbE-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>構成</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1DescCache.html">DescCache</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1RxDescCache.html">RxDescCache</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html">TxDescCache</a></td></tr>
<tr><td colspan="2"><h2>Public 型</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef IGbEParams&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#ad27b5cfed87f35a483863a73336d8258">Params</a></td></tr>
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classIGbE.html#ad27b5cfed87f35a483863a73336d8258">Params</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a3e3eef81d3caf789558505740ce0ed07">IGbE</a> (const <a class="el" href="classIGbE.html#ad27b5cfed87f35a483863a73336d8258">Params</a> *params)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a8ff05c4d178fcac0d8a3ae83db67d89b">~IGbE</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a02fd73d861ef2e4aabb38c0c9ff82947">init</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classEtherInt.html">EtherInt</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a10260c5a583c0894dcdcd1ced50a53ae">getEthPort</a> (const std::string &amp;if_name, int idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a613ec7d5e1ec64f8d21fec78ae8e568e">read</a> (<a class="el" href="classPacket.html">PacketPtr</a> pkt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a4cefab464e72b5dd42c003a0a4341802">write</a> (<a class="el" href="classPacket.html">PacketPtr</a> pkt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#aac7b61a78530109bfa20923a53064bbf">writeConfig</a> (<a class="el" href="classPacket.html">PacketPtr</a> pkt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#aaae8ccdf0f0b15e4d1b93e71a0c8b303">ethRxPkt</a> (<a class="el" href="classRefCountingPtr.html">EthPacketPtr</a> packet)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a4b170caf60b0a01672ab8e8e3e4dff10">ethTxDone</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a53e036786d17361be4c7320d39c99b84">serialize</a> (std::ostream &amp;os)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#af22e5d6d660b97db37003ac61ac4ee49">unserialize</a> (<a class="el" href="classCheckpoint.html">Checkpoint</a> *cp, const std::string &amp;section)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#aa8a18d230dba7a674ac8a0b4f35bc36a">drain</a> (<a class="el" href="classDrainManager.html">DrainManager</a> *dm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a8f020d3237536fe007fc488c4125c5d8">drainResume</a> ()</td></tr>
<tr><td colspan="2"><h2>Public 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#adad52012a21d414368149556f2cc909b">lastInterrupt</a></td></tr>
<tr><td colspan="2"><h2>Private メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a047d922eba10484b3a0127faa8e1be0a">rdtrProcess</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a1d54e26efe0f0a1fbd354ccffa34459f">radvProcess</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a7e3216d8f11c9d6c3fa244be21648778">tadvProcess</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#aedc70a3ef5f173813e3060f77fa53bc8">tidvProcess</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a873dd91783f9efb4a590aded1f70d6b0">tick</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#aa22f1272cbc1c6b44dd50faaa71a0d87">rxStateMachine</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a86f1c8a72188e638c991535ba96f5f0e">txStateMachine</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#af67ff1365c83adc97fef8753e38f3d9e">txWire</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a5421bafb8503ffca04cac20d616ae4cc">postInterrupt</a> (<a class="el" href="namespaceiGbReg.html#ab881f740bd3545d8eb42b05253752e9c">iGbReg::IntTypes</a> t, bool now=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a29bfbbe58f3015bfb026c019295a8836">chkInterrupt</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a671c460437037741ca81581773939a28">delayIntEvent</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a6cc0f5948b3dc7c1f2e489bce23ef907">cpuPostInt</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a5bb6e41ae1497d53a611db0a6b455115">cpuClearInt</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#ad4b9fb8ece2ddee6cda2b12e4f77b3d1">intClock</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a9506deecc41eb6290f9b9b8662cc33c2">restartClock</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a97cbf86aeda5390deb20b1d39396d111">checkDrain</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a> (std::string sm, std::string st, int flags=CPA::FL_NONE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#ad5560d7f7671ea0c96250beacf187ac8">anQ</a> (std::string sm, std::string q)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a4d59c58fec3355c64488974a9110bb70">anDq</a> (std::string sm, std::string q)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a9398b9f9270a0cfcc96ab2f8ad4b2c87">anPq</a> (std::string sm, std::string q, int num=1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a48fd12dd7cf4b842162b7a0b89875559">anRq</a> (std::string sm, std::string q, int num=1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#ace79fee3c0fd652014ae35a7b1497ca1">anWe</a> (std::string sm, std::string q)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a09c6a12f9551bd90d913dfe8ed396a67">anWf</a> (std::string sm, std::string q)</td></tr>
<tr><td colspan="2"><h2>Private 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classIGbEInt.html">IGbEInt</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a4c7684471cc2bc72bc660ea06ca78c91">etherInt</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCPA.html">CPA</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#ad3738d2e08f4ea21f1c3721f2492c9c2">cpa</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structiGbReg_1_1Regs.html">iGbReg::Regs</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a8988636da8c2e4f74e8c62d7ad585a61">eeOpBits</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a976342e4e142f8f031f86a8e7ce7a55f">eeAddrBits</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#ad2c36d4fa51a4befaa7518f6fa3590be">eeDataBits</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#aa6c5c24d6b03e9f01ddacc4448214383">eeOpcode</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a00d8c4d0c00b1a7fc2a5885222511eee">eeAddr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a7a8d29882b2cc202e8f3d9f4e758937c">flash</a> [<a class="el" href="namespaceiGbReg.html#adb0e1024d46141c966014951f5b1e5c8">iGbReg::EEPROM_SIZE</a>]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDrainManager.html">DrainManager</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a329b71fb934a93312ca0aacbf5a3f982">drainManager</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPacketFifo.html">PacketFifo</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPacketFifo.html">PacketFifo</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#ae699c324753236e0a59aa2465920eb46">txFifo</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">EthPacketPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">rxTick</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a0f33aec9eb84199e089e1917f7df501d">txTick</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a99be71cc5dbbb45b77d1d66d1bedf454">txFifoTick</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#aa8031223419e9d8480a99fae1f2de778">rxDmaPacket</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a41fd0002dbd12f7ab760e7f0a6620953">pktOffset</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#aa17c871ae2de13303ab07a8e8b571965">fetchDelay</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a899afa4a59ed0cf8334061645dc16c53">wbDelay</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#ae404928093bd61ac24cd54406a98046e">fetchCompDelay</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#ab0f05d6ecbedd2a670abfe34bc8112e1">wbCompDelay</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a94231b5b6ec824655f1e33a2481009fb">rxWriteDelay</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a2e204efac3d8a0a09aef20570520baac">txReadDelay</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt; <a class="el" href="classIGbE.html">IGbE</a>,&amp;IGbE::rdtrProcess &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a72b4c60f46bdb4b88427dec167aaca80">rdtrEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt; <a class="el" href="classIGbE.html">IGbE</a>,&amp;IGbE::radvProcess &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a30a3a2a8194ad851683c915beca8a172">radvEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt; <a class="el" href="classIGbE.html">IGbE</a>,&amp;IGbE::tadvProcess &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a52af2948f0bdbd05624c9f1e90872556">tadvEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt; <a class="el" href="classIGbE.html">IGbE</a>,&amp;IGbE::tidvProcess &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a91fce863693eb4c56a924639620d77cf">tidvEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt; <a class="el" href="classIGbE.html">IGbE</a>,&amp;IGbE::tick &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a13b02e56360d63f349a514edb321bd9c">tickEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt; <a class="el" href="classIGbE.html">IGbE</a>,&amp;IGbE::delayIntEvent &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a3de27cfe33d0ae9f9451c767ee40a57d">interEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classIGbE_1_1RxDescCache.html">RxDescCache</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classIGbE_1_1TxDescCache.html">TxDescCache</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a></td></tr>
<tr><td colspan="2"><h2>フレンド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#a5117ecf4d368d174c17a9304676a45a5">RxDescCache</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE.html#ab83c1d837daa8ccbbd651c133208ced0">TxDescCache</a></td></tr>
</table>
<hr/><h2>型定義</h2>
<a class="anchor" id="ad27b5cfed87f35a483863a73336d8258"></a><!-- doxytag: member="IGbE::Params" ref="ad27b5cfed87f35a483863a73336d8258" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef IGbEParams <a class="el" href="classIGbE.html#ad27b5cfed87f35a483863a73336d8258">Params</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classEtherDevice.html#afcf43c7944288000e850f783bdd66b9d">EtherDevice</a>を再定義しています。</p>

</div>
</div>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="a3e3eef81d3caf789558505740ce0ed07"></a><!-- doxytag: member="IGbE::IGbE" ref="a3e3eef81d3caf789558505740ce0ed07" args="(const Params *params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classIGbE.html">IGbE</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classIGbE.html#ad27b5cfed87f35a483863a73336d8258">Params</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00060"></a>00060     : <a class="code" href="classEtherDevice.html#a6f5090c40cfd553717f2e6048e0246cc">EtherDevice</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>), <a class="code" href="classIGbE.html#a4c7684471cc2bc72bc660ea06ca78c91">etherInt</a>(<a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>),  <a class="code" href="classIGbE.html#a329b71fb934a93312ca0aacbf5a3f982">drainManager</a>(<a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>),
<a name="l00061"></a>00061       <a class="code" href="classIGbE.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;rx_fifo_size), <a class="code" href="classIGbE.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;tx_fifo_size), <a class="code" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">rxTick</a>(<span class="keyword">false</span>),
<a name="l00062"></a>00062       <a class="code" href="classIGbE.html#a0f33aec9eb84199e089e1917f7df501d">txTick</a>(<span class="keyword">false</span>), <a class="code" href="classIGbE.html#a99be71cc5dbbb45b77d1d66d1bedf454">txFifoTick</a>(<span class="keyword">false</span>), <a class="code" href="classIGbE.html#aa8031223419e9d8480a99fae1f2de778">rxDmaPacket</a>(<span class="keyword">false</span>), <a class="code" href="classIGbE.html#a41fd0002dbd12f7ab760e7f0a6620953">pktOffset</a>(0),
<a name="l00063"></a>00063       <a class="code" href="classIGbE.html#aa17c871ae2de13303ab07a8e8b571965">fetchDelay</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;fetch_delay), <a class="code" href="classIGbE.html#a899afa4a59ed0cf8334061645dc16c53">wbDelay</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;wb_delay), 
<a name="l00064"></a>00064       <a class="code" href="classIGbE.html#ae404928093bd61ac24cd54406a98046e">fetchCompDelay</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;fetch_comp_delay), <a class="code" href="classIGbE.html#ab0f05d6ecbedd2a670abfe34bc8112e1">wbCompDelay</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;wb_comp_delay), 
<a name="l00065"></a>00065       <a class="code" href="classIGbE.html#a94231b5b6ec824655f1e33a2481009fb">rxWriteDelay</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;rx_write_delay), <a class="code" href="classIGbE.html#a2e204efac3d8a0a09aef20570520baac">txReadDelay</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;tx_read_delay),  
<a name="l00066"></a>00066       <a class="code" href="classIGbE.html#a72b4c60f46bdb4b88427dec167aaca80">rdtrEvent</a>(<span class="keyword">this</span>), <a class="code" href="classIGbE.html#a30a3a2a8194ad851683c915beca8a172">radvEvent</a>(<span class="keyword">this</span>),
<a name="l00067"></a>00067       <a class="code" href="classIGbE.html#a52af2948f0bdbd05624c9f1e90872556">tadvEvent</a>(<span class="keyword">this</span>), <a class="code" href="classIGbE.html#a91fce863693eb4c56a924639620d77cf">tidvEvent</a>(<span class="keyword">this</span>), <a class="code" href="classIGbE.html#a13b02e56360d63f349a514edb321bd9c">tickEvent</a>(<span class="keyword">this</span>), <a class="code" href="classIGbE.html#a3de27cfe33d0ae9f9451c767ee40a57d">interEvent</a>(<span class="keyword">this</span>),
<a name="l00068"></a>00068       <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>(<span class="keyword">this</span>, <a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>()+<span class="stringliteral">&quot;.RxDesc&quot;</span>, <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;rx_desc_cache_size),
<a name="l00069"></a>00069       <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>(<span class="keyword">this</span>, <a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>()+<span class="stringliteral">&quot;.TxDesc&quot;</span>, <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;tx_desc_cache_size),
<a name="l00070"></a>00070       <a class="code" href="classIGbE.html#adad52012a21d414368149556f2cc909b">lastInterrupt</a>(0)
<a name="l00071"></a>00071 {
<a name="l00072"></a>00072     <a class="code" href="classIGbE.html#a4c7684471cc2bc72bc660ea06ca78c91">etherInt</a> = <span class="keyword">new</span> <a class="code" href="classIGbEInt.html">IGbEInt</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.int&quot;</span>, <span class="keyword">this</span>);
<a name="l00073"></a>00073 
<a name="l00074"></a>00074     <span class="comment">// Initialized internal registers per Intel documentation</span>
<a name="l00075"></a>00075     <span class="comment">// All registers intialized to 0 by per register constructor</span>
<a name="l00076"></a>00076     <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#ad24cb7797a2d18bb3fff795e5f78149e">ctrl</a>.fd(1);
<a name="l00077"></a>00077     <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#ad24cb7797a2d18bb3fff795e5f78149e">ctrl</a>.lrst(1);
<a name="l00078"></a>00078     <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#ad24cb7797a2d18bb3fff795e5f78149e">ctrl</a>.speed(2);
<a name="l00079"></a>00079     <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#ad24cb7797a2d18bb3fff795e5f78149e">ctrl</a>.frcspd(1);
<a name="l00080"></a>00080     <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a46dafc6aaeb8cc7eed8dbe2c550e5b6e">sts</a>.speed(3); <span class="comment">// Say we&apos;re 1000Mbps</span>
<a name="l00081"></a>00081     <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a46dafc6aaeb8cc7eed8dbe2c550e5b6e">sts</a>.fd(1); <span class="comment">// full duplex</span>
<a name="l00082"></a>00082     <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a46dafc6aaeb8cc7eed8dbe2c550e5b6e">sts</a>.lu(1); <span class="comment">// link up</span>
<a name="l00083"></a>00083     <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#afd260aab074918b32c59a399cbfd6211">eecd</a>.fwe(1);
<a name="l00084"></a>00084     <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#afd260aab074918b32c59a399cbfd6211">eecd</a>.ee_type(1);
<a name="l00085"></a>00085     <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a781580e46c65f953e6db9e3c415bece1">imr</a> = 0;
<a name="l00086"></a>00086     <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a69dca9e21a6ea4a040440a0948d8bb57">iam</a> = 0;
<a name="l00087"></a>00087     <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a55fcbfb49bf2a178b26929cc5bdc1eab">rxdctl</a>.gran(1);
<a name="l00088"></a>00088     <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a55fcbfb49bf2a178b26929cc5bdc1eab">rxdctl</a>.wthresh(1);
<a name="l00089"></a>00089     <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a793d2b523c8c79107885793b8edd5e48">fcrth</a>(1);
<a name="l00090"></a>00090     <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7d4a53842dc287993e93799f84b676ea">tdwba</a> = 0;
<a name="l00091"></a>00091     <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a5ec909db587986b48557c064d55d096f">rlpml</a> = 0;
<a name="l00092"></a>00092     <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a43e2669b3871b70ea444bee307339af4">sw_fw_sync</a> = 0;
<a name="l00093"></a>00093 
<a name="l00094"></a>00094     <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a1f570b5b5eb4a9598ad0c378c05de391">pba</a>.rxa(0x30);
<a name="l00095"></a>00095     <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a1f570b5b5eb4a9598ad0c378c05de391">pba</a>.txa(0x10);
<a name="l00096"></a>00096 
<a name="l00097"></a>00097     <a class="code" href="classIGbE.html#a8988636da8c2e4f74e8c62d7ad585a61">eeOpBits</a>            = 0;
<a name="l00098"></a>00098     <a class="code" href="classIGbE.html#a976342e4e142f8f031f86a8e7ce7a55f">eeAddrBits</a>          = 0;
<a name="l00099"></a>00099     <a class="code" href="classIGbE.html#ad2c36d4fa51a4befaa7518f6fa3590be">eeDataBits</a>          = 0;
<a name="l00100"></a>00100     <a class="code" href="classIGbE.html#aa6c5c24d6b03e9f01ddacc4448214383">eeOpcode</a>            = 0;
<a name="l00101"></a>00101 
<a name="l00102"></a>00102     <span class="comment">// clear all 64 16 bit words of the eeprom</span>
<a name="l00103"></a>00103     memset(&amp;<a class="code" href="classIGbE.html#a7a8d29882b2cc202e8f3d9f4e758937c">flash</a>, 0, <a class="code" href="ns__gige_8hh.html#adb0e1024d46141c966014951f5b1e5c8">EEPROM_SIZE</a>*2);
<a name="l00104"></a>00104 
<a name="l00105"></a>00105     <span class="comment">// Set the MAC address</span>
<a name="l00106"></a>00106     memcpy(<a class="code" href="classIGbE.html#a7a8d29882b2cc202e8f3d9f4e758937c">flash</a>, <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;hardware_address.bytes(), ETH_ADDR_LEN);
<a name="l00107"></a>00107     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceX86ISA.html#ab5f9a01fc40e47853ae9551b008afcbd">x</a> = 0; <a class="code" href="namespaceX86ISA.html#ab5f9a01fc40e47853ae9551b008afcbd">x</a> &lt; ETH_ADDR_LEN/2; <a class="code" href="namespaceX86ISA.html#ab5f9a01fc40e47853ae9551b008afcbd">x</a>++)
<a name="l00108"></a>00108         <a class="code" href="classIGbE.html#a7a8d29882b2cc202e8f3d9f4e758937c">flash</a>[<a class="code" href="namespaceX86ISA.html#ab5f9a01fc40e47853ae9551b008afcbd">x</a>] = <a class="code" href="byteswap_8hh.html#a0ec9bd801b3cff46ad2537234f1f1a67">htobe</a>(<a class="code" href="classIGbE.html#a7a8d29882b2cc202e8f3d9f4e758937c">flash</a>[<a class="code" href="namespaceX86ISA.html#ab5f9a01fc40e47853ae9551b008afcbd">x</a>]);
<a name="l00109"></a>00109 
<a name="l00110"></a>00110     uint16_t csum = 0;
<a name="l00111"></a>00111     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; <a class="code" href="ns__gige_8hh.html#adb0e1024d46141c966014951f5b1e5c8">EEPROM_SIZE</a>; x++)
<a name="l00112"></a>00112         csum += <a class="code" href="byteswap_8hh.html#a0ec9bd801b3cff46ad2537234f1f1a67">htobe</a>(<a class="code" href="classIGbE.html#a7a8d29882b2cc202e8f3d9f4e758937c">flash</a>[x]);
<a name="l00113"></a>00113 
<a name="l00114"></a>00114 
<a name="l00115"></a>00115     <span class="comment">// Magic happy checksum value</span>
<a name="l00116"></a>00116     <a class="code" href="classIGbE.html#a7a8d29882b2cc202e8f3d9f4e758937c">flash</a>[EEPROM_SIZE-1] = <a class="code" href="byteswap_8hh.html#a0ec9bd801b3cff46ad2537234f1f1a67">htobe</a>((uint16_t)(<a class="code" href="namespaceiGbReg.html#a1860fbe30f4a9e9a36847405cf7ed5d9">EEPROM_CSUM</a> - csum));
<a name="l00117"></a>00117 
<a name="l00118"></a>00118     <span class="comment">// Store the MAC address as queue ID</span>
<a name="l00119"></a>00119     <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a> = <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;hardware_address;
<a name="l00120"></a>00120 
<a name="l00121"></a>00121     <a class="code" href="classIGbE.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#ac8bb3912a3ce86b15842e79d0b421204">clear</a>();
<a name="l00122"></a>00122     <a class="code" href="classIGbE.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#ac8bb3912a3ce86b15842e79d0b421204">clear</a>();
<a name="l00123"></a>00123 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8ff05c4d178fcac0d8a3ae83db67d89b"></a><!-- doxytag: member="IGbE::~IGbE" ref="a8ff05c4d178fcac0d8a3ae83db67d89b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classIGbE.html">IGbE</a> </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00126"></a>00126 {
<a name="l00127"></a>00127     <span class="keyword">delete</span> <a class="code" href="classIGbE.html#a4c7684471cc2bc72bc660ea06ca78c91">etherInt</a>;
<a name="l00128"></a>00128 }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="ac20fadb883428d12627ffa95751acf17"></a><!-- doxytag: member="IGbE::anBegin" ref="ac20fadb883428d12627ffa95751acf17" args="(std::string sm, std::string st, int flags=CPA::FL_NONE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void anBegin </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>sm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>st</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flags</em> = <code>CPA::FL_NONE</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00184"></a>00184                                                                      {
<a name="l00185"></a>00185         <a class="code" href="classIGbE.html#ad3738d2e08f4ea21f1c3721f2492c9c2">cpa</a>-&gt;<a class="code" href="classCPA.html#adaf891d4f8327c0311472739f4a2235b">hwBegin</a>((<a class="code" href="classCPA.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">CPA::flags</a>)<a class="code" href="namespacem5_1_1debug.html#a9ceb38153d5c0f156fbeada6dc00ff4f">flags</a>, <a class="code" href="classPioDevice.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>, <a class="code" href="namespaceMipsISA.html#a54c7875eaf2634ca9f55701aee2a22e5">sm</a>, <a class="code" href="namespaceArmISA.html#ae9ccb60923e03f5112b726ef11e2d299">st</a>);
<a name="l00186"></a>00186     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4d59c58fec3355c64488974a9110bb70"></a><!-- doxytag: member="IGbE::anDq" ref="a4d59c58fec3355c64488974a9110bb70" args="(std::string sm, std::string q)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void anDq </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>sm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>q</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00192"></a>00192                                          {
<a name="l00193"></a>00193         <a class="code" href="classIGbE.html#ad3738d2e08f4ea21f1c3721f2492c9c2">cpa</a>-&gt;<a class="code" href="classCPA.html#ac6ac43bd87dec93efd50230427086a92">hwDq</a>(<a class="code" href="classCPA.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9a96f120298159c9334e174bf9f286f63b">CPA::FL_NONE</a>, <a class="code" href="classPioDevice.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>, <a class="code" href="namespaceMipsISA.html#a54c7875eaf2634ca9f55701aee2a22e5">sm</a>, <a class="code" href="namespaceArmISA.html#a853401ad1c480843ad53caaa0198fd05">q</a>, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>);
<a name="l00194"></a>00194     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9398b9f9270a0cfcc96ab2f8ad4b2c87"></a><!-- doxytag: member="IGbE::anPq" ref="a9398b9f9270a0cfcc96ab2f8ad4b2c87" args="(std::string sm, std::string q, int num=1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void anPq </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>sm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em> = <code>1</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00196"></a>00196                                                       {
<a name="l00197"></a>00197         <a class="code" href="classIGbE.html#ad3738d2e08f4ea21f1c3721f2492c9c2">cpa</a>-&gt;<a class="code" href="classCPA.html#af8e1db0d850fba66449e84c9387c2fca">hwPq</a>(<a class="code" href="classCPA.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9a96f120298159c9334e174bf9f286f63b">CPA::FL_NONE</a>, <a class="code" href="classPioDevice.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>, <a class="code" href="namespaceMipsISA.html#a54c7875eaf2634ca9f55701aee2a22e5">sm</a>, <a class="code" href="namespaceArmISA.html#a853401ad1c480843ad53caaa0198fd05">q</a>, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>, <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>, num);
<a name="l00198"></a>00198     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad5560d7f7671ea0c96250beacf187ac8"></a><!-- doxytag: member="IGbE::anQ" ref="ad5560d7f7671ea0c96250beacf187ac8" args="(std::string sm, std::string q)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void anQ </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>sm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>q</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00188"></a>00188                                         { 
<a name="l00189"></a>00189         <a class="code" href="classIGbE.html#ad3738d2e08f4ea21f1c3721f2492c9c2">cpa</a>-&gt;<a class="code" href="classCPA.html#a31614725ede04f43ff983d5dedb56590">hwQ</a>(<a class="code" href="classCPA.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9a96f120298159c9334e174bf9f286f63b">CPA::FL_NONE</a>, <a class="code" href="classPioDevice.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>, <a class="code" href="namespaceMipsISA.html#a54c7875eaf2634ca9f55701aee2a22e5">sm</a>, <a class="code" href="namespaceArmISA.html#a853401ad1c480843ad53caaa0198fd05">q</a>, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>);
<a name="l00190"></a>00190     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a48fd12dd7cf4b842162b7a0b89875559"></a><!-- doxytag: member="IGbE::anRq" ref="a48fd12dd7cf4b842162b7a0b89875559" args="(std::string sm, std::string q, int num=1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void anRq </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>sm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em> = <code>1</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00200"></a>00200                                                       {
<a name="l00201"></a>00201         <a class="code" href="classIGbE.html#ad3738d2e08f4ea21f1c3721f2492c9c2">cpa</a>-&gt;<a class="code" href="classCPA.html#abfcac9cc80c2bd60bafb7da3f6669ba6">hwRq</a>(<a class="code" href="classCPA.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9a96f120298159c9334e174bf9f286f63b">CPA::FL_NONE</a>, <a class="code" href="classPioDevice.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>, <a class="code" href="namespaceMipsISA.html#a54c7875eaf2634ca9f55701aee2a22e5">sm</a>, <a class="code" href="namespaceArmISA.html#a853401ad1c480843ad53caaa0198fd05">q</a>, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>, <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>, num);
<a name="l00202"></a>00202     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ace79fee3c0fd652014ae35a7b1497ca1"></a><!-- doxytag: member="IGbE::anWe" ref="ace79fee3c0fd652014ae35a7b1497ca1" args="(std::string sm, std::string q)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void anWe </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>sm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>q</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00204"></a>00204                                          {
<a name="l00205"></a>00205         <a class="code" href="classIGbE.html#ad3738d2e08f4ea21f1c3721f2492c9c2">cpa</a>-&gt;<a class="code" href="classCPA.html#a5b3ce310c0911ec7bca22bc32f243cb9">hwWe</a>(<a class="code" href="classCPA.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9a96f120298159c9334e174bf9f286f63b">CPA::FL_NONE</a>, <a class="code" href="classPioDevice.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>, <a class="code" href="namespaceMipsISA.html#a54c7875eaf2634ca9f55701aee2a22e5">sm</a>, <a class="code" href="namespaceArmISA.html#a853401ad1c480843ad53caaa0198fd05">q</a>, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>);
<a name="l00206"></a>00206     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a09c6a12f9551bd90d913dfe8ed396a67"></a><!-- doxytag: member="IGbE::anWf" ref="a09c6a12f9551bd90d913dfe8ed396a67" args="(std::string sm, std::string q)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void anWf </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>sm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>q</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00208"></a>00208                                          {
<a name="l00209"></a>00209         <a class="code" href="classIGbE.html#ad3738d2e08f4ea21f1c3721f2492c9c2">cpa</a>-&gt;<a class="code" href="classCPA.html#a5f67bcd321d7d3535e71a61c71fbd304">hwWf</a>(<a class="code" href="classCPA.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9a96f120298159c9334e174bf9f286f63b">CPA::FL_NONE</a>, <a class="code" href="classPioDevice.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>, <a class="code" href="namespaceMipsISA.html#a54c7875eaf2634ca9f55701aee2a22e5">sm</a>, <a class="code" href="namespaceArmISA.html#a853401ad1c480843ad53caaa0198fd05">q</a>, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>);
<a name="l00210"></a>00210     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a97cbf86aeda5390deb20b1d39396d111"></a><!-- doxytag: member="IGbE::checkDrain" ref="a97cbf86aeda5390deb20b1d39396d111" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void checkDrain </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classCheck.html">Check</a> if all the draining things that need to occur have occured and handle the drain event if so. </p>

<p><div class="fragment"><pre class="fragment"><a name="l02097"></a>02097 {
<a name="l02098"></a>02098     <span class="keywordflow">if</span> (!<a class="code" href="classIGbE.html#a329b71fb934a93312ca0aacbf5a3f982">drainManager</a>)
<a name="l02099"></a>02099         <span class="keywordflow">return</span>;
<a name="l02100"></a>02100 
<a name="l02101"></a>02101     <a class="code" href="classIGbE.html#a99be71cc5dbbb45b77d1d66d1bedf454">txFifoTick</a> = <span class="keyword">false</span>;
<a name="l02102"></a>02102     <a class="code" href="classIGbE.html#a0f33aec9eb84199e089e1917f7df501d">txTick</a> = <span class="keyword">false</span>;
<a name="l02103"></a>02103     <a class="code" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">rxTick</a> = <span class="keyword">false</span>;
<a name="l02104"></a>02104     <span class="keywordflow">if</span> (!<a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1RxDescCache.html#a2587421ae644a9474416e5a5b63ccbca">hasOutstandingEvents</a>() &amp;&amp;
<a name="l02105"></a>02105         !<a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1TxDescCache.html#a2587421ae644a9474416e5a5b63ccbca">hasOutstandingEvents</a>()) {
<a name="l02106"></a>02106         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Drain, <span class="stringliteral">&quot;IGbE done draining, processing drain event\n&quot;</span>);
<a name="l02107"></a>02107         <a class="code" href="classIGbE.html#a329b71fb934a93312ca0aacbf5a3f982">drainManager</a>-&gt;<a class="code" href="classDrainManager.html#ab89d10e368d2e82061eddb9e40022382">signalDrainDone</a>();
<a name="l02108"></a>02108         <a class="code" href="classIGbE.html#a329b71fb934a93312ca0aacbf5a3f982">drainManager</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l02109"></a>02109     }
<a name="l02110"></a>02110 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a29bfbbe58f3015bfb026c019295a8836"></a><!-- doxytag: member="IGbE::chkInterrupt" ref="a29bfbbe58f3015bfb026c019295a8836" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void chkInterrupt </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classCheck.html">Check</a> and see if changes to the mask register have caused an interrupt to need to be sent or perhaps removed an interrupt cause. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00789"></a>00789 {
<a name="l00790"></a>00790     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;Checking interrupts icr: %#x imr: %#x\n&quot;</span>, <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a>(),
<a name="l00791"></a>00791             <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a781580e46c65f953e6db9e3c415bece1">imr</a>);
<a name="l00792"></a>00792     <span class="comment">// Check if we need to clear the cpu interrupt</span>
<a name="l00793"></a>00793     <span class="keywordflow">if</span> (!(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a>() &amp; <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a781580e46c65f953e6db9e3c415bece1">imr</a>)) {
<a name="l00794"></a>00794         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;Mask cleaned all interrupts\n&quot;</span>);
<a name="l00795"></a>00795         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a3de27cfe33d0ae9f9451c767ee40a57d">interEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>())
<a name="l00796"></a>00796             <a class="code" href="classEventManager.html#a720e34da4db679fb3f30b20e55c23605">deschedule</a>(<a class="code" href="classIGbE.html#a3de27cfe33d0ae9f9451c767ee40a57d">interEvent</a>);
<a name="l00797"></a>00797         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a>.int_assert())
<a name="l00798"></a>00798             <a class="code" href="classIGbE.html#a5bb6e41ae1497d53a611db0a6b455115">cpuClearInt</a>();
<a name="l00799"></a>00799     }
<a name="l00800"></a>00800     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;ITR = %#X itr.interval = %#X\n&quot;</span>,
<a name="l00801"></a>00801             <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aee7966bfcca2990ac1f75761bbe3a335">itr</a>(), <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aee7966bfcca2990ac1f75761bbe3a335">itr</a>.interval());
<a name="l00802"></a>00802 
<a name="l00803"></a>00803     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a>() &amp; <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a781580e46c65f953e6db9e3c415bece1">imr</a>) {
<a name="l00804"></a>00804         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aee7966bfcca2990ac1f75761bbe3a335">itr</a>.interval() == 0)  {
<a name="l00805"></a>00805             <a class="code" href="classIGbE.html#a6cc0f5948b3dc7c1f2e489bce23ef907">cpuPostInt</a>();
<a name="l00806"></a>00806         } <span class="keywordflow">else</span> {
<a name="l00807"></a>00807             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet,
<a name="l00808"></a>00808                     <span class="stringliteral">&quot;Possibly scheduling interrupt because of imr write\n&quot;</span>);
<a name="l00809"></a>00809             <span class="keywordflow">if</span> (!<a class="code" href="classIGbE.html#a3de27cfe33d0ae9f9451c767ee40a57d">interEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>()) {
<a name="l00810"></a>00810                 <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="code" href="namespaceArmISA.html#af5dfd7e551f8c5b461816e813dab252f">t</a> = <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>() + <a class="code" href="namespaceSimClock_1_1Int.html#a370bc05be45c1b9f039369ffd5c0efd4" title="nanosecond">SimClock::Int::ns</a> * 256 * <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aee7966bfcca2990ac1f75761bbe3a335">itr</a>.interval();
<a name="l00811"></a>00811                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;Scheduling for %d\n&quot;</span>, t);
<a name="l00812"></a>00812                 <a class="code" href="classEventManager.html#a4ddebbfe9a12b95be6fb993ce892dcd3">schedule</a>(<a class="code" href="classIGbE.html#a3de27cfe33d0ae9f9451c767ee40a57d">interEvent</a>, t);
<a name="l00813"></a>00813             }
<a name="l00814"></a>00814         }
<a name="l00815"></a>00815     }
<a name="l00816"></a>00816 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5bb6e41ae1497d53a611db0a6b455115"></a><!-- doxytag: member="IGbE::cpuClearInt" ref="a5bb6e41ae1497d53a611db0a6b455115" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cpuClearInt </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Clear the interupt line to the cpu </p>

<p><div class="fragment"><pre class="fragment"><a name="l00777"></a>00777 {
<a name="l00778"></a>00778     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a>.int_assert()) {
<a name="l00779"></a>00779         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a>.int_assert(0);
<a name="l00780"></a>00780         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetIntr,
<a name="l00781"></a>00781                 <span class="stringliteral">&quot;EINT: Clearing interrupt to CPU now. Vector %#x\n&quot;</span>,
<a name="l00782"></a>00782                 <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a>());
<a name="l00783"></a>00783         <a class="code" href="classPciDevice.html#ac02b8a3b8685eca8bb4b237b29dfc762">intrClear</a>();
<a name="l00784"></a>00784     }
<a name="l00785"></a>00785 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6cc0f5948b3dc7c1f2e489bce23ef907"></a><!-- doxytag: member="IGbE::cpuPostInt" ref="a6cc0f5948b3dc7c1f2e489bce23ef907" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cpuPostInt </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00733"></a>00733 {
<a name="l00734"></a>00734 
<a name="l00735"></a>00735     <a class="code" href="classEtherDevice.html#a4d094aae7f845e257eb7b71943dbf578">postedInterrupts</a>++;
<a name="l00736"></a>00736 
<a name="l00737"></a>00737     <span class="keywordflow">if</span> (!(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a>() &amp; <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a781580e46c65f953e6db9e3c415bece1">imr</a>)) {
<a name="l00738"></a>00738         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;Interrupt Masked. Not Posting\n&quot;</span>);
<a name="l00739"></a>00739         <span class="keywordflow">return</span>;
<a name="l00740"></a>00740     }
<a name="l00741"></a>00741 
<a name="l00742"></a>00742     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;Posting Interrupt\n&quot;</span>);
<a name="l00743"></a>00743 
<a name="l00744"></a>00744 
<a name="l00745"></a>00745     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a3de27cfe33d0ae9f9451c767ee40a57d">interEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>()) {
<a name="l00746"></a>00746         <a class="code" href="classEventManager.html#a720e34da4db679fb3f30b20e55c23605">deschedule</a>(<a class="code" href="classIGbE.html#a3de27cfe33d0ae9f9451c767ee40a57d">interEvent</a>);
<a name="l00747"></a>00747     }
<a name="l00748"></a>00748 
<a name="l00749"></a>00749     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a72b4c60f46bdb4b88427dec167aaca80">rdtrEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>()) {
<a name="l00750"></a>00750         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a>.rxt0(1);
<a name="l00751"></a>00751         <a class="code" href="classEventManager.html#a720e34da4db679fb3f30b20e55c23605">deschedule</a>(<a class="code" href="classIGbE.html#a72b4c60f46bdb4b88427dec167aaca80">rdtrEvent</a>);
<a name="l00752"></a>00752     }
<a name="l00753"></a>00753     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a30a3a2a8194ad851683c915beca8a172">radvEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>()) {
<a name="l00754"></a>00754         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a>.rxt0(1);
<a name="l00755"></a>00755         <a class="code" href="classEventManager.html#a720e34da4db679fb3f30b20e55c23605">deschedule</a>(<a class="code" href="classIGbE.html#a30a3a2a8194ad851683c915beca8a172">radvEvent</a>);
<a name="l00756"></a>00756     }
<a name="l00757"></a>00757     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a52af2948f0bdbd05624c9f1e90872556">tadvEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>()) {
<a name="l00758"></a>00758         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a>.txdw(1);
<a name="l00759"></a>00759         <a class="code" href="classEventManager.html#a720e34da4db679fb3f30b20e55c23605">deschedule</a>(<a class="code" href="classIGbE.html#a52af2948f0bdbd05624c9f1e90872556">tadvEvent</a>);
<a name="l00760"></a>00760     }
<a name="l00761"></a>00761     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a91fce863693eb4c56a924639620d77cf">tidvEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>()) {
<a name="l00762"></a>00762         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a>.txdw(1);
<a name="l00763"></a>00763         <a class="code" href="classEventManager.html#a720e34da4db679fb3f30b20e55c23605">deschedule</a>(<a class="code" href="classIGbE.html#a91fce863693eb4c56a924639620d77cf">tidvEvent</a>);
<a name="l00764"></a>00764     }
<a name="l00765"></a>00765 
<a name="l00766"></a>00766     <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a>.int_assert(1);
<a name="l00767"></a>00767     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetIntr, <span class="stringliteral">&quot;EINT: Posting interrupt to CPU now. Vector %#x\n&quot;</span>,
<a name="l00768"></a>00768             <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a>());
<a name="l00769"></a>00769 
<a name="l00770"></a>00770     <a class="code" href="classPciDevice.html#aba6fa755ca152cedafeb4150da6a2493">intrPost</a>();
<a name="l00771"></a>00771 
<a name="l00772"></a>00772     <a class="code" href="classIGbE.html#adad52012a21d414368149556f2cc909b">lastInterrupt</a> = <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>();
<a name="l00773"></a>00773 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a671c460437037741ca81581773939a28"></a><!-- doxytag: member="IGbE::delayIntEvent" ref="a671c460437037741ca81581773939a28" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void delayIntEvent </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Send an interrupt to the cpu </p>

<p><div class="fragment"><pre class="fragment"><a name="l00726"></a>00726 {
<a name="l00727"></a>00727     <a class="code" href="classIGbE.html#a6cc0f5948b3dc7c1f2e489bce23ef907">cpuPostInt</a>();
<a name="l00728"></a>00728 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa8a18d230dba7a674ac8a0b4f35bc36a"></a><!-- doxytag: member="IGbE::drain" ref="aa8a18d230dba7a674ac8a0b4f35bc36a" args="(DrainManager *dm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int drain </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDrainManager.html">DrainManager</a> *&nbsp;</td>
          <td class="paramname"> <em>drainManger</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Provide a default implementation of the drain interface that simply returns 0 (draining completed) and sets the drain state to Drained. </p>

<p><a class="el" href="classPciDevice.html#aa8a18d230dba7a674ac8a0b4f35bc36a">PciDevice</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l02057"></a>02057 {
<a name="l02058"></a>02058     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="namespaceX86ISA.html#a668f84c330035fdb72824eb18e09cd09">count</a>;
<a name="l02059"></a>02059     count = <a class="code" href="classPioDevice.html#a13e5e3439c77b7b772e2e11df33fd700">pioPort</a>.<a class="code" href="classQueuedSlavePort.html#aa8a18d230dba7a674ac8a0b4f35bc36a">drain</a>(<a class="code" href="namespaceMipsISA.html#a2575c29e7f4617b6076486f340b6fe19">dm</a>) + <a class="code" href="classDmaDevice.html#a0e844de222006d2f1aadb8f01d8f383b">dmaPort</a>.<a class="code" href="classDmaPort.html#a6bf479c521c7c3eb473822d953275b26">drain</a>(<a class="code" href="namespaceMipsISA.html#a2575c29e7f4617b6076486f340b6fe19">dm</a>);
<a name="l02060"></a>02060     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1RxDescCache.html#a2587421ae644a9474416e5a5b63ccbca">hasOutstandingEvents</a>() ||
<a name="l02061"></a>02061         <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1TxDescCache.html#a2587421ae644a9474416e5a5b63ccbca">hasOutstandingEvents</a>()) {
<a name="l02062"></a>02062         count++;
<a name="l02063"></a>02063         <a class="code" href="classIGbE.html#a329b71fb934a93312ca0aacbf5a3f982">drainManager</a> = <a class="code" href="namespaceMipsISA.html#a2575c29e7f4617b6076486f340b6fe19">dm</a>;
<a name="l02064"></a>02064     }
<a name="l02065"></a>02065 
<a name="l02066"></a>02066     <a class="code" href="classIGbE.html#a99be71cc5dbbb45b77d1d66d1bedf454">txFifoTick</a> = <span class="keyword">false</span>;
<a name="l02067"></a>02067     <a class="code" href="classIGbE.html#a0f33aec9eb84199e089e1917f7df501d">txTick</a> = <span class="keyword">false</span>;
<a name="l02068"></a>02068     <a class="code" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">rxTick</a> = <span class="keyword">false</span>;
<a name="l02069"></a>02069 
<a name="l02070"></a>02070     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a13b02e56360d63f349a514edb321bd9c">tickEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>())
<a name="l02071"></a>02071         <a class="code" href="classEventManager.html#a720e34da4db679fb3f30b20e55c23605">deschedule</a>(<a class="code" href="classIGbE.html#a13b02e56360d63f349a514edb321bd9c">tickEvent</a>);
<a name="l02072"></a>02072 
<a name="l02073"></a>02073     <span class="keywordflow">if</span> (count) {
<a name="l02074"></a>02074         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Drain, <span class="stringliteral">&quot;IGbE not drained\n&quot;</span>);
<a name="l02075"></a>02075         <a class="code" href="classDrainable.html#ad800905390fe03e850cf996e914038f9">setDrainState</a>(<a class="code" href="classDrainable.html#a5d74787dedbc4e11c1ab15bf487e61f8a929d17847bfad0d4689c9ab8540d5134">Drainable::Draining</a>);
<a name="l02076"></a>02076     } <span class="keywordflow">else</span>
<a name="l02077"></a>02077         <a class="code" href="classDrainable.html#ad800905390fe03e850cf996e914038f9">setDrainState</a>(<a class="code" href="classDrainable.html#a5d74787dedbc4e11c1ab15bf487e61f8a5656955cb808502a2ec75b367e2c1e82">Drainable::Drained</a>);
<a name="l02078"></a>02078 
<a name="l02079"></a>02079     <span class="keywordflow">return</span> count;
<a name="l02080"></a>02080 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8f020d3237536fe007fc488c4125c5d8"></a><!-- doxytag: member="IGbE::drainResume" ref="a8f020d3237536fe007fc488c4125c5d8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void drainResume </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Resume execution after a successful drain.</p>
<dl class="note"><dt><b>覚え書き:</b></dt><dd>This method is normally only called from the simulation scripts. </dd></dl>

<p><a class="el" href="classDrainable.html#a8f020d3237536fe007fc488c4125c5d8">Drainable</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l02084"></a>02084 {
<a name="l02085"></a>02085     <a class="code" href="classIGbE.html#a8f020d3237536fe007fc488c4125c5d8">Drainable::drainResume</a>();
<a name="l02086"></a>02086 
<a name="l02087"></a>02087     <a class="code" href="classIGbE.html#a99be71cc5dbbb45b77d1d66d1bedf454">txFifoTick</a> = <span class="keyword">true</span>;
<a name="l02088"></a>02088     <a class="code" href="classIGbE.html#a0f33aec9eb84199e089e1917f7df501d">txTick</a> = <span class="keyword">true</span>;
<a name="l02089"></a>02089     <a class="code" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">rxTick</a> = <span class="keyword">true</span>;
<a name="l02090"></a>02090 
<a name="l02091"></a>02091     <a class="code" href="classIGbE.html#a9506deecc41eb6290f9b9b8662cc33c2">restartClock</a>();
<a name="l02092"></a>02092     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;resuming from drain&quot;</span>);
<a name="l02093"></a>02093 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aaae8ccdf0f0b15e4d1b93e71a0c8b303"></a><!-- doxytag: member="IGbE::ethRxPkt" ref="aaae8ccdf0f0b15e4d1b93e71a0c8b303" args="(EthPacketPtr packet)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ethRxPkt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRefCountingPtr.html">EthPacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>packet</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l02216"></a>02216 {
<a name="l02217"></a>02217     <a class="code" href="classEtherDevice.html#a715fc1a9e846c381ddd90bd12b0e28d0">rxBytes</a> += pkt-&gt;length;
<a name="l02218"></a>02218     <a class="code" href="classEtherDevice.html#a584f3731c2a58f40585474fab9b080b2">rxPackets</a>++;
<a name="l02219"></a>02219 
<a name="l02220"></a>02220     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;RxFIFO: Receiving pcakte from wire\n&quot;</span>);
<a name="l02221"></a>02221     <a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(<span class="stringliteral">&quot;RXQ&quot;</span>, <span class="stringliteral">&quot;Wire Recv&quot;</span>);
<a name="l02222"></a>02222 
<a name="l02223"></a>02223 
<a name="l02224"></a>02224     <span class="keywordflow">if</span> (!<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa8414401e91184e89c0bdc90778de02a">rctl</a>.en()) {
<a name="l02225"></a>02225         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;RxFIFO: RX not enabled, dropping\n&quot;</span>);
<a name="l02226"></a>02226         <a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(<span class="stringliteral">&quot;RXQ&quot;</span>, <span class="stringliteral">&quot;FIFO Drop&quot;</span>, <a class="code" href="classCPA.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9a5a076f327c9aa2f6c61af677153ae7e0">CPA::FL_BAD</a>);
<a name="l02227"></a>02227         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02228"></a>02228     }
<a name="l02229"></a>02229 
<a name="l02230"></a>02230     <span class="comment">// restart the state machines if they are stopped</span>
<a name="l02231"></a>02231     <a class="code" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">rxTick</a> = <span class="keyword">true</span> &amp;&amp; !<a class="code" href="classIGbE.html#a329b71fb934a93312ca0aacbf5a3f982">drainManager</a>;
<a name="l02232"></a>02232     <span class="keywordflow">if</span> ((<a class="code" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">rxTick</a> || <a class="code" href="classIGbE.html#a0f33aec9eb84199e089e1917f7df501d">txTick</a>) &amp;&amp; !<a class="code" href="classIGbE.html#a13b02e56360d63f349a514edb321bd9c">tickEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>()) {
<a name="l02233"></a>02233         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM,
<a name="l02234"></a>02234                 <span class="stringliteral">&quot;RXS: received packet into fifo, starting ticking\n&quot;</span>);
<a name="l02235"></a>02235         <a class="code" href="classIGbE.html#a9506deecc41eb6290f9b9b8662cc33c2">restartClock</a>();
<a name="l02236"></a>02236     }
<a name="l02237"></a>02237 
<a name="l02238"></a>02238     <span class="keywordflow">if</span> (!<a class="code" href="classIGbE.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#ac4382beafcf27ce14f59707bc7f4c3d7">push</a>(pkt)) {
<a name="l02239"></a>02239         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;RxFIFO: Packet won&apos;t fit in fifo... dropped\n&quot;</span>);
<a name="l02240"></a>02240         <a class="code" href="classIGbE.html#a5421bafb8503ffca04cac20d616ae4cc">postInterrupt</a>(<a class="code" href="namespaceiGbReg.html#ab881f740bd3545d8eb42b05253752e9ca235c7e40a1a2784ddb5740f5a4a85eba">IT_RXO</a>, <span class="keyword">true</span>);
<a name="l02241"></a>02241         <a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(<span class="stringliteral">&quot;RXQ&quot;</span>, <span class="stringliteral">&quot;FIFO Drop&quot;</span>, <a class="code" href="classCPA.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9a5a076f327c9aa2f6c61af677153ae7e0">CPA::FL_BAD</a>);
<a name="l02242"></a>02242         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02243"></a>02243     }
<a name="l02244"></a>02244 
<a name="l02245"></a>02245     <span class="keywordflow">if</span> (<a class="code" href="classCPA.html#a98100f2f476b294d430b1a66c9039da1">CPA::available</a>() &amp;&amp; <a class="code" href="classIGbE.html#ad3738d2e08f4ea21f1c3721f2492c9c2">cpa</a>-&gt;<a class="code" href="classCPA.html#acafb7271189f6d844921794d61cd608a">enabled</a>()) {
<a name="l02246"></a>02246         assert(<a class="code" href="classPioDevice.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>-&gt;<a class="code" href="classSystem.html#a1adea9b3072c7e8d2d045b275c8e37e7">numSystemsRunning</a> &lt;= 2);
<a name="l02247"></a>02247         <a class="code" href="classSystem.html">System</a> *other_sys;
<a name="l02248"></a>02248         <span class="keywordflow">if</span> (<a class="code" href="classPioDevice.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>-&gt;<a class="code" href="classSystem.html#a2ccf318c5f6beb8a1697389782c1f2bf">systemList</a>[0] == <a class="code" href="classPioDevice.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>)
<a name="l02249"></a>02249             other_sys = <a class="code" href="classPioDevice.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>-&gt;<a class="code" href="classSystem.html#a2ccf318c5f6beb8a1697389782c1f2bf">systemList</a>[1];
<a name="l02250"></a>02250         <span class="keywordflow">else</span>
<a name="l02251"></a>02251             other_sys = <a class="code" href="classPioDevice.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>-&gt;<a class="code" href="classSystem.html#a2ccf318c5f6beb8a1697389782c1f2bf">systemList</a>[0];
<a name="l02252"></a>02252 
<a name="l02253"></a>02253         <a class="code" href="classIGbE.html#ad3738d2e08f4ea21f1c3721f2492c9c2">cpa</a>-&gt;<a class="code" href="classCPA.html#ac6ac43bd87dec93efd50230427086a92">hwDq</a>(<a class="code" href="classCPA.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9a96f120298159c9334e174bf9f286f63b">CPA::FL_NONE</a>, <a class="code" href="classPioDevice.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>, <span class="stringliteral">&quot;RXQ&quot;</span>, <span class="stringliteral">&quot;WireQ&quot;</span>, 0, other_sys);
<a name="l02254"></a>02254         <a class="code" href="classIGbE.html#ad5560d7f7671ea0c96250beacf187ac8">anQ</a>(<span class="stringliteral">&quot;RXQ&quot;</span>, <span class="stringliteral">&quot;RX FIFO Q&quot;</span>);
<a name="l02255"></a>02255         <a class="code" href="classIGbE.html#ad3738d2e08f4ea21f1c3721f2492c9c2">cpa</a>-&gt;<a class="code" href="classCPA.html#a5b3ce310c0911ec7bca22bc32f243cb9">hwWe</a>(<a class="code" href="classCPA.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9a96f120298159c9334e174bf9f286f63b">CPA::FL_NONE</a>, <a class="code" href="classPioDevice.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>, <span class="stringliteral">&quot;RXQ&quot;</span>, <span class="stringliteral">&quot;WireQ&quot;</span>, 0, other_sys);
<a name="l02256"></a>02256     }
<a name="l02257"></a>02257 
<a name="l02258"></a>02258     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02259"></a>02259 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4b170caf60b0a01672ab8e8e3e4dff10"></a><!-- doxytag: member="IGbE::ethTxDone" ref="a4b170caf60b0a01672ab8e8e3e4dff10" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ethTxDone </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l02439"></a>02439 {
<a name="l02440"></a>02440     <a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(<span class="stringliteral">&quot;TXQ&quot;</span>, <span class="stringliteral">&quot;Send Done&quot;</span>);
<a name="l02441"></a>02441     <span class="comment">// restart the tx state machines if they are stopped</span>
<a name="l02442"></a>02442     <span class="comment">// fifo to send another packet</span>
<a name="l02443"></a>02443     <span class="comment">// tx sm to put more data into the fifo</span>
<a name="l02444"></a>02444     <a class="code" href="classIGbE.html#a99be71cc5dbbb45b77d1d66d1bedf454">txFifoTick</a> = <span class="keyword">true</span> &amp;&amp; !<a class="code" href="classIGbE.html#a329b71fb934a93312ca0aacbf5a3f982">drainManager</a>;
<a name="l02445"></a>02445     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#ad60cb6948516cc9177fc65c07c7a0550">descLeft</a>() != 0 &amp;&amp; !<a class="code" href="classIGbE.html#a329b71fb934a93312ca0aacbf5a3f982">drainManager</a>)
<a name="l02446"></a>02446         <a class="code" href="classIGbE.html#a0f33aec9eb84199e089e1917f7df501d">txTick</a> = <span class="keyword">true</span>;
<a name="l02447"></a>02447 
<a name="l02448"></a>02448     <a class="code" href="classIGbE.html#a9506deecc41eb6290f9b9b8662cc33c2">restartClock</a>();
<a name="l02449"></a>02449     <a class="code" href="classIGbE.html#af67ff1365c83adc97fef8753e38f3d9e">txWire</a>();
<a name="l02450"></a>02450     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;TxFIFO: Transmission complete\n&quot;</span>);
<a name="l02451"></a>02451 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a10260c5a583c0894dcdcd1ced50a53ae"></a><!-- doxytag: member="IGbE::getEthPort" ref="a10260c5a583c0894dcdcd1ced50a53ae" args="(const std::string &amp;if_name, int idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEtherInt.html">EtherInt</a> * getEthPort </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>if_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Additional function to return the <a class="el" href="classPort.html">Port</a> of a memory object. </p>

<p><a class="el" href="classEtherDevice.html#ac1aa24c1f8c0f1ee8bdc3f3d3799f67c">EtherDevice</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00139"></a>00139 {
<a name="l00140"></a>00140 
<a name="l00141"></a>00141     <span class="keywordflow">if</span> (if_name == <span class="stringliteral">&quot;interface&quot;</span>) {
<a name="l00142"></a>00142         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a4c7684471cc2bc72bc660ea06ca78c91">etherInt</a>-&gt;<a class="code" href="classEtherInt.html#a756090fc7fcc4c15a50ad0bd817f5ba7">getPeer</a>())
<a name="l00143"></a>00143             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Port already connected to\n&quot;</span>);
<a name="l00144"></a>00144         <span class="keywordflow">return</span> <a class="code" href="classIGbE.html#a4c7684471cc2bc72bc660ea06ca78c91">etherInt</a>;
<a name="l00145"></a>00145     }
<a name="l00146"></a>00146     <span class="keywordflow">return</span> <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00147"></a>00147 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a02fd73d861ef2e4aabb38c0c9ff82947"></a><!-- doxytag: member="IGbE::init" ref="a02fd73d861ef2e4aabb38c0c9ff82947" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classIGbE.html#a02fd73d861ef2e4aabb38c0c9ff82947">init()</a> is called after all C++ SimObjects have been created and all ports are connected. Initializations that are independent of unserialization but rely on a fully instantiated and connected <a class="el" href="classSimObject.html">SimObject</a> graph should be done here. </p>

<p><a class="el" href="classPciDevice.html#a02fd73d861ef2e4aabb38c0c9ff82947">PciDevice</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00132"></a>00132 {
<a name="l00133"></a>00133     <a class="code" href="classIGbE.html#ad3738d2e08f4ea21f1c3721f2492c9c2">cpa</a> = <a class="code" href="classIGbE.html#ad3738d2e08f4ea21f1c3721f2492c9c2">CPA::cpa</a>();
<a name="l00134"></a>00134     <a class="code" href="classIGbE.html#a02fd73d861ef2e4aabb38c0c9ff82947">PciDevice::init</a>();
<a name="l00135"></a>00135 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad4b9fb8ece2ddee6cda2b12e4f77b3d1"></a><!-- doxytag: member="IGbE::intClock" ref="ad4b9fb8ece2ddee6cda2b12e4f77b3d1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> intClock </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00173"></a>00173 { <span class="keywordflow">return</span> <a class="code" href="namespaceSimClock_1_1Int.html#a370bc05be45c1b9f039369ffd5c0efd4" title="nanosecond">SimClock::Int::ns</a> * 1024; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acd3c3feb78ae7a8f88fe0f110a718dff"></a><!-- doxytag: member="IGbE::params" ref="acd3c3feb78ae7a8f88fe0f110a718dff" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classIGbE.html#ad27b5cfed87f35a483863a73336d8258">Params</a>* params </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classEtherDevice.html#acd3c3feb78ae7a8f88fe0f110a718dff">EtherDevice</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00513"></a>00513                    {
<a name="l00514"></a>00514         <span class="keywordflow">return</span> <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classIGbE.html#ad27b5cfed87f35a483863a73336d8258">Params</a> *<span class="keyword">&gt;</span>(<a class="code" href="classSimObject.html#acaf6024ae9dda44bfb1c67e05ad70aef">_params</a>);
<a name="l00515"></a>00515     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5421bafb8503ffca04cac20d616ae4cc"></a><!-- doxytag: member="IGbE::postInterrupt" ref="a5421bafb8503ffca04cac20d616ae4cc" args="(iGbReg::IntTypes t, bool now=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void postInterrupt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceiGbReg.html#ab881f740bd3545d8eb42b05253752e9c">iGbReg::IntTypes</a>&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>now</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Write an interrupt into the interrupt pending register and check mask and interrupt limit timer before sending interrupt to CPU </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>t</em>&nbsp;</td><td>the type of interrupt we are posting </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>now</em>&nbsp;</td><td>should we ignore the interrupt limiting timer </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00693"></a>00693 {
<a name="l00694"></a>00694     assert(<a class="code" href="namespaceArmISA.html#af5dfd7e551f8c5b461816e813dab252f">t</a>);
<a name="l00695"></a>00695 
<a name="l00696"></a>00696     <span class="comment">// Interrupt is already pending</span>
<a name="l00697"></a>00697     <span class="keywordflow">if</span> (<a class="code" href="namespaceArmISA.html#af5dfd7e551f8c5b461816e813dab252f">t</a> &amp; <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a>() &amp;&amp; !now)
<a name="l00698"></a>00698         <span class="keywordflow">return</span>;
<a name="l00699"></a>00699 
<a name="l00700"></a>00700     <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a> = <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a>() | <a class="code" href="namespaceArmISA.html#af5dfd7e551f8c5b461816e813dab252f">t</a>;
<a name="l00701"></a>00701 
<a name="l00702"></a>00702     <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> itr_interval = <a class="code" href="namespaceSimClock_1_1Int.html#a370bc05be45c1b9f039369ffd5c0efd4" title="nanosecond">SimClock::Int::ns</a> * 256 * <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aee7966bfcca2990ac1f75761bbe3a335">itr</a>.interval();
<a name="l00703"></a>00703     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetIntr,
<a name="l00704"></a>00704             <span class="stringliteral">&quot;EINT: postInterrupt() curTick(): %d itr: %d interval: %d\n&quot;</span>,
<a name="l00705"></a>00705             <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>(), <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aee7966bfcca2990ac1f75761bbe3a335">itr</a>.interval(), itr_interval);
<a name="l00706"></a>00706 
<a name="l00707"></a>00707     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aee7966bfcca2990ac1f75761bbe3a335">itr</a>.interval() == 0 || now ||
<a name="l00708"></a>00708         <a class="code" href="classIGbE.html#adad52012a21d414368149556f2cc909b">lastInterrupt</a> + itr_interval &lt;= <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>()) {
<a name="l00709"></a>00709         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a3de27cfe33d0ae9f9451c767ee40a57d">interEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>()) {
<a name="l00710"></a>00710             <a class="code" href="classEventManager.html#a720e34da4db679fb3f30b20e55c23605">deschedule</a>(<a class="code" href="classIGbE.html#a3de27cfe33d0ae9f9451c767ee40a57d">interEvent</a>);
<a name="l00711"></a>00711         }
<a name="l00712"></a>00712         <a class="code" href="classIGbE.html#a6cc0f5948b3dc7c1f2e489bce23ef907">cpuPostInt</a>();
<a name="l00713"></a>00713     } <span class="keywordflow">else</span> {
<a name="l00714"></a>00714         <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> int_time = <a class="code" href="classIGbE.html#adad52012a21d414368149556f2cc909b">lastInterrupt</a> + itr_interval;
<a name="l00715"></a>00715         assert(int_time &gt; 0);
<a name="l00716"></a>00716         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetIntr, <span class="stringliteral">&quot;EINT: Scheduling timer interrupt for tick %d\n&quot;</span>,
<a name="l00717"></a>00717                 int_time);
<a name="l00718"></a>00718         <span class="keywordflow">if</span> (!<a class="code" href="classIGbE.html#a3de27cfe33d0ae9f9451c767ee40a57d">interEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>()) {
<a name="l00719"></a>00719             <a class="code" href="classEventManager.html#a4ddebbfe9a12b95be6fb993ce892dcd3">schedule</a>(<a class="code" href="classIGbE.html#a3de27cfe33d0ae9f9451c767ee40a57d">interEvent</a>, int_time);
<a name="l00720"></a>00720         }
<a name="l00721"></a>00721     }
<a name="l00722"></a>00722 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1d54e26efe0f0a1fbd354ccffa34459f"></a><!-- doxytag: member="IGbE::radvProcess" ref="a1d54e26efe0f0a1fbd354ccffa34459f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void radvProcess </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00107"></a>00107                        {
<a name="l00108"></a>00108         <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#af6593b85cc3920a68b9a0317053a4416">writeback</a>(0);
<a name="l00109"></a>00109         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetIntr,
<a name="l00110"></a>00110                 <span class="stringliteral">&quot;Posting RXT interrupt because RADV timer expired\n&quot;</span>);
<a name="l00111"></a>00111         <a class="code" href="classIGbE.html#a5421bafb8503ffca04cac20d616ae4cc">postInterrupt</a>(<a class="code" href="namespaceiGbReg.html#ab881f740bd3545d8eb42b05253752e9ca5de08c161325e1127c2727a0b234f9b3">iGbReg::IT_RXT</a>);
<a name="l00112"></a>00112     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a047d922eba10484b3a0127faa8e1be0a"></a><!-- doxytag: member="IGbE::rdtrProcess" ref="a047d922eba10484b3a0127faa8e1be0a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdtrProcess </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00096"></a>00096                        {
<a name="l00097"></a>00097         <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#af6593b85cc3920a68b9a0317053a4416">writeback</a>(0);
<a name="l00098"></a>00098         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetIntr,
<a name="l00099"></a>00099                 <span class="stringliteral">&quot;Posting RXT interrupt because RDTR timer expired\n&quot;</span>);
<a name="l00100"></a>00100         <a class="code" href="classIGbE.html#a5421bafb8503ffca04cac20d616ae4cc">postInterrupt</a>(<a class="code" href="namespaceiGbReg.html#ab881f740bd3545d8eb42b05253752e9ca5de08c161325e1127c2727a0b234f9b3">iGbReg::IT_RXT</a>);
<a name="l00101"></a>00101     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a613ec7d5e1ec64f8d21fec78ae8e568e"></a><!-- doxytag: member="IGbE::read" ref="a613ec7d5e1ec64f8d21fec78ae8e568e" args="(PacketPtr pkt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pkt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pure virtual function that the device must implement. Called when a read command is recieved by the port. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pkt</em>&nbsp;</td><td><a class="el" href="classPacket.html">Packet</a> describing this request </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>戻り値:</b></dt><dd>number of ticks it took to complete </dd></dl>

<p><a class="el" href="classPioDevice.html#a842312590432036092c422c87a442358">PioDevice</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00170"></a>00170 {
<a name="l00171"></a>00171     <span class="keywordtype">int</span> bar;
<a name="l00172"></a>00172     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> daddr;
<a name="l00173"></a>00173 
<a name="l00174"></a>00174     <span class="keywordflow">if</span> (!<a class="code" href="classPciDevice.html#ad7fbff3ce8627dac12313ed7ac1ea44a">getBAR</a>(pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>(), bar, daddr))
<a name="l00175"></a>00175         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Invalid PCI memory access to unmapped memory.\n&quot;</span>);
<a name="l00176"></a>00176 
<a name="l00177"></a>00177     <span class="comment">// Only Memory register BAR is allowed</span>
<a name="l00178"></a>00178     assert(bar == 0);
<a name="l00179"></a>00179 
<a name="l00180"></a>00180     <span class="comment">// Only 32bit accesses allowed</span>
<a name="l00181"></a>00181     assert(pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>() == 4);
<a name="l00182"></a>00182 
<a name="l00183"></a>00183     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;Read device register %#X\n&quot;</span>, daddr);
<a name="l00184"></a>00184 
<a name="l00185"></a>00185     pkt-&gt;<a class="code" href="classPacket.html#acaefe811b78a2fdc4a0dba0c4029c3ef">allocate</a>();
<a name="l00186"></a>00186 
<a name="l00187"></a>00187     <span class="comment">//</span>
<a name="l00188"></a>00188     <span class="comment">// Handle read of register here</span>
<a name="l00189"></a>00189     <span class="comment">//</span>
<a name="l00190"></a>00190 
<a name="l00191"></a>00191 
<a name="l00192"></a>00192     <span class="keywordflow">switch</span> (daddr) {
<a name="l00193"></a>00193       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a20020599b1b178310f589aad60b95d78">REG_CTRL</a>:
<a name="l00194"></a>00194         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#ad24cb7797a2d18bb3fff795e5f78149e">ctrl</a>());
<a name="l00195"></a>00195         <span class="keywordflow">break</span>;
<a name="l00196"></a>00196       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ac1d1c17e03a8c10f26a1f4a2b2f2e8db">REG_STATUS</a>:
<a name="l00197"></a>00197         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a46dafc6aaeb8cc7eed8dbe2c550e5b6e">sts</a>());
<a name="l00198"></a>00198         <span class="keywordflow">break</span>;
<a name="l00199"></a>00199       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#af673fadbe51cbe2b7e87961c48ef5180">REG_EECD</a>:
<a name="l00200"></a>00200         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#afd260aab074918b32c59a399cbfd6211">eecd</a>());
<a name="l00201"></a>00201         <span class="keywordflow">break</span>;
<a name="l00202"></a>00202       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a5dcdf9f0dc751450a4395fbd2657cd7f">REG_EERD</a>:
<a name="l00203"></a>00203         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a010710d5d4aac5016509e879eb9c513c">eerd</a>());
<a name="l00204"></a>00204         <span class="keywordflow">break</span>;
<a name="l00205"></a>00205       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#aee737b7c1f7c88ebd5f043dd77266f7b">REG_CTRL_EXT</a>:
<a name="l00206"></a>00206         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a340eb700e45b22933041ee4abe33c03b">ctrl_ext</a>());
<a name="l00207"></a>00207         <span class="keywordflow">break</span>;
<a name="l00208"></a>00208       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#af363a2b7433ba64df839c6a45beb0e05">REG_MDIC</a>:
<a name="l00209"></a>00209         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a6a320aa86a39572a8fc581e82893943b">mdic</a>());
<a name="l00210"></a>00210         <span class="keywordflow">break</span>;
<a name="l00211"></a>00211       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a24c53e651278cac8ad2d31eb921e4879">REG_ICR</a>:
<a name="l00212"></a>00212         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;Reading ICR. ICR=%#x IMR=%#x IAM=%#x IAME=%d\n&quot;</span>,
<a name="l00213"></a>00213                 <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a>(), <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a781580e46c65f953e6db9e3c415bece1">imr</a>, <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a69dca9e21a6ea4a040440a0948d8bb57">iam</a>, <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a340eb700e45b22933041ee4abe33c03b">ctrl_ext</a>.iame());
<a name="l00214"></a>00214         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a>());
<a name="l00215"></a>00215         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a>.int_assert() || <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a781580e46c65f953e6db9e3c415bece1">imr</a> == 0) {
<a name="l00216"></a>00216             <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a> = <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a>() &amp; ~<a class="code" href="namespaceArmISA.html#a9534dbda5e7db9881c7955c6e08cfdc0">mask</a>(30);
<a name="l00217"></a>00217             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;Cleared ICR. ICR=%#x\n&quot;</span>, <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a>());
<a name="l00218"></a>00218         }
<a name="l00219"></a>00219         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a340eb700e45b22933041ee4abe33c03b">ctrl_ext</a>.iame() &amp;&amp; <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a>.int_assert())
<a name="l00220"></a>00220             <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a781580e46c65f953e6db9e3c415bece1">imr</a> &amp;= ~<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a69dca9e21a6ea4a040440a0948d8bb57">iam</a>;
<a name="l00221"></a>00221         <a class="code" href="classIGbE.html#a29bfbbe58f3015bfb026c019295a8836">chkInterrupt</a>();
<a name="l00222"></a>00222         <span class="keywordflow">break</span>;
<a name="l00223"></a>00223       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a96b0b26da65a0436503fc82ab3cf9ad3">REG_EICR</a>:
<a name="l00224"></a>00224         <span class="comment">// This is only useful for MSI, but the driver reads it every time</span>
<a name="l00225"></a>00225         <span class="comment">// Just don&apos;t do anything</span>
<a name="l00226"></a>00226         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(0);
<a name="l00227"></a>00227         <span class="keywordflow">break</span>;
<a name="l00228"></a>00228       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ac96a5f971fc136ea2bcd3aebbff561c4">REG_ITR</a>:
<a name="l00229"></a>00229         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aee7966bfcca2990ac1f75761bbe3a335">itr</a>());
<a name="l00230"></a>00230         <span class="keywordflow">break</span>;
<a name="l00231"></a>00231       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a9b7b0830333db7d62d77d4baab8628cb">REG_RCTL</a>:
<a name="l00232"></a>00232         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa8414401e91184e89c0bdc90778de02a">rctl</a>());
<a name="l00233"></a>00233         <span class="keywordflow">break</span>;
<a name="l00234"></a>00234       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#aa36baad1c52cf734cd536d65a54602a8">REG_FCTTV</a>:
<a name="l00235"></a>00235         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#ac7b7c4f073de3cf7d05beb155a7d98ef">fcttv</a>());
<a name="l00236"></a>00236         <span class="keywordflow">break</span>;
<a name="l00237"></a>00237       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a821ebe9f73862e5f08d712f01cfd626d">REG_TCTL</a>:
<a name="l00238"></a>00238         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#ac3a1073a4a8054c3eb8bc2b66099bd16">tctl</a>());
<a name="l00239"></a>00239         <span class="keywordflow">break</span>;
<a name="l00240"></a>00240       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a095339ea1d33453b7754d407c6e6550c">REG_PBA</a>:
<a name="l00241"></a>00241         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a1f570b5b5eb4a9598ad0c378c05de391">pba</a>());
<a name="l00242"></a>00242         <span class="keywordflow">break</span>;
<a name="l00243"></a>00243       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ae38d313c67812ad08bb3cd17222ab977">REG_WUC</a>:
<a name="l00244"></a>00244       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a15c1307f1e65e489f3ca5fb75212d71d">REG_LEDCTL</a>:
<a name="l00245"></a>00245         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(0); <span class="comment">// We don&apos;t care, so just return 0</span>
<a name="l00246"></a>00246         <span class="keywordflow">break</span>;
<a name="l00247"></a>00247       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a101890cb2355a85cf060a07aeef60d89">REG_FCRTL</a>:
<a name="l00248"></a>00248         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#acd48a9a9d3993efb941ae02b54b46d1c">fcrtl</a>());
<a name="l00249"></a>00249         <span class="keywordflow">break</span>;
<a name="l00250"></a>00250       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a9035848a36c2d1c1dabebf2c06e48ec4">REG_FCRTH</a>:
<a name="l00251"></a>00251         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a793d2b523c8c79107885793b8edd5e48">fcrth</a>());
<a name="l00252"></a>00252         <span class="keywordflow">break</span>;
<a name="l00253"></a>00253       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a4e047b0e945c6d8b534316c82c521bd1">REG_RDBAL</a>:
<a name="l00254"></a>00254         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a688fc8a72222faa75cd03f727b684adc">rdba</a>.rdbal());
<a name="l00255"></a>00255         <span class="keywordflow">break</span>;
<a name="l00256"></a>00256       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ac8a837e0dbaf3e028db7609cf2318f10">REG_RDBAH</a>:
<a name="l00257"></a>00257         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a688fc8a72222faa75cd03f727b684adc">rdba</a>.rdbah());
<a name="l00258"></a>00258         <span class="keywordflow">break</span>;
<a name="l00259"></a>00259       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#adef77c18ff90a18f8c6fe73f0e61f7fa">REG_RDLEN</a>:
<a name="l00260"></a>00260         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa4a69b303cfc97591de35a8aa05f472f">rdlen</a>());
<a name="l00261"></a>00261         <span class="keywordflow">break</span>;
<a name="l00262"></a>00262       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ab0639bae5d2694cf8a8f9aaaba9d4977">REG_SRRCTL</a>:
<a name="l00263"></a>00263         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7fbb07c843893919943594329481935d">srrctl</a>());
<a name="l00264"></a>00264         <span class="keywordflow">break</span>;
<a name="l00265"></a>00265       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a281c8814cfaf1f24aba3ec4e47843b6e">REG_RDH</a>:
<a name="l00266"></a>00266         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a6b6133f358acecf01c1b8f5df50bca79">rdh</a>());
<a name="l00267"></a>00267         <span class="keywordflow">break</span>;
<a name="l00268"></a>00268       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ad7ea3f0ced376d107086bfab67befbc8">REG_RDT</a>:
<a name="l00269"></a>00269         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7518b9a796cfdbb12e4ad473349ffb80">rdt</a>());
<a name="l00270"></a>00270         <span class="keywordflow">break</span>;
<a name="l00271"></a>00271       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a345db3e807c4b47229f85d58ba1836d8">REG_RDTR</a>:
<a name="l00272"></a>00272         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a0229a0715b90bc69aeb553c6cdbd05ab">rdtr</a>());
<a name="l00273"></a>00273         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a0229a0715b90bc69aeb553c6cdbd05ab">rdtr</a>.fpd()) {
<a name="l00274"></a>00274             <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#af6593b85cc3920a68b9a0317053a4416">writeback</a>(0);
<a name="l00275"></a>00275             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetIntr,
<a name="l00276"></a>00276                     <span class="stringliteral">&quot;Posting interrupt because of RDTR.FPD write\n&quot;</span>);
<a name="l00277"></a>00277             <a class="code" href="classIGbE.html#a5421bafb8503ffca04cac20d616ae4cc">postInterrupt</a>(<a class="code" href="namespaceiGbReg.html#ab881f740bd3545d8eb42b05253752e9ca5de08c161325e1127c2727a0b234f9b3">IT_RXT</a>);
<a name="l00278"></a>00278             <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a0229a0715b90bc69aeb553c6cdbd05ab">rdtr</a>.fpd(0);
<a name="l00279"></a>00279         }
<a name="l00280"></a>00280         <span class="keywordflow">break</span>;
<a name="l00281"></a>00281       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a03190c72ce8dd147689b7e671fbb3e70">REG_RXDCTL</a>:
<a name="l00282"></a>00282         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a55fcbfb49bf2a178b26929cc5bdc1eab">rxdctl</a>());
<a name="l00283"></a>00283         <span class="keywordflow">break</span>;
<a name="l00284"></a>00284       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ae1605063bdee3a13f9e9eda5280a7d74">REG_RADV</a>:
<a name="l00285"></a>00285         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a3eaefd7f09f27c136a3a225f7645ec65">radv</a>());
<a name="l00286"></a>00286         <span class="keywordflow">break</span>;
<a name="l00287"></a>00287       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ae124cd934d893dedf0c92172b4899701">REG_TDBAL</a>:
<a name="l00288"></a>00288         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7f50fa230d52f1e8a3d501722e3f2bf8">tdba</a>.tdbal());
<a name="l00289"></a>00289         <span class="keywordflow">break</span>;
<a name="l00290"></a>00290       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a7042bc647b8afdb47eee2760c44fa592">REG_TDBAH</a>:
<a name="l00291"></a>00291         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7f50fa230d52f1e8a3d501722e3f2bf8">tdba</a>.tdbah());
<a name="l00292"></a>00292         <span class="keywordflow">break</span>;
<a name="l00293"></a>00293       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ae885006ab462d77f5678312d6181c978">REG_TDLEN</a>:
<a name="l00294"></a>00294         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#abfbe0450e80a5b975712629e8635d42b">tdlen</a>());
<a name="l00295"></a>00295         <span class="keywordflow">break</span>;
<a name="l00296"></a>00296       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#aff7b48a39ed90fc8943a7b7042c9e996">REG_TDH</a>:
<a name="l00297"></a>00297         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a001949adaeea4f9ae509aaeb09d87056">tdh</a>());
<a name="l00298"></a>00298         <span class="keywordflow">break</span>;
<a name="l00299"></a>00299       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#adcec938fa39b4e7ff85d6b1622ccd3a5">REG_TXDCA_CTL</a>:
<a name="l00300"></a>00300         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#ae83850170fba59b26266c0de1fde948e">txdca_ctl</a>());
<a name="l00301"></a>00301         <span class="keywordflow">break</span>;
<a name="l00302"></a>00302       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ac15be2850d41581ca8530f32a90e5b0f">REG_TDT</a>:
<a name="l00303"></a>00303         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a928dc76d0b5b003d9336bee496f78089">tdt</a>());
<a name="l00304"></a>00304         <span class="keywordflow">break</span>;
<a name="l00305"></a>00305       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a871dec634edf3b35037939946579d39b">REG_TIDV</a>:
<a name="l00306"></a>00306         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a5a6fc226edb656c090d075c1064fe0d5">tidv</a>());
<a name="l00307"></a>00307         <span class="keywordflow">break</span>;
<a name="l00308"></a>00308       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a236e025cbd514be3c492cb45614ba3ae">REG_TXDCTL</a>:
<a name="l00309"></a>00309         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a3d8c32f0d48138f48863430f0c591850">txdctl</a>());
<a name="l00310"></a>00310         <span class="keywordflow">break</span>;
<a name="l00311"></a>00311       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#abebfa86c43f0b0a894e7bedc2f329b59">REG_TADV</a>:
<a name="l00312"></a>00312         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a900770ffadce14bf9ff68603b7e4b9ae">tadv</a>());
<a name="l00313"></a>00313         <span class="keywordflow">break</span>;
<a name="l00314"></a>00314       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ab8f86fd995c08da473a1d40511517901">REG_TDWBAL</a>:
<a name="l00315"></a>00315         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7d4a53842dc287993e93799f84b676ea">tdwba</a> &amp; <a class="code" href="namespaceArmISA.html#a9534dbda5e7db9881c7955c6e08cfdc0">mask</a>(32));
<a name="l00316"></a>00316         <span class="keywordflow">break</span>;
<a name="l00317"></a>00317       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a050b53dacdbc8075f739b04caf5bfd6c">REG_TDWBAH</a>:
<a name="l00318"></a>00318         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7d4a53842dc287993e93799f84b676ea">tdwba</a> &gt;&gt; 32);
<a name="l00319"></a>00319         <span class="keywordflow">break</span>;
<a name="l00320"></a>00320       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ac4ca58b53d0899d9e2cb3b6a01172029">REG_RXCSUM</a>:
<a name="l00321"></a>00321         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a66c393d9c38b0a6666d993ad7462a6ba">rxcsum</a>());
<a name="l00322"></a>00322         <span class="keywordflow">break</span>;
<a name="l00323"></a>00323       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ac694a64b5dc3ed66f0a198e11c6dd561">REG_RLPML</a>:
<a name="l00324"></a>00324         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a5ec909db587986b48557c064d55d096f">rlpml</a>);
<a name="l00325"></a>00325         <span class="keywordflow">break</span>;
<a name="l00326"></a>00326       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a55fd6fefe9e6e544fbf5dd7d80dd6c42">REG_RFCTL</a>:
<a name="l00327"></a>00327         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a57fcf2d77a3ebd0de133c82600a8f77f">rfctl</a>());
<a name="l00328"></a>00328         <span class="keywordflow">break</span>;
<a name="l00329"></a>00329       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#add1b433d6b59293827d8b1243c113ff7">REG_MANC</a>:
<a name="l00330"></a>00330         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a6443796fda5ce30a8d6349e509a8cb5a">manc</a>());
<a name="l00331"></a>00331         <span class="keywordflow">break</span>;
<a name="l00332"></a>00332       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a8ebb03ad73bb087733a50473e2aa812f">REG_SWSM</a>:
<a name="l00333"></a>00333         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a225bc3356ed3b52588f8cb4d718f23ff">swsm</a>());
<a name="l00334"></a>00334         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a225bc3356ed3b52588f8cb4d718f23ff">swsm</a>.smbi(1);
<a name="l00335"></a>00335         <span class="keywordflow">break</span>;
<a name="l00336"></a>00336       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a80005f52855fb630c17c4da9971ef2fc">REG_FWSM</a>:
<a name="l00337"></a>00337         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#af10ef7bffcad5d95fbd808b0581339d4">fwsm</a>());
<a name="l00338"></a>00338         <span class="keywordflow">break</span>;
<a name="l00339"></a>00339       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a4ee74c9ae8abd7bb42d2d7c6a5d4ed1f">REG_SWFWSYNC</a>:
<a name="l00340"></a>00340         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a43e2669b3871b70ea444bee307339af4">sw_fw_sync</a>);
<a name="l00341"></a>00341         <span class="keywordflow">break</span>;
<a name="l00342"></a>00342       <span class="keywordflow">default</span>:
<a name="l00343"></a>00343         <span class="keywordflow">if</span> (!<a class="code" href="i8254xGBe_8cc.html#a54b3194b995585806f7a762bfcac25a9">IN_RANGE</a>(daddr, <a class="code" href="namespaceiGbReg.html#a36fae451371a57470da74bf7a9123d80">REG_VFTA</a>, <a class="code" href="namespaceiGbReg.html#a9678c7045c653e90c096e22638cd9b56">VLAN_FILTER_TABLE_SIZE</a>*4) &amp;&amp;
<a name="l00344"></a>00344             !<a class="code" href="i8254xGBe_8cc.html#a54b3194b995585806f7a762bfcac25a9">IN_RANGE</a>(daddr, <a class="code" href="namespaceiGbReg.html#a9e6308c54a1c811135394041894921da">REG_RAL</a>, <a class="code" href="namespaceiGbReg.html#ae95e1095a77a684508db779465f21ac2">RCV_ADDRESS_TABLE_SIZE</a>*8) &amp;&amp;
<a name="l00345"></a>00345             !<a class="code" href="i8254xGBe_8cc.html#a54b3194b995585806f7a762bfcac25a9">IN_RANGE</a>(daddr, <a class="code" href="namespaceiGbReg.html#a9180502721e1193be91b79b98c3f40cf">REG_MTA</a>, <a class="code" href="namespaceiGbReg.html#add8f1abdb23d74212253f11efe13a39e">MULTICAST_TABLE_SIZE</a>*4) &amp;&amp;
<a name="l00346"></a>00346             !<a class="code" href="i8254xGBe_8cc.html#a54b3194b995585806f7a762bfcac25a9">IN_RANGE</a>(daddr, <a class="code" href="namespaceiGbReg.html#a0ac38603fe50560ca10542b091cce4e3">REG_CRCERRS</a>, <a class="code" href="namespaceiGbReg.html#afe2d5a9d5db647d74a2be5dda7a68a4e">STATS_REGS_SIZE</a>))
<a name="l00347"></a>00347             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Read request to unknown register number: %#x\n&quot;</span>, daddr);
<a name="l00348"></a>00348         <span class="keywordflow">else</span>
<a name="l00349"></a>00349             pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;(0);
<a name="l00350"></a>00350     };
<a name="l00351"></a>00351 
<a name="l00352"></a>00352     pkt-&gt;<a class="code" href="classPacket.html#ad664e704f09d6bb5c116573721034ebd">makeAtomicResponse</a>();
<a name="l00353"></a>00353     <span class="keywordflow">return</span> <a class="code" href="classPciDevice.html#ac8e969635a78ab9ab123904ccca434cc">pioDelay</a>;
<a name="l00354"></a>00354 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9506deecc41eb6290f9b9b8662cc33c2"></a><!-- doxytag: member="IGbE::restartClock" ref="a9506deecc41eb6290f9b9b8662cc33c2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void restartClock </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function is used to restart the clock so it can handle things like draining and resume in one place. </p>

<p><div class="fragment"><pre class="fragment"><a name="l02049"></a>02049 {
<a name="l02050"></a>02050     <span class="keywordflow">if</span> (!<a class="code" href="classIGbE.html#a13b02e56360d63f349a514edb321bd9c">tickEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>() &amp;&amp; (<a class="code" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">rxTick</a> || <a class="code" href="classIGbE.html#a0f33aec9eb84199e089e1917f7df501d">txTick</a> || <a class="code" href="classIGbE.html#a99be71cc5dbbb45b77d1d66d1bedf454">txFifoTick</a>) &amp;&amp;
<a name="l02051"></a>02051         <a class="code" href="classDrainable.html#a5c95358f0e9355bcc3979baf3fb7307f">getDrainState</a>() == <a class="code" href="classDrainable.html#a5d74787dedbc4e11c1ab15bf487e61f8a2f5f2c4a8c4f4f0519d503dcdfbf55cb">Drainable::Running</a>)
<a name="l02052"></a>02052         <a class="code" href="classEventManager.html#a4ddebbfe9a12b95be6fb993ce892dcd3">schedule</a>(<a class="code" href="classIGbE.html#a13b02e56360d63f349a514edb321bd9c">tickEvent</a>, <a class="code" href="classClockedObject.html#a773956693f216cafb7d4cad92ad582e5">clockEdge</a>(<a class="code" href="classCycles.html">Cycles</a>(1)));
<a name="l02053"></a>02053 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa22f1272cbc1c6b44dd50faaa71a0d87"></a><!-- doxytag: member="IGbE::rxStateMachine" ref="aa22f1272cbc1c6b44dd50faaa71a0d87" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rxStateMachine </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l02264"></a>02264 {
<a name="l02265"></a>02265     <span class="keywordflow">if</span> (!<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa8414401e91184e89c0bdc90778de02a">rctl</a>.en()) {
<a name="l02266"></a>02266         <a class="code" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">rxTick</a> = <span class="keyword">false</span>;
<a name="l02267"></a>02267         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;RXS: RX disabled, stopping ticking\n&quot;</span>);
<a name="l02268"></a>02268         <span class="keywordflow">return</span>;
<a name="l02269"></a>02269     }
<a name="l02270"></a>02270 
<a name="l02271"></a>02271     <span class="comment">// If the packet is done check for interrupts/descriptors/etc</span>
<a name="l02272"></a>02272     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1RxDescCache.html#a430d1dfdf7dcec48b02f69d6769acab6">packetDone</a>()) {
<a name="l02273"></a>02273         <a class="code" href="classIGbE.html#aa8031223419e9d8480a99fae1f2de778">rxDmaPacket</a> = <span class="keyword">false</span>;
<a name="l02274"></a>02274         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;RXS: Packet completed DMA to memory\n&quot;</span>);
<a name="l02275"></a>02275         <span class="keywordtype">int</span> descLeft = <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#ad60cb6948516cc9177fc65c07c7a0550">descLeft</a>();
<a name="l02276"></a>02276         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;RXS: descLeft: %d rdmts: %d rdlen: %d\n&quot;</span>,
<a name="l02277"></a>02277                 descLeft, <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa8414401e91184e89c0bdc90778de02a">rctl</a>.rdmts(), <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa4a69b303cfc97591de35a8aa05f472f">rdlen</a>());
<a name="l02278"></a>02278         <span class="keywordflow">switch</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa8414401e91184e89c0bdc90778de02a">rctl</a>.rdmts()) {
<a name="l02279"></a>02279           <span class="keywordflow">case</span> 2: <span class="keywordflow">if</span> (descLeft &gt; .125 * <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa4a69b303cfc97591de35a8aa05f472f">rdlen</a>()) <span class="keywordflow">break</span>;
<a name="l02280"></a>02280           <span class="keywordflow">case</span> 1: <span class="keywordflow">if</span> (descLeft &gt; .250 * <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa4a69b303cfc97591de35a8aa05f472f">rdlen</a>()) <span class="keywordflow">break</span>;
<a name="l02281"></a>02281           <span class="keywordflow">case</span> 0: <span class="keywordflow">if</span> (descLeft &gt; .500 * <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa4a69b303cfc97591de35a8aa05f472f">rdlen</a>())  <span class="keywordflow">break</span>;
<a name="l02282"></a>02282             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;RXS: Interrupting (RXDMT) &quot;</span>
<a name="l02283"></a>02283                     <span class="stringliteral">&quot;because of descriptors left\n&quot;</span>);
<a name="l02284"></a>02284             <a class="code" href="classIGbE.html#a5421bafb8503ffca04cac20d616ae4cc">postInterrupt</a>(<a class="code" href="namespaceiGbReg.html#ab881f740bd3545d8eb42b05253752e9ca74eadde240fb76053a8cd4776d9e39be">IT_RXDMT</a>);
<a name="l02285"></a>02285             <span class="keywordflow">break</span>;
<a name="l02286"></a>02286         }
<a name="l02287"></a>02287 
<a name="l02288"></a>02288         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#ac6e61de369e994009e36f344f99c15ad">empty</a>())
<a name="l02289"></a>02289             <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#af6593b85cc3920a68b9a0317053a4416">writeback</a>(0);
<a name="l02290"></a>02290 
<a name="l02291"></a>02291         <span class="keywordflow">if</span> (descLeft == 0) {
<a name="l02292"></a>02292             <a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(<span class="stringliteral">&quot;RXS&quot;</span>, <span class="stringliteral">&quot;Writeback Descriptors&quot;</span>);
<a name="l02293"></a>02293             <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#af6593b85cc3920a68b9a0317053a4416">writeback</a>(0);
<a name="l02294"></a>02294             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;RXS: No descriptors left in ring, forcing&quot;</span>
<a name="l02295"></a>02295                     <span class="stringliteral">&quot; writeback and stopping ticking\n&quot;</span>);
<a name="l02296"></a>02296             <a class="code" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">rxTick</a> = <span class="keyword">false</span>;
<a name="l02297"></a>02297         }
<a name="l02298"></a>02298 
<a name="l02299"></a>02299         <span class="comment">// only support descriptor granulaties</span>
<a name="l02300"></a>02300         assert(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a55fcbfb49bf2a178b26929cc5bdc1eab">rxdctl</a>.gran());
<a name="l02301"></a>02301 
<a name="l02302"></a>02302         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a55fcbfb49bf2a178b26929cc5bdc1eab">rxdctl</a>.wthresh() &gt;= <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#a8e6020ce06b62c70f3aaa6d6222353fb">descUsed</a>()) {
<a name="l02303"></a>02303             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM,
<a name="l02304"></a>02304                     <span class="stringliteral">&quot;RXS: Writing back because WTHRESH &gt;= descUsed\n&quot;</span>);
<a name="l02305"></a>02305             <a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(<span class="stringliteral">&quot;RXS&quot;</span>, <span class="stringliteral">&quot;Writeback Descriptors&quot;</span>);
<a name="l02306"></a>02306             <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a55fcbfb49bf2a178b26929cc5bdc1eab">rxdctl</a>.wthresh() &lt; (<a class="code" href="classDmaDevice.html#a3e6e4aa434d2b5c83de3660307a49001">cacheBlockSize</a>()&gt;&gt;4))
<a name="l02307"></a>02307                 <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#af6593b85cc3920a68b9a0317053a4416">writeback</a>(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a55fcbfb49bf2a178b26929cc5bdc1eab">rxdctl</a>.wthresh()-1);
<a name="l02308"></a>02308             <span class="keywordflow">else</span>
<a name="l02309"></a>02309                 <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#af6593b85cc3920a68b9a0317053a4416">writeback</a>((<a class="code" href="classDmaDevice.html#a3e6e4aa434d2b5c83de3660307a49001">cacheBlockSize</a>()-1)&gt;&gt;4);
<a name="l02310"></a>02310         }
<a name="l02311"></a>02311 
<a name="l02312"></a>02312         <span class="keywordflow">if</span> ((<a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#a73d7e7efbb2dc6340aef1e2f3e4cb02d">descUnused</a>() &lt; <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a55fcbfb49bf2a178b26929cc5bdc1eab">rxdctl</a>.pthresh()) &amp;&amp;
<a name="l02313"></a>02313             ((<a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#ad60cb6948516cc9177fc65c07c7a0550">descLeft</a>() - <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#a73d7e7efbb2dc6340aef1e2f3e4cb02d">descUnused</a>()) &gt;
<a name="l02314"></a>02314              <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a55fcbfb49bf2a178b26929cc5bdc1eab">rxdctl</a>.hthresh())) {
<a name="l02315"></a>02315             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;RXS: Fetching descriptors because &quot;</span>
<a name="l02316"></a>02316                     <span class="stringliteral">&quot;descUnused &lt; PTHRESH\n&quot;</span>);
<a name="l02317"></a>02317             <a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(<span class="stringliteral">&quot;RXS&quot;</span>, <span class="stringliteral">&quot;Fetch Descriptors&quot;</span>);
<a name="l02318"></a>02318             <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#a69c2eb368f23448d28ccb10dfa67c250">fetchDescriptors</a>();
<a name="l02319"></a>02319         }
<a name="l02320"></a>02320 
<a name="l02321"></a>02321         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#a73d7e7efbb2dc6340aef1e2f3e4cb02d">descUnused</a>() == 0) {
<a name="l02322"></a>02322             <a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(<span class="stringliteral">&quot;RXS&quot;</span>, <span class="stringliteral">&quot;Fetch Descriptors&quot;</span>);
<a name="l02323"></a>02323             <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#a69c2eb368f23448d28ccb10dfa67c250">fetchDescriptors</a>();
<a name="l02324"></a>02324             <a class="code" href="classIGbE.html#ace79fee3c0fd652014ae35a7b1497ca1">anWe</a>(<span class="stringliteral">&quot;RXS&quot;</span>, <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#aa1b65175b7b2bc6609744ebc8657ac7d">annUnusedCacheQ</a>);
<a name="l02325"></a>02325             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;RXS: No descriptors available in cache, &quot;</span>
<a name="l02326"></a>02326                     <span class="stringliteral">&quot;fetching descriptors and stopping ticking\n&quot;</span>);
<a name="l02327"></a>02327             <a class="code" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">rxTick</a> = <span class="keyword">false</span>;
<a name="l02328"></a>02328         }
<a name="l02329"></a>02329         <span class="keywordflow">return</span>;
<a name="l02330"></a>02330     }
<a name="l02331"></a>02331 
<a name="l02332"></a>02332     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aa8031223419e9d8480a99fae1f2de778">rxDmaPacket</a>) {
<a name="l02333"></a>02333         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM,
<a name="l02334"></a>02334                 <span class="stringliteral">&quot;RXS: stopping ticking until packet DMA completes\n&quot;</span>);
<a name="l02335"></a>02335         <a class="code" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">rxTick</a> = <span class="keyword">false</span>;
<a name="l02336"></a>02336         <span class="keywordflow">return</span>;
<a name="l02337"></a>02337     }
<a name="l02338"></a>02338 
<a name="l02339"></a>02339     <span class="keywordflow">if</span> (!<a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#a73d7e7efbb2dc6340aef1e2f3e4cb02d">descUnused</a>()) {
<a name="l02340"></a>02340         <a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(<span class="stringliteral">&quot;RXS&quot;</span>, <span class="stringliteral">&quot;Fetch Descriptors&quot;</span>);
<a name="l02341"></a>02341         <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#a69c2eb368f23448d28ccb10dfa67c250">fetchDescriptors</a>();
<a name="l02342"></a>02342         <a class="code" href="classIGbE.html#ace79fee3c0fd652014ae35a7b1497ca1">anWe</a>(<span class="stringliteral">&quot;RXS&quot;</span>, <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#aa1b65175b7b2bc6609744ebc8657ac7d">annUnusedCacheQ</a>);
<a name="l02343"></a>02343         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;RXS: No descriptors available in cache, &quot;</span>
<a name="l02344"></a>02344                 <span class="stringliteral">&quot;stopping ticking\n&quot;</span>);
<a name="l02345"></a>02345         <a class="code" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">rxTick</a> = <span class="keyword">false</span>;
<a name="l02346"></a>02346         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;RXS: No descriptors available, fetching\n&quot;</span>);
<a name="l02347"></a>02347         <span class="keywordflow">return</span>;
<a name="l02348"></a>02348     }
<a name="l02349"></a>02349     <a class="code" href="classIGbE.html#a9398b9f9270a0cfcc96ab2f8ad4b2c87">anPq</a>(<span class="stringliteral">&quot;RXS&quot;</span>, <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#aa1b65175b7b2bc6609744ebc8657ac7d">annUnusedCacheQ</a>);
<a name="l02350"></a>02350 
<a name="l02351"></a>02351     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#ac6e61de369e994009e36f344f99c15ad">empty</a>()) {
<a name="l02352"></a>02352         <a class="code" href="classIGbE.html#ace79fee3c0fd652014ae35a7b1497ca1">anWe</a>(<span class="stringliteral">&quot;RXS&quot;</span>, <span class="stringliteral">&quot;RX FIFO Q&quot;</span>);
<a name="l02353"></a>02353         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;RXS: RxFIFO empty, stopping ticking\n&quot;</span>);
<a name="l02354"></a>02354         <a class="code" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">rxTick</a> = <span class="keyword">false</span>;
<a name="l02355"></a>02355         <span class="keywordflow">return</span>;
<a name="l02356"></a>02356     }
<a name="l02357"></a>02357     <a class="code" href="classIGbE.html#a9398b9f9270a0cfcc96ab2f8ad4b2c87">anPq</a>(<span class="stringliteral">&quot;RXS&quot;</span>, <span class="stringliteral">&quot;RX FIFO Q&quot;</span>);
<a name="l02358"></a>02358     <a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(<span class="stringliteral">&quot;RXS&quot;</span>, <span class="stringliteral">&quot;Get Desc&quot;</span>);
<a name="l02359"></a>02359 
<a name="l02360"></a>02360     <a class="code" href="classRefCountingPtr.html">EthPacketPtr</a> pkt;
<a name="l02361"></a>02361     pkt = <a class="code" href="classIGbE.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#a12006410db3b841b4764c57a9546d246">front</a>();
<a name="l02362"></a>02362 
<a name="l02363"></a>02363 
<a name="l02364"></a>02364     <a class="code" href="classIGbE.html#a41fd0002dbd12f7ab760e7f0a6620953">pktOffset</a> = <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1RxDescCache.html#a3e213f353f926628fed12519b96f1b47">writePacket</a>(pkt, <a class="code" href="classIGbE.html#a41fd0002dbd12f7ab760e7f0a6620953">pktOffset</a>);
<a name="l02365"></a>02365     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;RXS: Writing packet into memory\n&quot;</span>);
<a name="l02366"></a>02366     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a41fd0002dbd12f7ab760e7f0a6620953">pktOffset</a> == pkt-&gt;length) {
<a name="l02367"></a>02367         <a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>( <span class="stringliteral">&quot;RXS&quot;</span>, <span class="stringliteral">&quot;FIFO Dequeue&quot;</span>);
<a name="l02368"></a>02368         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;RXS: Removing packet from FIFO\n&quot;</span>);
<a name="l02369"></a>02369         <a class="code" href="classIGbE.html#a41fd0002dbd12f7ab760e7f0a6620953">pktOffset</a> = 0;
<a name="l02370"></a>02370         <a class="code" href="classIGbE.html#a4d59c58fec3355c64488974a9110bb70">anDq</a>(<span class="stringliteral">&quot;RXS&quot;</span>, <span class="stringliteral">&quot;RX FIFO Q&quot;</span>);
<a name="l02371"></a>02371         <a class="code" href="classIGbE.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#a312e7f6c761a199c1369fbe651e084f0">pop</a>();
<a name="l02372"></a>02372     }
<a name="l02373"></a>02373 
<a name="l02374"></a>02374     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;RXS: stopping ticking until packet DMA completes\n&quot;</span>);
<a name="l02375"></a>02375     <a class="code" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">rxTick</a> = <span class="keyword">false</span>;
<a name="l02376"></a>02376     <a class="code" href="classIGbE.html#aa8031223419e9d8480a99fae1f2de778">rxDmaPacket</a> = <span class="keyword">true</span>;
<a name="l02377"></a>02377     <a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(<span class="stringliteral">&quot;RXS&quot;</span>, <span class="stringliteral">&quot;DMA Packet&quot;</span>);
<a name="l02378"></a>02378 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a53e036786d17361be4c7320d39c99b84"></a><!-- doxytag: member="IGbE::serialize" ref="a53e036786d17361be4c7320d39c99b84" args="(std::ostream &amp;os)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void serialize </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>os</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Serialize this object to the given output stream. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>os</em>&nbsp;</td><td>The stream to serialize to. </td></tr>
  </table>
  </dd>
</dl>

<p><a class="el" href="classPciDevice.html#a53e036786d17361be4c7320d39c99b84">PciDevice</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l02455"></a>02455 {
<a name="l02456"></a>02456     <a class="code" href="classIGbE.html#a53e036786d17361be4c7320d39c99b84">PciDevice::serialize</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>);
<a name="l02457"></a>02457 
<a name="l02458"></a>02458     <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a53e036786d17361be4c7320d39c99b84">serialize</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>);
<a name="l02459"></a>02459     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE.html#a8988636da8c2e4f74e8c62d7ad585a61">eeOpBits</a>);
<a name="l02460"></a>02460     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE.html#a976342e4e142f8f031f86a8e7ce7a55f">eeAddrBits</a>);
<a name="l02461"></a>02461     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE.html#ad2c36d4fa51a4befaa7518f6fa3590be">eeDataBits</a>);
<a name="l02462"></a>02462     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE.html#aa6c5c24d6b03e9f01ddacc4448214383">eeOpcode</a>);
<a name="l02463"></a>02463     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE.html#a00d8c4d0c00b1a7fc2a5885222511eee">eeAddr</a>);
<a name="l02464"></a>02464     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE.html#adad52012a21d414368149556f2cc909b">lastInterrupt</a>);
<a name="l02465"></a>02465     <a class="code" href="serialize_8hh.html#a9aa03522128bc19a3bc0294501226f8b">SERIALIZE_ARRAY</a>(<a class="code" href="classIGbE.html#a7a8d29882b2cc202e8f3d9f4e758937c">flash</a>,<a class="code" href="namespaceiGbReg.html#adb0e1024d46141c966014951f5b1e5c8">iGbReg::EEPROM_SIZE</a>);
<a name="l02466"></a>02466 
<a name="l02467"></a>02467     <a class="code" href="classIGbE.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#ab4138b21b48e3371a8e20df72b675a88">serialize</a>(<span class="stringliteral">&quot;rxfifo&quot;</span>, <a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>);
<a name="l02468"></a>02468     <a class="code" href="classIGbE.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#ab4138b21b48e3371a8e20df72b675a88">serialize</a>(<span class="stringliteral">&quot;txfifo&quot;</span>, <a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>);
<a name="l02469"></a>02469 
<a name="l02470"></a>02470     <span class="keywordtype">bool</span> txPktExists = <a class="code" href="classIGbE.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a>;
<a name="l02471"></a>02471     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(txPktExists);
<a name="l02472"></a>02472     <span class="keywordflow">if</span> (txPktExists)
<a name="l02473"></a>02473         <a class="code" href="classIGbE.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a>-&gt;serialize(<span class="stringliteral">&quot;txpacket&quot;</span>, <a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>);
<a name="l02474"></a>02474 
<a name="l02475"></a>02475     <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> rdtr_time = 0, radv_time = 0, tidv_time = 0, tadv_time = 0,
<a name="l02476"></a>02476         inter_time = 0;
<a name="l02477"></a>02477 
<a name="l02478"></a>02478     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a72b4c60f46bdb4b88427dec167aaca80">rdtrEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>())
<a name="l02479"></a>02479         rdtr_time = <a class="code" href="classIGbE.html#a72b4c60f46bdb4b88427dec167aaca80">rdtrEvent</a>.<a class="code" href="classEvent.html#a1883243a0117678c5695f2435dcabbdc" title="Get the time that the event is scheduled.">when</a>();
<a name="l02480"></a>02480     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(rdtr_time);
<a name="l02481"></a>02481 
<a name="l02482"></a>02482     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a30a3a2a8194ad851683c915beca8a172">radvEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>())
<a name="l02483"></a>02483         radv_time = <a class="code" href="classIGbE.html#a30a3a2a8194ad851683c915beca8a172">radvEvent</a>.<a class="code" href="classEvent.html#a1883243a0117678c5695f2435dcabbdc" title="Get the time that the event is scheduled.">when</a>();
<a name="l02484"></a>02484     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(radv_time);
<a name="l02485"></a>02485 
<a name="l02486"></a>02486     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a91fce863693eb4c56a924639620d77cf">tidvEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>())
<a name="l02487"></a>02487         tidv_time = <a class="code" href="classIGbE.html#a91fce863693eb4c56a924639620d77cf">tidvEvent</a>.<a class="code" href="classEvent.html#a1883243a0117678c5695f2435dcabbdc" title="Get the time that the event is scheduled.">when</a>();
<a name="l02488"></a>02488     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(tidv_time);
<a name="l02489"></a>02489 
<a name="l02490"></a>02490     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a52af2948f0bdbd05624c9f1e90872556">tadvEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>())
<a name="l02491"></a>02491         tadv_time = <a class="code" href="classIGbE.html#a52af2948f0bdbd05624c9f1e90872556">tadvEvent</a>.<a class="code" href="classEvent.html#a1883243a0117678c5695f2435dcabbdc" title="Get the time that the event is scheduled.">when</a>();
<a name="l02492"></a>02492     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(tadv_time);
<a name="l02493"></a>02493 
<a name="l02494"></a>02494     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a3de27cfe33d0ae9f9451c767ee40a57d">interEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>())
<a name="l02495"></a>02495         inter_time = <a class="code" href="classIGbE.html#a3de27cfe33d0ae9f9451c767ee40a57d">interEvent</a>.<a class="code" href="classEvent.html#a1883243a0117678c5695f2435dcabbdc" title="Get the time that the event is scheduled.">when</a>();
<a name="l02496"></a>02496     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(inter_time);
<a name="l02497"></a>02497 
<a name="l02498"></a>02498     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE.html#a41fd0002dbd12f7ab760e7f0a6620953">pktOffset</a>);
<a name="l02499"></a>02499 
<a name="l02500"></a>02500     <a class="code" href="classSerializable.html#a02882ba301442518e82872ad4574a3f0">nameOut</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>, <a class="code" href="cprintf_8hh.html#ace22d1c39f2df58e593bc49d1613eca2">csprintf</a>(<span class="stringliteral">&quot;%s.TxDescCache&quot;</span>, <a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>()));
<a name="l02501"></a>02501     <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1TxDescCache.html#a53e036786d17361be4c7320d39c99b84">serialize</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>);
<a name="l02502"></a>02502 
<a name="l02503"></a>02503     <a class="code" href="classSerializable.html#a02882ba301442518e82872ad4574a3f0">nameOut</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>, <a class="code" href="cprintf_8hh.html#ace22d1c39f2df58e593bc49d1613eca2">csprintf</a>(<span class="stringliteral">&quot;%s.RxDescCache&quot;</span>, <a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>()));
<a name="l02504"></a>02504     <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1RxDescCache.html#a53e036786d17361be4c7320d39c99b84">serialize</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>);
<a name="l02505"></a>02505 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7e3216d8f11c9d6c3fa244be21648778"></a><!-- doxytag: member="IGbE::tadvProcess" ref="a7e3216d8f11c9d6c3fa244be21648778" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tadvProcess </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00118"></a>00118                        {
<a name="l00119"></a>00119         <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#af6593b85cc3920a68b9a0317053a4416">writeback</a>(0);
<a name="l00120"></a>00120         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetIntr,
<a name="l00121"></a>00121                 <span class="stringliteral">&quot;Posting TXDW interrupt because TADV timer expired\n&quot;</span>);
<a name="l00122"></a>00122         <a class="code" href="classIGbE.html#a5421bafb8503ffca04cac20d616ae4cc">postInterrupt</a>(<a class="code" href="namespaceiGbReg.html#ab881f740bd3545d8eb42b05253752e9ca41242befdd855ef8192a0cad76e34a02">iGbReg::IT_TXDW</a>);
<a name="l00123"></a>00123     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a873dd91783f9efb4a590aded1f70d6b0"></a><!-- doxytag: member="IGbE::tick" ref="a873dd91783f9efb4a590aded1f70d6b0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tick </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l02420"></a>02420 {
<a name="l02421"></a>02421     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;IGbE: -------------- Cycle --------------\n&quot;</span>);
<a name="l02422"></a>02422 
<a name="l02423"></a>02423     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">rxTick</a>)
<a name="l02424"></a>02424         <a class="code" href="classIGbE.html#aa22f1272cbc1c6b44dd50faaa71a0d87">rxStateMachine</a>();
<a name="l02425"></a>02425 
<a name="l02426"></a>02426     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a0f33aec9eb84199e089e1917f7df501d">txTick</a>)
<a name="l02427"></a>02427         <a class="code" href="classIGbE.html#a86f1c8a72188e638c991535ba96f5f0e">txStateMachine</a>();
<a name="l02428"></a>02428 
<a name="l02429"></a>02429     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a99be71cc5dbbb45b77d1d66d1bedf454">txFifoTick</a>)
<a name="l02430"></a>02430         <a class="code" href="classIGbE.html#af67ff1365c83adc97fef8753e38f3d9e">txWire</a>();
<a name="l02431"></a>02431 
<a name="l02432"></a>02432 
<a name="l02433"></a>02433     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">rxTick</a> || <a class="code" href="classIGbE.html#a0f33aec9eb84199e089e1917f7df501d">txTick</a> || <a class="code" href="classIGbE.html#a99be71cc5dbbb45b77d1d66d1bedf454">txFifoTick</a>)
<a name="l02434"></a>02434         <a class="code" href="classEventManager.html#a4ddebbfe9a12b95be6fb993ce892dcd3">schedule</a>(<a class="code" href="classIGbE.html#a13b02e56360d63f349a514edb321bd9c">tickEvent</a>, <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>() + <a class="code" href="classClockedObject.html#a78c89cef17196c60470c4f2f76d43d8a">clockPeriod</a>());
<a name="l02435"></a>02435 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aedc70a3ef5f173813e3060f77fa53bc8"></a><!-- doxytag: member="IGbE::tidvProcess" ref="aedc70a3ef5f173813e3060f77fa53bc8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tidvProcess </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00129"></a>00129                        {
<a name="l00130"></a>00130         <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#af6593b85cc3920a68b9a0317053a4416">writeback</a>(0);
<a name="l00131"></a>00131         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetIntr,
<a name="l00132"></a>00132                 <span class="stringliteral">&quot;Posting TXDW interrupt because TIDV timer expired\n&quot;</span>);
<a name="l00133"></a>00133         <a class="code" href="classIGbE.html#a5421bafb8503ffca04cac20d616ae4cc">postInterrupt</a>(<a class="code" href="namespaceiGbReg.html#ab881f740bd3545d8eb42b05253752e9ca41242befdd855ef8192a0cad76e34a02">iGbReg::IT_TXDW</a>);
<a name="l00134"></a>00134     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a86f1c8a72188e638c991535ba96f5f0e"></a><!-- doxytag: member="IGbE::txStateMachine" ref="a86f1c8a72188e638c991535ba96f5f0e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void txStateMachine </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l02114"></a>02114 {
<a name="l02115"></a>02115     <span class="keywordflow">if</span> (!<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#ac3a1073a4a8054c3eb8bc2b66099bd16">tctl</a>.en()) {
<a name="l02116"></a>02116         <a class="code" href="classIGbE.html#a0f33aec9eb84199e089e1917f7df501d">txTick</a> = <span class="keyword">false</span>;
<a name="l02117"></a>02117         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;TXS: TX disabled, stopping ticking\n&quot;</span>);
<a name="l02118"></a>02118         <span class="keywordflow">return</span>;
<a name="l02119"></a>02119     }
<a name="l02120"></a>02120 
<a name="l02121"></a>02121     <span class="comment">// If we have a packet available and it&apos;s length is not 0 (meaning it&apos;s not</span>
<a name="l02122"></a>02122     <span class="comment">// a multidescriptor packet) put it in the fifo, otherwise an the next</span>
<a name="l02123"></a>02123     <span class="comment">// iteration we&apos;ll get the rest of the data</span>
<a name="l02124"></a>02124     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a> &amp;&amp; <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1TxDescCache.html#a3fd3cdfc66306ff22b53325aeb4e2c64">packetAvailable</a>()
<a name="l02125"></a>02125         &amp;&amp; !<a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1TxDescCache.html#a126e4d9db081d9783bdcf86befdff3de">packetMultiDesc</a>() &amp;&amp; <a class="code" href="classIGbE.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a>-&gt;length) {
<a name="l02126"></a>02126         <a class="code" href="classIGbE.html#ad5560d7f7671ea0c96250beacf187ac8">anQ</a>(<span class="stringliteral">&quot;TXS&quot;</span>, <span class="stringliteral">&quot;TX FIFO Q&quot;</span>);
<a name="l02127"></a>02127         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;TXS: packet placed in TX FIFO\n&quot;</span>);
<a name="l02128"></a>02128 <span class="preprocessor">#ifndef NDEBUG</span>
<a name="l02129"></a>02129 <span class="preprocessor"></span>        <span class="keywordtype">bool</span> success =
<a name="l02130"></a>02130 <span class="preprocessor">#endif</span>
<a name="l02131"></a>02131 <span class="preprocessor"></span>            <a class="code" href="classIGbE.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#ac4382beafcf27ce14f59707bc7f4c3d7">push</a>(<a class="code" href="classIGbE.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a>);
<a name="l02132"></a>02132         <a class="code" href="classIGbE.html#a99be71cc5dbbb45b77d1d66d1bedf454">txFifoTick</a> = <span class="keyword">true</span> &amp;&amp; !<a class="code" href="classIGbE.html#a329b71fb934a93312ca0aacbf5a3f982">drainManager</a>;
<a name="l02133"></a>02133         assert(success);
<a name="l02134"></a>02134         <a class="code" href="classIGbE.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l02135"></a>02135         <a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(<span class="stringliteral">&quot;TXS&quot;</span>, <span class="stringliteral">&quot;Desc Writeback&quot;</span>);
<a name="l02136"></a>02136         <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#af6593b85cc3920a68b9a0317053a4416">writeback</a>((<a class="code" href="classDmaDevice.html#a3e6e4aa434d2b5c83de3660307a49001">cacheBlockSize</a>()-1)&gt;&gt;4);
<a name="l02137"></a>02137         <span class="keywordflow">return</span>;
<a name="l02138"></a>02138     }
<a name="l02139"></a>02139 
<a name="l02140"></a>02140     <span class="comment">// Only support descriptor granularity</span>
<a name="l02141"></a>02141     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a3d8c32f0d48138f48863430f0c591850">txdctl</a>.lwthresh() &amp;&amp;
<a name="l02142"></a>02142         <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#ad60cb6948516cc9177fc65c07c7a0550">descLeft</a>() &lt; (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a3d8c32f0d48138f48863430f0c591850">txdctl</a>.lwthresh() * 8)) {
<a name="l02143"></a>02143         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;TXS: LWTHRESH caused posting of TXDLOW\n&quot;</span>);
<a name="l02144"></a>02144         <a class="code" href="classIGbE.html#a5421bafb8503ffca04cac20d616ae4cc">postInterrupt</a>(<a class="code" href="namespaceiGbReg.html#ab881f740bd3545d8eb42b05253752e9ca3bf746c26536ce7825047a493b1f1485">IT_TXDLOW</a>);
<a name="l02145"></a>02145     }
<a name="l02146"></a>02146 
<a name="l02147"></a>02147     <span class="keywordflow">if</span> (!<a class="code" href="classIGbE.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a>) {
<a name="l02148"></a>02148         <a class="code" href="classIGbE.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a> = <span class="keyword">new</span> <a class="code" href="classEthPacketData.html">EthPacketData</a>(16384);
<a name="l02149"></a>02149     }
<a name="l02150"></a>02150 
<a name="l02151"></a>02151     <span class="keywordflow">if</span> (!<a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1TxDescCache.html#ad8a4f7d1ef74ba318f35597c58bc757b">packetWaiting</a>()) {
<a name="l02152"></a>02152         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#ad60cb6948516cc9177fc65c07c7a0550">descLeft</a>() == 0) {
<a name="l02153"></a>02153             <a class="code" href="classIGbE.html#a5421bafb8503ffca04cac20d616ae4cc">postInterrupt</a>(<a class="code" href="namespaceiGbReg.html#ab881f740bd3545d8eb42b05253752e9ca8970dcbfb859f26bfa07a586377d4455">IT_TXQE</a>);
<a name="l02154"></a>02154             <a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(<span class="stringliteral">&quot;TXS&quot;</span>, <span class="stringliteral">&quot;Desc Writeback&quot;</span>);
<a name="l02155"></a>02155             <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#af6593b85cc3920a68b9a0317053a4416">writeback</a>(0);
<a name="l02156"></a>02156             <a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(<span class="stringliteral">&quot;TXS&quot;</span>, <span class="stringliteral">&quot;Desc Fetch&quot;</span>);
<a name="l02157"></a>02157             <a class="code" href="classIGbE.html#ace79fee3c0fd652014ae35a7b1497ca1">anWe</a>(<span class="stringliteral">&quot;TXS&quot;</span>, <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#aa1b65175b7b2bc6609744ebc8657ac7d">annUnusedCacheQ</a>);
<a name="l02158"></a>02158             <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#a69c2eb368f23448d28ccb10dfa67c250">fetchDescriptors</a>();
<a name="l02159"></a>02159             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;TXS: No descriptors left in ring, forcing &quot;</span>
<a name="l02160"></a>02160                     <span class="stringliteral">&quot;writeback stopping ticking and posting TXQE\n&quot;</span>);
<a name="l02161"></a>02161             <a class="code" href="classIGbE.html#a0f33aec9eb84199e089e1917f7df501d">txTick</a> = <span class="keyword">false</span>;
<a name="l02162"></a>02162             <span class="keywordflow">return</span>;
<a name="l02163"></a>02163         }
<a name="l02164"></a>02164 
<a name="l02165"></a>02165 
<a name="l02166"></a>02166         <span class="keywordflow">if</span> (!(<a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#a73d7e7efbb2dc6340aef1e2f3e4cb02d">descUnused</a>())) {
<a name="l02167"></a>02167             <a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(<span class="stringliteral">&quot;TXS&quot;</span>, <span class="stringliteral">&quot;Desc Fetch&quot;</span>);
<a name="l02168"></a>02168             <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#a69c2eb368f23448d28ccb10dfa67c250">fetchDescriptors</a>();
<a name="l02169"></a>02169             <a class="code" href="classIGbE.html#ace79fee3c0fd652014ae35a7b1497ca1">anWe</a>(<span class="stringliteral">&quot;TXS&quot;</span>, <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#aa1b65175b7b2bc6609744ebc8657ac7d">annUnusedCacheQ</a>);
<a name="l02170"></a>02170             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;TXS: No descriptors available in cache, &quot;</span>
<a name="l02171"></a>02171                     <span class="stringliteral">&quot;fetching and stopping ticking\n&quot;</span>);
<a name="l02172"></a>02172             <a class="code" href="classIGbE.html#a0f33aec9eb84199e089e1917f7df501d">txTick</a> = <span class="keyword">false</span>;
<a name="l02173"></a>02173             <span class="keywordflow">return</span>;
<a name="l02174"></a>02174         }
<a name="l02175"></a>02175         <a class="code" href="classIGbE.html#a9398b9f9270a0cfcc96ab2f8ad4b2c87">anPq</a>(<span class="stringliteral">&quot;TXS&quot;</span>, <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#aa1b65175b7b2bc6609744ebc8657ac7d">annUnusedCacheQ</a>);
<a name="l02176"></a>02176 
<a name="l02177"></a>02177 
<a name="l02178"></a>02178         <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1TxDescCache.html#af7a2e6e84647ba93598a7a02730cba41">processContextDesc</a>();
<a name="l02179"></a>02179         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1TxDescCache.html#ad8a4f7d1ef74ba318f35597c58bc757b">packetWaiting</a>()) {
<a name="l02180"></a>02180             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM,
<a name="l02181"></a>02181                     <span class="stringliteral">&quot;TXS: Fetching TSO header, stopping ticking\n&quot;</span>);
<a name="l02182"></a>02182             <a class="code" href="classIGbE.html#a0f33aec9eb84199e089e1917f7df501d">txTick</a> = <span class="keyword">false</span>;
<a name="l02183"></a>02183             <span class="keywordflow">return</span>;
<a name="l02184"></a>02184         }
<a name="l02185"></a>02185 
<a name="l02186"></a>02186         <span class="keywordtype">unsigned</span> size = <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1TxDescCache.html#a924187a1c689184efd8492916ca12e32">getPacketSize</a>(<a class="code" href="classIGbE.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a>);
<a name="l02187"></a>02187         <span class="keywordflow">if</span> (size &gt; 0 &amp;&amp; <a class="code" href="classIGbE.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#aaf2f31de7b8cd9bf2085049b07125b1e">avail</a>() &gt; size) {
<a name="l02188"></a>02188             <a class="code" href="classIGbE.html#a48fd12dd7cf4b842162b7a0b89875559">anRq</a>(<span class="stringliteral">&quot;TXS&quot;</span>, <span class="stringliteral">&quot;TX FIFO Q&quot;</span>);
<a name="l02189"></a>02189             <a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(<span class="stringliteral">&quot;TXS&quot;</span>, <span class="stringliteral">&quot;DMA Packet&quot;</span>);
<a name="l02190"></a>02190             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;TXS: Reserving %d bytes in FIFO and &quot;</span>
<a name="l02191"></a>02191                     <span class="stringliteral">&quot;beginning DMA of next packet\n&quot;</span>, size);
<a name="l02192"></a>02192             <a class="code" href="classIGbE.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#a67916a8cd004cf1b079dd2aa310f3647">reserve</a>(size);
<a name="l02193"></a>02193             <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1TxDescCache.html#af58491ad4f774a610584c404231b30ae">getPacketData</a>(<a class="code" href="classIGbE.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a>);
<a name="l02194"></a>02194         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (size == 0) {
<a name="l02195"></a>02195             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;TXS: getPacketSize returned: %d\n&quot;</span>, size);
<a name="l02196"></a>02196             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM,
<a name="l02197"></a>02197                     <span class="stringliteral">&quot;TXS: No packets to get, writing back used descriptors\n&quot;</span>);
<a name="l02198"></a>02198             <a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(<span class="stringliteral">&quot;TXS&quot;</span>, <span class="stringliteral">&quot;Desc Writeback&quot;</span>);
<a name="l02199"></a>02199             <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#af6593b85cc3920a68b9a0317053a4416">writeback</a>(0);
<a name="l02200"></a>02200         } <span class="keywordflow">else</span> {
<a name="l02201"></a>02201             <a class="code" href="classIGbE.html#a09c6a12f9551bd90d913dfe8ed396a67">anWf</a>(<span class="stringliteral">&quot;TXS&quot;</span>, <span class="stringliteral">&quot;TX FIFO Q&quot;</span>);
<a name="l02202"></a>02202             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;TXS: FIFO full, stopping ticking until space &quot;</span>
<a name="l02203"></a>02203                     <span class="stringliteral">&quot;available in FIFO\n&quot;</span>);
<a name="l02204"></a>02204             <a class="code" href="classIGbE.html#a0f33aec9eb84199e089e1917f7df501d">txTick</a> = <span class="keyword">false</span>;
<a name="l02205"></a>02205         }
<a name="l02206"></a>02206 
<a name="l02207"></a>02207 
<a name="l02208"></a>02208         <span class="keywordflow">return</span>;
<a name="l02209"></a>02209     }
<a name="l02210"></a>02210     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;TXS: Nothing to do, stopping ticking\n&quot;</span>);
<a name="l02211"></a>02211     <a class="code" href="classIGbE.html#a0f33aec9eb84199e089e1917f7df501d">txTick</a> = <span class="keyword">false</span>;
<a name="l02212"></a>02212 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af67ff1365c83adc97fef8753e38f3d9e"></a><!-- doxytag: member="IGbE::txWire" ref="af67ff1365c83adc97fef8753e38f3d9e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void txWire </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l02382"></a>02382 {
<a name="l02383"></a>02383     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#ac6e61de369e994009e36f344f99c15ad">empty</a>()) {
<a name="l02384"></a>02384         <a class="code" href="classIGbE.html#ace79fee3c0fd652014ae35a7b1497ca1">anWe</a>(<span class="stringliteral">&quot;TXQ&quot;</span>, <span class="stringliteral">&quot;TX FIFO Q&quot;</span>);
<a name="l02385"></a>02385         <a class="code" href="classIGbE.html#a99be71cc5dbbb45b77d1d66d1bedf454">txFifoTick</a> = <span class="keyword">false</span>;
<a name="l02386"></a>02386         <span class="keywordflow">return</span>;
<a name="l02387"></a>02387     }
<a name="l02388"></a>02388 
<a name="l02389"></a>02389 
<a name="l02390"></a>02390     <a class="code" href="classIGbE.html#a9398b9f9270a0cfcc96ab2f8ad4b2c87">anPq</a>(<span class="stringliteral">&quot;TXQ&quot;</span>, <span class="stringliteral">&quot;TX FIFO Q&quot;</span>);
<a name="l02391"></a>02391     <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a4c7684471cc2bc72bc660ea06ca78c91">etherInt</a>-&gt;<a class="code" href="classEtherInt.html#aad28edf890b463a29f87489b79f8b235">sendPacket</a>(<a class="code" href="classIGbE.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#a12006410db3b841b4764c57a9546d246">front</a>())) {
<a name="l02392"></a>02392         <a class="code" href="classIGbE.html#ad3738d2e08f4ea21f1c3721f2492c9c2">cpa</a>-&gt;<a class="code" href="classCPA.html#a31614725ede04f43ff983d5dedb56590">hwQ</a>(<a class="code" href="classCPA.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9a96f120298159c9334e174bf9f286f63b">CPA::FL_NONE</a>, <a class="code" href="classPioDevice.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>, <span class="stringliteral">&quot;TXQ&quot;</span>, <span class="stringliteral">&quot;WireQ&quot;</span>, 0);
<a name="l02393"></a>02393         <span class="keywordflow">if</span> (<a class="code" href="trace_8hh.html#af76c9f7776aade1bf9d7dfa8a0c6b341">DTRACE</a>(EthernetSM)) {
<a name="l02394"></a>02394             <a class="code" href="classNet_1_1IpPtr.html">IpPtr</a> <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>(<a class="code" href="classIGbE.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#a12006410db3b841b4764c57a9546d246">front</a>());
<a name="l02395"></a>02395             <span class="keywordflow">if</span> (<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>)
<a name="l02396"></a>02396                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;Transmitting Ip packet with Id=%d\n&quot;</span>,
<a name="l02397"></a>02397                         <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>-&gt;id());
<a name="l02398"></a>02398             <span class="keywordflow">else</span>
<a name="l02399"></a>02399                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;Transmitting Non-Ip packet\n&quot;</span>);
<a name="l02400"></a>02400         }
<a name="l02401"></a>02401         <a class="code" href="classIGbE.html#a4d59c58fec3355c64488974a9110bb70">anDq</a>(<span class="stringliteral">&quot;TXQ&quot;</span>, <span class="stringliteral">&quot;TX FIFO Q&quot;</span>);
<a name="l02402"></a>02402         <a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(<span class="stringliteral">&quot;TXQ&quot;</span>, <span class="stringliteral">&quot;Wire Send&quot;</span>);
<a name="l02403"></a>02403         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM,
<a name="l02404"></a>02404                 <span class="stringliteral">&quot;TxFIFO: Successful transmit, bytes available in fifo: %d\n&quot;</span>,
<a name="l02405"></a>02405                 <a class="code" href="classIGbE.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#aaf2f31de7b8cd9bf2085049b07125b1e">avail</a>());
<a name="l02406"></a>02406 
<a name="l02407"></a>02407         <a class="code" href="classEtherDevice.html#abbcbcdf8c27d517363ead6a7f6d26e0d">txBytes</a> += <a class="code" href="classIGbE.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#a12006410db3b841b4764c57a9546d246">front</a>()-&gt;length;
<a name="l02408"></a>02408         <a class="code" href="classEtherDevice.html#a954bf8127dea683de5f15cb0e2103657">txPackets</a>++;
<a name="l02409"></a>02409         <a class="code" href="classIGbE.html#a99be71cc5dbbb45b77d1d66d1bedf454">txFifoTick</a> = <span class="keyword">false</span>;
<a name="l02410"></a>02410 
<a name="l02411"></a>02411         <a class="code" href="classIGbE.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#a312e7f6c761a199c1369fbe651e084f0">pop</a>();
<a name="l02412"></a>02412     } <span class="keywordflow">else</span> {
<a name="l02413"></a>02413         <span class="comment">// We&apos;ll get woken up when the packet ethTxDone() gets called</span>
<a name="l02414"></a>02414         <a class="code" href="classIGbE.html#a99be71cc5dbbb45b77d1d66d1bedf454">txFifoTick</a> = <span class="keyword">false</span>;
<a name="l02415"></a>02415     }
<a name="l02416"></a>02416 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af22e5d6d660b97db37003ac61ac4ee49"></a><!-- doxytag: member="IGbE::unserialize" ref="af22e5d6d660b97db37003ac61ac4ee49" args="(Checkpoint *cp, const std::string &amp;section)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void unserialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCheckpoint.html">Checkpoint</a> *&nbsp;</td>
          <td class="paramname"> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>section</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Reconstruct the state of this object from a checkpoint. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="namespacecp.html">cp</a></em>&nbsp;</td><td>The checkpoint use. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>section</em>&nbsp;</td><td>The section name of this object </td></tr>
  </table>
  </dd>
</dl>

<p><a class="el" href="classPciDevice.html#af22e5d6d660b97db37003ac61ac4ee49">PciDevice</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l02509"></a>02509 {
<a name="l02510"></a>02510     <a class="code" href="classIGbE.html#af22e5d6d660b97db37003ac61ac4ee49">PciDevice::unserialize</a>(cp, section);
<a name="l02511"></a>02511 
<a name="l02512"></a>02512     <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#af22e5d6d660b97db37003ac61ac4ee49">unserialize</a>(cp, section);
<a name="l02513"></a>02513     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE.html#a8988636da8c2e4f74e8c62d7ad585a61">eeOpBits</a>);
<a name="l02514"></a>02514     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE.html#a976342e4e142f8f031f86a8e7ce7a55f">eeAddrBits</a>);
<a name="l02515"></a>02515     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE.html#ad2c36d4fa51a4befaa7518f6fa3590be">eeDataBits</a>);
<a name="l02516"></a>02516     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE.html#aa6c5c24d6b03e9f01ddacc4448214383">eeOpcode</a>);
<a name="l02517"></a>02517     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE.html#a00d8c4d0c00b1a7fc2a5885222511eee">eeAddr</a>);
<a name="l02518"></a>02518     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE.html#adad52012a21d414368149556f2cc909b">lastInterrupt</a>);
<a name="l02519"></a>02519     <a class="code" href="serialize_8hh.html#a8de12bf68d0f92f7ab8585820607932e">UNSERIALIZE_ARRAY</a>(<a class="code" href="classIGbE.html#a7a8d29882b2cc202e8f3d9f4e758937c">flash</a>,<a class="code" href="namespaceiGbReg.html#adb0e1024d46141c966014951f5b1e5c8">iGbReg::EEPROM_SIZE</a>);
<a name="l02520"></a>02520 
<a name="l02521"></a>02521     <a class="code" href="classIGbE.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#a147c320e3d6506edf5587a40cd8e430d">unserialize</a>(<span class="stringliteral">&quot;rxfifo&quot;</span>, cp, section);
<a name="l02522"></a>02522     <a class="code" href="classIGbE.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#a147c320e3d6506edf5587a40cd8e430d">unserialize</a>(<span class="stringliteral">&quot;txfifo&quot;</span>, cp, section);
<a name="l02523"></a>02523 
<a name="l02524"></a>02524     <span class="keywordtype">bool</span> txPktExists;
<a name="l02525"></a>02525     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(txPktExists);
<a name="l02526"></a>02526     <span class="keywordflow">if</span> (txPktExists) {
<a name="l02527"></a>02527         <a class="code" href="classIGbE.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a> = <span class="keyword">new</span> <a class="code" href="classEthPacketData.html">EthPacketData</a>(16384);
<a name="l02528"></a>02528         <a class="code" href="classIGbE.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a>-&gt;unserialize(<span class="stringliteral">&quot;txpacket&quot;</span>, cp, section);
<a name="l02529"></a>02529     }
<a name="l02530"></a>02530 
<a name="l02531"></a>02531     <a class="code" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">rxTick</a> = <span class="keyword">true</span>;
<a name="l02532"></a>02532     <a class="code" href="classIGbE.html#a0f33aec9eb84199e089e1917f7df501d">txTick</a> = <span class="keyword">true</span>;
<a name="l02533"></a>02533     <a class="code" href="classIGbE.html#a99be71cc5dbbb45b77d1d66d1bedf454">txFifoTick</a> = <span class="keyword">true</span>;
<a name="l02534"></a>02534 
<a name="l02535"></a>02535     <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> rdtr_time, radv_time, tidv_time, tadv_time, inter_time;
<a name="l02536"></a>02536     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(rdtr_time);
<a name="l02537"></a>02537     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(radv_time);
<a name="l02538"></a>02538     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(tidv_time);
<a name="l02539"></a>02539     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(tadv_time);
<a name="l02540"></a>02540     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(inter_time);
<a name="l02541"></a>02541 
<a name="l02542"></a>02542     <span class="keywordflow">if</span> (rdtr_time)
<a name="l02543"></a>02543         <a class="code" href="classEventManager.html#a4ddebbfe9a12b95be6fb993ce892dcd3">schedule</a>(<a class="code" href="classIGbE.html#a72b4c60f46bdb4b88427dec167aaca80">rdtrEvent</a>, rdtr_time);
<a name="l02544"></a>02544 
<a name="l02545"></a>02545     <span class="keywordflow">if</span> (radv_time)
<a name="l02546"></a>02546         <a class="code" href="classEventManager.html#a4ddebbfe9a12b95be6fb993ce892dcd3">schedule</a>(<a class="code" href="classIGbE.html#a30a3a2a8194ad851683c915beca8a172">radvEvent</a>, radv_time);
<a name="l02547"></a>02547 
<a name="l02548"></a>02548     <span class="keywordflow">if</span> (tidv_time)
<a name="l02549"></a>02549         <a class="code" href="classEventManager.html#a4ddebbfe9a12b95be6fb993ce892dcd3">schedule</a>(<a class="code" href="classIGbE.html#a91fce863693eb4c56a924639620d77cf">tidvEvent</a>, tidv_time);
<a name="l02550"></a>02550 
<a name="l02551"></a>02551     <span class="keywordflow">if</span> (tadv_time)
<a name="l02552"></a>02552         <a class="code" href="classEventManager.html#a4ddebbfe9a12b95be6fb993ce892dcd3">schedule</a>(<a class="code" href="classIGbE.html#a52af2948f0bdbd05624c9f1e90872556">tadvEvent</a>, tadv_time);
<a name="l02553"></a>02553 
<a name="l02554"></a>02554     <span class="keywordflow">if</span> (inter_time)
<a name="l02555"></a>02555         <a class="code" href="classEventManager.html#a4ddebbfe9a12b95be6fb993ce892dcd3">schedule</a>(<a class="code" href="classIGbE.html#a3de27cfe33d0ae9f9451c767ee40a57d">interEvent</a>, inter_time);
<a name="l02556"></a>02556 
<a name="l02557"></a>02557     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE.html#a41fd0002dbd12f7ab760e7f0a6620953">pktOffset</a>);
<a name="l02558"></a>02558 
<a name="l02559"></a>02559     <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1TxDescCache.html#af22e5d6d660b97db37003ac61ac4ee49">unserialize</a>(cp, <a class="code" href="cprintf_8hh.html#ace22d1c39f2df58e593bc49d1613eca2">csprintf</a>(<span class="stringliteral">&quot;%s.TxDescCache&quot;</span>, section));
<a name="l02560"></a>02560 
<a name="l02561"></a>02561     <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1RxDescCache.html#af22e5d6d660b97db37003ac61ac4ee49">unserialize</a>(cp, <a class="code" href="cprintf_8hh.html#ace22d1c39f2df58e593bc49d1613eca2">csprintf</a>(<span class="stringliteral">&quot;%s.RxDescCache&quot;</span>, section));
<a name="l02562"></a>02562 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4cefab464e72b5dd42c003a0a4341802"></a><!-- doxytag: member="IGbE::write" ref="a4cefab464e72b5dd42c003a0a4341802" args="(PacketPtr pkt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pkt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pure virtual function that the device must implement. Called when a write command is recieved by the port. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pkt</em>&nbsp;</td><td><a class="el" href="classPacket.html">Packet</a> describing this request </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>戻り値:</b></dt><dd>number of ticks it took to complete </dd></dl>

<p><a class="el" href="classPioDevice.html#afe8371668d023bb2516b286e5e399b6f">PioDevice</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00358"></a>00358 {
<a name="l00359"></a>00359     <span class="keywordtype">int</span> bar;
<a name="l00360"></a>00360     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> daddr;
<a name="l00361"></a>00361 
<a name="l00362"></a>00362 
<a name="l00363"></a>00363     <span class="keywordflow">if</span> (!<a class="code" href="classPciDevice.html#ad7fbff3ce8627dac12313ed7ac1ea44a">getBAR</a>(pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>(), bar, daddr))
<a name="l00364"></a>00364         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Invalid PCI memory access to unmapped memory.\n&quot;</span>);
<a name="l00365"></a>00365 
<a name="l00366"></a>00366     <span class="comment">// Only Memory register BAR is allowed</span>
<a name="l00367"></a>00367     assert(bar == 0);
<a name="l00368"></a>00368 
<a name="l00369"></a>00369     <span class="comment">// Only 32bit accesses allowed</span>
<a name="l00370"></a>00370     assert(pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>() == <span class="keyword">sizeof</span>(<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>));
<a name="l00371"></a>00371 
<a name="l00372"></a>00372     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;Wrote device register %#X value %#X\n&quot;</span>,
<a name="l00373"></a>00373             daddr, pkt-&gt;<a class="code" href="classPacket.html#af6ea056c8af82f08af9fd0d857967f9b">get</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;());
<a name="l00374"></a>00374 
<a name="l00375"></a>00375     <span class="comment">//</span>
<a name="l00376"></a>00376     <span class="comment">// Handle write of register here</span>
<a name="l00377"></a>00377     <span class="comment">//</span>
<a name="l00378"></a>00378     <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="namespaceX86ISA.html#ae13bf1250853ff6b72aabe3c79b587cc">val</a> = pkt-&gt;<a class="code" href="classPacket.html#af6ea056c8af82f08af9fd0d857967f9b">get</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;();
<a name="l00379"></a>00379 
<a name="l00380"></a>00380     <a class="code" href="structiGbReg_1_1Regs_1_1RCTL.html">Regs::RCTL</a> oldrctl;
<a name="l00381"></a>00381     <a class="code" href="structiGbReg_1_1Regs_1_1TCTL.html">Regs::TCTL</a> oldtctl;
<a name="l00382"></a>00382 
<a name="l00383"></a>00383     <span class="keywordflow">switch</span> (daddr) {
<a name="l00384"></a>00384       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a20020599b1b178310f589aad60b95d78">REG_CTRL</a>:
<a name="l00385"></a>00385         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#ad24cb7797a2d18bb3fff795e5f78149e">ctrl</a> = val;
<a name="l00386"></a>00386         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#ad24cb7797a2d18bb3fff795e5f78149e">ctrl</a>.tfce())
<a name="l00387"></a>00387             <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;TX Flow control enabled, should implement\n&quot;</span>);
<a name="l00388"></a>00388         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#ad24cb7797a2d18bb3fff795e5f78149e">ctrl</a>.rfce())
<a name="l00389"></a>00389             <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;RX Flow control enabled, should implement\n&quot;</span>);
<a name="l00390"></a>00390         <span class="keywordflow">break</span>;
<a name="l00391"></a>00391       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#aee737b7c1f7c88ebd5f043dd77266f7b">REG_CTRL_EXT</a>:
<a name="l00392"></a>00392         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a340eb700e45b22933041ee4abe33c03b">ctrl_ext</a> = val;
<a name="l00393"></a>00393         <span class="keywordflow">break</span>;
<a name="l00394"></a>00394       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ac1d1c17e03a8c10f26a1f4a2b2f2e8db">REG_STATUS</a>:
<a name="l00395"></a>00395         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a46dafc6aaeb8cc7eed8dbe2c550e5b6e">sts</a> = val;
<a name="l00396"></a>00396         <span class="keywordflow">break</span>;
<a name="l00397"></a>00397       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#af673fadbe51cbe2b7e87961c48ef5180">REG_EECD</a>:
<a name="l00398"></a>00398         <span class="keywordtype">int</span> oldClk;
<a name="l00399"></a>00399         oldClk = <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#afd260aab074918b32c59a399cbfd6211">eecd</a>.sk();
<a name="l00400"></a>00400         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#afd260aab074918b32c59a399cbfd6211">eecd</a> = val;
<a name="l00401"></a>00401         <span class="comment">// See if this is a eeprom access and emulate accordingly</span>
<a name="l00402"></a>00402         <span class="keywordflow">if</span> (!oldClk &amp;&amp; <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#afd260aab074918b32c59a399cbfd6211">eecd</a>.sk()) {
<a name="l00403"></a>00403             <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a8988636da8c2e4f74e8c62d7ad585a61">eeOpBits</a> &lt; 8) {
<a name="l00404"></a>00404                 <a class="code" href="classIGbE.html#aa6c5c24d6b03e9f01ddacc4448214383">eeOpcode</a> = <a class="code" href="classIGbE.html#aa6c5c24d6b03e9f01ddacc4448214383">eeOpcode</a> &lt;&lt; 1 | <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#afd260aab074918b32c59a399cbfd6211">eecd</a>.din();
<a name="l00405"></a>00405                 <a class="code" href="classIGbE.html#a8988636da8c2e4f74e8c62d7ad585a61">eeOpBits</a>++;
<a name="l00406"></a>00406             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#a976342e4e142f8f031f86a8e7ce7a55f">eeAddrBits</a> &lt; 8 &amp;&amp; <a class="code" href="classIGbE.html#aa6c5c24d6b03e9f01ddacc4448214383">eeOpcode</a> == <a class="code" href="namespaceiGbReg.html#a58a0832d5420b8f5624fcb7f29eaa638">EEPROM_READ_OPCODE_SPI</a>) {
<a name="l00407"></a>00407                 <a class="code" href="classIGbE.html#a00d8c4d0c00b1a7fc2a5885222511eee">eeAddr</a> = <a class="code" href="classIGbE.html#a00d8c4d0c00b1a7fc2a5885222511eee">eeAddr</a> &lt;&lt; 1 | <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#afd260aab074918b32c59a399cbfd6211">eecd</a>.din();
<a name="l00408"></a>00408                 <a class="code" href="classIGbE.html#a976342e4e142f8f031f86a8e7ce7a55f">eeAddrBits</a>++;
<a name="l00409"></a>00409             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#ad2c36d4fa51a4befaa7518f6fa3590be">eeDataBits</a> &lt; 16 &amp;&amp; <a class="code" href="classIGbE.html#aa6c5c24d6b03e9f01ddacc4448214383">eeOpcode</a> == <a class="code" href="namespaceiGbReg.html#a58a0832d5420b8f5624fcb7f29eaa638">EEPROM_READ_OPCODE_SPI</a>) {
<a name="l00410"></a>00410                 assert(<a class="code" href="classIGbE.html#a00d8c4d0c00b1a7fc2a5885222511eee">eeAddr</a>&gt;&gt;1 &lt; <a class="code" href="ns__gige_8hh.html#adb0e1024d46141c966014951f5b1e5c8">EEPROM_SIZE</a>);
<a name="l00411"></a>00411                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetEEPROM, <span class="stringliteral">&quot;EEPROM bit read: %d word: %#X\n&quot;</span>,
<a name="l00412"></a>00412                         <a class="code" href="classIGbE.html#a7a8d29882b2cc202e8f3d9f4e758937c">flash</a>[<a class="code" href="classIGbE.html#a00d8c4d0c00b1a7fc2a5885222511eee">eeAddr</a>&gt;&gt;1] &gt;&gt; <a class="code" href="classIGbE.html#ad2c36d4fa51a4befaa7518f6fa3590be">eeDataBits</a> &amp; 0x1,
<a name="l00413"></a>00413                         <a class="code" href="classIGbE.html#a7a8d29882b2cc202e8f3d9f4e758937c">flash</a>[<a class="code" href="classIGbE.html#a00d8c4d0c00b1a7fc2a5885222511eee">eeAddr</a>&gt;&gt;1]);
<a name="l00414"></a>00414                 <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#afd260aab074918b32c59a399cbfd6211">eecd</a>.dout((<a class="code" href="classIGbE.html#a7a8d29882b2cc202e8f3d9f4e758937c">flash</a>[<a class="code" href="classIGbE.html#a00d8c4d0c00b1a7fc2a5885222511eee">eeAddr</a>&gt;&gt;1] &gt;&gt; (15-<a class="code" href="classIGbE.html#ad2c36d4fa51a4befaa7518f6fa3590be">eeDataBits</a>)) &amp; 0x1);
<a name="l00415"></a>00415                 <a class="code" href="classIGbE.html#ad2c36d4fa51a4befaa7518f6fa3590be">eeDataBits</a>++;
<a name="l00416"></a>00416             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#ad2c36d4fa51a4befaa7518f6fa3590be">eeDataBits</a> &lt; 8 &amp;&amp; <a class="code" href="classIGbE.html#aa6c5c24d6b03e9f01ddacc4448214383">eeOpcode</a> == <a class="code" href="namespaceiGbReg.html#a5327659659ed1abd6db6bf00e9b74746">EEPROM_RDSR_OPCODE_SPI</a>) {
<a name="l00417"></a>00417                 <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#afd260aab074918b32c59a399cbfd6211">eecd</a>.dout(0);
<a name="l00418"></a>00418                 <a class="code" href="classIGbE.html#ad2c36d4fa51a4befaa7518f6fa3590be">eeDataBits</a>++;
<a name="l00419"></a>00419             } <span class="keywordflow">else</span>
<a name="l00420"></a>00420                 <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;What&apos;s going on with eeprom interface? opcode:&quot;</span>
<a name="l00421"></a>00421                       <span class="stringliteral">&quot; %#x:%d addr: %#x:%d, data: %d\n&quot;</span>, (<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)<a class="code" href="classIGbE.html#aa6c5c24d6b03e9f01ddacc4448214383">eeOpcode</a>,
<a name="l00422"></a>00422                       (<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)<a class="code" href="classIGbE.html#a8988636da8c2e4f74e8c62d7ad585a61">eeOpBits</a>, (<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)<a class="code" href="classIGbE.html#a00d8c4d0c00b1a7fc2a5885222511eee">eeAddr</a>,
<a name="l00423"></a>00423                       (<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)<a class="code" href="classIGbE.html#a976342e4e142f8f031f86a8e7ce7a55f">eeAddrBits</a>, (<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)<a class="code" href="classIGbE.html#ad2c36d4fa51a4befaa7518f6fa3590be">eeDataBits</a>);
<a name="l00424"></a>00424 
<a name="l00425"></a>00425             <span class="comment">// Reset everything for the next command</span>
<a name="l00426"></a>00426             <span class="keywordflow">if</span> ((<a class="code" href="classIGbE.html#ad2c36d4fa51a4befaa7518f6fa3590be">eeDataBits</a> == 16 &amp;&amp; eeOpcode == <a class="code" href="namespaceiGbReg.html#a58a0832d5420b8f5624fcb7f29eaa638">EEPROM_READ_OPCODE_SPI</a>) ||
<a name="l00427"></a>00427                 (<a class="code" href="classIGbE.html#ad2c36d4fa51a4befaa7518f6fa3590be">eeDataBits</a> == 8 &amp;&amp; eeOpcode == <a class="code" href="namespaceiGbReg.html#a5327659659ed1abd6db6bf00e9b74746">EEPROM_RDSR_OPCODE_SPI</a>)) {
<a name="l00428"></a>00428                 eeOpBits = 0;
<a name="l00429"></a>00429                 eeAddrBits = 0;
<a name="l00430"></a>00430                 <a class="code" href="classIGbE.html#ad2c36d4fa51a4befaa7518f6fa3590be">eeDataBits</a> = 0;
<a name="l00431"></a>00431                 eeOpcode = 0;
<a name="l00432"></a>00432                 eeAddr = 0;
<a name="l00433"></a>00433             }
<a name="l00434"></a>00434 
<a name="l00435"></a>00435             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetEEPROM, <span class="stringliteral">&quot;EEPROM: opcode: %#X:%d addr: %#X:%d\n&quot;</span>,
<a name="l00436"></a>00436                     (<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)eeOpcode, (<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>) eeOpBits,
<a name="l00437"></a>00437                     (<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)eeAddr&gt;&gt;1, (<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)eeAddrBits);
<a name="l00438"></a>00438             <span class="keywordflow">if</span> (eeOpBits == 8 &amp;&amp; !(eeOpcode == <a class="code" href="namespaceiGbReg.html#a58a0832d5420b8f5624fcb7f29eaa638">EEPROM_READ_OPCODE_SPI</a> ||
<a name="l00439"></a>00439                                    eeOpcode == <a class="code" href="namespaceiGbReg.html#a5327659659ed1abd6db6bf00e9b74746">EEPROM_RDSR_OPCODE_SPI</a> ))
<a name="l00440"></a>00440                 <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Unknown eeprom opcode: %#X:%d\n&quot;</span>, (<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)eeOpcode,
<a name="l00441"></a>00441                       (<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)eeOpBits);
<a name="l00442"></a>00442 
<a name="l00443"></a>00443 
<a name="l00444"></a>00444         }
<a name="l00445"></a>00445         <span class="comment">// If driver requests eeprom access, immediately give it to it</span>
<a name="l00446"></a>00446         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#afd260aab074918b32c59a399cbfd6211">eecd</a>.ee_gnt(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#afd260aab074918b32c59a399cbfd6211">eecd</a>.ee_req());
<a name="l00447"></a>00447         <span class="keywordflow">break</span>;
<a name="l00448"></a>00448       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a5dcdf9f0dc751450a4395fbd2657cd7f">REG_EERD</a>:
<a name="l00449"></a>00449         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a010710d5d4aac5016509e879eb9c513c">eerd</a> = val;
<a name="l00450"></a>00450         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a010710d5d4aac5016509e879eb9c513c">eerd</a>.start()) {
<a name="l00451"></a>00451             <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a010710d5d4aac5016509e879eb9c513c">eerd</a>.done(1);
<a name="l00452"></a>00452             assert(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a010710d5d4aac5016509e879eb9c513c">eerd</a>.addr() &lt; <a class="code" href="ns__gige_8hh.html#adb0e1024d46141c966014951f5b1e5c8">EEPROM_SIZE</a>);
<a name="l00453"></a>00453             <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a010710d5d4aac5016509e879eb9c513c">eerd</a>.data(<a class="code" href="classIGbE.html#a7a8d29882b2cc202e8f3d9f4e758937c">flash</a>[<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a010710d5d4aac5016509e879eb9c513c">eerd</a>.addr()]);
<a name="l00454"></a>00454             <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a010710d5d4aac5016509e879eb9c513c">eerd</a>.start(0);
<a name="l00455"></a>00455             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetEEPROM, <span class="stringliteral">&quot;EEPROM: read addr: %#X data %#x\n&quot;</span>,
<a name="l00456"></a>00456                     <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a010710d5d4aac5016509e879eb9c513c">eerd</a>.addr(), <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a010710d5d4aac5016509e879eb9c513c">eerd</a>.data());
<a name="l00457"></a>00457         }
<a name="l00458"></a>00458         <span class="keywordflow">break</span>;
<a name="l00459"></a>00459       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#af363a2b7433ba64df839c6a45beb0e05">REG_MDIC</a>:
<a name="l00460"></a>00460         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a6a320aa86a39572a8fc581e82893943b">mdic</a> = val;
<a name="l00461"></a>00461         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a6a320aa86a39572a8fc581e82893943b">mdic</a>.i())
<a name="l00462"></a>00462             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;No support for interrupt on mdic complete\n&quot;</span>);
<a name="l00463"></a>00463         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a6a320aa86a39572a8fc581e82893943b">mdic</a>.phyadd() != 1)
<a name="l00464"></a>00464             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;No support for reading anything but phy\n&quot;</span>);
<a name="l00465"></a>00465         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;%s phy address %x\n&quot;</span>,
<a name="l00466"></a>00466                 <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a6a320aa86a39572a8fc581e82893943b">mdic</a>.op() == 1 ? <span class="stringliteral">&quot;Writing&quot;</span> : <span class="stringliteral">&quot;Reading&quot;</span>,
<a name="l00467"></a>00467                 <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a6a320aa86a39572a8fc581e82893943b">mdic</a>.regadd());
<a name="l00468"></a>00468         <span class="keywordflow">switch</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a6a320aa86a39572a8fc581e82893943b">mdic</a>.regadd()) {
<a name="l00469"></a>00469           <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#acf8e6d74b74043a94123494f59e5290c">PHY_PSTATUS</a>:
<a name="l00470"></a>00470             <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a6a320aa86a39572a8fc581e82893943b">mdic</a>.data(0x796D); <span class="comment">// link up</span>
<a name="l00471"></a>00471             <span class="keywordflow">break</span>;
<a name="l00472"></a>00472           <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a6d9d5028ca2b10a8ba5f3258c911f416">PHY_PID</a>:
<a name="l00473"></a>00473             <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a6a320aa86a39572a8fc581e82893943b">mdic</a>.data(<a class="code" href="classIGbE.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;phy_pid);
<a name="l00474"></a>00474             <span class="keywordflow">break</span>;
<a name="l00475"></a>00475           <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ae7c860294aafabac0637c277a62f2465">PHY_EPID</a>:
<a name="l00476"></a>00476             <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a6a320aa86a39572a8fc581e82893943b">mdic</a>.data(<a class="code" href="classIGbE.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;phy_epid);
<a name="l00477"></a>00477             <span class="keywordflow">break</span>;
<a name="l00478"></a>00478           <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ae28276ba6b1cfcc81af2fdc6a1653166">PHY_GSTATUS</a>:
<a name="l00479"></a>00479             <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a6a320aa86a39572a8fc581e82893943b">mdic</a>.data(0x7C00);
<a name="l00480"></a>00480             <span class="keywordflow">break</span>;
<a name="l00481"></a>00481           <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#aff7f1306a9de79c36e623d6f5aacdaba">PHY_EPSTATUS</a>:
<a name="l00482"></a>00482             <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a6a320aa86a39572a8fc581e82893943b">mdic</a>.data(0x3000);
<a name="l00483"></a>00483             <span class="keywordflow">break</span>;
<a name="l00484"></a>00484           <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a1333beab814f70ad2fd81e39bcd47878">PHY_AGC</a>:
<a name="l00485"></a>00485             <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a6a320aa86a39572a8fc581e82893943b">mdic</a>.data(0x180); <span class="comment">// some random length</span>
<a name="l00486"></a>00486             <span class="keywordflow">break</span>;
<a name="l00487"></a>00487           <span class="keywordflow">default</span>:
<a name="l00488"></a>00488             <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a6a320aa86a39572a8fc581e82893943b">mdic</a>.data(0);
<a name="l00489"></a>00489         }
<a name="l00490"></a>00490         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a6a320aa86a39572a8fc581e82893943b">mdic</a>.r(1);
<a name="l00491"></a>00491         <span class="keywordflow">break</span>;
<a name="l00492"></a>00492       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a24c53e651278cac8ad2d31eb921e4879">REG_ICR</a>:
<a name="l00493"></a>00493         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;Writing ICR. ICR=%#x IMR=%#x IAM=%#x IAME=%d\n&quot;</span>,
<a name="l00494"></a>00494                 <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a>(), <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a781580e46c65f953e6db9e3c415bece1">imr</a>, <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a69dca9e21a6ea4a040440a0948d8bb57">iam</a>, <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a340eb700e45b22933041ee4abe33c03b">ctrl_ext</a>.iame());
<a name="l00495"></a>00495         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a340eb700e45b22933041ee4abe33c03b">ctrl_ext</a>.iame())
<a name="l00496"></a>00496             <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a781580e46c65f953e6db9e3c415bece1">imr</a> &amp;= ~<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a69dca9e21a6ea4a040440a0948d8bb57">iam</a>;
<a name="l00497"></a>00497         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a> = ~<a class="code" href="bitfield_8hh.html#a4ee0dc0723e11679c52429d5f8e05123">bits</a>(val,30,0) &amp; <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a4d95522ff6e49d7dafec3183c6dc00d4">icr</a>();
<a name="l00498"></a>00498         <a class="code" href="classIGbE.html#a29bfbbe58f3015bfb026c019295a8836">chkInterrupt</a>();
<a name="l00499"></a>00499         <span class="keywordflow">break</span>;
<a name="l00500"></a>00500       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ac96a5f971fc136ea2bcd3aebbff561c4">REG_ITR</a>:
<a name="l00501"></a>00501         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aee7966bfcca2990ac1f75761bbe3a335">itr</a> = val;
<a name="l00502"></a>00502         <span class="keywordflow">break</span>;
<a name="l00503"></a>00503       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a97f7e3206e6b84e95085a5b08b4d937c">REG_ICS</a>:
<a name="l00504"></a>00504         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetIntr, <span class="stringliteral">&quot;Posting interrupt because of ICS write\n&quot;</span>);
<a name="l00505"></a>00505         <a class="code" href="classIGbE.html#a5421bafb8503ffca04cac20d616ae4cc">postInterrupt</a>((<a class="code" href="namespaceiGbReg.html#ab881f740bd3545d8eb42b05253752e9c">IntTypes</a>)val);
<a name="l00506"></a>00506         <span class="keywordflow">break</span>;
<a name="l00507"></a>00507       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#afed6fab07c4f60999dfbe0e3baf80dca">REG_IMS</a>:
<a name="l00508"></a>00508         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a781580e46c65f953e6db9e3c415bece1">imr</a> |= val;
<a name="l00509"></a>00509         <a class="code" href="classIGbE.html#a29bfbbe58f3015bfb026c019295a8836">chkInterrupt</a>();
<a name="l00510"></a>00510         <span class="keywordflow">break</span>;
<a name="l00511"></a>00511       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ab04ba4481c50d2448a63080c40c33a43">REG_IMC</a>:
<a name="l00512"></a>00512         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a781580e46c65f953e6db9e3c415bece1">imr</a> &amp;= ~val;
<a name="l00513"></a>00513         <a class="code" href="classIGbE.html#a29bfbbe58f3015bfb026c019295a8836">chkInterrupt</a>();
<a name="l00514"></a>00514         <span class="keywordflow">break</span>;
<a name="l00515"></a>00515       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a4c6f0da1f8268af5106cbb06a399afc0">REG_IAM</a>:
<a name="l00516"></a>00516         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a69dca9e21a6ea4a040440a0948d8bb57">iam</a> = val;
<a name="l00517"></a>00517         <span class="keywordflow">break</span>;
<a name="l00518"></a>00518       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a9b7b0830333db7d62d77d4baab8628cb">REG_RCTL</a>:
<a name="l00519"></a>00519         oldrctl = <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa8414401e91184e89c0bdc90778de02a">rctl</a>;
<a name="l00520"></a>00520         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa8414401e91184e89c0bdc90778de02a">rctl</a> = val;
<a name="l00521"></a>00521         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa8414401e91184e89c0bdc90778de02a">rctl</a>.rst()) {
<a name="l00522"></a>00522             <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#ad20897c5c8bd47f5d4005989bead0e55">reset</a>();
<a name="l00523"></a>00523             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;RXS: Got RESET!\n&quot;</span>);
<a name="l00524"></a>00524             <a class="code" href="classIGbE.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#ac8bb3912a3ce86b15842e79d0b421204">clear</a>();
<a name="l00525"></a>00525             <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa8414401e91184e89c0bdc90778de02a">rctl</a>.rst(0);
<a name="l00526"></a>00526         }
<a name="l00527"></a>00527         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa8414401e91184e89c0bdc90778de02a">rctl</a>.en())
<a name="l00528"></a>00528             <a class="code" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">rxTick</a> = <span class="keyword">true</span>;
<a name="l00529"></a>00529         <a class="code" href="classIGbE.html#a9506deecc41eb6290f9b9b8662cc33c2">restartClock</a>();
<a name="l00530"></a>00530         <span class="keywordflow">break</span>;
<a name="l00531"></a>00531       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#aa36baad1c52cf734cd536d65a54602a8">REG_FCTTV</a>:
<a name="l00532"></a>00532         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#ac7b7c4f073de3cf7d05beb155a7d98ef">fcttv</a> = val;
<a name="l00533"></a>00533         <span class="keywordflow">break</span>;
<a name="l00534"></a>00534       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a821ebe9f73862e5f08d712f01cfd626d">REG_TCTL</a>:
<a name="l00535"></a>00535         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#ac3a1073a4a8054c3eb8bc2b66099bd16">tctl</a> = val;
<a name="l00536"></a>00536         oldtctl = <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#ac3a1073a4a8054c3eb8bc2b66099bd16">tctl</a>;
<a name="l00537"></a>00537         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#ac3a1073a4a8054c3eb8bc2b66099bd16">tctl</a> = val;
<a name="l00538"></a>00538         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#ac3a1073a4a8054c3eb8bc2b66099bd16">tctl</a>.en())
<a name="l00539"></a>00539             <a class="code" href="classIGbE.html#a0f33aec9eb84199e089e1917f7df501d">txTick</a> = <span class="keyword">true</span>;
<a name="l00540"></a>00540         <a class="code" href="classIGbE.html#a9506deecc41eb6290f9b9b8662cc33c2">restartClock</a>();
<a name="l00541"></a>00541         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#ac3a1073a4a8054c3eb8bc2b66099bd16">tctl</a>.en() &amp;&amp; !oldtctl.en()) {
<a name="l00542"></a>00542             <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#ad20897c5c8bd47f5d4005989bead0e55">reset</a>();
<a name="l00543"></a>00543         }
<a name="l00544"></a>00544         <span class="keywordflow">break</span>;
<a name="l00545"></a>00545       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a095339ea1d33453b7754d407c6e6550c">REG_PBA</a>:
<a name="l00546"></a>00546         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a1f570b5b5eb4a9598ad0c378c05de391">pba</a>.rxa(val);
<a name="l00547"></a>00547         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a1f570b5b5eb4a9598ad0c378c05de391">pba</a>.txa(64 - <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a1f570b5b5eb4a9598ad0c378c05de391">pba</a>.rxa());
<a name="l00548"></a>00548         <span class="keywordflow">break</span>;
<a name="l00549"></a>00549       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ae38d313c67812ad08bb3cd17222ab977">REG_WUC</a>:
<a name="l00550"></a>00550       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a15c1307f1e65e489f3ca5fb75212d71d">REG_LEDCTL</a>:
<a name="l00551"></a>00551       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a8a594fcc2df76c0809c21dcb8c2968e4">REG_FCAL</a>:
<a name="l00552"></a>00552       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a27cbb3863547fdf28582267066bb6f8f">REG_FCAH</a>:
<a name="l00553"></a>00553       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ab74980c02376c3fb79873d6bc34a15df">REG_FCT</a>:
<a name="l00554"></a>00554       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a1fa2f6b31ba0905012d75a5941a64966">REG_VET</a>:
<a name="l00555"></a>00555       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a1c508b3181f153a1e8e98a6866906cd8">REG_AIFS</a>:
<a name="l00556"></a>00556       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a533e7ea17bb2e80603d2da871d8ee499">REG_TIPG</a>:
<a name="l00557"></a>00557         ; <span class="comment">// We don&apos;t care, so don&apos;t store anything</span>
<a name="l00558"></a>00558         <span class="keywordflow">break</span>;
<a name="l00559"></a>00559       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#aebdef83062f3325649e7ef6bf35b4e9d">REG_IVAR0</a>:
<a name="l00560"></a>00560         <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;Writing to IVAR0, ignoring...\n&quot;</span>);
<a name="l00561"></a>00561         <span class="keywordflow">break</span>;
<a name="l00562"></a>00562       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a101890cb2355a85cf060a07aeef60d89">REG_FCRTL</a>:
<a name="l00563"></a>00563         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#acd48a9a9d3993efb941ae02b54b46d1c">fcrtl</a> = val;
<a name="l00564"></a>00564         <span class="keywordflow">break</span>;
<a name="l00565"></a>00565       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a9035848a36c2d1c1dabebf2c06e48ec4">REG_FCRTH</a>:
<a name="l00566"></a>00566         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a793d2b523c8c79107885793b8edd5e48">fcrth</a> = val;
<a name="l00567"></a>00567         <span class="keywordflow">break</span>;
<a name="l00568"></a>00568       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a4e047b0e945c6d8b534316c82c521bd1">REG_RDBAL</a>:
<a name="l00569"></a>00569         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a688fc8a72222faa75cd03f727b684adc">rdba</a>.rdbal( val &amp; ~<a class="code" href="namespaceArmISA.html#a9534dbda5e7db9881c7955c6e08cfdc0">mask</a>(4));
<a name="l00570"></a>00570         <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#aa55a03ef5e0e85dfa7860656c57c649a">areaChanged</a>();
<a name="l00571"></a>00571         <span class="keywordflow">break</span>;
<a name="l00572"></a>00572       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ac8a837e0dbaf3e028db7609cf2318f10">REG_RDBAH</a>:
<a name="l00573"></a>00573         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a688fc8a72222faa75cd03f727b684adc">rdba</a>.rdbah(val);
<a name="l00574"></a>00574         <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#aa55a03ef5e0e85dfa7860656c57c649a">areaChanged</a>();
<a name="l00575"></a>00575         <span class="keywordflow">break</span>;
<a name="l00576"></a>00576       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#adef77c18ff90a18f8c6fe73f0e61f7fa">REG_RDLEN</a>:
<a name="l00577"></a>00577         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa4a69b303cfc97591de35a8aa05f472f">rdlen</a> = val &amp; ~<a class="code" href="namespaceArmISA.html#a9534dbda5e7db9881c7955c6e08cfdc0">mask</a>(7);
<a name="l00578"></a>00578         <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#aa55a03ef5e0e85dfa7860656c57c649a">areaChanged</a>();
<a name="l00579"></a>00579         <span class="keywordflow">break</span>;
<a name="l00580"></a>00580       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ab0639bae5d2694cf8a8f9aaaba9d4977">REG_SRRCTL</a>:
<a name="l00581"></a>00581         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7fbb07c843893919943594329481935d">srrctl</a> = val;
<a name="l00582"></a>00582         <span class="keywordflow">break</span>;
<a name="l00583"></a>00583       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a281c8814cfaf1f24aba3ec4e47843b6e">REG_RDH</a>:
<a name="l00584"></a>00584         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a6b6133f358acecf01c1b8f5df50bca79">rdh</a> = val;
<a name="l00585"></a>00585         <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#aa55a03ef5e0e85dfa7860656c57c649a">areaChanged</a>();
<a name="l00586"></a>00586         <span class="keywordflow">break</span>;
<a name="l00587"></a>00587       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ad7ea3f0ced376d107086bfab67befbc8">REG_RDT</a>:
<a name="l00588"></a>00588         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7518b9a796cfdbb12e4ad473349ffb80">rdt</a> = val;
<a name="l00589"></a>00589         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;RXS: RDT Updated.\n&quot;</span>);
<a name="l00590"></a>00590         <span class="keywordflow">if</span> (<a class="code" href="classDrainable.html#a5c95358f0e9355bcc3979baf3fb7307f">getDrainState</a>() == <a class="code" href="classDrainable.html#a5d74787dedbc4e11c1ab15bf487e61f8a2f5f2c4a8c4f4f0519d503dcdfbf55cb">Drainable::Running</a>) {
<a name="l00591"></a>00591             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;RXS: RDT Fetching Descriptors!\n&quot;</span>);
<a name="l00592"></a>00592             <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#a69c2eb368f23448d28ccb10dfa67c250">fetchDescriptors</a>();
<a name="l00593"></a>00593         } <span class="keywordflow">else</span> {
<a name="l00594"></a>00594             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;RXS: RDT NOT Fetching Desc b/c draining!\n&quot;</span>);
<a name="l00595"></a>00595         }
<a name="l00596"></a>00596         <span class="keywordflow">break</span>;
<a name="l00597"></a>00597       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a345db3e807c4b47229f85d58ba1836d8">REG_RDTR</a>:
<a name="l00598"></a>00598         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a0229a0715b90bc69aeb553c6cdbd05ab">rdtr</a> = val;
<a name="l00599"></a>00599         <span class="keywordflow">break</span>;
<a name="l00600"></a>00600       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ae1605063bdee3a13f9e9eda5280a7d74">REG_RADV</a>:
<a name="l00601"></a>00601         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a3eaefd7f09f27c136a3a225f7645ec65">radv</a> = val;
<a name="l00602"></a>00602         <span class="keywordflow">break</span>;
<a name="l00603"></a>00603       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a03190c72ce8dd147689b7e671fbb3e70">REG_RXDCTL</a>:
<a name="l00604"></a>00604         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a55fcbfb49bf2a178b26929cc5bdc1eab">rxdctl</a> = val;
<a name="l00605"></a>00605         <span class="keywordflow">break</span>;
<a name="l00606"></a>00606       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ae124cd934d893dedf0c92172b4899701">REG_TDBAL</a>:
<a name="l00607"></a>00607         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7f50fa230d52f1e8a3d501722e3f2bf8">tdba</a>.tdbal( val &amp; ~<a class="code" href="namespaceArmISA.html#a9534dbda5e7db9881c7955c6e08cfdc0">mask</a>(4));
<a name="l00608"></a>00608         <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#aa55a03ef5e0e85dfa7860656c57c649a">areaChanged</a>();
<a name="l00609"></a>00609         <span class="keywordflow">break</span>;
<a name="l00610"></a>00610       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a7042bc647b8afdb47eee2760c44fa592">REG_TDBAH</a>:
<a name="l00611"></a>00611         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7f50fa230d52f1e8a3d501722e3f2bf8">tdba</a>.tdbah(val);
<a name="l00612"></a>00612         <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#aa55a03ef5e0e85dfa7860656c57c649a">areaChanged</a>();
<a name="l00613"></a>00613         <span class="keywordflow">break</span>;
<a name="l00614"></a>00614       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ae885006ab462d77f5678312d6181c978">REG_TDLEN</a>:
<a name="l00615"></a>00615         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#abfbe0450e80a5b975712629e8635d42b">tdlen</a> = val &amp; ~<a class="code" href="namespaceArmISA.html#a9534dbda5e7db9881c7955c6e08cfdc0">mask</a>(7);
<a name="l00616"></a>00616         <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#aa55a03ef5e0e85dfa7860656c57c649a">areaChanged</a>();
<a name="l00617"></a>00617         <span class="keywordflow">break</span>;
<a name="l00618"></a>00618       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#aff7b48a39ed90fc8943a7b7042c9e996">REG_TDH</a>:
<a name="l00619"></a>00619         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a001949adaeea4f9ae509aaeb09d87056">tdh</a> = val;
<a name="l00620"></a>00620         <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#aa55a03ef5e0e85dfa7860656c57c649a">areaChanged</a>();
<a name="l00621"></a>00621         <span class="keywordflow">break</span>;
<a name="l00622"></a>00622       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#adcec938fa39b4e7ff85d6b1622ccd3a5">REG_TXDCA_CTL</a>:
<a name="l00623"></a>00623         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#ae83850170fba59b26266c0de1fde948e">txdca_ctl</a> = val;
<a name="l00624"></a>00624         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#ae83850170fba59b26266c0de1fde948e">txdca_ctl</a>.enabled())
<a name="l00625"></a>00625             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;No support for DCA\n&quot;</span>);
<a name="l00626"></a>00626         <span class="keywordflow">break</span>;
<a name="l00627"></a>00627       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ac15be2850d41581ca8530f32a90e5b0f">REG_TDT</a>:
<a name="l00628"></a>00628         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a928dc76d0b5b003d9336bee496f78089">tdt</a> = val;
<a name="l00629"></a>00629         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;TXS: TX Tail pointer updated\n&quot;</span>);
<a name="l00630"></a>00630         <span class="keywordflow">if</span> (<a class="code" href="classDrainable.html#a5c95358f0e9355bcc3979baf3fb7307f">getDrainState</a>() == <a class="code" href="classDrainable.html#a5d74787dedbc4e11c1ab15bf487e61f8a2f5f2c4a8c4f4f0519d503dcdfbf55cb">Drainable::Running</a>) {
<a name="l00631"></a>00631             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;TXS: TDT Fetching Descriptors!\n&quot;</span>);
<a name="l00632"></a>00632             <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#a69c2eb368f23448d28ccb10dfa67c250">fetchDescriptors</a>();
<a name="l00633"></a>00633         } <span class="keywordflow">else</span> {
<a name="l00634"></a>00634             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;TXS: TDT NOT Fetching Desc b/c draining!\n&quot;</span>);
<a name="l00635"></a>00635         }
<a name="l00636"></a>00636         <span class="keywordflow">break</span>;
<a name="l00637"></a>00637       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a871dec634edf3b35037939946579d39b">REG_TIDV</a>:
<a name="l00638"></a>00638         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a5a6fc226edb656c090d075c1064fe0d5">tidv</a> = val;
<a name="l00639"></a>00639         <span class="keywordflow">break</span>;
<a name="l00640"></a>00640       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a236e025cbd514be3c492cb45614ba3ae">REG_TXDCTL</a>:
<a name="l00641"></a>00641         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a3d8c32f0d48138f48863430f0c591850">txdctl</a> = val;
<a name="l00642"></a>00642         <span class="keywordflow">break</span>;
<a name="l00643"></a>00643       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#abebfa86c43f0b0a894e7bedc2f329b59">REG_TADV</a>:
<a name="l00644"></a>00644         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a900770ffadce14bf9ff68603b7e4b9ae">tadv</a> = val;
<a name="l00645"></a>00645         <span class="keywordflow">break</span>;
<a name="l00646"></a>00646       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ab8f86fd995c08da473a1d40511517901">REG_TDWBAL</a>:
<a name="l00647"></a>00647         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7d4a53842dc287993e93799f84b676ea">tdwba</a> &amp;= ~<a class="code" href="namespaceArmISA.html#a9534dbda5e7db9881c7955c6e08cfdc0">mask</a>(32);
<a name="l00648"></a>00648         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7d4a53842dc287993e93799f84b676ea">tdwba</a> |= val;
<a name="l00649"></a>00649         <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1TxDescCache.html#a10c4245eaf8149b42c17bb6aa4a7c5eb">completionWriteback</a>(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7d4a53842dc287993e93799f84b676ea">tdwba</a> &amp; ~<a class="code" href="namespaceArmISA.html#a9534dbda5e7db9881c7955c6e08cfdc0">mask</a>(1),
<a name="l00650"></a>00650                                         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7d4a53842dc287993e93799f84b676ea">tdwba</a> &amp; <a class="code" href="namespaceArmISA.html#a9534dbda5e7db9881c7955c6e08cfdc0">mask</a>(1));
<a name="l00651"></a>00651         <span class="keywordflow">break</span>;
<a name="l00652"></a>00652       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a050b53dacdbc8075f739b04caf5bfd6c">REG_TDWBAH</a>:
<a name="l00653"></a>00653         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7d4a53842dc287993e93799f84b676ea">tdwba</a> &amp;= <a class="code" href="namespaceArmISA.html#a9534dbda5e7db9881c7955c6e08cfdc0">mask</a>(32);
<a name="l00654"></a>00654         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7d4a53842dc287993e93799f84b676ea">tdwba</a> |= (uint64_t)val &lt;&lt; 32;
<a name="l00655"></a>00655         <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1TxDescCache.html#a10c4245eaf8149b42c17bb6aa4a7c5eb">completionWriteback</a>(<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7d4a53842dc287993e93799f84b676ea">tdwba</a> &amp; ~<a class="code" href="namespaceArmISA.html#a9534dbda5e7db9881c7955c6e08cfdc0">mask</a>(1),
<a name="l00656"></a>00656                                         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7d4a53842dc287993e93799f84b676ea">tdwba</a> &amp; <a class="code" href="namespaceArmISA.html#a9534dbda5e7db9881c7955c6e08cfdc0">mask</a>(1));
<a name="l00657"></a>00657         <span class="keywordflow">break</span>;
<a name="l00658"></a>00658       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ac4ca58b53d0899d9e2cb3b6a01172029">REG_RXCSUM</a>:
<a name="l00659"></a>00659         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a66c393d9c38b0a6666d993ad7462a6ba">rxcsum</a> = val;
<a name="l00660"></a>00660         <span class="keywordflow">break</span>;
<a name="l00661"></a>00661       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ac694a64b5dc3ed66f0a198e11c6dd561">REG_RLPML</a>:
<a name="l00662"></a>00662         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a5ec909db587986b48557c064d55d096f">rlpml</a> = val;
<a name="l00663"></a>00663         <span class="keywordflow">break</span>;
<a name="l00664"></a>00664       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a55fd6fefe9e6e544fbf5dd7d80dd6c42">REG_RFCTL</a>:
<a name="l00665"></a>00665         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a57fcf2d77a3ebd0de133c82600a8f77f">rfctl</a> = val;
<a name="l00666"></a>00666         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a57fcf2d77a3ebd0de133c82600a8f77f">rfctl</a>.exsten())
<a name="l00667"></a>00667             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Extended RX descriptors not implemented\n&quot;</span>);
<a name="l00668"></a>00668         <span class="keywordflow">break</span>;
<a name="l00669"></a>00669       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#add1b433d6b59293827d8b1243c113ff7">REG_MANC</a>:
<a name="l00670"></a>00670         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a6443796fda5ce30a8d6349e509a8cb5a">manc</a> = val;
<a name="l00671"></a>00671         <span class="keywordflow">break</span>;
<a name="l00672"></a>00672       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a8ebb03ad73bb087733a50473e2aa812f">REG_SWSM</a>:
<a name="l00673"></a>00673         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a225bc3356ed3b52588f8cb4d718f23ff">swsm</a> = val;
<a name="l00674"></a>00674         <span class="keywordflow">if</span> (<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#af10ef7bffcad5d95fbd808b0581339d4">fwsm</a>.eep_fw_semaphore())
<a name="l00675"></a>00675             <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a225bc3356ed3b52588f8cb4d718f23ff">swsm</a>.swesmbi(0);
<a name="l00676"></a>00676         <span class="keywordflow">break</span>;
<a name="l00677"></a>00677       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a4ee74c9ae8abd7bb42d2d7c6a5d4ed1f">REG_SWFWSYNC</a>:
<a name="l00678"></a>00678         <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a43e2669b3871b70ea444bee307339af4">sw_fw_sync</a> = val;
<a name="l00679"></a>00679         <span class="keywordflow">break</span>;
<a name="l00680"></a>00680       <span class="keywordflow">default</span>:
<a name="l00681"></a>00681         <span class="keywordflow">if</span> (!<a class="code" href="i8254xGBe_8cc.html#a54b3194b995585806f7a762bfcac25a9">IN_RANGE</a>(daddr, <a class="code" href="namespaceiGbReg.html#a36fae451371a57470da74bf7a9123d80">REG_VFTA</a>, <a class="code" href="namespaceiGbReg.html#a9678c7045c653e90c096e22638cd9b56">VLAN_FILTER_TABLE_SIZE</a>*4) &amp;&amp;
<a name="l00682"></a>00682             !<a class="code" href="i8254xGBe_8cc.html#a54b3194b995585806f7a762bfcac25a9">IN_RANGE</a>(daddr, <a class="code" href="namespaceiGbReg.html#a9e6308c54a1c811135394041894921da">REG_RAL</a>, <a class="code" href="namespaceiGbReg.html#ae95e1095a77a684508db779465f21ac2">RCV_ADDRESS_TABLE_SIZE</a>*8) &amp;&amp;
<a name="l00683"></a>00683             !<a class="code" href="i8254xGBe_8cc.html#a54b3194b995585806f7a762bfcac25a9">IN_RANGE</a>(daddr, <a class="code" href="namespaceiGbReg.html#a9180502721e1193be91b79b98c3f40cf">REG_MTA</a>, <a class="code" href="namespaceiGbReg.html#add8f1abdb23d74212253f11efe13a39e">MULTICAST_TABLE_SIZE</a>*4))
<a name="l00684"></a>00684             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Write request to unknown register number: %#x\n&quot;</span>, daddr);
<a name="l00685"></a>00685     };
<a name="l00686"></a>00686 
<a name="l00687"></a>00687     pkt-&gt;<a class="code" href="classPacket.html#ad664e704f09d6bb5c116573721034ebd">makeAtomicResponse</a>();
<a name="l00688"></a>00688     <span class="keywordflow">return</span> <a class="code" href="classPciDevice.html#ac8e969635a78ab9ab123904ccca434cc">pioDelay</a>;
<a name="l00689"></a>00689 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aac7b61a78530109bfa20923a53064bbf"></a><!-- doxytag: member="IGbE::writeConfig" ref="aac7b61a78530109bfa20923a53064bbf" args="(PacketPtr pkt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> writeConfig </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pkt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Write to the PCI config space data that is stored locally. This may be overridden by the device but at some point it will eventually call this for normal operations that it does not need to override. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pkt</em>&nbsp;</td><td>packet containing the write the offset into config space </td></tr>
  </table>
  </dd>
</dl>

<p><a class="el" href="classPciDevice.html#aac7b61a78530109bfa20923a53064bbf">PciDevice</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00151"></a>00151 {
<a name="l00152"></a>00152     <span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a87b7a740701cddafb930a9460e9f4eba">offset</a> = pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>() &amp; <a class="code" href="pcireg_8h.html#add6c868d54860748ec4f1ecd9b53fb90">PCI_CONFIG_SIZE</a>;
<a name="l00153"></a>00153     <span class="keywordflow">if</span> (offset &lt; <a class="code" href="pcireg_8h.html#abb02d00821657dc348f9c78eab5f1995">PCI_DEVICE_SPECIFIC</a>)
<a name="l00154"></a>00154         <a class="code" href="classIGbE.html#aac7b61a78530109bfa20923a53064bbf">PciDevice::writeConfig</a>(pkt);
<a name="l00155"></a>00155     <span class="keywordflow">else</span>
<a name="l00156"></a>00156         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Device specific PCI config space not implemented.\n&quot;</span>);
<a name="l00157"></a>00157 
<a name="l00158"></a>00158     <span class="comment">//</span>
<a name="l00159"></a>00159     <span class="comment">// Some work may need to be done here based for the pci COMMAND bits.</span>
<a name="l00160"></a>00160     <span class="comment">//</span>
<a name="l00161"></a>00161 
<a name="l00162"></a>00162     <span class="keywordflow">return</span> <a class="code" href="classPciDevice.html#a0448e6a6b68c3fa53f768cd05758f1f2">configDelay</a>;
<a name="l00163"></a>00163 }
</pre></div></p>

</div>
</div>
<hr/><h2>フレンドと関連する関数</h2>
<a class="anchor" id="a5117ecf4d368d174c17a9304676a45a5"></a><!-- doxytag: member="IGbE::RxDescCache" ref="a5117ecf4d368d174c17a9304676a45a5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classIGbE_1_1RxDescCache.html">RxDescCache</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab83c1d837daa8ccbbd651c133208ced0"></a><!-- doxytag: member="IGbE::TxDescCache" ref="ab83c1d837daa8ccbbd651c133208ced0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classIGbE_1_1TxDescCache.html">TxDescCache</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="ad3738d2e08f4ea21f1c3721f2492c9c2"></a><!-- doxytag: member="IGbE::cpa" ref="ad3738d2e08f4ea21f1c3721f2492c9c2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCPA.html">CPA</a>* <a class="el" href="classIGbE.html#ad3738d2e08f4ea21f1c3721f2492c9c2">cpa</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a329b71fb934a93312ca0aacbf5a3f982"></a><!-- doxytag: member="IGbE::drainManager" ref="a329b71fb934a93312ca0aacbf5a3f982" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDrainManager.html">DrainManager</a>* <a class="el" href="classIGbE.html#a329b71fb934a93312ca0aacbf5a3f982">drainManager</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a00d8c4d0c00b1a7fc2a5885222511eee"></a><!-- doxytag: member="IGbE::eeAddr" ref="a00d8c4d0c00b1a7fc2a5885222511eee" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="classIGbE.html#a00d8c4d0c00b1a7fc2a5885222511eee">eeAddr</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a976342e4e142f8f031f86a8e7ce7a55f"></a><!-- doxytag: member="IGbE::eeAddrBits" ref="a976342e4e142f8f031f86a8e7ce7a55f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classIGbE.html#a976342e4e142f8f031f86a8e7ce7a55f">eeAddrBits</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad2c36d4fa51a4befaa7518f6fa3590be"></a><!-- doxytag: member="IGbE::eeDataBits" ref="ad2c36d4fa51a4befaa7518f6fa3590be" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classIGbE.html#ad2c36d4fa51a4befaa7518f6fa3590be">eeDataBits</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8988636da8c2e4f74e8c62d7ad585a61"></a><!-- doxytag: member="IGbE::eeOpBits" ref="a8988636da8c2e4f74e8c62d7ad585a61" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classIGbE.html#a8988636da8c2e4f74e8c62d7ad585a61">eeOpBits</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa6c5c24d6b03e9f01ddacc4448214383"></a><!-- doxytag: member="IGbE::eeOpcode" ref="aa6c5c24d6b03e9f01ddacc4448214383" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="classIGbE.html#aa6c5c24d6b03e9f01ddacc4448214383">eeOpcode</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4c7684471cc2bc72bc660ea06ca78c91"></a><!-- doxytag: member="IGbE::etherInt" ref="a4c7684471cc2bc72bc660ea06ca78c91" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classIGbEInt.html">IGbEInt</a>* <a class="el" href="classIGbE.html#a4c7684471cc2bc72bc660ea06ca78c91">etherInt</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae404928093bd61ac24cd54406a98046e"></a><!-- doxytag: member="IGbE::fetchCompDelay" ref="ae404928093bd61ac24cd54406a98046e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="el" href="classIGbE.html#ae404928093bd61ac24cd54406a98046e">fetchCompDelay</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa17c871ae2de13303ab07a8e8b571965"></a><!-- doxytag: member="IGbE::fetchDelay" ref="aa17c871ae2de13303ab07a8e8b571965" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="el" href="classIGbE.html#aa17c871ae2de13303ab07a8e8b571965">fetchDelay</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a7a8d29882b2cc202e8f3d9f4e758937c"></a><!-- doxytag: member="IGbE::flash" ref="a7a8d29882b2cc202e8f3d9f4e758937c" args="[iGbReg::EEPROM_SIZE]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t <a class="el" href="classIGbE.html#a7a8d29882b2cc202e8f3d9f4e758937c">flash</a>[<a class="el" href="namespaceiGbReg.html#adb0e1024d46141c966014951f5b1e5c8">iGbReg::EEPROM_SIZE</a>]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3de27cfe33d0ae9f9451c767ee40a57d"></a><!-- doxytag: member="IGbE::interEvent" ref="a3de27cfe33d0ae9f9451c767ee40a57d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt;<a class="el" href="classIGbE.html">IGbE</a>, &amp;IGbE::delayIntEvent&gt; <a class="el" href="classIGbE.html#a3de27cfe33d0ae9f9451c767ee40a57d">interEvent</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="adad52012a21d414368149556f2cc909b"></a><!-- doxytag: member="IGbE::lastInterrupt" ref="adad52012a21d414368149556f2cc909b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="el" href="classIGbE.html#adad52012a21d414368149556f2cc909b">lastInterrupt</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab70964077d0446a01beedcfb7b9f64da"></a><!-- doxytag: member="IGbE::macAddr" ref="ab70964077d0446a01beedcfb7b9f64da" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a41fd0002dbd12f7ab760e7f0a6620953"></a><!-- doxytag: member="IGbE::pktOffset" ref="a41fd0002dbd12f7ab760e7f0a6620953" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classIGbE.html#a41fd0002dbd12f7ab760e7f0a6620953">pktOffset</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a30a3a2a8194ad851683c915beca8a172"></a><!-- doxytag: member="IGbE::radvEvent" ref="a30a3a2a8194ad851683c915beca8a172" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt;<a class="el" href="classIGbE.html">IGbE</a>, &amp;IGbE::radvProcess&gt; <a class="el" href="classIGbE.html#a30a3a2a8194ad851683c915beca8a172">radvEvent</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a72b4c60f46bdb4b88427dec167aaca80"></a><!-- doxytag: member="IGbE::rdtrEvent" ref="a72b4c60f46bdb4b88427dec167aaca80" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt;<a class="el" href="classIGbE.html">IGbE</a>, &amp;IGbE::rdtrProcess&gt; <a class="el" href="classIGbE.html#a72b4c60f46bdb4b88427dec167aaca80">rdtrEvent</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aca82e9e23b43d692ee2d79799761533f"></a><!-- doxytag: member="IGbE::regs" ref="aca82e9e23b43d692ee2d79799761533f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structiGbReg_1_1Regs.html">iGbReg::Regs</a> <a class="el" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0e260069d3ff6994b7ab0d843388c5d5"></a><!-- doxytag: member="IGbE::rxDescCache" ref="a0e260069d3ff6994b7ab0d843388c5d5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classIGbE_1_1RxDescCache.html">RxDescCache</a> <a class="el" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa8031223419e9d8480a99fae1f2de778"></a><!-- doxytag: member="IGbE::rxDmaPacket" ref="aa8031223419e9d8480a99fae1f2de778" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classIGbE.html#aa8031223419e9d8480a99fae1f2de778">rxDmaPacket</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a45c9c6a3665bcd91e57ff35aa9089fa7"></a><!-- doxytag: member="IGbE::rxFifo" ref="a45c9c6a3665bcd91e57ff35aa9089fa7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPacketFifo.html">PacketFifo</a> <a class="el" href="classIGbE.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3dd1ff20ea750ba74f718ba7e7c210fe"></a><!-- doxytag: member="IGbE::rxTick" ref="a3dd1ff20ea750ba74f718ba7e7c210fe" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">rxTick</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a94231b5b6ec824655f1e33a2481009fb"></a><!-- doxytag: member="IGbE::rxWriteDelay" ref="a94231b5b6ec824655f1e33a2481009fb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="el" href="classIGbE.html#a94231b5b6ec824655f1e33a2481009fb">rxWriteDelay</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a52af2948f0bdbd05624c9f1e90872556"></a><!-- doxytag: member="IGbE::tadvEvent" ref="a52af2948f0bdbd05624c9f1e90872556" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt;<a class="el" href="classIGbE.html">IGbE</a>, &amp;IGbE::tadvProcess&gt; <a class="el" href="classIGbE.html#a52af2948f0bdbd05624c9f1e90872556">tadvEvent</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a13b02e56360d63f349a514edb321bd9c"></a><!-- doxytag: member="IGbE::tickEvent" ref="a13b02e56360d63f349a514edb321bd9c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt;<a class="el" href="classIGbE.html">IGbE</a>, &amp;IGbE::tick&gt; <a class="el" href="classIGbE.html#a13b02e56360d63f349a514edb321bd9c">tickEvent</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a91fce863693eb4c56a924639620d77cf"></a><!-- doxytag: member="IGbE::tidvEvent" ref="a91fce863693eb4c56a924639620d77cf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt;<a class="el" href="classIGbE.html">IGbE</a>, &amp;IGbE::tidvProcess&gt; <a class="el" href="classIGbE.html#a91fce863693eb4c56a924639620d77cf">tidvEvent</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8ab7bc15342abe2e4fe9d9bde951441b"></a><!-- doxytag: member="IGbE::txDescCache" ref="a8ab7bc15342abe2e4fe9d9bde951441b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classIGbE_1_1TxDescCache.html">TxDescCache</a> <a class="el" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae699c324753236e0a59aa2465920eb46"></a><!-- doxytag: member="IGbE::txFifo" ref="ae699c324753236e0a59aa2465920eb46" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPacketFifo.html">PacketFifo</a> <a class="el" href="classIGbE.html#ae699c324753236e0a59aa2465920eb46">txFifo</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a99be71cc5dbbb45b77d1d66d1bedf454"></a><!-- doxytag: member="IGbE::txFifoTick" ref="a99be71cc5dbbb45b77d1d66d1bedf454" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classIGbE.html#a99be71cc5dbbb45b77d1d66d1bedf454">txFifoTick</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8d22e1a154942ff0d4ab9048e7e844bb"></a><!-- doxytag: member="IGbE::txPacket" ref="a8d22e1a154942ff0d4ab9048e7e844bb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">EthPacketPtr</a> <a class="el" href="classIGbE.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2e204efac3d8a0a09aef20570520baac"></a><!-- doxytag: member="IGbE::txReadDelay" ref="a2e204efac3d8a0a09aef20570520baac" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="el" href="classIGbE.html#a2e204efac3d8a0a09aef20570520baac">txReadDelay</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0f33aec9eb84199e089e1917f7df501d"></a><!-- doxytag: member="IGbE::txTick" ref="a0f33aec9eb84199e089e1917f7df501d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classIGbE.html#a0f33aec9eb84199e089e1917f7df501d">txTick</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab0f05d6ecbedd2a670abfe34bc8112e1"></a><!-- doxytag: member="IGbE::wbCompDelay" ref="ab0f05d6ecbedd2a670abfe34bc8112e1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="el" href="classIGbE.html#ab0f05d6ecbedd2a670abfe34bc8112e1">wbCompDelay</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a899afa4a59ed0cf8334061645dc16c53"></a><!-- doxytag: member="IGbE::wbDelay" ref="a899afa4a59ed0cf8334061645dc16c53" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="el" href="classIGbE.html#a899afa4a59ed0cf8334061645dc16c53">wbDelay</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>dev/<a class="el" href="i8254xGBe_8hh_source.html">i8254xGBe.hh</a></li>
<li>dev/<a class="el" href="i8254xGBe_8cc.html">i8254xGBe.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
