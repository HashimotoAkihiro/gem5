<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス TournamentBP</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>クラス TournamentBP</h1><!-- doxytag: class="TournamentBP" --><!-- doxytag: inherits="BPredUnit" -->
<p><code>#include &lt;<a class="el" href="tournament_8hh_source.html">tournament.hh</a>&gt;</code></p>
<div class="dynheader">
TournamentBPに対する継承グラフ</div>
<div class="dynsection">
 <div class="center">
  <img src="classTournamentBP.gif" usemap="#TournamentBP_map" alt=""/>
  <map id="TournamentBP_map" name="TournamentBP_map">
<area href="classBPredUnit.html" alt="BPredUnit" shape="rect" coords="105,112,200,136"/>
<area href="classSimObject.html" alt="SimObject" shape="rect" coords="105,56,200,80"/>
<area href="classEventManager.html" alt="EventManager" shape="rect" coords="0,0,95,24"/>
<area href="classSerializable.html" alt="Serializable" shape="rect" coords="105,0,200,24"/>
<area href="classDrainable.html" alt="Drainable" shape="rect" coords="210,0,305,24"/>
</map>
 </div>
</div>

<p><a href="classTournamentBP-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>構成</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structTournamentBP_1_1BPHistory.html">BPHistory</a></td></tr>
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#ad2381a9dbad94a16f6413cf1d69b1ce1">TournamentBP</a> (const <a class="el" href="classBPredUnit.html#aa715df0f49f029439cca4c7bd6e3d4fb">Params</a> *params)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#a9c30d728e49473b5a3825835e98a10bc">lookup</a> (<a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> branch_addr, void *&amp;bp_history)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#ad3d898a5eab93d923a1073fe6a0f0030">uncondBranch</a> (void *&amp;bp_history)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#a101ada238eecd07cc6905c60272e2693">btbUpdate</a> (<a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> branch_addr, void *&amp;bp_history)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#a590e0fd17d5b663e25f0e956fadc7062">update</a> (<a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> branch_addr, bool taken, void *bp_history, bool squashed)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#aeb215cee5cdccdf52d02b73fffe80220">squash</a> (void *bp_history)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#a0024022d02f61b8c4166f8ea91c0e112">readGlobalHist</a> ()</td></tr>
<tr><td colspan="2"><h2>Private メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#ad0f11a4da5ded93ef111f9d8a1d40a54">getPrediction</a> (uint8_t &amp;count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#ae93fe8c8e3b6835f6fe2489f56600258">calcLocHistIdx</a> (<a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> &amp;branch_addr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#a134f4849d0956d21b8d179d9cc4d5484">updateGlobalHistTaken</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#aa8baf2d471498ae49654c3398d7b1f1f">updateGlobalHistNotTaken</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#a4f9579428ce30b76c76e2c6bdc876672">updateLocalHistTaken</a> (unsigned local_history_idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#a7be8a3b2838c05c1199ae3490e0c4a31">updateLocalHistNotTaken</a> (unsigned local_history_idx)</td></tr>
<tr><td colspan="2"><h2>Private 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt; <a class="el" href="classSatCounter.html">SatCounter</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#a639a100e0452520604d19db58d98721d">localCtrs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#ad980634448337df2bf521bc96fd5653d">localPredictorSize</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#a260a954fa701712cdc113f3f9d0fc9ee">localPredictorMask</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#a815998927bcd79afe7f787b90f9954f5">localCtrBits</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt; unsigned &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#a0cd7dde45fcd92a2f25e895f8232007e">localHistoryTable</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#a71759b087accf553cc72b42bbd20dacd">localHistoryTableSize</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#affb9008b5a92be8b47d319a4ecc28683">localHistoryBits</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt; <a class="el" href="classSatCounter.html">SatCounter</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#aa8fc28af97afce3a4f54e4924f7d4815">globalCtrs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#ad3a4f2fc3c100e6baa69ece70da3cc07">globalPredictorSize</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#a21c0cae328ca40466ae7e247bd62373f">globalCtrBits</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#a48805f17e95aa944cb6eda2fcf061adf">globalHistory</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#a64788f44637c4acaa30edab60e940f1e">globalHistoryBits</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#a8a8a42593ca0c54c9cea34315edaf5fa">globalHistoryMask</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#aaaf50cc17f3cbe92a7d57a4f86c0cf5c">choiceHistoryMask</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#acdbccf5f7c6840a7dd6cd9350d2d29c2">historyRegisterMask</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt; <a class="el" href="classSatCounter.html">SatCounter</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#a26f80c7389224a73876e470b543e327a">choiceCtrs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#aa71f36048f2ff08f22872c928bb15ad7">choicePredictorSize</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#aee44accc1717e338f8b33ff113d62be2">choiceCtrBits</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#a8ad2ee60a6143561753205840ad144e7">instShiftAmt</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#ad1e9eb27631bc79b7aaf699c608ab9e9">localThreshold</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#ab40a9a7c94a0d33e3b1782a60c208c56">globalThreshold</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#a6de119a3b475137cbfab3f2a0604886b">choiceThreshold</a></td></tr>
<tr><td colspan="2"><h2>Static Private 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTournamentBP.html#ac963a89cba9b2e4b21e99863bc5a78f1">invalidPredictorIndex</a> = -1</td></tr>
</table>
<hr/><a name="_details"></a><h2>説明</h2>
<p>Implements a tournament branch predictor, hopefully identical to the one used in the 21264. It has a local predictor, which uses a local history table to index into a table of counters, and a global predictor, which uses a global history to index into a table of counters. A choice predictor chooses between the two. Only the global history register is speculatively updated, the rest are updated upon branches committing or misspeculating. </p>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="ad2381a9dbad94a16f6413cf1d69b1ce1"></a><!-- doxytag: member="TournamentBP::TournamentBP" ref="ad2381a9dbad94a16f6413cf1d69b1ce1" args="(const Params *params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTournamentBP.html">TournamentBP</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classBPredUnit.html#aa715df0f49f029439cca4c7bd6e3d4fb">Params</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Default branch predictor constructor. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00048"></a>00048     : <a class="code" href="classBPredUnit.html#a1061023e2f959cf88ef9064923a4667f">BPredUnit</a>(<a class="code" href="classSimObject.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>),
<a name="l00049"></a>00049       <a class="code" href="classTournamentBP.html#ad980634448337df2bf521bc96fd5653d">localPredictorSize</a>(<a class="code" href="classSimObject.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>-&gt;localPredictorSize),
<a name="l00050"></a>00050       <a class="code" href="classTournamentBP.html#a815998927bcd79afe7f787b90f9954f5">localCtrBits</a>(<a class="code" href="classSimObject.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>-&gt;localCtrBits),
<a name="l00051"></a>00051       <a class="code" href="classTournamentBP.html#a71759b087accf553cc72b42bbd20dacd">localHistoryTableSize</a>(<a class="code" href="classSimObject.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>-&gt;localHistoryTableSize),
<a name="l00052"></a>00052       <a class="code" href="classTournamentBP.html#affb9008b5a92be8b47d319a4ecc28683">localHistoryBits</a>(<a class="code" href="intmath_8hh.html#a0ec4eaea50888f737b803dc9427614bf">ceilLog2</a>(<a class="code" href="classSimObject.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>-&gt;localPredictorSize)),
<a name="l00053"></a>00053       <a class="code" href="classTournamentBP.html#ad3a4f2fc3c100e6baa69ece70da3cc07">globalPredictorSize</a>(<a class="code" href="classSimObject.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>-&gt;globalPredictorSize),
<a name="l00054"></a>00054       <a class="code" href="classTournamentBP.html#a21c0cae328ca40466ae7e247bd62373f">globalCtrBits</a>(<a class="code" href="classSimObject.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>-&gt;globalCtrBits),
<a name="l00055"></a>00055       <a class="code" href="classTournamentBP.html#a64788f44637c4acaa30edab60e940f1e">globalHistoryBits</a>(
<a name="l00056"></a>00056           <a class="code" href="intmath_8hh.html#a0ec4eaea50888f737b803dc9427614bf">ceilLog2</a>(<a class="code" href="classSimObject.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>-&gt;globalPredictorSize) &gt;
<a name="l00057"></a>00057           <a class="code" href="intmath_8hh.html#a0ec4eaea50888f737b803dc9427614bf">ceilLog2</a>(<a class="code" href="classSimObject.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>-&gt;choicePredictorSize) ?
<a name="l00058"></a>00058           <a class="code" href="intmath_8hh.html#a0ec4eaea50888f737b803dc9427614bf">ceilLog2</a>(<a class="code" href="classSimObject.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>-&gt;globalPredictorSize) :
<a name="l00059"></a>00059           <a class="code" href="intmath_8hh.html#a0ec4eaea50888f737b803dc9427614bf">ceilLog2</a>(<a class="code" href="classSimObject.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>-&gt;choicePredictorSize)),
<a name="l00060"></a>00060       <a class="code" href="classTournamentBP.html#aa71f36048f2ff08f22872c928bb15ad7">choicePredictorSize</a>(<a class="code" href="classSimObject.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>-&gt;choicePredictorSize),
<a name="l00061"></a>00061       <a class="code" href="classTournamentBP.html#aee44accc1717e338f8b33ff113d62be2">choiceCtrBits</a>(<a class="code" href="classSimObject.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>-&gt;choiceCtrBits),
<a name="l00062"></a>00062       <a class="code" href="classTournamentBP.html#a8ad2ee60a6143561753205840ad144e7">instShiftAmt</a>(<a class="code" href="classSimObject.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>-&gt;instShiftAmt)
<a name="l00063"></a>00063 {
<a name="l00064"></a>00064     <span class="keywordflow">if</span> (!<a class="code" href="intmath_8hh.html#aa73a8269f3cc1853f96c7a9210f61f0e">isPowerOf2</a>(<a class="code" href="classTournamentBP.html#ad980634448337df2bf521bc96fd5653d">localPredictorSize</a>)) {
<a name="l00065"></a>00065         <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;Invalid local predictor size!\n&quot;</span>);
<a name="l00066"></a>00066     }
<a name="l00067"></a>00067 
<a name="l00068"></a>00068     <span class="keywordflow">if</span> (!<a class="code" href="intmath_8hh.html#aa73a8269f3cc1853f96c7a9210f61f0e">isPowerOf2</a>(<a class="code" href="classTournamentBP.html#ad3a4f2fc3c100e6baa69ece70da3cc07">globalPredictorSize</a>)) {
<a name="l00069"></a>00069         <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;Invalid global predictor size!\n&quot;</span>);
<a name="l00070"></a>00070     }
<a name="l00071"></a>00071 
<a name="l00072"></a>00072     <span class="comment">//Set up the array of counters for the local predictor</span>
<a name="l00073"></a>00073     <a class="code" href="classTournamentBP.html#a639a100e0452520604d19db58d98721d">localCtrs</a>.resize(<a class="code" href="classTournamentBP.html#ad980634448337df2bf521bc96fd5653d">localPredictorSize</a>);
<a name="l00074"></a>00074 
<a name="l00075"></a>00075     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classTournamentBP.html#ad980634448337df2bf521bc96fd5653d">localPredictorSize</a>; ++<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>)
<a name="l00076"></a>00076         <a class="code" href="classTournamentBP.html#a639a100e0452520604d19db58d98721d">localCtrs</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>].setBits(<a class="code" href="classTournamentBP.html#a815998927bcd79afe7f787b90f9954f5">localCtrBits</a>);
<a name="l00077"></a>00077 
<a name="l00078"></a>00078     <a class="code" href="classTournamentBP.html#a260a954fa701712cdc113f3f9d0fc9ee">localPredictorMask</a> = <a class="code" href="namespaceArmISA.html#a9534dbda5e7db9881c7955c6e08cfdc0">mask</a>(<a class="code" href="classTournamentBP.html#affb9008b5a92be8b47d319a4ecc28683">localHistoryBits</a>);
<a name="l00079"></a>00079 
<a name="l00080"></a>00080     <span class="keywordflow">if</span> (!<a class="code" href="intmath_8hh.html#aa73a8269f3cc1853f96c7a9210f61f0e">isPowerOf2</a>(<a class="code" href="classTournamentBP.html#a71759b087accf553cc72b42bbd20dacd">localHistoryTableSize</a>)) {
<a name="l00081"></a>00081         <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;Invalid local history table size!\n&quot;</span>);
<a name="l00082"></a>00082     }
<a name="l00083"></a>00083 
<a name="l00084"></a>00084     <span class="comment">//Setup the history table for the local table</span>
<a name="l00085"></a>00085     <a class="code" href="classTournamentBP.html#a0cd7dde45fcd92a2f25e895f8232007e">localHistoryTable</a>.resize(<a class="code" href="classTournamentBP.html#a71759b087accf553cc72b42bbd20dacd">localHistoryTableSize</a>);
<a name="l00086"></a>00086 
<a name="l00087"></a>00087     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classTournamentBP.html#a71759b087accf553cc72b42bbd20dacd">localHistoryTableSize</a>; ++<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>)
<a name="l00088"></a>00088         <a class="code" href="classTournamentBP.html#a0cd7dde45fcd92a2f25e895f8232007e">localHistoryTable</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>] = 0;
<a name="l00089"></a>00089 
<a name="l00090"></a>00090     <span class="comment">//Setup the array of counters for the global predictor</span>
<a name="l00091"></a>00091     <a class="code" href="classTournamentBP.html#aa8fc28af97afce3a4f54e4924f7d4815">globalCtrs</a>.resize(<a class="code" href="classTournamentBP.html#ad3a4f2fc3c100e6baa69ece70da3cc07">globalPredictorSize</a>);
<a name="l00092"></a>00092 
<a name="l00093"></a>00093     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classTournamentBP.html#ad3a4f2fc3c100e6baa69ece70da3cc07">globalPredictorSize</a>; ++<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>)
<a name="l00094"></a>00094         <a class="code" href="classTournamentBP.html#aa8fc28af97afce3a4f54e4924f7d4815">globalCtrs</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>].setBits(<a class="code" href="classTournamentBP.html#a21c0cae328ca40466ae7e247bd62373f">globalCtrBits</a>);
<a name="l00095"></a>00095 
<a name="l00096"></a>00096     <span class="comment">//Clear the global history</span>
<a name="l00097"></a>00097     <a class="code" href="classTournamentBP.html#a48805f17e95aa944cb6eda2fcf061adf">globalHistory</a> = 0;
<a name="l00098"></a>00098     <span class="comment">// Set up the global history mask</span>
<a name="l00099"></a>00099     <span class="comment">// this is equivalent to mask(log2(globalPredictorSize)</span>
<a name="l00100"></a>00100     <a class="code" href="classTournamentBP.html#a8a8a42593ca0c54c9cea34315edaf5fa">globalHistoryMask</a> = globalPredictorSize - 1;
<a name="l00101"></a>00101 
<a name="l00102"></a>00102     <span class="keywordflow">if</span> (!<a class="code" href="intmath_8hh.html#aa73a8269f3cc1853f96c7a9210f61f0e">isPowerOf2</a>(<a class="code" href="classTournamentBP.html#aa71f36048f2ff08f22872c928bb15ad7">choicePredictorSize</a>)) {
<a name="l00103"></a>00103         <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;Invalid choice predictor size!\n&quot;</span>);
<a name="l00104"></a>00104     }
<a name="l00105"></a>00105 
<a name="l00106"></a>00106     <span class="comment">// Set up choiceHistoryMask</span>
<a name="l00107"></a>00107     <span class="comment">// this is equivalent to mask(log2(choicePredictorSize)</span>
<a name="l00108"></a>00108     <a class="code" href="classTournamentBP.html#aaaf50cc17f3cbe92a7d57a4f86c0cf5c">choiceHistoryMask</a> = <a class="code" href="classTournamentBP.html#aa71f36048f2ff08f22872c928bb15ad7">choicePredictorSize</a> - 1;
<a name="l00109"></a>00109 
<a name="l00110"></a>00110     <span class="comment">//Setup the array of counters for the choice predictor</span>
<a name="l00111"></a>00111     <a class="code" href="classTournamentBP.html#a26f80c7389224a73876e470b543e327a">choiceCtrs</a>.resize(<a class="code" href="classTournamentBP.html#aa71f36048f2ff08f22872c928bb15ad7">choicePredictorSize</a>);
<a name="l00112"></a>00112 
<a name="l00113"></a>00113     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classTournamentBP.html#aa71f36048f2ff08f22872c928bb15ad7">choicePredictorSize</a>; ++<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>)
<a name="l00114"></a>00114         <a class="code" href="classTournamentBP.html#a26f80c7389224a73876e470b543e327a">choiceCtrs</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>].setBits(<a class="code" href="classTournamentBP.html#aee44accc1717e338f8b33ff113d62be2">choiceCtrBits</a>);
<a name="l00115"></a>00115 
<a name="l00116"></a>00116     <span class="comment">//Set up historyRegisterMask</span>
<a name="l00117"></a>00117     <a class="code" href="classTournamentBP.html#acdbccf5f7c6840a7dd6cd9350d2d29c2">historyRegisterMask</a> = <a class="code" href="namespaceArmISA.html#a9534dbda5e7db9881c7955c6e08cfdc0">mask</a>(<a class="code" href="classTournamentBP.html#a64788f44637c4acaa30edab60e940f1e">globalHistoryBits</a>);
<a name="l00118"></a>00118 
<a name="l00119"></a>00119     <span class="comment">//Check that predictors don&apos;t use more bits than they have available</span>
<a name="l00120"></a>00120     <span class="keywordflow">if</span> (<a class="code" href="classTournamentBP.html#a8a8a42593ca0c54c9cea34315edaf5fa">globalHistoryMask</a> &gt; <a class="code" href="classTournamentBP.html#acdbccf5f7c6840a7dd6cd9350d2d29c2">historyRegisterMask</a>) {
<a name="l00121"></a>00121         <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;Global predictor too large for global history bits!\n&quot;</span>);
<a name="l00122"></a>00122     }
<a name="l00123"></a>00123     <span class="keywordflow">if</span> (<a class="code" href="classTournamentBP.html#aaaf50cc17f3cbe92a7d57a4f86c0cf5c">choiceHistoryMask</a> &gt; <a class="code" href="classTournamentBP.html#acdbccf5f7c6840a7dd6cd9350d2d29c2">historyRegisterMask</a>) {
<a name="l00124"></a>00124         <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;Choice predictor too large for global history bits!\n&quot;</span>);
<a name="l00125"></a>00125     }
<a name="l00126"></a>00126 
<a name="l00127"></a>00127     <span class="keywordflow">if</span> (<a class="code" href="classTournamentBP.html#a8a8a42593ca0c54c9cea34315edaf5fa">globalHistoryMask</a> &lt; <a class="code" href="classTournamentBP.html#acdbccf5f7c6840a7dd6cd9350d2d29c2">historyRegisterMask</a> &amp;&amp;
<a name="l00128"></a>00128         <a class="code" href="classTournamentBP.html#aaaf50cc17f3cbe92a7d57a4f86c0cf5c">choiceHistoryMask</a> &lt; <a class="code" href="classTournamentBP.html#acdbccf5f7c6840a7dd6cd9350d2d29c2">historyRegisterMask</a>) {
<a name="l00129"></a>00129         <a class="code" href="base_2misc_8hh.html#ae7d790080fa18103d7582effff570b9e">inform</a>(<span class="stringliteral">&quot;More global history bits than required by predictors\n&quot;</span>);
<a name="l00130"></a>00130     }
<a name="l00131"></a>00131 
<a name="l00132"></a>00132     <span class="comment">// Set thresholds for the three predictors&apos; counters</span>
<a name="l00133"></a>00133     <span class="comment">// This is equivalent to (2^(Ctr))/2 - 1</span>
<a name="l00134"></a>00134     <a class="code" href="classTournamentBP.html#ad1e9eb27631bc79b7aaf699c608ab9e9">localThreshold</a>  = (<a class="code" href="base_2types_8hh.html#adcc3cf526a71c0dfaae020d432c78b83">ULL</a>(1) &lt;&lt; (<a class="code" href="classTournamentBP.html#a815998927bcd79afe7f787b90f9954f5">localCtrBits</a>  - 1)) - 1;
<a name="l00135"></a>00135     <a class="code" href="classTournamentBP.html#ab40a9a7c94a0d33e3b1782a60c208c56">globalThreshold</a> = (<a class="code" href="base_2types_8hh.html#adcc3cf526a71c0dfaae020d432c78b83">ULL</a>(1) &lt;&lt; (<a class="code" href="classTournamentBP.html#a21c0cae328ca40466ae7e247bd62373f">globalCtrBits</a> - 1)) - 1;
<a name="l00136"></a>00136     <a class="code" href="classTournamentBP.html#a6de119a3b475137cbfab3f2a0604886b">choiceThreshold</a> = (<a class="code" href="base_2types_8hh.html#adcc3cf526a71c0dfaae020d432c78b83">ULL</a>(1) &lt;&lt; (<a class="code" href="classTournamentBP.html#aee44accc1717e338f8b33ff113d62be2">choiceCtrBits</a> - 1)) - 1;
<a name="l00137"></a>00137 }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="a101ada238eecd07cc6905c60272e2693"></a><!-- doxytag: member="TournamentBP::btbUpdate" ref="a101ada238eecd07cc6905c60272e2693" args="(Addr branch_addr, void *&amp;bp_history)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void btbUpdate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>branch_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&amp;&nbsp;</td>
          <td class="paramname"> <em>bp_history</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Updates the branch predictor to Not Taken if a BTB entry is invalid or not found. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>branch_addr</em>&nbsp;</td><td>The address of the branch to look up. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bp_history</em>&nbsp;</td><td>Pointer to any bp history state. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>戻り値:</b></dt><dd>Whether or not the branch is taken. </dd></dl>

<p><a class="el" href="classBPredUnit.html#a7b687ebde63095b00a0b083ba6607cd4">BPredUnit</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00182"></a>00182 {
<a name="l00183"></a>00183     <span class="keywordtype">unsigned</span> local_history_idx = <a class="code" href="classTournamentBP.html#ae93fe8c8e3b6835f6fe2489f56600258">calcLocHistIdx</a>(branch_addr);
<a name="l00184"></a>00184     <span class="comment">//Update Global History to Not Taken (clear LSB)</span>
<a name="l00185"></a>00185     <a class="code" href="classTournamentBP.html#a48805f17e95aa944cb6eda2fcf061adf">globalHistory</a> &amp;= (<a class="code" href="classTournamentBP.html#acdbccf5f7c6840a7dd6cd9350d2d29c2">historyRegisterMask</a> &amp; ~<a class="code" href="base_2types_8hh.html#adcc3cf526a71c0dfaae020d432c78b83">ULL</a>(1));
<a name="l00186"></a>00186     <span class="comment">//Update Local History to Not Taken</span>
<a name="l00187"></a>00187     <a class="code" href="classTournamentBP.html#a0cd7dde45fcd92a2f25e895f8232007e">localHistoryTable</a>[local_history_idx] =
<a name="l00188"></a>00188        <a class="code" href="classTournamentBP.html#a0cd7dde45fcd92a2f25e895f8232007e">localHistoryTable</a>[local_history_idx] &amp; (<a class="code" href="classTournamentBP.html#a260a954fa701712cdc113f3f9d0fc9ee">localPredictorMask</a> &amp; ~<a class="code" href="base_2types_8hh.html#adcc3cf526a71c0dfaae020d432c78b83">ULL</a>(1));
<a name="l00189"></a>00189 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae93fe8c8e3b6835f6fe2489f56600258"></a><!-- doxytag: member="TournamentBP::calcLocHistIdx" ref="ae93fe8c8e3b6835f6fe2489f56600258" args="(Addr &amp;branch_addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned calcLocHistIdx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>branch_addr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the local history index, given a branch address. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>branch_addr</em>&nbsp;</td><td>The branch's PC address. </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00142"></a>00142 {
<a name="l00143"></a>00143     <span class="comment">// Get low order bits after removing instruction offset.</span>
<a name="l00144"></a>00144     <span class="keywordflow">return</span> (branch_addr &gt;&gt; <a class="code" href="classTournamentBP.html#a8ad2ee60a6143561753205840ad144e7">instShiftAmt</a>) &amp; (<a class="code" href="classTournamentBP.html#a71759b087accf553cc72b42bbd20dacd">localHistoryTableSize</a> - 1);
<a name="l00145"></a>00145 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad0f11a4da5ded93ef111f9d8a1d40a54"></a><!-- doxytag: member="TournamentBP::getPrediction" ref="ad0f11a4da5ded93ef111f9d8a1d40a54" args="(uint8_t &amp;count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool getPrediction </td>
          <td>(</td>
          <td class="paramtype">uint8_t &amp;&nbsp;</td>
          <td class="paramname"> <em>count</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns if the branch should be taken or not, given a counter value. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>count</em>&nbsp;</td><td>The counter value. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a9c30d728e49473b5a3825835e98a10bc"></a><!-- doxytag: member="TournamentBP::lookup" ref="a9c30d728e49473b5a3825835e98a10bc" args="(Addr branch_addr, void *&amp;bp_history)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool lookup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>branch_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&amp;&nbsp;</td>
          <td class="paramname"> <em>bp_history</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Looks up the given address in the branch predictor and returns a true/false value as to whether it is taken. Also creates a <a class="el" href="structTournamentBP_1_1BPHistory.html">BPHistory</a> object to store any state it will need on squash/update. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>branch_addr</em>&nbsp;</td><td>The address of the branch to look up. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bp_history</em>&nbsp;</td><td>Pointer that will be set to the <a class="el" href="structTournamentBP_1_1BPHistory.html">BPHistory</a> object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>戻り値:</b></dt><dd>Whether or not the branch is taken. </dd></dl>

<p><a class="el" href="classBPredUnit.html#a5632fdea0abc34f7d68d8445a7a6c166">BPredUnit</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00193"></a>00193 {
<a name="l00194"></a>00194     <span class="keywordtype">bool</span> local_prediction;
<a name="l00195"></a>00195     <span class="keywordtype">unsigned</span> local_history_idx;
<a name="l00196"></a>00196     <span class="keywordtype">unsigned</span> local_predictor_idx;
<a name="l00197"></a>00197 
<a name="l00198"></a>00198     <span class="keywordtype">bool</span> global_prediction;
<a name="l00199"></a>00199     <span class="keywordtype">bool</span> choice_prediction;
<a name="l00200"></a>00200 
<a name="l00201"></a>00201     <span class="comment">//Lookup in the local predictor to get its branch prediction</span>
<a name="l00202"></a>00202     local_history_idx = <a class="code" href="classTournamentBP.html#ae93fe8c8e3b6835f6fe2489f56600258">calcLocHistIdx</a>(branch_addr);
<a name="l00203"></a>00203     local_predictor_idx = <a class="code" href="classTournamentBP.html#a0cd7dde45fcd92a2f25e895f8232007e">localHistoryTable</a>[local_history_idx]
<a name="l00204"></a>00204         &amp; <a class="code" href="classTournamentBP.html#a260a954fa701712cdc113f3f9d0fc9ee">localPredictorMask</a>;
<a name="l00205"></a>00205     local_prediction = <a class="code" href="classTournamentBP.html#a639a100e0452520604d19db58d98721d">localCtrs</a>[local_predictor_idx].read() &gt; <a class="code" href="classTournamentBP.html#ad1e9eb27631bc79b7aaf699c608ab9e9">localThreshold</a>;
<a name="l00206"></a>00206 
<a name="l00207"></a>00207     <span class="comment">//Lookup in the global predictor to get its branch prediction</span>
<a name="l00208"></a>00208     global_prediction =
<a name="l00209"></a>00209       <a class="code" href="classTournamentBP.html#aa8fc28af97afce3a4f54e4924f7d4815">globalCtrs</a>[<a class="code" href="classTournamentBP.html#a48805f17e95aa944cb6eda2fcf061adf">globalHistory</a> &amp; <a class="code" href="classTournamentBP.html#a8a8a42593ca0c54c9cea34315edaf5fa">globalHistoryMask</a>].read() &gt; <a class="code" href="classTournamentBP.html#ab40a9a7c94a0d33e3b1782a60c208c56">globalThreshold</a>;
<a name="l00210"></a>00210 
<a name="l00211"></a>00211     <span class="comment">//Lookup in the choice predictor to see which one to use</span>
<a name="l00212"></a>00212     choice_prediction =
<a name="l00213"></a>00213       <a class="code" href="classTournamentBP.html#a26f80c7389224a73876e470b543e327a">choiceCtrs</a>[<a class="code" href="classTournamentBP.html#a48805f17e95aa944cb6eda2fcf061adf">globalHistory</a> &amp; <a class="code" href="classTournamentBP.html#aaaf50cc17f3cbe92a7d57a4f86c0cf5c">choiceHistoryMask</a>].read() &gt; <a class="code" href="classTournamentBP.html#a6de119a3b475137cbfab3f2a0604886b">choiceThreshold</a>;
<a name="l00214"></a>00214 
<a name="l00215"></a>00215     <span class="comment">// Create BPHistory and pass it back to be recorded.</span>
<a name="l00216"></a>00216     BPHistory *history = <span class="keyword">new</span> BPHistory;
<a name="l00217"></a>00217     history-&gt;globalHistory = <a class="code" href="classTournamentBP.html#a48805f17e95aa944cb6eda2fcf061adf">globalHistory</a>;
<a name="l00218"></a>00218     history-&gt;localPredTaken = local_prediction;
<a name="l00219"></a>00219     history-&gt;globalPredTaken = global_prediction;
<a name="l00220"></a>00220     history-&gt;globalUsed = choice_prediction;
<a name="l00221"></a>00221     history-&gt;localHistory = local_predictor_idx;
<a name="l00222"></a>00222     bp_history = (<span class="keywordtype">void</span> *)history;
<a name="l00223"></a>00223 
<a name="l00224"></a>00224     assert(local_history_idx &lt; <a class="code" href="classTournamentBP.html#a71759b087accf553cc72b42bbd20dacd">localHistoryTableSize</a>);
<a name="l00225"></a>00225 
<a name="l00226"></a>00226     <span class="comment">// Commented code is for doing speculative update of counters and</span>
<a name="l00227"></a>00227     <span class="comment">// all histories.</span>
<a name="l00228"></a>00228     <span class="keywordflow">if</span> (choice_prediction) {
<a name="l00229"></a>00229         <span class="keywordflow">if</span> (global_prediction) {
<a name="l00230"></a>00230             <a class="code" href="classTournamentBP.html#a134f4849d0956d21b8d179d9cc4d5484">updateGlobalHistTaken</a>();
<a name="l00231"></a>00231             <a class="code" href="classTournamentBP.html#a4f9579428ce30b76c76e2c6bdc876672">updateLocalHistTaken</a>(local_history_idx);
<a name="l00232"></a>00232             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00233"></a>00233         } <span class="keywordflow">else</span> {
<a name="l00234"></a>00234             <a class="code" href="classTournamentBP.html#aa8baf2d471498ae49654c3398d7b1f1f">updateGlobalHistNotTaken</a>();
<a name="l00235"></a>00235             <a class="code" href="classTournamentBP.html#a7be8a3b2838c05c1199ae3490e0c4a31">updateLocalHistNotTaken</a>(local_history_idx);
<a name="l00236"></a>00236             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00237"></a>00237         }
<a name="l00238"></a>00238     } <span class="keywordflow">else</span> {
<a name="l00239"></a>00239         <span class="keywordflow">if</span> (local_prediction) {
<a name="l00240"></a>00240             <a class="code" href="classTournamentBP.html#a134f4849d0956d21b8d179d9cc4d5484">updateGlobalHistTaken</a>();
<a name="l00241"></a>00241             <a class="code" href="classTournamentBP.html#a4f9579428ce30b76c76e2c6bdc876672">updateLocalHistTaken</a>(local_history_idx);
<a name="l00242"></a>00242             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00243"></a>00243         } <span class="keywordflow">else</span> {
<a name="l00244"></a>00244             <a class="code" href="classTournamentBP.html#aa8baf2d471498ae49654c3398d7b1f1f">updateGlobalHistNotTaken</a>();
<a name="l00245"></a>00245             <a class="code" href="classTournamentBP.html#a7be8a3b2838c05c1199ae3490e0c4a31">updateLocalHistNotTaken</a>(local_history_idx);
<a name="l00246"></a>00246             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00247"></a>00247         }
<a name="l00248"></a>00248     }
<a name="l00249"></a>00249 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0024022d02f61b8c4166f8ea91c0e112"></a><!-- doxytag: member="TournamentBP::readGlobalHist" ref="a0024022d02f61b8c4166f8ea91c0e112" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned readGlobalHist </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the global history. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00115"></a>00115 { <span class="keywordflow">return</span> <a class="code" href="classTournamentBP.html#a48805f17e95aa944cb6eda2fcf061adf">globalHistory</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aeb215cee5cdccdf52d02b73fffe80220"></a><!-- doxytag: member="TournamentBP::squash" ref="aeb215cee5cdccdf52d02b73fffe80220" args="(void *bp_history)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void squash </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>bp_history</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Restores the global branch history on a squash. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bp_history</em>&nbsp;</td><td>Pointer to the <a class="el" href="structTournamentBP_1_1BPHistory.html">BPHistory</a> object that has the previous global branch history in it. </td></tr>
  </table>
  </dd>
</dl>

<p><a class="el" href="classBPredUnit.html#a2af63ba741727bdf58e2b2dc22a912ed">BPredUnit</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00362"></a>00362 {
<a name="l00363"></a>00363     BPHistory *history = <span class="keyword">static_cast&lt;</span>BPHistory *<span class="keyword">&gt;</span>(bp_history);
<a name="l00364"></a>00364 
<a name="l00365"></a>00365     <span class="comment">// Restore global history to state prior to this branch.</span>
<a name="l00366"></a>00366     <a class="code" href="classTournamentBP.html#a48805f17e95aa944cb6eda2fcf061adf">globalHistory</a> = history-&gt;globalHistory;
<a name="l00367"></a>00367 
<a name="l00368"></a>00368     <span class="comment">// Delete this BPHistory now that we&apos;re done with it.</span>
<a name="l00369"></a>00369     <span class="keyword">delete</span> history;
<a name="l00370"></a>00370 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad3d898a5eab93d923a1073fe6a0f0030"></a><!-- doxytag: member="TournamentBP::uncondBranch" ref="ad3d898a5eab93d923a1073fe6a0f0030" args="(void *&amp;bp_history)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uncondBranch </td>
          <td>(</td>
          <td class="paramtype">void *&amp;&nbsp;</td>
          <td class="paramname"> <em>bp_history</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Records that there was an unconditional branch, and modifies the bp history to point to an object that has the previous global history stored in it. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bp_history</em>&nbsp;</td><td>Pointer that will be set to the <a class="el" href="structTournamentBP_1_1BPHistory.html">BPHistory</a> object. </td></tr>
  </table>
  </dd>
</dl>

<p><a class="el" href="classBPredUnit.html#a17161e0c51444f148e49e4df2ba89704">BPredUnit</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00253"></a>00253 {
<a name="l00254"></a>00254     <span class="comment">// Create BPHistory and pass it back to be recorded.</span>
<a name="l00255"></a>00255     BPHistory *history = <span class="keyword">new</span> BPHistory;
<a name="l00256"></a>00256     history-&gt;globalHistory = <a class="code" href="classTournamentBP.html#a48805f17e95aa944cb6eda2fcf061adf">globalHistory</a>;
<a name="l00257"></a>00257     history-&gt;localPredTaken = <span class="keyword">true</span>;
<a name="l00258"></a>00258     history-&gt;globalPredTaken = <span class="keyword">true</span>;
<a name="l00259"></a>00259     history-&gt;globalUsed = <span class="keyword">true</span>;
<a name="l00260"></a>00260     history-&gt;localHistory = <a class="code" href="classTournamentBP.html#ac963a89cba9b2e4b21e99863bc5a78f1">invalidPredictorIndex</a>;
<a name="l00261"></a>00261     bp_history = <span class="keyword">static_cast&lt;</span><span class="keywordtype">void</span> *<span class="keyword">&gt;</span>(history);
<a name="l00262"></a>00262 
<a name="l00263"></a>00263     <a class="code" href="classTournamentBP.html#a134f4849d0956d21b8d179d9cc4d5484">updateGlobalHistTaken</a>();
<a name="l00264"></a>00264 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a590e0fd17d5b663e25f0e956fadc7062"></a><!-- doxytag: member="TournamentBP::update" ref="a590e0fd17d5b663e25f0e956fadc7062" args="(Addr branch_addr, bool taken, void *bp_history, bool squashed)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>branch_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>taken</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>bp_history</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>squashed</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Updates the branch predictor with the actual result of a branch. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>branch_addr</em>&nbsp;</td><td>The address of the branch to update. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>taken</em>&nbsp;</td><td>Whether or not the branch was taken. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bp_history</em>&nbsp;</td><td>Pointer to the <a class="el" href="structTournamentBP_1_1BPHistory.html">BPHistory</a> object that was created when the branch was predicted. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>squashed</em>&nbsp;</td><td>is set when this function is called during a squash operation. </td></tr>
  </table>
  </dd>
</dl>

<p><a class="el" href="classBPredUnit.html#ab00dd76dc9f830cdae0edc72357c013a">BPredUnit</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00269"></a>00269 {
<a name="l00270"></a>00270     <span class="keywordtype">unsigned</span> local_history_idx;
<a name="l00271"></a>00271     <span class="keywordtype">unsigned</span> local_predictor_idx M5_VAR_USED;
<a name="l00272"></a>00272     <span class="keywordtype">unsigned</span> local_predictor_hist;
<a name="l00273"></a>00273 
<a name="l00274"></a>00274     <span class="comment">// Get the local predictor&apos;s current prediction</span>
<a name="l00275"></a>00275     local_history_idx = <a class="code" href="classTournamentBP.html#ae93fe8c8e3b6835f6fe2489f56600258">calcLocHistIdx</a>(branch_addr);
<a name="l00276"></a>00276     local_predictor_hist = <a class="code" href="classTournamentBP.html#a0cd7dde45fcd92a2f25e895f8232007e">localHistoryTable</a>[local_history_idx];
<a name="l00277"></a>00277     local_predictor_idx = local_predictor_hist &amp; <a class="code" href="classTournamentBP.html#a260a954fa701712cdc113f3f9d0fc9ee">localPredictorMask</a>;
<a name="l00278"></a>00278 
<a name="l00279"></a>00279     <span class="keywordflow">if</span> (bp_history) {
<a name="l00280"></a>00280         BPHistory *history = <span class="keyword">static_cast&lt;</span>BPHistory *<span class="keyword">&gt;</span>(bp_history);
<a name="l00281"></a>00281         <span class="comment">// Update may also be called if the Branch target is incorrect even if</span>
<a name="l00282"></a>00282         <span class="comment">// the prediction is correct. In that case do not update the counters.</span>
<a name="l00283"></a>00283         <span class="keywordtype">bool</span> historyPred = <span class="keyword">false</span>;
<a name="l00284"></a>00284         <span class="keywordtype">unsigned</span> old_local_pred_index = history-&gt;localHistory &amp;
<a name="l00285"></a>00285                 localPredictorMask;
<a name="l00286"></a>00286 
<a name="l00287"></a>00287         <span class="keywordtype">bool</span> old_local_pred_valid = history-&gt;localHistory !=
<a name="l00288"></a>00288             <a class="code" href="classTournamentBP.html#ac963a89cba9b2e4b21e99863bc5a78f1">invalidPredictorIndex</a>;
<a name="l00289"></a>00289 
<a name="l00290"></a>00290         assert(old_local_pred_index &lt; <a class="code" href="classTournamentBP.html#ad980634448337df2bf521bc96fd5653d">localPredictorSize</a>);
<a name="l00291"></a>00291 
<a name="l00292"></a>00292         <span class="keywordflow">if</span> (history-&gt;globalUsed) {
<a name="l00293"></a>00293            historyPred = history-&gt;globalPredTaken;
<a name="l00294"></a>00294         } <span class="keywordflow">else</span> {
<a name="l00295"></a>00295            historyPred = history-&gt;localPredTaken;
<a name="l00296"></a>00296         }
<a name="l00297"></a>00297         <span class="keywordflow">if</span> (historyPred != taken || !squashed) {
<a name="l00298"></a>00298             <span class="comment">// Update the choice predictor to tell it which one was correct if</span>
<a name="l00299"></a>00299             <span class="comment">// there was a prediction.</span>
<a name="l00300"></a>00300             <span class="keywordflow">if</span> (history-&gt;localPredTaken != history-&gt;globalPredTaken) {
<a name="l00301"></a>00301                  <span class="comment">// If the local prediction matches the actual outcome,</span>
<a name="l00302"></a>00302                  <span class="comment">// decerement the counter.  Otherwise increment the</span>
<a name="l00303"></a>00303                  <span class="comment">// counter.</span>
<a name="l00304"></a>00304                  <span class="keywordtype">unsigned</span> choice_predictor_idx =
<a name="l00305"></a>00305                    history-&gt;globalHistory &amp; <a class="code" href="classTournamentBP.html#aaaf50cc17f3cbe92a7d57a4f86c0cf5c">choiceHistoryMask</a>;
<a name="l00306"></a>00306                  <span class="keywordflow">if</span> (history-&gt;localPredTaken == taken) {
<a name="l00307"></a>00307                      <a class="code" href="classTournamentBP.html#a26f80c7389224a73876e470b543e327a">choiceCtrs</a>[choice_predictor_idx].decrement();
<a name="l00308"></a>00308                  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (history-&gt;globalPredTaken == taken) {
<a name="l00309"></a>00309                      <a class="code" href="classTournamentBP.html#a26f80c7389224a73876e470b543e327a">choiceCtrs</a>[choice_predictor_idx].increment();
<a name="l00310"></a>00310                  }
<a name="l00311"></a>00311 
<a name="l00312"></a>00312              }
<a name="l00313"></a>00313 
<a name="l00314"></a>00314              <span class="comment">// Update the counters and local history with the proper</span>
<a name="l00315"></a>00315              <span class="comment">// resolution of the branch.  Global history is updated</span>
<a name="l00316"></a>00316              <span class="comment">// speculatively and restored upon squash() calls, so it does not</span>
<a name="l00317"></a>00317              <span class="comment">// need to be updated.</span>
<a name="l00318"></a>00318              <span class="keywordtype">unsigned</span> global_predictor_idx =
<a name="l00319"></a>00319                history-&gt;globalHistory &amp; <a class="code" href="classTournamentBP.html#a8a8a42593ca0c54c9cea34315edaf5fa">globalHistoryMask</a>;
<a name="l00320"></a>00320              <span class="keywordflow">if</span> (taken) {
<a name="l00321"></a>00321                   <a class="code" href="classTournamentBP.html#aa8fc28af97afce3a4f54e4924f7d4815">globalCtrs</a>[global_predictor_idx].increment();
<a name="l00322"></a>00322                   <span class="keywordflow">if</span> (old_local_pred_valid) {
<a name="l00323"></a>00323                           <a class="code" href="classTournamentBP.html#a639a100e0452520604d19db58d98721d">localCtrs</a>[old_local_pred_index].increment();
<a name="l00324"></a>00324                   }
<a name="l00325"></a>00325              } <span class="keywordflow">else</span> {
<a name="l00326"></a>00326                   <a class="code" href="classTournamentBP.html#aa8fc28af97afce3a4f54e4924f7d4815">globalCtrs</a>[global_predictor_idx].decrement();
<a name="l00327"></a>00327                   <span class="keywordflow">if</span> (old_local_pred_valid) {
<a name="l00328"></a>00328                           <a class="code" href="classTournamentBP.html#a639a100e0452520604d19db58d98721d">localCtrs</a>[old_local_pred_index].decrement();
<a name="l00329"></a>00329                   }
<a name="l00330"></a>00330              }
<a name="l00331"></a>00331         }
<a name="l00332"></a>00332         <span class="keywordflow">if</span> (squashed) {
<a name="l00333"></a>00333              <span class="keywordflow">if</span> (taken) {
<a name="l00334"></a>00334                 <a class="code" href="classTournamentBP.html#a48805f17e95aa944cb6eda2fcf061adf">globalHistory</a> = (history-&gt;globalHistory &lt;&lt; 1) | 1;
<a name="l00335"></a>00335                 <a class="code" href="classTournamentBP.html#a48805f17e95aa944cb6eda2fcf061adf">globalHistory</a> = <a class="code" href="classTournamentBP.html#a48805f17e95aa944cb6eda2fcf061adf">globalHistory</a> &amp; <a class="code" href="classTournamentBP.html#acdbccf5f7c6840a7dd6cd9350d2d29c2">historyRegisterMask</a>;
<a name="l00336"></a>00336                 <span class="keywordflow">if</span> (old_local_pred_valid) {
<a name="l00337"></a>00337                     <a class="code" href="classTournamentBP.html#a0cd7dde45fcd92a2f25e895f8232007e">localHistoryTable</a>[local_history_idx] =
<a name="l00338"></a>00338                      (history-&gt;localHistory &lt;&lt; 1) | 1;
<a name="l00339"></a>00339                 }
<a name="l00340"></a>00340              } <span class="keywordflow">else</span> {
<a name="l00341"></a>00341                 <a class="code" href="classTournamentBP.html#a48805f17e95aa944cb6eda2fcf061adf">globalHistory</a> = (history-&gt;globalHistory &lt;&lt; 1);
<a name="l00342"></a>00342                 <a class="code" href="classTournamentBP.html#a48805f17e95aa944cb6eda2fcf061adf">globalHistory</a> = <a class="code" href="classTournamentBP.html#a48805f17e95aa944cb6eda2fcf061adf">globalHistory</a> &amp; historyRegisterMask;
<a name="l00343"></a>00343                 <span class="keywordflow">if</span> (old_local_pred_valid) {
<a name="l00344"></a>00344                      <a class="code" href="classTournamentBP.html#a0cd7dde45fcd92a2f25e895f8232007e">localHistoryTable</a>[local_history_idx] =
<a name="l00345"></a>00345                      history-&gt;localHistory &lt;&lt; 1;
<a name="l00346"></a>00346                 }
<a name="l00347"></a>00347              }
<a name="l00348"></a>00348 
<a name="l00349"></a>00349         }
<a name="l00350"></a>00350         <span class="comment">// We&apos;re done with this history, now delete it.</span>
<a name="l00351"></a>00351         <span class="keyword">delete</span> history;
<a name="l00352"></a>00352 
<a name="l00353"></a>00353     }
<a name="l00354"></a>00354 
<a name="l00355"></a>00355     assert(local_history_idx &lt; <a class="code" href="classTournamentBP.html#a71759b087accf553cc72b42bbd20dacd">localHistoryTableSize</a>);
<a name="l00356"></a>00356 
<a name="l00357"></a>00357 
<a name="l00358"></a>00358 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa8baf2d471498ae49654c3398d7b1f1f"></a><!-- doxytag: member="TournamentBP::updateGlobalHistNotTaken" ref="aa8baf2d471498ae49654c3398d7b1f1f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateGlobalHistNotTaken </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Updates global history as not taken. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00158"></a>00158 {
<a name="l00159"></a>00159     <a class="code" href="classTournamentBP.html#a48805f17e95aa944cb6eda2fcf061adf">globalHistory</a> = (<a class="code" href="classTournamentBP.html#a48805f17e95aa944cb6eda2fcf061adf">globalHistory</a> &lt;&lt; 1);
<a name="l00160"></a>00160     <a class="code" href="classTournamentBP.html#a48805f17e95aa944cb6eda2fcf061adf">globalHistory</a> = <a class="code" href="classTournamentBP.html#a48805f17e95aa944cb6eda2fcf061adf">globalHistory</a> &amp; <a class="code" href="classTournamentBP.html#acdbccf5f7c6840a7dd6cd9350d2d29c2">historyRegisterMask</a>;
<a name="l00161"></a>00161 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a134f4849d0956d21b8d179d9cc4d5484"></a><!-- doxytag: member="TournamentBP::updateGlobalHistTaken" ref="a134f4849d0956d21b8d179d9cc4d5484" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateGlobalHistTaken </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Updates global history as taken. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00150"></a>00150 {
<a name="l00151"></a>00151     <a class="code" href="classTournamentBP.html#a48805f17e95aa944cb6eda2fcf061adf">globalHistory</a> = (<a class="code" href="classTournamentBP.html#a48805f17e95aa944cb6eda2fcf061adf">globalHistory</a> &lt;&lt; 1) | 1;
<a name="l00152"></a>00152     <a class="code" href="classTournamentBP.html#a48805f17e95aa944cb6eda2fcf061adf">globalHistory</a> = <a class="code" href="classTournamentBP.html#a48805f17e95aa944cb6eda2fcf061adf">globalHistory</a> &amp; <a class="code" href="classTournamentBP.html#acdbccf5f7c6840a7dd6cd9350d2d29c2">historyRegisterMask</a>;
<a name="l00153"></a>00153 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7be8a3b2838c05c1199ae3490e0c4a31"></a><!-- doxytag: member="TournamentBP::updateLocalHistNotTaken" ref="a7be8a3b2838c05c1199ae3490e0c4a31" args="(unsigned local_history_idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateLocalHistNotTaken </td>
          <td>(</td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>local_history_idx</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Updates local histories as not taken. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>local_history_idx</em>&nbsp;</td><td>The local history table entry that will be updated. </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00174"></a>00174 {
<a name="l00175"></a>00175     <a class="code" href="classTournamentBP.html#a0cd7dde45fcd92a2f25e895f8232007e">localHistoryTable</a>[local_history_idx] =
<a name="l00176"></a>00176         (<a class="code" href="classTournamentBP.html#a0cd7dde45fcd92a2f25e895f8232007e">localHistoryTable</a>[local_history_idx] &lt;&lt; 1);
<a name="l00177"></a>00177 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4f9579428ce30b76c76e2c6bdc876672"></a><!-- doxytag: member="TournamentBP::updateLocalHistTaken" ref="a4f9579428ce30b76c76e2c6bdc876672" args="(unsigned local_history_idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateLocalHistTaken </td>
          <td>(</td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>local_history_idx</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Updates local histories as taken. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>local_history_idx</em>&nbsp;</td><td>The local history table entry that will be updated. </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00166"></a>00166 {
<a name="l00167"></a>00167     <a class="code" href="classTournamentBP.html#a0cd7dde45fcd92a2f25e895f8232007e">localHistoryTable</a>[local_history_idx] =
<a name="l00168"></a>00168         (<a class="code" href="classTournamentBP.html#a0cd7dde45fcd92a2f25e895f8232007e">localHistoryTable</a>[local_history_idx] &lt;&lt; 1) | 1;
<a name="l00169"></a>00169 }
</pre></div></p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="aee44accc1717e338f8b33ff113d62be2"></a><!-- doxytag: member="TournamentBP::choiceCtrBits" ref="aee44accc1717e338f8b33ff113d62be2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classTournamentBP.html#aee44accc1717e338f8b33ff113d62be2">choiceCtrBits</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of bits in the choice predictor's counters. </p>

</div>
</div>
<a class="anchor" id="a26f80c7389224a73876e470b543e327a"></a><!-- doxytag: member="TournamentBP::choiceCtrs" ref="a26f80c7389224a73876e470b543e327a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt;<a class="el" href="classSatCounter.html">SatCounter</a>&gt; <a class="el" href="classTournamentBP.html#a26f80c7389224a73876e470b543e327a">choiceCtrs</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Array of counters that make up the choice predictor. </p>

</div>
</div>
<a class="anchor" id="aaaf50cc17f3cbe92a7d57a4f86c0cf5c"></a><!-- doxytag: member="TournamentBP::choiceHistoryMask" ref="aaaf50cc17f3cbe92a7d57a4f86c0cf5c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classTournamentBP.html#aaaf50cc17f3cbe92a7d57a4f86c0cf5c">choiceHistoryMask</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Mask to apply to globalHistory to access choice history table. Based on choicePredictorSize. </p>

</div>
</div>
<a class="anchor" id="aa71f36048f2ff08f22872c928bb15ad7"></a><!-- doxytag: member="TournamentBP::choicePredictorSize" ref="aa71f36048f2ff08f22872c928bb15ad7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classTournamentBP.html#aa71f36048f2ff08f22872c928bb15ad7">choicePredictorSize</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of entries in the choice predictor. </p>

</div>
</div>
<a class="anchor" id="a6de119a3b475137cbfab3f2a0604886b"></a><!-- doxytag: member="TournamentBP::choiceThreshold" ref="a6de119a3b475137cbfab3f2a0604886b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classTournamentBP.html#a6de119a3b475137cbfab3f2a0604886b">choiceThreshold</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a21c0cae328ca40466ae7e247bd62373f"></a><!-- doxytag: member="TournamentBP::globalCtrBits" ref="a21c0cae328ca40466ae7e247bd62373f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classTournamentBP.html#a21c0cae328ca40466ae7e247bd62373f">globalCtrBits</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of bits of the global predictor's counters. </p>

</div>
</div>
<a class="anchor" id="aa8fc28af97afce3a4f54e4924f7d4815"></a><!-- doxytag: member="TournamentBP::globalCtrs" ref="aa8fc28af97afce3a4f54e4924f7d4815" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt;<a class="el" href="classSatCounter.html">SatCounter</a>&gt; <a class="el" href="classTournamentBP.html#aa8fc28af97afce3a4f54e4924f7d4815">globalCtrs</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Array of counters that make up the global predictor. </p>

</div>
</div>
<a class="anchor" id="a48805f17e95aa944cb6eda2fcf061adf"></a><!-- doxytag: member="TournamentBP::globalHistory" ref="a48805f17e95aa944cb6eda2fcf061adf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classTournamentBP.html#a48805f17e95aa944cb6eda2fcf061adf">globalHistory</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Global history register. Contains as much history as specified by globalHistoryBits. Actual number of bits used is determined by globalHistoryMask and choiceHistoryMask. </p>

</div>
</div>
<a class="anchor" id="a64788f44637c4acaa30edab60e940f1e"></a><!-- doxytag: member="TournamentBP::globalHistoryBits" ref="a64788f44637c4acaa30edab60e940f1e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classTournamentBP.html#a64788f44637c4acaa30edab60e940f1e">globalHistoryBits</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of bits for the global history. Determines maximum number of entries in global and choice predictor tables. </p>

</div>
</div>
<a class="anchor" id="a8a8a42593ca0c54c9cea34315edaf5fa"></a><!-- doxytag: member="TournamentBP::globalHistoryMask" ref="a8a8a42593ca0c54c9cea34315edaf5fa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classTournamentBP.html#a8a8a42593ca0c54c9cea34315edaf5fa">globalHistoryMask</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Mask to apply to globalHistory to access global history table. Based on globalPredictorSize. </p>

</div>
</div>
<a class="anchor" id="ad3a4f2fc3c100e6baa69ece70da3cc07"></a><!-- doxytag: member="TournamentBP::globalPredictorSize" ref="ad3a4f2fc3c100e6baa69ece70da3cc07" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classTournamentBP.html#ad3a4f2fc3c100e6baa69ece70da3cc07">globalPredictorSize</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of entries in the global predictor. </p>

</div>
</div>
<a class="anchor" id="ab40a9a7c94a0d33e3b1782a60c208c56"></a><!-- doxytag: member="TournamentBP::globalThreshold" ref="ab40a9a7c94a0d33e3b1782a60c208c56" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classTournamentBP.html#ab40a9a7c94a0d33e3b1782a60c208c56">globalThreshold</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="acdbccf5f7c6840a7dd6cd9350d2d29c2"></a><!-- doxytag: member="TournamentBP::historyRegisterMask" ref="acdbccf5f7c6840a7dd6cd9350d2d29c2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classTournamentBP.html#acdbccf5f7c6840a7dd6cd9350d2d29c2">historyRegisterMask</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Mask to control how much history is stored. All of it might not be used. </p>

</div>
</div>
<a class="anchor" id="a8ad2ee60a6143561753205840ad144e7"></a><!-- doxytag: member="TournamentBP::instShiftAmt" ref="a8ad2ee60a6143561753205840ad144e7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classTournamentBP.html#a8ad2ee60a6143561753205840ad144e7">instShiftAmt</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of bits to shift the instruction over to get rid of the word offset. </p>

</div>
</div>
<a class="anchor" id="ac963a89cba9b2e4b21e99863bc5a78f1"></a><!-- doxytag: member="TournamentBP::invalidPredictorIndex" ref="ac963a89cba9b2e4b21e99863bc5a78f1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="classTournamentBP.html#ac963a89cba9b2e4b21e99863bc5a78f1">invalidPredictorIndex</a> = -1<code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Flag for invalid predictor index </p>

</div>
</div>
<a class="anchor" id="a815998927bcd79afe7f787b90f9954f5"></a><!-- doxytag: member="TournamentBP::localCtrBits" ref="a815998927bcd79afe7f787b90f9954f5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classTournamentBP.html#a815998927bcd79afe7f787b90f9954f5">localCtrBits</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of bits of the local predictor's counters. </p>

</div>
</div>
<a class="anchor" id="a639a100e0452520604d19db58d98721d"></a><!-- doxytag: member="TournamentBP::localCtrs" ref="a639a100e0452520604d19db58d98721d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt;<a class="el" href="classSatCounter.html">SatCounter</a>&gt; <a class="el" href="classTournamentBP.html#a639a100e0452520604d19db58d98721d">localCtrs</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Local counters. </p>

</div>
</div>
<a class="anchor" id="affb9008b5a92be8b47d319a4ecc28683"></a><!-- doxytag: member="TournamentBP::localHistoryBits" ref="affb9008b5a92be8b47d319a4ecc28683" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classTournamentBP.html#affb9008b5a92be8b47d319a4ecc28683">localHistoryBits</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of bits for each entry of the local history table. </p>

</div>
</div>
<a class="anchor" id="a0cd7dde45fcd92a2f25e895f8232007e"></a><!-- doxytag: member="TournamentBP::localHistoryTable" ref="a0cd7dde45fcd92a2f25e895f8232007e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt;unsigned&gt; <a class="el" href="classTournamentBP.html#a0cd7dde45fcd92a2f25e895f8232007e">localHistoryTable</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Array of local history table entries. </p>

</div>
</div>
<a class="anchor" id="a71759b087accf553cc72b42bbd20dacd"></a><!-- doxytag: member="TournamentBP::localHistoryTableSize" ref="a71759b087accf553cc72b42bbd20dacd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classTournamentBP.html#a71759b087accf553cc72b42bbd20dacd">localHistoryTableSize</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of entries in the local history table. </p>

</div>
</div>
<a class="anchor" id="a260a954fa701712cdc113f3f9d0fc9ee"></a><!-- doxytag: member="TournamentBP::localPredictorMask" ref="a260a954fa701712cdc113f3f9d0fc9ee" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classTournamentBP.html#a260a954fa701712cdc113f3f9d0fc9ee">localPredictorMask</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Mask to truncate values stored in the local history table. </p>

</div>
</div>
<a class="anchor" id="ad980634448337df2bf521bc96fd5653d"></a><!-- doxytag: member="TournamentBP::localPredictorSize" ref="ad980634448337df2bf521bc96fd5653d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classTournamentBP.html#ad980634448337df2bf521bc96fd5653d">localPredictorSize</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of counters in the local predictor. </p>

</div>
</div>
<a class="anchor" id="ad1e9eb27631bc79b7aaf699c608ab9e9"></a><!-- doxytag: member="TournamentBP::localThreshold" ref="ad1e9eb27631bc79b7aaf699c608ab9e9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classTournamentBP.html#ad1e9eb27631bc79b7aaf699c608ab9e9">localThreshold</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Thresholds for the counter value; above the threshold is taken, equal to or below the threshold is not taken. </p>

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>cpu/pred/<a class="el" href="tournament_8hh_source.html">tournament.hh</a></li>
<li>cpu/pred/<a class="el" href="tournament_8cc.html">tournament.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
