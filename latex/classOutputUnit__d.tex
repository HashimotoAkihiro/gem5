\hypertarget{classOutputUnit__d}{
\section{クラス OutputUnit\_\-d}
\label{classOutputUnit__d}\index{OutputUnit\_\-d@{OutputUnit\_\-d}}
}


{\ttfamily \#include $<$OutputUnit\_\-d.hh$>$}OutputUnit\_\-dに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2cm]{classOutputUnit__d}
\end{center}
\end{figure}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classOutputUnit__d_ac289b42d245e455ff295053759e6548c}{OutputUnit\_\-d} (int id, \hyperlink{classRouter__d}{Router\_\-d} $\ast$router)
\item 
\hyperlink{classOutputUnit__d_aef13b7a3e31e2a02ebbf47b938369b68}{$\sim$OutputUnit\_\-d} ()
\item 
void \hyperlink{classOutputUnit__d_a72a73c127bb17f1f7c2c010b3856c56c}{set\_\-out\_\-link} (\hyperlink{classNetworkLink__d}{NetworkLink\_\-d} $\ast$link)
\item 
void \hyperlink{classOutputUnit__d_aa66db9bde5f92aad3f5bbc61cc861d2a}{set\_\-credit\_\-link} (\hyperlink{classCreditLink__d}{CreditLink\_\-d} $\ast$credit\_\-link)
\item 
void \hyperlink{classOutputUnit__d_ae674290a26ecbd622c5160e38e8a4fe9}{wakeup} ()
\item 
\hyperlink{classflitBuffer__d}{flitBuffer\_\-d} $\ast$ \hyperlink{classOutputUnit__d_a672f508b05cb3b48c7c02e4ecea475bc}{getOutQueue} ()
\item 
void \hyperlink{classOutputUnit__d_a86be419f132f77f0bec3a6061db90b56}{update\_\-vc} (int vc, int in\_\-port, int in\_\-vc)
\item 
void \hyperlink{classOutputUnit__d_ac55fe386a101fbae38c716067c9966a0}{print} (std::ostream \&out) const 
\item 
void \hyperlink{classOutputUnit__d_ab998c12ca35652c419fce27547c19c73}{decrement\_\-credit} (int out\_\-vc)
\item 
int \hyperlink{classOutputUnit__d_aae610e2b37c22ba110e223da68a1e302}{get\_\-credit\_\-cnt} (int vc)
\item 
int \hyperlink{classOutputUnit__d_a3292695c6544ec346fd7f0a661d237d6}{get\_\-outlink\_\-id} ()
\item 
void \hyperlink{classOutputUnit__d_a67dafbe49b665179990b2bdadfc133c9}{set\_\-vc\_\-state} (\hyperlink{NetworkHeader_8hh_aaafaa208359111dcd9f4d47ff377da76}{VC\_\-state\_\-type} state, int vc, \hyperlink{classCycles}{Cycles} curTime)
\item 
bool \hyperlink{classOutputUnit__d_a1f286a568138e723fdd077a18b268c5e}{is\_\-vc\_\-idle} (int vc, \hyperlink{classCycles}{Cycles} curTime)
\item 
void \hyperlink{classOutputUnit__d_ae4097c9e6741b690e6388043e7bc7b64}{insert\_\-flit} (\hyperlink{classflit__d}{flit\_\-d} $\ast$t\_\-flit)
\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} \hyperlink{classOutputUnit__d_ad07b9def1d6f5e5f988a254c3a9d1ad9}{functionalWrite} (\hyperlink{classPacket}{Packet} $\ast$pkt)
\end{DoxyCompactItemize}
\subsection*{Private 変数}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{classOutputUnit__d_aad966617e7e050bedbead762727808a5}{m\_\-id}
\item 
int \hyperlink{classOutputUnit__d_a2e1a9213321dfa0386cdedaf6fc22996}{m\_\-num\_\-vcs}
\item 
\hyperlink{classRouter__d}{Router\_\-d} $\ast$ \hyperlink{classOutputUnit__d_a81d53a65b375007289068e764da769d8}{m\_\-router}
\item 
\hyperlink{classNetworkLink__d}{NetworkLink\_\-d} $\ast$ \hyperlink{classOutputUnit__d_ad6b6f290562e57546ef09c211721a199}{m\_\-out\_\-link}
\item 
\hyperlink{classCreditLink__d}{CreditLink\_\-d} $\ast$ \hyperlink{classOutputUnit__d_a8439db4fc7b7271dfca6bf98b13036a4}{m\_\-credit\_\-link}
\item 
\hyperlink{classflitBuffer__d}{flitBuffer\_\-d} $\ast$ \hyperlink{classOutputUnit__d_a41dd924ecf4c977d4f4e5251e8076a0e}{m\_\-out\_\-buffer}
\item 
\hyperlink{classstd_1_1vector}{std::vector}$<$ \hyperlink{classOutVcState__d}{OutVcState\_\-d} $\ast$ $>$ \hyperlink{classOutputUnit__d_ae14b2f87437379bc1ab5b4cc523e1406}{m\_\-outvc\_\-state}
\end{DoxyCompactItemize}


\subsection{コンストラクタとデストラクタ}
\hypertarget{classOutputUnit__d_ac289b42d245e455ff295053759e6548c}{
\index{OutputUnit\_\-d@{OutputUnit\_\-d}!OutputUnit\_\-d@{OutputUnit\_\-d}}
\index{OutputUnit\_\-d@{OutputUnit\_\-d}!OutputUnit_d@{OutputUnit\_\-d}}
\subsubsection[{OutputUnit\_\-d}]{\setlength{\rightskip}{0pt plus 5cm}{\bf OutputUnit\_\-d} (int {\em id}, \/  {\bf Router\_\-d} $\ast$ {\em router})}}
\label{classOutputUnit__d_ac289b42d245e455ff295053759e6548c}



\begin{DoxyCode}
39     : Consumer(router)
40 {
41     m_id = id;
42     m_router = router;
43     m_num_vcs = m_router->get_num_vcs();
44     m_out_buffer = new flitBuffer_d();
45 
46     for (int i = 0; i < m_num_vcs; i++) {
47         m_outvc_state.push_back(new OutVcState_d(i, m_router->get_net_ptr()));
48     }
49 }
\end{DoxyCode}
\hypertarget{classOutputUnit__d_aef13b7a3e31e2a02ebbf47b938369b68}{
\index{OutputUnit\_\-d@{OutputUnit\_\-d}!$\sim$OutputUnit\_\-d@{$\sim$OutputUnit\_\-d}}
\index{$\sim$OutputUnit\_\-d@{$\sim$OutputUnit\_\-d}!OutputUnit_d@{OutputUnit\_\-d}}
\subsubsection[{$\sim$OutputUnit\_\-d}]{\setlength{\rightskip}{0pt plus 5cm}$\sim${\bf OutputUnit\_\-d} ()}}
\label{classOutputUnit__d_aef13b7a3e31e2a02ebbf47b938369b68}



\begin{DoxyCode}
52 {
53     delete m_out_buffer;
54     deletePointers(m_outvc_state);
55 }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classOutputUnit__d_ab998c12ca35652c419fce27547c19c73}{
\index{OutputUnit\_\-d@{OutputUnit\_\-d}!decrement\_\-credit@{decrement\_\-credit}}
\index{decrement\_\-credit@{decrement\_\-credit}!OutputUnit_d@{OutputUnit\_\-d}}
\subsubsection[{decrement\_\-credit}]{\setlength{\rightskip}{0pt plus 5cm}void decrement\_\-credit (int {\em out\_\-vc})}}
\label{classOutputUnit__d_ab998c12ca35652c419fce27547c19c73}



\begin{DoxyCode}
59 {
60     m_outvc_state[out_vc]->decrement_credit();
61     m_router->update_incredit(m_outvc_state[out_vc]->get_inport(),
62                               m_outvc_state[out_vc]->get_invc(),
63                               m_outvc_state[out_vc]->get_credit_count());
64 }
\end{DoxyCode}
\hypertarget{classOutputUnit__d_ad07b9def1d6f5e5f988a254c3a9d1ad9}{
\index{OutputUnit\_\-d@{OutputUnit\_\-d}!functionalWrite@{functionalWrite}}
\index{functionalWrite@{functionalWrite}!OutputUnit_d@{OutputUnit\_\-d}}
\subsubsection[{functionalWrite}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t} functionalWrite ({\bf Packet} $\ast$ {\em pkt})}}
\label{classOutputUnit__d_ad07b9def1d6f5e5f988a254c3a9d1ad9}



\begin{DoxyCode}
114 {
115     return m_out_buffer->functionalWrite(pkt);
116 }
\end{DoxyCode}
\hypertarget{classOutputUnit__d_aae610e2b37c22ba110e223da68a1e302}{
\index{OutputUnit\_\-d@{OutputUnit\_\-d}!get\_\-credit\_\-cnt@{get\_\-credit\_\-cnt}}
\index{get\_\-credit\_\-cnt@{get\_\-credit\_\-cnt}!OutputUnit_d@{OutputUnit\_\-d}}
\subsubsection[{get\_\-credit\_\-cnt}]{\setlength{\rightskip}{0pt plus 5cm}int get\_\-credit\_\-cnt (int {\em vc})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classOutputUnit__d_aae610e2b37c22ba110e223da68a1e302}



\begin{DoxyCode}
61     {
62         return m_outvc_state[vc]->get_credit_count();
63     }
\end{DoxyCode}
\hypertarget{classOutputUnit__d_a3292695c6544ec346fd7f0a661d237d6}{
\index{OutputUnit\_\-d@{OutputUnit\_\-d}!get\_\-outlink\_\-id@{get\_\-outlink\_\-id}}
\index{get\_\-outlink\_\-id@{get\_\-outlink\_\-id}!OutputUnit_d@{OutputUnit\_\-d}}
\subsubsection[{get\_\-outlink\_\-id}]{\setlength{\rightskip}{0pt plus 5cm}int get\_\-outlink\_\-id ()\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classOutputUnit__d_a3292695c6544ec346fd7f0a661d237d6}



\begin{DoxyCode}
67     {
68         return m_out_link->get_id();
69     }
\end{DoxyCode}
\hypertarget{classOutputUnit__d_a672f508b05cb3b48c7c02e4ecea475bc}{
\index{OutputUnit\_\-d@{OutputUnit\_\-d}!getOutQueue@{getOutQueue}}
\index{getOutQueue@{getOutQueue}!OutputUnit_d@{OutputUnit\_\-d}}
\subsubsection[{getOutQueue}]{\setlength{\rightskip}{0pt plus 5cm}{\bf flitBuffer\_\-d} $\ast$ getOutQueue ()}}
\label{classOutputUnit__d_a672f508b05cb3b48c7c02e4ecea475bc}



\begin{DoxyCode}
86 {
87     return m_out_buffer;
88 }
\end{DoxyCode}
\hypertarget{classOutputUnit__d_ae4097c9e6741b690e6388043e7bc7b64}{
\index{OutputUnit\_\-d@{OutputUnit\_\-d}!insert\_\-flit@{insert\_\-flit}}
\index{insert\_\-flit@{insert\_\-flit}!OutputUnit_d@{OutputUnit\_\-d}}
\subsubsection[{insert\_\-flit}]{\setlength{\rightskip}{0pt plus 5cm}void insert\_\-flit ({\bf flit\_\-d} $\ast$ {\em t\_\-flit})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classOutputUnit__d_ae4097c9e6741b690e6388043e7bc7b64}



\begin{DoxyCode}
85     {
86         m_out_buffer->insert(t_flit);
87         m_out_link->scheduleEventAbsolute(m_router->clockEdge(Cycles(1)));
88     }
\end{DoxyCode}
\hypertarget{classOutputUnit__d_a1f286a568138e723fdd077a18b268c5e}{
\index{OutputUnit\_\-d@{OutputUnit\_\-d}!is\_\-vc\_\-idle@{is\_\-vc\_\-idle}}
\index{is\_\-vc\_\-idle@{is\_\-vc\_\-idle}!OutputUnit_d@{OutputUnit\_\-d}}
\subsubsection[{is\_\-vc\_\-idle}]{\setlength{\rightskip}{0pt plus 5cm}bool is\_\-vc\_\-idle (int {\em vc}, \/  {\bf Cycles} {\em curTime})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classOutputUnit__d_a1f286a568138e723fdd077a18b268c5e}



\begin{DoxyCode}
79     {
80         return (m_outvc_state[vc]->isInState(IDLE_, curTime));
81     }
\end{DoxyCode}
\hypertarget{classOutputUnit__d_ac55fe386a101fbae38c716067c9966a0}{
\index{OutputUnit\_\-d@{OutputUnit\_\-d}!print@{print}}
\index{print@{print}!OutputUnit_d@{OutputUnit\_\-d}}
\subsubsection[{print}]{\setlength{\rightskip}{0pt plus 5cm}void print (std::ostream \& {\em out}) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}
\label{classOutputUnit__d_ac55fe386a101fbae38c716067c9966a0}


\hyperlink{classConsumer_a3ea5f7af5db62cc24f4e40df9ea5c971}{Consumer}を実装しています。


\begin{DoxyCode}
56 {};
\end{DoxyCode}
\hypertarget{classOutputUnit__d_aa66db9bde5f92aad3f5bbc61cc861d2a}{
\index{OutputUnit\_\-d@{OutputUnit\_\-d}!set\_\-credit\_\-link@{set\_\-credit\_\-link}}
\index{set\_\-credit\_\-link@{set\_\-credit\_\-link}!OutputUnit_d@{OutputUnit\_\-d}}
\subsubsection[{set\_\-credit\_\-link}]{\setlength{\rightskip}{0pt plus 5cm}void set\_\-credit\_\-link ({\bf CreditLink\_\-d} $\ast$ {\em credit\_\-link})}}
\label{classOutputUnit__d_aa66db9bde5f92aad3f5bbc61cc861d2a}



\begin{DoxyCode}
98 {
99     m_credit_link = credit_link;
100 }
\end{DoxyCode}
\hypertarget{classOutputUnit__d_a72a73c127bb17f1f7c2c010b3856c56c}{
\index{OutputUnit\_\-d@{OutputUnit\_\-d}!set\_\-out\_\-link@{set\_\-out\_\-link}}
\index{set\_\-out\_\-link@{set\_\-out\_\-link}!OutputUnit_d@{OutputUnit\_\-d}}
\subsubsection[{set\_\-out\_\-link}]{\setlength{\rightskip}{0pt plus 5cm}void set\_\-out\_\-link ({\bf NetworkLink\_\-d} $\ast$ {\em link})}}
\label{classOutputUnit__d_a72a73c127bb17f1f7c2c010b3856c56c}



\begin{DoxyCode}
92 {
93     m_out_link = link;
94 }
\end{DoxyCode}
\hypertarget{classOutputUnit__d_a67dafbe49b665179990b2bdadfc133c9}{
\index{OutputUnit\_\-d@{OutputUnit\_\-d}!set\_\-vc\_\-state@{set\_\-vc\_\-state}}
\index{set\_\-vc\_\-state@{set\_\-vc\_\-state}!OutputUnit_d@{OutputUnit\_\-d}}
\subsubsection[{set\_\-vc\_\-state}]{\setlength{\rightskip}{0pt plus 5cm}void set\_\-vc\_\-state ({\bf VC\_\-state\_\-type} {\em state}, \/  int {\em vc}, \/  {\bf Cycles} {\em curTime})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classOutputUnit__d_a67dafbe49b665179990b2bdadfc133c9}



\begin{DoxyCode}
73     {
74         m_outvc_state[vc]->setState(state, curTime + Cycles(1));
75     }
\end{DoxyCode}
\hypertarget{classOutputUnit__d_a86be419f132f77f0bec3a6061db90b56}{
\index{OutputUnit\_\-d@{OutputUnit\_\-d}!update\_\-vc@{update\_\-vc}}
\index{update\_\-vc@{update\_\-vc}!OutputUnit_d@{OutputUnit\_\-d}}
\subsubsection[{update\_\-vc}]{\setlength{\rightskip}{0pt plus 5cm}void update\_\-vc (int {\em vc}, \/  int {\em in\_\-port}, \/  int {\em in\_\-vc})}}
\label{classOutputUnit__d_a86be419f132f77f0bec3a6061db90b56}



\begin{DoxyCode}
104 {
105     m_outvc_state[vc]->setState(ACTIVE_, m_router->curCycle() + Cycles(1));
106     m_outvc_state[vc]->set_inport(in_port);
107     m_outvc_state[vc]->set_invc(in_vc);
108     m_router->update_incredit(in_port, in_vc,
109                               m_outvc_state[vc]->get_credit_count());
110 }
\end{DoxyCode}
\hypertarget{classOutputUnit__d_ae674290a26ecbd622c5160e38e8a4fe9}{
\index{OutputUnit\_\-d@{OutputUnit\_\-d}!wakeup@{wakeup}}
\index{wakeup@{wakeup}!OutputUnit_d@{OutputUnit\_\-d}}
\subsubsection[{wakeup}]{\setlength{\rightskip}{0pt plus 5cm}void wakeup ()\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classOutputUnit__d_ae674290a26ecbd622c5160e38e8a4fe9}


\hyperlink{classConsumer_a623e3e7d1b1c725d70009f7b01a421b9}{Consumer}を実装しています。


\begin{DoxyCode}
68 {
69     if (m_credit_link->isReady(m_router->curCycle())) {
70         flit_d *t_flit = m_credit_link->consumeLink();
71         int out_vc = t_flit->get_vc();
72         m_outvc_state[out_vc]->increment_credit();
73         m_router->update_incredit(m_outvc_state[out_vc]->get_inport(),
74                                   m_outvc_state[out_vc]->get_invc(),
75                                   m_outvc_state[out_vc]->get_credit_count());
76 
77         if (t_flit->is_free_signal())
78             set_vc_state(IDLE_, out_vc, m_router->curCycle());
79 
80         delete t_flit;
81     }
82 }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classOutputUnit__d_a8439db4fc7b7271dfca6bf98b13036a4}{
\index{OutputUnit\_\-d@{OutputUnit\_\-d}!m\_\-credit\_\-link@{m\_\-credit\_\-link}}
\index{m\_\-credit\_\-link@{m\_\-credit\_\-link}!OutputUnit_d@{OutputUnit\_\-d}}
\subsubsection[{m\_\-credit\_\-link}]{\setlength{\rightskip}{0pt plus 5cm}{\bf CreditLink\_\-d}$\ast$ {\bf m\_\-credit\_\-link}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classOutputUnit__d_a8439db4fc7b7271dfca6bf98b13036a4}
\hypertarget{classOutputUnit__d_aad966617e7e050bedbead762727808a5}{
\index{OutputUnit\_\-d@{OutputUnit\_\-d}!m\_\-id@{m\_\-id}}
\index{m\_\-id@{m\_\-id}!OutputUnit_d@{OutputUnit\_\-d}}
\subsubsection[{m\_\-id}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf m\_\-id}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classOutputUnit__d_aad966617e7e050bedbead762727808a5}
\hypertarget{classOutputUnit__d_a2e1a9213321dfa0386cdedaf6fc22996}{
\index{OutputUnit\_\-d@{OutputUnit\_\-d}!m\_\-num\_\-vcs@{m\_\-num\_\-vcs}}
\index{m\_\-num\_\-vcs@{m\_\-num\_\-vcs}!OutputUnit_d@{OutputUnit\_\-d}}
\subsubsection[{m\_\-num\_\-vcs}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf m\_\-num\_\-vcs}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classOutputUnit__d_a2e1a9213321dfa0386cdedaf6fc22996}
\hypertarget{classOutputUnit__d_a41dd924ecf4c977d4f4e5251e8076a0e}{
\index{OutputUnit\_\-d@{OutputUnit\_\-d}!m\_\-out\_\-buffer@{m\_\-out\_\-buffer}}
\index{m\_\-out\_\-buffer@{m\_\-out\_\-buffer}!OutputUnit_d@{OutputUnit\_\-d}}
\subsubsection[{m\_\-out\_\-buffer}]{\setlength{\rightskip}{0pt plus 5cm}{\bf flitBuffer\_\-d}$\ast$ {\bf m\_\-out\_\-buffer}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classOutputUnit__d_a41dd924ecf4c977d4f4e5251e8076a0e}
\hypertarget{classOutputUnit__d_ad6b6f290562e57546ef09c211721a199}{
\index{OutputUnit\_\-d@{OutputUnit\_\-d}!m\_\-out\_\-link@{m\_\-out\_\-link}}
\index{m\_\-out\_\-link@{m\_\-out\_\-link}!OutputUnit_d@{OutputUnit\_\-d}}
\subsubsection[{m\_\-out\_\-link}]{\setlength{\rightskip}{0pt plus 5cm}{\bf NetworkLink\_\-d}$\ast$ {\bf m\_\-out\_\-link}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classOutputUnit__d_ad6b6f290562e57546ef09c211721a199}
\hypertarget{classOutputUnit__d_ae14b2f87437379bc1ab5b4cc523e1406}{
\index{OutputUnit\_\-d@{OutputUnit\_\-d}!m\_\-outvc\_\-state@{m\_\-outvc\_\-state}}
\index{m\_\-outvc\_\-state@{m\_\-outvc\_\-state}!OutputUnit_d@{OutputUnit\_\-d}}
\subsubsection[{m\_\-outvc\_\-state}]{\setlength{\rightskip}{0pt plus 5cm}{\bf std::vector}$<${\bf OutVcState\_\-d} $\ast$$>$ {\bf m\_\-outvc\_\-state}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classOutputUnit__d_ae14b2f87437379bc1ab5b4cc523e1406}
\hypertarget{classOutputUnit__d_a81d53a65b375007289068e764da769d8}{
\index{OutputUnit\_\-d@{OutputUnit\_\-d}!m\_\-router@{m\_\-router}}
\index{m\_\-router@{m\_\-router}!OutputUnit_d@{OutputUnit\_\-d}}
\subsubsection[{m\_\-router}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Router\_\-d}$\ast$ {\bf m\_\-router}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classOutputUnit__d_a81d53a65b375007289068e764da769d8}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
mem/ruby/network/garnet/fixed-\/pipeline/\hyperlink{OutputUnit__d_8hh}{OutputUnit\_\-d.hh}\item 
mem/ruby/network/garnet/fixed-\/pipeline/\hyperlink{OutputUnit__d_8cc}{OutputUnit\_\-d.cc}\end{DoxyCompactItemize}
