<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス テンプレート DefaultCommit&lt; Impl &gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>クラス テンプレート DefaultCommit&lt; Impl &gt;</h1><!-- doxytag: class="DefaultCommit" -->
<p><code>#include &lt;<a class="el" href="commit_8hh_source.html">commit.hh</a>&gt;</code></p>

<p><a href="classDefaultCommit-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>構成</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit_1_1TrapEvent.html">TrapEvent</a></td></tr>
<tr><td colspan="2"><h2>Public 型</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a40bce497731b29d1d0756af6c5e40986">CommitStatus</a> { <a class="el" href="classDefaultCommit.html#a40bce497731b29d1d0756af6c5e40986a26bd8444261cc58df7a86753c79d2520">Active</a>, 
<a class="el" href="classDefaultCommit.html#a40bce497731b29d1d0756af6c5e40986a969c924a722daf6334fca64346092ae6">Inactive</a>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173c">ThreadStatus</a> { <br/>
&nbsp;&nbsp;<a class="el" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca2f5f2c4a8c4f4f0519d503dcdfbf55cb">Running</a>, 
<a class="el" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173cad3fa9ae9431d6cb1772f9d9df48cab19">Idle</a>, 
<a class="el" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca55ceab70c6d1094de92189130c899d84">ROBSquashing</a>, 
<a class="el" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca8c49adf6da5f507150d403610c684877">TrapPending</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca757a5840686b21827966401ca2499141">FetchTrapPending</a>, 
<a class="el" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca1f0e8d98cfb4db458b98f0b5e3f49466">SquashAfterPending</a>
<br/>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a2b5cad948a22cc08e48fe1a2226c8d05">CommitPolicy</a> { <a class="el" href="classDefaultCommit.html#a2b5cad948a22cc08e48fe1a2226c8d05a227598607ef691b05c9eb1ea73a06a2f">Aggressive</a>, 
<a class="el" href="classDefaultCommit.html#a2b5cad948a22cc08e48fe1a2226c8d05a5c08841de48c15133dd26a4d9d740a11">RoundRobin</a>, 
<a class="el" href="classDefaultCommit.html#a2b5cad948a22cc08e48fe1a2226c8d05a1ce7bd97138a7693d81bee46fa74a1cc">OldestReady</a>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef Impl::O3CPU&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a44622cf06940413482836cb62931ac3f">O3CPU</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef Impl::DynInstPtr&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef Impl::CPUPol&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a87d662eaeb9eab249d671b63cb4ba11a">CPUPol</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef CPUPol::RenameMap&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a341963bcea1928476182a17e357f98e3">RenameMap</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef CPUPol::ROB&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#aa480e463fb139d9966f38e3895a8b326">ROB</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef CPUPol::TimeStruct&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#ab7dd3632ef639702a5c6e7c2c3a2f82a">TimeStruct</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef CPUPol::FetchStruct&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a3aac8607069f16898ef53cfaa2d97aeb">FetchStruct</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef CPUPol::IEWStruct&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a7cf3f052f760b3a8a18623f792c10910">IEWStruct</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef CPUPol::RenameStruct&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a0c2a89ad2edad9ad605d0461f9b132a5">RenameStruct</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef CPUPol::Fetch&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#aea27de1f675f508e1eb618ac115ce05c">Fetch</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef CPUPol::IEW&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a2e298f790f528754f0e0ffa0cb8088f6">IEW</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="structO3ThreadState.html">O3ThreadState</a>&lt; Impl &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#ad5e0f9b655492f45720f8d756f11d3b5">Thread</a></td></tr>
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#ac5ef93cb7a09f9a537c03bb1d002f7a2">DefaultCommit</a> (<a class="el" href="classDefaultCommit.html#a44622cf06940413482836cb62931ac3f">O3CPU</a> *_cpu, DerivO3CPUParams *params)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a4dc637449366fcdfc4e764cdf12d9b11">regStats</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#aa2dab17a363fd4307274d579796adcf7">regProbePoints</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#aa8150d8ab62e6314eb07420a63aedce2">setThreads</a> (<a class="el" href="classstd_1_1vector.html">std::vector</a>&lt; <a class="el" href="structO3ThreadState.html">Thread</a> * &gt; &amp;threads)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a2b521ea5f191fff72265f60d4ed5187b">setTimeBuffer</a> (<a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt; <a class="el" href="structTimeStruct.html">TimeStruct</a> &gt; *tb_ptr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#ad1be90519aa7737ddf8e41de079a5ea9">setFetchQueue</a> (<a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt; <a class="el" href="classDefaultCommit.html#a3aac8607069f16898ef53cfaa2d97aeb">FetchStruct</a> &gt; *fq_ptr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a701624f92a819fe4205faede6e614d9f">setRenameQueue</a> (<a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt; <a class="el" href="classDefaultCommit.html#a0c2a89ad2edad9ad605d0461f9b132a5">RenameStruct</a> &gt; *rq_ptr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a6b8bf7d75423c9bccd93d50470f7f935">setIEWQueue</a> (<a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt; <a class="el" href="classDefaultCommit.html#a7cf3f052f760b3a8a18623f792c10910">IEWStruct</a> &gt; *iq_ptr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a4b6d8e4b2cf6249763ed2fc73eb1af47">setIEWStage</a> (<a class="el" href="classDefaultCommit.html#a2e298f790f528754f0e0ffa0cb8088f6">IEW</a> *iew_stage)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#aab96bdacf8bd420402cbb543f994e054">setActiveThreads</a> (<a class="el" href="classstd_1_1list.html">std::list</a>&lt; <a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> &gt; *at_ptr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a6f0aaedb2c39d674ef86c25d0aeb4211">setRenameMap</a> (<a class="el" href="classDefaultCommit.html#a341963bcea1928476182a17e357f98e3">RenameMap</a> rm_ptr[Impl::MaxThreads])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a46149ea78698ff6515a509c53d814193">setROB</a> (<a class="el" href="classROB.html">ROB</a> *rob_ptr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a31d4cbdab16d4ff8d6bc7f84ece727da">startupStage</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#af7d01b5776b9d8a0f218aec331ddaeb9">drain</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a8f020d3237536fe007fc488c4125c5d8">drainResume</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a0240eb42fa57fe5d3788093f62b77347">drainSanityCheck</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#adf5473c18a3d7c1e88c4a2072bce5526">isDrained</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a8674059ce345e23aac5086b2c3e24a43">takeOverFrom</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a873dd91783f9efb4a590aded1f70d6b0">tick</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#ad55316f5135cdae6aa6c5a763f6c3473">commit</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a3c8eae00d4f0d15336eec11f879146c2">numROBFreeEntries</a> (<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a7002d0f2beae1ce9a349218968ff97c3">generateTrapEvent</a> (<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a4adb99d6e22b7028a21e537331de6253">generateTCEvent</a> (<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">TheISA::PCState&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#af486ac7476906f63fc6696b3e76a411b">pcState</a> (<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#aaa8fbb79b13ce112b6d11f77bc3dd18f">pcState</a> (const TheISA::PCState &amp;val, <a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#afae6152cf4b3a51162d6e64247c1ac09">instAddr</a> (<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#af1caba1f04cf2802d742d1a16b961e79">nextInstAddr</a> (<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a697667536e687bd20e95084adc90d820">microPC</a> (<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td colspan="2"><h2>Public 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::queue&lt; <a class="el" href="classDefaultCommit.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#ab9508ede35e5a000089a1450342412be">skidBuffer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDefaultCommit.html#a2e298f790f528754f0e0ffa0cb8088f6">IEW</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a4e9ef25d8913b270d432be4bbfe4965c">iewStage</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classROB.html">ROB</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a></td></tr>
<tr><td colspan="2"><h2>Private メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a4bb9486757ce225941aaaf759b357a57">updateStatus</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a4c5106e8a165f2f63807122b80a4e580">setNextStatus</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a6949aa47bdaf57471e048da5c5b7c14c">robDoneSquashing</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#ac5a2190cdc184d1396bee3a6d99e34e7">changedROBEntries</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a9aa66ed2ab2c61003cbbc4f0cbb53a13">squashAll</a> (<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a2f79a5e45c55f3cba92021d1a5ebaadf">squashFromTrap</a> (<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#ac4c7a18be5c282d711310ffb7b6f82f7">squashFromTC</a> (<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a05dbc60b1e537c4a85f4ab6dec6ca9a4">squashFromSquashAfter</a> (<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#ad47b387a7bbc4a2153b50f96b8fd2a51">squashAfter</a> (<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid, <a class="el" href="classDefaultCommit.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;head_inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a1cb72a248a56b5dc2b2ed27db7560b90">handleInterrupt</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#ab9d20a05498697dfc59478b80a0726fb">propagateInterrupt</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#ac8b85fbfdf330d000c094a9d1886d264">commitInsts</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a5beb5c9ae170034a8abe7a578e04e47a">commitHead</a> (<a class="el" href="classDefaultCommit.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;head_inst, unsigned inst_num)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a8d0c39182cb7719942e865bcaaff769b">getInsts</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#affce029fbba116bb863eb2a3a7a5bb48">skidInsert</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a035349a9fd8a12938e7997be5a76211e">markCompletedInsts</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#ad313fd14604cfa26fec9c62dba3a7062">getCommittingThread</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a8aab9cacbc483081596b13ecd5192eb5">roundRobin</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a7b2c5e474b4fd5c54395b44f3b792d21">oldestReady</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a5bbf266cb0cc97eed138c8fe0d2d76b6">updateComInstStats</a> (<a class="el" href="classDefaultCommit.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;inst)</td></tr>
<tr><td colspan="2"><h2>Private 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDefaultCommit.html#a40bce497731b29d1d0756af6c5e40986">CommitStatus</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a0cf11ec4d376480eb733b779911f6446">_status</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDefaultCommit.html#a40bce497731b29d1d0756af6c5e40986">CommitStatus</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a96c6cf126a60fa550bd3e279b0f33838">_nextStatus</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173c">ThreadStatus</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a> [Impl::MaxThreads]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDefaultCommit.html#a2b5cad948a22cc08e48fe1a2226c8d05">CommitPolicy</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#acbc18713699043ca78415e9f03712ce1">commitPolicy</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classProbePointArg.html">ProbePointArg</a>&lt; <a class="el" href="classDefaultCommit.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &gt; *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#ae41ff03242cc6980c072e3ea824168ed">ppCommit</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classProbePointArg.html">ProbePointArg</a>&lt; <a class="el" href="classDefaultCommit.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &gt; *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a3c0bfd67f137dbd48bc31ade04a09cf0">ppCommitStall</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt; <a class="el" href="structTimeStruct.html">TimeStruct</a> &gt; *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a83f9ee976e732665aeb08dbc19acfd45">timeBuffer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt; <a class="el" href="structTimeStruct.html">TimeStruct</a> &gt;::wire&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt; <a class="el" href="structTimeStruct.html">TimeStruct</a> &gt;::wire&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a2b90705fefdf84763685650c2420f184">robInfoFromIEW</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt; <a class="el" href="classDefaultCommit.html#a3aac8607069f16898ef53cfaa2d97aeb">FetchStruct</a> &gt; *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a9a2f350be647ebfb6567172812db491a">fetchQueue</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt; <a class="el" href="classDefaultCommit.html#a3aac8607069f16898ef53cfaa2d97aeb">FetchStruct</a> &gt;::wire&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a2e3dd009c447d077f19b303b53b52fab">fromFetch</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt; <a class="el" href="classDefaultCommit.html#a7cf3f052f760b3a8a18623f792c10910">IEWStruct</a> &gt; *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a034b0868914c304e81c13c4e645d2616">iewQueue</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt; <a class="el" href="classDefaultCommit.html#a7cf3f052f760b3a8a18623f792c10910">IEWStruct</a> &gt;::wire&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a7968756e9e478ff69e80117ffbea4e46">fromIEW</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt; <a class="el" href="classDefaultCommit.html#a0c2a89ad2edad9ad605d0461f9b132a5">RenameStruct</a> &gt; *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#ae9b536282159ba75153a223be77515ba">renameQueue</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt; <a class="el" href="classDefaultCommit.html#a0c2a89ad2edad9ad605d0461f9b132a5">RenameStruct</a> &gt;::wire&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a2b6b1d4785b92bd378f8a7abc5b7e6b9">fromRename</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDefaultCommit.html#a44622cf06940413482836cb62931ac3f">O3CPU</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt; <a class="el" href="structO3ThreadState.html">Thread</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a2c7e870d4babdac0dc91fc7ffabd0f3d">wroteToTimeBuffer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a0d55e69b2ac22e8956d569bcf49e374b">changedROBNumEntries</a> [Impl::MaxThreads]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a06341c2bebd8c862e411e474e01c9c1a">squashCounter</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#af3547420a792f13034730b5f327a47ff">trapSquash</a> [Impl::MaxThreads]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a4fce523b7a931003efb9665605a87ca0">tcSquash</a> [Impl::MaxThreads]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDefaultCommit.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#af0c3f70b9be736dfd854ea22a0131e1c">squashAfterInst</a> [Impl::MaxThreads]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1list.html">std::list</a>&lt; <a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a4d358db7156d04e20b3269a53334dd19">priority_list</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCycles.html">Cycles</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a29f74b65419ba8f0ae250d65e960202b">iewToCommitDelay</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCycles.html">Cycles</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a6b6fe1148ed7c40758e45f351c375552">commitToIEWDelay</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCycles.html">Cycles</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#af699b6479037861b3c0e17d4bfab001d">renameToROBDelay</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCycles.html">Cycles</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a345f75b8236aa4fbe4ae976f8eb41a4c">fetchToCommitDelay</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a4b41704382bddb6ee06b5ce97b47dd7b">renameWidth</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#aeab15260a0ccc0ea470bb74344b63d17">commitWidth</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a35ee8ef405428b8d8595176ea6581681">numRobs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a88377f855dbf5adeeecb06b5bb821d35">numThreads</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a547316e5bf0dc6115209737cf68e9bb8">drainPending</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCycles.html">Cycles</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a0bfffaa2e5f9c7e79353e61146950a9a">trapLatency</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a7387b2358d0f884ccd5c383e6199f035">interrupt</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">TheISA::PCState&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a6e6091c9272a281b8693c0f46279cad0">pc</a> [Impl::MaxThreads]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a1d81dc5c05e15057c1985acc39285540">youngestSeqNum</a> [Impl::MaxThreads]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a4feaee1ef312dda13cff064de20dfbf3">lastCommitedSeqNum</a> [Impl::MaxThreads]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a4e366a325229901e41b68ff07e5f556a">trapInFlight</a> [Impl::MaxThreads]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a0fd9fcb6eed99c11c7fa61c7218ecf49">committedStores</a> [Impl::MaxThreads]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#aa2d2d9b2eec88d804e25d1cb37aa6083">checkEmptyROB</a> [Impl::MaxThreads]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1list.html">std::list</a>&lt; <a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> &gt; *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#af6eaea53db532812052f71bf0380dab5">activeThreads</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDefaultCommit.html#a341963bcea1928476182a17e357f98e3">RenameMap</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#ac305c101c17d28451cc1f023b187b08b">renameMap</a> [Impl::MaxThreads]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a893f45e65e8a47bca58661db7662cd9c">canHandleInterrupts</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a7c6eee41dc1f18f1f485518f8b066033">avoidQuiesceLiveLock</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a66220ac67b22e3faf86b642ecc217546">commitSquashedInsts</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a89ef54d73dbded95395181561013b0b6">commitSquashEvents</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#ab930685f4a43596f8a315d7dc9f5c2e4">commitNonSpecStalls</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a9cbfa1c154e785e3c45699b02a94053d">branchMispredicts</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Distribution.html">Stats::Distribution</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#ab1b6b40d7860fef5059f9bf1b843b366">numCommittedDist</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a23714085cc19270c017a67c9a508601a">instsCommitted</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a1549eb9ffd1727a5c1937e7520a0bcc8">opsCommitted</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a4cb385aa97530dd2621c74f376839e79">statComSwp</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#afe174c4b8e70d840a2e91bf1ca3092ac">statComRefs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a91927819864b9dc9d1ac706dc55d5dce">statComLoads</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a9b029ac182d54199247dfa90ed86d368">statComMembars</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a39a7da0b20d1e83ccfe4b2f2b19d6e94">statComBranches</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a2be26eb7dfa8b9e36d0c6fdcaea8d818">statComFloating</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#ae562968e75d903bd12352af65cc558b6">statComInteger</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#acd1aba8c2f19771552212e9c2917ac6b">statComFunctionCalls</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Vector2d.html">Stats::Vector2d</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#ad0d59ba553bc001d75aff706903e2f77">statCommittedInstType</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a16d1a4bbb2cb87488fd876fbf6e7a518">commitEligibleSamples</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDefaultCommit.html#a26f5138543e43cbaba9459036fc0b04c">commitEligible</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>説明</h2>
<h3>template&lt;class Impl&gt;<br/>
 class DefaultCommit&lt; Impl &gt;</h3>

<p><a class="el" href="classDefaultCommit.html">DefaultCommit</a> handles single threaded and SMT commit. Its width is specified by the parameters; each cycle it tries to commit that many instructions. The SMT policy decides which thread it tries to commit instructions from. Non- speculative instructions must reach the head of the <a class="el" href="classROB.html">ROB</a> before they are ready to execute; once they reach the head, commit will broadcast the instruction's sequence number to the previous stages so that they can issue/ execute the instruction. Only one non-speculative instruction is handled per cycle. Commit is responsible for handling all back-end initiated redirects. It receives the redirect, and then broadcasts it to all stages, indicating the sequence number they should squash until, and any necessary branch misprediction information as well. It priortizes redirects by instruction's age, only broadcasting a redirect if it corresponds to an instruction that should currently be in the <a class="el" href="classROB.html">ROB</a>. This is done by tracking the sequence number of the youngest instruction in the <a class="el" href="classROB.html">ROB</a>, which gets updated to any squashing instruction's sequence number, and only broadcasting a redirect if it corresponds to an older instruction. Commit also supports multiple cycle squashing, to model a <a class="el" href="classROB.html">ROB</a> that can only remove a certain number of instructions per cycle. </p>
<hr/><h2>型定義</h2>
<a class="anchor" id="a87d662eaeb9eab249d671b63cb4ba11a"></a><!-- doxytag: member="DefaultCommit::CPUPol" ref="a87d662eaeb9eab249d671b63cb4ba11a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef Impl::CPUPol <a class="el" href="classDefaultCommit.html#a87d662eaeb9eab249d671b63cb4ba11a">CPUPol</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a028ce10889c5f6450239d9e9a7347976"></a><!-- doxytag: member="DefaultCommit::DynInstPtr" ref="a028ce10889c5f6450239d9e9a7347976" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef Impl::DynInstPtr <a class="el" href="classDefaultCommit.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aea27de1f675f508e1eb618ac115ce05c"></a><!-- doxytag: member="DefaultCommit::Fetch" ref="aea27de1f675f508e1eb618ac115ce05c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef CPUPol::Fetch <a class="el" href="classDefaultCommit.html#aea27de1f675f508e1eb618ac115ce05c">Fetch</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3aac8607069f16898ef53cfaa2d97aeb"></a><!-- doxytag: member="DefaultCommit::FetchStruct" ref="a3aac8607069f16898ef53cfaa2d97aeb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef CPUPol::FetchStruct <a class="el" href="classDefaultCommit.html#a3aac8607069f16898ef53cfaa2d97aeb">FetchStruct</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2e298f790f528754f0e0ffa0cb8088f6"></a><!-- doxytag: member="DefaultCommit::IEW" ref="a2e298f790f528754f0e0ffa0cb8088f6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef CPUPol::IEW <a class="el" href="classDefaultCommit.html#a2e298f790f528754f0e0ffa0cb8088f6">IEW</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a7cf3f052f760b3a8a18623f792c10910"></a><!-- doxytag: member="DefaultCommit::IEWStruct" ref="a7cf3f052f760b3a8a18623f792c10910" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef CPUPol::IEWStruct <a class="el" href="classDefaultCommit.html#a7cf3f052f760b3a8a18623f792c10910">IEWStruct</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a44622cf06940413482836cb62931ac3f"></a><!-- doxytag: member="DefaultCommit::O3CPU" ref="a44622cf06940413482836cb62931ac3f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef Impl::O3CPU <a class="el" href="classDefaultCommit.html#a44622cf06940413482836cb62931ac3f">O3CPU</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a341963bcea1928476182a17e357f98e3"></a><!-- doxytag: member="DefaultCommit::RenameMap" ref="a341963bcea1928476182a17e357f98e3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef CPUPol::RenameMap <a class="el" href="classDefaultCommit.html#a341963bcea1928476182a17e357f98e3">RenameMap</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0c2a89ad2edad9ad605d0461f9b132a5"></a><!-- doxytag: member="DefaultCommit::RenameStruct" ref="a0c2a89ad2edad9ad605d0461f9b132a5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef CPUPol::RenameStruct <a class="el" href="classDefaultCommit.html#a0c2a89ad2edad9ad605d0461f9b132a5">RenameStruct</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa480e463fb139d9966f38e3895a8b326"></a><!-- doxytag: member="DefaultCommit::ROB" ref="aa480e463fb139d9966f38e3895a8b326" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef CPUPol::ROB <a class="el" href="classROB.html">ROB</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad5e0f9b655492f45720f8d756f11d3b5"></a><!-- doxytag: member="DefaultCommit::Thread" ref="ad5e0f9b655492f45720f8d756f11d3b5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="structO3ThreadState.html">O3ThreadState</a>&lt;Impl&gt; <a class="el" href="structO3ThreadState.html">Thread</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab7dd3632ef639702a5c6e7c2c3a2f82a"></a><!-- doxytag: member="DefaultCommit::TimeStruct" ref="ab7dd3632ef639702a5c6e7c2c3a2f82a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef CPUPol::TimeStruct <a class="el" href="structTimeStruct.html">TimeStruct</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>列挙型</h2>
<a class="anchor" id="a2b5cad948a22cc08e48fe1a2226c8d05"></a><!-- doxytag: member="DefaultCommit::CommitPolicy" ref="a2b5cad948a22cc08e48fe1a2226c8d05" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classDefaultCommit.html#a2b5cad948a22cc08e48fe1a2226c8d05">CommitPolicy</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Commit policy for SMT mode. </p>
<dl><dt><b>列挙型の値: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a2b5cad948a22cc08e48fe1a2226c8d05a227598607ef691b05c9eb1ea73a06a2f"></a><!-- doxytag: member="Aggressive" ref="a2b5cad948a22cc08e48fe1a2226c8d05a227598607ef691b05c9eb1ea73a06a2f" args="" -->Aggressive</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a2b5cad948a22cc08e48fe1a2226c8d05a5c08841de48c15133dd26a4d9d740a11"></a><!-- doxytag: member="RoundRobin" ref="a2b5cad948a22cc08e48fe1a2226c8d05a5c08841de48c15133dd26a4d9d740a11" args="" -->RoundRobin</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a2b5cad948a22cc08e48fe1a2226c8d05a1ce7bd97138a7693d81bee46fa74a1cc"></a><!-- doxytag: member="OldestReady" ref="a2b5cad948a22cc08e48fe1a2226c8d05a1ce7bd97138a7693d81bee46fa74a1cc" args="" -->OldestReady</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00138"></a>00138                       {
<a name="l00139"></a>00139         <a class="code" href="classDefaultCommit.html#a2b5cad948a22cc08e48fe1a2226c8d05a227598607ef691b05c9eb1ea73a06a2f">Aggressive</a>,
<a name="l00140"></a>00140         <a class="code" href="classDefaultCommit.html#a2b5cad948a22cc08e48fe1a2226c8d05a5c08841de48c15133dd26a4d9d740a11">RoundRobin</a>,
<a name="l00141"></a>00141         <a class="code" href="classDefaultCommit.html#a2b5cad948a22cc08e48fe1a2226c8d05a1ce7bd97138a7693d81bee46fa74a1cc">OldestReady</a>
<a name="l00142"></a>00142     };
</pre></div></p>

</div>
</div>
<a class="anchor" id="a40bce497731b29d1d0756af6c5e40986"></a><!-- doxytag: member="DefaultCommit::CommitStatus" ref="a40bce497731b29d1d0756af6c5e40986" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classDefaultCommit.html#a40bce497731b29d1d0756af6c5e40986">CommitStatus</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Overall commit status. Used to determine if the CPU can deschedule itself due to a lack of activity. </p>
<dl><dt><b>列挙型の値: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a40bce497731b29d1d0756af6c5e40986a26bd8444261cc58df7a86753c79d2520"></a><!-- doxytag: member="Active" ref="a40bce497731b29d1d0756af6c5e40986a26bd8444261cc58df7a86753c79d2520" args="" -->Active</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a40bce497731b29d1d0756af6c5e40986a969c924a722daf6334fca64346092ae6"></a><!-- doxytag: member="Inactive" ref="a40bce497731b29d1d0756af6c5e40986a969c924a722daf6334fca64346092ae6" args="" -->Inactive</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00122"></a>00122                      {
<a name="l00123"></a>00123         <a class="code" href="classDefaultCommit.html#a40bce497731b29d1d0756af6c5e40986a26bd8444261cc58df7a86753c79d2520">Active</a>,
<a name="l00124"></a>00124         <a class="code" href="classDefaultCommit.html#a40bce497731b29d1d0756af6c5e40986a969c924a722daf6334fca64346092ae6">Inactive</a>
<a name="l00125"></a>00125     };
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae2739961013a00cede621d4d72f2173c"></a><!-- doxytag: member="DefaultCommit::ThreadStatus" ref="ae2739961013a00cede621d4d72f2173c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173c">ThreadStatus</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Individual thread status. </p>
<dl><dt><b>列挙型の値: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ae2739961013a00cede621d4d72f2173ca2f5f2c4a8c4f4f0519d503dcdfbf55cb"></a><!-- doxytag: member="Running" ref="ae2739961013a00cede621d4d72f2173ca2f5f2c4a8c4f4f0519d503dcdfbf55cb" args="" -->Running</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae2739961013a00cede621d4d72f2173cad3fa9ae9431d6cb1772f9d9df48cab19"></a><!-- doxytag: member="Idle" ref="ae2739961013a00cede621d4d72f2173cad3fa9ae9431d6cb1772f9d9df48cab19" args="" -->Idle</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae2739961013a00cede621d4d72f2173ca55ceab70c6d1094de92189130c899d84"></a><!-- doxytag: member="ROBSquashing" ref="ae2739961013a00cede621d4d72f2173ca55ceab70c6d1094de92189130c899d84" args="" -->ROBSquashing</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae2739961013a00cede621d4d72f2173ca8c49adf6da5f507150d403610c684877"></a><!-- doxytag: member="TrapPending" ref="ae2739961013a00cede621d4d72f2173ca8c49adf6da5f507150d403610c684877" args="" -->TrapPending</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae2739961013a00cede621d4d72f2173ca757a5840686b21827966401ca2499141"></a><!-- doxytag: member="FetchTrapPending" ref="ae2739961013a00cede621d4d72f2173ca757a5840686b21827966401ca2499141" args="" -->FetchTrapPending</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae2739961013a00cede621d4d72f2173ca1f0e8d98cfb4db458b98f0b5e3f49466"></a><!-- doxytag: member="SquashAfterPending" ref="ae2739961013a00cede621d4d72f2173ca1f0e8d98cfb4db458b98f0b5e3f49466" args="" -->SquashAfterPending</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00128"></a>00128                       {
<a name="l00129"></a>00129         <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca2f5f2c4a8c4f4f0519d503dcdfbf55cb">Running</a>,
<a name="l00130"></a>00130         <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173cad3fa9ae9431d6cb1772f9d9df48cab19">Idle</a>,
<a name="l00131"></a>00131         <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca55ceab70c6d1094de92189130c899d84">ROBSquashing</a>,
<a name="l00132"></a>00132         <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca8c49adf6da5f507150d403610c684877">TrapPending</a>,
<a name="l00133"></a>00133         <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca757a5840686b21827966401ca2499141">FetchTrapPending</a>,
<a name="l00134"></a>00134         <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca1f0e8d98cfb4db458b98f0b5e3f49466">SquashAfterPending</a>, <span class="comment">//&lt; Committing instructions before a squash.</span>
<a name="l00135"></a>00135     };
</pre></div></p>

</div>
</div>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="ac5ef93cb7a09f9a537c03bb1d002f7a2"></a><!-- doxytag: member="DefaultCommit::DefaultCommit" ref="ac5ef93cb7a09f9a537c03bb1d002f7a2" args="(O3CPU *_cpu, DerivO3CPUParams *params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDefaultCommit.html">DefaultCommit</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDefaultCommit.html#a44622cf06940413482836cb62931ac3f">O3CPU</a> *&nbsp;</td>
          <td class="paramname"> <em>_cpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DerivO3CPUParams *&nbsp;</td>
          <td class="paramname"> <em>params</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Construct a <a class="el" href="classDefaultCommit.html">DefaultCommit</a> with the given parameters. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00097"></a>00097     : <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>(_cpu),
<a name="l00098"></a>00098       <a class="code" href="classDefaultCommit.html#a06341c2bebd8c862e411e474e01c9c1a">squashCounter</a>(0),
<a name="l00099"></a>00099       <a class="code" href="classDefaultCommit.html#a29f74b65419ba8f0ae250d65e960202b">iewToCommitDelay</a>(params-&gt;iewToCommitDelay),
<a name="l00100"></a>00100       <a class="code" href="classDefaultCommit.html#a6b6fe1148ed7c40758e45f351c375552">commitToIEWDelay</a>(params-&gt;commitToIEWDelay),
<a name="l00101"></a>00101       <a class="code" href="classDefaultCommit.html#af699b6479037861b3c0e17d4bfab001d">renameToROBDelay</a>(params-&gt;renameToROBDelay),
<a name="l00102"></a>00102       <a class="code" href="classDefaultCommit.html#a345f75b8236aa4fbe4ae976f8eb41a4c">fetchToCommitDelay</a>(params-&gt;commitToFetchDelay),
<a name="l00103"></a>00103       <a class="code" href="classDefaultCommit.html#a4b41704382bddb6ee06b5ce97b47dd7b">renameWidth</a>(params-&gt;renameWidth),
<a name="l00104"></a>00104       <a class="code" href="classDefaultCommit.html#aeab15260a0ccc0ea470bb74344b63d17">commitWidth</a>(params-&gt;commitWidth),
<a name="l00105"></a>00105       <a class="code" href="classDefaultCommit.html#a88377f855dbf5adeeecb06b5bb821d35">numThreads</a>(params-&gt;numThreads),
<a name="l00106"></a>00106       <a class="code" href="classDefaultCommit.html#a547316e5bf0dc6115209737cf68e9bb8">drainPending</a>(<span class="keyword">false</span>),
<a name="l00107"></a>00107       <a class="code" href="classDefaultCommit.html#a0bfffaa2e5f9c7e79353e61146950a9a">trapLatency</a>(params-&gt;trapLatency),
<a name="l00108"></a>00108       <a class="code" href="classDefaultCommit.html#a893f45e65e8a47bca58661db7662cd9c">canHandleInterrupts</a>(<span class="keyword">true</span>),
<a name="l00109"></a>00109       <a class="code" href="classDefaultCommit.html#a7c6eee41dc1f18f1f485518f8b066033">avoidQuiesceLiveLock</a>(<span class="keyword">false</span>)
<a name="l00110"></a>00110 {
<a name="l00111"></a>00111     <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#aeab15260a0ccc0ea470bb74344b63d17">commitWidth</a> &gt; Impl::MaxWidth)
<a name="l00112"></a>00112         <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;commitWidth (%d) is larger than compiled limit (%d),\n&quot;</span>
<a name="l00113"></a>00113              <span class="stringliteral">&quot;\tincrease MaxWidth in src/cpu/o3/impl.hh\n&quot;</span>,
<a name="l00114"></a>00114              <a class="code" href="classDefaultCommit.html#aeab15260a0ccc0ea470bb74344b63d17">commitWidth</a>, static_cast&lt;int&gt;(Impl::MaxWidth));
<a name="l00115"></a>00115 
<a name="l00116"></a>00116     <a class="code" href="classDefaultCommit.html#a0cf11ec4d376480eb733b779911f6446">_status</a> = <a class="code" href="classDefaultCommit.html#a40bce497731b29d1d0756af6c5e40986a26bd8444261cc58df7a86753c79d2520">Active</a>;
<a name="l00117"></a>00117     <a class="code" href="classDefaultCommit.html#a96c6cf126a60fa550bd3e279b0f33838">_nextStatus</a> = <a class="code" href="classDefaultCommit.html#a40bce497731b29d1d0756af6c5e40986a969c924a722daf6334fca64346092ae6">Inactive</a>;
<a name="l00118"></a>00118     std::string policy = params-&gt;smtCommitPolicy;
<a name="l00119"></a>00119 
<a name="l00120"></a>00120     <span class="comment">//Convert string to lowercase</span>
<a name="l00121"></a>00121     std::transform(policy.begin(), policy.end(), policy.begin(),
<a name="l00122"></a>00122                    (int(*)(int)) tolower);
<a name="l00123"></a>00123 
<a name="l00124"></a>00124     <span class="comment">//Assign commit policy</span>
<a name="l00125"></a>00125     <span class="keywordflow">if</span> (policy == <span class="stringliteral">&quot;aggressive&quot;</span>){
<a name="l00126"></a>00126         <a class="code" href="classDefaultCommit.html#acbc18713699043ca78415e9f03712ce1">commitPolicy</a> = <a class="code" href="classDefaultCommit.html#a2b5cad948a22cc08e48fe1a2226c8d05a227598607ef691b05c9eb1ea73a06a2f">Aggressive</a>;
<a name="l00127"></a>00127 
<a name="l00128"></a>00128         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit,<span class="stringliteral">&quot;Commit Policy set to Aggressive.\n&quot;</span>);
<a name="l00129"></a>00129     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (policy == <span class="stringliteral">&quot;roundrobin&quot;</span>){
<a name="l00130"></a>00130         <a class="code" href="classDefaultCommit.html#acbc18713699043ca78415e9f03712ce1">commitPolicy</a> = <a class="code" href="classDefaultCommit.html#a2b5cad948a22cc08e48fe1a2226c8d05a5c08841de48c15133dd26a4d9d740a11">RoundRobin</a>;
<a name="l00131"></a>00131 
<a name="l00132"></a>00132         <span class="comment">//Set-Up Priority List</span>
<a name="l00133"></a>00133         <span class="keywordflow">for</span> (<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = 0; tid &lt; <a class="code" href="classDefaultCommit.html#a88377f855dbf5adeeecb06b5bb821d35">numThreads</a>; tid++) {
<a name="l00134"></a>00134             <a class="code" href="classDefaultCommit.html#a4d358db7156d04e20b3269a53334dd19">priority_list</a>.push_back(tid);
<a name="l00135"></a>00135         }
<a name="l00136"></a>00136 
<a name="l00137"></a>00137         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit,<span class="stringliteral">&quot;Commit Policy set to Round Robin.\n&quot;</span>);
<a name="l00138"></a>00138     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (policy == <span class="stringliteral">&quot;oldestready&quot;</span>){
<a name="l00139"></a>00139         <a class="code" href="classDefaultCommit.html#acbc18713699043ca78415e9f03712ce1">commitPolicy</a> = <a class="code" href="classDefaultCommit.html#a2b5cad948a22cc08e48fe1a2226c8d05a1ce7bd97138a7693d81bee46fa74a1cc">OldestReady</a>;
<a name="l00140"></a>00140 
<a name="l00141"></a>00141         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit,<span class="stringliteral">&quot;Commit Policy set to Oldest Ready.&quot;</span>);
<a name="l00142"></a>00142     } <span class="keywordflow">else</span> {
<a name="l00143"></a>00143         assert(0 &amp;&amp; <span class="stringliteral">&quot;Invalid SMT Commit Policy. Options Are: {Aggressive,&quot;</span>
<a name="l00144"></a>00144                <span class="stringliteral">&quot;RoundRobin,OldestReady}&quot;</span>);
<a name="l00145"></a>00145     }
<a name="l00146"></a>00146 
<a name="l00147"></a>00147     <span class="keywordflow">for</span> (<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = 0; tid &lt; numThreads; tid++) {
<a name="l00148"></a>00148         <a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] = <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173cad3fa9ae9431d6cb1772f9d9df48cab19">Idle</a>;
<a name="l00149"></a>00149         <a class="code" href="classDefaultCommit.html#a0d55e69b2ac22e8956d569bcf49e374b">changedROBNumEntries</a>[tid] = <span class="keyword">false</span>;
<a name="l00150"></a>00150         <a class="code" href="classDefaultCommit.html#aa2d2d9b2eec88d804e25d1cb37aa6083">checkEmptyROB</a>[tid] = <span class="keyword">false</span>;
<a name="l00151"></a>00151         <a class="code" href="classDefaultCommit.html#a4e366a325229901e41b68ff07e5f556a">trapInFlight</a>[tid] = <span class="keyword">false</span>;
<a name="l00152"></a>00152         <a class="code" href="classDefaultCommit.html#a0fd9fcb6eed99c11c7fa61c7218ecf49">committedStores</a>[tid] = <span class="keyword">false</span>;
<a name="l00153"></a>00153         <a class="code" href="classDefaultCommit.html#af3547420a792f13034730b5f327a47ff">trapSquash</a>[tid] = <span class="keyword">false</span>;
<a name="l00154"></a>00154         <a class="code" href="classDefaultCommit.html#a4fce523b7a931003efb9665605a87ca0">tcSquash</a>[tid] = <span class="keyword">false</span>;
<a name="l00155"></a>00155         <a class="code" href="classDefaultCommit.html#a6e6091c9272a281b8693c0f46279cad0">pc</a>[tid].set(0);
<a name="l00156"></a>00156         <a class="code" href="classDefaultCommit.html#a4feaee1ef312dda13cff064de20dfbf3">lastCommitedSeqNum</a>[tid] = 0;
<a name="l00157"></a>00157         <a class="code" href="classDefaultCommit.html#af0c3f70b9be736dfd854ea22a0131e1c">squashAfterInst</a>[tid] = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00158"></a>00158     }
<a name="l00159"></a>00159     <a class="code" href="classDefaultCommit.html#a7387b2358d0f884ccd5c383e6199f035">interrupt</a> = <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00160"></a>00160 }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="ac5a2190cdc184d1396bee3a6d99e34e7"></a><!-- doxytag: member="DefaultCommit::changedROBEntries" ref="ac5a2190cdc184d1396bee3a6d99e34e7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool changedROBEntries </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns if any of the threads have the number of <a class="el" href="classROB.html">ROB</a> entries changed on this cycle. Used to determine if the number of free <a class="el" href="classROB.html">ROB</a> entries needs to be sent back to previous stages. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00524"></a>00524 {
<a name="l00525"></a>00525     <a class="code" href="classstd_1_1list.html">list&lt;ThreadID&gt;::iterator</a> threads = <a class="code" href="classDefaultCommit.html#af6eaea53db532812052f71bf0380dab5">activeThreads</a>-&gt;begin();
<a name="l00526"></a>00526     <a class="code" href="classstd_1_1list.html">list&lt;ThreadID&gt;::iterator</a> end = <a class="code" href="classDefaultCommit.html#af6eaea53db532812052f71bf0380dab5">activeThreads</a>-&gt;end();
<a name="l00527"></a>00527 
<a name="l00528"></a>00528     <span class="keywordflow">while</span> (threads != end) {
<a name="l00529"></a>00529         <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = *threads++;
<a name="l00530"></a>00530 
<a name="l00531"></a>00531         <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a0d55e69b2ac22e8956d569bcf49e374b">changedROBNumEntries</a>[tid]) {
<a name="l00532"></a>00532             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00533"></a>00533         }
<a name="l00534"></a>00534     }
<a name="l00535"></a>00535 
<a name="l00536"></a>00536     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00537"></a>00537 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad55316f5135cdae6aa6c5a763f6c3473"></a><!-- doxytag: member="DefaultCommit::commit" ref="ad55316f5135cdae6aa6c5a763f6c3473" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void commit </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Handles any squashes that are sent from IEW, and adds instructions to the <a class="el" href="classROB.html">ROB</a> and tries to commit instructions. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00828"></a>00828 {
<a name="l00829"></a>00829     <span class="keywordflow">if</span> (<a class="code" href="full__system_8hh.html#af929576af6f85c8849704b66d04b8370">FullSystem</a>) {
<a name="l00830"></a>00830         <span class="comment">// Check if we have a interrupt and get read to handle it</span>
<a name="l00831"></a>00831         <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;checkInterrupts(<a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;tcBase(0)))
<a name="l00832"></a>00832             <a class="code" href="classDefaultCommit.html#ab9d20a05498697dfc59478b80a0726fb">propagateInterrupt</a>();
<a name="l00833"></a>00833     }
<a name="l00834"></a>00834 
<a name="l00836"></a>00836     <span class="comment">// Check for any possible squashes, handle them first</span>
<a name="l00838"></a>00838 <span class="comment"></span>    <a class="code" href="classstd_1_1list.html">list&lt;ThreadID&gt;::iterator</a> threads = <a class="code" href="classDefaultCommit.html#af6eaea53db532812052f71bf0380dab5">activeThreads</a>-&gt;begin();
<a name="l00839"></a>00839     <a class="code" href="classstd_1_1list.html">list&lt;ThreadID&gt;::iterator</a> end = <a class="code" href="classDefaultCommit.html#af6eaea53db532812052f71bf0380dab5">activeThreads</a>-&gt;end();
<a name="l00840"></a>00840 
<a name="l00841"></a>00841     <span class="keywordflow">while</span> (threads != end) {
<a name="l00842"></a>00842         <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = *threads++;
<a name="l00843"></a>00843 
<a name="l00844"></a>00844         <span class="comment">// Not sure which one takes priority.  I think if we have</span>
<a name="l00845"></a>00845         <span class="comment">// both, that&apos;s a bad sign.</span>
<a name="l00846"></a>00846         <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#af3547420a792f13034730b5f327a47ff">trapSquash</a>[tid]) {
<a name="l00847"></a>00847             assert(!<a class="code" href="classDefaultCommit.html#a4fce523b7a931003efb9665605a87ca0">tcSquash</a>[tid]);
<a name="l00848"></a>00848             <a class="code" href="classDefaultCommit.html#a2f79a5e45c55f3cba92021d1a5ebaadf">squashFromTrap</a>(tid);
<a name="l00849"></a>00849         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a4fce523b7a931003efb9665605a87ca0">tcSquash</a>[tid]) {
<a name="l00850"></a>00850             assert(<a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] != <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca8c49adf6da5f507150d403610c684877">TrapPending</a>);
<a name="l00851"></a>00851             <a class="code" href="classDefaultCommit.html#ac4c7a18be5c282d711310ffb7b6f82f7">squashFromTC</a>(tid);
<a name="l00852"></a>00852         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] == <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca1f0e8d98cfb4db458b98f0b5e3f49466">SquashAfterPending</a>) {
<a name="l00853"></a>00853             <span class="comment">// A squash from the previous cycle of the commit stage (i.e.,</span>
<a name="l00854"></a>00854             <span class="comment">// commitInsts() called squashAfter) is pending. Squash the</span>
<a name="l00855"></a>00855             <span class="comment">// thread now.</span>
<a name="l00856"></a>00856             <a class="code" href="classDefaultCommit.html#a05dbc60b1e537c4a85f4ab6dec6ca9a4">squashFromSquashAfter</a>(tid);
<a name="l00857"></a>00857         }
<a name="l00858"></a>00858 
<a name="l00859"></a>00859         <span class="comment">// Squashed sequence number must be older than youngest valid</span>
<a name="l00860"></a>00860         <span class="comment">// instruction in the ROB. This prevents squashes from younger</span>
<a name="l00861"></a>00861         <span class="comment">// instructions overriding squashes from older instructions.</span>
<a name="l00862"></a>00862         <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a7968756e9e478ff69e80117ffbea4e46">fromIEW</a>-&gt;squash[tid] &amp;&amp;
<a name="l00863"></a>00863             <a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] != <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca8c49adf6da5f507150d403610c684877">TrapPending</a> &amp;&amp;
<a name="l00864"></a>00864             <a class="code" href="classDefaultCommit.html#a7968756e9e478ff69e80117ffbea4e46">fromIEW</a>-&gt;squashedSeqNum[tid] &lt;= <a class="code" href="classDefaultCommit.html#a1d81dc5c05e15057c1985acc39285540">youngestSeqNum</a>[tid]) {
<a name="l00865"></a>00865 
<a name="l00866"></a>00866             <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a7968756e9e478ff69e80117ffbea4e46">fromIEW</a>-&gt;mispredictInst[tid]) {
<a name="l00867"></a>00867                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit,
<a name="l00868"></a>00868                     <span class="stringliteral">&quot;[tid:%i]: Squashing due to branch mispred PC:%#x [sn:%i]\n&quot;</span>,
<a name="l00869"></a>00869                     tid,
<a name="l00870"></a>00870                     <a class="code" href="classDefaultCommit.html#a7968756e9e478ff69e80117ffbea4e46">fromIEW</a>-&gt;mispredictInst[tid]-&gt;instAddr(),
<a name="l00871"></a>00871                     <a class="code" href="classDefaultCommit.html#a7968756e9e478ff69e80117ffbea4e46">fromIEW</a>-&gt;squashedSeqNum[tid]);
<a name="l00872"></a>00872             } <span class="keywordflow">else</span> {
<a name="l00873"></a>00873                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit,
<a name="l00874"></a>00874                     <span class="stringliteral">&quot;[tid:%i]: Squashing due to order violation [sn:%i]\n&quot;</span>,
<a name="l00875"></a>00875                     tid, <a class="code" href="classDefaultCommit.html#a7968756e9e478ff69e80117ffbea4e46">fromIEW</a>-&gt;squashedSeqNum[tid]);
<a name="l00876"></a>00876             }
<a name="l00877"></a>00877 
<a name="l00878"></a>00878             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;[tid:%i]: Redirecting to PC %#x\n&quot;</span>,
<a name="l00879"></a>00879                     tid,
<a name="l00880"></a>00880                     <a class="code" href="classDefaultCommit.html#a7968756e9e478ff69e80117ffbea4e46">fromIEW</a>-&gt;pc[tid].nextInstAddr());
<a name="l00881"></a>00881 
<a name="l00882"></a>00882             <a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] = <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca55ceab70c6d1094de92189130c899d84">ROBSquashing</a>;
<a name="l00883"></a>00883 
<a name="l00884"></a>00884             <span class="comment">// If we want to include the squashing instruction in the squash,</span>
<a name="l00885"></a>00885             <span class="comment">// then use one older sequence number.</span>
<a name="l00886"></a>00886             <a class="code" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> squashed_inst = <a class="code" href="classDefaultCommit.html#a7968756e9e478ff69e80117ffbea4e46">fromIEW</a>-&gt;squashedSeqNum[tid];
<a name="l00887"></a>00887 
<a name="l00888"></a>00888             <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a7968756e9e478ff69e80117ffbea4e46">fromIEW</a>-&gt;includeSquashInst[tid]) {
<a name="l00889"></a>00889                 squashed_inst--;
<a name="l00890"></a>00890             }
<a name="l00891"></a>00891 
<a name="l00892"></a>00892             <span class="comment">// All younger instructions will be squashed. Set the sequence</span>
<a name="l00893"></a>00893             <span class="comment">// number as the youngest instruction in the ROB.</span>
<a name="l00894"></a>00894             <a class="code" href="classDefaultCommit.html#a1d81dc5c05e15057c1985acc39285540">youngestSeqNum</a>[tid] = squashed_inst;
<a name="l00895"></a>00895 
<a name="l00896"></a>00896             <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#aee9dc23de90acd20200641407a3bd1da">squash</a>(squashed_inst, tid);
<a name="l00897"></a>00897             <a class="code" href="classDefaultCommit.html#a0d55e69b2ac22e8956d569bcf49e374b">changedROBNumEntries</a>[tid] = <span class="keyword">true</span>;
<a name="l00898"></a>00898 
<a name="l00899"></a>00899             <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].doneSeqNum = squashed_inst;
<a name="l00900"></a>00900 
<a name="l00901"></a>00901             <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].squash = <span class="keyword">true</span>;
<a name="l00902"></a>00902 
<a name="l00903"></a>00903             <span class="comment">// Send back the rob squashing signal so other stages know that</span>
<a name="l00904"></a>00904             <span class="comment">// the ROB is in the process of squashing.</span>
<a name="l00905"></a>00905             <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].robSquashing = <span class="keyword">true</span>;
<a name="l00906"></a>00906 
<a name="l00907"></a>00907             <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].mispredictInst =
<a name="l00908"></a>00908                 <a class="code" href="classDefaultCommit.html#a7968756e9e478ff69e80117ffbea4e46">fromIEW</a>-&gt;mispredictInst[tid];
<a name="l00909"></a>00909             <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].branchTaken =
<a name="l00910"></a>00910                 <a class="code" href="classDefaultCommit.html#a7968756e9e478ff69e80117ffbea4e46">fromIEW</a>-&gt;branchTaken[tid];
<a name="l00911"></a>00911             <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].squashInst =
<a name="l00912"></a>00912                                     <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#a6b0d3a4acdaebcd1eb294cb58a26be40">findInst</a>(tid, squashed_inst);
<a name="l00913"></a>00913             <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].mispredictInst) {
<a name="l00914"></a>00914                 <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].mispredictInst-&gt;isUncondCtrl()) {
<a name="l00915"></a>00915                      <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].branchTaken = <span class="keyword">true</span>;
<a name="l00916"></a>00916                 }
<a name="l00917"></a>00917             }
<a name="l00918"></a>00918 
<a name="l00919"></a>00919             <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].pc = <a class="code" href="classDefaultCommit.html#a7968756e9e478ff69e80117ffbea4e46">fromIEW</a>-&gt;pc[tid];
<a name="l00920"></a>00920 
<a name="l00921"></a>00921             <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].mispredictInst) {
<a name="l00922"></a>00922                 ++<a class="code" href="classDefaultCommit.html#a9cbfa1c154e785e3c45699b02a94053d">branchMispredicts</a>;
<a name="l00923"></a>00923             }
<a name="l00924"></a>00924         }
<a name="l00925"></a>00925 
<a name="l00926"></a>00926     }
<a name="l00927"></a>00927 
<a name="l00928"></a>00928     <a class="code" href="classDefaultCommit.html#a4c5106e8a165f2f63807122b80a4e580">setNextStatus</a>();
<a name="l00929"></a>00929 
<a name="l00930"></a>00930     <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a06341c2bebd8c862e411e474e01c9c1a">squashCounter</a> != <a class="code" href="classDefaultCommit.html#a88377f855dbf5adeeecb06b5bb821d35">numThreads</a>) {
<a name="l00931"></a>00931         <span class="comment">// If we&apos;re not currently squashing, then get instructions.</span>
<a name="l00932"></a>00932         <a class="code" href="classDefaultCommit.html#a8d0c39182cb7719942e865bcaaff769b">getInsts</a>();
<a name="l00933"></a>00933 
<a name="l00934"></a>00934         <span class="comment">// Try to commit any instructions.</span>
<a name="l00935"></a>00935         <a class="code" href="classDefaultCommit.html#ac8b85fbfdf330d000c094a9d1886d264">commitInsts</a>();
<a name="l00936"></a>00936     }
<a name="l00937"></a>00937 
<a name="l00938"></a>00938     <span class="comment">//Check for any activity</span>
<a name="l00939"></a>00939     threads = <a class="code" href="classDefaultCommit.html#af6eaea53db532812052f71bf0380dab5">activeThreads</a>-&gt;begin();
<a name="l00940"></a>00940 
<a name="l00941"></a>00941     <span class="keywordflow">while</span> (threads != end) {
<a name="l00942"></a>00942         <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = *threads++;
<a name="l00943"></a>00943 
<a name="l00944"></a>00944         <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a0d55e69b2ac22e8956d569bcf49e374b">changedROBNumEntries</a>[tid]) {
<a name="l00945"></a>00945             <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].usedROB = <span class="keyword">true</span>;
<a name="l00946"></a>00946             <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].freeROBEntries = <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#a028971a565aca048c67ea1c36a6a9d51">numFreeEntries</a>(tid);
<a name="l00947"></a>00947 
<a name="l00948"></a>00948             <a class="code" href="classDefaultCommit.html#a2c7e870d4babdac0dc91fc7ffabd0f3d">wroteToTimeBuffer</a> = <span class="keyword">true</span>;
<a name="l00949"></a>00949             <a class="code" href="classDefaultCommit.html#a0d55e69b2ac22e8956d569bcf49e374b">changedROBNumEntries</a>[tid] = <span class="keyword">false</span>;
<a name="l00950"></a>00950             <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#a479432127ee77145cc19d6a2d1590821">isEmpty</a>(tid))
<a name="l00951"></a>00951                 <a class="code" href="classDefaultCommit.html#aa2d2d9b2eec88d804e25d1cb37aa6083">checkEmptyROB</a>[tid] = <span class="keyword">true</span>;
<a name="l00952"></a>00952         }
<a name="l00953"></a>00953 
<a name="l00954"></a>00954         <span class="comment">// ROB is only considered &quot;empty&quot; for previous stages if: a)</span>
<a name="l00955"></a>00955         <span class="comment">// ROB is empty, b) there are no outstanding stores, c) IEW</span>
<a name="l00956"></a>00956         <span class="comment">// stage has received any information regarding stores that</span>
<a name="l00957"></a>00957         <span class="comment">// committed.</span>
<a name="l00958"></a>00958         <span class="comment">// c) is checked by making sure to not consider the ROB empty</span>
<a name="l00959"></a>00959         <span class="comment">// on the same cycle as when stores have been committed.</span>
<a name="l00960"></a>00960         <span class="comment">// @todo: Make this handle multi-cycle communication between</span>
<a name="l00961"></a>00961         <span class="comment">// commit and IEW.</span>
<a name="l00962"></a>00962         <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#aa2d2d9b2eec88d804e25d1cb37aa6083">checkEmptyROB</a>[tid] &amp;&amp; <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#a479432127ee77145cc19d6a2d1590821">isEmpty</a>(tid) &amp;&amp;
<a name="l00963"></a>00963             !<a class="code" href="classDefaultCommit.html#a4e9ef25d8913b270d432be4bbfe4965c">iewStage</a>-&gt;hasStoresToWB(tid) &amp;&amp; !<a class="code" href="classDefaultCommit.html#a0fd9fcb6eed99c11c7fa61c7218ecf49">committedStores</a>[tid]) {
<a name="l00964"></a>00964             <a class="code" href="classDefaultCommit.html#aa2d2d9b2eec88d804e25d1cb37aa6083">checkEmptyROB</a>[tid] = <span class="keyword">false</span>;
<a name="l00965"></a>00965             <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].usedROB = <span class="keyword">true</span>;
<a name="l00966"></a>00966             <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].emptyROB = <span class="keyword">true</span>;
<a name="l00967"></a>00967             <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].freeROBEntries = <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#a028971a565aca048c67ea1c36a6a9d51">numFreeEntries</a>(tid);
<a name="l00968"></a>00968             <a class="code" href="classDefaultCommit.html#a2c7e870d4babdac0dc91fc7ffabd0f3d">wroteToTimeBuffer</a> = <span class="keyword">true</span>;
<a name="l00969"></a>00969         }
<a name="l00970"></a>00970 
<a name="l00971"></a>00971     }
<a name="l00972"></a>00972 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5beb5c9ae170034a8abe7a578e04e47a"></a><!-- doxytag: member="DefaultCommit::commitHead" ref="a5beb5c9ae170034a8abe7a578e04e47a" args="(DynInstPtr &amp;head_inst, unsigned inst_num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool commitHead </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDefaultCommit.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>head_inst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>inst_num</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Tries to commit the head <a class="el" href="classROB.html">ROB</a> instruction passed in. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>head_inst</em>&nbsp;</td><td>The instruction to be committed. </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l01133"></a>01133 {
<a name="l01134"></a>01134     assert(head_inst);
<a name="l01135"></a>01135 
<a name="l01136"></a>01136     <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = head_inst-&gt;threadNumber;
<a name="l01137"></a>01137 
<a name="l01138"></a>01138     <span class="comment">// If the instruction is not executed yet, then it will need extra</span>
<a name="l01139"></a>01139     <span class="comment">// handling.  Signal backwards that it should be executed.</span>
<a name="l01140"></a>01140     <span class="keywordflow">if</span> (!head_inst-&gt;isExecuted()) {
<a name="l01141"></a>01141         <span class="comment">// Keep this number correct.  We have not yet actually executed</span>
<a name="l01142"></a>01142         <span class="comment">// and committed this instruction.</span>
<a name="l01143"></a>01143         <a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a>[tid]-&gt;funcExeInst--;
<a name="l01144"></a>01144 
<a name="l01145"></a>01145         <span class="comment">// Make sure we are only trying to commit un-executed instructions we</span>
<a name="l01146"></a>01146         <span class="comment">// think are possible.</span>
<a name="l01147"></a>01147         assert(head_inst-&gt;isNonSpeculative() || head_inst-&gt;isStoreConditional()
<a name="l01148"></a>01148                || head_inst-&gt;isMemBarrier() || head_inst-&gt;isWriteBarrier() ||
<a name="l01149"></a>01149                (head_inst-&gt;isLoad() &amp;&amp; head_inst-&gt;uncacheable()));
<a name="l01150"></a>01150 
<a name="l01151"></a>01151         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Encountered a barrier or non-speculative &quot;</span>
<a name="l01152"></a>01152                 <span class="stringliteral">&quot;instruction [sn:%lli] at the head of the ROB, PC %s.\n&quot;</span>,
<a name="l01153"></a>01153                 head_inst-&gt;seqNum, head_inst-&gt;pcState());
<a name="l01154"></a>01154 
<a name="l01155"></a>01155         <span class="keywordflow">if</span> (inst_num &gt; 0 || <a class="code" href="classDefaultCommit.html#a4e9ef25d8913b270d432be4bbfe4965c">iewStage</a>-&gt;hasStoresToWB(tid)) {
<a name="l01156"></a>01156             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Waiting for all stores to writeback.\n&quot;</span>);
<a name="l01157"></a>01157             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01158"></a>01158         }
<a name="l01159"></a>01159 
<a name="l01160"></a>01160         <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].nonSpecSeqNum = head_inst-&gt;seqNum;
<a name="l01161"></a>01161 
<a name="l01162"></a>01162         <span class="comment">// Change the instruction so it won&apos;t try to commit again until</span>
<a name="l01163"></a>01163         <span class="comment">// it is executed.</span>
<a name="l01164"></a>01164         head_inst-&gt;clearCanCommit();
<a name="l01165"></a>01165 
<a name="l01166"></a>01166         <span class="keywordflow">if</span> (head_inst-&gt;isLoad() &amp;&amp; head_inst-&gt;uncacheable()) {
<a name="l01167"></a>01167             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;[sn:%lli]: Uncached load, PC %s.\n&quot;</span>,
<a name="l01168"></a>01168                     head_inst-&gt;seqNum, head_inst-&gt;pcState());
<a name="l01169"></a>01169             <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].uncached = <span class="keyword">true</span>;
<a name="l01170"></a>01170             <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].uncachedLoad = head_inst;
<a name="l01171"></a>01171         } <span class="keywordflow">else</span> {
<a name="l01172"></a>01172             ++<a class="code" href="classDefaultCommit.html#ab930685f4a43596f8a315d7dc9f5c2e4">commitNonSpecStalls</a>;
<a name="l01173"></a>01173         }
<a name="l01174"></a>01174 
<a name="l01175"></a>01175         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01176"></a>01176     }
<a name="l01177"></a>01177 
<a name="l01178"></a>01178     <span class="keywordflow">if</span> (head_inst-&gt;isThreadSync()) {
<a name="l01179"></a>01179         <span class="comment">// Not handled for now.</span>
<a name="l01180"></a>01180         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Thread sync instructions are not handled yet.\n&quot;</span>);
<a name="l01181"></a>01181     }
<a name="l01182"></a>01182 
<a name="l01183"></a>01183     <span class="comment">// Check if the instruction caused a fault.  If so, trap.</span>
<a name="l01184"></a>01184     <a class="code" href="classRefCountingPtr.html">Fault</a> inst_fault = head_inst-&gt;getFault();
<a name="l01185"></a>01185 
<a name="l01186"></a>01186     <span class="comment">// Stores mark themselves as completed.</span>
<a name="l01187"></a>01187     <span class="keywordflow">if</span> (!head_inst-&gt;isStore() &amp;&amp; inst_fault == <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>) {
<a name="l01188"></a>01188         head_inst-&gt;setCompleted();
<a name="l01189"></a>01189     }
<a name="l01190"></a>01190 
<a name="l01191"></a>01191     <span class="keywordflow">if</span> (inst_fault != <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>) {
<a name="l01192"></a>01192         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Inst [sn:%lli] PC %s has a fault\n&quot;</span>,
<a name="l01193"></a>01193                 head_inst-&gt;seqNum, head_inst-&gt;pcState());
<a name="l01194"></a>01194 
<a name="l01195"></a>01195         <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a4e9ef25d8913b270d432be4bbfe4965c">iewStage</a>-&gt;hasStoresToWB(tid) || inst_num &gt; 0) {
<a name="l01196"></a>01196             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Stores outstanding, fault must wait.\n&quot;</span>);
<a name="l01197"></a>01197             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01198"></a>01198         }
<a name="l01199"></a>01199 
<a name="l01200"></a>01200         head_inst-&gt;setCompleted();
<a name="l01201"></a>01201 
<a name="l01202"></a>01202         <span class="comment">// If instruction has faulted, let the checker execute it and</span>
<a name="l01203"></a>01203         <span class="comment">// check if it sees the same fault and control flow.</span>
<a name="l01204"></a>01204         <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;checker) {
<a name="l01205"></a>01205             <span class="comment">// Need to check the instruction before its fault is processed</span>
<a name="l01206"></a>01206             <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;checker-&gt;verify(head_inst);
<a name="l01207"></a>01207         }
<a name="l01208"></a>01208 
<a name="l01209"></a>01209         assert(!<a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a>[tid]-&gt;noSquashFromTC);
<a name="l01210"></a>01210 
<a name="l01211"></a>01211         <span class="comment">// Mark that we&apos;re in state update mode so that the trap&apos;s</span>
<a name="l01212"></a>01212         <span class="comment">// execution doesn&apos;t generate extra squashes.</span>
<a name="l01213"></a>01213         <a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a>[tid]-&gt;noSquashFromTC = <span class="keyword">true</span>;
<a name="l01214"></a>01214 
<a name="l01215"></a>01215         <span class="comment">// Execute the trap.  Although it&apos;s slightly unrealistic in</span>
<a name="l01216"></a>01216         <span class="comment">// terms of timing (as it doesn&apos;t wait for the full timing of</span>
<a name="l01217"></a>01217         <span class="comment">// the trap event to complete before updating state), it&apos;s</span>
<a name="l01218"></a>01218         <span class="comment">// needed to update the state as soon as possible.  This</span>
<a name="l01219"></a>01219         <span class="comment">// prevents external agents from changing any specific state</span>
<a name="l01220"></a>01220         <span class="comment">// that the trap need.</span>
<a name="l01221"></a>01221         <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;trap(inst_fault, tid, head_inst-&gt;staticInst);
<a name="l01222"></a>01222 
<a name="l01223"></a>01223         <span class="comment">// Exit state update mode to avoid accidental updating.</span>
<a name="l01224"></a>01224         <a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a>[tid]-&gt;noSquashFromTC = <span class="keyword">false</span>;
<a name="l01225"></a>01225 
<a name="l01226"></a>01226         <a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] = <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca8c49adf6da5f507150d403610c684877">TrapPending</a>;
<a name="l01227"></a>01227 
<a name="l01228"></a>01228         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Committing instruction with fault [sn:%lli]\n&quot;</span>,
<a name="l01229"></a>01229             head_inst-&gt;seqNum);
<a name="l01230"></a>01230         <span class="keywordflow">if</span> (head_inst-&gt;traceData) {
<a name="l01231"></a>01231             <span class="keywordflow">if</span> (<a class="code" href="trace_8hh.html#af76c9f7776aade1bf9d7dfa8a0c6b341">DTRACE</a>(ExecFaulting)) {
<a name="l01232"></a>01232                 head_inst-&gt;traceData-&gt;setFetchSeq(head_inst-&gt;seqNum);
<a name="l01233"></a>01233                 head_inst-&gt;traceData-&gt;setCPSeq(<a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a>[tid]-&gt;numOp);
<a name="l01234"></a>01234                 head_inst-&gt;traceData-&gt;dump();
<a name="l01235"></a>01235             }
<a name="l01236"></a>01236             <span class="keyword">delete</span> head_inst-&gt;traceData;
<a name="l01237"></a>01237             head_inst-&gt;traceData = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l01238"></a>01238         }
<a name="l01239"></a>01239 
<a name="l01240"></a>01240         <span class="comment">// Generate trap squash event.</span>
<a name="l01241"></a>01241         <a class="code" href="classDefaultCommit.html#a7002d0f2beae1ce9a349218968ff97c3">generateTrapEvent</a>(tid);
<a name="l01242"></a>01242         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01243"></a>01243     }
<a name="l01244"></a>01244 
<a name="l01245"></a>01245     <a class="code" href="classDefaultCommit.html#a5bbf266cb0cc97eed138c8fe0d2d76b6">updateComInstStats</a>(head_inst);
<a name="l01246"></a>01246 
<a name="l01247"></a>01247     <span class="keywordflow">if</span> (<a class="code" href="full__system_8hh.html#af929576af6f85c8849704b66d04b8370">FullSystem</a>) {
<a name="l01248"></a>01248         <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a>[tid]-&gt;profile) {
<a name="l01249"></a>01249             <a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a>[tid]-&gt;profilePC = head_inst-&gt;instAddr();
<a name="l01250"></a>01250             <a class="code" href="classProfileNode.html">ProfileNode</a> *node = <a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a>[tid]-&gt;profile-&gt;consume(
<a name="l01251"></a>01251                     <a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a>[tid]-&gt;getTC(), head_inst-&gt;staticInst);
<a name="l01252"></a>01252 
<a name="l01253"></a>01253             <span class="keywordflow">if</span> (node)
<a name="l01254"></a>01254                 <a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a>[tid]-&gt;profileNode = node;
<a name="l01255"></a>01255         }
<a name="l01256"></a>01256         <span class="keywordflow">if</span> (<a class="code" href="classCPA.html#a98100f2f476b294d430b1a66c9039da1">CPA::available</a>()) {
<a name="l01257"></a>01257             <span class="keywordflow">if</span> (head_inst-&gt;isControl()) {
<a name="l01258"></a>01258                 <a class="code" href="classThreadContext.html">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#a5aff829af55e65b802d83dfcef4e9dd0">tc</a> = <a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a>[tid]-&gt;getTC();
<a name="l01259"></a>01259                 <a class="code" href="classCPA.html#af57eb8a9bcb0a342b03eaa0bc6255684">CPA::cpa</a>()-&gt;<a class="code" href="classCPA.html#aa8ccd90dbd2c58f74d1b0bdc10690c98">swAutoBegin</a>(tc, head_inst-&gt;<a class="code" href="classThreadContext.html#a01377ccfda419abf5f6ff7730c9eaac9">nextInstAddr</a>());
<a name="l01260"></a>01260             }
<a name="l01261"></a>01261         }
<a name="l01262"></a>01262     }
<a name="l01263"></a>01263     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Committing instruction with [sn:%lli] PC %s\n&quot;</span>,
<a name="l01264"></a>01264             head_inst-&gt;seqNum, head_inst-&gt;pcState());
<a name="l01265"></a>01265     <span class="keywordflow">if</span> (head_inst-&gt;traceData) {
<a name="l01266"></a>01266         head_inst-&gt;traceData-&gt;setFetchSeq(head_inst-&gt;seqNum);
<a name="l01267"></a>01267         head_inst-&gt;traceData-&gt;setCPSeq(<a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a>[tid]-&gt;numOp);
<a name="l01268"></a>01268         head_inst-&gt;traceData-&gt;dump();
<a name="l01269"></a>01269         <span class="keyword">delete</span> head_inst-&gt;traceData;
<a name="l01270"></a>01270         head_inst-&gt;traceData = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l01271"></a>01271     }
<a name="l01272"></a>01272     <span class="keywordflow">if</span> (head_inst-&gt;isReturn()) {
<a name="l01273"></a>01273         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit,<span class="stringliteral">&quot;Return Instruction Committed [sn:%lli] PC %s \n&quot;</span>,
<a name="l01274"></a>01274                         head_inst-&gt;seqNum, head_inst-&gt;pcState());
<a name="l01275"></a>01275     }
<a name="l01276"></a>01276 
<a name="l01277"></a>01277     <span class="comment">// Update the commit rename map</span>
<a name="l01278"></a>01278     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; head_inst-&gt;numDestRegs(); <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l01279"></a>01279         <a class="code" href="classDefaultCommit.html#ac305c101c17d28451cc1f023b187b08b">renameMap</a>[tid]-&gt;setEntry(head_inst-&gt;flattenedDestRegIdx(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>),
<a name="l01280"></a>01280                                  head_inst-&gt;renamedDestRegIdx(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>));
<a name="l01281"></a>01281     }
<a name="l01282"></a>01282 
<a name="l01283"></a>01283     <span class="comment">// Finally clear the head ROB entry.</span>
<a name="l01284"></a>01284     <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#aa14c02115ece83633552be2368b60e67">retireHead</a>(tid);
<a name="l01285"></a>01285 
<a name="l01286"></a>01286 <span class="preprocessor">#if TRACING_ON</span>
<a name="l01287"></a>01287 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="trace_8hh.html#af76c9f7776aade1bf9d7dfa8a0c6b341">DTRACE</a>(O3PipeView)) {
<a name="l01288"></a>01288         head_inst-&gt;commitTick = <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>() - head_inst-&gt;fetchTick;
<a name="l01289"></a>01289     }
<a name="l01290"></a>01290 <span class="preprocessor">#endif</span>
<a name="l01291"></a>01291 <span class="preprocessor"></span>
<a name="l01292"></a>01292     <span class="comment">// If this was a store, record it for this cycle.</span>
<a name="l01293"></a>01293     <span class="keywordflow">if</span> (head_inst-&gt;isStore())
<a name="l01294"></a>01294         <a class="code" href="classDefaultCommit.html#a0fd9fcb6eed99c11c7fa61c7218ecf49">committedStores</a>[tid] = <span class="keyword">true</span>;
<a name="l01295"></a>01295 
<a name="l01296"></a>01296     <span class="comment">// Return true to indicate that we have committed an instruction.</span>
<a name="l01297"></a>01297     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01298"></a>01298 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac8b85fbfdf330d000c094a9d1886d264"></a><!-- doxytag: member="DefaultCommit::commitInsts" ref="ac8b85fbfdf330d000c094a9d1886d264" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void commitInsts </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Commits as many instructions as possible. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00977"></a>00977 {
<a name="l00979"></a>00979     <span class="comment">// Handle commit</span>
<a name="l00980"></a>00980     <span class="comment">// Note that commit will be handled prior to putting new</span>
<a name="l00981"></a>00981     <span class="comment">// instructions in the ROB so that the ROB only tries to commit</span>
<a name="l00982"></a>00982     <span class="comment">// instructions it has in this current cycle, and not instructions</span>
<a name="l00983"></a>00983     <span class="comment">// it is writing in during this cycle.  Can&apos;t commit and squash</span>
<a name="l00984"></a>00984     <span class="comment">// things at the same time...</span>
<a name="l00986"></a>00986 <span class="comment"></span>
<a name="l00987"></a>00987     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Trying to commit instructions in the ROB.\n&quot;</span>);
<a name="l00988"></a>00988 
<a name="l00989"></a>00989     <span class="keywordtype">unsigned</span> num_committed = 0;
<a name="l00990"></a>00990 
<a name="l00991"></a>00991     <a class="code" href="classDefaultCommit.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> head_inst;
<a name="l00992"></a>00992 
<a name="l00993"></a>00993     <span class="comment">// Commit as many instructions as possible until the commit bandwidth</span>
<a name="l00994"></a>00994     <span class="comment">// limit is reached, or it becomes impossible to commit any more.</span>
<a name="l00995"></a>00995     <span class="keywordflow">while</span> (num_committed &lt; <a class="code" href="classDefaultCommit.html#aeab15260a0ccc0ea470bb74344b63d17">commitWidth</a>) {
<a name="l00996"></a>00996         <span class="comment">// Check for any interrupt that we&apos;ve already squashed for</span>
<a name="l00997"></a>00997         <span class="comment">// and start processing it.</span>
<a name="l00998"></a>00998         <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a7387b2358d0f884ccd5c383e6199f035">interrupt</a> != <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>)
<a name="l00999"></a>00999             <a class="code" href="classDefaultCommit.html#a1cb72a248a56b5dc2b2ed27db7560b90">handleInterrupt</a>();
<a name="l01000"></a>01000 
<a name="l01001"></a>01001         <span class="keywordtype">int</span> commit_thread = <a class="code" href="classDefaultCommit.html#ad313fd14604cfa26fec9c62dba3a7062">getCommittingThread</a>();
<a name="l01002"></a>01002 
<a name="l01003"></a>01003         <span class="keywordflow">if</span> (commit_thread == -1 || !<a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#aafcd2d518fa9f1e1b1e4c166804ea0ce">isHeadReady</a>(commit_thread))
<a name="l01004"></a>01004             <span class="keywordflow">break</span>;
<a name="l01005"></a>01005 
<a name="l01006"></a>01006         head_inst = <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#a5c156e82f6912abd14c61c6cc9b8000a">readHeadInst</a>(commit_thread);
<a name="l01007"></a>01007 
<a name="l01008"></a>01008         <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = head_inst-&gt;threadNumber;
<a name="l01009"></a>01009 
<a name="l01010"></a>01010         assert(tid == commit_thread);
<a name="l01011"></a>01011 
<a name="l01012"></a>01012         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Trying to commit head instruction, [sn:%i] [tid:%i]\n&quot;</span>,
<a name="l01013"></a>01013                 head_inst-&gt;seqNum, tid);
<a name="l01014"></a>01014 
<a name="l01015"></a>01015         <span class="comment">// If the head instruction is squashed, it is ready to retire</span>
<a name="l01016"></a>01016         <span class="comment">// (be removed from the ROB) at any time.</span>
<a name="l01017"></a>01017         <span class="keywordflow">if</span> (head_inst-&gt;isSquashed()) {
<a name="l01018"></a>01018 
<a name="l01019"></a>01019             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Retiring squashed instruction from &quot;</span>
<a name="l01020"></a>01020                     <span class="stringliteral">&quot;ROB.\n&quot;</span>);
<a name="l01021"></a>01021 
<a name="l01022"></a>01022             <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#aa14c02115ece83633552be2368b60e67">retireHead</a>(commit_thread);
<a name="l01023"></a>01023 
<a name="l01024"></a>01024             ++<a class="code" href="classDefaultCommit.html#a66220ac67b22e3faf86b642ecc217546">commitSquashedInsts</a>;
<a name="l01025"></a>01025 
<a name="l01026"></a>01026             <span class="comment">// Record that the number of ROB entries has changed.</span>
<a name="l01027"></a>01027             <a class="code" href="classDefaultCommit.html#a0d55e69b2ac22e8956d569bcf49e374b">changedROBNumEntries</a>[tid] = <span class="keyword">true</span>;
<a name="l01028"></a>01028         } <span class="keywordflow">else</span> {
<a name="l01029"></a>01029             <a class="code" href="classDefaultCommit.html#a6e6091c9272a281b8693c0f46279cad0">pc</a>[tid] = head_inst-&gt;pcState();
<a name="l01030"></a>01030 
<a name="l01031"></a>01031             <span class="comment">// Increment the total number of non-speculative instructions</span>
<a name="l01032"></a>01032             <span class="comment">// executed.</span>
<a name="l01033"></a>01033             <span class="comment">// Hack for now: it really shouldn&apos;t happen until after the</span>
<a name="l01034"></a>01034             <span class="comment">// commit is deemed to be successful, but this count is needed</span>
<a name="l01035"></a>01035             <span class="comment">// for syscalls.</span>
<a name="l01036"></a>01036             <a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a>[tid]-&gt;funcExeInst++;
<a name="l01037"></a>01037 
<a name="l01038"></a>01038             <span class="comment">// Try to commit the head instruction.</span>
<a name="l01039"></a>01039             <span class="keywordtype">bool</span> commit_success = <a class="code" href="classDefaultCommit.html#a5beb5c9ae170034a8abe7a578e04e47a">commitHead</a>(head_inst, num_committed);
<a name="l01040"></a>01040 
<a name="l01041"></a>01041             <span class="keywordflow">if</span> (commit_success) {
<a name="l01042"></a>01042                 ++num_committed;
<a name="l01043"></a>01043                 <a class="code" href="classDefaultCommit.html#ad0d59ba553bc001d75aff706903e2f77">statCommittedInstType</a>[tid][head_inst-&gt;opClass()]++;
<a name="l01044"></a>01044                 <a class="code" href="classDefaultCommit.html#ae41ff03242cc6980c072e3ea824168ed">ppCommit</a>-&gt;<a class="code" href="classProbePointArg.html#a558191a8c66a37ace08feb713c5d4931" title="called at the ProbePoint call site, passes arg to each listener.">notify</a>(head_inst);
<a name="l01045"></a>01045 
<a name="l01046"></a>01046                 <a class="code" href="classDefaultCommit.html#a0d55e69b2ac22e8956d569bcf49e374b">changedROBNumEntries</a>[tid] = <span class="keyword">true</span>;
<a name="l01047"></a>01047 
<a name="l01048"></a>01048                 <span class="comment">// Set the doneSeqNum to the youngest committed instruction.</span>
<a name="l01049"></a>01049                 <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].doneSeqNum = head_inst-&gt;seqNum;
<a name="l01050"></a>01050 
<a name="l01051"></a>01051                 <span class="keywordflow">if</span> (tid == 0) {
<a name="l01052"></a>01052                     <a class="code" href="classDefaultCommit.html#a893f45e65e8a47bca58661db7662cd9c">canHandleInterrupts</a> =  (!head_inst-&gt;isDelayedCommit()) &amp;&amp;
<a name="l01053"></a>01053                                            ((THE_ISA != ALPHA_ISA) ||
<a name="l01054"></a>01054                                              (!(<a class="code" href="classDefaultCommit.html#a6e6091c9272a281b8693c0f46279cad0">pc</a>[0].instAddr() &amp; 0x3)));
<a name="l01055"></a>01055                 }
<a name="l01056"></a>01056 
<a name="l01057"></a>01057                 <span class="comment">// Updates misc. registers.</span>
<a name="l01058"></a>01058                 head_inst-&gt;updateMiscRegs();
<a name="l01059"></a>01059 
<a name="l01060"></a>01060                 <span class="comment">// Check instruction execution if it successfully commits and</span>
<a name="l01061"></a>01061                 <span class="comment">// is not carrying a fault.</span>
<a name="l01062"></a>01062                 <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;checker) {
<a name="l01063"></a>01063                     <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;checker-&gt;verify(head_inst);
<a name="l01064"></a>01064                 }
<a name="l01065"></a>01065 
<a name="l01066"></a>01066                 <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;traceFunctions(<a class="code" href="classDefaultCommit.html#a6e6091c9272a281b8693c0f46279cad0">pc</a>[tid].<a class="code" href="classDefaultCommit.html#afae6152cf4b3a51162d6e64247c1ac09">instAddr</a>());
<a name="l01067"></a>01067 
<a name="l01068"></a>01068                 <a class="code" href="namespaceAlphaISA.html#add1b209af0281827d9ac0a67747a3bf7">TheISA::advancePC</a>(<a class="code" href="classDefaultCommit.html#a6e6091c9272a281b8693c0f46279cad0">pc</a>[tid], head_inst-&gt;staticInst);
<a name="l01069"></a>01069 
<a name="l01070"></a>01070                 <span class="comment">// Keep track of the last sequence number commited</span>
<a name="l01071"></a>01071                 <a class="code" href="classDefaultCommit.html#a4feaee1ef312dda13cff064de20dfbf3">lastCommitedSeqNum</a>[tid] = head_inst-&gt;seqNum;
<a name="l01072"></a>01072 
<a name="l01073"></a>01073                 <span class="comment">// If this is an instruction that doesn&apos;t play nicely with</span>
<a name="l01074"></a>01074                 <span class="comment">// others squash everything and restart fetch</span>
<a name="l01075"></a>01075                 <span class="keywordflow">if</span> (head_inst-&gt;isSquashAfter())
<a name="l01076"></a>01076                     <a class="code" href="classDefaultCommit.html#ad47b387a7bbc4a2153b50f96b8fd2a51">squashAfter</a>(tid, head_inst);
<a name="l01077"></a>01077 
<a name="l01078"></a>01078                 <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a547316e5bf0dc6115209737cf68e9bb8">drainPending</a>) {
<a name="l01079"></a>01079                     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Drain, <span class="stringliteral">&quot;Draining: %i:%s\n&quot;</span>, tid, <a class="code" href="classDefaultCommit.html#a6e6091c9272a281b8693c0f46279cad0">pc</a>[tid]);
<a name="l01080"></a>01080                     <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a6e6091c9272a281b8693c0f46279cad0">pc</a>[tid].<a class="code" href="classDefaultCommit.html#a697667536e687bd20e95084adc90d820">microPC</a>() == 0 &amp;&amp; <a class="code" href="classDefaultCommit.html#a7387b2358d0f884ccd5c383e6199f035">interrupt</a> == <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>) {
<a name="l01081"></a>01081                         <a class="code" href="classDefaultCommit.html#ad47b387a7bbc4a2153b50f96b8fd2a51">squashAfter</a>(tid, head_inst);
<a name="l01082"></a>01082                         <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;commitDrained(tid);
<a name="l01083"></a>01083                     }
<a name="l01084"></a>01084                 }
<a name="l01085"></a>01085 
<a name="l01086"></a>01086                 <span class="keywordtype">int</span> <a class="code" href="namespaceX86ISA.html#a668f84c330035fdb72824eb18e09cd09">count</a> = 0;
<a name="l01087"></a>01087                 <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> oldpc;
<a name="l01088"></a>01088                 <span class="comment">// Debug statement.  Checks to make sure we&apos;re not</span>
<a name="l01089"></a>01089                 <span class="comment">// currently updating state while handling PC events.</span>
<a name="l01090"></a>01090                 assert(!<a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a>[tid]-&gt;noSquashFromTC &amp;&amp; !<a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a>[tid]-&gt;trapPending);
<a name="l01091"></a>01091                 <span class="keywordflow">do</span> {
<a name="l01092"></a>01092                     oldpc = <a class="code" href="classDefaultCommit.html#a6e6091c9272a281b8693c0f46279cad0">pc</a>[tid].instAddr();
<a name="l01093"></a>01093                     <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;system-&gt;pcEventQueue.service(<a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a>[tid]-&gt;getTC());
<a name="l01094"></a>01094                     count++;
<a name="l01095"></a>01095                 } <span class="keywordflow">while</span> (oldpc != <a class="code" href="classDefaultCommit.html#a6e6091c9272a281b8693c0f46279cad0">pc</a>[tid].<a class="code" href="classDefaultCommit.html#afae6152cf4b3a51162d6e64247c1ac09">instAddr</a>());
<a name="l01096"></a>01096                 <span class="keywordflow">if</span> (count &gt; 1) {
<a name="l01097"></a>01097                     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit,
<a name="l01098"></a>01098                             <span class="stringliteral">&quot;PC skip function event, stopping commit\n&quot;</span>);
<a name="l01099"></a>01099                     <span class="keywordflow">break</span>;
<a name="l01100"></a>01100                 }
<a name="l01101"></a>01101 
<a name="l01102"></a>01102                 <span class="comment">// Check if an instruction just enabled interrupts and we&apos;ve</span>
<a name="l01103"></a>01103                 <span class="comment">// previously had an interrupt pending that was not handled</span>
<a name="l01104"></a>01104                 <span class="comment">// because interrupts were subsequently disabled before the</span>
<a name="l01105"></a>01105                 <span class="comment">// pipeline reached a place to handle the interrupt. In that</span>
<a name="l01106"></a>01106                 <span class="comment">// case squash now to make sure the interrupt is handled.</span>
<a name="l01107"></a>01107                 <span class="comment">//</span>
<a name="l01108"></a>01108                 <span class="comment">// If we don&apos;t do this, we might end up in a live lock situation</span>
<a name="l01109"></a>01109                 <span class="keywordflow">if</span> (!<a class="code" href="classDefaultCommit.html#a7387b2358d0f884ccd5c383e6199f035">interrupt</a>  &amp;&amp; <a class="code" href="classDefaultCommit.html#a7c6eee41dc1f18f1f485518f8b066033">avoidQuiesceLiveLock</a> &amp;&amp;
<a name="l01110"></a>01110                    (!head_inst-&gt;isMicroop() || head_inst-&gt;isLastMicroop()) &amp;&amp;
<a name="l01111"></a>01111                    <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;checkInterrupts(<a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;tcBase(0)))
<a name="l01112"></a>01112                     <a class="code" href="classDefaultCommit.html#ad47b387a7bbc4a2153b50f96b8fd2a51">squashAfter</a>(tid, head_inst);
<a name="l01113"></a>01113             } <span class="keywordflow">else</span> {
<a name="l01114"></a>01114                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Unable to commit head instruction PC:%s &quot;</span>
<a name="l01115"></a>01115                         <span class="stringliteral">&quot;[tid:%i] [sn:%i].\n&quot;</span>,
<a name="l01116"></a>01116                         head_inst-&gt;pcState(), tid ,head_inst-&gt;seqNum);
<a name="l01117"></a>01117                 <span class="keywordflow">break</span>;
<a name="l01118"></a>01118             }
<a name="l01119"></a>01119         }
<a name="l01120"></a>01120     }
<a name="l01121"></a>01121 
<a name="l01122"></a>01122     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(CommitRate, <span class="stringliteral">&quot;%i\n&quot;</span>, num_committed);
<a name="l01123"></a>01123     <a class="code" href="classDefaultCommit.html#ab1b6b40d7860fef5059f9bf1b843b366">numCommittedDist</a>.<a class="code" href="classStats_1_1DistBase.html#afed4e1e09f566c5aa9e972d8c17b5a27">sample</a>(num_committed);
<a name="l01124"></a>01124 
<a name="l01125"></a>01125     <span class="keywordflow">if</span> (num_committed == <a class="code" href="classDefaultCommit.html#aeab15260a0ccc0ea470bb74344b63d17">commitWidth</a>) {
<a name="l01126"></a>01126         <a class="code" href="classDefaultCommit.html#a16d1a4bbb2cb87488fd876fbf6e7a518">commitEligibleSamples</a>++;
<a name="l01127"></a>01127     }
<a name="l01128"></a>01128 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af7d01b5776b9d8a0f218aec331ddaeb9"></a><!-- doxytag: member="DefaultCommit::drain" ref="af7d01b5776b9d8a0f218aec331ddaeb9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void drain </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes the draining of commit. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00400"></a>00400 {
<a name="l00401"></a>00401     <a class="code" href="classDefaultCommit.html#a547316e5bf0dc6115209737cf68e9bb8">drainPending</a> = <span class="keyword">true</span>;
<a name="l00402"></a>00402 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8f020d3237536fe007fc488c4125c5d8"></a><!-- doxytag: member="DefaultCommit::drainResume" ref="a8f020d3237536fe007fc488c4125c5d8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void drainResume </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Resumes execution after draining. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00407"></a>00407 {
<a name="l00408"></a>00408     <a class="code" href="classDefaultCommit.html#a547316e5bf0dc6115209737cf68e9bb8">drainPending</a> = <span class="keyword">false</span>;
<a name="l00409"></a>00409 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0240eb42fa57fe5d3788093f62b77347"></a><!-- doxytag: member="DefaultCommit::drainSanityCheck" ref="a0240eb42fa57fe5d3788093f62b77347" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void drainSanityCheck </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Perform sanity checks after a drain. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00414"></a>00414 {
<a name="l00415"></a>00415     assert(<a class="code" href="classDefaultCommit.html#adf5473c18a3d7c1e88c4a2072bce5526">isDrained</a>());
<a name="l00416"></a>00416     <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#a0240eb42fa57fe5d3788093f62b77347">drainSanityCheck</a>();
<a name="l00417"></a>00417 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4adb99d6e22b7028a21e537331de6253"></a><!-- doxytag: member="DefaultCommit::generateTCEvent" ref="a4adb99d6e22b7028a21e537331de6253" args="(ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void generateTCEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Records that commit needs to initiate a squash due to an external state update through the TC. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00562"></a>00562 {
<a name="l00563"></a>00563     assert(!<a class="code" href="classDefaultCommit.html#a4e366a325229901e41b68ff07e5f556a">trapInFlight</a>[tid]);
<a name="l00564"></a>00564     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Generating TC squash event for [tid:%i]\n&quot;</span>, tid);
<a name="l00565"></a>00565 
<a name="l00566"></a>00566     <a class="code" href="classDefaultCommit.html#a4fce523b7a931003efb9665605a87ca0">tcSquash</a>[tid] = <span class="keyword">true</span>;
<a name="l00567"></a>00567 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7002d0f2beae1ce9a349218968ff97c3"></a><!-- doxytag: member="DefaultCommit::generateTrapEvent" ref="a7002d0f2beae1ce9a349218968ff97c3" args="(ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void generateTrapEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Generates an event to schedule a squash due to a trap. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00549"></a>00549 {
<a name="l00550"></a>00550     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Generating trap event for [tid:%i]\n&quot;</span>, tid);
<a name="l00551"></a>00551 
<a name="l00552"></a>00552     TrapEvent *trap = <span class="keyword">new</span> TrapEvent(<span class="keyword">this</span>, tid);
<a name="l00553"></a>00553 
<a name="l00554"></a>00554     <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;schedule(trap, <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;clockEdge(<a class="code" href="classDefaultCommit.html#a0bfffaa2e5f9c7e79353e61146950a9a">trapLatency</a>));
<a name="l00555"></a>00555     <a class="code" href="classDefaultCommit.html#a4e366a325229901e41b68ff07e5f556a">trapInFlight</a>[tid] = <span class="keyword">true</span>;
<a name="l00556"></a>00556     <a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a>[tid]-&gt;trapPending = <span class="keyword">true</span>;
<a name="l00557"></a>00557 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad313fd14604cfa26fec9c62dba3a7062"></a><!-- doxytag: member="DefaultCommit::getCommittingThread" ref="ad313fd14604cfa26fec9c62dba3a7062" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> getCommittingThread </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Gets the thread to commit, based on the SMT policy. </p>

<p><div class="fragment"><pre class="fragment"><a name="l01458"></a>01458 {
<a name="l01459"></a>01459     <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a88377f855dbf5adeeecb06b5bb821d35">numThreads</a> &gt; 1) {
<a name="l01460"></a>01460         <span class="keywordflow">switch</span> (<a class="code" href="classDefaultCommit.html#acbc18713699043ca78415e9f03712ce1">commitPolicy</a>) {
<a name="l01461"></a>01461 
<a name="l01462"></a>01462           <span class="keywordflow">case</span> <a class="code" href="classDefaultCommit.html#a2b5cad948a22cc08e48fe1a2226c8d05a227598607ef691b05c9eb1ea73a06a2f">Aggressive</a>:
<a name="l01463"></a>01463             <span class="comment">//If Policy is Aggressive, commit will call</span>
<a name="l01464"></a>01464             <span class="comment">//this function multiple times per</span>
<a name="l01465"></a>01465             <span class="comment">//cycle</span>
<a name="l01466"></a>01466             <span class="keywordflow">return</span> <a class="code" href="classDefaultCommit.html#a7b2c5e474b4fd5c54395b44f3b792d21">oldestReady</a>();
<a name="l01467"></a>01467 
<a name="l01468"></a>01468           <span class="keywordflow">case</span> <a class="code" href="classDefaultCommit.html#a2b5cad948a22cc08e48fe1a2226c8d05a5c08841de48c15133dd26a4d9d740a11">RoundRobin</a>:
<a name="l01469"></a>01469             <span class="keywordflow">return</span> <a class="code" href="classDefaultCommit.html#a8aab9cacbc483081596b13ecd5192eb5">roundRobin</a>();
<a name="l01470"></a>01470 
<a name="l01471"></a>01471           <span class="keywordflow">case</span> <a class="code" href="classDefaultCommit.html#a2b5cad948a22cc08e48fe1a2226c8d05a1ce7bd97138a7693d81bee46fa74a1cc">OldestReady</a>:
<a name="l01472"></a>01472             <span class="keywordflow">return</span> <a class="code" href="classDefaultCommit.html#a7b2c5e474b4fd5c54395b44f3b792d21">oldestReady</a>();
<a name="l01473"></a>01473 
<a name="l01474"></a>01474           <span class="keywordflow">default</span>:
<a name="l01475"></a>01475             <span class="keywordflow">return</span> <a class="code" href="base_2types_8hh.html#a192b210a26f038691d0f095d85dc0953">InvalidThreadID</a>;
<a name="l01476"></a>01476         }
<a name="l01477"></a>01477     } <span class="keywordflow">else</span> {
<a name="l01478"></a>01478         assert(!<a class="code" href="classDefaultCommit.html#af6eaea53db532812052f71bf0380dab5">activeThreads</a>-&gt;empty());
<a name="l01479"></a>01479         <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = <a class="code" href="classDefaultCommit.html#af6eaea53db532812052f71bf0380dab5">activeThreads</a>-&gt;front();
<a name="l01480"></a>01480 
<a name="l01481"></a>01481         <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] == <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca2f5f2c4a8c4f4f0519d503dcdfbf55cb">Running</a> ||
<a name="l01482"></a>01482             <a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] == <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173cad3fa9ae9431d6cb1772f9d9df48cab19">Idle</a> ||
<a name="l01483"></a>01483             <a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] == <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca757a5840686b21827966401ca2499141">FetchTrapPending</a>) {
<a name="l01484"></a>01484             <span class="keywordflow">return</span> tid;
<a name="l01485"></a>01485         } <span class="keywordflow">else</span> {
<a name="l01486"></a>01486             <span class="keywordflow">return</span> <a class="code" href="base_2types_8hh.html#a192b210a26f038691d0f095d85dc0953">InvalidThreadID</a>;
<a name="l01487"></a>01487         }
<a name="l01488"></a>01488     }
<a name="l01489"></a>01489 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8d0c39182cb7719942e865bcaaff769b"></a><!-- doxytag: member="DefaultCommit::getInsts" ref="a8d0c39182cb7719942e865bcaaff769b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getInsts </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Gets instructions from rename and inserts them into the <a class="el" href="classROB.html">ROB</a>. </p>

<p><div class="fragment"><pre class="fragment"><a name="l01303"></a>01303 {
<a name="l01304"></a>01304     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Getting instructions from Rename stage.\n&quot;</span>);
<a name="l01305"></a>01305 
<a name="l01306"></a>01306     <span class="comment">// Read any renamed instructions and place them into the ROB.</span>
<a name="l01307"></a>01307     <span class="keywordtype">int</span> insts_to_process = std::min((<span class="keywordtype">int</span>)<a class="code" href="classDefaultCommit.html#a4b41704382bddb6ee06b5ce97b47dd7b">renameWidth</a>, <a class="code" href="classDefaultCommit.html#a2b6b1d4785b92bd378f8a7abc5b7e6b9">fromRename</a>-&gt;<a class="code" href="classTimeBuffer.html#a245260f6f74972558f61b85227df5aae">size</a>);
<a name="l01308"></a>01308 
<a name="l01309"></a>01309     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> inst_num = 0; inst_num &lt; insts_to_process; ++inst_num) {
<a name="l01310"></a>01310         <a class="code" href="classDefaultCommit.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> inst;
<a name="l01311"></a>01311 
<a name="l01312"></a>01312         inst = <a class="code" href="classDefaultCommit.html#a2b6b1d4785b92bd378f8a7abc5b7e6b9">fromRename</a>-&gt;insts[inst_num];
<a name="l01313"></a>01313         <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = inst-&gt;threadNumber;
<a name="l01314"></a>01314 
<a name="l01315"></a>01315         <span class="keywordflow">if</span> (!inst-&gt;isSquashed() &amp;&amp;
<a name="l01316"></a>01316             <a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] != <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca55ceab70c6d1094de92189130c899d84">ROBSquashing</a> &amp;&amp;
<a name="l01317"></a>01317             <a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] != <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca8c49adf6da5f507150d403610c684877">TrapPending</a>) {
<a name="l01318"></a>01318             <a class="code" href="classDefaultCommit.html#a0d55e69b2ac22e8956d569bcf49e374b">changedROBNumEntries</a>[tid] = <span class="keyword">true</span>;
<a name="l01319"></a>01319 
<a name="l01320"></a>01320             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Inserting PC %s [sn:%i] [tid:%i] into ROB.\n&quot;</span>,
<a name="l01321"></a>01321                     inst-&gt;pcState(), inst-&gt;seqNum, tid);
<a name="l01322"></a>01322 
<a name="l01323"></a>01323             <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#aa5f3ce0db8d338ad004f89955f495fef">insertInst</a>(inst);
<a name="l01324"></a>01324 
<a name="l01325"></a>01325             assert(<a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#a6461a6d64f301a64dbf720f1290114eb">getThreadEntries</a>(tid) &lt;= <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#a9844bb4676b40d12c10f411ffdd4b148">getMaxEntries</a>(tid));
<a name="l01326"></a>01326 
<a name="l01327"></a>01327             <a class="code" href="classDefaultCommit.html#a1d81dc5c05e15057c1985acc39285540">youngestSeqNum</a>[tid] = inst-&gt;seqNum;
<a name="l01328"></a>01328         } <span class="keywordflow">else</span> {
<a name="l01329"></a>01329             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Instruction PC %s [sn:%i] [tid:%i] was &quot;</span>
<a name="l01330"></a>01330                     <span class="stringliteral">&quot;squashed, skipping.\n&quot;</span>,
<a name="l01331"></a>01331                     inst-&gt;pcState(), inst-&gt;seqNum, tid);
<a name="l01332"></a>01332         }
<a name="l01333"></a>01333     }
<a name="l01334"></a>01334 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1cb72a248a56b5dc2b2ed27db7560b90"></a><!-- doxytag: member="DefaultCommit::handleInterrupt" ref="a1cb72a248a56b5dc2b2ed27db7560b90" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handleInterrupt </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Handles processing an interrupt. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00752"></a>00752 {
<a name="l00753"></a>00753     <span class="comment">// Verify that we still have an interrupt to handle</span>
<a name="l00754"></a>00754     <span class="keywordflow">if</span> (!<a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;checkInterrupts(<a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;tcBase(0))) {
<a name="l00755"></a>00755         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Pending interrupt is cleared by master before &quot;</span>
<a name="l00756"></a>00756                 <span class="stringliteral">&quot;it got handled. Restart fetching from the orig path.\n&quot;</span>);
<a name="l00757"></a>00757         <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[0].clearInterrupt = <span class="keyword">true</span>;
<a name="l00758"></a>00758         <a class="code" href="classDefaultCommit.html#a7387b2358d0f884ccd5c383e6199f035">interrupt</a> = <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00759"></a>00759         <a class="code" href="classDefaultCommit.html#a7c6eee41dc1f18f1f485518f8b066033">avoidQuiesceLiveLock</a> = <span class="keyword">true</span>;
<a name="l00760"></a>00760         <span class="keywordflow">return</span>;
<a name="l00761"></a>00761     }
<a name="l00762"></a>00762 
<a name="l00763"></a>00763     <span class="comment">// Wait until all in flight instructions are finished before enterring</span>
<a name="l00764"></a>00764     <span class="comment">// the interrupt.</span>
<a name="l00765"></a>00765     <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a893f45e65e8a47bca58661db7662cd9c">canHandleInterrupts</a> &amp;&amp; <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;instList.empty()) {
<a name="l00766"></a>00766         <span class="comment">// Squash or record that I need to squash this cycle if</span>
<a name="l00767"></a>00767         <span class="comment">// an interrupt needed to be handled.</span>
<a name="l00768"></a>00768         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Interrupt detected.\n&quot;</span>);
<a name="l00769"></a>00769 
<a name="l00770"></a>00770         <span class="comment">// Clear the interrupt now that it&apos;s going to be handled</span>
<a name="l00771"></a>00771         <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[0].clearInterrupt = <span class="keyword">true</span>;
<a name="l00772"></a>00772 
<a name="l00773"></a>00773         assert(!<a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a>[0]-&gt;noSquashFromTC);
<a name="l00774"></a>00774         <a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a>[0]-&gt;noSquashFromTC = <span class="keyword">true</span>;
<a name="l00775"></a>00775 
<a name="l00776"></a>00776         <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;checker) {
<a name="l00777"></a>00777             <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;checker-&gt;handlePendingInt();
<a name="l00778"></a>00778         }
<a name="l00779"></a>00779 
<a name="l00780"></a>00780         <span class="comment">// CPU will handle interrupt. Note that we ignore the local copy of</span>
<a name="l00781"></a>00781         <span class="comment">// interrupt. This is because the local copy may no longer be the</span>
<a name="l00782"></a>00782         <span class="comment">// interrupt that the interrupt controller thinks is being handled.</span>
<a name="l00783"></a>00783         <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;processInterrupts(<a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;getInterrupts());
<a name="l00784"></a>00784 
<a name="l00785"></a>00785         <a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a>[0]-&gt;noSquashFromTC = <span class="keyword">false</span>;
<a name="l00786"></a>00786 
<a name="l00787"></a>00787         <a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[0] = <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca8c49adf6da5f507150d403610c684877">TrapPending</a>;
<a name="l00788"></a>00788 
<a name="l00789"></a>00789         <span class="comment">// Generate trap squash event.</span>
<a name="l00790"></a>00790         <a class="code" href="classDefaultCommit.html#a7002d0f2beae1ce9a349218968ff97c3">generateTrapEvent</a>(0);
<a name="l00791"></a>00791 
<a name="l00792"></a>00792         <a class="code" href="classDefaultCommit.html#a7387b2358d0f884ccd5c383e6199f035">interrupt</a> = <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00793"></a>00793         <a class="code" href="classDefaultCommit.html#a7c6eee41dc1f18f1f485518f8b066033">avoidQuiesceLiveLock</a> = <span class="keyword">false</span>;
<a name="l00794"></a>00794     } <span class="keywordflow">else</span> {
<a name="l00795"></a>00795         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Interrupt pending: instruction is %sin &quot;</span>
<a name="l00796"></a>00796                 <span class="stringliteral">&quot;flight, ROB is %sempty\n&quot;</span>,
<a name="l00797"></a>00797                 <a class="code" href="classDefaultCommit.html#a893f45e65e8a47bca58661db7662cd9c">canHandleInterrupts</a> ? <span class="stringliteral">&quot;not &quot;</span> : <span class="stringliteral">&quot;&quot;</span>,
<a name="l00798"></a>00798                 <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;instList.empty() ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;not &quot;</span> );
<a name="l00799"></a>00799     }
<a name="l00800"></a>00800 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="afae6152cf4b3a51162d6e64247c1ac09"></a><!-- doxytag: member="DefaultCommit::instAddr" ref="afae6152cf4b3a51162d6e64247c1ac09" args="(ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> instAddr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the PC of a specific thread. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00348"></a>00348 { <span class="keywordflow">return</span> <a class="code" href="classDefaultCommit.html#a6e6091c9272a281b8693c0f46279cad0">pc</a>[tid].instAddr(); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="adf5473c18a3d7c1e88c4a2072bce5526"></a><!-- doxytag: member="DefaultCommit::isDrained" ref="adf5473c18a3d7c1e88c4a2072bce5526" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool isDrained </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Has the stage drained? </p>

<p><div class="fragment"><pre class="fragment"><a name="l00422"></a>00422 {
<a name="l00423"></a>00423     <span class="comment">/* Make sure no one is executing microcode. There are two reasons</span>
<a name="l00424"></a>00424 <span class="comment">     * for this:</span>
<a name="l00425"></a>00425 <span class="comment">     * - Hardware virtualized CPUs can&apos;t switch into the middle of a</span>
<a name="l00426"></a>00426 <span class="comment">     *   microcode sequence.</span>
<a name="l00427"></a>00427 <span class="comment">     * - The current fetch implementation will most likely get very</span>
<a name="l00428"></a>00428 <span class="comment">     *   confused if it tries to start fetching an instruction that</span>
<a name="l00429"></a>00429 <span class="comment">     *   is executing in the middle of a ucode sequence that changes</span>
<a name="l00430"></a>00430 <span class="comment">     *   address mappings. This can happen on for example x86.</span>
<a name="l00431"></a>00431 <span class="comment">     */</span>
<a name="l00432"></a>00432     <span class="keywordflow">for</span> (<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = 0; tid &lt; <a class="code" href="classDefaultCommit.html#a88377f855dbf5adeeecb06b5bb821d35">numThreads</a>; tid++) {
<a name="l00433"></a>00433         <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a6e6091c9272a281b8693c0f46279cad0">pc</a>[tid].<a class="code" href="classDefaultCommit.html#a697667536e687bd20e95084adc90d820">microPC</a>() != 0)
<a name="l00434"></a>00434             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00435"></a>00435     }
<a name="l00436"></a>00436 
<a name="l00437"></a>00437     <span class="comment">/* Make sure that all instructions have finished committing before</span>
<a name="l00438"></a>00438 <span class="comment">     * declaring the system as drained. We want the pipeline to be</span>
<a name="l00439"></a>00439 <span class="comment">     * completely empty when we declare the CPU to be drained. This</span>
<a name="l00440"></a>00440 <span class="comment">     * makes debugging easier since CPU handover and restoring from a</span>
<a name="l00441"></a>00441 <span class="comment">     * checkpoint with a different CPU should have the same timing.</span>
<a name="l00442"></a>00442 <span class="comment">     */</span>
<a name="l00443"></a>00443     <span class="keywordflow">return</span> <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#a479432127ee77145cc19d6a2d1590821">isEmpty</a>() &amp;&amp;
<a name="l00444"></a>00444         <a class="code" href="classDefaultCommit.html#a7387b2358d0f884ccd5c383e6199f035">interrupt</a> == <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00445"></a>00445 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a035349a9fd8a12938e7997be5a76211e"></a><!-- doxytag: member="DefaultCommit::markCompletedInsts" ref="a035349a9fd8a12938e7997be5a76211e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void markCompletedInsts </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Marks completed instructions using information sent from IEW. </p>

<p><div class="fragment"><pre class="fragment"><a name="l01362"></a>01362 {
<a name="l01363"></a>01363     <span class="comment">// Grab completed insts out of the IEW instruction queue, and mark</span>
<a name="l01364"></a>01364     <span class="comment">// instructions completed within the ROB.</span>
<a name="l01365"></a>01365     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> inst_num = 0;
<a name="l01366"></a>01366          inst_num &lt; <a class="code" href="classDefaultCommit.html#a7968756e9e478ff69e80117ffbea4e46">fromIEW</a>-&gt;<a class="code" href="classTimeBuffer.html#a245260f6f74972558f61b85227df5aae">size</a> &amp;&amp; <a class="code" href="classDefaultCommit.html#a7968756e9e478ff69e80117ffbea4e46">fromIEW</a>-&gt;insts[inst_num];
<a name="l01367"></a>01367          ++inst_num)
<a name="l01368"></a>01368     {
<a name="l01369"></a>01369         <span class="keywordflow">if</span> (!<a class="code" href="classDefaultCommit.html#a7968756e9e478ff69e80117ffbea4e46">fromIEW</a>-&gt;insts[inst_num]-&gt;isSquashed()) {
<a name="l01370"></a>01370             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;[tid:%i]: Marking PC %s, [sn:%lli] ready &quot;</span>
<a name="l01371"></a>01371                     <span class="stringliteral">&quot;within ROB.\n&quot;</span>,
<a name="l01372"></a>01372                     <a class="code" href="classDefaultCommit.html#a7968756e9e478ff69e80117ffbea4e46">fromIEW</a>-&gt;insts[inst_num]-&gt;threadNumber,
<a name="l01373"></a>01373                     <a class="code" href="classDefaultCommit.html#a7968756e9e478ff69e80117ffbea4e46">fromIEW</a>-&gt;insts[inst_num]-&gt;pcState(),
<a name="l01374"></a>01374                     <a class="code" href="classDefaultCommit.html#a7968756e9e478ff69e80117ffbea4e46">fromIEW</a>-&gt;insts[inst_num]-&gt;seqNum);
<a name="l01375"></a>01375 
<a name="l01376"></a>01376             <span class="comment">// Mark the instruction as ready to commit.</span>
<a name="l01377"></a>01377             <a class="code" href="classDefaultCommit.html#a7968756e9e478ff69e80117ffbea4e46">fromIEW</a>-&gt;insts[inst_num]-&gt;setCanCommit();
<a name="l01378"></a>01378         }
<a name="l01379"></a>01379     }
<a name="l01380"></a>01380 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a697667536e687bd20e95084adc90d820"></a><!-- doxytag: member="DefaultCommit::microPC" ref="a697667536e687bd20e95084adc90d820" args="(ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> microPC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Reads the micro PC of a specific thread. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00354"></a>00354 { <span class="keywordflow">return</span> <a class="code" href="classDefaultCommit.html#a6e6091c9272a281b8693c0f46279cad0">pc</a>[tid].microPC(); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a37627d5d5bba7f4a8690c71c2ab3cb07"></a><!-- doxytag: member="DefaultCommit::name" ref="a37627d5d5bba7f4a8690c71c2ab3cb07" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string name </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the name of the <a class="el" href="classDefaultCommit.html">DefaultCommit</a>. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00165"></a>00165 {
<a name="l00166"></a>00166     <span class="keywordflow">return</span> <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;name() + <span class="stringliteral">&quot;.commit&quot;</span>;
<a name="l00167"></a>00167 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af1caba1f04cf2802d742d1a16b961e79"></a><!-- doxytag: member="DefaultCommit::nextInstAddr" ref="af1caba1f04cf2802d742d1a16b961e79" args="(ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> nextInstAddr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the next PC of a specific thread. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00351"></a>00351 { <span class="keywordflow">return</span> <a class="code" href="classDefaultCommit.html#a6e6091c9272a281b8693c0f46279cad0">pc</a>[tid].nextInstAddr(); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3c8eae00d4f0d15336eec11f879146c2"></a><!-- doxytag: member="DefaultCommit::numROBFreeEntries" ref="a3c8eae00d4f0d15336eec11f879146c2" args="(ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t numROBFreeEntries </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the number of free <a class="el" href="classROB.html">ROB</a> entries for a specific thread. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00542"></a>00542 {
<a name="l00543"></a>00543     <span class="keywordflow">return</span> <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#a028971a565aca048c67ea1c36a6a9d51">numFreeEntries</a>(tid);
<a name="l00544"></a>00544 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7b2c5e474b4fd5c54395b44f3b792d21"></a><!-- doxytag: member="DefaultCommit::oldestReady" ref="a7b2c5e474b4fd5c54395b44f3b792d21" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> oldestReady </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the thread ID to use based on an oldest instruction policy. </p>

<p><div class="fragment"><pre class="fragment"><a name="l01522"></a>01522 {
<a name="l01523"></a>01523     <span class="keywordtype">unsigned</span> oldest = 0;
<a name="l01524"></a>01524     <span class="keywordtype">bool</span> first = <span class="keyword">true</span>;
<a name="l01525"></a>01525 
<a name="l01526"></a>01526     <a class="code" href="classstd_1_1list.html">list&lt;ThreadID&gt;::iterator</a> threads = <a class="code" href="classDefaultCommit.html#af6eaea53db532812052f71bf0380dab5">activeThreads</a>-&gt;begin();
<a name="l01527"></a>01527     <a class="code" href="classstd_1_1list.html">list&lt;ThreadID&gt;::iterator</a> end = <a class="code" href="classDefaultCommit.html#af6eaea53db532812052f71bf0380dab5">activeThreads</a>-&gt;end();
<a name="l01528"></a>01528 
<a name="l01529"></a>01529     <span class="keywordflow">while</span> (threads != end) {
<a name="l01530"></a>01530         <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = *threads++;
<a name="l01531"></a>01531 
<a name="l01532"></a>01532         <span class="keywordflow">if</span> (!<a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#a479432127ee77145cc19d6a2d1590821">isEmpty</a>(tid) &amp;&amp;
<a name="l01533"></a>01533             (<a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] == <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca2f5f2c4a8c4f4f0519d503dcdfbf55cb">Running</a> ||
<a name="l01534"></a>01534              <a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] == <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173cad3fa9ae9431d6cb1772f9d9df48cab19">Idle</a> ||
<a name="l01535"></a>01535              <a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] == <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca757a5840686b21827966401ca2499141">FetchTrapPending</a>)) {
<a name="l01536"></a>01536 
<a name="l01537"></a>01537             <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#aafcd2d518fa9f1e1b1e4c166804ea0ce">isHeadReady</a>(tid)) {
<a name="l01538"></a>01538 
<a name="l01539"></a>01539                 <a class="code" href="classDefaultCommit.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> head_inst = <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#a5c156e82f6912abd14c61c6cc9b8000a">readHeadInst</a>(tid);
<a name="l01540"></a>01540 
<a name="l01541"></a>01541                 <span class="keywordflow">if</span> (first) {
<a name="l01542"></a>01542                     oldest = tid;
<a name="l01543"></a>01543                     first = <span class="keyword">false</span>;
<a name="l01544"></a>01544                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (head_inst-&gt;seqNum &lt; oldest) {
<a name="l01545"></a>01545                     oldest = tid;
<a name="l01546"></a>01546                 }
<a name="l01547"></a>01547             }
<a name="l01548"></a>01548         }
<a name="l01549"></a>01549     }
<a name="l01550"></a>01550 
<a name="l01551"></a>01551     <span class="keywordflow">if</span> (!first) {
<a name="l01552"></a>01552         <span class="keywordflow">return</span> oldest;
<a name="l01553"></a>01553     } <span class="keywordflow">else</span> {
<a name="l01554"></a>01554         <span class="keywordflow">return</span> <a class="code" href="base_2types_8hh.html#a192b210a26f038691d0f095d85dc0953">InvalidThreadID</a>;
<a name="l01555"></a>01555     }
<a name="l01556"></a>01556 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aaa8fbb79b13ce112b6d11f77bc3dd18f"></a><!-- doxytag: member="DefaultCommit::pcState" ref="aaa8fbb79b13ce112b6d11f77bc3dd18f" args="(const TheISA::PCState &amp;val, ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pcState </td>
          <td>(</td>
          <td class="paramtype">const TheISA::PCState &amp;&nbsp;</td>
          <td class="paramname"> <em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the PC of a specific thread. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00345"></a>00345     { <a class="code" href="classDefaultCommit.html#a6e6091c9272a281b8693c0f46279cad0">pc</a>[tid] = <a class="code" href="namespaceX86ISA.html#ae13bf1250853ff6b72aabe3c79b587cc">val</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af486ac7476906f63fc6696b3e76a411b"></a><!-- doxytag: member="DefaultCommit::pcState" ref="af486ac7476906f63fc6696b3e76a411b" args="(ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TheISA::PCState pcState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Reads the PC of a specific thread. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00341"></a>00341 { <span class="keywordflow">return</span> <a class="code" href="classDefaultCommit.html#a6e6091c9272a281b8693c0f46279cad0">pc</a>[tid]; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab9d20a05498697dfc59478b80a0726fb"></a><!-- doxytag: member="DefaultCommit::propagateInterrupt" ref="ab9d20a05498697dfc59478b80a0726fb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void propagateInterrupt </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get fetch redirecting so we can handle an interrupt </p>

<p><div class="fragment"><pre class="fragment"><a name="l00805"></a>00805 {
<a name="l00806"></a>00806     <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[0] == <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca8c49adf6da5f507150d403610c684877">TrapPending</a> || <a class="code" href="classDefaultCommit.html#a7387b2358d0f884ccd5c383e6199f035">interrupt</a> || <a class="code" href="classDefaultCommit.html#af3547420a792f13034730b5f327a47ff">trapSquash</a>[0] ||
<a name="l00807"></a>00807             <a class="code" href="classDefaultCommit.html#a4fce523b7a931003efb9665605a87ca0">tcSquash</a>[0])
<a name="l00808"></a>00808         <span class="keywordflow">return</span>;
<a name="l00809"></a>00809 
<a name="l00810"></a>00810     <span class="comment">// Process interrupts if interrupts are enabled, not in PAL</span>
<a name="l00811"></a>00811     <span class="comment">// mode, and no other traps or external squashes are currently</span>
<a name="l00812"></a>00812     <span class="comment">// pending.</span>
<a name="l00813"></a>00813     <span class="comment">// @todo: Allow other threads to handle interrupts.</span>
<a name="l00814"></a>00814 
<a name="l00815"></a>00815     <span class="comment">// Get any interrupt that happened</span>
<a name="l00816"></a>00816     <a class="code" href="classDefaultCommit.html#a7387b2358d0f884ccd5c383e6199f035">interrupt</a> = <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;getInterrupts();
<a name="l00817"></a>00817 
<a name="l00818"></a>00818     <span class="comment">// Tell fetch that there is an interrupt pending.  This</span>
<a name="l00819"></a>00819     <span class="comment">// will make fetch wait until it sees a non PAL-mode PC,</span>
<a name="l00820"></a>00820     <span class="comment">// at which point it stops fetching instructions.</span>
<a name="l00821"></a>00821     <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a7387b2358d0f884ccd5c383e6199f035">interrupt</a> != <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>)
<a name="l00822"></a>00822         <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[0].interruptPending = <span class="keyword">true</span>;
<a name="l00823"></a>00823 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa2dab17a363fd4307274d579796adcf7"></a><!-- doxytag: member="DefaultCommit::regProbePoints" ref="aa2dab17a363fd4307274d579796adcf7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void regProbePoints </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Registers probes. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00172"></a>00172 {
<a name="l00173"></a>00173     <a class="code" href="classDefaultCommit.html#ae41ff03242cc6980c072e3ea824168ed">ppCommit</a> = <span class="keyword">new</span> <a class="code" href="classProbePointArg.html">ProbePointArg&lt;DynInstPtr&gt;</a>(<a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;getProbeManager(), <span class="stringliteral">&quot;Commit&quot;</span>);
<a name="l00174"></a>00174     <a class="code" href="classDefaultCommit.html#a3c0bfd67f137dbd48bc31ade04a09cf0">ppCommitStall</a> = <span class="keyword">new</span> <a class="code" href="classProbePointArg.html">ProbePointArg&lt;DynInstPtr&gt;</a>(<a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;getProbeManager(), <span class="stringliteral">&quot;CommitStall&quot;</span>);
<a name="l00175"></a>00175 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4dc637449366fcdfc4e764cdf12d9b11"></a><!-- doxytag: member="DefaultCommit::regStats" ref="a4dc637449366fcdfc4e764cdf12d9b11" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void regStats </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Registers statistics. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00180"></a>00180 {
<a name="l00181"></a>00181     <span class="keyword">using namespace </span>Stats;
<a name="l00182"></a>00182     <a class="code" href="classDefaultCommit.html#a66220ac67b22e3faf86b642ecc217546">commitSquashedInsts</a>
<a name="l00183"></a>00183         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classDefaultCommit.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.commitSquashedInsts&quot;</span>)
<a name="l00184"></a>00184         .desc(<span class="stringliteral">&quot;The number of squashed insts skipped by commit&quot;</span>)
<a name="l00185"></a>00185         .prereq(<a class="code" href="classDefaultCommit.html#a66220ac67b22e3faf86b642ecc217546">commitSquashedInsts</a>);
<a name="l00186"></a>00186     <a class="code" href="classDefaultCommit.html#a89ef54d73dbded95395181561013b0b6">commitSquashEvents</a>
<a name="l00187"></a>00187         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classDefaultCommit.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.commitSquashEvents&quot;</span>)
<a name="l00188"></a>00188         .desc(<span class="stringliteral">&quot;The number of times commit is told to squash&quot;</span>)
<a name="l00189"></a>00189         .prereq(<a class="code" href="classDefaultCommit.html#a89ef54d73dbded95395181561013b0b6">commitSquashEvents</a>);
<a name="l00190"></a>00190     <a class="code" href="classDefaultCommit.html#ab930685f4a43596f8a315d7dc9f5c2e4">commitNonSpecStalls</a>
<a name="l00191"></a>00191         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classDefaultCommit.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.commitNonSpecStalls&quot;</span>)
<a name="l00192"></a>00192         .desc(<span class="stringliteral">&quot;The number of times commit has been forced to stall to &quot;</span>
<a name="l00193"></a>00193               <span class="stringliteral">&quot;communicate backwards&quot;</span>)
<a name="l00194"></a>00194         .prereq(<a class="code" href="classDefaultCommit.html#ab930685f4a43596f8a315d7dc9f5c2e4">commitNonSpecStalls</a>);
<a name="l00195"></a>00195     <a class="code" href="classDefaultCommit.html#a9cbfa1c154e785e3c45699b02a94053d">branchMispredicts</a>
<a name="l00196"></a>00196         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classDefaultCommit.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.branchMispredicts&quot;</span>)
<a name="l00197"></a>00197         .desc(<span class="stringliteral">&quot;The number of times a branch was mispredicted&quot;</span>)
<a name="l00198"></a>00198         .prereq(<a class="code" href="classDefaultCommit.html#a9cbfa1c154e785e3c45699b02a94053d">branchMispredicts</a>);
<a name="l00199"></a>00199     <a class="code" href="classDefaultCommit.html#ab1b6b40d7860fef5059f9bf1b843b366">numCommittedDist</a>
<a name="l00200"></a>00200         .<a class="code" href="classStats_1_1Distribution.html#a330a131f9f1614fae623ba309b61a590">init</a>(0,<a class="code" href="classDefaultCommit.html#aeab15260a0ccc0ea470bb74344b63d17">commitWidth</a>,1)
<a name="l00201"></a>00201         .name(<a class="code" href="classDefaultCommit.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.committed_per_cycle&quot;</span>)
<a name="l00202"></a>00202         .desc(<span class="stringliteral">&quot;Number of insts commited each cycle&quot;</span>)
<a name="l00203"></a>00203         .flags(<a class="code" href="namespaceStats.html#a148700bbb7b09b1ebb9d6b099155391a">Stats::pdf</a>)
<a name="l00204"></a>00204         ;
<a name="l00205"></a>00205 
<a name="l00206"></a>00206     <a class="code" href="classDefaultCommit.html#a23714085cc19270c017a67c9a508601a">instsCommitted</a>
<a name="l00207"></a>00207         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;numThreads)
<a name="l00208"></a>00208         .name(<a class="code" href="classDefaultCommit.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.committedInsts&quot;</span>)
<a name="l00209"></a>00209         .desc(<span class="stringliteral">&quot;Number of instructions committed&quot;</span>)
<a name="l00210"></a>00210         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00211"></a>00211         ;
<a name="l00212"></a>00212 
<a name="l00213"></a>00213     <a class="code" href="classDefaultCommit.html#a1549eb9ffd1727a5c1937e7520a0bcc8">opsCommitted</a>
<a name="l00214"></a>00214         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;numThreads)
<a name="l00215"></a>00215         .name(<a class="code" href="classDefaultCommit.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.committedOps&quot;</span>)
<a name="l00216"></a>00216         .desc(<span class="stringliteral">&quot;Number of ops (including micro ops) committed&quot;</span>)
<a name="l00217"></a>00217         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00218"></a>00218         ;
<a name="l00219"></a>00219 
<a name="l00220"></a>00220     <a class="code" href="classDefaultCommit.html#a4cb385aa97530dd2621c74f376839e79">statComSwp</a>
<a name="l00221"></a>00221         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;numThreads)
<a name="l00222"></a>00222         .name(<a class="code" href="classDefaultCommit.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.swp_count&quot;</span>)
<a name="l00223"></a>00223         .desc(<span class="stringliteral">&quot;Number of s/w prefetches committed&quot;</span>)
<a name="l00224"></a>00224         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00225"></a>00225         ;
<a name="l00226"></a>00226 
<a name="l00227"></a>00227     <a class="code" href="classDefaultCommit.html#afe174c4b8e70d840a2e91bf1ca3092ac">statComRefs</a>
<a name="l00228"></a>00228         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;numThreads)
<a name="l00229"></a>00229         .name(<a class="code" href="classDefaultCommit.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() +  <span class="stringliteral">&quot;.refs&quot;</span>)
<a name="l00230"></a>00230         .desc(<span class="stringliteral">&quot;Number of memory references committed&quot;</span>)
<a name="l00231"></a>00231         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00232"></a>00232         ;
<a name="l00233"></a>00233 
<a name="l00234"></a>00234     <a class="code" href="classDefaultCommit.html#a91927819864b9dc9d1ac706dc55d5dce">statComLoads</a>
<a name="l00235"></a>00235         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;numThreads)
<a name="l00236"></a>00236         .name(<a class="code" href="classDefaultCommit.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() +  <span class="stringliteral">&quot;.loads&quot;</span>)
<a name="l00237"></a>00237         .desc(<span class="stringliteral">&quot;Number of loads committed&quot;</span>)
<a name="l00238"></a>00238         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00239"></a>00239         ;
<a name="l00240"></a>00240 
<a name="l00241"></a>00241     <a class="code" href="classDefaultCommit.html#a9b029ac182d54199247dfa90ed86d368">statComMembars</a>
<a name="l00242"></a>00242         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;numThreads)
<a name="l00243"></a>00243         .name(<a class="code" href="classDefaultCommit.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() +  <span class="stringliteral">&quot;.membars&quot;</span>)
<a name="l00244"></a>00244         .desc(<span class="stringliteral">&quot;Number of memory barriers committed&quot;</span>)
<a name="l00245"></a>00245         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00246"></a>00246         ;
<a name="l00247"></a>00247 
<a name="l00248"></a>00248     <a class="code" href="classDefaultCommit.html#a39a7da0b20d1e83ccfe4b2f2b19d6e94">statComBranches</a>
<a name="l00249"></a>00249         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;numThreads)
<a name="l00250"></a>00250         .name(<a class="code" href="classDefaultCommit.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.branches&quot;</span>)
<a name="l00251"></a>00251         .desc(<span class="stringliteral">&quot;Number of branches committed&quot;</span>)
<a name="l00252"></a>00252         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00253"></a>00253         ;
<a name="l00254"></a>00254 
<a name="l00255"></a>00255     <a class="code" href="classDefaultCommit.html#a2be26eb7dfa8b9e36d0c6fdcaea8d818">statComFloating</a>
<a name="l00256"></a>00256         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;numThreads)
<a name="l00257"></a>00257         .name(<a class="code" href="classDefaultCommit.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.fp_insts&quot;</span>)
<a name="l00258"></a>00258         .desc(<span class="stringliteral">&quot;Number of committed floating point instructions.&quot;</span>)
<a name="l00259"></a>00259         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00260"></a>00260         ;
<a name="l00261"></a>00261 
<a name="l00262"></a>00262     <a class="code" href="classDefaultCommit.html#ae562968e75d903bd12352af65cc558b6">statComInteger</a>
<a name="l00263"></a>00263         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;numThreads)
<a name="l00264"></a>00264         .name(<a class="code" href="classDefaultCommit.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>()+<span class="stringliteral">&quot;.int_insts&quot;</span>)
<a name="l00265"></a>00265         .desc(<span class="stringliteral">&quot;Number of committed integer instructions.&quot;</span>)
<a name="l00266"></a>00266         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00267"></a>00267         ;
<a name="l00268"></a>00268 
<a name="l00269"></a>00269     <a class="code" href="classDefaultCommit.html#acd1aba8c2f19771552212e9c2917ac6b">statComFunctionCalls</a>
<a name="l00270"></a>00270         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;numThreads)
<a name="l00271"></a>00271         .name(<a class="code" href="classDefaultCommit.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>()+<span class="stringliteral">&quot;.function_calls&quot;</span>)
<a name="l00272"></a>00272         .desc(<span class="stringliteral">&quot;Number of function calls committed.&quot;</span>)
<a name="l00273"></a>00273         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00274"></a>00274         ;
<a name="l00275"></a>00275 
<a name="l00276"></a>00276     <a class="code" href="classDefaultCommit.html#ad0d59ba553bc001d75aff706903e2f77">statCommittedInstType</a>
<a name="l00277"></a>00277         .<a class="code" href="classStats_1_1Vector2dBase.html#ab9a02aa81f6a70a71d2dc2c155acbcac">init</a>(<a class="code" href="classDefaultCommit.html#a88377f855dbf5adeeecb06b5bb821d35">numThreads</a>,Enums::Num_OpClass)
<a name="l00278"></a>00278         .name(<a class="code" href="classDefaultCommit.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.op_class&quot;</span>)
<a name="l00279"></a>00279         .desc(<span class="stringliteral">&quot;Class of committed instruction&quot;</span>)
<a name="l00280"></a>00280         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a> | <a class="code" href="namespaceStats.html#a148700bbb7b09b1ebb9d6b099155391a">pdf</a> | <a class="code" href="namespaceStats.html#a25cf6f3e458aaa5fdf87fc287ef0376e">dist</a>)
<a name="l00281"></a>00281         ;
<a name="l00282"></a>00282     <a class="code" href="classDefaultCommit.html#ad0d59ba553bc001d75aff706903e2f77">statCommittedInstType</a>.<a class="code" href="classStats_1_1DataWrapVec2d.html#af87b1ae68d8479e89e6c66bbd2e0936c">ysubnames</a>(Enums::OpClassStrings);
<a name="l00283"></a>00283 
<a name="l00284"></a>00284     <a class="code" href="classDefaultCommit.html#a26f5138543e43cbaba9459036fc0b04c">commitEligible</a>
<a name="l00285"></a>00285         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;numThreads)
<a name="l00286"></a>00286         .name(<a class="code" href="classDefaultCommit.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.bw_limited&quot;</span>)
<a name="l00287"></a>00287         .desc(<span class="stringliteral">&quot;number of insts not committed due to BW limits&quot;</span>)
<a name="l00288"></a>00288         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00289"></a>00289         ;
<a name="l00290"></a>00290 
<a name="l00291"></a>00291     <a class="code" href="classDefaultCommit.html#a16d1a4bbb2cb87488fd876fbf6e7a518">commitEligibleSamples</a>
<a name="l00292"></a>00292         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classDefaultCommit.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.bw_lim_events&quot;</span>)
<a name="l00293"></a>00293         .desc(<span class="stringliteral">&quot;number cycles where commit BW limit reached&quot;</span>)
<a name="l00294"></a>00294         ;
<a name="l00295"></a>00295 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6949aa47bdaf57471e048da5c5b7c14c"></a><!-- doxytag: member="DefaultCommit::robDoneSquashing" ref="a6949aa47bdaf57471e048da5c5b7c14c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool robDoneSquashing </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Checks if the <a class="el" href="classROB.html">ROB</a> is completed with squashing. This is for the case where the <a class="el" href="classROB.html">ROB</a> can take multiple cycles to complete squashing. </p>

<p><div class="fragment"><pre class="fragment"><a name="l01385"></a>01385 {
<a name="l01386"></a>01386     <a class="code" href="classstd_1_1list.html">list&lt;ThreadID&gt;::iterator</a> threads = <a class="code" href="classDefaultCommit.html#af6eaea53db532812052f71bf0380dab5">activeThreads</a>-&gt;begin();
<a name="l01387"></a>01387     <a class="code" href="classstd_1_1list.html">list&lt;ThreadID&gt;::iterator</a> end = <a class="code" href="classDefaultCommit.html#af6eaea53db532812052f71bf0380dab5">activeThreads</a>-&gt;end();
<a name="l01388"></a>01388 
<a name="l01389"></a>01389     <span class="keywordflow">while</span> (threads != end) {
<a name="l01390"></a>01390         <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = *threads++;
<a name="l01391"></a>01391 
<a name="l01392"></a>01392         <span class="keywordflow">if</span> (!<a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#acd4497e40e00ada9d4d15336dcb35be8">isDoneSquashing</a>(tid))
<a name="l01393"></a>01393             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01394"></a>01394     }
<a name="l01395"></a>01395 
<a name="l01396"></a>01396     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01397"></a>01397 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8aab9cacbc483081596b13ecd5192eb5"></a><!-- doxytag: member="DefaultCommit::roundRobin" ref="a8aab9cacbc483081596b13ecd5192eb5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> roundRobin </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the thread ID to use based on a round robin policy. </p>

<p><div class="fragment"><pre class="fragment"><a name="l01494"></a>01494 {
<a name="l01495"></a>01495     <a class="code" href="classstd_1_1list.html">list&lt;ThreadID&gt;::iterator</a> pri_iter = <a class="code" href="classDefaultCommit.html#a4d358db7156d04e20b3269a53334dd19">priority_list</a>.begin();
<a name="l01496"></a>01496     <a class="code" href="classstd_1_1list.html">list&lt;ThreadID&gt;::iterator</a> end      = <a class="code" href="classDefaultCommit.html#a4d358db7156d04e20b3269a53334dd19">priority_list</a>.end();
<a name="l01497"></a>01497 
<a name="l01498"></a>01498     <span class="keywordflow">while</span> (pri_iter != end) {
<a name="l01499"></a>01499         <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = *pri_iter;
<a name="l01500"></a>01500 
<a name="l01501"></a>01501         <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] == <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca2f5f2c4a8c4f4f0519d503dcdfbf55cb">Running</a> ||
<a name="l01502"></a>01502             <a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] == <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173cad3fa9ae9431d6cb1772f9d9df48cab19">Idle</a> ||
<a name="l01503"></a>01503             <a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] == <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca757a5840686b21827966401ca2499141">FetchTrapPending</a>) {
<a name="l01504"></a>01504 
<a name="l01505"></a>01505             <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#aafcd2d518fa9f1e1b1e4c166804ea0ce">isHeadReady</a>(tid)) {
<a name="l01506"></a>01506                 <a class="code" href="classDefaultCommit.html#a4d358db7156d04e20b3269a53334dd19">priority_list</a>.erase(pri_iter);
<a name="l01507"></a>01507                 <a class="code" href="classDefaultCommit.html#a4d358db7156d04e20b3269a53334dd19">priority_list</a>.push_back(tid);
<a name="l01508"></a>01508 
<a name="l01509"></a>01509                 <span class="keywordflow">return</span> tid;
<a name="l01510"></a>01510             }
<a name="l01511"></a>01511         }
<a name="l01512"></a>01512 
<a name="l01513"></a>01513         pri_iter++;
<a name="l01514"></a>01514     }
<a name="l01515"></a>01515 
<a name="l01516"></a>01516     <span class="keywordflow">return</span> <a class="code" href="base_2types_8hh.html#a192b210a26f038691d0f095d85dc0953">InvalidThreadID</a>;
<a name="l01517"></a>01517 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aab96bdacf8bd420402cbb543f994e054"></a><!-- doxytag: member="DefaultCommit::setActiveThreads" ref="aab96bdacf8bd420402cbb543f994e054" args="(std::list&lt; ThreadID &gt; *at_ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setActiveThreads </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classstd_1_1list.html">std::list</a>&lt; <a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> &gt; *&nbsp;</td>
          <td class="paramname"> <em>at_ptr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets pointer to list of active threads. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00357"></a>00357 {
<a name="l00358"></a>00358     <a class="code" href="classDefaultCommit.html#af6eaea53db532812052f71bf0380dab5">activeThreads</a> = at_ptr;
<a name="l00359"></a>00359 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad1be90519aa7737ddf8e41de079a5ea9"></a><!-- doxytag: member="DefaultCommit::setFetchQueue" ref="ad1be90519aa7737ddf8e41de079a5ea9" args="(TimeBuffer&lt; FetchStruct &gt; *fq_ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setFetchQueue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt; <a class="el" href="classDefaultCommit.html#a3aac8607069f16898ef53cfaa2d97aeb">FetchStruct</a> &gt; *&nbsp;</td>
          <td class="paramname"> <em>fq_ptr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00320"></a>00320 {
<a name="l00321"></a>00321     <a class="code" href="classDefaultCommit.html#a9a2f350be647ebfb6567172812db491a">fetchQueue</a> = fq_ptr;
<a name="l00322"></a>00322 
<a name="l00323"></a>00323     <span class="comment">// Setup wire to get instructions from rename (for the ROB).</span>
<a name="l00324"></a>00324     <a class="code" href="classDefaultCommit.html#a2e3dd009c447d077f19b303b53b52fab">fromFetch</a> = <a class="code" href="classDefaultCommit.html#a9a2f350be647ebfb6567172812db491a">fetchQueue</a>-&gt;<a class="code" href="classTimeBuffer.html#ab1c801fd9d022ce4339cc62f4a0625dd">getWire</a>(-<a class="code" href="classDefaultCommit.html#a345f75b8236aa4fbe4ae976f8eb41a4c">fetchToCommitDelay</a>);
<a name="l00325"></a>00325 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6b8bf7d75423c9bccd93d50470f7f935"></a><!-- doxytag: member="DefaultCommit::setIEWQueue" ref="a6b8bf7d75423c9bccd93d50470f7f935" args="(TimeBuffer&lt; IEWStruct &gt; *iq_ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setIEWQueue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt; <a class="el" href="classDefaultCommit.html#a7cf3f052f760b3a8a18623f792c10910">IEWStruct</a> &gt; *&nbsp;</td>
          <td class="paramname"> <em>iq_ptr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the pointer to the queue coming from IEW. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00340"></a>00340 {
<a name="l00341"></a>00341     <a class="code" href="classDefaultCommit.html#a034b0868914c304e81c13c4e645d2616">iewQueue</a> = iq_ptr;
<a name="l00342"></a>00342 
<a name="l00343"></a>00343     <span class="comment">// Setup wire to get instructions from IEW.</span>
<a name="l00344"></a>00344     <a class="code" href="classDefaultCommit.html#a7968756e9e478ff69e80117ffbea4e46">fromIEW</a> = <a class="code" href="classDefaultCommit.html#a034b0868914c304e81c13c4e645d2616">iewQueue</a>-&gt;<a class="code" href="classTimeBuffer.html#ab1c801fd9d022ce4339cc62f4a0625dd">getWire</a>(-<a class="code" href="classDefaultCommit.html#a29f74b65419ba8f0ae250d65e960202b">iewToCommitDelay</a>);
<a name="l00345"></a>00345 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4b6d8e4b2cf6249763ed2fc73eb1af47"></a><!-- doxytag: member="DefaultCommit::setIEWStage" ref="a4b6d8e4b2cf6249763ed2fc73eb1af47" args="(IEW *iew_stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setIEWStage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDefaultCommit.html#a2e298f790f528754f0e0ffa0cb8088f6">IEW</a> *&nbsp;</td>
          <td class="paramname"> <em>iew_stage</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the pointer to the IEW stage. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00350"></a>00350 {
<a name="l00351"></a>00351     <a class="code" href="classDefaultCommit.html#a4e9ef25d8913b270d432be4bbfe4965c">iewStage</a> = iew_stage;
<a name="l00352"></a>00352 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4c5106e8a165f2f63807122b80a4e580"></a><!-- doxytag: member="DefaultCommit::setNextStatus" ref="a4c5106e8a165f2f63807122b80a4e580" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setNextStatus </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the next status based on threads' statuses, which becomes the current status at the end of the cycle. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00498"></a>00498 {
<a name="l00499"></a>00499     <span class="keywordtype">int</span> squashes = 0;
<a name="l00500"></a>00500 
<a name="l00501"></a>00501     <a class="code" href="classstd_1_1list.html">list&lt;ThreadID&gt;::iterator</a> threads = <a class="code" href="classDefaultCommit.html#af6eaea53db532812052f71bf0380dab5">activeThreads</a>-&gt;begin();
<a name="l00502"></a>00502     <a class="code" href="classstd_1_1list.html">list&lt;ThreadID&gt;::iterator</a> end = <a class="code" href="classDefaultCommit.html#af6eaea53db532812052f71bf0380dab5">activeThreads</a>-&gt;end();
<a name="l00503"></a>00503 
<a name="l00504"></a>00504     <span class="keywordflow">while</span> (threads != end) {
<a name="l00505"></a>00505         <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = *threads++;
<a name="l00506"></a>00506 
<a name="l00507"></a>00507         <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] == <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca55ceab70c6d1094de92189130c899d84">ROBSquashing</a>) {
<a name="l00508"></a>00508             squashes++;
<a name="l00509"></a>00509         }
<a name="l00510"></a>00510     }
<a name="l00511"></a>00511 
<a name="l00512"></a>00512     <a class="code" href="classDefaultCommit.html#a06341c2bebd8c862e411e474e01c9c1a">squashCounter</a> = squashes;
<a name="l00513"></a>00513 
<a name="l00514"></a>00514     <span class="comment">// If commit is currently squashing, then it will have activity for the</span>
<a name="l00515"></a>00515     <span class="comment">// next cycle. Set its next status as active.</span>
<a name="l00516"></a>00516     <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a06341c2bebd8c862e411e474e01c9c1a">squashCounter</a>) {
<a name="l00517"></a>00517         <a class="code" href="classDefaultCommit.html#a96c6cf126a60fa550bd3e279b0f33838">_nextStatus</a> = <a class="code" href="classDefaultCommit.html#a40bce497731b29d1d0756af6c5e40986a26bd8444261cc58df7a86753c79d2520">Active</a>;
<a name="l00518"></a>00518     }
<a name="l00519"></a>00519 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6f0aaedb2c39d674ef86c25d0aeb4211"></a><!-- doxytag: member="DefaultCommit::setRenameMap" ref="a6f0aaedb2c39d674ef86c25d0aeb4211" args="(RenameMap rm_ptr[Impl::MaxThreads])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setRenameMap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDefaultCommit.html#a341963bcea1928476182a17e357f98e3">RenameMap</a>&nbsp;</td>
          <td class="paramname"> <em>rm_ptr</em>[Impl::MaxThreads]</td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets pointer to the commited state rename map. </p>

</div>
</div>
<a class="anchor" id="a701624f92a819fe4205faede6e614d9f"></a><!-- doxytag: member="DefaultCommit::setRenameQueue" ref="a701624f92a819fe4205faede6e614d9f" args="(TimeBuffer&lt; RenameStruct &gt; *rq_ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setRenameQueue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt; <a class="el" href="classDefaultCommit.html#a0c2a89ad2edad9ad605d0461f9b132a5">RenameStruct</a> &gt; *&nbsp;</td>
          <td class="paramname"> <em>rq_ptr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the pointer to the queue coming from rename. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00330"></a>00330 {
<a name="l00331"></a>00331     <a class="code" href="classDefaultCommit.html#ae9b536282159ba75153a223be77515ba">renameQueue</a> = rq_ptr;
<a name="l00332"></a>00332 
<a name="l00333"></a>00333     <span class="comment">// Setup wire to get instructions from rename (for the ROB).</span>
<a name="l00334"></a>00334     <a class="code" href="classDefaultCommit.html#a2b6b1d4785b92bd378f8a7abc5b7e6b9">fromRename</a> = <a class="code" href="classDefaultCommit.html#ae9b536282159ba75153a223be77515ba">renameQueue</a>-&gt;<a class="code" href="classTimeBuffer.html#ab1c801fd9d022ce4339cc62f4a0625dd">getWire</a>(-<a class="code" href="classDefaultCommit.html#af699b6479037861b3c0e17d4bfab001d">renameToROBDelay</a>);
<a name="l00335"></a>00335 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a46149ea78698ff6515a509c53d814193"></a><!-- doxytag: member="DefaultCommit::setROB" ref="a46149ea78698ff6515a509c53d814193" args="(ROB *rob_ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setROB </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classROB.html">ROB</a> *&nbsp;</td>
          <td class="paramname"> <em>rob_ptr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets pointer to the <a class="el" href="classROB.html">ROB</a>. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00372"></a>00372 {
<a name="l00373"></a>00373     <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a> = rob_ptr;
<a name="l00374"></a>00374 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa8150d8ab62e6314eb07420a63aedce2"></a><!-- doxytag: member="DefaultCommit::setThreads" ref="aa8150d8ab62e6314eb07420a63aedce2" args="(std::vector&lt; Thread * &gt; &amp;threads)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setThreads </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt; <a class="el" href="structO3ThreadState.html">Thread</a> * &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>threads</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the list of threads. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00300"></a>00300 {
<a name="l00301"></a>00301     <a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a> = threads;
<a name="l00302"></a>00302 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2b521ea5f191fff72265f60d4ed5187b"></a><!-- doxytag: member="DefaultCommit::setTimeBuffer" ref="a2b521ea5f191fff72265f60d4ed5187b" args="(TimeBuffer&lt; TimeStruct &gt; *tb_ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setTimeBuffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt; <a class="el" href="structTimeStruct.html">TimeStruct</a> &gt; *&nbsp;</td>
          <td class="paramname"> <em>tb_ptr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the main time buffer pointer, used for backwards communication. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00307"></a>00307 {
<a name="l00308"></a>00308     <a class="code" href="classDefaultCommit.html#a83f9ee976e732665aeb08dbc19acfd45">timeBuffer</a> = tb_ptr;
<a name="l00309"></a>00309 
<a name="l00310"></a>00310     <span class="comment">// Setup wire to send information back to IEW.</span>
<a name="l00311"></a>00311     <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a> = <a class="code" href="classDefaultCommit.html#a83f9ee976e732665aeb08dbc19acfd45">timeBuffer</a>-&gt;<a class="code" href="classTimeBuffer.html#ab1c801fd9d022ce4339cc62f4a0625dd">getWire</a>(0);
<a name="l00312"></a>00312 
<a name="l00313"></a>00313     <span class="comment">// Setup wire to read data from IEW (for the ROB).</span>
<a name="l00314"></a>00314     <a class="code" href="classDefaultCommit.html#a2b90705fefdf84763685650c2420f184">robInfoFromIEW</a> = <a class="code" href="classDefaultCommit.html#a83f9ee976e732665aeb08dbc19acfd45">timeBuffer</a>-&gt;<a class="code" href="classTimeBuffer.html#ab1c801fd9d022ce4339cc62f4a0625dd">getWire</a>(-<a class="code" href="classDefaultCommit.html#a29f74b65419ba8f0ae250d65e960202b">iewToCommitDelay</a>);
<a name="l00315"></a>00315 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="affce029fbba116bb863eb2a3a7a5bb48"></a><!-- doxytag: member="DefaultCommit::skidInsert" ref="affce029fbba116bb863eb2a3a7a5bb48" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void skidInsert </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Insert all instructions from rename into skidBuffer </p>

<p><div class="fragment"><pre class="fragment"><a name="l01339"></a>01339 {
<a name="l01340"></a>01340     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Attempting to any instructions from rename into &quot;</span>
<a name="l01341"></a>01341             <span class="stringliteral">&quot;skidBuffer.\n&quot;</span>);
<a name="l01342"></a>01342 
<a name="l01343"></a>01343     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> inst_num = 0; inst_num &lt; <a class="code" href="classDefaultCommit.html#a2b6b1d4785b92bd378f8a7abc5b7e6b9">fromRename</a>-&gt;<a class="code" href="classTimeBuffer.html#a245260f6f74972558f61b85227df5aae">size</a>; ++inst_num) {
<a name="l01344"></a>01344         <a class="code" href="classDefaultCommit.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> inst = <a class="code" href="classDefaultCommit.html#a2b6b1d4785b92bd378f8a7abc5b7e6b9">fromRename</a>-&gt;insts[inst_num];
<a name="l01345"></a>01345 
<a name="l01346"></a>01346         <span class="keywordflow">if</span> (!inst-&gt;isSquashed()) {
<a name="l01347"></a>01347             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Inserting PC %s [sn:%i] [tid:%i] into &quot;</span>,
<a name="l01348"></a>01348                     <span class="stringliteral">&quot;skidBuffer.\n&quot;</span>, inst-&gt;pcState(), inst-&gt;seqNum,
<a name="l01349"></a>01349                     inst-&gt;threadNumber);
<a name="l01350"></a>01350             <a class="code" href="classDefaultCommit.html#ab9508ede35e5a000089a1450342412be">skidBuffer</a>.push(inst);
<a name="l01351"></a>01351         } <span class="keywordflow">else</span> {
<a name="l01352"></a>01352             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Instruction PC %s [sn:%i] [tid:%i] was &quot;</span>
<a name="l01353"></a>01353                     <span class="stringliteral">&quot;squashed, skipping.\n&quot;</span>,
<a name="l01354"></a>01354                     inst-&gt;pcState(), inst-&gt;seqNum, inst-&gt;threadNumber);
<a name="l01355"></a>01355         }
<a name="l01356"></a>01356     }
<a name="l01357"></a>01357 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad47b387a7bbc4a2153b50f96b8fd2a51"></a><!-- doxytag: member="DefaultCommit::squashAfter" ref="ad47b387a7bbc4a2153b50f96b8fd2a51" args="(ThreadID tid, DynInstPtr &amp;head_inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void squashAfter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classDefaultCommit.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>head_inst</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Handle squashing from instruction with SquashAfter set.</p>
<p>This differs from the other squashes as it squashes following instructions instead of the current instruction and doesn't clean up various status bits about traps/tc writes pending. Since there might have been instructions committed by the commit stage before the squashing instruction was reached and we can't commit and squash in the same cycle, we have to squash in two steps:</p>
<ol>
<li>
Immediately set the commit status of the thread of SquashAfterPending. This forces the thread to stop committing instructions in this cycle. The last instruction to be committed in this cycle will be the SquashAfter instruction. </li>
<li>
In the next cycle, <a class="el" href="classDefaultCommit.html#ad55316f5135cdae6aa6c5a763f6c3473">commit()</a> checks for the SquashAfterPending state and squashes <em>all</em> in-flight instructions. Since the SquashAfter instruction was the last instruction to be committed in the previous cycle, this causes all subsequent instructions to be squashed. </li>
</ol>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tid</em>&nbsp;</td><td>ID of the thread to squash. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>head_inst</em>&nbsp;</td><td>Instruction that requested the squash. </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00661"></a>00661 {
<a name="l00662"></a>00662     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Executing squash after for [tid:%i] inst [sn:%lli]\n&quot;</span>,
<a name="l00663"></a>00663             tid, head_inst-&gt;seqNum);
<a name="l00664"></a>00664 
<a name="l00665"></a>00665     assert(!<a class="code" href="classDefaultCommit.html#af0c3f70b9be736dfd854ea22a0131e1c">squashAfterInst</a>[tid] || <a class="code" href="classDefaultCommit.html#af0c3f70b9be736dfd854ea22a0131e1c">squashAfterInst</a>[tid] == head_inst);
<a name="l00666"></a>00666     <a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] = <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca1f0e8d98cfb4db458b98f0b5e3f49466">SquashAfterPending</a>;
<a name="l00667"></a>00667     <a class="code" href="classDefaultCommit.html#af0c3f70b9be736dfd854ea22a0131e1c">squashAfterInst</a>[tid] = head_inst;
<a name="l00668"></a>00668 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9aa66ed2ab2c61003cbbc4f0cbb53a13"></a><!-- doxytag: member="DefaultCommit::squashAll" ref="a9aa66ed2ab2c61003cbbc4f0cbb53a13" args="(ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void squashAll </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Squashes all in flight instructions. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00572"></a>00572 {
<a name="l00573"></a>00573     <span class="comment">// If we want to include the squashing instruction in the squash,</span>
<a name="l00574"></a>00574     <span class="comment">// then use one older sequence number.</span>
<a name="l00575"></a>00575     <span class="comment">// Hopefully this doesn&apos;t mess things up.  Basically I want to squash</span>
<a name="l00576"></a>00576     <span class="comment">// all instructions of this thread.</span>
<a name="l00577"></a>00577     <a class="code" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> squashed_inst = <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#a479432127ee77145cc19d6a2d1590821">isEmpty</a>(tid) ?
<a name="l00578"></a>00578         <a class="code" href="classDefaultCommit.html#a4feaee1ef312dda13cff064de20dfbf3">lastCommitedSeqNum</a>[tid] : <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#a5c156e82f6912abd14c61c6cc9b8000a">readHeadInst</a>(tid)-&gt;seqNum - 1;
<a name="l00579"></a>00579 
<a name="l00580"></a>00580     <span class="comment">// All younger instructions will be squashed. Set the sequence</span>
<a name="l00581"></a>00581     <span class="comment">// number as the youngest instruction in the ROB (0 in this case.</span>
<a name="l00582"></a>00582     <span class="comment">// Hopefully nothing breaks.)</span>
<a name="l00583"></a>00583     <a class="code" href="classDefaultCommit.html#a1d81dc5c05e15057c1985acc39285540">youngestSeqNum</a>[tid] = <a class="code" href="classDefaultCommit.html#a4feaee1ef312dda13cff064de20dfbf3">lastCommitedSeqNum</a>[tid];
<a name="l00584"></a>00584 
<a name="l00585"></a>00585     <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#aee9dc23de90acd20200641407a3bd1da">squash</a>(squashed_inst, tid);
<a name="l00586"></a>00586     <a class="code" href="classDefaultCommit.html#a0d55e69b2ac22e8956d569bcf49e374b">changedROBNumEntries</a>[tid] = <span class="keyword">true</span>;
<a name="l00587"></a>00587 
<a name="l00588"></a>00588     <span class="comment">// Send back the sequence number of the squashed instruction.</span>
<a name="l00589"></a>00589     <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].doneSeqNum = squashed_inst;
<a name="l00590"></a>00590 
<a name="l00591"></a>00591     <span class="comment">// Send back the squash signal to tell stages that they should</span>
<a name="l00592"></a>00592     <span class="comment">// squash.</span>
<a name="l00593"></a>00593     <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].squash = <span class="keyword">true</span>;
<a name="l00594"></a>00594 
<a name="l00595"></a>00595     <span class="comment">// Send back the rob squashing signal so other stages know that</span>
<a name="l00596"></a>00596     <span class="comment">// the ROB is in the process of squashing.</span>
<a name="l00597"></a>00597     <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].robSquashing = <span class="keyword">true</span>;
<a name="l00598"></a>00598 
<a name="l00599"></a>00599     <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].mispredictInst = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00600"></a>00600     <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].squashInst = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00601"></a>00601 
<a name="l00602"></a>00602     <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].pc = <a class="code" href="classDefaultCommit.html#a6e6091c9272a281b8693c0f46279cad0">pc</a>[tid];
<a name="l00603"></a>00603 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a05dbc60b1e537c4a85f4ab6dec6ca9a4"></a><!-- doxytag: member="DefaultCommit::squashFromSquashAfter" ref="a05dbc60b1e537c4a85f4ab6dec6ca9a4" args="(ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void squashFromSquashAfter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Handles a squash from a <a class="el" href="classDefaultCommit.html#ad47b387a7bbc4a2153b50f96b8fd2a51">squashAfter()</a> request. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00643"></a>00643 {
<a name="l00644"></a>00644     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Squashing after squash after request, &quot;</span>
<a name="l00645"></a>00645             <span class="stringliteral">&quot;restarting at PC %s\n&quot;</span>, <a class="code" href="classDefaultCommit.html#a6e6091c9272a281b8693c0f46279cad0">pc</a>[tid]);
<a name="l00646"></a>00646 
<a name="l00647"></a>00647     <a class="code" href="classDefaultCommit.html#a9aa66ed2ab2c61003cbbc4f0cbb53a13">squashAll</a>(tid);
<a name="l00648"></a>00648     <span class="comment">// Make sure to inform the fetch stage of which instruction caused</span>
<a name="l00649"></a>00649     <span class="comment">// the squash. It&apos;ll try to re-fetch an instruction executing in</span>
<a name="l00650"></a>00650     <span class="comment">// microcode unless this is set.</span>
<a name="l00651"></a>00651     <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].squashInst = <a class="code" href="classDefaultCommit.html#af0c3f70b9be736dfd854ea22a0131e1c">squashAfterInst</a>[tid];
<a name="l00652"></a>00652     <a class="code" href="classDefaultCommit.html#af0c3f70b9be736dfd854ea22a0131e1c">squashAfterInst</a>[tid] = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00653"></a>00653 
<a name="l00654"></a>00654     <a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] = <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca55ceab70c6d1094de92189130c899d84">ROBSquashing</a>;
<a name="l00655"></a>00655     <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;activityThisCycle();
<a name="l00656"></a>00656 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac4c7a18be5c282d711310ffb7b6f82f7"></a><!-- doxytag: member="DefaultCommit::squashFromTC" ref="ac4c7a18be5c282d711310ffb7b6f82f7" args="(ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void squashFromTC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Handles squashing due to an TC write. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00626"></a>00626 {
<a name="l00627"></a>00627     <a class="code" href="classDefaultCommit.html#a9aa66ed2ab2c61003cbbc4f0cbb53a13">squashAll</a>(tid);
<a name="l00628"></a>00628 
<a name="l00629"></a>00629     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Squashing from TC, restarting at PC %s\n&quot;</span>, <a class="code" href="classDefaultCommit.html#a6e6091c9272a281b8693c0f46279cad0">pc</a>[tid]);
<a name="l00630"></a>00630 
<a name="l00631"></a>00631     <a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a>[tid]-&gt;noSquashFromTC = <span class="keyword">false</span>;
<a name="l00632"></a>00632     assert(!<a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a>[tid]-&gt;trapPending);
<a name="l00633"></a>00633 
<a name="l00634"></a>00634     <a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] = <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca55ceab70c6d1094de92189130c899d84">ROBSquashing</a>;
<a name="l00635"></a>00635     <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;activityThisCycle();
<a name="l00636"></a>00636 
<a name="l00637"></a>00637     <a class="code" href="classDefaultCommit.html#a4fce523b7a931003efb9665605a87ca0">tcSquash</a>[tid] = <span class="keyword">false</span>;
<a name="l00638"></a>00638 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2f79a5e45c55f3cba92021d1a5ebaadf"></a><!-- doxytag: member="DefaultCommit::squashFromTrap" ref="a2f79a5e45c55f3cba92021d1a5ebaadf" args="(ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void squashFromTrap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Handles squashing due to a trap. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00608"></a>00608 {
<a name="l00609"></a>00609     <a class="code" href="classDefaultCommit.html#a9aa66ed2ab2c61003cbbc4f0cbb53a13">squashAll</a>(tid);
<a name="l00610"></a>00610 
<a name="l00611"></a>00611     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;Squashing from trap, restarting at PC %s\n&quot;</span>, <a class="code" href="classDefaultCommit.html#a6e6091c9272a281b8693c0f46279cad0">pc</a>[tid]);
<a name="l00612"></a>00612 
<a name="l00613"></a>00613     <a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a>[tid]-&gt;trapPending = <span class="keyword">false</span>;
<a name="l00614"></a>00614     <a class="code" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a>[tid]-&gt;noSquashFromTC = <span class="keyword">false</span>;
<a name="l00615"></a>00615     <a class="code" href="classDefaultCommit.html#a4e366a325229901e41b68ff07e5f556a">trapInFlight</a>[tid] = <span class="keyword">false</span>;
<a name="l00616"></a>00616 
<a name="l00617"></a>00617     <a class="code" href="classDefaultCommit.html#af3547420a792f13034730b5f327a47ff">trapSquash</a>[tid] = <span class="keyword">false</span>;
<a name="l00618"></a>00618 
<a name="l00619"></a>00619     <a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] = <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca55ceab70c6d1094de92189130c899d84">ROBSquashing</a>;
<a name="l00620"></a>00620     <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;activityThisCycle();
<a name="l00621"></a>00621 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a31d4cbdab16d4ff8d6bc7f84ece727da"></a><!-- doxytag: member="DefaultCommit::startupStage" ref="a31d4cbdab16d4ff8d6bc7f84ece727da" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void startupStage </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes stage by sending back the number of free entries. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00379"></a>00379 {
<a name="l00380"></a>00380     <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#aab96bdacf8bd420402cbb543f994e054">setActiveThreads</a>(<a class="code" href="classDefaultCommit.html#af6eaea53db532812052f71bf0380dab5">activeThreads</a>);
<a name="l00381"></a>00381     <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#aaf9a05771a835f9f8d634cef36e24d40">resetEntries</a>();
<a name="l00382"></a>00382 
<a name="l00383"></a>00383     <span class="comment">// Broadcast the number of free entries.</span>
<a name="l00384"></a>00384     <span class="keywordflow">for</span> (<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = 0; tid &lt; <a class="code" href="classDefaultCommit.html#a88377f855dbf5adeeecb06b5bb821d35">numThreads</a>; tid++) {
<a name="l00385"></a>00385         <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].usedROB = <span class="keyword">true</span>;
<a name="l00386"></a>00386         <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].freeROBEntries = <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#a028971a565aca048c67ea1c36a6a9d51">numFreeEntries</a>(tid);
<a name="l00387"></a>00387         <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].emptyROB = <span class="keyword">true</span>;
<a name="l00388"></a>00388     }
<a name="l00389"></a>00389 
<a name="l00390"></a>00390     <span class="comment">// Commit must broadcast the number of free entries it has at the</span>
<a name="l00391"></a>00391     <span class="comment">// start of the simulation, so it starts as active.</span>
<a name="l00392"></a>00392     <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;activateStage(O3CPU::CommitIdx);
<a name="l00393"></a>00393 
<a name="l00394"></a>00394     <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;activityThisCycle();
<a name="l00395"></a>00395 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8674059ce345e23aac5086b2c3e24a43"></a><!-- doxytag: member="DefaultCommit::takeOverFrom" ref="a8674059ce345e23aac5086b2c3e24a43" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void takeOverFrom </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Takes over from another CPU's thread. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00450"></a>00450 {
<a name="l00451"></a>00451     <a class="code" href="classDefaultCommit.html#a0cf11ec4d376480eb733b779911f6446">_status</a> = <a class="code" href="classDefaultCommit.html#a40bce497731b29d1d0756af6c5e40986a26bd8444261cc58df7a86753c79d2520">Active</a>;
<a name="l00452"></a>00452     <a class="code" href="classDefaultCommit.html#a96c6cf126a60fa550bd3e279b0f33838">_nextStatus</a> = <a class="code" href="classDefaultCommit.html#a40bce497731b29d1d0756af6c5e40986a969c924a722daf6334fca64346092ae6">Inactive</a>;
<a name="l00453"></a>00453     <span class="keywordflow">for</span> (<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = 0; tid &lt; <a class="code" href="classDefaultCommit.html#a88377f855dbf5adeeecb06b5bb821d35">numThreads</a>; tid++) {
<a name="l00454"></a>00454         <a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] = <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173cad3fa9ae9431d6cb1772f9d9df48cab19">Idle</a>;
<a name="l00455"></a>00455         <a class="code" href="classDefaultCommit.html#a0d55e69b2ac22e8956d569bcf49e374b">changedROBNumEntries</a>[tid] = <span class="keyword">false</span>;
<a name="l00456"></a>00456         <a class="code" href="classDefaultCommit.html#af3547420a792f13034730b5f327a47ff">trapSquash</a>[tid] = <span class="keyword">false</span>;
<a name="l00457"></a>00457         <a class="code" href="classDefaultCommit.html#a4fce523b7a931003efb9665605a87ca0">tcSquash</a>[tid] = <span class="keyword">false</span>;
<a name="l00458"></a>00458         <a class="code" href="classDefaultCommit.html#af0c3f70b9be736dfd854ea22a0131e1c">squashAfterInst</a>[tid] = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00459"></a>00459     }
<a name="l00460"></a>00460     <a class="code" href="classDefaultCommit.html#a06341c2bebd8c862e411e474e01c9c1a">squashCounter</a> = 0;
<a name="l00461"></a>00461     <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#a8674059ce345e23aac5086b2c3e24a43">takeOverFrom</a>();
<a name="l00462"></a>00462 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a873dd91783f9efb4a590aded1f70d6b0"></a><!-- doxytag: member="DefaultCommit::tick" ref="a873dd91783f9efb4a590aded1f70d6b0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tick </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Ticks the commit stage, which tries to commit instructions. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00673"></a>00673 {
<a name="l00674"></a>00674     <a class="code" href="classDefaultCommit.html#a2c7e870d4babdac0dc91fc7ffabd0f3d">wroteToTimeBuffer</a> = <span class="keyword">false</span>;
<a name="l00675"></a>00675     <a class="code" href="classDefaultCommit.html#a96c6cf126a60fa550bd3e279b0f33838">_nextStatus</a> = <a class="code" href="classDefaultCommit.html#a40bce497731b29d1d0756af6c5e40986a969c924a722daf6334fca64346092ae6">Inactive</a>;
<a name="l00676"></a>00676 
<a name="l00677"></a>00677     <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#af6eaea53db532812052f71bf0380dab5">activeThreads</a>-&gt;empty())
<a name="l00678"></a>00678         <span class="keywordflow">return</span>;
<a name="l00679"></a>00679 
<a name="l00680"></a>00680     <a class="code" href="classstd_1_1list.html">list&lt;ThreadID&gt;::iterator</a> threads = <a class="code" href="classDefaultCommit.html#af6eaea53db532812052f71bf0380dab5">activeThreads</a>-&gt;begin();
<a name="l00681"></a>00681     <a class="code" href="classstd_1_1list.html">list&lt;ThreadID&gt;::iterator</a> end = <a class="code" href="classDefaultCommit.html#af6eaea53db532812052f71bf0380dab5">activeThreads</a>-&gt;end();
<a name="l00682"></a>00682 
<a name="l00683"></a>00683     <span class="comment">// Check if any of the threads are done squashing.  Change the</span>
<a name="l00684"></a>00684     <span class="comment">// status if they are done.</span>
<a name="l00685"></a>00685     <span class="keywordflow">while</span> (threads != end) {
<a name="l00686"></a>00686         <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = *threads++;
<a name="l00687"></a>00687 
<a name="l00688"></a>00688         <span class="comment">// Clear the bit saying if the thread has committed stores</span>
<a name="l00689"></a>00689         <span class="comment">// this cycle.</span>
<a name="l00690"></a>00690         <a class="code" href="classDefaultCommit.html#a0fd9fcb6eed99c11c7fa61c7218ecf49">committedStores</a>[tid] = <span class="keyword">false</span>;
<a name="l00691"></a>00691 
<a name="l00692"></a>00692         <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] == <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca55ceab70c6d1094de92189130c899d84">ROBSquashing</a>) {
<a name="l00693"></a>00693 
<a name="l00694"></a>00694             <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#acd4497e40e00ada9d4d15336dcb35be8">isDoneSquashing</a>(tid)) {
<a name="l00695"></a>00695                 <a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] = <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca2f5f2c4a8c4f4f0519d503dcdfbf55cb">Running</a>;
<a name="l00696"></a>00696             } <span class="keywordflow">else</span> {
<a name="l00697"></a>00697                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit,<span class="stringliteral">&quot;[tid:%u]: Still Squashing, cannot commit any&quot;</span>
<a name="l00698"></a>00698                         <span class="stringliteral">&quot; insts this cycle.\n&quot;</span>, tid);
<a name="l00699"></a>00699                 <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#a06cf52c4f09162bea03ec848f247151a">doSquash</a>(tid);
<a name="l00700"></a>00700                 <a class="code" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a>-&gt;commitInfo[tid].robSquashing = <span class="keyword">true</span>;
<a name="l00701"></a>00701                 <a class="code" href="classDefaultCommit.html#a2c7e870d4babdac0dc91fc7ffabd0f3d">wroteToTimeBuffer</a> = <span class="keyword">true</span>;
<a name="l00702"></a>00702             }
<a name="l00703"></a>00703         }
<a name="l00704"></a>00704     }
<a name="l00705"></a>00705 
<a name="l00706"></a>00706     <a class="code" href="classDefaultCommit.html#ad55316f5135cdae6aa6c5a763f6c3473">commit</a>();
<a name="l00707"></a>00707 
<a name="l00708"></a>00708     <a class="code" href="classDefaultCommit.html#a035349a9fd8a12938e7997be5a76211e">markCompletedInsts</a>();
<a name="l00709"></a>00709 
<a name="l00710"></a>00710     threads = <a class="code" href="classDefaultCommit.html#af6eaea53db532812052f71bf0380dab5">activeThreads</a>-&gt;begin();
<a name="l00711"></a>00711 
<a name="l00712"></a>00712     <span class="keywordflow">while</span> (threads != end) {
<a name="l00713"></a>00713         <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = *threads++;
<a name="l00714"></a>00714 
<a name="l00715"></a>00715         <span class="keywordflow">if</span> (!<a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#a479432127ee77145cc19d6a2d1590821">isEmpty</a>(tid) &amp;&amp; <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#a5c156e82f6912abd14c61c6cc9b8000a">readHeadInst</a>(tid)-&gt;readyToCommit()) {
<a name="l00716"></a>00716             <span class="comment">// The ROB has more instructions it can commit. Its next status</span>
<a name="l00717"></a>00717             <span class="comment">// will be active.</span>
<a name="l00718"></a>00718             <a class="code" href="classDefaultCommit.html#a96c6cf126a60fa550bd3e279b0f33838">_nextStatus</a> = <a class="code" href="classDefaultCommit.html#a40bce497731b29d1d0756af6c5e40986a26bd8444261cc58df7a86753c79d2520">Active</a>;
<a name="l00719"></a>00719 
<a name="l00720"></a>00720             <a class="code" href="classDefaultCommit.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> inst = <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#a5c156e82f6912abd14c61c6cc9b8000a">readHeadInst</a>(tid);
<a name="l00721"></a>00721 
<a name="l00722"></a>00722             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit,<span class="stringliteral">&quot;[tid:%i]: Instruction [sn:%lli] PC %s is head of&quot;</span>
<a name="l00723"></a>00723                     <span class="stringliteral">&quot; ROB and ready to commit\n&quot;</span>,
<a name="l00724"></a>00724                     tid, inst-&gt;seqNum, inst-&gt;pcState());
<a name="l00725"></a>00725 
<a name="l00726"></a>00726         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#a479432127ee77145cc19d6a2d1590821">isEmpty</a>(tid)) {
<a name="l00727"></a>00727             <a class="code" href="classDefaultCommit.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> inst = <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#a5c156e82f6912abd14c61c6cc9b8000a">readHeadInst</a>(tid);
<a name="l00728"></a>00728 
<a name="l00729"></a>00729             <a class="code" href="classDefaultCommit.html#a3c0bfd67f137dbd48bc31ade04a09cf0">ppCommitStall</a>-&gt;<a class="code" href="classProbePointArg.html#a558191a8c66a37ace08feb713c5d4931" title="called at the ProbePoint call site, passes arg to each listener.">notify</a>(inst);
<a name="l00730"></a>00730 
<a name="l00731"></a>00731             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit,<span class="stringliteral">&quot;[tid:%i]: Can&apos;t commit, Instruction [sn:%lli] PC &quot;</span>
<a name="l00732"></a>00732                     <span class="stringliteral">&quot;%s is head of ROB and not ready\n&quot;</span>,
<a name="l00733"></a>00733                     tid, inst-&gt;seqNum, inst-&gt;pcState());
<a name="l00734"></a>00734         }
<a name="l00735"></a>00735 
<a name="l00736"></a>00736         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Commit, <span class="stringliteral">&quot;[tid:%i]: ROB has %d insts &amp; %d free entries.\n&quot;</span>,
<a name="l00737"></a>00737                 tid, <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#ab654970f03abd90f0c397bba8e218bc9">countInsts</a>(tid), <a class="code" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a>-&gt;<a class="code" href="classROB.html#a028971a565aca048c67ea1c36a6a9d51">numFreeEntries</a>(tid));
<a name="l00738"></a>00738     }
<a name="l00739"></a>00739 
<a name="l00740"></a>00740 
<a name="l00741"></a>00741     <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a2c7e870d4babdac0dc91fc7ffabd0f3d">wroteToTimeBuffer</a>) {
<a name="l00742"></a>00742         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Activity, <span class="stringliteral">&quot;Activity This Cycle.\n&quot;</span>);
<a name="l00743"></a>00743         <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;activityThisCycle();
<a name="l00744"></a>00744     }
<a name="l00745"></a>00745 
<a name="l00746"></a>00746     <a class="code" href="classDefaultCommit.html#a4bb9486757ce225941aaaf759b357a57">updateStatus</a>();
<a name="l00747"></a>00747 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5bbf266cb0cc97eed138c8fe0d2d76b6"></a><!-- doxytag: member="DefaultCommit::updateComInstStats" ref="a5bbf266cb0cc97eed138c8fe0d2d76b6" args="(DynInstPtr &amp;inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateComInstStats </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDefaultCommit.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Updates commit stats based on this instruction. </p>

<p><div class="fragment"><pre class="fragment"><a name="l01402"></a>01402 {
<a name="l01403"></a>01403     <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = inst-&gt;threadNumber;
<a name="l01404"></a>01404 
<a name="l01405"></a>01405     <span class="keywordflow">if</span> (!inst-&gt;isMicroop() || inst-&gt;isLastMicroop())
<a name="l01406"></a>01406         <a class="code" href="classDefaultCommit.html#a23714085cc19270c017a67c9a508601a">instsCommitted</a>[tid]++;
<a name="l01407"></a>01407     <a class="code" href="classDefaultCommit.html#a1549eb9ffd1727a5c1937e7520a0bcc8">opsCommitted</a>[tid]++;
<a name="l01408"></a>01408 
<a name="l01409"></a>01409     <span class="comment">// To match the old model, don&apos;t count nops and instruction</span>
<a name="l01410"></a>01410     <span class="comment">// prefetches towards the total commit count.</span>
<a name="l01411"></a>01411     <span class="keywordflow">if</span> (!inst-&gt;isNop() &amp;&amp; !inst-&gt;isInstPrefetch()) {
<a name="l01412"></a>01412         <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;instDone(tid, inst);
<a name="l01413"></a>01413     }
<a name="l01414"></a>01414 
<a name="l01415"></a>01415     <span class="comment">//</span>
<a name="l01416"></a>01416     <span class="comment">//  Control Instructions</span>
<a name="l01417"></a>01417     <span class="comment">//</span>
<a name="l01418"></a>01418     <span class="keywordflow">if</span> (inst-&gt;isControl())
<a name="l01419"></a>01419         <a class="code" href="classDefaultCommit.html#a39a7da0b20d1e83ccfe4b2f2b19d6e94">statComBranches</a>[tid]++;
<a name="l01420"></a>01420 
<a name="l01421"></a>01421     <span class="comment">//</span>
<a name="l01422"></a>01422     <span class="comment">//  Memory references</span>
<a name="l01423"></a>01423     <span class="comment">//</span>
<a name="l01424"></a>01424     <span class="keywordflow">if</span> (inst-&gt;isMemRef()) {
<a name="l01425"></a>01425         <a class="code" href="classDefaultCommit.html#afe174c4b8e70d840a2e91bf1ca3092ac">statComRefs</a>[tid]++;
<a name="l01426"></a>01426 
<a name="l01427"></a>01427         <span class="keywordflow">if</span> (inst-&gt;isLoad()) {
<a name="l01428"></a>01428             <a class="code" href="classDefaultCommit.html#a91927819864b9dc9d1ac706dc55d5dce">statComLoads</a>[tid]++;
<a name="l01429"></a>01429         }
<a name="l01430"></a>01430     }
<a name="l01431"></a>01431 
<a name="l01432"></a>01432     <span class="keywordflow">if</span> (inst-&gt;isMemBarrier()) {
<a name="l01433"></a>01433         <a class="code" href="classDefaultCommit.html#a9b029ac182d54199247dfa90ed86d368">statComMembars</a>[tid]++;
<a name="l01434"></a>01434     }
<a name="l01435"></a>01435 
<a name="l01436"></a>01436     <span class="comment">// Integer Instruction</span>
<a name="l01437"></a>01437     <span class="keywordflow">if</span> (inst-&gt;isInteger())
<a name="l01438"></a>01438         <a class="code" href="classDefaultCommit.html#ae562968e75d903bd12352af65cc558b6">statComInteger</a>[tid]++;
<a name="l01439"></a>01439 
<a name="l01440"></a>01440     <span class="comment">// Floating Point Instruction</span>
<a name="l01441"></a>01441     <span class="keywordflow">if</span> (inst-&gt;isFloating())
<a name="l01442"></a>01442         <a class="code" href="classDefaultCommit.html#a2be26eb7dfa8b9e36d0c6fdcaea8d818">statComFloating</a>[tid]++;
<a name="l01443"></a>01443 
<a name="l01444"></a>01444     <span class="comment">// Function Calls</span>
<a name="l01445"></a>01445     <span class="keywordflow">if</span> (inst-&gt;isCall())
<a name="l01446"></a>01446         <a class="code" href="classDefaultCommit.html#acd1aba8c2f19771552212e9c2917ac6b">statComFunctionCalls</a>[tid]++;
<a name="l01447"></a>01447 
<a name="l01448"></a>01448 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4bb9486757ce225941aaaf759b357a57"></a><!-- doxytag: member="DefaultCommit::updateStatus" ref="a4bb9486757ce225941aaaf759b357a57" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateStatus </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Updates the overall status of commit with the nextStatus, and tell the CPU if commit is active/inactive. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00467"></a>00467 {
<a name="l00468"></a>00468     <span class="comment">// reset ROB changed variable</span>
<a name="l00469"></a>00469     <a class="code" href="classstd_1_1list.html">list&lt;ThreadID&gt;::iterator</a> threads = <a class="code" href="classDefaultCommit.html#af6eaea53db532812052f71bf0380dab5">activeThreads</a>-&gt;begin();
<a name="l00470"></a>00470     <a class="code" href="classstd_1_1list.html">list&lt;ThreadID&gt;::iterator</a> end = <a class="code" href="classDefaultCommit.html#af6eaea53db532812052f71bf0380dab5">activeThreads</a>-&gt;end();
<a name="l00471"></a>00471 
<a name="l00472"></a>00472     <span class="keywordflow">while</span> (threads != end) {
<a name="l00473"></a>00473         <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = *threads++;
<a name="l00474"></a>00474 
<a name="l00475"></a>00475         <a class="code" href="classDefaultCommit.html#a0d55e69b2ac22e8956d569bcf49e374b">changedROBNumEntries</a>[tid] = <span class="keyword">false</span>;
<a name="l00476"></a>00476 
<a name="l00477"></a>00477         <span class="comment">// Also check if any of the threads has a trap pending</span>
<a name="l00478"></a>00478         <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] == <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca8c49adf6da5f507150d403610c684877">TrapPending</a> ||
<a name="l00479"></a>00479             <a class="code" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[tid] == <a class="code" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173ca757a5840686b21827966401ca2499141">FetchTrapPending</a>) {
<a name="l00480"></a>00480             <a class="code" href="classDefaultCommit.html#a96c6cf126a60fa550bd3e279b0f33838">_nextStatus</a> = <a class="code" href="classDefaultCommit.html#a40bce497731b29d1d0756af6c5e40986a26bd8444261cc58df7a86753c79d2520">Active</a>;
<a name="l00481"></a>00481         }
<a name="l00482"></a>00482     }
<a name="l00483"></a>00483 
<a name="l00484"></a>00484     <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a96c6cf126a60fa550bd3e279b0f33838">_nextStatus</a> == <a class="code" href="classDefaultCommit.html#a40bce497731b29d1d0756af6c5e40986a969c924a722daf6334fca64346092ae6">Inactive</a> &amp;&amp; <a class="code" href="classDefaultCommit.html#a0cf11ec4d376480eb733b779911f6446">_status</a> == <a class="code" href="classDefaultCommit.html#a40bce497731b29d1d0756af6c5e40986a26bd8444261cc58df7a86753c79d2520">Active</a>) {
<a name="l00485"></a>00485         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Activity, <span class="stringliteral">&quot;Deactivating stage.\n&quot;</span>);
<a name="l00486"></a>00486         <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;deactivateStage(O3CPU::CommitIdx);
<a name="l00487"></a>00487     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classDefaultCommit.html#a96c6cf126a60fa550bd3e279b0f33838">_nextStatus</a> == <a class="code" href="classDefaultCommit.html#a40bce497731b29d1d0756af6c5e40986a26bd8444261cc58df7a86753c79d2520">Active</a> &amp;&amp; <a class="code" href="classDefaultCommit.html#a0cf11ec4d376480eb733b779911f6446">_status</a> == <a class="code" href="classDefaultCommit.html#a40bce497731b29d1d0756af6c5e40986a969c924a722daf6334fca64346092ae6">Inactive</a>) {
<a name="l00488"></a>00488         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Activity, <span class="stringliteral">&quot;Activating stage.\n&quot;</span>);
<a name="l00489"></a>00489         <a class="code" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a>-&gt;activateStage(O3CPU::CommitIdx);
<a name="l00490"></a>00490     }
<a name="l00491"></a>00491 
<a name="l00492"></a>00492     <a class="code" href="classDefaultCommit.html#a0cf11ec4d376480eb733b779911f6446">_status</a> = <a class="code" href="classDefaultCommit.html#a96c6cf126a60fa550bd3e279b0f33838">_nextStatus</a>;
<a name="l00493"></a>00493 }
</pre></div></p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="a96c6cf126a60fa550bd3e279b0f33838"></a><!-- doxytag: member="DefaultCommit::_nextStatus" ref="a96c6cf126a60fa550bd3e279b0f33838" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDefaultCommit.html#a40bce497731b29d1d0756af6c5e40986">CommitStatus</a> <a class="el" href="classDefaultCommit.html#a96c6cf126a60fa550bd3e279b0f33838">_nextStatus</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Next commit status, to be set at the end of the cycle. </p>

</div>
</div>
<a class="anchor" id="a0cf11ec4d376480eb733b779911f6446"></a><!-- doxytag: member="DefaultCommit::_status" ref="a0cf11ec4d376480eb733b779911f6446" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDefaultCommit.html#a40bce497731b29d1d0756af6c5e40986">CommitStatus</a> <a class="el" href="classDefaultCommit.html#a0cf11ec4d376480eb733b779911f6446">_status</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Overall commit status. </p>

</div>
</div>
<a class="anchor" id="af6eaea53db532812052f71bf0380dab5"></a><!-- doxytag: member="DefaultCommit::activeThreads" ref="af6eaea53db532812052f71bf0380dab5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1list.html">std::list</a>&lt;<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&gt;* <a class="el" href="classDefaultCommit.html#af6eaea53db532812052f71bf0380dab5">activeThreads</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pointer to the list of active threads. </p>

</div>
</div>
<a class="anchor" id="a7c6eee41dc1f18f1f485518f8b066033"></a><!-- doxytag: member="DefaultCommit::avoidQuiesceLiveLock" ref="a7c6eee41dc1f18f1f485518f8b066033" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classDefaultCommit.html#a7c6eee41dc1f18f1f485518f8b066033">avoidQuiesceLiveLock</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Have we had an interrupt pending and then seen it de-asserted because of a masking change? In this case the variable is set and the next time interrupts are enabled and pending the pipeline will squash to avoid a possible livelock senario. </p>

</div>
</div>
<a class="anchor" id="a9cbfa1c154e785e3c45699b02a94053d"></a><!-- doxytag: member="DefaultCommit::branchMispredicts" ref="a9cbfa1c154e785e3c45699b02a94053d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classDefaultCommit.html#a9cbfa1c154e785e3c45699b02a94053d">branchMispredicts</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stat for the total number of branch mispredicts that caused a squash. </p>

</div>
</div>
<a class="anchor" id="a893f45e65e8a47bca58661db7662cd9c"></a><!-- doxytag: member="DefaultCommit::canHandleInterrupts" ref="a893f45e65e8a47bca58661db7662cd9c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classDefaultCommit.html#a893f45e65e8a47bca58661db7662cd9c">canHandleInterrupts</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>True if last committed microop can be followed by an interrupt </p>

</div>
</div>
<a class="anchor" id="a0d55e69b2ac22e8956d569bcf49e374b"></a><!-- doxytag: member="DefaultCommit::changedROBNumEntries" ref="a0d55e69b2ac22e8956d569bcf49e374b" args="[Impl::MaxThreads]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classDefaultCommit.html#a0d55e69b2ac22e8956d569bcf49e374b">changedROBNumEntries</a>[Impl::MaxThreads]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Records if the number of <a class="el" href="classROB.html">ROB</a> entries has changed this cycle. If it has, then the number of free entries must be re-broadcast. </p>

</div>
</div>
<a class="anchor" id="aa2d2d9b2eec88d804e25d1cb37aa6083"></a><!-- doxytag: member="DefaultCommit::checkEmptyROB" ref="aa2d2d9b2eec88d804e25d1cb37aa6083" args="[Impl::MaxThreads]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classDefaultCommit.html#aa2d2d9b2eec88d804e25d1cb37aa6083">checkEmptyROB</a>[Impl::MaxThreads]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Records if commit should check if the <a class="el" href="classROB.html">ROB</a> is truly empty (see <a class="el" href="commit__impl_8hh.html">commit_impl.hh</a>). </p>

</div>
</div>
<a class="anchor" id="a26f5138543e43cbaba9459036fc0b04c"></a><!-- doxytag: member="DefaultCommit::commitEligible" ref="a26f5138543e43cbaba9459036fc0b04c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a> <a class="el" href="classDefaultCommit.html#a26f5138543e43cbaba9459036fc0b04c">commitEligible</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of instructions not committed due to bandwidth limits. </p>

</div>
</div>
<a class="anchor" id="a16d1a4bbb2cb87488fd876fbf6e7a518"></a><!-- doxytag: member="DefaultCommit::commitEligibleSamples" ref="a16d1a4bbb2cb87488fd876fbf6e7a518" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classDefaultCommit.html#a16d1a4bbb2cb87488fd876fbf6e7a518">commitEligibleSamples</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of cycles where the commit bandwidth limit is reached. </p>

</div>
</div>
<a class="anchor" id="ab930685f4a43596f8a315d7dc9f5c2e4"></a><!-- doxytag: member="DefaultCommit::commitNonSpecStalls" ref="ab930685f4a43596f8a315d7dc9f5c2e4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classDefaultCommit.html#ab930685f4a43596f8a315d7dc9f5c2e4">commitNonSpecStalls</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stat for the total number of times commit has had to stall due to a non- speculative instruction reaching the head of the <a class="el" href="classROB.html">ROB</a>. </p>

</div>
</div>
<a class="anchor" id="acbc18713699043ca78415e9f03712ce1"></a><!-- doxytag: member="DefaultCommit::commitPolicy" ref="acbc18713699043ca78415e9f03712ce1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDefaultCommit.html#a2b5cad948a22cc08e48fe1a2226c8d05">CommitPolicy</a> <a class="el" href="classDefaultCommit.html#acbc18713699043ca78415e9f03712ce1">commitPolicy</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Commit policy used in SMT mode. </p>

</div>
</div>
<a class="anchor" id="a66220ac67b22e3faf86b642ecc217546"></a><!-- doxytag: member="DefaultCommit::commitSquashedInsts" ref="a66220ac67b22e3faf86b642ecc217546" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classDefaultCommit.html#a66220ac67b22e3faf86b642ecc217546">commitSquashedInsts</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stat for the total number of squashed instructions discarded by commit. </p>

</div>
</div>
<a class="anchor" id="a89ef54d73dbded95395181561013b0b6"></a><!-- doxytag: member="DefaultCommit::commitSquashEvents" ref="a89ef54d73dbded95395181561013b0b6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classDefaultCommit.html#a89ef54d73dbded95395181561013b0b6">commitSquashEvents</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stat for the total number of times commit is told to squash. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000026">TODO:</a></b></dt><dd>: Actually increment this stat. </dd></dl>

</div>
</div>
<a class="anchor" id="ae7adb1afa143087a1e39aa65f3921185"></a><!-- doxytag: member="DefaultCommit::commitStatus" ref="ae7adb1afa143087a1e39aa65f3921185" args="[Impl::MaxThreads]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDefaultCommit.html#ae2739961013a00cede621d4d72f2173c">ThreadStatus</a> <a class="el" href="classDefaultCommit.html#ae7adb1afa143087a1e39aa65f3921185">commitStatus</a>[Impl::MaxThreads]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Per-thread status. </p>

</div>
</div>
<a class="anchor" id="a0fd9fcb6eed99c11c7fa61c7218ecf49"></a><!-- doxytag: member="DefaultCommit::committedStores" ref="a0fd9fcb6eed99c11c7fa61c7218ecf49" args="[Impl::MaxThreads]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classDefaultCommit.html#a0fd9fcb6eed99c11c7fa61c7218ecf49">committedStores</a>[Impl::MaxThreads]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Records if there were any stores committed this cycle. </p>

</div>
</div>
<a class="anchor" id="a6b6fe1148ed7c40758e45f351c375552"></a><!-- doxytag: member="DefaultCommit::commitToIEWDelay" ref="a6b6fe1148ed7c40758e45f351c375552" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCycles.html">Cycles</a> <a class="el" href="classDefaultCommit.html#a6b6fe1148ed7c40758e45f351c375552">commitToIEWDelay</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Commit to IEW delay. </p>

</div>
</div>
<a class="anchor" id="aeab15260a0ccc0ea470bb74344b63d17"></a><!-- doxytag: member="DefaultCommit::commitWidth" ref="aeab15260a0ccc0ea470bb74344b63d17" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classDefaultCommit.html#aeab15260a0ccc0ea470bb74344b63d17">commitWidth</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Commit width, in instructions. </p>

</div>
</div>
<a class="anchor" id="a1379cf882a12ac6fc9eba5da7c84b18b"></a><!-- doxytag: member="DefaultCommit::cpu" ref="a1379cf882a12ac6fc9eba5da7c84b18b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDefaultCommit.html#a44622cf06940413482836cb62931ac3f">O3CPU</a>* <a class="el" href="classDefaultCommit.html#a1379cf882a12ac6fc9eba5da7c84b18b">cpu</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pointer to <a class="el" href="namespaceO3CPU.html">O3CPU</a>. </p>

</div>
</div>
<a class="anchor" id="a547316e5bf0dc6115209737cf68e9bb8"></a><!-- doxytag: member="DefaultCommit::drainPending" ref="a547316e5bf0dc6115209737cf68e9bb8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classDefaultCommit.html#a547316e5bf0dc6115209737cf68e9bb8">drainPending</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Is a drain pending. </p>

</div>
</div>
<a class="anchor" id="a9a2f350be647ebfb6567172812db491a"></a><!-- doxytag: member="DefaultCommit::fetchQueue" ref="a9a2f350be647ebfb6567172812db491a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt;<a class="el" href="classDefaultCommit.html#a3aac8607069f16898ef53cfaa2d97aeb">FetchStruct</a>&gt;* <a class="el" href="classDefaultCommit.html#a9a2f350be647ebfb6567172812db491a">fetchQueue</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a345f75b8236aa4fbe4ae976f8eb41a4c"></a><!-- doxytag: member="DefaultCommit::fetchToCommitDelay" ref="a345f75b8236aa4fbe4ae976f8eb41a4c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCycles.html">Cycles</a> <a class="el" href="classDefaultCommit.html#a345f75b8236aa4fbe4ae976f8eb41a4c">fetchToCommitDelay</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2e3dd009c447d077f19b303b53b52fab"></a><!-- doxytag: member="DefaultCommit::fromFetch" ref="a2e3dd009c447d077f19b303b53b52fab" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt;<a class="el" href="classDefaultCommit.html#a3aac8607069f16898ef53cfaa2d97aeb">FetchStruct</a>&gt;::wire <a class="el" href="classDefaultCommit.html#a2e3dd009c447d077f19b303b53b52fab">fromFetch</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a7968756e9e478ff69e80117ffbea4e46"></a><!-- doxytag: member="DefaultCommit::fromIEW" ref="a7968756e9e478ff69e80117ffbea4e46" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt;<a class="el" href="classDefaultCommit.html#a7cf3f052f760b3a8a18623f792c10910">IEWStruct</a>&gt;::wire <a class="el" href="classDefaultCommit.html#a7968756e9e478ff69e80117ffbea4e46">fromIEW</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classWire.html">Wire</a> to read information from IEW queue. </p>

</div>
</div>
<a class="anchor" id="a2b6b1d4785b92bd378f8a7abc5b7e6b9"></a><!-- doxytag: member="DefaultCommit::fromRename" ref="a2b6b1d4785b92bd378f8a7abc5b7e6b9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt;<a class="el" href="classDefaultCommit.html#a0c2a89ad2edad9ad605d0461f9b132a5">RenameStruct</a>&gt;::wire <a class="el" href="classDefaultCommit.html#a2b6b1d4785b92bd378f8a7abc5b7e6b9">fromRename</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classWire.html">Wire</a> to read information from rename queue. </p>

</div>
</div>
<a class="anchor" id="a034b0868914c304e81c13c4e645d2616"></a><!-- doxytag: member="DefaultCommit::iewQueue" ref="a034b0868914c304e81c13c4e645d2616" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt;<a class="el" href="classDefaultCommit.html#a7cf3f052f760b3a8a18623f792c10910">IEWStruct</a>&gt;* <a class="el" href="classDefaultCommit.html#a034b0868914c304e81c13c4e645d2616">iewQueue</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>IEW instruction queue interface. </p>

</div>
</div>
<a class="anchor" id="a4e9ef25d8913b270d432be4bbfe4965c"></a><!-- doxytag: member="DefaultCommit::iewStage" ref="a4e9ef25d8913b270d432be4bbfe4965c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDefaultCommit.html#a2e298f790f528754f0e0ffa0cb8088f6">IEW</a>* <a class="el" href="classDefaultCommit.html#a4e9ef25d8913b270d432be4bbfe4965c">iewStage</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The pointer to the IEW stage. Used solely to ensure that various events (traps, interrupts, syscalls) do not occur until all stores have written back. </p>

</div>
</div>
<a class="anchor" id="a29f74b65419ba8f0ae250d65e960202b"></a><!-- doxytag: member="DefaultCommit::iewToCommitDelay" ref="a29f74b65419ba8f0ae250d65e960202b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCycles.html">Cycles</a> <a class="el" href="classDefaultCommit.html#a29f74b65419ba8f0ae250d65e960202b">iewToCommitDelay</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>IEW to Commit delay. </p>

</div>
</div>
<a class="anchor" id="a23714085cc19270c017a67c9a508601a"></a><!-- doxytag: member="DefaultCommit::instsCommitted" ref="a23714085cc19270c017a67c9a508601a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a> <a class="el" href="classDefaultCommit.html#a23714085cc19270c017a67c9a508601a">instsCommitted</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Total number of instructions committed. </p>

</div>
</div>
<a class="anchor" id="a7387b2358d0f884ccd5c383e6199f035"></a><!-- doxytag: member="DefaultCommit::interrupt" ref="a7387b2358d0f884ccd5c383e6199f035" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">Fault</a> <a class="el" href="classDefaultCommit.html#a7387b2358d0f884ccd5c383e6199f035">interrupt</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The interrupt fault. </p>

</div>
</div>
<a class="anchor" id="a4feaee1ef312dda13cff064de20dfbf3"></a><!-- doxytag: member="DefaultCommit::lastCommitedSeqNum" ref="a4feaee1ef312dda13cff064de20dfbf3" args="[Impl::MaxThreads]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> <a class="el" href="classDefaultCommit.html#a4feaee1ef312dda13cff064de20dfbf3">lastCommitedSeqNum</a>[Impl::MaxThreads]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The sequence number of the last commited instruction. </p>

</div>
</div>
<a class="anchor" id="ab1b6b40d7860fef5059f9bf1b843b366"></a><!-- doxytag: member="DefaultCommit::numCommittedDist" ref="ab1b6b40d7860fef5059f9bf1b843b366" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Distribution.html">Stats::Distribution</a> <a class="el" href="classDefaultCommit.html#ab1b6b40d7860fef5059f9bf1b843b366">numCommittedDist</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Distribution of the number of committed instructions each cycle. </p>

</div>
</div>
<a class="anchor" id="a35ee8ef405428b8d8595176ea6581681"></a><!-- doxytag: member="DefaultCommit::numRobs" ref="a35ee8ef405428b8d8595176ea6581681" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classDefaultCommit.html#a35ee8ef405428b8d8595176ea6581681">numRobs</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of Reorder Buffers </p>

</div>
</div>
<a class="anchor" id="a88377f855dbf5adeeecb06b5bb821d35"></a><!-- doxytag: member="DefaultCommit::numThreads" ref="a88377f855dbf5adeeecb06b5bb821d35" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> <a class="el" href="classDefaultCommit.html#a88377f855dbf5adeeecb06b5bb821d35">numThreads</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of Active Threads </p>

</div>
</div>
<a class="anchor" id="a1549eb9ffd1727a5c1937e7520a0bcc8"></a><!-- doxytag: member="DefaultCommit::opsCommitted" ref="a1549eb9ffd1727a5c1937e7520a0bcc8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a> <a class="el" href="classDefaultCommit.html#a1549eb9ffd1727a5c1937e7520a0bcc8">opsCommitted</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Total number of ops (including micro ops) committed. </p>

</div>
</div>
<a class="anchor" id="a6e6091c9272a281b8693c0f46279cad0"></a><!-- doxytag: member="DefaultCommit::pc" ref="a6e6091c9272a281b8693c0f46279cad0" args="[Impl::MaxThreads]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TheISA::PCState <a class="el" href="classDefaultCommit.html#a6e6091c9272a281b8693c0f46279cad0">pc</a>[Impl::MaxThreads]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The commit PC state of each thread. Refers to the instruction that is currently being processed/committed. </p>

</div>
</div>
<a class="anchor" id="ae41ff03242cc6980c072e3ea824168ed"></a><!-- doxytag: member="DefaultCommit::ppCommit" ref="ae41ff03242cc6980c072e3ea824168ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classProbePointArg.html">ProbePointArg</a>&lt;<a class="el" href="classDefaultCommit.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>&gt;* <a class="el" href="classDefaultCommit.html#ae41ff03242cc6980c072e3ea824168ed">ppCommit</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="namespaceProbe.html">Probe</a> Points. </p>

</div>
</div>
<a class="anchor" id="a3c0bfd67f137dbd48bc31ade04a09cf0"></a><!-- doxytag: member="DefaultCommit::ppCommitStall" ref="a3c0bfd67f137dbd48bc31ade04a09cf0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classProbePointArg.html">ProbePointArg</a>&lt;<a class="el" href="classDefaultCommit.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>&gt;* <a class="el" href="classDefaultCommit.html#a3c0bfd67f137dbd48bc31ade04a09cf0">ppCommitStall</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4d358db7156d04e20b3269a53334dd19"></a><!-- doxytag: member="DefaultCommit::priority_list" ref="a4d358db7156d04e20b3269a53334dd19" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1list.html">std::list</a>&lt;<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&gt; <a class="el" href="classDefaultCommit.html#a4d358db7156d04e20b3269a53334dd19">priority_list</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Priority List used for Commit Policy </p>

</div>
</div>
<a class="anchor" id="ac305c101c17d28451cc1f023b187b08b"></a><!-- doxytag: member="DefaultCommit::renameMap" ref="ac305c101c17d28451cc1f023b187b08b" args="[Impl::MaxThreads]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDefaultCommit.html#a341963bcea1928476182a17e357f98e3">RenameMap</a>* <a class="el" href="classDefaultCommit.html#ac305c101c17d28451cc1f023b187b08b">renameMap</a>[Impl::MaxThreads]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Rename map interface. </p>

</div>
</div>
<a class="anchor" id="ae9b536282159ba75153a223be77515ba"></a><!-- doxytag: member="DefaultCommit::renameQueue" ref="ae9b536282159ba75153a223be77515ba" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt;<a class="el" href="classDefaultCommit.html#a0c2a89ad2edad9ad605d0461f9b132a5">RenameStruct</a>&gt;* <a class="el" href="classDefaultCommit.html#ae9b536282159ba75153a223be77515ba">renameQueue</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Rename instruction queue interface, for <a class="el" href="classROB.html">ROB</a>. </p>

</div>
</div>
<a class="anchor" id="af699b6479037861b3c0e17d4bfab001d"></a><!-- doxytag: member="DefaultCommit::renameToROBDelay" ref="af699b6479037861b3c0e17d4bfab001d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCycles.html">Cycles</a> <a class="el" href="classDefaultCommit.html#af699b6479037861b3c0e17d4bfab001d">renameToROBDelay</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Rename to <a class="el" href="classROB.html">ROB</a> delay. </p>

</div>
</div>
<a class="anchor" id="a4b41704382bddb6ee06b5ce97b47dd7b"></a><!-- doxytag: member="DefaultCommit::renameWidth" ref="a4b41704382bddb6ee06b5ce97b47dd7b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classDefaultCommit.html#a4b41704382bddb6ee06b5ce97b47dd7b">renameWidth</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Rename width, in instructions. Used so <a class="el" href="classROB.html">ROB</a> knows how many instructions to get from the rename instruction queue. </p>

</div>
</div>
<a class="anchor" id="a74983e0d923870864acf5b5477449d48"></a><!-- doxytag: member="DefaultCommit::rob" ref="a74983e0d923870864acf5b5477449d48" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classROB.html">ROB</a>* <a class="el" href="classDefaultCommit.html#a74983e0d923870864acf5b5477449d48">rob</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classROB.html">ROB</a> interface. </p>

</div>
</div>
<a class="anchor" id="a2b90705fefdf84763685650c2420f184"></a><!-- doxytag: member="DefaultCommit::robInfoFromIEW" ref="a2b90705fefdf84763685650c2420f184" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt;<a class="el" href="structTimeStruct.html">TimeStruct</a>&gt;::wire <a class="el" href="classDefaultCommit.html#a2b90705fefdf84763685650c2420f184">robInfoFromIEW</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classWire.html">Wire</a> to read information from IEW (for <a class="el" href="classROB.html">ROB</a>). </p>

</div>
</div>
<a class="anchor" id="ab9508ede35e5a000089a1450342412be"></a><!-- doxytag: member="DefaultCommit::skidBuffer" ref="ab9508ede35e5a000089a1450342412be" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::queue&lt;<a class="el" href="classDefaultCommit.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>&gt; <a class="el" href="classDefaultCommit.html#ab9508ede35e5a000089a1450342412be">skidBuffer</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Skid buffer between rename and commit. </p>

</div>
</div>
<a class="anchor" id="af0c3f70b9be736dfd854ea22a0131e1c"></a><!-- doxytag: member="DefaultCommit::squashAfterInst" ref="af0c3f70b9be736dfd854ea22a0131e1c" args="[Impl::MaxThreads]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDefaultCommit.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> <a class="el" href="classDefaultCommit.html#af0c3f70b9be736dfd854ea22a0131e1c">squashAfterInst</a>[Impl::MaxThreads]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Instruction passed to <a class="el" href="classDefaultCommit.html#ad47b387a7bbc4a2153b50f96b8fd2a51">squashAfter()</a>.</p>
<p>The squash after implementation needs to buffer the instruction that caused a squash since this needs to be passed to the fetch stage once squashing starts. </p>

</div>
</div>
<a class="anchor" id="a06341c2bebd8c862e411e474e01c9c1a"></a><!-- doxytag: member="DefaultCommit::squashCounter" ref="a06341c2bebd8c862e411e474e01c9c1a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> <a class="el" href="classDefaultCommit.html#a06341c2bebd8c862e411e474e01c9c1a">squashCounter</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A counter of how many threads are currently squashing. </p>

</div>
</div>
<a class="anchor" id="a39a7da0b20d1e83ccfe4b2f2b19d6e94"></a><!-- doxytag: member="DefaultCommit::statComBranches" ref="a39a7da0b20d1e83ccfe4b2f2b19d6e94" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a> <a class="el" href="classDefaultCommit.html#a39a7da0b20d1e83ccfe4b2f2b19d6e94">statComBranches</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Total number of committed branches. </p>

</div>
</div>
<a class="anchor" id="a2be26eb7dfa8b9e36d0c6fdcaea8d818"></a><!-- doxytag: member="DefaultCommit::statComFloating" ref="a2be26eb7dfa8b9e36d0c6fdcaea8d818" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a> <a class="el" href="classDefaultCommit.html#a2be26eb7dfa8b9e36d0c6fdcaea8d818">statComFloating</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Total number of floating point instructions </p>

</div>
</div>
<a class="anchor" id="acd1aba8c2f19771552212e9c2917ac6b"></a><!-- doxytag: member="DefaultCommit::statComFunctionCalls" ref="acd1aba8c2f19771552212e9c2917ac6b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a> <a class="el" href="classDefaultCommit.html#acd1aba8c2f19771552212e9c2917ac6b">statComFunctionCalls</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Total number of function calls </p>

</div>
</div>
<a class="anchor" id="ae562968e75d903bd12352af65cc558b6"></a><!-- doxytag: member="DefaultCommit::statComInteger" ref="ae562968e75d903bd12352af65cc558b6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a> <a class="el" href="classDefaultCommit.html#ae562968e75d903bd12352af65cc558b6">statComInteger</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Total number of integer instructions </p>

</div>
</div>
<a class="anchor" id="a91927819864b9dc9d1ac706dc55d5dce"></a><!-- doxytag: member="DefaultCommit::statComLoads" ref="a91927819864b9dc9d1ac706dc55d5dce" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a> <a class="el" href="classDefaultCommit.html#a91927819864b9dc9d1ac706dc55d5dce">statComLoads</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stat for the total number of committed loads. </p>

</div>
</div>
<a class="anchor" id="a9b029ac182d54199247dfa90ed86d368"></a><!-- doxytag: member="DefaultCommit::statComMembars" ref="a9b029ac182d54199247dfa90ed86d368" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a> <a class="el" href="classDefaultCommit.html#a9b029ac182d54199247dfa90ed86d368">statComMembars</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Total number of committed memory barriers. </p>

</div>
</div>
<a class="anchor" id="ad0d59ba553bc001d75aff706903e2f77"></a><!-- doxytag: member="DefaultCommit::statCommittedInstType" ref="ad0d59ba553bc001d75aff706903e2f77" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Vector2d.html">Stats::Vector2d</a> <a class="el" href="classDefaultCommit.html#ad0d59ba553bc001d75aff706903e2f77">statCommittedInstType</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Committed instructions by instruction type (OpClass) </p>

</div>
</div>
<a class="anchor" id="afe174c4b8e70d840a2e91bf1ca3092ac"></a><!-- doxytag: member="DefaultCommit::statComRefs" ref="afe174c4b8e70d840a2e91bf1ca3092ac" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a> <a class="el" href="classDefaultCommit.html#afe174c4b8e70d840a2e91bf1ca3092ac">statComRefs</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stat for the total number of committed memory references. </p>

</div>
</div>
<a class="anchor" id="a4cb385aa97530dd2621c74f376839e79"></a><!-- doxytag: member="DefaultCommit::statComSwp" ref="a4cb385aa97530dd2621c74f376839e79" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a> <a class="el" href="classDefaultCommit.html#a4cb385aa97530dd2621c74f376839e79">statComSwp</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Total number of software prefetches committed. </p>

</div>
</div>
<a class="anchor" id="a4fce523b7a931003efb9665605a87ca0"></a><!-- doxytag: member="DefaultCommit::tcSquash" ref="a4fce523b7a931003efb9665605a87ca0" args="[Impl::MaxThreads]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classDefaultCommit.html#a4fce523b7a931003efb9665605a87ca0">tcSquash</a>[Impl::MaxThreads]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Records if a thread has to squash this cycle due to an XC write. </p>

</div>
</div>
<a class="anchor" id="afe9da004c5a3f37cbb72fa3763d4c0d1"></a><!-- doxytag: member="DefaultCommit::thread" ref="afe9da004c5a3f37cbb72fa3763d4c0d1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt;<a class="el" href="structO3ThreadState.html">Thread</a> *&gt; <a class="el" href="classDefaultCommit.html#afe9da004c5a3f37cbb72fa3763d4c0d1">thread</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Vector of all of the threads. </p>

</div>
</div>
<a class="anchor" id="a83f9ee976e732665aeb08dbc19acfd45"></a><!-- doxytag: member="DefaultCommit::timeBuffer" ref="a83f9ee976e732665aeb08dbc19acfd45" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt;<a class="el" href="structTimeStruct.html">TimeStruct</a>&gt;* <a class="el" href="classDefaultCommit.html#a83f9ee976e732665aeb08dbc19acfd45">timeBuffer</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classTime.html">Time</a> buffer interface. </p>

</div>
</div>
<a class="anchor" id="a2877bfe6e25eb731f28c8c5a9ba55391"></a><!-- doxytag: member="DefaultCommit::toIEW" ref="a2877bfe6e25eb731f28c8c5a9ba55391" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt;<a class="el" href="structTimeStruct.html">TimeStruct</a>&gt;::wire <a class="el" href="classDefaultCommit.html#a2877bfe6e25eb731f28c8c5a9ba55391">toIEW</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classWire.html">Wire</a> to write information heading to previous stages. </p>

</div>
</div>
<a class="anchor" id="a4e366a325229901e41b68ff07e5f556a"></a><!-- doxytag: member="DefaultCommit::trapInFlight" ref="a4e366a325229901e41b68ff07e5f556a" args="[Impl::MaxThreads]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classDefaultCommit.html#a4e366a325229901e41b68ff07e5f556a">trapInFlight</a>[Impl::MaxThreads]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Records if there is a trap currently in flight. </p>

</div>
</div>
<a class="anchor" id="a0bfffaa2e5f9c7e79353e61146950a9a"></a><!-- doxytag: member="DefaultCommit::trapLatency" ref="a0bfffaa2e5f9c7e79353e61146950a9a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCycles.html">Cycles</a> <a class="el" href="classDefaultCommit.html#a0bfffaa2e5f9c7e79353e61146950a9a">trapLatency</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The latency to handle a trap. Used when scheduling trap squash event. </p>

</div>
</div>
<a class="anchor" id="af3547420a792f13034730b5f327a47ff"></a><!-- doxytag: member="DefaultCommit::trapSquash" ref="af3547420a792f13034730b5f327a47ff" args="[Impl::MaxThreads]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classDefaultCommit.html#af3547420a792f13034730b5f327a47ff">trapSquash</a>[Impl::MaxThreads]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Records if a thread has to squash this cycle due to a trap. </p>

</div>
</div>
<a class="anchor" id="a2c7e870d4babdac0dc91fc7ffabd0f3d"></a><!-- doxytag: member="DefaultCommit::wroteToTimeBuffer" ref="a2c7e870d4babdac0dc91fc7ffabd0f3d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classDefaultCommit.html#a2c7e870d4babdac0dc91fc7ffabd0f3d">wroteToTimeBuffer</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Records that commit has written to the time buffer this cycle. Used for the CPU to determine if it can deschedule itself if there is no activity. </p>

</div>
</div>
<a class="anchor" id="a1d81dc5c05e15057c1985acc39285540"></a><!-- doxytag: member="DefaultCommit::youngestSeqNum" ref="a1d81dc5c05e15057c1985acc39285540" args="[Impl::MaxThreads]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> <a class="el" href="classDefaultCommit.html#a1d81dc5c05e15057c1985acc39285540">youngestSeqNum</a>[Impl::MaxThreads]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The sequence number of the youngest valid instruction in the <a class="el" href="classROB.html">ROB</a>. </p>

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>cpu/o3/<a class="el" href="commit_8hh_source.html">commit.hh</a></li>
<li>cpu/o3/<a class="el" href="commit__impl_8hh_source.html">commit_impl.hh</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
