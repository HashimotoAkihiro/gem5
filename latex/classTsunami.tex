\hypertarget{classTsunami}{
\section{クラス Tsunami}
\label{classTsunami}\index{Tsunami@{Tsunami}}
}


{\ttfamily \#include $<$tsunami.hh$>$}Tsunamiに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=4cm]{classTsunami}
\end{center}
\end{figure}
\subsection*{構成}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classTsunami_1_1Tsunami}{Tsunami}
\item 
class \hyperlink{classTsunami_1_1TsunamiCChip}{TsunamiCChip}
\item 
class \hyperlink{classTsunami_1_1TsunamiIO}{TsunamiIO}
\item 
class \hyperlink{classTsunami_1_1TsunamiPChip}{TsunamiPChip}
\end{DoxyCompactItemize}
\subsection*{Public 型}
\begin{DoxyCompactItemize}
\item 
typedef TsunamiParams \hyperlink{classTsunami_a7beeeed12982def83e22faf17f7385e1}{Params}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classTsunami_a02fd73d861ef2e4aabb38c0c9ff82947}{init} ()
\item 
\hyperlink{classTsunami_a5243b59f52948d92f6ae8f98d0ff43a5}{Tsunami} (const \hyperlink{classTsunami_a7beeeed12982def83e22faf17f7385e1}{Params} $\ast$p)
\item 
virtual void \hyperlink{classTsunami_a5b278cebc0a62bc2195edf27f059ab1a}{postConsoleInt} ()
\item 
virtual void \hyperlink{classTsunami_ad38e46034c079c8e765d3ac7eb99337d}{clearConsoleInt} ()
\item 
virtual void \hyperlink{classTsunami_a545d1445357706d7259aa73104f44222}{postPciInt} (int line)
\item 
virtual void \hyperlink{classTsunami_a0d98ea2b236bb883fa15d63a59a2ec9e}{clearPciInt} (int line)
\item 
virtual \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{classTsunami_a87078b3d3a28ae134f6736337e90dac3}{pciToDma} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} pciAddr) const 
\item 
virtual \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{classTsunami_a5b8797a83289cb5fd895c9a5dc7eae6f}{calcPciConfigAddr} (int bus, int dev, int func)
\item 
virtual \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{classTsunami_a83afd16479598cfaeb035fd30eeedd8b}{calcPciIOAddr} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} addr)
\item 
virtual \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{classTsunami_aa2acd9bf04ba56b380e7812ce29971b5}{calcPciMemAddr} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} addr)
\item 
virtual void \hyperlink{classTsunami_a53e036786d17361be4c7320d39c99b84}{serialize} (std::ostream \&os)
\item 
virtual void \hyperlink{classTsunami_af22e5d6d660b97db37003ac61ac4ee49}{unserialize} (\hyperlink{classCheckpoint}{Checkpoint} $\ast$cp, const std::string \&section)
\end{DoxyCompactItemize}
\subsection*{Public 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classSystem}{System} $\ast$ \hyperlink{classTsunami_af27ccd765f13a4b7bd119dc7579e2746}{system}
\item 
\hyperlink{classTsunami_1_1TsunamiIO}{TsunamiIO} $\ast$ \hyperlink{classTsunami_a9d42ea935a6d6bddb63076040468dfe4}{io}
\item 
\hyperlink{classTsunami_1_1TsunamiCChip}{TsunamiCChip} $\ast$ \hyperlink{classTsunami_afd150142ed1f45226be23c3dfc00fa79}{cchip}
\item 
\hyperlink{classTsunami_1_1TsunamiPChip}{TsunamiPChip} $\ast$ \hyperlink{classTsunami_aff5dc15395b4de17c7cefb01a627f822}{pchip}
\item 
int \hyperlink{classTsunami_a10691edeecd1b6fe8a38b465bdf4c41d}{intr\_\-sum\_\-type} \mbox{[}\hyperlink{classTsunami_ab15ce4af0fe2c47746a30bafa34ced51}{Tsunami::Max\_\-CPUs}\mbox{]}
\item 
int \hyperlink{classTsunami_ae3bd11c65a338e493ad9b0df87a6b34c}{ipi\_\-pending} \mbox{[}\hyperlink{classTsunami_ab15ce4af0fe2c47746a30bafa34ced51}{Tsunami::Max\_\-CPUs}\mbox{]}
\end{DoxyCompactItemize}
\subsection*{Static Public 変数}
\begin{DoxyCompactItemize}
\item 
static const int \hyperlink{classTsunami_ab15ce4af0fe2c47746a30bafa34ced51}{Max\_\-CPUs} = 64
\end{DoxyCompactItemize}


\subsection{説明}
Top level class for \hyperlink{classTsunami}{Tsunami} Chipset emulation. This structure just contains pointers to all the children so the children can commnicate to do the read work 

\subsection{型定義}
\hypertarget{classTsunami_a7beeeed12982def83e22faf17f7385e1}{
\index{Tsunami@{Tsunami}!Params@{Params}}
\index{Params@{Params}!Tsunami@{Tsunami}}
\subsubsection[{Params}]{\setlength{\rightskip}{0pt plus 5cm}typedef TsunamiParams {\bf Params}}}
\label{classTsunami_a7beeeed12982def83e22faf17f7385e1}


\hyperlink{classPlatform_af4e77eaf2602e4808deef7d1ba95e579}{Platform}を再定義しています。

\subsection{コンストラクタとデストラクタ}
\hypertarget{classTsunami_a5243b59f52948d92f6ae8f98d0ff43a5}{
\index{Tsunami@{Tsunami}!Tsunami@{Tsunami}}
\index{Tsunami@{Tsunami}!Tsunami@{Tsunami}}
\subsubsection[{Tsunami}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tsunami} (const {\bf Params} $\ast$ {\em p})}}
\label{classTsunami_a5243b59f52948d92f6ae8f98d0ff43a5}



\begin{DoxyCode}
53     : Platform(p), system(p->system)
54 {
55     for (int i = 0; i < Tsunami::Max_CPUs; i++)
56         intr_sum_type[i] = 0;
57 }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classTsunami_a5b8797a83289cb5fd895c9a5dc7eae6f}{
\index{Tsunami@{Tsunami}!calcPciConfigAddr@{calcPciConfigAddr}}
\index{calcPciConfigAddr@{calcPciConfigAddr}!Tsunami@{Tsunami}}
\subsubsection[{calcPciConfigAddr}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Addr} calcPciConfigAddr (int {\em bus}, \/  int {\em dev}, \/  int {\em func})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classTsunami_a5b8797a83289cb5fd895c9a5dc7eae6f}
Calculate the configuration address given a bus/dev/func. 

\hyperlink{classPlatform_a4a2bdce1a8794dd3ea6ca12b36320433}{Platform}を実装しています。


\begin{DoxyCode}
100 {
101    return pchip->calcConfigAddr(bus, dev, func);
102 }
\end{DoxyCode}
\hypertarget{classTsunami_a83afd16479598cfaeb035fd30eeedd8b}{
\index{Tsunami@{Tsunami}!calcPciIOAddr@{calcPciIOAddr}}
\index{calcPciIOAddr@{calcPciIOAddr}!Tsunami@{Tsunami}}
\subsubsection[{calcPciIOAddr}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Addr} calcPciIOAddr ({\bf Addr} {\em addr})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classTsunami_a83afd16479598cfaeb035fd30eeedd8b}
Calculate the address for an IO location on the PCI bus. 

\hyperlink{classPlatform_a3d1d55996e865ab1b65c732496c08b00}{Platform}を実装しています。


\begin{DoxyCode}
106 {
107    return pchip->calcIOAddr(addr);
108 }
\end{DoxyCode}
\hypertarget{classTsunami_aa2acd9bf04ba56b380e7812ce29971b5}{
\index{Tsunami@{Tsunami}!calcPciMemAddr@{calcPciMemAddr}}
\index{calcPciMemAddr@{calcPciMemAddr}!Tsunami@{Tsunami}}
\subsubsection[{calcPciMemAddr}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Addr} calcPciMemAddr ({\bf Addr} {\em addr})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classTsunami_aa2acd9bf04ba56b380e7812ce29971b5}
Calculate the address for a memory location on the PCI bus. 

\hyperlink{classPlatform_a303d8161e77b31b8425cb320562a54b2}{Platform}を実装しています。


\begin{DoxyCode}
112 {
113    return pchip->calcMemAddr(addr);
114 }
\end{DoxyCode}
\hypertarget{classTsunami_ad38e46034c079c8e765d3ac7eb99337d}{
\index{Tsunami@{Tsunami}!clearConsoleInt@{clearConsoleInt}}
\index{clearConsoleInt@{clearConsoleInt}!Tsunami@{Tsunami}}
\subsubsection[{clearConsoleInt}]{\setlength{\rightskip}{0pt plus 5cm}void clearConsoleInt ()\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classTsunami_ad38e46034c079c8e765d3ac7eb99337d}
Clear a posted CPU interrupt (id=55) 

\hyperlink{classPlatform_aaf1bfcf0f5ac95c6a9d1607172a5a29e}{Platform}を実装しています。


\begin{DoxyCode}
75 {
76     io->clearPIC(0x10);
77 }
\end{DoxyCode}
\hypertarget{classTsunami_a0d98ea2b236bb883fa15d63a59a2ec9e}{
\index{Tsunami@{Tsunami}!clearPciInt@{clearPciInt}}
\index{clearPciInt@{clearPciInt}!Tsunami@{Tsunami}}
\subsubsection[{clearPciInt}]{\setlength{\rightskip}{0pt plus 5cm}void clearPciInt (int {\em line})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classTsunami_a0d98ea2b236bb883fa15d63a59a2ec9e}
Clear a posted PCI-\/$>$CPU interrupt 

\hyperlink{classPlatform_a0d98ea2b236bb883fa15d63a59a2ec9e}{Platform}を再定義しています。


\begin{DoxyCode}
87 {
88     cchip->clearDRIR(line);
89 }
\end{DoxyCode}
\hypertarget{classTsunami_a02fd73d861ef2e4aabb38c0c9ff82947}{
\index{Tsunami@{Tsunami}!init@{init}}
\index{init@{init}!Tsunami@{Tsunami}}
\subsubsection[{init}]{\setlength{\rightskip}{0pt plus 5cm}void init ()\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classTsunami_a02fd73d861ef2e4aabb38c0c9ff82947}
\hyperlink{classTsunami_a02fd73d861ef2e4aabb38c0c9ff82947}{init()} is called after all C++ SimObjects have been created and all ports are connected. Initializations that are independent of unserialization but rely on a fully instantiated and connected \hyperlink{classSimObject}{SimObject} graph should be done here. 

\hyperlink{classSimObject_a02fd73d861ef2e4aabb38c0c9ff82947}{SimObject}を再定義しています。


\begin{DoxyCode}
61 {
62     AlphaSystem *alphaSystem = dynamic_cast<AlphaSystem *>(system);
63     assert(alphaSystem);
64     alphaSystem->setIntrFreq(io->frequency());
65 }
\end{DoxyCode}
\hypertarget{classTsunami_a87078b3d3a28ae134f6736337e90dac3}{
\index{Tsunami@{Tsunami}!pciToDma@{pciToDma}}
\index{pciToDma@{pciToDma}!Tsunami@{Tsunami}}
\subsubsection[{pciToDma}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Addr} pciToDma ({\bf Addr} {\em pciAddr}) const\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classTsunami_a87078b3d3a28ae134f6736337e90dac3}


\hyperlink{classPlatform_a87078b3d3a28ae134f6736337e90dac3}{Platform}を再定義しています。


\begin{DoxyCode}
93 {
94     return pchip->translatePciToDma(pciAddr);
95 }
\end{DoxyCode}
\hypertarget{classTsunami_a5b278cebc0a62bc2195edf27f059ab1a}{
\index{Tsunami@{Tsunami}!postConsoleInt@{postConsoleInt}}
\index{postConsoleInt@{postConsoleInt}!Tsunami@{Tsunami}}
\subsubsection[{postConsoleInt}]{\setlength{\rightskip}{0pt plus 5cm}void postConsoleInt ()\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classTsunami_a5b278cebc0a62bc2195edf27f059ab1a}
Cause the cpu to post a serial interrupt to the CPU. 

\hyperlink{classPlatform_a24ab6780a0fa391b19980027355ba467}{Platform}を実装しています。


\begin{DoxyCode}
69 {
70     io->postPIC(0x10);
71 }
\end{DoxyCode}
\hypertarget{classTsunami_a545d1445357706d7259aa73104f44222}{
\index{Tsunami@{Tsunami}!postPciInt@{postPciInt}}
\index{postPciInt@{postPciInt}!Tsunami@{Tsunami}}
\subsubsection[{postPciInt}]{\setlength{\rightskip}{0pt plus 5cm}void postPciInt (int {\em line})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classTsunami_a545d1445357706d7259aa73104f44222}
Cause the chipset to post a cpi interrupt to the CPU. 

\hyperlink{classPlatform_a545d1445357706d7259aa73104f44222}{Platform}を再定義しています。


\begin{DoxyCode}
81 {
82     cchip->postDRIR(line);
83 }
\end{DoxyCode}
\hypertarget{classTsunami_a53e036786d17361be4c7320d39c99b84}{
\index{Tsunami@{Tsunami}!serialize@{serialize}}
\index{serialize@{serialize}!Tsunami@{Tsunami}}
\subsubsection[{serialize}]{\setlength{\rightskip}{0pt plus 5cm}void serialize (std::ostream \& {\em os})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classTsunami_a53e036786d17361be4c7320d39c99b84}
Serialize this object to the given output stream. 
\begin{DoxyParams}{引数}
\item[{\em os}]The stream to serialize to. \end{DoxyParams}


\hyperlink{classSerializable_ad6272f80ae37e8331e3969b3f072a801}{Serializable}を再定義しています。


\begin{DoxyCode}
118 {
119     SERIALIZE_ARRAY(intr_sum_type, Tsunami::Max_CPUs);
120 }
\end{DoxyCode}
\hypertarget{classTsunami_af22e5d6d660b97db37003ac61ac4ee49}{
\index{Tsunami@{Tsunami}!unserialize@{unserialize}}
\index{unserialize@{unserialize}!Tsunami@{Tsunami}}
\subsubsection[{unserialize}]{\setlength{\rightskip}{0pt plus 5cm}void unserialize ({\bf Checkpoint} $\ast$ {\em cp}, \/  const std::string \& {\em section})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classTsunami_af22e5d6d660b97db37003ac61ac4ee49}
Reconstruct the state of this object from a checkpoint. 
\begin{DoxyParams}{引数}
\item[{\em \hyperlink{namespacecp}{cp}}]The checkpoint use. \item[{\em section}]The section name of this object \end{DoxyParams}


\hyperlink{classSerializable_af100c4e9feabf3cd918619c88c718387}{Serializable}を再定義しています。


\begin{DoxyCode}
124 {
125     UNSERIALIZE_ARRAY(intr_sum_type, Tsunami::Max_CPUs);
126 }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classTsunami_afd150142ed1f45226be23c3dfc00fa79}{
\index{Tsunami@{Tsunami}!cchip@{cchip}}
\index{cchip@{cchip}!Tsunami@{Tsunami}}
\subsubsection[{cchip}]{\setlength{\rightskip}{0pt plus 5cm}{\bf TsunamiCChip}$\ast$ {\bf cchip}}}
\label{classTsunami_afd150142ed1f45226be23c3dfc00fa79}
Pointer to the \hyperlink{classTsunami}{Tsunami} CChip. The chip contains some configuration information and all the interrupt mask and status registers \hypertarget{classTsunami_a10691edeecd1b6fe8a38b465bdf4c41d}{
\index{Tsunami@{Tsunami}!intr\_\-sum\_\-type@{intr\_\-sum\_\-type}}
\index{intr\_\-sum\_\-type@{intr\_\-sum\_\-type}!Tsunami@{Tsunami}}
\subsubsection[{intr\_\-sum\_\-type}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf intr\_\-sum\_\-type}\mbox{[}{\bf Tsunami::Max\_\-CPUs}\mbox{]}}}
\label{classTsunami_a10691edeecd1b6fe8a38b465bdf4c41d}
\hypertarget{classTsunami_a9d42ea935a6d6bddb63076040468dfe4}{
\index{Tsunami@{Tsunami}!io@{io}}
\index{io@{io}!Tsunami@{Tsunami}}
\subsubsection[{io}]{\setlength{\rightskip}{0pt plus 5cm}{\bf TsunamiIO}$\ast$ {\bf io}}}
\label{classTsunami_a9d42ea935a6d6bddb63076040468dfe4}
Pointer to the \hyperlink{classTsunami_1_1TsunamiIO}{TsunamiIO} device which has the RTC \hypertarget{classTsunami_ae3bd11c65a338e493ad9b0df87a6b34c}{
\index{Tsunami@{Tsunami}!ipi\_\-pending@{ipi\_\-pending}}
\index{ipi\_\-pending@{ipi\_\-pending}!Tsunami@{Tsunami}}
\subsubsection[{ipi\_\-pending}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf ipi\_\-pending}\mbox{[}{\bf Tsunami::Max\_\-CPUs}\mbox{]}}}
\label{classTsunami_ae3bd11c65a338e493ad9b0df87a6b34c}
\hypertarget{classTsunami_ab15ce4af0fe2c47746a30bafa34ced51}{
\index{Tsunami@{Tsunami}!Max\_\-CPUs@{Max\_\-CPUs}}
\index{Max\_\-CPUs@{Max\_\-CPUs}!Tsunami@{Tsunami}}
\subsubsection[{Max\_\-CPUs}]{\setlength{\rightskip}{0pt plus 5cm}const int {\bf Max\_\-CPUs} = 64\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classTsunami_ab15ce4af0fe2c47746a30bafa34ced51}
Max number of CPUs in a \hyperlink{classTsunami}{Tsunami} \hypertarget{classTsunami_aff5dc15395b4de17c7cefb01a627f822}{
\index{Tsunami@{Tsunami}!pchip@{pchip}}
\index{pchip@{pchip}!Tsunami@{Tsunami}}
\subsubsection[{pchip}]{\setlength{\rightskip}{0pt plus 5cm}{\bf TsunamiPChip}$\ast$ {\bf pchip}}}
\label{classTsunami_aff5dc15395b4de17c7cefb01a627f822}
Pointer to the \hyperlink{classTsunami}{Tsunami} PChip. The pchip is the interface to the PCI bus, in our case it does not have to do much. \hypertarget{classTsunami_af27ccd765f13a4b7bd119dc7579e2746}{
\index{Tsunami@{Tsunami}!system@{system}}
\index{system@{system}!Tsunami@{Tsunami}}
\subsubsection[{system}]{\setlength{\rightskip}{0pt plus 5cm}{\bf System}$\ast$ {\bf system}}}
\label{classTsunami_af27ccd765f13a4b7bd119dc7579e2746}
Pointer to the system 

\hyperlink{classPlatform_af27ccd765f13a4b7bd119dc7579e2746}{Platform}を再定義しています。

このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
dev/alpha/\hyperlink{tsunami_8hh}{tsunami.hh}\item 
dev/alpha/\hyperlink{tsunami_8cc}{tsunami.cc}\end{DoxyCompactItemize}
