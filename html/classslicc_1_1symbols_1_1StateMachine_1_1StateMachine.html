<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス StateMachine</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespaceslicc.html">slicc</a>::<a class="el" href="namespaceslicc_1_1symbols.html">symbols</a>::<a class="el" href="namespaceslicc_1_1symbols_1_1StateMachine.html">StateMachine</a>::<a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html">StateMachine</a>
  </div>
</div>
<div class="contents">
<h1>クラス StateMachine</h1><!-- doxytag: class="slicc::symbols::StateMachine::StateMachine" --><!-- doxytag: inherits="slicc::symbols::Symbol::Symbol" --><div class="dynheader">
StateMachineに対する継承グラフ</div>
<div class="dynsection">
 <div class="center">
  <img src="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.gif" usemap="#StateMachine_map" alt=""/>
  <map id="StateMachine_map" name="StateMachine_map">
<area href="classslicc_1_1symbols_1_1Symbol_1_1Symbol.html" alt="Symbol" shape="rect" coords="0,56,90,80"/>
<area href="classslicc_1_1util_1_1PairContainer.html" alt="PairContainer" shape="rect" coords="0,0,90,24"/>
</map>
 </div>
</div>

<p><a href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ac775ee34451fdfa742b318538164070e">__init__</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ad8b9328939df072e4740cd9a63189744">__repr__</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a6569c9bd5b0babd85dc5d9b39e07bafa">addState</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a1ac9aa52837502937e5ee3e0ce890a62">addEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ae8ace979fedd5039fbbcd455d89e4f16">addAction</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a2d53f96afcd199deeb93e18c887fc92d">addRequestType</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a6e104d0b882481fa086a4a71f63e127f">addTransition</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a0ab73bf36b127f7138fd40fd95e22db4">addInPort</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a8d499326f557cbeadeab18a84e8e0dc6">addFunc</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a87866fd7076ee9f239bc4f4b73689dfb">addObject</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a1d3434788e322f0a2d8c45cb6d4a6cf9">addType</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a3f3cff659e075a9c68c3ed38d1c739cd">buildTable</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69d0582bde832d4ff45237ab5ff116bb">writeCodeFiles</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a25a336d53100c6b055cd925314315411">printControllerPython</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a51c25c0a0d014fffeeea2ab7d9981ad6">printControllerHH</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ac7ff5b8d214aa5dc308c9bf318dbf803">printControllerCC</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a152a40a5c142388231336a6935cfff80">printCWakeup</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a077df50bb09dac9bc0a7fcac3703b74f">printCSwitch</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#acece50be46cc760cf24771b26ee54557">frameRef</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#abc09a7197df5d7ef04e5cdfaa1139ead">writeHTMLFiles</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#afb8052d1dbc1134969e50782472ae16e">printHTMLTransitions</a></td></tr>
<tr><td colspan="2"><h2>Public 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ab172ed3d3d31ff02fc5f798fe7e1bfb8">table</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ae063a2c5f7b248003e02898444bff038">config_parameters</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#af0b16110b614ead1551cff2bbce6286c">prefetchers</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#aa19be6305a5a4485e1e70de70ed7d677">states</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ad29858f6d8ab73f2970f41cb21a76b84">events</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#af806efc6052edbc741683ec893bb2fe1">actions</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a11a77bd4543c82e1dd96d60507dc74d2">request_types</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a2594171e7c2a90ab61e43e1bc68adaf7">transitions</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a06be0f234b0fd1771925b6d3b60b083d">in_ports</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a2cb6c540c07a402759bab624703ecdb2">functions</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a68a28c9ed35f4a725b22cbf60728cb23">objects</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69c0c742629be6ee761c6b4d1c70cdbc">TBEType</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a9ed8d16c9ae7fae285dd2146c3159023">EntryType</a></td></tr>
</table>
<hr/><h2>関数</h2>
<a class="anchor" id="ac775ee34451fdfa742b318538164070e"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::__init__" ref="ac775ee34451fdfa742b318538164070e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def __init__ </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>symtab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>ident</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>pairs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>config_parameters</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00051"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ac775ee34451fdfa742b318538164070e">00051</a>                                                                          :
<a name="l00052"></a>00052         super(StateMachine, self).__init__(symtab, ident, location, pairs)
<a name="l00053"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ab172ed3d3d31ff02fc5f798fe7e1bfb8">00053</a>         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ab172ed3d3d31ff02fc5f798fe7e1bfb8">table</a> = <span class="keywordtype">None</span>
<a name="l00054"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ae063a2c5f7b248003e02898444bff038">00054</a>         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ae063a2c5f7b248003e02898444bff038">config_parameters</a> = config_parameters
<a name="l00055"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#af0b16110b614ead1551cff2bbce6286c">00055</a>         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#af0b16110b614ead1551cff2bbce6286c">prefetchers</a> = []
<a name="l00056"></a>00056 
<a name="l00057"></a>00057         <span class="keywordflow">for</span> param <span class="keywordflow">in</span> config_parameters:
<a name="l00058"></a>00058             <span class="keywordflow">if</span> param.pointer:
<a name="l00059"></a>00059                 var = Var(symtab, param.name, location, param.type_ast.type,
<a name="l00060"></a>00060                           <span class="stringliteral">&quot;(*m_%s_ptr)&quot;</span> % param.name, {}, self)
<a name="l00061"></a>00061             <span class="keywordflow">else</span>:
<a name="l00062"></a>00062                 var = Var(symtab, param.name, location, param.type_ast.type,
<a name="l00063"></a>00063                           <span class="stringliteral">&quot;m_%s&quot;</span> % param.name, {}, self)
<a name="l00064"></a>00064             self.symtab.registerSym(param.name, var)
<a name="l00065"></a>00065             <span class="keywordflow">if</span> str(param.type_ast.type) == <span class="stringliteral">&quot;Prefetcher&quot;</span>:
<a name="l00066"></a>00066                 self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#af0b16110b614ead1551cff2bbce6286c">prefetchers</a>.append(var)
<a name="l00067"></a>00067 
<a name="l00068"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#aa19be6305a5a4485e1e70de70ed7d677">00068</a>         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#aa19be6305a5a4485e1e70de70ed7d677">states</a> = orderdict()
<a name="l00069"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ad29858f6d8ab73f2970f41cb21a76b84">00069</a>         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ad29858f6d8ab73f2970f41cb21a76b84">events</a> = orderdict()
<a name="l00070"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#af806efc6052edbc741683ec893bb2fe1">00070</a>         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#af806efc6052edbc741683ec893bb2fe1">actions</a> = orderdict()
<a name="l00071"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a11a77bd4543c82e1dd96d60507dc74d2">00071</a>         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a11a77bd4543c82e1dd96d60507dc74d2">request_types</a> = orderdict()
<a name="l00072"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a2594171e7c2a90ab61e43e1bc68adaf7">00072</a>         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a2594171e7c2a90ab61e43e1bc68adaf7">transitions</a> = []
<a name="l00073"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a06be0f234b0fd1771925b6d3b60b083d">00073</a>         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a06be0f234b0fd1771925b6d3b60b083d">in_ports</a> = []
<a name="l00074"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a2cb6c540c07a402759bab624703ecdb2">00074</a>         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a2cb6c540c07a402759bab624703ecdb2">functions</a> = []
<a name="l00075"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a68a28c9ed35f4a725b22cbf60728cb23">00075</a>         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a68a28c9ed35f4a725b22cbf60728cb23">objects</a> = []
<a name="l00076"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69c0c742629be6ee761c6b4d1c70cdbc">00076</a>         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69c0c742629be6ee761c6b4d1c70cdbc">TBEType</a>   = <span class="keywordtype">None</span>
<a name="l00077"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a9ed8d16c9ae7fae285dd2146c3159023">00077</a>         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a9ed8d16c9ae7fae285dd2146c3159023">EntryType</a> = <span class="keywordtype">None</span>
<a name="l00078"></a>00078 
    <span class="keyword">def </span><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ad8b9328939df072e4740cd9a63189744">__repr__</a>(self):
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad8b9328939df072e4740cd9a63189744"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::__repr__" ref="ad8b9328939df072e4740cd9a63189744" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def __repr__ </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classslicc_1_1symbols_1_1Symbol_1_1Symbol.html#ad8b9328939df072e4740cd9a63189744">Symbol</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00079"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ad8b9328939df072e4740cd9a63189744">00079</a>                       :
<a name="l00080"></a>00080         <span class="keywordflow">return</span> <span class="stringliteral">&quot;[StateMachine: %s]&quot;</span> % self.ident
<a name="l00081"></a>00081 
    <span class="keyword">def </span><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a6569c9bd5b0babd85dc5d9b39e07bafa">addState</a>(self, state):
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae8ace979fedd5039fbbcd455d89e4f16"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::addAction" ref="ae8ace979fedd5039fbbcd455d89e4f16" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def addAction </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>action</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00090"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ae8ace979fedd5039fbbcd455d89e4f16">00090</a>                                :
<a name="l00091"></a>00091         <span class="keyword">assert</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ab172ed3d3d31ff02fc5f798fe7e1bfb8">table</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span>
<a name="l00092"></a>00092 
<a name="l00093"></a>00093         <span class="comment"># Check for duplicate action</span>
<a name="l00094"></a>00094         <span class="keywordflow">for</span> other <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#af806efc6052edbc741683ec893bb2fe1">actions</a>.itervalues():
<a name="l00095"></a>00095             <span class="keywordflow">if</span> action.ident == other.ident:
<a name="l00096"></a>00096                 action.warning(<span class="stringliteral">&quot;Duplicate action definition: %s&quot;</span> % action.ident)
<a name="l00097"></a>00097                 action.error(<span class="stringliteral">&quot;Duplicate action definition: %s&quot;</span> % action.ident)
<a name="l00098"></a>00098             <span class="keywordflow">if</span> action.short == other.short:
<a name="l00099"></a>00099                 other.warning(<span class="stringliteral">&quot;Duplicate action shorthand: %s&quot;</span> % other.ident)
<a name="l00100"></a>00100                 other.warning(<span class="stringliteral">&quot;    shorthand = %s&quot;</span> % other.short)
<a name="l00101"></a>00101                 action.warning(<span class="stringliteral">&quot;Duplicate action shorthand: %s&quot;</span> % action.ident)
<a name="l00102"></a>00102                 action.error(<span class="stringliteral">&quot;    shorthand = %s&quot;</span> % action.short)
<a name="l00103"></a>00103 
<a name="l00104"></a>00104         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#af806efc6052edbc741683ec893bb2fe1">actions</a>[action.ident] = action
<a name="l00105"></a>00105 
    <span class="keyword">def </span><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a2d53f96afcd199deeb93e18c887fc92d">addRequestType</a>(self, request_type):
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1ac9aa52837502937e5ee3e0ce890a62"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::addEvent" ref="a1ac9aa52837502937e5ee3e0ce890a62" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def addEvent </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>event</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00086"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a1ac9aa52837502937e5ee3e0ce890a62">00086</a>                              :
<a name="l00087"></a>00087         <span class="keyword">assert</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ab172ed3d3d31ff02fc5f798fe7e1bfb8">table</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span>
<a name="l00088"></a>00088         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ad29858f6d8ab73f2970f41cb21a76b84">events</a>[event.ident] = event
<a name="l00089"></a>00089 
    <span class="keyword">def </span><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ae8ace979fedd5039fbbcd455d89e4f16">addAction</a>(self, action):
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8d499326f557cbeadeab18a84e8e0dc6"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::addFunc" ref="a8d499326f557cbeadeab18a84e8e0dc6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def addFunc </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>func</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00117"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a8d499326f557cbeadeab18a84e8e0dc6">00117</a>                            :
<a name="l00118"></a>00118         <span class="comment"># register func in the symbol table</span>
<a name="l00119"></a>00119         self.symtab.registerSym(str(func), func)
<a name="l00120"></a>00120         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a2cb6c540c07a402759bab624703ecdb2">functions</a>.append(func)
<a name="l00121"></a>00121 
    <span class="keyword">def </span><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a87866fd7076ee9f239bc4f4b73689dfb">addObject</a>(self, obj):
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0ab73bf36b127f7138fd40fd95e22db4"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::addInPort" ref="a0ab73bf36b127f7138fd40fd95e22db4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def addInPort </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>var</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00114"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a0ab73bf36b127f7138fd40fd95e22db4">00114</a>                             :
<a name="l00115"></a>00115         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a06be0f234b0fd1771925b6d3b60b083d">in_ports</a>.append(var)
<a name="l00116"></a>00116 
    <span class="keyword">def </span><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a8d499326f557cbeadeab18a84e8e0dc6">addFunc</a>(self, func):
</pre></div></p>

</div>
</div>
<a class="anchor" id="a87866fd7076ee9f239bc4f4b73689dfb"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::addObject" ref="a87866fd7076ee9f239bc4f4b73689dfb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def addObject </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>obj</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00122"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a87866fd7076ee9f239bc4f4b73689dfb">00122</a>                             :
<a name="l00123"></a>00123         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a68a28c9ed35f4a725b22cbf60728cb23">objects</a>.append(obj)
<a name="l00124"></a>00124 
    <span class="keyword">def </span><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a1d3434788e322f0a2d8c45cb6d4a6cf9">addType</a>(self, type):
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2d53f96afcd199deeb93e18c887fc92d"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::addRequestType" ref="a2d53f96afcd199deeb93e18c887fc92d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def addRequestType </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>request_type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00106"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a2d53f96afcd199deeb93e18c887fc92d">00106</a>                                           :
<a name="l00107"></a>00107         <span class="keyword">assert</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ab172ed3d3d31ff02fc5f798fe7e1bfb8">table</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span>
<a name="l00108"></a>00108         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a11a77bd4543c82e1dd96d60507dc74d2">request_types</a>[request_type.ident] = request_type
<a name="l00109"></a>00109 
    <span class="keyword">def </span><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a6e104d0b882481fa086a4a71f63e127f">addTransition</a>(self, trans):
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6569c9bd5b0babd85dc5d9b39e07bafa"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::addState" ref="a6569c9bd5b0babd85dc5d9b39e07bafa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def addState </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>state</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00082"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a6569c9bd5b0babd85dc5d9b39e07bafa">00082</a>                              :
<a name="l00083"></a>00083         <span class="keyword">assert</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ab172ed3d3d31ff02fc5f798fe7e1bfb8">table</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span>
<a name="l00084"></a>00084         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#aa19be6305a5a4485e1e70de70ed7d677">states</a>[state.ident] = state
<a name="l00085"></a>00085 
    <span class="keyword">def </span><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a1ac9aa52837502937e5ee3e0ce890a62">addEvent</a>(self, event):
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6e104d0b882481fa086a4a71f63e127f"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::addTransition" ref="a6e104d0b882481fa086a4a71f63e127f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def addTransition </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>trans</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00110"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a6e104d0b882481fa086a4a71f63e127f">00110</a>                                   :
<a name="l00111"></a>00111         <span class="keyword">assert</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ab172ed3d3d31ff02fc5f798fe7e1bfb8">table</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span>
<a name="l00112"></a>00112         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a2594171e7c2a90ab61e43e1bc68adaf7">transitions</a>.append(trans)
<a name="l00113"></a>00113 
    <span class="keyword">def </span><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a0ab73bf36b127f7138fd40fd95e22db4">addInPort</a>(self, var):
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1d3434788e322f0a2d8c45cb6d4a6cf9"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::addType" ref="a1d3434788e322f0a2d8c45cb6d4a6cf9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def addType </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00125"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a1d3434788e322f0a2d8c45cb6d4a6cf9">00125</a>                            :
<a name="l00126"></a>00126         type_ident = <span class="stringliteral">&apos;%s&apos;</span> % type.c_ident
<a name="l00127"></a>00127 
<a name="l00128"></a>00128         <span class="keywordflow">if</span> type_ident == <span class="stringliteral">&quot;%s_TBE&quot;</span> %self.ident:
<a name="l00129"></a>00129             <span class="keywordflow">if</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69c0c742629be6ee761c6b4d1c70cdbc">TBEType</a> != <span class="keywordtype">None</span>:
<a name="l00130"></a>00130                 self.error(<span class="stringliteral">&quot;Multiple Transaction Buffer types in a &quot;</span> \
<a name="l00131"></a>00131                            <span class="stringliteral">&quot;single machine.&quot;</span>);
<a name="l00132"></a>00132             self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69c0c742629be6ee761c6b4d1c70cdbc">TBEType</a> = type
<a name="l00133"></a>00133 
<a name="l00134"></a>00134         <span class="keywordflow">elif</span> <span class="stringliteral">&quot;interface&quot;</span> <span class="keywordflow">in</span> type <span class="keywordflow">and</span> <span class="stringliteral">&quot;AbstractCacheEntry&quot;</span> == type[<span class="stringliteral">&quot;interface&quot;</span>]:
<a name="l00135"></a>00135             <span class="keywordflow">if</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a9ed8d16c9ae7fae285dd2146c3159023">EntryType</a> != <span class="keywordtype">None</span>:
<a name="l00136"></a>00136                 self.error(<span class="stringliteral">&quot;Multiple AbstractCacheEntry types in a &quot;</span> \
<a name="l00137"></a>00137                            <span class="stringliteral">&quot;single machine.&quot;</span>);
<a name="l00138"></a>00138             self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a9ed8d16c9ae7fae285dd2146c3159023">EntryType</a> = type
<a name="l00139"></a>00139 
<a name="l00140"></a>00140     <span class="comment"># Needs to be called before accessing the table</span>
    <span class="keyword">def </span><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a3f3cff659e075a9c68c3ed38d1c739cd">buildTable</a>(self):
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3f3cff659e075a9c68c3ed38d1c739cd"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::buildTable" ref="a3f3cff659e075a9c68c3ed38d1c739cd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def buildTable </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00141"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a3f3cff659e075a9c68c3ed38d1c739cd">00141</a>                         :
<a name="l00142"></a>00142         <span class="keyword">assert</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ab172ed3d3d31ff02fc5f798fe7e1bfb8">table</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span>
<a name="l00143"></a>00143 
<a name="l00144"></a>00144         table = {}
<a name="l00145"></a>00145 
<a name="l00146"></a>00146         <span class="keywordflow">for</span> trans <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a2594171e7c2a90ab61e43e1bc68adaf7">transitions</a>:
<a name="l00147"></a>00147             <span class="comment"># Track which actions we touch so we know if we use them</span>
<a name="l00148"></a>00148             <span class="comment"># all -- really this should be done for all symbols as</span>
<a name="l00149"></a>00149             <span class="comment"># part of the symbol table, then only trigger it for</span>
<a name="l00150"></a>00150             <span class="comment"># Actions, States, Events, etc.</span>
<a name="l00151"></a>00151 
<a name="l00152"></a>00152             <span class="keywordflow">for</span> action <span class="keywordflow">in</span> trans.actions:
<a name="l00153"></a>00153                 action.used = <span class="keyword">True</span>
<a name="l00154"></a>00154 
<a name="l00155"></a>00155             index = (trans.state, trans.event)
<a name="l00156"></a>00156             <span class="keywordflow">if</span> index <span class="keywordflow">in</span> table:
<a name="l00157"></a>00157                 table[index].warning(<span class="stringliteral">&quot;Duplicate transition: %s&quot;</span> % table[index])
<a name="l00158"></a>00158                 trans.error(<span class="stringliteral">&quot;Duplicate transition: %s&quot;</span> % trans)
<a name="l00159"></a>00159             table[index] = trans
<a name="l00160"></a>00160 
<a name="l00161"></a>00161         <span class="comment"># Look at all actions to make sure we used them all</span>
<a name="l00162"></a>00162         <span class="keywordflow">for</span> action <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#af806efc6052edbc741683ec893bb2fe1">actions</a>.itervalues():
<a name="l00163"></a>00163             <span class="keywordflow">if</span> <span class="keywordflow">not</span> action.used:
<a name="l00164"></a>00164                 error_msg = <span class="stringliteral">&quot;Unused action: %s&quot;</span> % action.ident
<a name="l00165"></a>00165                 <span class="keywordflow">if</span> <span class="stringliteral">&quot;desc&quot;</span> <span class="keywordflow">in</span> action:
<a name="l00166"></a>00166                     error_msg += <span class="stringliteral">&quot;, &quot;</span>  + action.desc
<a name="l00167"></a>00167                 action.warning(error_msg)
<a name="l00168"></a>00168         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ab172ed3d3d31ff02fc5f798fe7e1bfb8">table</a> = table
<a name="l00169"></a>00169 
    <span class="keyword">def </span><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69d0582bde832d4ff45237ab5ff116bb">writeCodeFiles</a>(self, path, includes):
</pre></div></p>

</div>
</div>
<a class="anchor" id="acece50be46cc760cf24771b26ee54557"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::frameRef" ref="acece50be46cc760cf24771b26ee54557" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def frameRef </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>click_href</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>click_target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>over_href</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>over_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>text</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l01337"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#acece50be46cc760cf24771b26ee54557">01337</a>                                                                            :
<a name="l01338"></a>01338         code = self.symtab.codeFormatter(fix_newlines=<span class="keyword">False</span>)
<a name="l01339"></a>01339         code(<span class="stringliteral">&quot;&quot;&quot;&lt;A href=\&quot;$click_href\&quot; target=\&quot;$click_target\&quot; onmouseover=\&quot;</span>
<a name="l01340"></a>01340 <span class="stringliteral">    if (parent.frames[$over_num].location != parent.location + &apos;$over_href&apos;) {</span>
<a name="l01341"></a>01341 <span class="stringliteral">        parent.frames[$over_num].location=&apos;$over_href&apos;</span>
<a name="l01342"></a>01342 <span class="stringliteral">    }\&quot;&gt;</span>
<a name="l01343"></a>01343 <span class="stringliteral">    ${{html.formatShorthand(text)}}</span>
<a name="l01344"></a>01344 <span class="stringliteral">    &lt;/A&gt;&quot;&quot;&quot;</span>)
<a name="l01345"></a>01345         <span class="keywordflow">return</span> str(code)
<a name="l01346"></a>01346 
    <span class="keyword">def </span><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#abc09a7197df5d7ef04e5cdfaa1139ead">writeHTMLFiles</a>(self, path):
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac7ff5b8d214aa5dc308c9bf318dbf803"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::printControllerCC" ref="ac7ff5b8d214aa5dc308c9bf318dbf803" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def printControllerCC </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>includes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">Output the actions for performing the actions</pre></div> 
<p><div class="fragment"><pre class="fragment"><a name="l00394"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ac7ff5b8d214aa5dc308c9bf318dbf803">00394</a>                                                :
<a name="l00395"></a>00395         <span class="stringliteral">&apos;&apos;&apos;Output the actions for performing the actions&apos;&apos;&apos;</span>
<a name="l00396"></a>00396 
<a name="l00397"></a>00397         code = self.symtab.codeFormatter()
<a name="l00398"></a>00398         ident = self.ident
<a name="l00399"></a>00399         c_ident = <span class="stringliteral">&quot;%s_Controller&quot;</span> % self.ident
<a name="l00400"></a>00400         has_peer = <span class="keyword">False</span>
<a name="l00401"></a>00401 
<a name="l00402"></a>00402         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00403"></a>00403 <span class="stringliteral">/** \\file $c_ident.cc</span>
<a name="l00404"></a>00404 <span class="stringliteral"> *</span>
<a name="l00405"></a>00405 <span class="stringliteral"> * Auto generated C++ code started by $__file__:$__line__</span>
<a name="l00406"></a>00406 <span class="stringliteral"> * Created by slicc definition of Module &quot;${{self.short}}&quot;</span>
<a name="l00407"></a>00407 <span class="stringliteral"> */</span>
<a name="l00408"></a>00408 <span class="stringliteral"></span>
<a name="l00409"></a>00409 <span class="stringliteral">#include &lt;sys/types.h&gt;</span>
<a name="l00410"></a>00410 <span class="stringliteral">#include &lt;unistd.h&gt;</span>
<a name="l00411"></a>00411 <span class="stringliteral"></span>
<a name="l00412"></a>00412 <span class="stringliteral">#include &lt;cassert&gt;</span>
<a name="l00413"></a>00413 <span class="stringliteral">#include &lt;sstream&gt;</span>
<a name="l00414"></a>00414 <span class="stringliteral">#include &lt;string&gt;</span>
<a name="l00415"></a>00415 <span class="stringliteral"></span>
<a name="l00416"></a>00416 <span class="stringliteral">#include &quot;base/compiler.hh&quot;</span>
<a name="l00417"></a>00417 <span class="stringliteral">#include &quot;base/cprintf.hh&quot;</span>
<a name="l00418"></a>00418 <span class="stringliteral">#include &quot;debug/RubyGenerated.hh&quot;</span>
<a name="l00419"></a>00419 <span class="stringliteral">#include &quot;debug/RubySlicc.hh&quot;</span>
<a name="l00420"></a>00420 <span class="stringliteral">#include &quot;mem/protocol/${ident}_Controller.hh&quot;</span>
<a name="l00421"></a>00421 <span class="stringliteral">#include &quot;mem/protocol/${ident}_Event.hh&quot;</span>
<a name="l00422"></a>00422 <span class="stringliteral">#include &quot;mem/protocol/${ident}_State.hh&quot;</span>
<a name="l00423"></a>00423 <span class="stringliteral">#include &quot;mem/protocol/Types.hh&quot;</span>
<a name="l00424"></a>00424 <span class="stringliteral">#include &quot;mem/ruby/common/Global.hh&quot;</span>
<a name="l00425"></a>00425 <span class="stringliteral">#include &quot;mem/ruby/system/System.hh&quot;</span>
<a name="l00426"></a>00426 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00427"></a>00427         <span class="keywordflow">for</span> include_path <span class="keywordflow">in</span> includes:
<a name="l00428"></a>00428             code(<span class="stringliteral">&apos;#include &quot;${{include_path}}&quot;&apos;</span>)
<a name="l00429"></a>00429 
<a name="l00430"></a>00430         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00431"></a>00431 <span class="stringliteral"></span>
<a name="l00432"></a>00432 <span class="stringliteral">using namespace std;</span>
<a name="l00433"></a>00433 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00434"></a>00434 
<a name="l00435"></a>00435         <span class="comment"># include object classes</span>
<a name="l00436"></a>00436         seen_types = set()
<a name="l00437"></a>00437         <span class="keywordflow">for</span> var <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a68a28c9ed35f4a725b22cbf60728cb23">objects</a>:
<a name="l00438"></a>00438             <span class="keywordflow">if</span> var.type.ident <span class="keywordflow">not</span> <span class="keywordflow">in</span> seen_types <span class="keywordflow">and</span> <span class="keywordflow">not</span> var.type.isPrimitive:
<a name="l00439"></a>00439                 code(<span class="stringliteral">&apos;#include &quot;mem/protocol/${{var.type.c_ident}}.hh&quot;&apos;</span>)
<a name="l00440"></a>00440             seen_types.add(var.type.ident)
<a name="l00441"></a>00441 
<a name="l00442"></a>00442         num_in_ports = len(self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a06be0f234b0fd1771925b6d3b60b083d">in_ports</a>)
<a name="l00443"></a>00443 
<a name="l00444"></a>00444         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00445"></a>00445 <span class="stringliteral">$c_ident *</span>
<a name="l00446"></a>00446 <span class="stringliteral">${c_ident}Params::create()</span>
<a name="l00447"></a>00447 <span class="stringliteral">{</span>
<a name="l00448"></a>00448 <span class="stringliteral">    return new $c_ident(this);</span>
<a name="l00449"></a>00449 <span class="stringliteral">}</span>
<a name="l00450"></a>00450 <span class="stringliteral"></span>
<a name="l00451"></a>00451 <span class="stringliteral">int $c_ident::m_num_controllers = 0;</span>
<a name="l00452"></a>00452 <span class="stringliteral">std::vector&lt;Stats::Vector *&gt;  $c_ident::eventVec;</span>
<a name="l00453"></a>00453 <span class="stringliteral">std::vector&lt;std::vector&lt;Stats::Vector *&gt; &gt;  $c_ident::transVec;</span>
<a name="l00454"></a>00454 <span class="stringliteral"></span>
<a name="l00455"></a>00455 <span class="stringliteral">// for adding information to the protocol debug trace</span>
<a name="l00456"></a>00456 <span class="stringliteral">stringstream ${ident}_transitionComment;</span>
<a name="l00457"></a>00457 <span class="stringliteral"></span>
<a name="l00458"></a>00458 <span class="stringliteral">#ifndef NDEBUG</span>
<a name="l00459"></a>00459 <span class="stringliteral">#define APPEND_TRANSITION_COMMENT(str) (${ident}_transitionComment &lt;&lt; str)</span>
<a name="l00460"></a>00460 <span class="stringliteral">#else</span>
<a name="l00461"></a>00461 <span class="stringliteral">#define APPEND_TRANSITION_COMMENT(str) do {} while (0)</span>
<a name="l00462"></a>00462 <span class="stringliteral">#endif</span>
<a name="l00463"></a>00463 <span class="stringliteral"></span>
<a name="l00464"></a>00464 <span class="stringliteral">/** \\brief constructor */</span>
<a name="l00465"></a>00465 <span class="stringliteral">$c_ident::$c_ident(const Params *p)</span>
<a name="l00466"></a>00466 <span class="stringliteral">    : AbstractController(p)</span>
<a name="l00467"></a>00467 <span class="stringliteral">{</span>
<a name="l00468"></a>00468 <span class="stringliteral">    m_machineID.type = MachineType_${ident};</span>
<a name="l00469"></a>00469 <span class="stringliteral">    m_machineID.num = m_version;</span>
<a name="l00470"></a>00470 <span class="stringliteral">    m_num_controllers++;</span>
<a name="l00471"></a>00471 <span class="stringliteral"></span>
<a name="l00472"></a>00472 <span class="stringliteral">    m_in_ports = $num_in_ports;</span>
<a name="l00473"></a>00473 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00474"></a>00474         code.indent()
<a name="l00475"></a>00475 
<a name="l00476"></a>00476         <span class="comment">#</span>
<a name="l00477"></a>00477         <span class="comment"># After initializing the universal machine parameters, initialize the</span>
<a name="l00478"></a>00478         <span class="comment"># this machines config parameters.  Also if these configuration params</span>
<a name="l00479"></a>00479         <span class="comment"># include a sequencer, connect the it to the controller.</span>
<a name="l00480"></a>00480         <span class="comment">#</span>
<a name="l00481"></a>00481         <span class="keywordflow">for</span> param <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ae063a2c5f7b248003e02898444bff038">config_parameters</a>:
<a name="l00482"></a>00482             <span class="keywordflow">if</span> param.pointer:
<a name="l00483"></a>00483                 code(<span class="stringliteral">&apos;m_${{param.name}}_ptr = p-&gt;${{param.name}};&apos;</span>)
<a name="l00484"></a>00484             <span class="keywordflow">else</span>:
<a name="l00485"></a>00485                 code(<span class="stringliteral">&apos;m_${{param.name}} = p-&gt;${{param.name}};&apos;</span>)
<a name="l00486"></a>00486             <span class="keywordflow">if</span> re.compile(<span class="stringliteral">&quot;sequencer&quot;</span>).search(param.name):
<a name="l00487"></a>00487                 code(<span class="stringliteral">&apos;m_${{param.name}}_ptr-&gt;setController(this);&apos;</span>)
<a name="l00488"></a>00488             
<a name="l00489"></a>00489         <span class="keywordflow">for</span> var <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a68a28c9ed35f4a725b22cbf60728cb23">objects</a>:
<a name="l00490"></a>00490             <span class="keywordflow">if</span> var.ident.find(<span class="stringliteral">&quot;mandatoryQueue&quot;</span>) &gt;= 0:
<a name="l00491"></a>00491                 code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00492"></a>00492 <span class="stringliteral">m_${{var.c_ident}}_ptr = new ${{var.type.c_ident}}();</span>
<a name="l00493"></a>00493 <span class="stringliteral">m_${{var.c_ident}}_ptr-&gt;setReceiver(this);</span>
<a name="l00494"></a>00494 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00495"></a>00495             <span class="keywordflow">else</span>:
<a name="l00496"></a>00496                 <span class="keywordflow">if</span> <span class="stringliteral">&quot;network&quot;</span> <span class="keywordflow">in</span> var <span class="keywordflow">and</span> <span class="stringliteral">&quot;physical_network&quot;</span> <span class="keywordflow">in</span> var <span class="keywordflow">and</span> \
<a name="l00497"></a>00497                    var[<span class="stringliteral">&quot;network&quot;</span>] == <span class="stringliteral">&quot;To&quot;</span>:
<a name="l00498"></a>00498                     has_peer = <span class="keyword">True</span>
<a name="l00499"></a>00499                     code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00500"></a>00500 <span class="stringliteral">m_${{var.c_ident}}_ptr = new ${{var.type.c_ident}}();</span>
<a name="l00501"></a>00501 <span class="stringliteral">peerQueueMap[${{var[&quot;physical_network&quot;]}}] = m_${{var.c_ident}}_ptr;</span>
<a name="l00502"></a>00502 <span class="stringliteral">m_${{var.c_ident}}_ptr-&gt;setSender(this);</span>
<a name="l00503"></a>00503 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00504"></a>00504 
<a name="l00505"></a>00505         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00506"></a>00506 <span class="stringliteral">if (p-&gt;peer != NULL)</span>
<a name="l00507"></a>00507 <span class="stringliteral">    connectWithPeer(p-&gt;peer);</span>
<a name="l00508"></a>00508 <span class="stringliteral"></span>
<a name="l00509"></a>00509 <span class="stringliteral">for (int state = 0; state &lt; ${ident}_State_NUM; state++) {</span>
<a name="l00510"></a>00510 <span class="stringliteral">    for (int event = 0; event &lt; ${ident}_Event_NUM; event++) {</span>
<a name="l00511"></a>00511 <span class="stringliteral">        m_possible[state][event] = false;</span>
<a name="l00512"></a>00512 <span class="stringliteral">        m_counters[state][event] = 0;</span>
<a name="l00513"></a>00513 <span class="stringliteral">    }</span>
<a name="l00514"></a>00514 <span class="stringliteral">}</span>
<a name="l00515"></a>00515 <span class="stringliteral">for (int event = 0; event &lt; ${ident}_Event_NUM; event++) {</span>
<a name="l00516"></a>00516 <span class="stringliteral">    m_event_counters[event] = 0;</span>
<a name="l00517"></a>00517 <span class="stringliteral">}</span>
<a name="l00518"></a>00518 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00519"></a>00519         code.dedent()
<a name="l00520"></a>00520         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00521"></a>00521 <span class="stringliteral">}</span>
<a name="l00522"></a>00522 <span class="stringliteral"></span>
<a name="l00523"></a>00523 <span class="stringliteral">void</span>
<a name="l00524"></a>00524 <span class="stringliteral">$c_ident::init()</span>
<a name="l00525"></a>00525 <span class="stringliteral">{</span>
<a name="l00526"></a>00526 <span class="stringliteral">    MachineType machine_type = string_to_MachineType(&quot;${{var.machine.ident}}&quot;);</span>
<a name="l00527"></a>00527 <span class="stringliteral">    int base M5_VAR_USED = MachineType_base_number(machine_type);</span>
<a name="l00528"></a>00528 <span class="stringliteral"></span>
<a name="l00529"></a>00529 <span class="stringliteral">    // initialize objects</span>
<a name="l00530"></a>00530 <span class="stringliteral"></span>
<a name="l00531"></a>00531 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00532"></a>00532 
<a name="l00533"></a>00533         code.indent()
<a name="l00534"></a>00534         <span class="keywordflow">for</span> var <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a68a28c9ed35f4a725b22cbf60728cb23">objects</a>:
<a name="l00535"></a>00535             vtype = var.type
<a name="l00536"></a>00536             vid = <span class="stringliteral">&quot;m_%s_ptr&quot;</span> % var.c_ident
<a name="l00537"></a>00537             <span class="keywordflow">if</span> <span class="stringliteral">&quot;network&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> var:
<a name="l00538"></a>00538                 <span class="comment"># Not a network port object</span>
<a name="l00539"></a>00539                 <span class="keywordflow">if</span> <span class="stringliteral">&quot;primitive&quot;</span> <span class="keywordflow">in</span> vtype:
<a name="l00540"></a>00540                     code(<span class="stringliteral">&apos;$vid = new ${{vtype.c_ident}};&apos;</span>)
<a name="l00541"></a>00541                     <span class="keywordflow">if</span> <span class="stringliteral">&quot;default&quot;</span> <span class="keywordflow">in</span> var:
<a name="l00542"></a>00542                         code(<span class="stringliteral">&apos;(*$vid) = ${{var[&quot;default&quot;]}};&apos;</span>)
<a name="l00543"></a>00543                 <span class="keywordflow">else</span>:
<a name="l00544"></a>00544                     <span class="comment"># Normal Object</span>
<a name="l00545"></a>00545                     <span class="keywordflow">if</span> var.ident.find(<span class="stringliteral">&quot;mandatoryQueue&quot;</span>) &lt; 0:
<a name="l00546"></a>00546                         th = var.get(<span class="stringliteral">&quot;template&quot;</span>, <span class="stringliteral">&quot;&quot;</span>)
<a name="l00547"></a>00547                         expr = <span class="stringliteral">&quot;%s  = new %s%s&quot;</span> % (vid, vtype.c_ident, th)
<a name="l00548"></a>00548                         args = <span class="stringliteral">&quot;&quot;</span>
<a name="l00549"></a>00549                         <span class="keywordflow">if</span> <span class="stringliteral">&quot;non_obj&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> vtype <span class="keywordflow">and</span> <span class="keywordflow">not</span> vtype.isEnumeration:
<a name="l00550"></a>00550                             args = var.get(<span class="stringliteral">&quot;constructor&quot;</span>, <span class="stringliteral">&quot;&quot;</span>)
<a name="l00551"></a>00551                         code(<span class="stringliteral">&apos;$expr($args);&apos;</span>)
<a name="l00552"></a>00552 
<a name="l00553"></a>00553                     code(<span class="stringliteral">&apos;assert($vid != NULL);&apos;</span>)
<a name="l00554"></a>00554 
<a name="l00555"></a>00555                     <span class="keywordflow">if</span> <span class="stringliteral">&quot;default&quot;</span> <span class="keywordflow">in</span> var:
<a name="l00556"></a>00556                         code(<span class="stringliteral">&apos;*$vid = ${{var[&quot;default&quot;]}}; // Object default&apos;</span>)
<a name="l00557"></a>00557                     <span class="keywordflow">elif</span> <span class="stringliteral">&quot;default&quot;</span> <span class="keywordflow">in</span> vtype:
<a name="l00558"></a>00558                         comment = <span class="stringliteral">&quot;Type %s default&quot;</span> % vtype.ident
<a name="l00559"></a>00559                         code(<span class="stringliteral">&apos;*$vid = ${{vtype[&quot;default&quot;]}}; // $comment&apos;</span>)
<a name="l00560"></a>00560 
<a name="l00561"></a>00561                     <span class="comment"># Set ordering</span>
<a name="l00562"></a>00562                     <span class="keywordflow">if</span> <span class="stringliteral">&quot;ordered&quot;</span> <span class="keywordflow">in</span> var:
<a name="l00563"></a>00563                         <span class="comment"># A buffer</span>
<a name="l00564"></a>00564                         code(<span class="stringliteral">&apos;$vid-&gt;setOrdering(${{var[&quot;ordered&quot;]}});&apos;</span>)
<a name="l00565"></a>00565 
<a name="l00566"></a>00566                     <span class="comment"># Set randomization</span>
<a name="l00567"></a>00567                     <span class="keywordflow">if</span> <span class="stringliteral">&quot;random&quot;</span> <span class="keywordflow">in</span> var:
<a name="l00568"></a>00568                         <span class="comment"># A buffer</span>
<a name="l00569"></a>00569                         code(<span class="stringliteral">&apos;$vid-&gt;setRandomization(${{var[&quot;random&quot;]}});&apos;</span>)
<a name="l00570"></a>00570 
<a name="l00571"></a>00571                     <span class="comment"># Set Priority</span>
<a name="l00572"></a>00572                     <span class="keywordflow">if</span> vtype.isBuffer <span class="keywordflow">and</span> <span class="stringliteral">&quot;rank&quot;</span> <span class="keywordflow">in</span> var:
<a name="l00573"></a>00573                         code(<span class="stringliteral">&apos;$vid-&gt;setPriority(${{var[&quot;rank&quot;]}});&apos;</span>)
<a name="l00574"></a>00574 
<a name="l00575"></a>00575                     <span class="comment"># Set sender and receiver for trigger queue</span>
<a name="l00576"></a>00576                     <span class="keywordflow">if</span> var.ident.find(<span class="stringliteral">&quot;triggerQueue&quot;</span>) &gt;= 0:
<a name="l00577"></a>00577                         code(<span class="stringliteral">&apos;$vid-&gt;setSender(this);&apos;</span>)
<a name="l00578"></a>00578                         code(<span class="stringliteral">&apos;$vid-&gt;setReceiver(this);&apos;</span>)
<a name="l00579"></a>00579                     <span class="keywordflow">elif</span> vtype.c_ident == <span class="stringliteral">&quot;TimerTable&quot;</span>:
<a name="l00580"></a>00580                         code(<span class="stringliteral">&apos;$vid-&gt;setClockObj(this);&apos;</span>)
<a name="l00581"></a>00581                     <span class="keywordflow">elif</span> var.ident.find(<span class="stringliteral">&quot;optionalQueue&quot;</span>) &gt;= 0:
<a name="l00582"></a>00582                         code(<span class="stringliteral">&apos;$vid-&gt;setSender(this);&apos;</span>)
<a name="l00583"></a>00583                         code(<span class="stringliteral">&apos;$vid-&gt;setReceiver(this);&apos;</span>)
<a name="l00584"></a>00584 
<a name="l00585"></a>00585             <span class="keywordflow">else</span>:
<a name="l00586"></a>00586                 <span class="comment"># Network port object</span>
<a name="l00587"></a>00587                 network = var[<span class="stringliteral">&quot;network&quot;</span>]
<a name="l00588"></a>00588                 ordered =  var[<span class="stringliteral">&quot;ordered&quot;</span>]
<a name="l00589"></a>00589 
<a name="l00590"></a>00590                 <span class="keywordflow">if</span> <span class="stringliteral">&quot;virtual_network&quot;</span> <span class="keywordflow">in</span> var:
<a name="l00591"></a>00591                     vnet = var[<span class="stringliteral">&quot;virtual_network&quot;</span>]
<a name="l00592"></a>00592                     vnet_type = var[<span class="stringliteral">&quot;vnet_type&quot;</span>]
<a name="l00593"></a>00593 
<a name="l00594"></a>00594                     <span class="keyword">assert</span> var.machine <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>
<a name="l00595"></a>00595                     code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00596"></a>00596 <span class="stringliteral">$vid = m_net_ptr-&gt;get${network}NetQueue(m_version + base, $ordered, $vnet, &quot;$vnet_type&quot;);</span>
<a name="l00597"></a>00597 <span class="stringliteral">assert($vid != NULL);</span>
<a name="l00598"></a>00598 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00599"></a>00599 
<a name="l00600"></a>00600                     <span class="comment"># Set the end</span>
<a name="l00601"></a>00601                     <span class="keywordflow">if</span> network == <span class="stringliteral">&quot;To&quot;</span>:
<a name="l00602"></a>00602                         code(<span class="stringliteral">&apos;$vid-&gt;setSender(this);&apos;</span>)
<a name="l00603"></a>00603                     <span class="keywordflow">else</span>:
<a name="l00604"></a>00604                         code(<span class="stringliteral">&apos;$vid-&gt;setReceiver(this);&apos;</span>)
<a name="l00605"></a>00605 
<a name="l00606"></a>00606                 <span class="comment"># Set ordering</span>
<a name="l00607"></a>00607                 <span class="keywordflow">if</span> <span class="stringliteral">&quot;ordered&quot;</span> <span class="keywordflow">in</span> var:
<a name="l00608"></a>00608                     <span class="comment"># A buffer</span>
<a name="l00609"></a>00609                     code(<span class="stringliteral">&apos;$vid-&gt;setOrdering(${{var[&quot;ordered&quot;]}});&apos;</span>)
<a name="l00610"></a>00610 
<a name="l00611"></a>00611                 <span class="comment"># Set randomization</span>
<a name="l00612"></a>00612                 <span class="keywordflow">if</span> <span class="stringliteral">&quot;random&quot;</span> <span class="keywordflow">in</span> var:
<a name="l00613"></a>00613                     <span class="comment"># A buffer</span>
<a name="l00614"></a>00614                     code(<span class="stringliteral">&apos;$vid-&gt;setRandomization(${{var[&quot;random&quot;]}});&apos;</span>)
<a name="l00615"></a>00615 
<a name="l00616"></a>00616                 <span class="comment"># Set Priority</span>
<a name="l00617"></a>00617                 <span class="keywordflow">if</span> <span class="stringliteral">&quot;rank&quot;</span> <span class="keywordflow">in</span> var:
<a name="l00618"></a>00618                     code(<span class="stringliteral">&apos;$vid-&gt;setPriority(${{var[&quot;rank&quot;]}})&apos;</span>)
<a name="l00619"></a>00619 
<a name="l00620"></a>00620                 <span class="comment"># Set buffer size</span>
<a name="l00621"></a>00621                 <span class="keywordflow">if</span> vtype.isBuffer:
<a name="l00622"></a>00622                     code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00623"></a>00623 <span class="stringliteral">if (m_buffer_size &gt; 0) {</span>
<a name="l00624"></a>00624 <span class="stringliteral">    $vid-&gt;resize(m_buffer_size);</span>
<a name="l00625"></a>00625 <span class="stringliteral">}</span>
<a name="l00626"></a>00626 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00627"></a>00627 
<a name="l00628"></a>00628                 <span class="comment"># set description (may be overriden later by port def)</span>
<a name="l00629"></a>00629                 code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00630"></a>00630 <span class="stringliteral">$vid-&gt;setDescription(&quot;[Version &quot; + to_string(m_version) + &quot;, ${ident}, name=${{var.c_ident}}]&quot;);</span>
<a name="l00631"></a>00631 <span class="stringliteral"></span>
<a name="l00632"></a>00632 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00633"></a>00633 
<a name="l00634"></a>00634             <span class="keywordflow">if</span> vtype.isBuffer:
<a name="l00635"></a>00635                 <span class="keywordflow">if</span> <span class="stringliteral">&quot;recycle_latency&quot;</span> <span class="keywordflow">in</span> var:
<a name="l00636"></a>00636                     code(<span class="stringliteral">&apos;$vid-&gt;setRecycleLatency( &apos;</span> \
<a name="l00637"></a>00637                          <span class="stringliteral">&apos;Cycles(${{var[&quot;recycle_latency&quot;]}}));&apos;</span>)
<a name="l00638"></a>00638                 <span class="keywordflow">else</span>:
<a name="l00639"></a>00639                     code(<span class="stringliteral">&apos;$vid-&gt;setRecycleLatency(m_recycle_latency);&apos;</span>)
<a name="l00640"></a>00640 
<a name="l00641"></a>00641         <span class="comment"># Set the prefetchers</span>
<a name="l00642"></a>00642         code()
<a name="l00643"></a>00643         <span class="keywordflow">for</span> prefetcher <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#af0b16110b614ead1551cff2bbce6286c">prefetchers</a>:
<a name="l00644"></a>00644             code(<span class="stringliteral">&apos;${{prefetcher.code}}.setController(this);&apos;</span>)
<a name="l00645"></a>00645 
<a name="l00646"></a>00646         code()
<a name="l00647"></a>00647         <span class="keywordflow">for</span> port <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a06be0f234b0fd1771925b6d3b60b083d">in_ports</a>:
<a name="l00648"></a>00648             <span class="comment"># Set the queue consumers</span>
<a name="l00649"></a>00649             code(<span class="stringliteral">&apos;${{port.code}}.setConsumer(this);&apos;</span>)
<a name="l00650"></a>00650             <span class="comment"># Set the queue descriptions</span>
<a name="l00651"></a>00651             code(<span class="stringliteral">&apos;${{port.code}}.setDescription(&quot;[Version &quot; + to_string(m_version) + &quot;, $ident, $port]&quot;);&apos;</span>)
<a name="l00652"></a>00652 
<a name="l00653"></a>00653         <span class="comment"># Initialize the transition profiling</span>
<a name="l00654"></a>00654         code()
<a name="l00655"></a>00655         <span class="keywordflow">for</span> trans <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a2594171e7c2a90ab61e43e1bc68adaf7">transitions</a>:
<a name="l00656"></a>00656             <span class="comment"># Figure out if we stall</span>
<a name="l00657"></a>00657             stall = <span class="keyword">False</span>
<a name="l00658"></a>00658             <span class="keywordflow">for</span> action <span class="keywordflow">in</span> trans.actions:
<a name="l00659"></a>00659                 <span class="keywordflow">if</span> action.ident == <span class="stringliteral">&quot;z_stall&quot;</span>:
<a name="l00660"></a>00660                     stall = <span class="keyword">True</span>
<a name="l00661"></a>00661 
<a name="l00662"></a>00662             <span class="comment"># Only possible if it is not a &apos;z&apos; case</span>
<a name="l00663"></a>00663             <span class="keywordflow">if</span> <span class="keywordflow">not</span> stall:
<a name="l00664"></a>00664                 state = <span class="stringliteral">&quot;%s_State_%s&quot;</span> % (self.ident, trans.state.ident)
<a name="l00665"></a>00665                 event = <span class="stringliteral">&quot;%s_Event_%s&quot;</span> % (self.ident, trans.event.ident)
<a name="l00666"></a>00666                 code(<span class="stringliteral">&apos;possibleTransition($state, $event);&apos;</span>)
<a name="l00667"></a>00667 
<a name="l00668"></a>00668         code.dedent()
<a name="l00669"></a>00669         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00670"></a>00670 <span class="stringliteral">    AbstractController::init();</span>
<a name="l00671"></a>00671 <span class="stringliteral">    resetStats();</span>
<a name="l00672"></a>00672 <span class="stringliteral">}</span>
<a name="l00673"></a>00673 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00674"></a>00674 
<a name="l00675"></a>00675         mq_ident = <span class="stringliteral">&quot;NULL&quot;</span>
<a name="l00676"></a>00676         <span class="keywordflow">for</span> port <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a06be0f234b0fd1771925b6d3b60b083d">in_ports</a>:
<a name="l00677"></a>00677             <span class="keywordflow">if</span> port.code.find(<span class="stringliteral">&quot;mandatoryQueue_ptr&quot;</span>) &gt;= 0:
<a name="l00678"></a>00678                 mq_ident = <span class="stringliteral">&quot;m_%s_mandatoryQueue_ptr&quot;</span> % self.ident
<a name="l00679"></a>00679 
<a name="l00680"></a>00680         seq_ident = <span class="stringliteral">&quot;NULL&quot;</span>
<a name="l00681"></a>00681         <span class="keywordflow">for</span> param <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ae063a2c5f7b248003e02898444bff038">config_parameters</a>:
<a name="l00682"></a>00682             <span class="keywordflow">if</span> param.name == <span class="stringliteral">&quot;sequencer&quot;</span>:
<a name="l00683"></a>00683                 <span class="keyword">assert</span>(param.pointer)
<a name="l00684"></a>00684                 seq_ident = <span class="stringliteral">&quot;m_%s_ptr&quot;</span> % param.name
<a name="l00685"></a>00685 
<a name="l00686"></a>00686         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00687"></a>00687 <span class="stringliteral"></span>
<a name="l00688"></a>00688 <span class="stringliteral">void</span>
<a name="l00689"></a>00689 <span class="stringliteral">$c_ident::regStats()</span>
<a name="l00690"></a>00690 <span class="stringliteral">{</span>
<a name="l00691"></a>00691 <span class="stringliteral">    AbstractController::regStats();</span>
<a name="l00692"></a>00692 <span class="stringliteral"></span>
<a name="l00693"></a>00693 <span class="stringliteral">    if (m_version == 0) {</span>
<a name="l00694"></a>00694 <span class="stringliteral">        for (${ident}_Event event = ${ident}_Event_FIRST;</span>
<a name="l00695"></a>00695 <span class="stringliteral">             event &lt; ${ident}_Event_NUM; ++event) {</span>
<a name="l00696"></a>00696 <span class="stringliteral">            Stats::Vector *t = new Stats::Vector();</span>
<a name="l00697"></a>00697 <span class="stringliteral">            t-&gt;init(m_num_controllers);</span>
<a name="l00698"></a>00698 <span class="stringliteral">            t-&gt;name(g_system_ptr-&gt;name() + &quot;.${c_ident}.&quot; +</span>
<a name="l00699"></a>00699 <span class="stringliteral">                ${ident}_Event_to_string(event));</span>
<a name="l00700"></a>00700 <span class="stringliteral">            t-&gt;flags(Stats::pdf | Stats::total | Stats::oneline |</span>
<a name="l00701"></a>00701 <span class="stringliteral">                     Stats::nozero);</span>
<a name="l00702"></a>00702 <span class="stringliteral"></span>
<a name="l00703"></a>00703 <span class="stringliteral">            eventVec.push_back(t);</span>
<a name="l00704"></a>00704 <span class="stringliteral">        }</span>
<a name="l00705"></a>00705 <span class="stringliteral"></span>
<a name="l00706"></a>00706 <span class="stringliteral">        for (${ident}_State state = ${ident}_State_FIRST;</span>
<a name="l00707"></a>00707 <span class="stringliteral">             state &lt; ${ident}_State_NUM; ++state) {</span>
<a name="l00708"></a>00708 <span class="stringliteral"></span>
<a name="l00709"></a>00709 <span class="stringliteral">            transVec.push_back(std::vector&lt;Stats::Vector *&gt;());</span>
<a name="l00710"></a>00710 <span class="stringliteral"></span>
<a name="l00711"></a>00711 <span class="stringliteral">            for (${ident}_Event event = ${ident}_Event_FIRST;</span>
<a name="l00712"></a>00712 <span class="stringliteral">                 event &lt; ${ident}_Event_NUM; ++event) {</span>
<a name="l00713"></a>00713 <span class="stringliteral"></span>
<a name="l00714"></a>00714 <span class="stringliteral">                Stats::Vector *t = new Stats::Vector();</span>
<a name="l00715"></a>00715 <span class="stringliteral">                t-&gt;init(m_num_controllers);</span>
<a name="l00716"></a>00716 <span class="stringliteral">                t-&gt;name(g_system_ptr-&gt;name() + &quot;.${c_ident}.&quot; +</span>
<a name="l00717"></a>00717 <span class="stringliteral">                        ${ident}_State_to_string(state) +</span>
<a name="l00718"></a>00718 <span class="stringliteral">                        &quot;.&quot; + ${ident}_Event_to_string(event));</span>
<a name="l00719"></a>00719 <span class="stringliteral"></span>
<a name="l00720"></a>00720 <span class="stringliteral">                t-&gt;flags(Stats::pdf | Stats::total | Stats::oneline |</span>
<a name="l00721"></a>00721 <span class="stringliteral">                         Stats::nozero);</span>
<a name="l00722"></a>00722 <span class="stringliteral">                transVec[state].push_back(t);</span>
<a name="l00723"></a>00723 <span class="stringliteral">            }</span>
<a name="l00724"></a>00724 <span class="stringliteral">        }</span>
<a name="l00725"></a>00725 <span class="stringliteral">    }</span>
<a name="l00726"></a>00726 <span class="stringliteral">}</span>
<a name="l00727"></a>00727 <span class="stringliteral"></span>
<a name="l00728"></a>00728 <span class="stringliteral">void</span>
<a name="l00729"></a>00729 <span class="stringliteral">$c_ident::collateStats()</span>
<a name="l00730"></a>00730 <span class="stringliteral">{</span>
<a name="l00731"></a>00731 <span class="stringliteral">    for (${ident}_Event event = ${ident}_Event_FIRST;</span>
<a name="l00732"></a>00732 <span class="stringliteral">         event &lt; ${ident}_Event_NUM; ++event) {</span>
<a name="l00733"></a>00733 <span class="stringliteral">        for (unsigned int i = 0; i &lt; m_num_controllers; ++i) {</span>
<a name="l00734"></a>00734 <span class="stringliteral">            std::map&lt;uint32_t, AbstractController *&gt;::iterator it =</span>
<a name="l00735"></a>00735 <span class="stringliteral">                                g_abs_controls[MachineType_${ident}].find(i);</span>
<a name="l00736"></a>00736 <span class="stringliteral">            assert(it != g_abs_controls[MachineType_${ident}].end());</span>
<a name="l00737"></a>00737 <span class="stringliteral">            (*eventVec[event])[i] =</span>
<a name="l00738"></a>00738 <span class="stringliteral">                (($c_ident *)(*it).second)-&gt;getEventCount(event);</span>
<a name="l00739"></a>00739 <span class="stringliteral">        }</span>
<a name="l00740"></a>00740 <span class="stringliteral">    }</span>
<a name="l00741"></a>00741 <span class="stringliteral"></span>
<a name="l00742"></a>00742 <span class="stringliteral">    for (${ident}_State state = ${ident}_State_FIRST;</span>
<a name="l00743"></a>00743 <span class="stringliteral">         state &lt; ${ident}_State_NUM; ++state) {</span>
<a name="l00744"></a>00744 <span class="stringliteral"></span>
<a name="l00745"></a>00745 <span class="stringliteral">        for (${ident}_Event event = ${ident}_Event_FIRST;</span>
<a name="l00746"></a>00746 <span class="stringliteral">             event &lt; ${ident}_Event_NUM; ++event) {</span>
<a name="l00747"></a>00747 <span class="stringliteral"></span>
<a name="l00748"></a>00748 <span class="stringliteral">            for (unsigned int i = 0; i &lt; m_num_controllers; ++i) {</span>
<a name="l00749"></a>00749 <span class="stringliteral">                std::map&lt;uint32_t, AbstractController *&gt;::iterator it =</span>
<a name="l00750"></a>00750 <span class="stringliteral">                                g_abs_controls[MachineType_${ident}].find(i);</span>
<a name="l00751"></a>00751 <span class="stringliteral">                assert(it != g_abs_controls[MachineType_${ident}].end());</span>
<a name="l00752"></a>00752 <span class="stringliteral">                (*transVec[state][event])[i] =</span>
<a name="l00753"></a>00753 <span class="stringliteral">                    (($c_ident *)(*it).second)-&gt;getTransitionCount(state, event);</span>
<a name="l00754"></a>00754 <span class="stringliteral">            }</span>
<a name="l00755"></a>00755 <span class="stringliteral">        }</span>
<a name="l00756"></a>00756 <span class="stringliteral">    }</span>
<a name="l00757"></a>00757 <span class="stringliteral">}</span>
<a name="l00758"></a>00758 <span class="stringliteral"></span>
<a name="l00759"></a>00759 <span class="stringliteral">void</span>
<a name="l00760"></a>00760 <span class="stringliteral">$c_ident::countTransition(${ident}_State state, ${ident}_Event event)</span>
<a name="l00761"></a>00761 <span class="stringliteral">{</span>
<a name="l00762"></a>00762 <span class="stringliteral">    assert(m_possible[state][event]);</span>
<a name="l00763"></a>00763 <span class="stringliteral">    m_counters[state][event]++;</span>
<a name="l00764"></a>00764 <span class="stringliteral">    m_event_counters[event]++;</span>
<a name="l00765"></a>00765 <span class="stringliteral">}</span>
<a name="l00766"></a>00766 <span class="stringliteral">void</span>
<a name="l00767"></a>00767 <span class="stringliteral">$c_ident::possibleTransition(${ident}_State state,</span>
<a name="l00768"></a>00768 <span class="stringliteral">                             ${ident}_Event event)</span>
<a name="l00769"></a>00769 <span class="stringliteral">{</span>
<a name="l00770"></a>00770 <span class="stringliteral">    m_possible[state][event] = true;</span>
<a name="l00771"></a>00771 <span class="stringliteral">}</span>
<a name="l00772"></a>00772 <span class="stringliteral"></span>
<a name="l00773"></a>00773 <span class="stringliteral">uint64</span>
<a name="l00774"></a>00774 <span class="stringliteral">$c_ident::getEventCount(${ident}_Event event)</span>
<a name="l00775"></a>00775 <span class="stringliteral">{</span>
<a name="l00776"></a>00776 <span class="stringliteral">    return m_event_counters[event];</span>
<a name="l00777"></a>00777 <span class="stringliteral">}</span>
<a name="l00778"></a>00778 <span class="stringliteral"></span>
<a name="l00779"></a>00779 <span class="stringliteral">bool</span>
<a name="l00780"></a>00780 <span class="stringliteral">$c_ident::isPossible(${ident}_State state, ${ident}_Event event)</span>
<a name="l00781"></a>00781 <span class="stringliteral">{</span>
<a name="l00782"></a>00782 <span class="stringliteral">    return m_possible[state][event];</span>
<a name="l00783"></a>00783 <span class="stringliteral">}</span>
<a name="l00784"></a>00784 <span class="stringliteral"></span>
<a name="l00785"></a>00785 <span class="stringliteral">uint64</span>
<a name="l00786"></a>00786 <span class="stringliteral">$c_ident::getTransitionCount(${ident}_State state,</span>
<a name="l00787"></a>00787 <span class="stringliteral">                             ${ident}_Event event)</span>
<a name="l00788"></a>00788 <span class="stringliteral">{</span>
<a name="l00789"></a>00789 <span class="stringliteral">    return m_counters[state][event];</span>
<a name="l00790"></a>00790 <span class="stringliteral">}</span>
<a name="l00791"></a>00791 <span class="stringliteral"></span>
<a name="l00792"></a>00792 <span class="stringliteral">int</span>
<a name="l00793"></a>00793 <span class="stringliteral">$c_ident::getNumControllers()</span>
<a name="l00794"></a>00794 <span class="stringliteral">{</span>
<a name="l00795"></a>00795 <span class="stringliteral">    return m_num_controllers;</span>
<a name="l00796"></a>00796 <span class="stringliteral">}</span>
<a name="l00797"></a>00797 <span class="stringliteral"></span>
<a name="l00798"></a>00798 <span class="stringliteral">MessageBuffer*</span>
<a name="l00799"></a>00799 <span class="stringliteral">$c_ident::getMandatoryQueue() const</span>
<a name="l00800"></a>00800 <span class="stringliteral">{</span>
<a name="l00801"></a>00801 <span class="stringliteral">    return $mq_ident;</span>
<a name="l00802"></a>00802 <span class="stringliteral">}</span>
<a name="l00803"></a>00803 <span class="stringliteral"></span>
<a name="l00804"></a>00804 <span class="stringliteral">Sequencer*</span>
<a name="l00805"></a>00805 <span class="stringliteral">$c_ident::getSequencer() const</span>
<a name="l00806"></a>00806 <span class="stringliteral">{</span>
<a name="l00807"></a>00807 <span class="stringliteral">    return $seq_ident;</span>
<a name="l00808"></a>00808 <span class="stringliteral">}</span>
<a name="l00809"></a>00809 <span class="stringliteral"></span>
<a name="l00810"></a>00810 <span class="stringliteral">const string</span>
<a name="l00811"></a>00811 <span class="stringliteral">$c_ident::toString() const</span>
<a name="l00812"></a>00812 <span class="stringliteral">{</span>
<a name="l00813"></a>00813 <span class="stringliteral">    return &quot;$c_ident&quot;;</span>
<a name="l00814"></a>00814 <span class="stringliteral">}</span>
<a name="l00815"></a>00815 <span class="stringliteral"></span>
<a name="l00816"></a>00816 <span class="stringliteral">void</span>
<a name="l00817"></a>00817 <span class="stringliteral">$c_ident::print(ostream&amp; out) const</span>
<a name="l00818"></a>00818 <span class="stringliteral">{</span>
<a name="l00819"></a>00819 <span class="stringliteral">    out &lt;&lt; &quot;[$c_ident &quot; &lt;&lt; m_version &lt;&lt; &quot;]&quot;;</span>
<a name="l00820"></a>00820 <span class="stringliteral">}</span>
<a name="l00821"></a>00821 <span class="stringliteral"></span>
<a name="l00822"></a>00822 <span class="stringliteral">void $c_ident::resetStats()</span>
<a name="l00823"></a>00823 <span class="stringliteral">{</span>
<a name="l00824"></a>00824 <span class="stringliteral">    for (int state = 0; state &lt; ${ident}_State_NUM; state++) {</span>
<a name="l00825"></a>00825 <span class="stringliteral">        for (int event = 0; event &lt; ${ident}_Event_NUM; event++) {</span>
<a name="l00826"></a>00826 <span class="stringliteral">            m_counters[state][event] = 0;</span>
<a name="l00827"></a>00827 <span class="stringliteral">        }</span>
<a name="l00828"></a>00828 <span class="stringliteral">    }</span>
<a name="l00829"></a>00829 <span class="stringliteral"></span>
<a name="l00830"></a>00830 <span class="stringliteral">    for (int event = 0; event &lt; ${ident}_Event_NUM; event++) {</span>
<a name="l00831"></a>00831 <span class="stringliteral">        m_event_counters[event] = 0;</span>
<a name="l00832"></a>00832 <span class="stringliteral">    }</span>
<a name="l00833"></a>00833 <span class="stringliteral"></span>
<a name="l00834"></a>00834 <span class="stringliteral">    AbstractController::resetStats();</span>
<a name="l00835"></a>00835 <span class="stringliteral">}</span>
<a name="l00836"></a>00836 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00837"></a>00837 
<a name="l00838"></a>00838         <span class="keywordflow">if</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a9ed8d16c9ae7fae285dd2146c3159023">EntryType</a> != <span class="keywordtype">None</span>:
<a name="l00839"></a>00839             code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00840"></a>00840 <span class="stringliteral"></span>
<a name="l00841"></a>00841 <span class="stringliteral">// Set and Reset for cache_entry variable</span>
<a name="l00842"></a>00842 <span class="stringliteral">void</span>
<a name="l00843"></a>00843 <span class="stringliteral">$c_ident::set_cache_entry(${{self.EntryType.c_ident}}*&amp; m_cache_entry_ptr, AbstractCacheEntry* m_new_cache_entry)</span>
<a name="l00844"></a>00844 <span class="stringliteral">{</span>
<a name="l00845"></a>00845 <span class="stringliteral">  m_cache_entry_ptr = (${{self.EntryType.c_ident}}*)m_new_cache_entry;</span>
<a name="l00846"></a>00846 <span class="stringliteral">}</span>
<a name="l00847"></a>00847 <span class="stringliteral"></span>
<a name="l00848"></a>00848 <span class="stringliteral">void</span>
<a name="l00849"></a>00849 <span class="stringliteral">$c_ident::unset_cache_entry(${{self.EntryType.c_ident}}*&amp; m_cache_entry_ptr)</span>
<a name="l00850"></a>00850 <span class="stringliteral">{</span>
<a name="l00851"></a>00851 <span class="stringliteral">  m_cache_entry_ptr = 0;</span>
<a name="l00852"></a>00852 <span class="stringliteral">}</span>
<a name="l00853"></a>00853 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00854"></a>00854 
<a name="l00855"></a>00855         <span class="keywordflow">if</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69c0c742629be6ee761c6b4d1c70cdbc">TBEType</a> != <span class="keywordtype">None</span>:
<a name="l00856"></a>00856             code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00857"></a>00857 <span class="stringliteral"></span>
<a name="l00858"></a>00858 <span class="stringliteral">// Set and Reset for tbe variable</span>
<a name="l00859"></a>00859 <span class="stringliteral">void</span>
<a name="l00860"></a>00860 <span class="stringliteral">$c_ident::set_tbe(${{self.TBEType.c_ident}}*&amp; m_tbe_ptr, ${{self.TBEType.c_ident}}* m_new_tbe)</span>
<a name="l00861"></a>00861 <span class="stringliteral">{</span>
<a name="l00862"></a>00862 <span class="stringliteral">  m_tbe_ptr = m_new_tbe;</span>
<a name="l00863"></a>00863 <span class="stringliteral">}</span>
<a name="l00864"></a>00864 <span class="stringliteral"></span>
<a name="l00865"></a>00865 <span class="stringliteral">void</span>
<a name="l00866"></a>00866 <span class="stringliteral">$c_ident::unset_tbe(${{self.TBEType.c_ident}}*&amp; m_tbe_ptr)</span>
<a name="l00867"></a>00867 <span class="stringliteral">{</span>
<a name="l00868"></a>00868 <span class="stringliteral">  m_tbe_ptr = NULL;</span>
<a name="l00869"></a>00869 <span class="stringliteral">}</span>
<a name="l00870"></a>00870 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00871"></a>00871 
<a name="l00872"></a>00872         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00873"></a>00873 <span class="stringliteral"></span>
<a name="l00874"></a>00874 <span class="stringliteral">void</span>
<a name="l00875"></a>00875 <span class="stringliteral">$c_ident::recordCacheTrace(int cntrl, CacheRecorder* tr)</span>
<a name="l00876"></a>00876 <span class="stringliteral">{</span>
<a name="l00877"></a>00877 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00878"></a>00878         <span class="comment">#</span>
<a name="l00879"></a>00879         <span class="comment"># Record cache contents for all associated caches.</span>
<a name="l00880"></a>00880         <span class="comment">#</span>
<a name="l00881"></a>00881         code.indent()
<a name="l00882"></a>00882         <span class="keywordflow">for</span> param <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ae063a2c5f7b248003e02898444bff038">config_parameters</a>:
<a name="l00883"></a>00883             <span class="keywordflow">if</span> param.type_ast.type.ident == <span class="stringliteral">&quot;CacheMemory&quot;</span>:
<a name="l00884"></a>00884                 <span class="keyword">assert</span>(param.pointer)
<a name="l00885"></a>00885                 code(<span class="stringliteral">&apos;m_${{param.ident}}_ptr-&gt;recordCacheContents(cntrl, tr);&apos;</span>)
<a name="l00886"></a>00886 
<a name="l00887"></a>00887         code.dedent()
<a name="l00888"></a>00888         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00889"></a>00889 <span class="stringliteral">}</span>
<a name="l00890"></a>00890 <span class="stringliteral"></span>
<a name="l00891"></a>00891 <span class="stringliteral">// Actions</span>
<a name="l00892"></a>00892 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00893"></a>00893         <span class="keywordflow">if</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69c0c742629be6ee761c6b4d1c70cdbc">TBEType</a> != <span class="keywordtype">None</span> <span class="keywordflow">and</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a9ed8d16c9ae7fae285dd2146c3159023">EntryType</a> != <span class="keywordtype">None</span>:
<a name="l00894"></a>00894             <span class="keywordflow">for</span> action <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#af806efc6052edbc741683ec893bb2fe1">actions</a>.itervalues():
<a name="l00895"></a>00895                 <span class="keywordflow">if</span> <span class="stringliteral">&quot;c_code&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> action:
<a name="l00896"></a>00896                  <span class="keywordflow">continue</span>
<a name="l00897"></a>00897 
<a name="l00898"></a>00898                 code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00899"></a>00899 <span class="stringliteral">/** \\brief ${{action.desc}} */</span>
<a name="l00900"></a>00900 <span class="stringliteral">void</span>
<a name="l00901"></a>00901 <span class="stringliteral">$c_ident::${{action.ident}}(${{self.TBEType.c_ident}}*&amp; m_tbe_ptr, ${{self.EntryType.c_ident}}*&amp; m_cache_entry_ptr, const Address&amp; addr)</span>
<a name="l00902"></a>00902 <span class="stringliteral">{</span>
<a name="l00903"></a>00903 <span class="stringliteral">    DPRINTF(RubyGenerated, &quot;executing ${{action.ident}}\\n&quot;);</span>
<a name="l00904"></a>00904 <span class="stringliteral">    ${{action[&quot;c_code&quot;]}}</span>
<a name="l00905"></a>00905 <span class="stringliteral">}</span>
<a name="l00906"></a>00906 <span class="stringliteral"></span>
<a name="l00907"></a>00907 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00908"></a>00908         <span class="keywordflow">elif</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69c0c742629be6ee761c6b4d1c70cdbc">TBEType</a> != <span class="keywordtype">None</span>:
<a name="l00909"></a>00909             <span class="keywordflow">for</span> action <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#af806efc6052edbc741683ec893bb2fe1">actions</a>.itervalues():
<a name="l00910"></a>00910                 <span class="keywordflow">if</span> <span class="stringliteral">&quot;c_code&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> action:
<a name="l00911"></a>00911                  <span class="keywordflow">continue</span>
<a name="l00912"></a>00912 
<a name="l00913"></a>00913                 code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00914"></a>00914 <span class="stringliteral">/** \\brief ${{action.desc}} */</span>
<a name="l00915"></a>00915 <span class="stringliteral">void</span>
<a name="l00916"></a>00916 <span class="stringliteral">$c_ident::${{action.ident}}(${{self.TBEType.c_ident}}*&amp; m_tbe_ptr, const Address&amp; addr)</span>
<a name="l00917"></a>00917 <span class="stringliteral">{</span>
<a name="l00918"></a>00918 <span class="stringliteral">    DPRINTF(RubyGenerated, &quot;executing ${{action.ident}}\\n&quot;);</span>
<a name="l00919"></a>00919 <span class="stringliteral">    ${{action[&quot;c_code&quot;]}}</span>
<a name="l00920"></a>00920 <span class="stringliteral">}</span>
<a name="l00921"></a>00921 <span class="stringliteral"></span>
<a name="l00922"></a>00922 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00923"></a>00923         <span class="keywordflow">elif</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a9ed8d16c9ae7fae285dd2146c3159023">EntryType</a> != <span class="keywordtype">None</span>:
<a name="l00924"></a>00924             <span class="keywordflow">for</span> action <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#af806efc6052edbc741683ec893bb2fe1">actions</a>.itervalues():
<a name="l00925"></a>00925                 <span class="keywordflow">if</span> <span class="stringliteral">&quot;c_code&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> action:
<a name="l00926"></a>00926                  <span class="keywordflow">continue</span>
<a name="l00927"></a>00927 
<a name="l00928"></a>00928                 code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00929"></a>00929 <span class="stringliteral">/** \\brief ${{action.desc}} */</span>
<a name="l00930"></a>00930 <span class="stringliteral">void</span>
<a name="l00931"></a>00931 <span class="stringliteral">$c_ident::${{action.ident}}(${{self.EntryType.c_ident}}*&amp; m_cache_entry_ptr, const Address&amp; addr)</span>
<a name="l00932"></a>00932 <span class="stringliteral">{</span>
<a name="l00933"></a>00933 <span class="stringliteral">    DPRINTF(RubyGenerated, &quot;executing ${{action.ident}}\\n&quot;);</span>
<a name="l00934"></a>00934 <span class="stringliteral">    ${{action[&quot;c_code&quot;]}}</span>
<a name="l00935"></a>00935 <span class="stringliteral">}</span>
<a name="l00936"></a>00936 <span class="stringliteral"></span>
<a name="l00937"></a>00937 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00938"></a>00938         <span class="keywordflow">else</span>:
<a name="l00939"></a>00939             <span class="keywordflow">for</span> action <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#af806efc6052edbc741683ec893bb2fe1">actions</a>.itervalues():
<a name="l00940"></a>00940                 <span class="keywordflow">if</span> <span class="stringliteral">&quot;c_code&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> action:
<a name="l00941"></a>00941                  <span class="keywordflow">continue</span>
<a name="l00942"></a>00942 
<a name="l00943"></a>00943                 code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00944"></a>00944 <span class="stringliteral">/** \\brief ${{action.desc}} */</span>
<a name="l00945"></a>00945 <span class="stringliteral">void</span>
<a name="l00946"></a>00946 <span class="stringliteral">$c_ident::${{action.ident}}(const Address&amp; addr)</span>
<a name="l00947"></a>00947 <span class="stringliteral">{</span>
<a name="l00948"></a>00948 <span class="stringliteral">    DPRINTF(RubyGenerated, &quot;executing ${{action.ident}}\\n&quot;);</span>
<a name="l00949"></a>00949 <span class="stringliteral">    ${{action[&quot;c_code&quot;]}}</span>
<a name="l00950"></a>00950 <span class="stringliteral">}</span>
<a name="l00951"></a>00951 <span class="stringliteral"></span>
<a name="l00952"></a>00952 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00953"></a>00953         <span class="keywordflow">for</span> func <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a2cb6c540c07a402759bab624703ecdb2">functions</a>:
<a name="l00954"></a>00954             code(func.generateCode())
<a name="l00955"></a>00955 
<a name="l00956"></a>00956         <span class="comment"># Function for functional reads from messages buffered in the controller</span>
<a name="l00957"></a>00957         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00958"></a>00958 <span class="stringliteral">bool</span>
<a name="l00959"></a>00959 <span class="stringliteral">$c_ident::functionalReadBuffers(PacketPtr&amp; pkt)</span>
<a name="l00960"></a>00960 <span class="stringliteral">{</span>
<a name="l00961"></a>00961 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00962"></a>00962         <span class="keywordflow">for</span> var <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a68a28c9ed35f4a725b22cbf60728cb23">objects</a>:
<a name="l00963"></a>00963             vtype = var.type
<a name="l00964"></a>00964             <span class="keywordflow">if</span> vtype.isBuffer:
<a name="l00965"></a>00965                 vid = <span class="stringliteral">&quot;m_%s_ptr&quot;</span> % var.c_ident
<a name="l00966"></a>00966                 code(<span class="stringliteral">&apos;if ($vid-&gt;functionalRead(pkt)) { return true; }&apos;</span>)
<a name="l00967"></a>00967         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00968"></a>00968 <span class="stringliteral">                return false;</span>
<a name="l00969"></a>00969 <span class="stringliteral">}</span>
<a name="l00970"></a>00970 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00971"></a>00971 
<a name="l00972"></a>00972         <span class="comment"># Function for functional writes to messages buffered in the controller</span>
<a name="l00973"></a>00973         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00974"></a>00974 <span class="stringliteral">uint32_t</span>
<a name="l00975"></a>00975 <span class="stringliteral">$c_ident::functionalWriteBuffers(PacketPtr&amp; pkt)</span>
<a name="l00976"></a>00976 <span class="stringliteral">{</span>
<a name="l00977"></a>00977 <span class="stringliteral">    uint32_t num_functional_writes = 0;</span>
<a name="l00978"></a>00978 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00979"></a>00979         <span class="keywordflow">for</span> var <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a68a28c9ed35f4a725b22cbf60728cb23">objects</a>:
<a name="l00980"></a>00980             vtype = var.type
<a name="l00981"></a>00981             <span class="keywordflow">if</span> vtype.isBuffer:
<a name="l00982"></a>00982                 vid = <span class="stringliteral">&quot;m_%s_ptr&quot;</span> % var.c_ident
<a name="l00983"></a>00983                 code(<span class="stringliteral">&apos;num_functional_writes += $vid-&gt;functionalWrite(pkt);&apos;</span>)
<a name="l00984"></a>00984         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00985"></a>00985 <span class="stringliteral">    return num_functional_writes;</span>
<a name="l00986"></a>00986 <span class="stringliteral">}</span>
<a name="l00987"></a>00987 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00988"></a>00988 
<a name="l00989"></a>00989         <span class="comment"># Check if this controller has a peer, if yes then write the</span>
<a name="l00990"></a>00990         <span class="comment"># function for connecting to the peer.</span>
<a name="l00991"></a>00991         <span class="keywordflow">if</span> has_peer:
<a name="l00992"></a>00992             code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00993"></a>00993 <span class="stringliteral"></span>
<a name="l00994"></a>00994 <span class="stringliteral">void</span>
<a name="l00995"></a>00995 <span class="stringliteral">$c_ident::getQueuesFromPeer(AbstractController *peer)</span>
<a name="l00996"></a>00996 <span class="stringliteral">{</span>
<a name="l00997"></a>00997 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00998"></a>00998             <span class="keywordflow">for</span> var <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a68a28c9ed35f4a725b22cbf60728cb23">objects</a>:
<a name="l00999"></a>00999                 <span class="keywordflow">if</span> <span class="stringliteral">&quot;network&quot;</span> <span class="keywordflow">in</span> var <span class="keywordflow">and</span> <span class="stringliteral">&quot;physical_network&quot;</span> <span class="keywordflow">in</span> var <span class="keywordflow">and</span> \
<a name="l01000"></a>01000                    var[<span class="stringliteral">&quot;network&quot;</span>] == <span class="stringliteral">&quot;From&quot;</span>:
<a name="l01001"></a>01001                     code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l01002"></a>01002 <span class="stringliteral">m_${{var.c_ident}}_ptr = peer-&gt;getPeerQueue(${{var[&quot;physical_network&quot;]}});</span>
<a name="l01003"></a>01003 <span class="stringliteral">assert(m_${{var.c_ident}}_ptr != NULL);</span>
<a name="l01004"></a>01004 <span class="stringliteral">m_${{var.c_ident}}_ptr-&gt;setReceiver(this);</span>
<a name="l01005"></a>01005 <span class="stringliteral"></span>
<a name="l01006"></a>01006 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l01007"></a>01007             code(<span class="stringliteral">&apos;}&apos;</span>)
<a name="l01008"></a>01008 
<a name="l01009"></a>01009         code.write(path, <span class="stringliteral">&quot;%s.cc&quot;</span> % c_ident)
<a name="l01010"></a>01010 
    <span class="keyword">def </span><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a152a40a5c142388231336a6935cfff80">printCWakeup</a>(self, path, includes):
</pre></div></p>

</div>
</div>
<a class="anchor" id="a51c25c0a0d014fffeeea2ab7d9981ad6"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::printControllerHH" ref="a51c25c0a0d014fffeeea2ab7d9981ad6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def printControllerHH </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>path</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">Output the method declarations for the class declaration</pre></div> 
<p><div class="fragment"><pre class="fragment"><a name="l00207"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a51c25c0a0d014fffeeea2ab7d9981ad6">00207</a>                                      :
<a name="l00208"></a>00208         <span class="stringliteral">&apos;&apos;&apos;Output the method declarations for the class declaration&apos;&apos;&apos;</span>
<a name="l00209"></a>00209         code = self.symtab.codeFormatter()
<a name="l00210"></a>00210         ident = self.ident
<a name="l00211"></a>00211         c_ident = <span class="stringliteral">&quot;%s_Controller&quot;</span> % self.ident
<a name="l00212"></a>00212 
<a name="l00213"></a>00213         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00214"></a>00214 <span class="stringliteral">/** \\file $c_ident.hh</span>
<a name="l00215"></a>00215 <span class="stringliteral"> *</span>
<a name="l00216"></a>00216 <span class="stringliteral"> * Auto generated C++ code started by $__file__:$__line__</span>
<a name="l00217"></a>00217 <span class="stringliteral"> * Created by slicc definition of Module &quot;${{self.short}}&quot;</span>
<a name="l00218"></a>00218 <span class="stringliteral"> */</span>
<a name="l00219"></a>00219 <span class="stringliteral"></span>
<a name="l00220"></a>00220 <span class="stringliteral">#ifndef __${ident}_CONTROLLER_HH__</span>
<a name="l00221"></a>00221 <span class="stringliteral">#define __${ident}_CONTROLLER_HH__</span>
<a name="l00222"></a>00222 <span class="stringliteral"></span>
<a name="l00223"></a>00223 <span class="stringliteral">#include &lt;iostream&gt;</span>
<a name="l00224"></a>00224 <span class="stringliteral">#include &lt;sstream&gt;</span>
<a name="l00225"></a>00225 <span class="stringliteral">#include &lt;string&gt;</span>
<a name="l00226"></a>00226 <span class="stringliteral"></span>
<a name="l00227"></a>00227 <span class="stringliteral">#include &quot;mem/protocol/TransitionResult.hh&quot;</span>
<a name="l00228"></a>00228 <span class="stringliteral">#include &quot;mem/protocol/Types.hh&quot;</span>
<a name="l00229"></a>00229 <span class="stringliteral">#include &quot;mem/ruby/common/Consumer.hh&quot;</span>
<a name="l00230"></a>00230 <span class="stringliteral">#include &quot;mem/ruby/common/Global.hh&quot;</span>
<a name="l00231"></a>00231 <span class="stringliteral">#include &quot;mem/ruby/slicc_interface/AbstractController.hh&quot;</span>
<a name="l00232"></a>00232 <span class="stringliteral">#include &quot;params/$c_ident.hh&quot;</span>
<a name="l00233"></a>00233 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00234"></a>00234 
<a name="l00235"></a>00235         seen_types = set()
<a name="l00236"></a>00236         has_peer = <span class="keyword">False</span>
<a name="l00237"></a>00237         <span class="keywordflow">for</span> var <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a68a28c9ed35f4a725b22cbf60728cb23">objects</a>:
<a name="l00238"></a>00238             <span class="keywordflow">if</span> var.type.ident <span class="keywordflow">not</span> <span class="keywordflow">in</span> seen_types <span class="keywordflow">and</span> <span class="keywordflow">not</span> var.type.isPrimitive:
<a name="l00239"></a>00239                 code(<span class="stringliteral">&apos;#include &quot;mem/protocol/${{var.type.c_ident}}.hh&quot;&apos;</span>)
<a name="l00240"></a>00240             <span class="keywordflow">if</span> <span class="stringliteral">&quot;network&quot;</span> <span class="keywordflow">in</span> var <span class="keywordflow">and</span> <span class="stringliteral">&quot;physical_network&quot;</span> <span class="keywordflow">in</span> var:
<a name="l00241"></a>00241                 has_peer = <span class="keyword">True</span>
<a name="l00242"></a>00242             seen_types.add(var.type.ident)
<a name="l00243"></a>00243 
<a name="l00244"></a>00244         <span class="comment"># for adding information to the protocol debug trace</span>
<a name="l00245"></a>00245         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00246"></a>00246 <span class="stringliteral">extern std::stringstream ${ident}_transitionComment;</span>
<a name="l00247"></a>00247 <span class="stringliteral"></span>
<a name="l00248"></a>00248 <span class="stringliteral">class $c_ident : public AbstractController</span>
<a name="l00249"></a>00249 <span class="stringliteral">{</span>
<a name="l00250"></a>00250 <span class="stringliteral">  public:</span>
<a name="l00251"></a>00251 <span class="stringliteral">    typedef ${c_ident}Params Params;</span>
<a name="l00252"></a>00252 <span class="stringliteral">    $c_ident(const Params *p);</span>
<a name="l00253"></a>00253 <span class="stringliteral">    static int getNumControllers();</span>
<a name="l00254"></a>00254 <span class="stringliteral">    void init();</span>
<a name="l00255"></a>00255 <span class="stringliteral">    MessageBuffer* getMandatoryQueue() const;</span>
<a name="l00256"></a>00256 <span class="stringliteral">    const std::string toString() const;</span>
<a name="l00257"></a>00257 <span class="stringliteral"></span>
<a name="l00258"></a>00258 <span class="stringliteral">    void print(std::ostream&amp; out) const;</span>
<a name="l00259"></a>00259 <span class="stringliteral">    void wakeup();</span>
<a name="l00260"></a>00260 <span class="stringliteral">    void resetStats();</span>
<a name="l00261"></a>00261 <span class="stringliteral">    void regStats();</span>
<a name="l00262"></a>00262 <span class="stringliteral">    void collateStats();</span>
<a name="l00263"></a>00263 <span class="stringliteral"></span>
<a name="l00264"></a>00264 <span class="stringliteral">    void recordCacheTrace(int cntrl, CacheRecorder* tr);</span>
<a name="l00265"></a>00265 <span class="stringliteral">    Sequencer* getSequencer() const;</span>
<a name="l00266"></a>00266 <span class="stringliteral"></span>
<a name="l00267"></a>00267 <span class="stringliteral">    bool functionalReadBuffers(PacketPtr&amp;);</span>
<a name="l00268"></a>00268 <span class="stringliteral">    uint32_t functionalWriteBuffers(PacketPtr&amp;);</span>
<a name="l00269"></a>00269 <span class="stringliteral"></span>
<a name="l00270"></a>00270 <span class="stringliteral">    void countTransition(${ident}_State state, ${ident}_Event event);</span>
<a name="l00271"></a>00271 <span class="stringliteral">    void possibleTransition(${ident}_State state, ${ident}_Event event);</span>
<a name="l00272"></a>00272 <span class="stringliteral">    uint64 getEventCount(${ident}_Event event);</span>
<a name="l00273"></a>00273 <span class="stringliteral">    bool isPossible(${ident}_State state, ${ident}_Event event);</span>
<a name="l00274"></a>00274 <span class="stringliteral">    uint64 getTransitionCount(${ident}_State state, ${ident}_Event event);</span>
<a name="l00275"></a>00275 <span class="stringliteral"></span>
<a name="l00276"></a>00276 <span class="stringliteral">private:</span>
<a name="l00277"></a>00277 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00278"></a>00278 
<a name="l00279"></a>00279         code.indent()
<a name="l00280"></a>00280         <span class="comment"># added by SS</span>
<a name="l00281"></a>00281         <span class="keywordflow">for</span> param <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ae063a2c5f7b248003e02898444bff038">config_parameters</a>:
<a name="l00282"></a>00282             <span class="keywordflow">if</span> param.pointer:
<a name="l00283"></a>00283                 code(<span class="stringliteral">&apos;${{param.type_ast.type}}* m_${{param.ident}}_ptr;&apos;</span>)
<a name="l00284"></a>00284             <span class="keywordflow">else</span>:
<a name="l00285"></a>00285                 code(<span class="stringliteral">&apos;${{param.type_ast.type}} m_${{param.ident}};&apos;</span>)
<a name="l00286"></a>00286 
<a name="l00287"></a>00287         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00288"></a>00288 <span class="stringliteral">TransitionResult doTransition(${ident}_Event event,</span>
<a name="l00289"></a>00289 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00290"></a>00290 
<a name="l00291"></a>00291         <span class="keywordflow">if</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a9ed8d16c9ae7fae285dd2146c3159023">EntryType</a> != <span class="keywordtype">None</span>:
<a name="l00292"></a>00292             code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00293"></a>00293 <span class="stringliteral">                              ${{self.EntryType.c_ident}}* m_cache_entry_ptr,</span>
<a name="l00294"></a>00294 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00295"></a>00295         <span class="keywordflow">if</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69c0c742629be6ee761c6b4d1c70cdbc">TBEType</a> != <span class="keywordtype">None</span>:
<a name="l00296"></a>00296             code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00297"></a>00297 <span class="stringliteral">                              ${{self.TBEType.c_ident}}* m_tbe_ptr,</span>
<a name="l00298"></a>00298 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00299"></a>00299 
<a name="l00300"></a>00300         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00301"></a>00301 <span class="stringliteral">                              const Address addr);</span>
<a name="l00302"></a>00302 <span class="stringliteral"></span>
<a name="l00303"></a>00303 <span class="stringliteral">TransitionResult doTransitionWorker(${ident}_Event event,</span>
<a name="l00304"></a>00304 <span class="stringliteral">                                    ${ident}_State state,</span>
<a name="l00305"></a>00305 <span class="stringliteral">                                    ${ident}_State&amp; next_state,</span>
<a name="l00306"></a>00306 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00307"></a>00307 
<a name="l00308"></a>00308         <span class="keywordflow">if</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69c0c742629be6ee761c6b4d1c70cdbc">TBEType</a> != <span class="keywordtype">None</span>:
<a name="l00309"></a>00309             code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00310"></a>00310 <span class="stringliteral">                                    ${{self.TBEType.c_ident}}*&amp; m_tbe_ptr,</span>
<a name="l00311"></a>00311 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00312"></a>00312         <span class="keywordflow">if</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a9ed8d16c9ae7fae285dd2146c3159023">EntryType</a> != <span class="keywordtype">None</span>:
<a name="l00313"></a>00313             code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00314"></a>00314 <span class="stringliteral">                                    ${{self.EntryType.c_ident}}*&amp; m_cache_entry_ptr,</span>
<a name="l00315"></a>00315 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00316"></a>00316 
<a name="l00317"></a>00317         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00318"></a>00318 <span class="stringliteral">                                    const Address&amp; addr);</span>
<a name="l00319"></a>00319 <span class="stringliteral"></span>
<a name="l00320"></a>00320 <span class="stringliteral">int m_counters[${ident}_State_NUM][${ident}_Event_NUM];</span>
<a name="l00321"></a>00321 <span class="stringliteral">int m_event_counters[${ident}_Event_NUM];</span>
<a name="l00322"></a>00322 <span class="stringliteral">bool m_possible[${ident}_State_NUM][${ident}_Event_NUM];</span>
<a name="l00323"></a>00323 <span class="stringliteral"></span>
<a name="l00324"></a>00324 <span class="stringliteral">static std::vector&lt;Stats::Vector *&gt; eventVec;</span>
<a name="l00325"></a>00325 <span class="stringliteral">static std::vector&lt;std::vector&lt;Stats::Vector *&gt; &gt; transVec;</span>
<a name="l00326"></a>00326 <span class="stringliteral">static int m_num_controllers;</span>
<a name="l00327"></a>00327 <span class="stringliteral"></span>
<a name="l00328"></a>00328 <span class="stringliteral">// Internal functions</span>
<a name="l00329"></a>00329 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00330"></a>00330 
<a name="l00331"></a>00331         <span class="keywordflow">for</span> func <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a2cb6c540c07a402759bab624703ecdb2">functions</a>:
<a name="l00332"></a>00332             proto = func.prototype
<a name="l00333"></a>00333             <span class="keywordflow">if</span> proto:
<a name="l00334"></a>00334                 code(<span class="stringliteral">&apos;$proto&apos;</span>)
<a name="l00335"></a>00335 
<a name="l00336"></a>00336         <span class="keywordflow">if</span> has_peer:
<a name="l00337"></a>00337             code(<span class="stringliteral">&apos;void getQueuesFromPeer(AbstractController *);&apos;</span>)
<a name="l00338"></a>00338         <span class="keywordflow">if</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a9ed8d16c9ae7fae285dd2146c3159023">EntryType</a> != <span class="keywordtype">None</span>:
<a name="l00339"></a>00339             code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00340"></a>00340 <span class="stringliteral"></span>
<a name="l00341"></a>00341 <span class="stringliteral">// Set and Reset for cache_entry variable</span>
<a name="l00342"></a>00342 <span class="stringliteral">void set_cache_entry(${{self.EntryType.c_ident}}*&amp; m_cache_entry_ptr, AbstractCacheEntry* m_new_cache_entry);</span>
<a name="l00343"></a>00343 <span class="stringliteral">void unset_cache_entry(${{self.EntryType.c_ident}}*&amp; m_cache_entry_ptr);</span>
<a name="l00344"></a>00344 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00345"></a>00345 
<a name="l00346"></a>00346         <span class="keywordflow">if</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69c0c742629be6ee761c6b4d1c70cdbc">TBEType</a> != <span class="keywordtype">None</span>:
<a name="l00347"></a>00347             code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00348"></a>00348 <span class="stringliteral"></span>
<a name="l00349"></a>00349 <span class="stringliteral">// Set and Reset for tbe variable</span>
<a name="l00350"></a>00350 <span class="stringliteral">void set_tbe(${{self.TBEType.c_ident}}*&amp; m_tbe_ptr, ${ident}_TBE* m_new_tbe);</span>
<a name="l00351"></a>00351 <span class="stringliteral">void unset_tbe(${{self.TBEType.c_ident}}*&amp; m_tbe_ptr);</span>
<a name="l00352"></a>00352 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00353"></a>00353 
<a name="l00354"></a>00354         <span class="comment"># Prototype the actions that the controller can take</span>
<a name="l00355"></a>00355         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00356"></a>00356 <span class="stringliteral"></span>
<a name="l00357"></a>00357 <span class="stringliteral">// Actions</span>
<a name="l00358"></a>00358 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00359"></a>00359         <span class="keywordflow">if</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69c0c742629be6ee761c6b4d1c70cdbc">TBEType</a> != <span class="keywordtype">None</span> <span class="keywordflow">and</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a9ed8d16c9ae7fae285dd2146c3159023">EntryType</a> != <span class="keywordtype">None</span>:
<a name="l00360"></a>00360             <span class="keywordflow">for</span> action <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#af806efc6052edbc741683ec893bb2fe1">actions</a>.itervalues():
<a name="l00361"></a>00361                 code(<span class="stringliteral">&apos;/** \\brief ${{action.desc}} */&apos;</span>)
<a name="l00362"></a>00362                 code(<span class="stringliteral">&apos;void ${{action.ident}}(${{self.TBEType.c_ident}}*&amp; &apos;</span>
<a name="l00363"></a>00363                      <span class="stringliteral">&apos;m_tbe_ptr, ${{self.EntryType.c_ident}}*&amp; &apos;</span>
<a name="l00364"></a>00364                      <span class="stringliteral">&apos;m_cache_entry_ptr, const Address&amp; addr);&apos;</span>)
<a name="l00365"></a>00365         <span class="keywordflow">elif</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69c0c742629be6ee761c6b4d1c70cdbc">TBEType</a> != <span class="keywordtype">None</span>:
<a name="l00366"></a>00366             <span class="keywordflow">for</span> action <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#af806efc6052edbc741683ec893bb2fe1">actions</a>.itervalues():
<a name="l00367"></a>00367                 code(<span class="stringliteral">&apos;/** \\brief ${{action.desc}} */&apos;</span>)
<a name="l00368"></a>00368                 code(<span class="stringliteral">&apos;void ${{action.ident}}(${{self.TBEType.c_ident}}*&amp; &apos;</span>
<a name="l00369"></a>00369                      <span class="stringliteral">&apos;m_tbe_ptr, const Address&amp; addr);&apos;</span>)
<a name="l00370"></a>00370         <span class="keywordflow">elif</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a9ed8d16c9ae7fae285dd2146c3159023">EntryType</a> != <span class="keywordtype">None</span>:
<a name="l00371"></a>00371             <span class="keywordflow">for</span> action <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#af806efc6052edbc741683ec893bb2fe1">actions</a>.itervalues():
<a name="l00372"></a>00372                 code(<span class="stringliteral">&apos;/** \\brief ${{action.desc}} */&apos;</span>)
<a name="l00373"></a>00373                 code(<span class="stringliteral">&apos;void ${{action.ident}}(${{self.EntryType.c_ident}}*&amp; &apos;</span>
<a name="l00374"></a>00374                      <span class="stringliteral">&apos;m_cache_entry_ptr, const Address&amp; addr);&apos;</span>)
<a name="l00375"></a>00375         <span class="keywordflow">else</span>:
<a name="l00376"></a>00376             <span class="keywordflow">for</span> action <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#af806efc6052edbc741683ec893bb2fe1">actions</a>.itervalues():
<a name="l00377"></a>00377                 code(<span class="stringliteral">&apos;/** \\brief ${{action.desc}} */&apos;</span>)
<a name="l00378"></a>00378                 code(<span class="stringliteral">&apos;void ${{action.ident}}(const Address&amp; addr);&apos;</span>)
<a name="l00379"></a>00379 
<a name="l00380"></a>00380         <span class="comment"># the controller internal variables</span>
<a name="l00381"></a>00381         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00382"></a>00382 <span class="stringliteral"></span>
<a name="l00383"></a>00383 <span class="stringliteral">// Objects</span>
<a name="l00384"></a>00384 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00385"></a>00385         <span class="keywordflow">for</span> var <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a68a28c9ed35f4a725b22cbf60728cb23">objects</a>:
<a name="l00386"></a>00386             th = var.get(<span class="stringliteral">&quot;template&quot;</span>, <span class="stringliteral">&quot;&quot;</span>)
<a name="l00387"></a>00387             code(<span class="stringliteral">&apos;${{var.type.c_ident}}$th* m_${{var.c_ident}}_ptr;&apos;</span>)
<a name="l00388"></a>00388 
<a name="l00389"></a>00389         code.dedent()
<a name="l00390"></a>00390         code(<span class="stringliteral">&apos;};&apos;</span>)
<a name="l00391"></a>00391         code(<span class="stringliteral">&apos;#endif // __${ident}_CONTROLLER_H__&apos;</span>)
<a name="l00392"></a>00392         code.write(path, <span class="stringliteral">&apos;%s.hh&apos;</span> % c_ident)
<a name="l00393"></a>00393 
    <span class="keyword">def </span><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ac7ff5b8d214aa5dc308c9bf318dbf803">printControllerCC</a>(self, path, includes):
</pre></div></p>

</div>
</div>
<a class="anchor" id="a25a336d53100c6b055cd925314315411"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::printControllerPython" ref="a25a336d53100c6b055cd925314315411" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def printControllerPython </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>path</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00177"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a25a336d53100c6b055cd925314315411">00177</a>                                          :
<a name="l00178"></a>00178         code = self.symtab.codeFormatter()
<a name="l00179"></a>00179         ident = self.ident
<a name="l00180"></a>00180         py_ident = <span class="stringliteral">&quot;%s_Controller&quot;</span> % ident
<a name="l00181"></a>00181         c_ident = <span class="stringliteral">&quot;%s_Controller&quot;</span> % self.ident
<a name="l00182"></a>00182         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l00183"></a>00183 <span class="stringliteral">from m5.params import *</span>
<a name="l00184"></a>00184 <span class="stringliteral">from m5.SimObject import SimObject</span>
<a name="l00185"></a>00185 <span class="stringliteral">from Controller import RubyController</span>
<a name="l00186"></a>00186 <span class="stringliteral"></span>
<a name="l00187"></a>00187 <span class="stringliteral">class $py_ident(RubyController):</span>
<a name="l00188"></a>00188 <span class="stringliteral">    type = &apos;$py_ident&apos;</span>
<a name="l00189"></a>00189 <span class="stringliteral">    cxx_header = &apos;mem/protocol/${c_ident}.hh&apos;</span>
<a name="l00190"></a>00190 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l00191"></a>00191         code.indent()
<a name="l00192"></a>00192         <span class="keywordflow">for</span> param <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ae063a2c5f7b248003e02898444bff038">config_parameters</a>:
<a name="l00193"></a>00193             dflt_str = <span class="stringliteral">&apos;&apos;</span>
<a name="l00194"></a>00194             <span class="keywordflow">if</span> param.default <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l00195"></a>00195                 dflt_str = str(param.default) + <span class="stringliteral">&apos;, &apos;</span>
<a name="l00196"></a>00196             <span class="keywordflow">if</span> python_class_map.has_key(param.type_ast.type.c_ident):
<a name="l00197"></a>00197                 python_type = python_class_map[param.type_ast.type.c_ident]
<a name="l00198"></a>00198                 code(<span class="stringliteral">&apos;${{param.name}} = Param.${{python_type}}(${dflt_str}&quot;&quot;)&apos;</span>)
<a name="l00199"></a>00199             <span class="keywordflow">else</span>:
<a name="l00200"></a>00200                 self.error(<span class="stringliteral">&quot;Unknown c++ to python class conversion for c++ &quot;</span> \
<a name="l00201"></a>00201                            <span class="stringliteral">&quot;type: &apos;%s&apos;. Please update the python_class_map &quot;</span> \
<a name="l00202"></a>00202                            <span class="stringliteral">&quot;in StateMachine.py&quot;</span>, param.type_ast.type.c_ident)
<a name="l00203"></a>00203         code.dedent()
<a name="l00204"></a>00204         code.write(path, <span class="stringliteral">&apos;%s.py&apos;</span> % py_ident)
<a name="l00205"></a>00205         
<a name="l00206"></a>00206 
    <span class="keyword">def </span><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a51c25c0a0d014fffeeea2ab7d9981ad6">printControllerHH</a>(self, path):
</pre></div></p>

</div>
</div>
<a class="anchor" id="a077df50bb09dac9bc0a7fcac3703b74f"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::printCSwitch" ref="a077df50bb09dac9bc0a7fcac3703b74f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def printCSwitch </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>path</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">Output switch statement for transition table</pre></div> 
<p><div class="fragment"><pre class="fragment"><a name="l01098"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a077df50bb09dac9bc0a7fcac3703b74f">01098</a>                                 :
<a name="l01099"></a>01099         <span class="stringliteral">&apos;&apos;&apos;Output switch statement for transition table&apos;&apos;&apos;</span>
<a name="l01100"></a>01100 
<a name="l01101"></a>01101         code = self.symtab.codeFormatter()
<a name="l01102"></a>01102         ident = self.ident
<a name="l01103"></a>01103 
<a name="l01104"></a>01104         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l01105"></a>01105 <span class="stringliteral">// Auto generated C++ code started by $__file__:$__line__</span>
<a name="l01106"></a>01106 <span class="stringliteral">// ${ident}: ${{self.short}}</span>
<a name="l01107"></a>01107 <span class="stringliteral"></span>
<a name="l01108"></a>01108 <span class="stringliteral">#include &lt;cassert&gt;</span>
<a name="l01109"></a>01109 <span class="stringliteral"></span>
<a name="l01110"></a>01110 <span class="stringliteral">#include &quot;base/misc.hh&quot;</span>
<a name="l01111"></a>01111 <span class="stringliteral">#include &quot;base/trace.hh&quot;</span>
<a name="l01112"></a>01112 <span class="stringliteral">#include &quot;debug/ProtocolTrace.hh&quot;</span>
<a name="l01113"></a>01113 <span class="stringliteral">#include &quot;debug/RubyGenerated.hh&quot;</span>
<a name="l01114"></a>01114 <span class="stringliteral">#include &quot;mem/protocol/${ident}_Controller.hh&quot;</span>
<a name="l01115"></a>01115 <span class="stringliteral">#include &quot;mem/protocol/${ident}_Event.hh&quot;</span>
<a name="l01116"></a>01116 <span class="stringliteral">#include &quot;mem/protocol/${ident}_State.hh&quot;</span>
<a name="l01117"></a>01117 <span class="stringliteral">#include &quot;mem/protocol/Types.hh&quot;</span>
<a name="l01118"></a>01118 <span class="stringliteral">#include &quot;mem/ruby/common/Global.hh&quot;</span>
<a name="l01119"></a>01119 <span class="stringliteral">#include &quot;mem/ruby/system/System.hh&quot;</span>
<a name="l01120"></a>01120 <span class="stringliteral"></span>
<a name="l01121"></a>01121 <span class="stringliteral">#define HASH_FUN(state, event)  ((int(state)*${ident}_Event_NUM)+int(event))</span>
<a name="l01122"></a>01122 <span class="stringliteral"></span>
<a name="l01123"></a>01123 <span class="stringliteral">#define GET_TRANSITION_COMMENT() (${ident}_transitionComment.str())</span>
<a name="l01124"></a>01124 <span class="stringliteral">#define CLEAR_TRANSITION_COMMENT() (${ident}_transitionComment.str(&quot;&quot;))</span>
<a name="l01125"></a>01125 <span class="stringliteral"></span>
<a name="l01126"></a>01126 <span class="stringliteral">TransitionResult</span>
<a name="l01127"></a>01127 <span class="stringliteral">${ident}_Controller::doTransition(${ident}_Event event,</span>
<a name="l01128"></a>01128 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l01129"></a>01129         <span class="keywordflow">if</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a9ed8d16c9ae7fae285dd2146c3159023">EntryType</a> != <span class="keywordtype">None</span>:
<a name="l01130"></a>01130             code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l01131"></a>01131 <span class="stringliteral">                                  ${{self.EntryType.c_ident}}* m_cache_entry_ptr,</span>
<a name="l01132"></a>01132 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l01133"></a>01133         <span class="keywordflow">if</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69c0c742629be6ee761c6b4d1c70cdbc">TBEType</a> != <span class="keywordtype">None</span>:
<a name="l01134"></a>01134             code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l01135"></a>01135 <span class="stringliteral">                                  ${{self.TBEType.c_ident}}* m_tbe_ptr,</span>
<a name="l01136"></a>01136 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l01137"></a>01137         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l01138"></a>01138 <span class="stringliteral">                                  const Address addr)</span>
<a name="l01139"></a>01139 <span class="stringliteral">{</span>
<a name="l01140"></a>01140 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l01141"></a>01141         <span class="keywordflow">if</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69c0c742629be6ee761c6b4d1c70cdbc">TBEType</a> != <span class="keywordtype">None</span> <span class="keywordflow">and</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a9ed8d16c9ae7fae285dd2146c3159023">EntryType</a> != <span class="keywordtype">None</span>:
<a name="l01142"></a>01142             code(<span class="stringliteral">&apos;${ident}_State state = getState(m_tbe_ptr, m_cache_entry_ptr, addr);&apos;</span>)
<a name="l01143"></a>01143         <span class="keywordflow">elif</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69c0c742629be6ee761c6b4d1c70cdbc">TBEType</a> != <span class="keywordtype">None</span>:
<a name="l01144"></a>01144             code(<span class="stringliteral">&apos;${ident}_State state = getState(m_tbe_ptr, addr);&apos;</span>)
<a name="l01145"></a>01145         <span class="keywordflow">elif</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a9ed8d16c9ae7fae285dd2146c3159023">EntryType</a> != <span class="keywordtype">None</span>:
<a name="l01146"></a>01146             code(<span class="stringliteral">&apos;${ident}_State state = getState(m_cache_entry_ptr, addr);&apos;</span>)
<a name="l01147"></a>01147         <span class="keywordflow">else</span>:
<a name="l01148"></a>01148             code(<span class="stringliteral">&apos;${ident}_State state = getState(addr);&apos;</span>)
<a name="l01149"></a>01149 
<a name="l01150"></a>01150         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l01151"></a>01151 <span class="stringliteral">    ${ident}_State next_state = state;</span>
<a name="l01152"></a>01152 <span class="stringliteral"></span>
<a name="l01153"></a>01153 <span class="stringliteral">    DPRINTF(RubyGenerated, &quot;%s, Time: %lld, state: %s, event: %s, addr: %s\\n&quot;,</span>
<a name="l01154"></a>01154 <span class="stringliteral">            *this, curCycle(), ${ident}_State_to_string(state),</span>
<a name="l01155"></a>01155 <span class="stringliteral">            ${ident}_Event_to_string(event), addr);</span>
<a name="l01156"></a>01156 <span class="stringliteral"></span>
<a name="l01157"></a>01157 <span class="stringliteral">    TransitionResult result =</span>
<a name="l01158"></a>01158 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l01159"></a>01159         <span class="keywordflow">if</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69c0c742629be6ee761c6b4d1c70cdbc">TBEType</a> != <span class="keywordtype">None</span> <span class="keywordflow">and</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a9ed8d16c9ae7fae285dd2146c3159023">EntryType</a> != <span class="keywordtype">None</span>:
<a name="l01160"></a>01160             code(<span class="stringliteral">&apos;doTransitionWorker(event, state, next_state, m_tbe_ptr, m_cache_entry_ptr, addr);&apos;</span>)
<a name="l01161"></a>01161         <span class="keywordflow">elif</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69c0c742629be6ee761c6b4d1c70cdbc">TBEType</a> != <span class="keywordtype">None</span>:
<a name="l01162"></a>01162             code(<span class="stringliteral">&apos;doTransitionWorker(event, state, next_state, m_tbe_ptr, addr);&apos;</span>)
<a name="l01163"></a>01163         <span class="keywordflow">elif</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a9ed8d16c9ae7fae285dd2146c3159023">EntryType</a> != <span class="keywordtype">None</span>:
<a name="l01164"></a>01164             code(<span class="stringliteral">&apos;doTransitionWorker(event, state, next_state, m_cache_entry_ptr, addr);&apos;</span>)
<a name="l01165"></a>01165         <span class="keywordflow">else</span>:
<a name="l01166"></a>01166             code(<span class="stringliteral">&apos;doTransitionWorker(event, state, next_state, addr);&apos;</span>)
<a name="l01167"></a>01167 
<a name="l01168"></a>01168         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l01169"></a>01169 <span class="stringliteral">    if (result == TransitionResult_Valid) {</span>
<a name="l01170"></a>01170 <span class="stringliteral">        DPRINTF(RubyGenerated, &quot;next_state: %s\\n&quot;,</span>
<a name="l01171"></a>01171 <span class="stringliteral">                ${ident}_State_to_string(next_state));</span>
<a name="l01172"></a>01172 <span class="stringliteral">        countTransition(state, event);</span>
<a name="l01173"></a>01173 <span class="stringliteral">        DPRINTFR(ProtocolTrace, &quot;%15d %3s %10s%20s %6s&gt;%-6s %s %s\\n&quot;,</span>
<a name="l01174"></a>01174 <span class="stringliteral">                 curTick(), m_version, &quot;${ident}&quot;,</span>
<a name="l01175"></a>01175 <span class="stringliteral">                 ${ident}_Event_to_string(event),</span>
<a name="l01176"></a>01176 <span class="stringliteral">                 ${ident}_State_to_string(state),</span>
<a name="l01177"></a>01177 <span class="stringliteral">                 ${ident}_State_to_string(next_state),</span>
<a name="l01178"></a>01178 <span class="stringliteral">                 addr, GET_TRANSITION_COMMENT());</span>
<a name="l01179"></a>01179 <span class="stringliteral"></span>
<a name="l01180"></a>01180 <span class="stringliteral">        CLEAR_TRANSITION_COMMENT();</span>
<a name="l01181"></a>01181 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l01182"></a>01182         <span class="keywordflow">if</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69c0c742629be6ee761c6b4d1c70cdbc">TBEType</a> != <span class="keywordtype">None</span> <span class="keywordflow">and</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a9ed8d16c9ae7fae285dd2146c3159023">EntryType</a> != <span class="keywordtype">None</span>:
<a name="l01183"></a>01183             code(<span class="stringliteral">&apos;setState(m_tbe_ptr, m_cache_entry_ptr, addr, next_state);&apos;</span>)
<a name="l01184"></a>01184             code(<span class="stringliteral">&apos;setAccessPermission(m_cache_entry_ptr, addr, next_state);&apos;</span>)
<a name="l01185"></a>01185         <span class="keywordflow">elif</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69c0c742629be6ee761c6b4d1c70cdbc">TBEType</a> != <span class="keywordtype">None</span>:
<a name="l01186"></a>01186             code(<span class="stringliteral">&apos;setState(m_tbe_ptr, addr, next_state);&apos;</span>)
<a name="l01187"></a>01187             code(<span class="stringliteral">&apos;setAccessPermission(addr, next_state);&apos;</span>)
<a name="l01188"></a>01188         <span class="keywordflow">elif</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a9ed8d16c9ae7fae285dd2146c3159023">EntryType</a> != <span class="keywordtype">None</span>:
<a name="l01189"></a>01189             code(<span class="stringliteral">&apos;setState(m_cache_entry_ptr, addr, next_state);&apos;</span>)
<a name="l01190"></a>01190             code(<span class="stringliteral">&apos;setAccessPermission(m_cache_entry_ptr, addr, next_state);&apos;</span>)
<a name="l01191"></a>01191         <span class="keywordflow">else</span>:
<a name="l01192"></a>01192             code(<span class="stringliteral">&apos;setState(addr, next_state);&apos;</span>)
<a name="l01193"></a>01193             code(<span class="stringliteral">&apos;setAccessPermission(addr, next_state);&apos;</span>)
<a name="l01194"></a>01194 
<a name="l01195"></a>01195         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l01196"></a>01196 <span class="stringliteral">    } else if (result == TransitionResult_ResourceStall) {</span>
<a name="l01197"></a>01197 <span class="stringliteral">        DPRINTFR(ProtocolTrace, &quot;%15s %3s %10s%20s %6s&gt;%-6s %s %s\\n&quot;,</span>
<a name="l01198"></a>01198 <span class="stringliteral">                 curTick(), m_version, &quot;${ident}&quot;,</span>
<a name="l01199"></a>01199 <span class="stringliteral">                 ${ident}_Event_to_string(event),</span>
<a name="l01200"></a>01200 <span class="stringliteral">                 ${ident}_State_to_string(state),</span>
<a name="l01201"></a>01201 <span class="stringliteral">                 ${ident}_State_to_string(next_state),</span>
<a name="l01202"></a>01202 <span class="stringliteral">                 addr, &quot;Resource Stall&quot;);</span>
<a name="l01203"></a>01203 <span class="stringliteral">    } else if (result == TransitionResult_ProtocolStall) {</span>
<a name="l01204"></a>01204 <span class="stringliteral">        DPRINTF(RubyGenerated, &quot;stalling\\n&quot;);</span>
<a name="l01205"></a>01205 <span class="stringliteral">        DPRINTFR(ProtocolTrace, &quot;%15s %3s %10s%20s %6s&gt;%-6s %s %s\\n&quot;,</span>
<a name="l01206"></a>01206 <span class="stringliteral">                 curTick(), m_version, &quot;${ident}&quot;,</span>
<a name="l01207"></a>01207 <span class="stringliteral">                 ${ident}_Event_to_string(event),</span>
<a name="l01208"></a>01208 <span class="stringliteral">                 ${ident}_State_to_string(state),</span>
<a name="l01209"></a>01209 <span class="stringliteral">                 ${ident}_State_to_string(next_state),</span>
<a name="l01210"></a>01210 <span class="stringliteral">                 addr, &quot;Protocol Stall&quot;);</span>
<a name="l01211"></a>01211 <span class="stringliteral">    }</span>
<a name="l01212"></a>01212 <span class="stringliteral"></span>
<a name="l01213"></a>01213 <span class="stringliteral">    return result;</span>
<a name="l01214"></a>01214 <span class="stringliteral">}</span>
<a name="l01215"></a>01215 <span class="stringliteral"></span>
<a name="l01216"></a>01216 <span class="stringliteral">TransitionResult</span>
<a name="l01217"></a>01217 <span class="stringliteral">${ident}_Controller::doTransitionWorker(${ident}_Event event,</span>
<a name="l01218"></a>01218 <span class="stringliteral">                                        ${ident}_State state,</span>
<a name="l01219"></a>01219 <span class="stringliteral">                                        ${ident}_State&amp; next_state,</span>
<a name="l01220"></a>01220 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l01221"></a>01221 
<a name="l01222"></a>01222         <span class="keywordflow">if</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69c0c742629be6ee761c6b4d1c70cdbc">TBEType</a> != <span class="keywordtype">None</span>:
<a name="l01223"></a>01223             code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l01224"></a>01224 <span class="stringliteral">                                        ${{self.TBEType.c_ident}}*&amp; m_tbe_ptr,</span>
<a name="l01225"></a>01225 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l01226"></a>01226         <span class="keywordflow">if</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a9ed8d16c9ae7fae285dd2146c3159023">EntryType</a> != <span class="keywordtype">None</span>:
<a name="l01227"></a>01227                   code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l01228"></a>01228 <span class="stringliteral">                                        ${{self.EntryType.c_ident}}*&amp; m_cache_entry_ptr,</span>
<a name="l01229"></a>01229 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l01230"></a>01230         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l01231"></a>01231 <span class="stringliteral">                                        const Address&amp; addr)</span>
<a name="l01232"></a>01232 <span class="stringliteral">{</span>
<a name="l01233"></a>01233 <span class="stringliteral">    switch(HASH_FUN(state, event)) {</span>
<a name="l01234"></a>01234 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l01235"></a>01235 
<a name="l01236"></a>01236         <span class="comment"># This map will allow suppress generating duplicate code</span>
<a name="l01237"></a>01237         cases = orderdict()
<a name="l01238"></a>01238 
<a name="l01239"></a>01239         <span class="keywordflow">for</span> trans <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a2594171e7c2a90ab61e43e1bc68adaf7">transitions</a>:
<a name="l01240"></a>01240             case_string = <span class="stringliteral">&quot;%s_State_%s, %s_Event_%s&quot;</span> % \
<a name="l01241"></a>01241                 (self.ident, trans.state.ident, self.ident, trans.event.ident)
<a name="l01242"></a>01242 
<a name="l01243"></a>01243             case = self.symtab.codeFormatter()
<a name="l01244"></a>01244             <span class="comment"># Only set next_state if it changes</span>
<a name="l01245"></a>01245             <span class="keywordflow">if</span> trans.state != trans.nextState:
<a name="l01246"></a>01246                 ns_ident = trans.nextState.ident
<a name="l01247"></a>01247                 case(<span class="stringliteral">&apos;next_state = ${ident}_State_${ns_ident};&apos;</span>)
<a name="l01248"></a>01248 
<a name="l01249"></a>01249             actions = trans.actions
<a name="l01250"></a>01250             request_types = trans.request_types
<a name="l01251"></a>01251 
<a name="l01252"></a>01252             <span class="comment"># Check for resources</span>
<a name="l01253"></a>01253             case_sorter = []
<a name="l01254"></a>01254             res = trans.resources
<a name="l01255"></a>01255             <span class="keywordflow">for</span> key,val <span class="keywordflow">in</span> res.iteritems():
<a name="l01256"></a>01256                 val = <span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l01257"></a>01257 <span class="stringliteral">if (!%s.areNSlotsAvailable(%s))</span>
<a name="l01258"></a>01258 <span class="stringliteral">    return TransitionResult_ResourceStall;</span>
<a name="l01259"></a>01259 <span class="stringliteral">&apos;&apos;&apos;</span> % (key.code, val)
<a name="l01260"></a>01260                 case_sorter.append(val)
<a name="l01261"></a>01261 
<a name="l01262"></a>01262             <span class="comment"># Check all of the request_types for resource constraints</span>
<a name="l01263"></a>01263             <span class="keywordflow">for</span> request_type <span class="keywordflow">in</span> request_types:
<a name="l01264"></a>01264                 val = <span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l01265"></a>01265 <span class="stringliteral">if (!checkResourceAvailable(%s_RequestType_%s, addr)) {</span>
<a name="l01266"></a>01266 <span class="stringliteral">    return TransitionResult_ResourceStall;</span>
<a name="l01267"></a>01267 <span class="stringliteral">}</span>
<a name="l01268"></a>01268 <span class="stringliteral">&apos;&apos;&apos;</span> % (self.ident, request_type.ident)
<a name="l01269"></a>01269                 case_sorter.append(val)
<a name="l01270"></a>01270 
<a name="l01271"></a>01271             <span class="comment"># Emit the code sequences in a sorted order.  This makes the</span>
<a name="l01272"></a>01272             <span class="comment"># output deterministic (without this the output order can vary</span>
<a name="l01273"></a>01273             <span class="comment"># since Map&apos;s keys() on a vector of pointers is not deterministic</span>
<a name="l01274"></a>01274             <span class="keywordflow">for</span> c <span class="keywordflow">in</span> sorted(case_sorter):
<a name="l01275"></a>01275                 case(<span class="stringliteral">&quot;$c&quot;</span>)
<a name="l01276"></a>01276 
<a name="l01277"></a>01277             <span class="comment"># Record access types for this transition</span>
<a name="l01278"></a>01278             <span class="keywordflow">for</span> request_type <span class="keywordflow">in</span> request_types:
<a name="l01279"></a>01279                 case(<span class="stringliteral">&apos;recordRequestType(${ident}_RequestType_${{request_type.ident}}, addr);&apos;</span>)
<a name="l01280"></a>01280 
<a name="l01281"></a>01281             <span class="comment"># Figure out if we stall</span>
<a name="l01282"></a>01282             stall = <span class="keyword">False</span>
<a name="l01283"></a>01283             <span class="keywordflow">for</span> action <span class="keywordflow">in</span> actions:
<a name="l01284"></a>01284                 <span class="keywordflow">if</span> action.ident == <span class="stringliteral">&quot;z_stall&quot;</span>:
<a name="l01285"></a>01285                     stall = <span class="keyword">True</span>
<a name="l01286"></a>01286                     <span class="keywordflow">break</span>
<a name="l01287"></a>01287 
<a name="l01288"></a>01288             <span class="keywordflow">if</span> stall:
<a name="l01289"></a>01289                 case(<span class="stringliteral">&apos;return TransitionResult_ProtocolStall;&apos;</span>)
<a name="l01290"></a>01290             <span class="keywordflow">else</span>:
<a name="l01291"></a>01291                 <span class="keywordflow">if</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69c0c742629be6ee761c6b4d1c70cdbc">TBEType</a> != <span class="keywordtype">None</span> <span class="keywordflow">and</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a9ed8d16c9ae7fae285dd2146c3159023">EntryType</a> != <span class="keywordtype">None</span>:
<a name="l01292"></a>01292                     <span class="keywordflow">for</span> action <span class="keywordflow">in</span> actions:
<a name="l01293"></a>01293                         case(<span class="stringliteral">&apos;${{action.ident}}(m_tbe_ptr, m_cache_entry_ptr, addr);&apos;</span>)
<a name="l01294"></a>01294                 <span class="keywordflow">elif</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69c0c742629be6ee761c6b4d1c70cdbc">TBEType</a> != <span class="keywordtype">None</span>:
<a name="l01295"></a>01295                     <span class="keywordflow">for</span> action <span class="keywordflow">in</span> actions:
<a name="l01296"></a>01296                         case(<span class="stringliteral">&apos;${{action.ident}}(m_tbe_ptr, addr);&apos;</span>)
<a name="l01297"></a>01297                 <span class="keywordflow">elif</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a9ed8d16c9ae7fae285dd2146c3159023">EntryType</a> != <span class="keywordtype">None</span>:
<a name="l01298"></a>01298                     <span class="keywordflow">for</span> action <span class="keywordflow">in</span> actions:
<a name="l01299"></a>01299                         case(<span class="stringliteral">&apos;${{action.ident}}(m_cache_entry_ptr, addr);&apos;</span>)
<a name="l01300"></a>01300                 <span class="keywordflow">else</span>:
<a name="l01301"></a>01301                     <span class="keywordflow">for</span> action <span class="keywordflow">in</span> actions:
<a name="l01302"></a>01302                         case(<span class="stringliteral">&apos;${{action.ident}}(addr);&apos;</span>)
<a name="l01303"></a>01303                 case(<span class="stringliteral">&apos;return TransitionResult_Valid;&apos;</span>)
<a name="l01304"></a>01304 
<a name="l01305"></a>01305             case = str(case)
<a name="l01306"></a>01306 
<a name="l01307"></a>01307             <span class="comment"># Look to see if this transition code is unique.</span>
<a name="l01308"></a>01308             <span class="keywordflow">if</span> case <span class="keywordflow">not</span> <span class="keywordflow">in</span> cases:
<a name="l01309"></a>01309                 cases[case] = []
<a name="l01310"></a>01310 
<a name="l01311"></a>01311             cases[case].append(case_string)
<a name="l01312"></a>01312 
<a name="l01313"></a>01313         <span class="comment"># Walk through all of the unique code blocks and spit out the</span>
<a name="l01314"></a>01314         <span class="comment"># corresponding case statement elements</span>
<a name="l01315"></a>01315         <span class="keywordflow">for</span> case,transitions <span class="keywordflow">in</span> cases.iteritems():
<a name="l01316"></a>01316             <span class="comment"># Iterative over all the multiple transitions that share</span>
<a name="l01317"></a>01317             <span class="comment"># the same code</span>
<a name="l01318"></a>01318             <span class="keywordflow">for</span> trans <span class="keywordflow">in</span> transitions:
<a name="l01319"></a>01319                 code(<span class="stringliteral">&apos;  case HASH_FUN($trans):&apos;</span>)
<a name="l01320"></a>01320             code(<span class="stringliteral">&apos;    $case&apos;</span>)
<a name="l01321"></a>01321 
<a name="l01322"></a>01322         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l01323"></a>01323 <span class="stringliteral">      default:</span>
<a name="l01324"></a>01324 <span class="stringliteral">        fatal(&quot;Invalid transition\\n&quot;</span>
<a name="l01325"></a>01325 <span class="stringliteral">              &quot;%s time: %d addr: %s event: %s state: %s\\n&quot;,</span>
<a name="l01326"></a>01326 <span class="stringliteral">              name(), curCycle(), addr, event, state);</span>
<a name="l01327"></a>01327 <span class="stringliteral">    }</span>
<a name="l01328"></a>01328 <span class="stringliteral">    return TransitionResult_Valid;</span>
<a name="l01329"></a>01329 <span class="stringliteral">}</span>
<a name="l01330"></a>01330 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l01331"></a>01331         code.write(path, <span class="stringliteral">&quot;%s_Transitions.cc&quot;</span> % self.ident)
<a name="l01332"></a>01332 
<a name="l01333"></a>01333 
<a name="l01334"></a>01334     <span class="comment"># **************************</span>
<a name="l01335"></a>01335     <span class="comment"># ******* HTML Files *******</span>
<a name="l01336"></a>01336     <span class="comment"># **************************</span>
    <span class="keyword">def </span><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#acece50be46cc760cf24771b26ee54557">frameRef</a>(self, click_href, click_target, over_href, over_num, text):
</pre></div></p>

</div>
</div>
<a class="anchor" id="a152a40a5c142388231336a6935cfff80"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::printCWakeup" ref="a152a40a5c142388231336a6935cfff80" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def printCWakeup </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>includes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">Output the wakeup loop for the events</pre></div> 
<p><div class="fragment"><pre class="fragment"><a name="l01011"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a152a40a5c142388231336a6935cfff80">01011</a>                                           :
<a name="l01012"></a>01012         <span class="stringliteral">&apos;&apos;&apos;Output the wakeup loop for the events&apos;&apos;&apos;</span>
<a name="l01013"></a>01013 
<a name="l01014"></a>01014         code = self.symtab.codeFormatter()
<a name="l01015"></a>01015         ident = self.ident
<a name="l01016"></a>01016 
<a name="l01017"></a>01017         outputRequest_types = <span class="keyword">True</span>
<a name="l01018"></a>01018         <span class="keywordflow">if</span> len(self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a11a77bd4543c82e1dd96d60507dc74d2">request_types</a>) == 0:
<a name="l01019"></a>01019             outputRequest_types = <span class="keyword">False</span>
<a name="l01020"></a>01020 
<a name="l01021"></a>01021         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l01022"></a>01022 <span class="stringliteral">// Auto generated C++ code started by $__file__:$__line__</span>
<a name="l01023"></a>01023 <span class="stringliteral">// ${ident}: ${{self.short}}</span>
<a name="l01024"></a>01024 <span class="stringliteral"></span>
<a name="l01025"></a>01025 <span class="stringliteral">#include &lt;sys/types.h&gt;</span>
<a name="l01026"></a>01026 <span class="stringliteral">#include &lt;unistd.h&gt;</span>
<a name="l01027"></a>01027 <span class="stringliteral"></span>
<a name="l01028"></a>01028 <span class="stringliteral">#include &lt;cassert&gt;</span>
<a name="l01029"></a>01029 <span class="stringliteral"></span>
<a name="l01030"></a>01030 <span class="stringliteral">#include &quot;base/misc.hh&quot;</span>
<a name="l01031"></a>01031 <span class="stringliteral">#include &quot;debug/RubySlicc.hh&quot;</span>
<a name="l01032"></a>01032 <span class="stringliteral">#include &quot;mem/protocol/${ident}_Controller.hh&quot;</span>
<a name="l01033"></a>01033 <span class="stringliteral">#include &quot;mem/protocol/${ident}_Event.hh&quot;</span>
<a name="l01034"></a>01034 <span class="stringliteral">#include &quot;mem/protocol/${ident}_State.hh&quot;</span>
<a name="l01035"></a>01035 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l01036"></a>01036 
<a name="l01037"></a>01037         <span class="keywordflow">if</span> outputRequest_types:
<a name="l01038"></a>01038             code(<span class="stringliteral">&apos;&apos;&apos;#include &quot;mem/protocol/${ident}_RequestType.hh&quot;&apos;&apos;&apos;</span>)
<a name="l01039"></a>01039 
<a name="l01040"></a>01040         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l01041"></a>01041 <span class="stringliteral">#include &quot;mem/protocol/Types.hh&quot;</span>
<a name="l01042"></a>01042 <span class="stringliteral">#include &quot;mem/ruby/common/Global.hh&quot;</span>
<a name="l01043"></a>01043 <span class="stringliteral">#include &quot;mem/ruby/system/System.hh&quot;</span>
<a name="l01044"></a>01044 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l01045"></a>01045 
<a name="l01046"></a>01046 
<a name="l01047"></a>01047         <span class="keywordflow">for</span> include_path <span class="keywordflow">in</span> includes:
<a name="l01048"></a>01048             code(<span class="stringliteral">&apos;#include &quot;${{include_path}}&quot;&apos;</span>)
<a name="l01049"></a>01049 
<a name="l01050"></a>01050         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l01051"></a>01051 <span class="stringliteral"></span>
<a name="l01052"></a>01052 <span class="stringliteral">using namespace std;</span>
<a name="l01053"></a>01053 <span class="stringliteral"></span>
<a name="l01054"></a>01054 <span class="stringliteral">void</span>
<a name="l01055"></a>01055 <span class="stringliteral">${ident}_Controller::wakeup()</span>
<a name="l01056"></a>01056 <span class="stringliteral">{</span>
<a name="l01057"></a>01057 <span class="stringliteral">    int counter = 0;</span>
<a name="l01058"></a>01058 <span class="stringliteral">    while (true) {</span>
<a name="l01059"></a>01059 <span class="stringliteral">        // Some cases will put us into an infinite loop without this limit</span>
<a name="l01060"></a>01060 <span class="stringliteral">        assert(counter &lt;= m_transitions_per_cycle);</span>
<a name="l01061"></a>01061 <span class="stringliteral">        if (counter == m_transitions_per_cycle) {</span>
<a name="l01062"></a>01062 <span class="stringliteral">            // Count how often we are fully utilized</span>
<a name="l01063"></a>01063 <span class="stringliteral">            m_fully_busy_cycles++;</span>
<a name="l01064"></a>01064 <span class="stringliteral"></span>
<a name="l01065"></a>01065 <span class="stringliteral">            // Wakeup in another cycle and try again</span>
<a name="l01066"></a>01066 <span class="stringliteral">            scheduleEvent(Cycles(1));</span>
<a name="l01067"></a>01067 <span class="stringliteral">            break;</span>
<a name="l01068"></a>01068 <span class="stringliteral">        }</span>
<a name="l01069"></a>01069 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l01070"></a>01070 
<a name="l01071"></a>01071         code.indent()
<a name="l01072"></a>01072         code.indent()
<a name="l01073"></a>01073 
<a name="l01074"></a>01074         <span class="comment"># InPorts</span>
<a name="l01075"></a>01075         <span class="comment">#</span>
<a name="l01076"></a>01076         <span class="keywordflow">for</span> port <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a06be0f234b0fd1771925b6d3b60b083d">in_ports</a>:
<a name="l01077"></a>01077             code.indent()
<a name="l01078"></a>01078             code(<span class="stringliteral">&apos;// ${ident}InPort $port&apos;</span>)
<a name="l01079"></a>01079             <span class="keywordflow">if</span> port.pairs.has_key(<span class="stringliteral">&quot;rank&quot;</span>):
<a name="l01080"></a>01080                 code(<span class="stringliteral">&apos;m_cur_in_port = ${{port.pairs[&quot;rank&quot;]}};&apos;</span>)
<a name="l01081"></a>01081             <span class="keywordflow">else</span>:
<a name="l01082"></a>01082                 code(<span class="stringliteral">&apos;m_cur_in_port = 0;&apos;</span>)
<a name="l01083"></a>01083             code(<span class="stringliteral">&apos;${{port[&quot;c_code_in_port&quot;]}}&apos;</span>)
<a name="l01084"></a>01084             code.dedent()
<a name="l01085"></a>01085 
<a name="l01086"></a>01086             code(<span class="stringliteral">&apos;&apos;</span>)
<a name="l01087"></a>01087 
<a name="l01088"></a>01088         code.dedent()
<a name="l01089"></a>01089         code.dedent()
<a name="l01090"></a>01090         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l01091"></a>01091 <span class="stringliteral">        break;  // If we got this far, we have nothing left todo</span>
<a name="l01092"></a>01092 <span class="stringliteral">    }</span>
<a name="l01093"></a>01093 <span class="stringliteral">}</span>
<a name="l01094"></a>01094 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l01095"></a>01095 
<a name="l01096"></a>01096         code.write(path, <span class="stringliteral">&quot;%s_Wakeup.cc&quot;</span> % self.ident)
<a name="l01097"></a>01097 
    <span class="keyword">def </span><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a077df50bb09dac9bc0a7fcac3703b74f">printCSwitch</a>(self, path):
</pre></div></p>

</div>
</div>
<a class="anchor" id="afb8052d1dbc1134969e50782472ae16e"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::printHTMLTransitions" ref="afb8052d1dbc1134969e50782472ae16e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def printHTMLTransitions </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>active_state</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l01373"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#afb8052d1dbc1134969e50782472ae16e">01373</a>                                                       :
<a name="l01374"></a>01374         code = self.symtab.codeFormatter()
<a name="l01375"></a>01375 
<a name="l01376"></a>01376         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l01377"></a>01377 <span class="stringliteral">&lt;HTML&gt;</span>
<a name="l01378"></a>01378 <span class="stringliteral">&lt;BODY link=&quot;blue&quot; vlink=&quot;blue&quot;&gt;</span>
<a name="l01379"></a>01379 <span class="stringliteral"></span>
<a name="l01380"></a>01380 <span class="stringliteral">&lt;H1 align=&quot;center&quot;&gt;${{html.formatShorthand(self.short)}}:</span>
<a name="l01381"></a>01381 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l01382"></a>01382         code.indent()
<a name="l01383"></a>01383         <span class="keywordflow">for</span> i,machine <span class="keywordflow">in</span> enumerate(self.symtab.getAllType(StateMachine)):
<a name="l01384"></a>01384             mid = machine.ident
<a name="l01385"></a>01385             <span class="keywordflow">if</span> i != 0:
<a name="l01386"></a>01386                 extra = <span class="stringliteral">&quot; - &quot;</span>
<a name="l01387"></a>01387             <span class="keywordflow">else</span>:
<a name="l01388"></a>01388                 extra = <span class="stringliteral">&quot;&quot;</span>
<a name="l01389"></a>01389             <span class="keywordflow">if</span> machine == self:
<a name="l01390"></a>01390                 code(<span class="stringliteral">&apos;$extra$mid&apos;</span>)
<a name="l01391"></a>01391             <span class="keywordflow">else</span>:
<a name="l01392"></a>01392                 code(<span class="stringliteral">&apos;$extra&lt;A target=&quot;Table&quot; href=&quot;${mid}_table.html&quot;&gt;$mid&lt;/A&gt;&apos;</span>)
<a name="l01393"></a>01393         code.dedent()
<a name="l01394"></a>01394 
<a name="l01395"></a>01395         code(<span class="stringliteral">&quot;&quot;&quot;</span>
<a name="l01396"></a>01396 <span class="stringliteral">&lt;/H1&gt;</span>
<a name="l01397"></a>01397 <span class="stringliteral"></span>
<a name="l01398"></a>01398 <span class="stringliteral">&lt;TABLE border=1&gt;</span>
<a name="l01399"></a>01399 <span class="stringliteral">&lt;TR&gt;</span>
<a name="l01400"></a>01400 <span class="stringliteral">  &lt;TH&gt; &lt;/TH&gt;</span>
<a name="l01401"></a>01401 <span class="stringliteral">&quot;&quot;&quot;</span>)
<a name="l01402"></a>01402 
<a name="l01403"></a>01403         <span class="keywordflow">for</span> event <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ad29858f6d8ab73f2970f41cb21a76b84">events</a>.itervalues():
<a name="l01404"></a>01404             href = <span class="stringliteral">&quot;%s_Event_%s.html&quot;</span> % (self.ident, event.ident)
<a name="l01405"></a>01405             ref = self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#acece50be46cc760cf24771b26ee54557">frameRef</a>(href, <span class="stringliteral">&quot;Status&quot;</span>, href, <span class="stringliteral">&quot;1&quot;</span>, event.short)
<a name="l01406"></a>01406             code(<span class="stringliteral">&apos;&lt;TH bgcolor=white&gt;$ref&lt;/TH&gt;&apos;</span>)
<a name="l01407"></a>01407 
<a name="l01408"></a>01408         code(<span class="stringliteral">&apos;&lt;/TR&gt;&apos;</span>)
<a name="l01409"></a>01409         <span class="comment"># -- Body of table</span>
<a name="l01410"></a>01410         <span class="keywordflow">for</span> state <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#aa19be6305a5a4485e1e70de70ed7d677">states</a>.itervalues():
<a name="l01411"></a>01411             <span class="comment"># -- Each row</span>
<a name="l01412"></a>01412             <span class="keywordflow">if</span> state == active_state:
<a name="l01413"></a>01413                 color = <span class="stringliteral">&quot;yellow&quot;</span>
<a name="l01414"></a>01414             <span class="keywordflow">else</span>:
<a name="l01415"></a>01415                 color = <span class="stringliteral">&quot;white&quot;</span>
<a name="l01416"></a>01416 
<a name="l01417"></a>01417             click = <span class="stringliteral">&quot;%s_table_%s.html&quot;</span> % (self.ident, state.ident)
<a name="l01418"></a>01418             over = <span class="stringliteral">&quot;%s_State_%s.html&quot;</span> % (self.ident, state.ident)
<a name="l01419"></a>01419             text = html.formatShorthand(state.short)
<a name="l01420"></a>01420             ref = self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#acece50be46cc760cf24771b26ee54557">frameRef</a>(click, <span class="stringliteral">&quot;Table&quot;</span>, over, <span class="stringliteral">&quot;1&quot;</span>, state.short)
<a name="l01421"></a>01421             code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l01422"></a>01422 <span class="stringliteral">&lt;TR&gt;</span>
<a name="l01423"></a>01423 <span class="stringliteral">  &lt;TH bgcolor=$color&gt;$ref&lt;/TH&gt;</span>
<a name="l01424"></a>01424 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l01425"></a>01425 
<a name="l01426"></a>01426             <span class="comment"># -- One column for each event</span>
<a name="l01427"></a>01427             <span class="keywordflow">for</span> event <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ad29858f6d8ab73f2970f41cb21a76b84">events</a>.itervalues():
<a name="l01428"></a>01428                 trans = self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ab172ed3d3d31ff02fc5f798fe7e1bfb8">table</a>.get((state,event), <span class="keywordtype">None</span>)
<a name="l01429"></a>01429                 <span class="keywordflow">if</span> trans <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l01430"></a>01430                     <span class="comment"># This is the no transition case</span>
<a name="l01431"></a>01431                     <span class="keywordflow">if</span> state == active_state:
<a name="l01432"></a>01432                         color = <span class="stringliteral">&quot;#C0C000&quot;</span>
<a name="l01433"></a>01433                     <span class="keywordflow">else</span>:
<a name="l01434"></a>01434                         color = <span class="stringliteral">&quot;lightgrey&quot;</span>
<a name="l01435"></a>01435 
<a name="l01436"></a>01436                     code(<span class="stringliteral">&apos;&lt;TD bgcolor=$color&gt;&amp;nbsp;&lt;/TD&gt;&apos;</span>)
<a name="l01437"></a>01437                     <span class="keywordflow">continue</span>
<a name="l01438"></a>01438 
<a name="l01439"></a>01439                 next = trans.nextState
<a name="l01440"></a>01440                 stall_action = <span class="keyword">False</span>
<a name="l01441"></a>01441 
<a name="l01442"></a>01442                 <span class="comment"># -- Get the actions</span>
<a name="l01443"></a>01443                 <span class="keywordflow">for</span> action <span class="keywordflow">in</span> trans.actions:
<a name="l01444"></a>01444                     <span class="keywordflow">if</span> action.ident == <span class="stringliteral">&quot;z_stall&quot;</span> <span class="keywordflow">or</span> \
<a name="l01445"></a>01445                        action.ident == <span class="stringliteral">&quot;zz_recycleMandatoryQueue&quot;</span>:
<a name="l01446"></a>01446                         stall_action = <span class="keyword">True</span>
<a name="l01447"></a>01447 
<a name="l01448"></a>01448                 <span class="comment"># -- Print out &quot;actions/next-state&quot;</span>
<a name="l01449"></a>01449                 <span class="keywordflow">if</span> stall_action:
<a name="l01450"></a>01450                     <span class="keywordflow">if</span> state == active_state:
<a name="l01451"></a>01451                         color = <span class="stringliteral">&quot;#C0C000&quot;</span>
<a name="l01452"></a>01452                     <span class="keywordflow">else</span>:
<a name="l01453"></a>01453                         color = <span class="stringliteral">&quot;lightgrey&quot;</span>
<a name="l01454"></a>01454 
<a name="l01455"></a>01455                 <span class="keywordflow">elif</span> active_state <span class="keywordflow">and</span> next.ident == active_state.ident:
<a name="l01456"></a>01456                     color = <span class="stringliteral">&quot;aqua&quot;</span>
<a name="l01457"></a>01457                 <span class="keywordflow">elif</span> state == active_state:
<a name="l01458"></a>01458                     color = <span class="stringliteral">&quot;yellow&quot;</span>
<a name="l01459"></a>01459                 <span class="keywordflow">else</span>:
<a name="l01460"></a>01460                     color = <span class="stringliteral">&quot;white&quot;</span>
<a name="l01461"></a>01461 
<a name="l01462"></a>01462                 code(<span class="stringliteral">&apos;&lt;TD bgcolor=$color&gt;&apos;</span>)
<a name="l01463"></a>01463                 <span class="keywordflow">for</span> action <span class="keywordflow">in</span> trans.actions:
<a name="l01464"></a>01464                     href = <span class="stringliteral">&quot;%s_action_%s.html&quot;</span> % (self.ident, action.ident)
<a name="l01465"></a>01465                     ref = self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#acece50be46cc760cf24771b26ee54557">frameRef</a>(href, <span class="stringliteral">&quot;Status&quot;</span>, href, <span class="stringliteral">&quot;1&quot;</span>,
<a name="l01466"></a>01466                                         action.short)
<a name="l01467"></a>01467                     code(<span class="stringliteral">&apos;  $ref&apos;</span>)
<a name="l01468"></a>01468                 <span class="keywordflow">if</span> next != state:
<a name="l01469"></a>01469                     <span class="keywordflow">if</span> trans.actions:
<a name="l01470"></a>01470                         code(<span class="stringliteral">&apos;/&apos;</span>)
<a name="l01471"></a>01471                     click = <span class="stringliteral">&quot;%s_table_%s.html&quot;</span> % (self.ident, next.ident)
<a name="l01472"></a>01472                     over = <span class="stringliteral">&quot;%s_State_%s.html&quot;</span> % (self.ident, next.ident)
<a name="l01473"></a>01473                     ref = self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#acece50be46cc760cf24771b26ee54557">frameRef</a>(click, <span class="stringliteral">&quot;Table&quot;</span>, over, <span class="stringliteral">&quot;1&quot;</span>, next.short)
<a name="l01474"></a>01474                     code(<span class="stringliteral">&quot;$ref&quot;</span>)
<a name="l01475"></a>01475                 code(<span class="stringliteral">&quot;&lt;/TD&gt;&quot;</span>)
<a name="l01476"></a>01476 
<a name="l01477"></a>01477             <span class="comment"># -- Each row</span>
<a name="l01478"></a>01478             <span class="keywordflow">if</span> state == active_state:
<a name="l01479"></a>01479                 color = <span class="stringliteral">&quot;yellow&quot;</span>
<a name="l01480"></a>01480             <span class="keywordflow">else</span>:
<a name="l01481"></a>01481                 color = <span class="stringliteral">&quot;white&quot;</span>
<a name="l01482"></a>01482 
<a name="l01483"></a>01483             click = <span class="stringliteral">&quot;%s_table_%s.html&quot;</span> % (self.ident, state.ident)
<a name="l01484"></a>01484             over = <span class="stringliteral">&quot;%s_State_%s.html&quot;</span> % (self.ident, state.ident)
<a name="l01485"></a>01485             ref = self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#acece50be46cc760cf24771b26ee54557">frameRef</a>(click, <span class="stringliteral">&quot;Table&quot;</span>, over, <span class="stringliteral">&quot;1&quot;</span>, state.short)
<a name="l01486"></a>01486             code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l01487"></a>01487 <span class="stringliteral">  &lt;TH bgcolor=$color&gt;$ref&lt;/TH&gt;</span>
<a name="l01488"></a>01488 <span class="stringliteral">&lt;/TR&gt;</span>
<a name="l01489"></a>01489 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l01490"></a>01490         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l01491"></a>01491 <span class="stringliteral">&lt;!- Column footer-&gt;     </span>
<a name="l01492"></a>01492 <span class="stringliteral">&lt;TR&gt;</span>
<a name="l01493"></a>01493 <span class="stringliteral">  &lt;TH&gt; &lt;/TH&gt;</span>
<a name="l01494"></a>01494 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l01495"></a>01495 
<a name="l01496"></a>01496         <span class="keywordflow">for</span> event <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ad29858f6d8ab73f2970f41cb21a76b84">events</a>.itervalues():
<a name="l01497"></a>01497             href = <span class="stringliteral">&quot;%s_Event_%s.html&quot;</span> % (self.ident, event.ident)
<a name="l01498"></a>01498             ref = self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#acece50be46cc760cf24771b26ee54557">frameRef</a>(href, <span class="stringliteral">&quot;Status&quot;</span>, href, <span class="stringliteral">&quot;1&quot;</span>, event.short)
<a name="l01499"></a>01499             code(<span class="stringliteral">&apos;&lt;TH bgcolor=white&gt;$ref&lt;/TH&gt;&apos;</span>)
<a name="l01500"></a>01500         code(<span class="stringliteral">&apos;&apos;&apos;</span>
<a name="l01501"></a>01501 <span class="stringliteral">&lt;/TR&gt;</span>
<a name="l01502"></a>01502 <span class="stringliteral">&lt;/TABLE&gt;</span>
<a name="l01503"></a>01503 <span class="stringliteral">&lt;/BODY&gt;&lt;/HTML&gt;</span>
<a name="l01504"></a>01504 <span class="stringliteral">&apos;&apos;&apos;</span>)
<a name="l01505"></a>01505 
<a name="l01506"></a>01506 
<a name="l01507"></a>01507         <span class="keywordflow">if</span> active_state:
<a name="l01508"></a>01508             name = <span class="stringliteral">&quot;%s_table_%s.html&quot;</span> % (self.ident, active_state.ident)
<a name="l01509"></a>01509         <span class="keywordflow">else</span>:
<a name="l01510"></a>01510             name = <span class="stringliteral">&quot;%s_table.html&quot;</span> % self.ident
<a name="l01511"></a>01511         code.write(path, name)
<a name="l01512"></a>01512 
__all__ = [ <span class="stringliteral">&quot;StateMachine&quot;</span> ]
</pre></div></p>

</div>
</div>
<a class="anchor" id="a69d0582bde832d4ff45237ab5ff116bb"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::writeCodeFiles" ref="a69d0582bde832d4ff45237ab5ff116bb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def writeCodeFiles </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>includes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00170"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69d0582bde832d4ff45237ab5ff116bb">00170</a>                                             :
<a name="l00171"></a>00171         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a25a336d53100c6b055cd925314315411">printControllerPython</a>(path)
<a name="l00172"></a>00172         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a51c25c0a0d014fffeeea2ab7d9981ad6">printControllerHH</a>(path)
<a name="l00173"></a>00173         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ac7ff5b8d214aa5dc308c9bf318dbf803">printControllerCC</a>(path, includes)
<a name="l00174"></a>00174         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a077df50bb09dac9bc0a7fcac3703b74f">printCSwitch</a>(path)
<a name="l00175"></a>00175         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a152a40a5c142388231336a6935cfff80">printCWakeup</a>(path, includes)
<a name="l00176"></a>00176 
    <span class="keyword">def </span><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a25a336d53100c6b055cd925314315411">printControllerPython</a>(self, path):
</pre></div></p>

</div>
</div>
<a class="anchor" id="abc09a7197df5d7ef04e5cdfaa1139ead"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::writeHTMLFiles" ref="abc09a7197df5d7ef04e5cdfaa1139ead" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def writeHTMLFiles </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>path</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classslicc_1_1symbols_1_1Symbol_1_1Symbol.html#abc09a7197df5d7ef04e5cdfaa1139ead">Symbol</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l01347"></a><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#abc09a7197df5d7ef04e5cdfaa1139ead">01347</a>                                   :
<a name="l01348"></a>01348         <span class="comment"># Create table with no row hilighted</span>
<a name="l01349"></a>01349         self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#afb8052d1dbc1134969e50782472ae16e">printHTMLTransitions</a>(path, <span class="keywordtype">None</span>)
<a name="l01350"></a>01350 
<a name="l01351"></a>01351         <span class="comment"># Generate transition tables</span>
<a name="l01352"></a>01352         <span class="keywordflow">for</span> state <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#aa19be6305a5a4485e1e70de70ed7d677">states</a>.itervalues():
<a name="l01353"></a>01353             self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#afb8052d1dbc1134969e50782472ae16e">printHTMLTransitions</a>(path, state)
<a name="l01354"></a>01354 
<a name="l01355"></a>01355         <span class="comment"># Generate action descriptions</span>
<a name="l01356"></a>01356         <span class="keywordflow">for</span> action <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#af806efc6052edbc741683ec893bb2fe1">actions</a>.itervalues():
<a name="l01357"></a>01357             name = <span class="stringliteral">&quot;%s_action_%s.html&quot;</span> % (self.ident, action.ident)
<a name="l01358"></a>01358             code = html.createSymbol(action, <span class="stringliteral">&quot;Action&quot;</span>)
<a name="l01359"></a>01359             code.write(path, name)
<a name="l01360"></a>01360 
<a name="l01361"></a>01361         <span class="comment"># Generate state descriptions</span>
<a name="l01362"></a>01362         <span class="keywordflow">for</span> state <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#aa19be6305a5a4485e1e70de70ed7d677">states</a>.itervalues():
<a name="l01363"></a>01363             name = <span class="stringliteral">&quot;%s_State_%s.html&quot;</span> % (self.ident, state.ident)
<a name="l01364"></a>01364             code = html.createSymbol(state, <span class="stringliteral">&quot;State&quot;</span>)
<a name="l01365"></a>01365             code.write(path, name)
<a name="l01366"></a>01366 
<a name="l01367"></a>01367         <span class="comment"># Generate event descriptions</span>
<a name="l01368"></a>01368         <span class="keywordflow">for</span> event <span class="keywordflow">in</span> self.<a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ad29858f6d8ab73f2970f41cb21a76b84">events</a>.itervalues():
<a name="l01369"></a>01369             name = <span class="stringliteral">&quot;%s_Event_%s.html&quot;</span> % (self.ident, event.ident)
<a name="l01370"></a>01370             code = html.createSymbol(event, <span class="stringliteral">&quot;Event&quot;</span>)
<a name="l01371"></a>01371             code.write(path, name)
<a name="l01372"></a>01372 
    <span class="keyword">def </span><a class="code" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#afb8052d1dbc1134969e50782472ae16e">printHTMLTransitions</a>(self, path, active_state):
</pre></div></p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="af806efc6052edbc741683ec893bb2fe1"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::actions" ref="af806efc6052edbc741683ec893bb2fe1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#af806efc6052edbc741683ec893bb2fe1">actions</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae063a2c5f7b248003e02898444bff038"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::config_parameters" ref="ae063a2c5f7b248003e02898444bff038" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ae063a2c5f7b248003e02898444bff038">config_parameters</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9ed8d16c9ae7fae285dd2146c3159023"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::EntryType" ref="a9ed8d16c9ae7fae285dd2146c3159023" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a9ed8d16c9ae7fae285dd2146c3159023">EntryType</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad29858f6d8ab73f2970f41cb21a76b84"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::events" ref="ad29858f6d8ab73f2970f41cb21a76b84" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ad29858f6d8ab73f2970f41cb21a76b84">events</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2cb6c540c07a402759bab624703ecdb2"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::functions" ref="a2cb6c540c07a402759bab624703ecdb2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a2cb6c540c07a402759bab624703ecdb2">functions</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a06be0f234b0fd1771925b6d3b60b083d"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::in_ports" ref="a06be0f234b0fd1771925b6d3b60b083d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a06be0f234b0fd1771925b6d3b60b083d">in_ports</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a68a28c9ed35f4a725b22cbf60728cb23"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::objects" ref="a68a28c9ed35f4a725b22cbf60728cb23" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a68a28c9ed35f4a725b22cbf60728cb23">objects</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="af0b16110b614ead1551cff2bbce6286c"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::prefetchers" ref="af0b16110b614ead1551cff2bbce6286c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#af0b16110b614ead1551cff2bbce6286c">prefetchers</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a11a77bd4543c82e1dd96d60507dc74d2"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::request_types" ref="a11a77bd4543c82e1dd96d60507dc74d2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a11a77bd4543c82e1dd96d60507dc74d2">request_types</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa19be6305a5a4485e1e70de70ed7d677"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::states" ref="aa19be6305a5a4485e1e70de70ed7d677" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#aa19be6305a5a4485e1e70de70ed7d677">states</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab172ed3d3d31ff02fc5f798fe7e1bfb8"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::table" ref="ab172ed3d3d31ff02fc5f798fe7e1bfb8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#ab172ed3d3d31ff02fc5f798fe7e1bfb8">table</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a69c0c742629be6ee761c6b4d1c70cdbc"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::TBEType" ref="a69c0c742629be6ee761c6b4d1c70cdbc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a69c0c742629be6ee761c6b4d1c70cdbc">TBEType</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2594171e7c2a90ab61e43e1bc68adaf7"></a><!-- doxytag: member="slicc::symbols::StateMachine::StateMachine::transitions" ref="a2594171e7c2a90ab61e43e1bc68adaf7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classslicc_1_1symbols_1_1StateMachine_1_1StateMachine.html#a2594171e7c2a90ab61e43e1bc68adaf7">transitions</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>mem/slicc/symbols/<a class="el" href="StateMachine_8py.html">StateMachine.py</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
