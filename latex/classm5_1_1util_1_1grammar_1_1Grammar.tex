\hypertarget{classm5_1_1util_1_1grammar_1_1Grammar}{
\section{クラス Grammar}
\label{classm5_1_1util_1_1grammar_1_1Grammar}\index{m5::util::grammar::Grammar@{m5::util::grammar::Grammar}}
}
Grammarに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2cm]{classm5_1_1util_1_1grammar_1_1Grammar}
\end{center}
\end{figure}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classm5_1_1util_1_1grammar_1_1Grammar_afd19357236a0a2a502d0fe8f356219ba}{setupLexerFactory}
\item 
def \hyperlink{classm5_1_1util_1_1grammar_1_1Grammar_af6772e03881638eacde2754d2063ebed}{setupParserFactory}
\item 
def \hyperlink{classm5_1_1util_1_1grammar_1_1Grammar_a0a990b3ec3889d40889daca9ee5e4695}{\_\-\_\-getattr\_\-\_\-}
\item 
def \hyperlink{classm5_1_1util_1_1grammar_1_1Grammar_ab577300b152e1da25311efe2a260091d}{parse\_\-string}
\item 
def \hyperlink{classm5_1_1util_1_1grammar_1_1Grammar_a14401ccceaf67f005506de0a8320b089}{parse\_\-file}
\item 
def \hyperlink{classm5_1_1util_1_1grammar_1_1Grammar_ae0bf47d4531770b27bea904d5ed183f6}{p\_\-error}
\item 
def \hyperlink{classm5_1_1util_1_1grammar_1_1Grammar_aa36cfdc4c544b59202ebc57d37d62a31}{t\_\-error}
\end{DoxyCompactItemize}
\subsection*{Public 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classm5_1_1util_1_1grammar_1_1Grammar_aa7dd425f02ef2d1c008814a8335df842}{lex\_\-kwargs}
\item 
\hyperlink{classm5_1_1util_1_1grammar_1_1Grammar_a5549eb79d43c8f06fc1dc6b60bba9b89}{yacc\_\-kwargs}
\item 
\hyperlink{classm5_1_1util_1_1grammar_1_1Grammar_a142b9050c6ced35d0741a1f40adab3c6}{lexers}
\item 
\hyperlink{classm5_1_1util_1_1grammar_1_1Grammar_a81156b877ef6f8c77e202c4fcdde6c35}{lex}
\item 
\hyperlink{classm5_1_1util_1_1grammar_1_1Grammar_a92539ec58e9d3269a2e3d0c7e2d1cd44}{yacc}
\end{DoxyCompactItemize}


\subsection{関数}
\hypertarget{classm5_1_1util_1_1grammar_1_1Grammar_a0a990b3ec3889d40889daca9ee5e4695}{
\index{m5::util::grammar::Grammar@{m5::util::grammar::Grammar}!\_\-\_\-getattr\_\-\_\-@{\_\-\_\-getattr\_\-\_\-}}
\index{\_\-\_\-getattr\_\-\_\-@{\_\-\_\-getattr\_\-\_\-}!m5::util::grammar::Grammar@{m5::util::grammar::Grammar}}
\subsubsection[{\_\-\_\-getattr\_\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}def \_\-\_\-getattr\_\-\_\- ( {\em self}, \/   {\em attr})}}
\label{classm5_1_1util_1_1grammar_1_1Grammar_a0a990b3ec3889d40889daca9ee5e4695}



\begin{DoxyCode}
57                                :
58         if attr == 'lexers':
59             self.lexers = []
60             return self.lexers
61 
62         if attr == 'lex_kwargs':
63             self.setupLexerFactory()
64             return self.lex_kwargs
65 
66         if attr == 'yacc_kwargs':
67             self.setupParserFactory()
68             return self.yacc_kwargs
69 
70         if attr == 'lex':
71             self.lex = ply.lex.lex(module=self, **self.lex_kwargs)
72             return self.lex
73 
74         if attr == 'yacc':
75             self.yacc = ply.yacc.yacc(module=self, **self.yacc_kwargs)
76             return self.yacc
77 
78         if attr == 'current_lexer':
79             if not self.lexers:
80                 return None
81             return self.lexers[-1][0]
82 
83         if attr == 'current_source':
84             if not self.lexers:
85                 return '<none>'
86             return self.lexers[-1][1]
87 
88         if attr == 'current_line':
89             if not self.lexers:
90                 return -1
91             return self.current_lexer.lineno
92 
93         raise AttributeError, \
94             "'%s' object has no attribute '%s'" % (type(self), attr)
95 
    def parse_string(self, data, source='<string>', debug=None, tracking=0):
\end{DoxyCode}
\hypertarget{classm5_1_1util_1_1grammar_1_1Grammar_ae0bf47d4531770b27bea904d5ed183f6}{
\index{m5::util::grammar::Grammar@{m5::util::grammar::Grammar}!p\_\-error@{p\_\-error}}
\index{p\_\-error@{p\_\-error}!m5::util::grammar::Grammar@{m5::util::grammar::Grammar}}
\subsubsection[{p\_\-error}]{\setlength{\rightskip}{0pt plus 5cm}def p\_\-error ( {\em self}, \/   {\em t})}}
\label{classm5_1_1util_1_1grammar_1_1Grammar_ae0bf47d4531770b27bea904d5ed183f6}


\hyperlink{classisa__parser_1_1ISAParser_ae0bf47d4531770b27bea904d5ed183f6}{ISAParser}で再定義されています。


\begin{DoxyCode}
128                         :
129         if t:
130             msg = "Syntax error at %s:%d:%d\n>>%s<<" % \
131                   (self.current_source, t.lineno, t.lexpos + 1, t.value)
132         else:
133             msg = "Syntax error at end of %s" % (self.current_source, )
134         raise ParseError(msg, t)
135 
    def t_error(self, t):
\end{DoxyCode}
\hypertarget{classm5_1_1util_1_1grammar_1_1Grammar_a14401ccceaf67f005506de0a8320b089}{
\index{m5::util::grammar::Grammar@{m5::util::grammar::Grammar}!parse\_\-file@{parse\_\-file}}
\index{parse\_\-file@{parse\_\-file}!m5::util::grammar::Grammar@{m5::util::grammar::Grammar}}
\subsubsection[{parse\_\-file}]{\setlength{\rightskip}{0pt plus 5cm}def parse\_\-file ( {\em self}, \/   {\em f}, \/   {\em kwargs})}}
\label{classm5_1_1util_1_1grammar_1_1Grammar_a14401ccceaf67f005506de0a8320b089}



\begin{DoxyCode}
116                                      :
117         if isinstance(f, basestring):
118             source = f
119             f = file(f, 'r')
120         elif isinstance(f, file):
121             source = f.name
122         else:
123             raise AttributeError, \
124                 "argument must be either a string or file, was '%s'" % type(f)
125 
126         return self.parse_string(f.read(), source, **kwargs)
127 
    def p_error(self, t):
\end{DoxyCode}
\hypertarget{classm5_1_1util_1_1grammar_1_1Grammar_ab577300b152e1da25311efe2a260091d}{
\index{m5::util::grammar::Grammar@{m5::util::grammar::Grammar}!parse\_\-string@{parse\_\-string}}
\index{parse\_\-string@{parse\_\-string}!m5::util::grammar::Grammar@{m5::util::grammar::Grammar}}
\subsubsection[{parse\_\-string}]{\setlength{\rightskip}{0pt plus 5cm}def parse\_\-string ( {\em self}, \/   {\em data}, \/   {\em source} = {\ttfamily '$<$string$>$'}, \/   {\em debug} = {\ttfamily None}, \/   {\em tracking} = {\ttfamily 0})}}
\label{classm5_1_1util_1_1grammar_1_1Grammar_ab577300b152e1da25311efe2a260091d}



\begin{DoxyCode}
96                                                                            :
97         if not isinstance(data, basestring):
98             raise AttributeError, \
99                 "argument must be a string, was '%s'" % type(f)
100 
101         import new
102         lexer = self.lex.clone()
103         lexer.input(data)
104         self.lexers.append((lexer, source))
105         dict = {
106             'productions' : self.yacc.productions,
107             'action'      : self.yacc.action,
108             'goto'        : self.yacc.goto,
109             'errorfunc'   : self.yacc.errorfunc,
110             }
111         parser = new.instance(ply.yacc.LRParser, dict)
112         result = parser.parse(lexer=lexer, debug=debug, tracking=tracking)
113         self.lexers.pop()
114         return result
115 
    def parse_file(self, f, **kwargs):
\end{DoxyCode}
\hypertarget{classm5_1_1util_1_1grammar_1_1Grammar_afd19357236a0a2a502d0fe8f356219ba}{
\index{m5::util::grammar::Grammar@{m5::util::grammar::Grammar}!setupLexerFactory@{setupLexerFactory}}
\index{setupLexerFactory@{setupLexerFactory}!m5::util::grammar::Grammar@{m5::util::grammar::Grammar}}
\subsubsection[{setupLexerFactory}]{\setlength{\rightskip}{0pt plus 5cm}def setupLexerFactory ( {\em self}, \/   {\em kwargs})}}
\label{classm5_1_1util_1_1grammar_1_1Grammar_afd19357236a0a2a502d0fe8f356219ba}



\begin{DoxyCode}
38                                          :
39         if 'module' in kwargs:
40             raise AttributeError, "module is an illegal attribute"
41         self.lex_kwargs = kwargs
42 
    def setupParserFactory(self, **kwargs):
\end{DoxyCode}
\hypertarget{classm5_1_1util_1_1grammar_1_1Grammar_af6772e03881638eacde2754d2063ebed}{
\index{m5::util::grammar::Grammar@{m5::util::grammar::Grammar}!setupParserFactory@{setupParserFactory}}
\index{setupParserFactory@{setupParserFactory}!m5::util::grammar::Grammar@{m5::util::grammar::Grammar}}
\subsubsection[{setupParserFactory}]{\setlength{\rightskip}{0pt plus 5cm}def setupParserFactory ( {\em self}, \/   {\em kwargs})}}
\label{classm5_1_1util_1_1grammar_1_1Grammar_af6772e03881638eacde2754d2063ebed}



\begin{DoxyCode}
43                                           :
44         if 'module' in kwargs:
45             raise AttributeError, "module is an illegal attribute"
46 
47         if 'output' in kwargs:
48             dir,tab = os.path.split(output)
49             if not tab.endswith('.py'):
50                 raise AttributeError, \
51                     'The output file must end with .py'
52             kwargs['outputdir'] = dir
53             kwargs['tabmodule'] = tab[:-3]
54 
55         self.yacc_kwargs = kwargs
56 
    def __getattr__(self, attr):
\end{DoxyCode}
\hypertarget{classm5_1_1util_1_1grammar_1_1Grammar_aa36cfdc4c544b59202ebc57d37d62a31}{
\index{m5::util::grammar::Grammar@{m5::util::grammar::Grammar}!t\_\-error@{t\_\-error}}
\index{t\_\-error@{t\_\-error}!m5::util::grammar::Grammar@{m5::util::grammar::Grammar}}
\subsubsection[{t\_\-error}]{\setlength{\rightskip}{0pt plus 5cm}def t\_\-error ( {\em self}, \/   {\em t})}}
\label{classm5_1_1util_1_1grammar_1_1Grammar_aa36cfdc4c544b59202ebc57d37d62a31}


\hyperlink{classisa__parser_1_1ISAParser_aa36cfdc4c544b59202ebc57d37d62a31}{ISAParser}で再定義されています。


\begin{DoxyCode}
136                         :
137         msg = "Illegal character %s @ %d:%d" % \
138             (`t.value[0]`, t.lineno, t.lexpos)
139         raise ParseError(msg, t)
        raise ParseError(msg, t)
\end{DoxyCode}


\subsection{変数}
\hypertarget{classm5_1_1util_1_1grammar_1_1Grammar_a81156b877ef6f8c77e202c4fcdde6c35}{
\index{m5::util::grammar::Grammar@{m5::util::grammar::Grammar}!lex@{lex}}
\index{lex@{lex}!m5::util::grammar::Grammar@{m5::util::grammar::Grammar}}
\subsubsection[{lex}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lex}}}
\label{classm5_1_1util_1_1grammar_1_1Grammar_a81156b877ef6f8c77e202c4fcdde6c35}
\hypertarget{classm5_1_1util_1_1grammar_1_1Grammar_aa7dd425f02ef2d1c008814a8335df842}{
\index{m5::util::grammar::Grammar@{m5::util::grammar::Grammar}!lex\_\-kwargs@{lex\_\-kwargs}}
\index{lex\_\-kwargs@{lex\_\-kwargs}!m5::util::grammar::Grammar@{m5::util::grammar::Grammar}}
\subsubsection[{lex\_\-kwargs}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lex\_\-kwargs}}}
\label{classm5_1_1util_1_1grammar_1_1Grammar_aa7dd425f02ef2d1c008814a8335df842}
\hypertarget{classm5_1_1util_1_1grammar_1_1Grammar_a142b9050c6ced35d0741a1f40adab3c6}{
\index{m5::util::grammar::Grammar@{m5::util::grammar::Grammar}!lexers@{lexers}}
\index{lexers@{lexers}!m5::util::grammar::Grammar@{m5::util::grammar::Grammar}}
\subsubsection[{lexers}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lexers}}}
\label{classm5_1_1util_1_1grammar_1_1Grammar_a142b9050c6ced35d0741a1f40adab3c6}
\hypertarget{classm5_1_1util_1_1grammar_1_1Grammar_a92539ec58e9d3269a2e3d0c7e2d1cd44}{
\index{m5::util::grammar::Grammar@{m5::util::grammar::Grammar}!yacc@{yacc}}
\index{yacc@{yacc}!m5::util::grammar::Grammar@{m5::util::grammar::Grammar}}
\subsubsection[{yacc}]{\setlength{\rightskip}{0pt plus 5cm}{\bf yacc}}}
\label{classm5_1_1util_1_1grammar_1_1Grammar_a92539ec58e9d3269a2e3d0c7e2d1cd44}
\hypertarget{classm5_1_1util_1_1grammar_1_1Grammar_a5549eb79d43c8f06fc1dc6b60bba9b89}{
\index{m5::util::grammar::Grammar@{m5::util::grammar::Grammar}!yacc\_\-kwargs@{yacc\_\-kwargs}}
\index{yacc\_\-kwargs@{yacc\_\-kwargs}!m5::util::grammar::Grammar@{m5::util::grammar::Grammar}}
\subsubsection[{yacc\_\-kwargs}]{\setlength{\rightskip}{0pt plus 5cm}{\bf yacc\_\-kwargs}}}
\label{classm5_1_1util_1_1grammar_1_1Grammar_a5549eb79d43c8f06fc1dc6b60bba9b89}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
python/m5/util/\hyperlink{grammar_8py}{grammar.py}\end{DoxyCompactItemize}
