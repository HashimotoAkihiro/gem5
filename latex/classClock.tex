\hypertarget{classClock}{
\section{クラス Clock}
\label{classClock}\index{Clock@{Clock}}
}


{\ttfamily \#include $<$Clock.hh$>$}\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classClock_afe197343ad0f904373af54b8b995fc77}{Clock} (bool is\_\-in\_\-buf\_\-, bool is\_\-in\_\-shared\_\-switch\_\-, bool is\_\-out\_\-buf\_\-, bool is\_\-out\_\-shared\_\-switch\_\-, const \hyperlink{classOrionConfig}{OrionConfig} $\ast$orion\_\-cfg\_\-ptr\_\-)
\item 
\hyperlink{classClock_a4ae998d397f1e7cd192026fe38a071dd}{$\sim$Clock} ()
\item 
double \hyperlink{classClock_aaeb5ba44c1a68a29a876fa2f759c5280}{get\_\-dynamic\_\-energy} () const 
\item 
double \hyperlink{classClock_aeb5933543cfdeb1668baed5ce7c68351}{get\_\-static\_\-power} () const 
\end{DoxyCompactItemize}
\subsection*{Private メソッド}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classClock_a02fd73d861ef2e4aabb38c0c9ff82947}{init} ()
\item 
double \hyperlink{classClock_a1cea11df279df91aa67a782e8c0ccd1d}{calc\_\-cap\_\-pipe\_\-reg} ()
\end{DoxyCompactItemize}
\subsection*{Private 変数}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classClock_a5a84bce908e5182e8fc021d6560dd096}{m\_\-is\_\-in\_\-buf}
\item 
bool \hyperlink{classClock_a9fd4e7ce42d4a34ec79cdcc596ab8337}{m\_\-is\_\-in\_\-shared\_\-switch}
\item 
bool \hyperlink{classClock_a26ae4c597cc6adb05496a9793bcb0b1b}{m\_\-is\_\-out\_\-buf}
\item 
bool \hyperlink{classClock_a117999cd421d4f36ae63ed097adf937a}{m\_\-is\_\-out\_\-shared\_\-switch}
\item 
const \hyperlink{classOrionConfig}{OrionConfig} $\ast$ \hyperlink{classClock_a84de60ae1f7ca812df5347e27a658c77}{m\_\-orion\_\-cfg\_\-ptr}
\item 
const \hyperlink{classTechParameter}{TechParameter} $\ast$ \hyperlink{classClock_a11d1644aa2bfe0e16783dface6fadf13}{m\_\-tech\_\-param\_\-ptr}
\item 
double \hyperlink{classClock_a881412c2f26fab90d8d36fd6b8e73cbe}{m\_\-e\_\-pipe\_\-reg}
\item 
double \hyperlink{classClock_a4a99607352a2d52902a14e216398552c}{m\_\-e\_\-htree}
\item 
double \hyperlink{classClock_a16f0c9e5942378eab4d83da3c61aba7f}{m\_\-i\_\-static}
\end{DoxyCompactItemize}


\subsection{コンストラクタとデストラクタ}
\hypertarget{classClock_afe197343ad0f904373af54b8b995fc77}{
\index{Clock@{Clock}!Clock@{Clock}}
\index{Clock@{Clock}!Clock@{Clock}}
\subsubsection[{Clock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Clock} (bool {\em is\_\-in\_\-buf\_\-}, \/  bool {\em is\_\-in\_\-shared\_\-switch\_\-}, \/  bool {\em is\_\-out\_\-buf\_\-}, \/  bool {\em is\_\-out\_\-shared\_\-switch\_\-}, \/  const {\bf OrionConfig} $\ast$ {\em orion\_\-cfg\_\-ptr\_\-})}}
\label{classClock_afe197343ad0f904373af54b8b995fc77}



\begin{DoxyCode}
48 {
49     m_is_in_buf = is_in_buf_;
50     m_is_in_shared_switch = is_in_shared_switch_;
51     m_is_out_buf = is_out_buf_;
52     m_is_out_shared_switch = is_out_shared_switch_;
53     m_orion_cfg_ptr = orion_cfg_ptr_;
54 
55     init();
56 }
\end{DoxyCode}
\hypertarget{classClock_a4ae998d397f1e7cd192026fe38a071dd}{
\index{Clock@{Clock}!$\sim$Clock@{$\sim$Clock}}
\index{$\sim$Clock@{$\sim$Clock}!Clock@{Clock}}
\subsubsection[{$\sim$Clock}]{\setlength{\rightskip}{0pt plus 5cm}$\sim${\bf Clock} ()}}
\label{classClock_a4ae998d397f1e7cd192026fe38a071dd}



\begin{DoxyCode}
59 {}
\end{DoxyCode}


\subsection{関数}
\hypertarget{classClock_a1cea11df279df91aa67a782e8c0ccd1d}{
\index{Clock@{Clock}!calc\_\-cap\_\-pipe\_\-reg@{calc\_\-cap\_\-pipe\_\-reg}}
\index{calc\_\-cap\_\-pipe\_\-reg@{calc\_\-cap\_\-pipe\_\-reg}!Clock@{Clock}}
\subsubsection[{calc\_\-cap\_\-pipe\_\-reg}]{\setlength{\rightskip}{0pt plus 5cm}double calc\_\-cap\_\-pipe\_\-reg ()\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classClock_a1cea11df279df91aa67a782e8c0ccd1d}
\hypertarget{classClock_aaeb5ba44c1a68a29a876fa2f759c5280}{
\index{Clock@{Clock}!get\_\-dynamic\_\-energy@{get\_\-dynamic\_\-energy}}
\index{get\_\-dynamic\_\-energy@{get\_\-dynamic\_\-energy}!Clock@{Clock}}
\subsubsection[{get\_\-dynamic\_\-energy}]{\setlength{\rightskip}{0pt plus 5cm}double get\_\-dynamic\_\-energy () const}}
\label{classClock_aaeb5ba44c1a68a29a876fa2f759c5280}



\begin{DoxyCode}
62 {
63     return (m_e_pipe_reg + m_e_htree);
64 }
\end{DoxyCode}
\hypertarget{classClock_aeb5933543cfdeb1668baed5ce7c68351}{
\index{Clock@{Clock}!get\_\-static\_\-power@{get\_\-static\_\-power}}
\index{get\_\-static\_\-power@{get\_\-static\_\-power}!Clock@{Clock}}
\subsubsection[{get\_\-static\_\-power}]{\setlength{\rightskip}{0pt plus 5cm}double get\_\-static\_\-power () const}}
\label{classClock_aeb5933543cfdeb1668baed5ce7c68351}



\begin{DoxyCode}
67 {
68     double vdd = m_tech_param_ptr->get_vdd();
69     return (m_i_static*vdd);
70 }
\end{DoxyCode}
\hypertarget{classClock_a02fd73d861ef2e4aabb38c0c9ff82947}{
\index{Clock@{Clock}!init@{init}}
\index{init@{init}!Clock@{Clock}}
\subsubsection[{init}]{\setlength{\rightskip}{0pt plus 5cm}void init ()\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classClock_a02fd73d861ef2e4aabb38c0c9ff82947}



\begin{DoxyCode}
73 {
74     m_tech_param_ptr = m_orion_cfg_ptr->get_tech_param_ptr();
75 
76     double e_factor = m_tech_param_ptr->get_EnergyFactor();
77 
78     // Pipeline registers capacitive load on clock network
79     uint32_t num_in_port = m_orion_cfg_ptr->get_num_in_port();
80     uint32_t num_out_port = m_orion_cfg_ptr->get_num_out_port();
81     uint32_t num_vclass = m_orion_cfg_ptr->get_num_vclass();
82     uint32_t num_vchannel = m_orion_cfg_ptr->get_num_vchannel();
83     uint32_t flit_width = m_orion_cfg_ptr->get_flit_width();
84 
85     uint32_t num_pipe_reg = 0;
86 
87     // pipeline registers after the link traversal stage
88     num_pipe_reg += num_in_port*flit_width;
89 
90     // pipeline registers for input buffer
91     if (m_is_in_buf)
92     {
93         if (m_is_in_shared_switch)
94         {
95             num_pipe_reg += num_in_port*flit_width;
96         }
97         else
98         {
99             num_pipe_reg += num_in_port*num_vclass*num_vchannel*flit_width;
100         }
101     }
102 
103     // pipeline registers for crossbar
104     if (m_is_out_shared_switch)
105     {
106         num_pipe_reg += num_out_port*flit_width;
107     }
108     else
109     {
110         num_pipe_reg += num_out_port*num_vclass*num_vchannel*flit_width;
111     }
112 
113     // pipeline registers for output buffer
114     if (m_is_out_buf) // assume output buffers share links
115     {
116         num_pipe_reg += num_out_port*flit_width;
117     }
118 
119     double cap_clock = m_tech_param_ptr->get_ClockCap();
120     m_e_pipe_reg = num_pipe_reg*cap_clock*e_factor;
121 
122     //========================H_tree wiring load ========================*/
123     // The 1e-6 factor is to convert the "router_diagonal" back to meters.
124     // To be consistent we use micro-meters unit for our inputs, but 
125     // the functions, internally, use meters. */
126 
127     double i_static_nmos = 0;
128     double i_static_pmos = 0;
129 
130     bool is_htree = m_orion_cfg_ptr->get<bool>("IS_HTREE_CLOCK");
131     if(is_htree)
132     {
133         const string& width_spacing_model_str = m_orion_cfg_ptr->get<string>("WIR
      E_WIDTH_SPACING");
134         const string& buf_scheme_str = m_orion_cfg_ptr->get<string>("WIRE_BUFFERI
      NG_MODEL");
135         bool is_shielding = m_orion_cfg_ptr->get<bool>("WIRE_IS_SHIELDING");
136         Wire wire(width_spacing_model_str, buf_scheme_str, is_shielding, 
      m_tech_param_ptr);
137 
138         double router_diagonal = m_orion_cfg_ptr->get<double>("ROUTER_DIAGONAL");
      
139         double Clockwire = m_tech_param_ptr->get_ClockCap();
140 
141         double htree_clockcap;
142         int k;
143         double h;
144 
145         double BufferNMOSOffCurrent = m_tech_param_ptr->get_BufferNMOSOffCurrent(
      );
146         double BufferPMOSOffCurrent = m_tech_param_ptr->get_BufferPMOSOffCurrent(
      );
147 
148         if (m_tech_param_ptr->is_trans_type_hvt() || m_tech_param_ptr->
      is_trans_type_nvt())
149         {
150             htree_clockcap = (4+4+2+2)*(router_diagonal*1e-6)*Clockwire;
151 
152             wire.calc_opt_buffering(&k, &h, ((4+4+2+2)*router_diagonal*1e-6));
153             i_static_nmos = BufferNMOSOffCurrent*h*k*15;
154             i_static_pmos = BufferPMOSOffCurrent*h*k*15;
155         }
156         else
157         {
158             htree_clockcap = (8+4+4+4+4)*(router_diagonal*1e-6)*Clockwire;
159 
160             wire.calc_opt_buffering(&k, &h, ((4+4+2+2)*router_diagonal*1e-6));  
161             i_static_nmos = BufferNMOSOffCurrent*h*k*29;
162             i_static_pmos = BufferPMOSOffCurrent*h*k*15;
163         }
164 
165         m_e_htree = (htree_clockcap+cap_clock)*e_factor;
166     }
167     else
168     {
169         m_e_htree = 0;
170     }
171 
172     double SCALE_S = m_tech_param_ptr->get_SCALE_S();
173     double DFF_TAB_0 = m_tech_param_ptr->get_DFF_TAB(0);
174     double Wdff = m_tech_param_ptr->get_Wdff();
175     m_i_static = (((i_static_nmos+i_static_pmos)/2)/SCALE_S + (num_pipe_reg*DFF_T
      AB_0*Wdff));
176 }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classClock_a4a99607352a2d52902a14e216398552c}{
\index{Clock@{Clock}!m\_\-e\_\-htree@{m\_\-e\_\-htree}}
\index{m\_\-e\_\-htree@{m\_\-e\_\-htree}!Clock@{Clock}}
\subsubsection[{m\_\-e\_\-htree}]{\setlength{\rightskip}{0pt plus 5cm}double {\bf m\_\-e\_\-htree}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classClock_a4a99607352a2d52902a14e216398552c}
\hypertarget{classClock_a881412c2f26fab90d8d36fd6b8e73cbe}{
\index{Clock@{Clock}!m\_\-e\_\-pipe\_\-reg@{m\_\-e\_\-pipe\_\-reg}}
\index{m\_\-e\_\-pipe\_\-reg@{m\_\-e\_\-pipe\_\-reg}!Clock@{Clock}}
\subsubsection[{m\_\-e\_\-pipe\_\-reg}]{\setlength{\rightskip}{0pt plus 5cm}double {\bf m\_\-e\_\-pipe\_\-reg}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classClock_a881412c2f26fab90d8d36fd6b8e73cbe}
\hypertarget{classClock_a16f0c9e5942378eab4d83da3c61aba7f}{
\index{Clock@{Clock}!m\_\-i\_\-static@{m\_\-i\_\-static}}
\index{m\_\-i\_\-static@{m\_\-i\_\-static}!Clock@{Clock}}
\subsubsection[{m\_\-i\_\-static}]{\setlength{\rightskip}{0pt plus 5cm}double {\bf m\_\-i\_\-static}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classClock_a16f0c9e5942378eab4d83da3c61aba7f}
\hypertarget{classClock_a5a84bce908e5182e8fc021d6560dd096}{
\index{Clock@{Clock}!m\_\-is\_\-in\_\-buf@{m\_\-is\_\-in\_\-buf}}
\index{m\_\-is\_\-in\_\-buf@{m\_\-is\_\-in\_\-buf}!Clock@{Clock}}
\subsubsection[{m\_\-is\_\-in\_\-buf}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf m\_\-is\_\-in\_\-buf}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classClock_a5a84bce908e5182e8fc021d6560dd096}
\hypertarget{classClock_a9fd4e7ce42d4a34ec79cdcc596ab8337}{
\index{Clock@{Clock}!m\_\-is\_\-in\_\-shared\_\-switch@{m\_\-is\_\-in\_\-shared\_\-switch}}
\index{m\_\-is\_\-in\_\-shared\_\-switch@{m\_\-is\_\-in\_\-shared\_\-switch}!Clock@{Clock}}
\subsubsection[{m\_\-is\_\-in\_\-shared\_\-switch}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf m\_\-is\_\-in\_\-shared\_\-switch}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classClock_a9fd4e7ce42d4a34ec79cdcc596ab8337}
\hypertarget{classClock_a26ae4c597cc6adb05496a9793bcb0b1b}{
\index{Clock@{Clock}!m\_\-is\_\-out\_\-buf@{m\_\-is\_\-out\_\-buf}}
\index{m\_\-is\_\-out\_\-buf@{m\_\-is\_\-out\_\-buf}!Clock@{Clock}}
\subsubsection[{m\_\-is\_\-out\_\-buf}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf m\_\-is\_\-out\_\-buf}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classClock_a26ae4c597cc6adb05496a9793bcb0b1b}
\hypertarget{classClock_a117999cd421d4f36ae63ed097adf937a}{
\index{Clock@{Clock}!m\_\-is\_\-out\_\-shared\_\-switch@{m\_\-is\_\-out\_\-shared\_\-switch}}
\index{m\_\-is\_\-out\_\-shared\_\-switch@{m\_\-is\_\-out\_\-shared\_\-switch}!Clock@{Clock}}
\subsubsection[{m\_\-is\_\-out\_\-shared\_\-switch}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf m\_\-is\_\-out\_\-shared\_\-switch}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classClock_a117999cd421d4f36ae63ed097adf937a}
\hypertarget{classClock_a84de60ae1f7ca812df5347e27a658c77}{
\index{Clock@{Clock}!m\_\-orion\_\-cfg\_\-ptr@{m\_\-orion\_\-cfg\_\-ptr}}
\index{m\_\-orion\_\-cfg\_\-ptr@{m\_\-orion\_\-cfg\_\-ptr}!Clock@{Clock}}
\subsubsection[{m\_\-orion\_\-cfg\_\-ptr}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf OrionConfig}$\ast$ {\bf m\_\-orion\_\-cfg\_\-ptr}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classClock_a84de60ae1f7ca812df5347e27a658c77}
\hypertarget{classClock_a11d1644aa2bfe0e16783dface6fadf13}{
\index{Clock@{Clock}!m\_\-tech\_\-param\_\-ptr@{m\_\-tech\_\-param\_\-ptr}}
\index{m\_\-tech\_\-param\_\-ptr@{m\_\-tech\_\-param\_\-ptr}!Clock@{Clock}}
\subsubsection[{m\_\-tech\_\-param\_\-ptr}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf TechParameter}$\ast$ {\bf m\_\-tech\_\-param\_\-ptr}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classClock_a11d1644aa2bfe0e16783dface6fadf13}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
mem/ruby/network/orion/\hyperlink{Clock_8hh}{Clock.hh}\item 
mem/ruby/network/orion/\hyperlink{Clock_8cc}{Clock.cc}\end{DoxyCompactItemize}
