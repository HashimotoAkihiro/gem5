<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス MSHR</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>クラス MSHR</h1><!-- doxytag: class="MSHR" --><!-- doxytag: inherits="Packet::SenderState,Printable" -->
<p><code>#include &lt;<a class="el" href="mshr_8hh_source.html">mshr.hh</a>&gt;</code></p>
<div class="dynheader">
MSHRに対する継承グラフ</div>
<div class="dynsection">
 <div class="center">
  <img src="classMSHR.gif" usemap="#MSHR_map" alt=""/>
  <map id="MSHR_map" name="MSHR_map">
<area href="structPacket_1_1SenderState.html" alt="SenderState" shape="rect" coords="0,0,81,24"/>
<area href="classPrintable.html" alt="Printable" shape="rect" coords="91,0,172,24"/>
</map>
 </div>
</div>

<p><a href="classMSHR-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>構成</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR_1_1Target.html">Target</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR_1_1TargetList.html">TargetList</a></td></tr>
<tr><td colspan="2"><h2>Public 型</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classstd_1_1list.html">std::list</a>&lt; <a class="el" href="classMSHR.html">MSHR</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#ad558dcd5b6beb35c76724ab05f90a077">List</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef List::iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#af944263ff3027ab76cf07354d3a3f0c6">Iterator</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef List::const_iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a91267e1b9ec14096dd01900290a0ba15">ConstIterator</a></td></tr>
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#aa8e449288b878ff3ff7f286eb4d28b6a">needsExclusive</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a46636974002da45a91f2019ff47b5025">isPendingDirty</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a492fb8bb0290ba36d8d05d9f86b8e754">hasPostInvalidate</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a74c74cd6091f9e3e1523d3044ae9e9b4">hasPostDowngrade</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a70c74b2809417ea8701dd6ba9e34312d">isUncacheable</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#aea3dd4d447084fd85a6d737beefdc594">allocate</a> (<a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="el" href="classMSHR.html#a0bb77b4ba61e408313e1118250f9278c">addr</a>, int <a class="el" href="classMSHR.html#a439227feff9d7f55384e8780cfc2eb82">size</a>, <a class="el" href="classPacket.html">PacketPtr</a> pkt, <a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> when, <a class="el" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e">Counter</a> _order)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a89f5689827090dd1998bd3906e5454d1">markInService</a> (<a class="el" href="classPacket.html">PacketPtr</a> pkt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#aba459a1fb9c4f01c1911655c1db0e8e4">clearDownstreamPending</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a2d68be4fd20ffdd7f7a9b51579eacc2f">deallocate</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a84c132450efb0381229d03bba92d3d1d">allocateTarget</a> (<a class="el" href="classPacket.html">PacketPtr</a> target, <a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> when, <a class="el" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e">Counter</a> <a class="el" href="classMSHR.html#a268baba59d9078c070be7059fd90d9bc">order</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a7501595166901f8ddffcad271441cdf4">handleSnoop</a> (<a class="el" href="classPacket.html">PacketPtr</a> target, <a class="el" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e">Counter</a> <a class="el" href="classMSHR.html#a268baba59d9078c070be7059fd90d9bc">order</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#ac9bcc3c4e7dc13e809c1ddc72d1df7b2">MSHR</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#ab22af10809b116b3a7ecba267c795c8a">getNumTargets</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a9b007d67bfb5a6ff382a6d78ec08b3af">hasTargets</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMSHR_1_1Target.html">Target</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#ae068bab5bed8991efdfcd7829d9ca5e3">getTarget</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a660e7beed1d7d25852a9bc63d1f314b3">popTarget</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#aee2f7196808cfdd31122d93d11b633de">isForwardNoResponse</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a6b0d016d76a2a7570d1d51eaa3086845">promoteDeferredTargets</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#aff2dbaf9542ae841979f44a7af2fab0b">handleFill</a> (<a class="el" href="classPacket.html">Packet</a> *pkt, <a class="el" href="classCacheBlk.html">CacheBlk</a> *blk)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a8eb60d4744b6212ad749f3a586759266">checkFunctional</a> (<a class="el" href="classPacket.html">PacketPtr</a> pkt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#ad5a464e147506af89ea2778d731fe46f">print</a> (std::ostream &amp;os, int verbosity=0, const std::string &amp;prefix=&quot;&quot;) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#ae8a5b5e9e0e6be3b115ee77fa7b4d0c8">print</a> () const </td></tr>
<tr><td colspan="2"><h2>Public 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMSHRQueue.html">MSHRQueue</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a524ec1b0c7b11e23904171e42211679e">queue</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e">Counter</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a268baba59d9078c070be7059fd90d9bc">order</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a0bb77b4ba61e408313e1118250f9278c">addr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a439227feff9d7f55384e8780cfc2eb82">size</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a7f5c4fb6e9162689992ccd0cd7bce17b">inService</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a9b36b981f171b10bc35fbd5f79c3bae1">isForward</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a7ec985ceacc8f2c379dbccca0b2e0f44">threadNum</a></td></tr>
<tr><td colspan="2"><h2>Private 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a7cb362ebfb8750bd53baf5e8f96e00d0">readyTime</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a1f29f1c59828a6c0fecd2d33c992c8a4">_isUncacheable</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a5ea3d1c4eadd163d5f9bd35927044ed5">downstreamPending</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a2c6e696fb220ec9db6d72d614998c800">pendingDirty</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#af4c42f3027a6f426f32521a251fd724d">postInvalidate</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a361fccb7e46b8119bda165f80f2753ac">postDowngrade</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#abe222f6d3581e7920dcad5306cc906a8">data</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMSHR.html#af944263ff3027ab76cf07354d3a3f0c6">Iterator</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a6ff6af8d20926ded4e18e8f676784ff6">readyIter</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMSHR.html#af944263ff3027ab76cf07354d3a3f0c6">Iterator</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#afd1f01c04c4b2b391083188321ccd47e">allocIter</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMSHR_1_1TargetList.html">TargetList</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMSHR_1_1TargetList.html">TargetList</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#ab53d68e3f8e523ab7907b830d22bd35d">deferredTargets</a></td></tr>
<tr><td colspan="2"><h2>フレンド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMSHR.html#a3d057950abc60f70219bad94198fd407">MSHRQueue</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>説明</h2>
<p>Miss Status and handling <a class="el" href="classRegister.html">Register</a>. This class keeps all the information needed to handle a cache miss including a list of target requests. </p>
<dl class="see"><dt><b>参照:</b></dt><dd>gem5 Memory System </dd></dl>
<hr/><h2>型定義</h2>
<a class="anchor" id="a91267e1b9ec14096dd01900290a0ba15"></a><!-- doxytag: member="MSHR::ConstIterator" ref="a91267e1b9ec14096dd01900290a0ba15" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef List::const_iterator <a class="el" href="classMSHR.html#a91267e1b9ec14096dd01900290a0ba15">ConstIterator</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classMSHR.html">MSHR</a> list const_iterator. </p>

</div>
</div>
<a class="anchor" id="af944263ff3027ab76cf07354d3a3f0c6"></a><!-- doxytag: member="MSHR::Iterator" ref="af944263ff3027ab76cf07354d3a3f0c6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef List::iterator <a class="el" href="classMSHR.html#af944263ff3027ab76cf07354d3a3f0c6">Iterator</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classMSHR.html">MSHR</a> list iterator. </p>

</div>
</div>
<a class="anchor" id="ad558dcd5b6beb35c76724ab05f90a077"></a><!-- doxytag: member="MSHR::List" ref="ad558dcd5b6beb35c76724ab05f90a077" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classstd_1_1list.html">std::list</a>&lt;<a class="el" href="classMSHR.html">MSHR</a> *&gt; <a class="el" href="classstd_1_1list.html">List</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A list of MSHRs. </p>

</div>
</div>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="ac9bcc3c4e7dc13e809c1ddc72d1df7b2"></a><!-- doxytag: member="MSHR::MSHR" ref="ac9bcc3c4e7dc13e809c1ddc72d1df7b2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMSHR.html">MSHR</a> </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A simple constructor. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00064"></a>00064            : <a class="code" href="classMSHR.html#a7cb362ebfb8750bd53baf5e8f96e00d0">readyTime</a>(0), <a class="code" href="classMSHR.html#a1f29f1c59828a6c0fecd2d33c992c8a4">_isUncacheable</a>(<span class="keyword">false</span>), <a class="code" href="classMSHR.html#a5ea3d1c4eadd163d5f9bd35927044ed5">downstreamPending</a>(<span class="keyword">false</span>),
<a name="l00065"></a>00065                <a class="code" href="classMSHR.html#a2c6e696fb220ec9db6d72d614998c800">pendingDirty</a>(<span class="keyword">false</span>), <a class="code" href="classMSHR.html#af4c42f3027a6f426f32521a251fd724d">postInvalidate</a>(<span class="keyword">false</span>),
<a name="l00066"></a>00066                <a class="code" href="classMSHR.html#a361fccb7e46b8119bda165f80f2753ac">postDowngrade</a>(<span class="keyword">false</span>), <a class="code" href="classMSHR.html#a524ec1b0c7b11e23904171e42211679e">queue</a>(<a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>), <a class="code" href="classMSHR.html#a268baba59d9078c070be7059fd90d9bc">order</a>(0), <a class="code" href="classMSHR.html#a0bb77b4ba61e408313e1118250f9278c">addr</a>(0), <a class="code" href="classMSHR.html#a439227feff9d7f55384e8780cfc2eb82">size</a>(0),
<a name="l00067"></a>00067                <a class="code" href="classMSHR.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a>(<span class="keyword">false</span>), <a class="code" href="classMSHR.html#a7f5c4fb6e9162689992ccd0cd7bce17b">inService</a>(<span class="keyword">false</span>), <a class="code" href="classMSHR.html#a9b36b981f171b10bc35fbd5f79c3bae1">isForward</a>(<span class="keyword">false</span>),
<a name="l00068"></a>00068                <a class="code" href="classMSHR.html#a7ec985ceacc8f2c379dbccca0b2e0f44">threadNum</a>(<a class="code" href="base_2types_8hh.html#a192b210a26f038691d0f095d85dc0953">InvalidThreadID</a>), <a class="code" href="classMSHR.html#abe222f6d3581e7920dcad5306cc906a8">data</a>(<a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>)
<a name="l00069"></a>00069 {
<a name="l00070"></a>00070 }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="aea3dd4d447084fd85a6d737beefdc594"></a><!-- doxytag: member="MSHR::allocate" ref="aea3dd4d447084fd85a6d737beefdc594" args="(Addr addr, int size, PacketPtr pkt, Tick when, Counter _order)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void allocate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td>
          <td class="paramname"> <em>when</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e">Counter</a>&nbsp;</td>
          <td class="paramname"> <em>_order</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Allocate a miss to this <a class="el" href="classMSHR.html">MSHR</a>. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cmd</em>&nbsp;</td><td>The requesting command. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>The address of the miss. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>asid</em>&nbsp;</td><td>The address space id of the miss. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>The number of bytes to request. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pkt</em>&nbsp;</td><td>The original miss. </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00206"></a>00206 {
<a name="l00207"></a>00207     <a class="code" href="classMSHR.html#a0bb77b4ba61e408313e1118250f9278c">addr</a> = _addr;
<a name="l00208"></a>00208     <a class="code" href="classMSHR.html#a439227feff9d7f55384e8780cfc2eb82">size</a> = _size;
<a name="l00209"></a>00209     <a class="code" href="classMSHR.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a> = target-&gt;isSecure();
<a name="l00210"></a>00210     <a class="code" href="classMSHR.html#a7cb362ebfb8750bd53baf5e8f96e00d0">readyTime</a> = whenReady;
<a name="l00211"></a>00211     <a class="code" href="classMSHR.html#a268baba59d9078c070be7059fd90d9bc">order</a> = _order;
<a name="l00212"></a>00212     assert(target);
<a name="l00213"></a>00213     <a class="code" href="classMSHR.html#a9b36b981f171b10bc35fbd5f79c3bae1">isForward</a> = <span class="keyword">false</span>;
<a name="l00214"></a>00214     <a class="code" href="classMSHR.html#a1f29f1c59828a6c0fecd2d33c992c8a4">_isUncacheable</a> = target-&gt;req-&gt;isUncacheable();
<a name="l00215"></a>00215     <a class="code" href="classMSHR.html#a7f5c4fb6e9162689992ccd0cd7bce17b">inService</a> = <span class="keyword">false</span>;
<a name="l00216"></a>00216     <a class="code" href="classMSHR.html#a5ea3d1c4eadd163d5f9bd35927044ed5">downstreamPending</a> = <span class="keyword">false</span>;
<a name="l00217"></a>00217     <a class="code" href="classMSHR.html#a7ec985ceacc8f2c379dbccca0b2e0f44">threadNum</a> = 0;
<a name="l00218"></a>00218     assert(<a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.<a class="code" href="classMSHR_1_1TargetList.html#a69511868e2e419afd1e46803a3debe28">isReset</a>());
<a name="l00219"></a>00219     <span class="comment">// Don&apos;t know of a case where we would allocate a new MSHR for a</span>
<a name="l00220"></a>00220     <span class="comment">// snoop (mem-side request), so set source according to request here</span>
<a name="l00221"></a>00221     <a class="code" href="classMSHR_1_1Target.html#a176e1eca2d1e3d1c6a064340bc6a351e">Target::Source</a> source = (target-&gt;cmd == <a class="code" href="classMemCmd.html#a2afce0a47a93eee73a314d53e4890153af939e2f740d217d26e90546059593b39">MemCmd::HardPFReq</a>) ?
<a name="l00222"></a>00222         <a class="code" href="classMSHR_1_1Target.html#a176e1eca2d1e3d1c6a064340bc6a351ea63c0c00defe35fdf63539ff5fff462c7">Target::FromPrefetcher</a> : <a class="code" href="classMSHR_1_1Target.html#a176e1eca2d1e3d1c6a064340bc6a351ead87ddc653bf916825f87a824895e88f7">Target::FromCPU</a>;
<a name="l00223"></a>00223     <a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.<a class="code" href="classMSHR_1_1TargetList.html#af6d681685dd55314bc183bd3305b2a52">add</a>(target, whenReady, _order, source, <span class="keyword">true</span>);
<a name="l00224"></a>00224     assert(<a class="code" href="classMSHR.html#ab53d68e3f8e523ab7907b830d22bd35d">deferredTargets</a>.<a class="code" href="classMSHR_1_1TargetList.html#a69511868e2e419afd1e46803a3debe28">isReset</a>());
<a name="l00225"></a>00225     <a class="code" href="classMSHR.html#abe222f6d3581e7920dcad5306cc906a8">data</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00226"></a>00226 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a84c132450efb0381229d03bba92d3d1d"></a><!-- doxytag: member="MSHR::allocateTarget" ref="a84c132450efb0381229d03bba92d3d1d" args="(PacketPtr target, Tick when, Counter order)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void allocateTarget </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td>
          <td class="paramname"> <em>when</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e">Counter</a>&nbsp;</td>
          <td class="paramname"> <em>order</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Add a request to the list of targets. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>target</em>&nbsp;</td><td>The target. </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00278"></a>00278 {
<a name="l00279"></a>00279     <span class="comment">// if there&apos;s a request already in service for this MSHR, we will</span>
<a name="l00280"></a>00280     <span class="comment">// have to defer the new target until after the response if any of</span>
<a name="l00281"></a>00281     <span class="comment">// the following are true:</span>
<a name="l00282"></a>00282     <span class="comment">// - there are other targets already deferred</span>
<a name="l00283"></a>00283     <span class="comment">// - there&apos;s a pending invalidate to be applied after the response</span>
<a name="l00284"></a>00284     <span class="comment">//   comes back (but before this target is processed)</span>
<a name="l00285"></a>00285     <span class="comment">// - this target requires an exclusive block and either we&apos;re not</span>
<a name="l00286"></a>00286     <span class="comment">//   getting an exclusive block back or we have already snooped</span>
<a name="l00287"></a>00287     <span class="comment">//   another read request that will downgrade our exclusive block</span>
<a name="l00288"></a>00288     <span class="comment">//   to shared</span>
<a name="l00289"></a>00289 
<a name="l00290"></a>00290     <span class="comment">// assume we&apos;d never issue a prefetch when we&apos;ve got an</span>
<a name="l00291"></a>00291     <span class="comment">// outstanding miss</span>
<a name="l00292"></a>00292     assert(pkt-&gt;cmd != <a class="code" href="classMemCmd.html#a2afce0a47a93eee73a314d53e4890153af939e2f740d217d26e90546059593b39">MemCmd::HardPFReq</a>);
<a name="l00293"></a>00293 
<a name="l00294"></a>00294     <span class="keywordflow">if</span> (<a class="code" href="classMSHR.html#a7f5c4fb6e9162689992ccd0cd7bce17b">inService</a> &amp;&amp;
<a name="l00295"></a>00295         (!<a class="code" href="classMSHR.html#ab53d68e3f8e523ab7907b830d22bd35d">deferredTargets</a>.empty() || <a class="code" href="classMSHR.html#a492fb8bb0290ba36d8d05d9f86b8e754">hasPostInvalidate</a>() ||
<a name="l00296"></a>00296          (pkt-&gt;needsExclusive() &amp;&amp;
<a name="l00297"></a>00297           (!<a class="code" href="classMSHR.html#a46636974002da45a91f2019ff47b5025">isPendingDirty</a>() || <a class="code" href="classMSHR.html#a74c74cd6091f9e3e1523d3044ae9e9b4">hasPostDowngrade</a>() || <a class="code" href="classMSHR.html#a9b36b981f171b10bc35fbd5f79c3bae1">isForward</a>)))) {
<a name="l00298"></a>00298         <span class="comment">// need to put on deferred list</span>
<a name="l00299"></a>00299         <span class="keywordflow">if</span> (<a class="code" href="classMSHR.html#a492fb8bb0290ba36d8d05d9f86b8e754">hasPostInvalidate</a>())
<a name="l00300"></a>00300             <a class="code" href="mshr_8cc.html#a6955a2cb81cc3df61959850986f4bbad">replaceUpgrade</a>(pkt);
<a name="l00301"></a>00301         <a class="code" href="classMSHR.html#ab53d68e3f8e523ab7907b830d22bd35d">deferredTargets</a>.<a class="code" href="classMSHR_1_1TargetList.html#af6d681685dd55314bc183bd3305b2a52">add</a>(pkt, whenReady, _order, <a class="code" href="classMSHR_1_1Target.html#a176e1eca2d1e3d1c6a064340bc6a351ead87ddc653bf916825f87a824895e88f7">Target::FromCPU</a>, <span class="keyword">true</span>);
<a name="l00302"></a>00302     } <span class="keywordflow">else</span> {
<a name="l00303"></a>00303         <span class="comment">// No request outstanding, or still OK to append to</span>
<a name="l00304"></a>00304         <span class="comment">// outstanding request: append to regular target list.  Only</span>
<a name="l00305"></a>00305         <span class="comment">// mark pending if current request hasn&apos;t been issued yet</span>
<a name="l00306"></a>00306         <span class="comment">// (isn&apos;t in service).</span>
<a name="l00307"></a>00307         <a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.<a class="code" href="classMSHR_1_1TargetList.html#af6d681685dd55314bc183bd3305b2a52">add</a>(pkt, whenReady, _order, <a class="code" href="classMSHR_1_1Target.html#a176e1eca2d1e3d1c6a064340bc6a351ead87ddc653bf916825f87a824895e88f7">Target::FromCPU</a>, !<a class="code" href="classMSHR.html#a7f5c4fb6e9162689992ccd0cd7bce17b">inService</a>);
<a name="l00308"></a>00308     }
<a name="l00309"></a>00309 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8eb60d4744b6212ad749f3a586759266"></a><!-- doxytag: member="MSHR::checkFunctional" ref="a8eb60d4744b6212ad749f3a586759266" args="(PacketPtr pkt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool checkFunctional </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pkt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00439"></a>00439 {
<a name="l00440"></a>00440     <span class="comment">// For printing, we treat the MSHR as a whole as single entity.</span>
<a name="l00441"></a>00441     <span class="comment">// For other requests, we iterate over the individual targets</span>
<a name="l00442"></a>00442     <span class="comment">// since that&apos;s where the actual data lies.</span>
<a name="l00443"></a>00443     <span class="keywordflow">if</span> (pkt-&gt;<a class="code" href="classPacket.html#ae56bb417ddf53e85cb389267590fe969">isPrint</a>()) {
<a name="l00444"></a>00444         pkt-&gt;<a class="code" href="classPacket.html#a77410f93ce8057ce67882c121ac2e667">checkFunctional</a>(<span class="keyword">this</span>, <a class="code" href="classMSHR.html#a0bb77b4ba61e408313e1118250f9278c">addr</a>, <a class="code" href="classMSHR.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a>, <a class="code" href="classMSHR.html#a439227feff9d7f55384e8780cfc2eb82">size</a>, <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>);
<a name="l00445"></a>00445         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00446"></a>00446     } <span class="keywordflow">else</span> {
<a name="l00447"></a>00447         <span class="keywordflow">return</span> (<a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.<a class="code" href="classMSHR_1_1TargetList.html#a8eb60d4744b6212ad749f3a586759266">checkFunctional</a>(pkt) ||
<a name="l00448"></a>00448                 <a class="code" href="classMSHR.html#ab53d68e3f8e523ab7907b830d22bd35d">deferredTargets</a>.<a class="code" href="classMSHR_1_1TargetList.html#a8eb60d4744b6212ad749f3a586759266">checkFunctional</a>(pkt));
<a name="l00449"></a>00449     }
<a name="l00450"></a>00450 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aba459a1fb9c4f01c1911655c1db0e8e4"></a><!-- doxytag: member="MSHR::clearDownstreamPending" ref="aba459a1fb9c4f01c1911655c1db0e8e4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clearDownstreamPending </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00231"></a>00231 {
<a name="l00232"></a>00232     assert(<a class="code" href="classMSHR.html#a5ea3d1c4eadd163d5f9bd35927044ed5">downstreamPending</a>);
<a name="l00233"></a>00233     <a class="code" href="classMSHR.html#a5ea3d1c4eadd163d5f9bd35927044ed5">downstreamPending</a> = <span class="keyword">false</span>;
<a name="l00234"></a>00234     <span class="comment">// recursively clear flag on any MSHRs we will be forwarding</span>
<a name="l00235"></a>00235     <span class="comment">// responses to</span>
<a name="l00236"></a>00236     <a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.<a class="code" href="classMSHR_1_1TargetList.html#aba459a1fb9c4f01c1911655c1db0e8e4">clearDownstreamPending</a>();
<a name="l00237"></a>00237 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2d68be4fd20ffdd7f7a9b51579eacc2f"></a><!-- doxytag: member="MSHR::deallocate" ref="a2d68be4fd20ffdd7f7a9b51579eacc2f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void deallocate </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Mark this <a class="el" href="classMSHR.html">MSHR</a> as free. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00266"></a>00266 {
<a name="l00267"></a>00267     assert(<a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.empty());
<a name="l00268"></a>00268     <a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.<a class="code" href="classMSHR_1_1TargetList.html#a62735a8af8d77cbab59807d09d9d57df">resetFlags</a>();
<a name="l00269"></a>00269     assert(<a class="code" href="classMSHR.html#ab53d68e3f8e523ab7907b830d22bd35d">deferredTargets</a>.<a class="code" href="classMSHR_1_1TargetList.html#a69511868e2e419afd1e46803a3debe28">isReset</a>());
<a name="l00270"></a>00270     <a class="code" href="classMSHR.html#a7f5c4fb6e9162689992ccd0cd7bce17b">inService</a> = <span class="keyword">false</span>;
<a name="l00271"></a>00271 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab22af10809b116b3a7ecba267c795c8a"></a><!-- doxytag: member="MSHR::getNumTargets" ref="ab22af10809b116b3a7ecba267c795c8a" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getNumTargets </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the current number of allocated targets. </p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>The current number of allocated targets. </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00252"></a>00252     { <span class="keywordflow">return</span> <a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.size() + <a class="code" href="classMSHR.html#ab53d68e3f8e523ab7907b830d22bd35d">deferredTargets</a>.size(); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae068bab5bed8991efdfcd7829d9ca5e3"></a><!-- doxytag: member="MSHR::getTarget" ref="ae068bab5bed8991efdfcd7829d9ca5e3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMSHR_1_1Target.html">Target</a>* getTarget </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns a reference to the first target. </p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>A pointer to the first target. </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00265"></a>00265     {
<a name="l00266"></a>00266         assert(<a class="code" href="classMSHR.html#a9b007d67bfb5a6ff382a6d78ec08b3af">hasTargets</a>());
<a name="l00267"></a>00267         <span class="keywordflow">return</span> &amp;<a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.front();
<a name="l00268"></a>00268     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aff2dbaf9542ae841979f44a7af2fab0b"></a><!-- doxytag: member="MSHR::handleFill" ref="aff2dbaf9542ae841979f44a7af2fab0b" args="(Packet *pkt, CacheBlk *blk)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handleFill </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">Packet</a> *&nbsp;</td>
          <td class="paramname"> <em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCacheBlk.html">CacheBlk</a> *&nbsp;</td>
          <td class="paramname"> <em>blk</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00412"></a>00412 {
<a name="l00413"></a>00413     <span class="keywordflow">if</span> (!pkt-&gt;<a class="code" href="classPacket.html#a298938bfa2613955b13f630ce2b591e4">sharedAsserted</a>()
<a name="l00414"></a>00414         &amp;&amp; !(<a class="code" href="classMSHR.html#a492fb8bb0290ba36d8d05d9f86b8e754">hasPostInvalidate</a>() || <a class="code" href="classMSHR.html#a74c74cd6091f9e3e1523d3044ae9e9b4">hasPostDowngrade</a>())
<a name="l00415"></a>00415         &amp;&amp; <a class="code" href="classMSHR.html#ab53d68e3f8e523ab7907b830d22bd35d">deferredTargets</a>.<a class="code" href="classMSHR_1_1TargetList.html#a546082d646a7cf9bda71269184b937b9">needsExclusive</a>) {
<a name="l00416"></a>00416         <span class="comment">// We got an exclusive response, but we have deferred targets</span>
<a name="l00417"></a>00417         <span class="comment">// which are waiting to request an exclusive copy (not because</span>
<a name="l00418"></a>00418         <span class="comment">// of a pending invalidate).  This can happen if the original</span>
<a name="l00419"></a>00419         <span class="comment">// request was for a read-only (non-exclusive) block, but we</span>
<a name="l00420"></a>00420         <span class="comment">// got an exclusive copy anyway because of the E part of the</span>
<a name="l00421"></a>00421         <span class="comment">// MOESI/MESI protocol.  Since we got the exclusive copy</span>
<a name="l00422"></a>00422         <span class="comment">// there&apos;s no need to defer the targets, so move them up to</span>
<a name="l00423"></a>00423         <span class="comment">// the regular target list.</span>
<a name="l00424"></a>00424         assert(!<a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.<a class="code" href="classMSHR_1_1TargetList.html#a546082d646a7cf9bda71269184b937b9">needsExclusive</a>);
<a name="l00425"></a>00425         <a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.<a class="code" href="classMSHR_1_1TargetList.html#a546082d646a7cf9bda71269184b937b9">needsExclusive</a> = <span class="keyword">true</span>;
<a name="l00426"></a>00426         <span class="comment">// if any of the deferred targets were upper-level cache</span>
<a name="l00427"></a>00427         <span class="comment">// requests marked downstreamPending, need to clear that</span>
<a name="l00428"></a>00428         assert(!<a class="code" href="classMSHR.html#a5ea3d1c4eadd163d5f9bd35927044ed5">downstreamPending</a>);  <span class="comment">// not pending here anymore</span>
<a name="l00429"></a>00429         <a class="code" href="classMSHR.html#ab53d68e3f8e523ab7907b830d22bd35d">deferredTargets</a>.<a class="code" href="classMSHR_1_1TargetList.html#aba459a1fb9c4f01c1911655c1db0e8e4">clearDownstreamPending</a>();
<a name="l00430"></a>00430         <span class="comment">// this clears out deferredTargets too</span>
<a name="l00431"></a>00431         <a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.splice(<a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.end(), <a class="code" href="classMSHR.html#ab53d68e3f8e523ab7907b830d22bd35d">deferredTargets</a>);
<a name="l00432"></a>00432         <a class="code" href="classMSHR.html#ab53d68e3f8e523ab7907b830d22bd35d">deferredTargets</a>.<a class="code" href="classMSHR_1_1TargetList.html#a62735a8af8d77cbab59807d09d9d57df">resetFlags</a>();
<a name="l00433"></a>00433     }
<a name="l00434"></a>00434 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7501595166901f8ddffcad271441cdf4"></a><!-- doxytag: member="MSHR::handleSnoop" ref="a7501595166901f8ddffcad271441cdf4" args="(PacketPtr target, Counter order)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool handleSnoop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e">Counter</a>&nbsp;</td>
          <td class="paramname"> <em>order</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00313"></a>00313 {
<a name="l00314"></a>00314     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classCache.html">Cache</a>, <span class="stringliteral">&quot;%s for %s address %x size %d\n&quot;</span>, __func__,
<a name="l00315"></a>00315             pkt-&gt;cmdString(), pkt-&gt;getAddr(), pkt-&gt;getSize());
<a name="l00316"></a>00316     <span class="keywordflow">if</span> (!<a class="code" href="classMSHR.html#a7f5c4fb6e9162689992ccd0cd7bce17b">inService</a> || (pkt-&gt;isExpressSnoop() &amp;&amp; <a class="code" href="classMSHR.html#a5ea3d1c4eadd163d5f9bd35927044ed5">downstreamPending</a>)) {
<a name="l00317"></a>00317         <span class="comment">// Request has not been issued yet, or it&apos;s been issued</span>
<a name="l00318"></a>00318         <span class="comment">// locally but is buffered unissued at some downstream cache</span>
<a name="l00319"></a>00319         <span class="comment">// which is forwarding us this snoop.  Either way, the packet</span>
<a name="l00320"></a>00320         <span class="comment">// we&apos;re snooping logically precedes this MSHR&apos;s request, so</span>
<a name="l00321"></a>00321         <span class="comment">// the snoop has no impact on the MSHR, but must be processed</span>
<a name="l00322"></a>00322         <span class="comment">// in the standard way by the cache.  The only exception is</span>
<a name="l00323"></a>00323         <span class="comment">// that if we&apos;re an L2+ cache buffering an UpgradeReq from a</span>
<a name="l00324"></a>00324         <span class="comment">// higher-level cache, and the snoop is invalidating, then our</span>
<a name="l00325"></a>00325         <span class="comment">// buffered upgrades must be converted to read exclusives,</span>
<a name="l00326"></a>00326         <span class="comment">// since the upper-level cache no longer has a valid copy.</span>
<a name="l00327"></a>00327         <span class="comment">// That is, even though the upper-level cache got out on its</span>
<a name="l00328"></a>00328         <span class="comment">// local bus first, some other invalidating transaction</span>
<a name="l00329"></a>00329         <span class="comment">// reached the global bus before the upgrade did.</span>
<a name="l00330"></a>00330         <span class="keywordflow">if</span> (pkt-&gt;needsExclusive()) {
<a name="l00331"></a>00331             <a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.<a class="code" href="classMSHR_1_1TargetList.html#a98242f31aa34a435ca066c5e35413a2c">replaceUpgrades</a>();
<a name="l00332"></a>00332             <a class="code" href="classMSHR.html#ab53d68e3f8e523ab7907b830d22bd35d">deferredTargets</a>.<a class="code" href="classMSHR_1_1TargetList.html#a98242f31aa34a435ca066c5e35413a2c">replaceUpgrades</a>();
<a name="l00333"></a>00333         }
<a name="l00334"></a>00334 
<a name="l00335"></a>00335         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00336"></a>00336     }
<a name="l00337"></a>00337 
<a name="l00338"></a>00338     <span class="comment">// From here on down, the request issued by this MSHR logically</span>
<a name="l00339"></a>00339     <span class="comment">// precedes the request we&apos;re snooping.</span>
<a name="l00340"></a>00340     <span class="keywordflow">if</span> (pkt-&gt;needsExclusive()) {
<a name="l00341"></a>00341         <span class="comment">// snooped request still precedes the re-request we&apos;ll have to</span>
<a name="l00342"></a>00342         <span class="comment">// issue for deferred targets, if any...</span>
<a name="l00343"></a>00343         <a class="code" href="classMSHR.html#ab53d68e3f8e523ab7907b830d22bd35d">deferredTargets</a>.<a class="code" href="classMSHR_1_1TargetList.html#a98242f31aa34a435ca066c5e35413a2c">replaceUpgrades</a>();
<a name="l00344"></a>00344     }
<a name="l00345"></a>00345 
<a name="l00346"></a>00346     <span class="keywordflow">if</span> (<a class="code" href="classMSHR.html#a492fb8bb0290ba36d8d05d9f86b8e754">hasPostInvalidate</a>()) {
<a name="l00347"></a>00347         <span class="comment">// a prior snoop has already appended an invalidation, so</span>
<a name="l00348"></a>00348         <span class="comment">// logically we don&apos;t have the block anymore; no need for</span>
<a name="l00349"></a>00349         <span class="comment">// further snooping.</span>
<a name="l00350"></a>00350         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00351"></a>00351     }
<a name="l00352"></a>00352 
<a name="l00353"></a>00353     <span class="keywordflow">if</span> (<a class="code" href="classMSHR.html#a46636974002da45a91f2019ff47b5025">isPendingDirty</a>() || pkt-&gt;isInvalidate()) {
<a name="l00354"></a>00354         <span class="comment">// We need to save and replay the packet in two cases:</span>
<a name="l00355"></a>00355         <span class="comment">// 1. We&apos;re awaiting an exclusive copy, so ownership is pending,</span>
<a name="l00356"></a>00356         <span class="comment">//    and we need to respond after we receive data.</span>
<a name="l00357"></a>00357         <span class="comment">// 2. It&apos;s an invalidation (e.g., UpgradeReq), and we need</span>
<a name="l00358"></a>00358         <span class="comment">//    to forward the snoop up the hierarchy after the current</span>
<a name="l00359"></a>00359         <span class="comment">//    transaction completes.</span>
<a name="l00360"></a>00360         
<a name="l00361"></a>00361         <span class="comment">// Actual target device (typ. a memory) will delete the</span>
<a name="l00362"></a>00362         <span class="comment">// packet on reception, so we need to save a copy here.</span>
<a name="l00363"></a>00363         <a class="code" href="classPacket.html">PacketPtr</a> cp_pkt = <span class="keyword">new</span> <a class="code" href="classPacket.html">Packet</a>(pkt, <span class="keyword">true</span>);
<a name="l00364"></a>00364         <a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.<a class="code" href="classMSHR_1_1TargetList.html#af6d681685dd55314bc183bd3305b2a52">add</a>(cp_pkt, <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>(), _order, <a class="code" href="classMSHR_1_1Target.html#a176e1eca2d1e3d1c6a064340bc6a351eaa3edd380596b2be1636c4a8b7f18611f">Target::FromSnoop</a>,
<a name="l00365"></a>00365                      <a class="code" href="classMSHR.html#a5ea3d1c4eadd163d5f9bd35927044ed5">downstreamPending</a> &amp;&amp; <a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.<a class="code" href="classMSHR_1_1TargetList.html#a546082d646a7cf9bda71269184b937b9">needsExclusive</a>);
<a name="l00366"></a>00366 
<a name="l00367"></a>00367         <span class="keywordflow">if</span> (<a class="code" href="classMSHR.html#a46636974002da45a91f2019ff47b5025">isPendingDirty</a>()) {
<a name="l00368"></a>00368             pkt-&gt;assertMemInhibit();
<a name="l00369"></a>00369             pkt-&gt;setSupplyExclusive();
<a name="l00370"></a>00370         }
<a name="l00371"></a>00371 
<a name="l00372"></a>00372         <span class="keywordflow">if</span> (pkt-&gt;needsExclusive()) {
<a name="l00373"></a>00373             <span class="comment">// This transaction will take away our pending copy</span>
<a name="l00374"></a>00374             <a class="code" href="classMSHR.html#af4c42f3027a6f426f32521a251fd724d">postInvalidate</a> = <span class="keyword">true</span>;
<a name="l00375"></a>00375         }
<a name="l00376"></a>00376     }
<a name="l00377"></a>00377 
<a name="l00378"></a>00378     <span class="keywordflow">if</span> (!pkt-&gt;needsExclusive()) {
<a name="l00379"></a>00379         <span class="comment">// This transaction will get a read-shared copy, downgrading</span>
<a name="l00380"></a>00380         <span class="comment">// our copy if we had an exclusive one</span>
<a name="l00381"></a>00381         <a class="code" href="classMSHR.html#a361fccb7e46b8119bda165f80f2753ac">postDowngrade</a> = <span class="keyword">true</span>;
<a name="l00382"></a>00382         pkt-&gt;assertShared();
<a name="l00383"></a>00383     }
<a name="l00384"></a>00384 
<a name="l00385"></a>00385     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00386"></a>00386 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a74c74cd6091f9e3e1523d3044ae9e9b4"></a><!-- doxytag: member="MSHR::hasPostDowngrade" ref="a74c74cd6091f9e3e1523d3044ae9e9b4" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool hasPostDowngrade </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00183"></a>00183                                   {
<a name="l00184"></a>00184         assert(<a class="code" href="classMSHR.html#a7f5c4fb6e9162689992ccd0cd7bce17b">inService</a>); <span class="keywordflow">return</span> <a class="code" href="classMSHR.html#a361fccb7e46b8119bda165f80f2753ac">postDowngrade</a>;
<a name="l00185"></a>00185     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a492fb8bb0290ba36d8d05d9f86b8e754"></a><!-- doxytag: member="MSHR::hasPostInvalidate" ref="a492fb8bb0290ba36d8d05d9f86b8e754" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool hasPostInvalidate </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00179"></a>00179                                    {
<a name="l00180"></a>00180         assert(<a class="code" href="classMSHR.html#a7f5c4fb6e9162689992ccd0cd7bce17b">inService</a>); <span class="keywordflow">return</span> <a class="code" href="classMSHR.html#af4c42f3027a6f426f32521a251fd724d">postInvalidate</a>;
<a name="l00181"></a>00181     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9b007d67bfb5a6ff382a6d78ec08b3af"></a><!-- doxytag: member="MSHR::hasTargets" ref="a9b007d67bfb5a6ff382a6d78ec08b3af" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool hasTargets </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns true if there are targets left. </p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>true if there are targets </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00258"></a>00258 { <span class="keywordflow">return</span> !<a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.empty(); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aee2f7196808cfdd31122d93d11b633de"></a><!-- doxytag: member="MSHR::isForwardNoResponse" ref="aee2f7196808cfdd31122d93d11b633de" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool isForwardNoResponse </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00279"></a>00279     {
<a name="l00280"></a>00280         <span class="keywordflow">if</span> (<a class="code" href="classMSHR.html#ab22af10809b116b3a7ecba267c795c8a">getNumTargets</a>() != 1)
<a name="l00281"></a>00281             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00282"></a>00282         <span class="keyword">const</span> Target *tgt = &amp;<a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.front();
<a name="l00283"></a>00283         <span class="keywordflow">return</span> tgt-&gt;source == <a class="code" href="classMSHR_1_1Target.html#a176e1eca2d1e3d1c6a064340bc6a351ead87ddc653bf916825f87a824895e88f7">Target::FromCPU</a> &amp;&amp; !tgt-&gt;pkt-&gt;needsResponse();
<a name="l00284"></a>00284     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a46636974002da45a91f2019ff47b5025"></a><!-- doxytag: member="MSHR::isPendingDirty" ref="a46636974002da45a91f2019ff47b5025" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool isPendingDirty </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00175"></a>00175                                 {
<a name="l00176"></a>00176         assert(<a class="code" href="classMSHR.html#a7f5c4fb6e9162689992ccd0cd7bce17b">inService</a>); <span class="keywordflow">return</span> <a class="code" href="classMSHR.html#a2c6e696fb220ec9db6d72d614998c800">pendingDirty</a>;
<a name="l00177"></a>00177     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a70c74b2809417ea8701dd6ba9e34312d"></a><!-- doxytag: member="MSHR::isUncacheable" ref="a70c74b2809417ea8701dd6ba9e34312d" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool isUncacheable </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00215"></a>00215 { <span class="keywordflow">return</span> <a class="code" href="classMSHR.html#a1f29f1c59828a6c0fecd2d33c992c8a4">_isUncacheable</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a89f5689827090dd1998bd3906e5454d1"></a><!-- doxytag: member="MSHR::markInService" ref="a89f5689827090dd1998bd3906e5454d1" args="(PacketPtr pkt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool markInService </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pkt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00241"></a>00241 {
<a name="l00242"></a>00242     assert(!<a class="code" href="classMSHR.html#a7f5c4fb6e9162689992ccd0cd7bce17b">inService</a>);
<a name="l00243"></a>00243     <span class="keywordflow">if</span> (<a class="code" href="classMSHR.html#aee2f7196808cfdd31122d93d11b633de">isForwardNoResponse</a>()) {
<a name="l00244"></a>00244         <span class="comment">// we just forwarded the request packet &amp; don&apos;t expect a</span>
<a name="l00245"></a>00245         <span class="comment">// response, so get rid of it</span>
<a name="l00246"></a>00246         assert(<a class="code" href="classMSHR.html#ab22af10809b116b3a7ecba267c795c8a">getNumTargets</a>() == 1);
<a name="l00247"></a>00247         <a class="code" href="classMSHR.html#a660e7beed1d7d25852a9bc63d1f314b3">popTarget</a>();
<a name="l00248"></a>00248         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00249"></a>00249     }
<a name="l00250"></a>00250     <a class="code" href="classMSHR.html#a7f5c4fb6e9162689992ccd0cd7bce17b">inService</a> = <span class="keyword">true</span>;
<a name="l00251"></a>00251     <a class="code" href="classMSHR.html#a2c6e696fb220ec9db6d72d614998c800">pendingDirty</a> = (<a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.<a class="code" href="classMSHR_1_1TargetList.html#a546082d646a7cf9bda71269184b937b9">needsExclusive</a> ||
<a name="l00252"></a>00252                     (!pkt-&gt;<a class="code" href="classPacket.html#a298938bfa2613955b13f630ce2b591e4">sharedAsserted</a>() &amp;&amp; pkt-&gt;<a class="code" href="classPacket.html#a9693a1ffeda326646443ab2a2a92be41">memInhibitAsserted</a>()));
<a name="l00253"></a>00253     <a class="code" href="classMSHR.html#af4c42f3027a6f426f32521a251fd724d">postInvalidate</a> = <a class="code" href="classMSHR.html#a361fccb7e46b8119bda165f80f2753ac">postDowngrade</a> = <span class="keyword">false</span>;
<a name="l00254"></a>00254 
<a name="l00255"></a>00255     <span class="keywordflow">if</span> (!<a class="code" href="classMSHR.html#a5ea3d1c4eadd163d5f9bd35927044ed5">downstreamPending</a>) {
<a name="l00256"></a>00256         <span class="comment">// let upstream caches know that the request has made it to a</span>
<a name="l00257"></a>00257         <span class="comment">// level where it&apos;s going to get a response</span>
<a name="l00258"></a>00258         <a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.<a class="code" href="classMSHR_1_1TargetList.html#aba459a1fb9c4f01c1911655c1db0e8e4">clearDownstreamPending</a>();
<a name="l00259"></a>00259     }
<a name="l00260"></a>00260     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00261"></a>00261 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa8e449288b878ff3ff7f286eb4d28b6a"></a><!-- doxytag: member="MSHR::needsExclusive" ref="aa8e449288b878ff3ff7f286eb4d28b6a" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool needsExclusive </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The pending* and post* flags are only valid if inService is true. Using the accessor functions lets us detect if these flags are accessed improperly. True if we need to get an exclusive copy of the block. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00173"></a>00173 { <span class="keywordflow">return</span> <a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.<a class="code" href="classMSHR_1_1TargetList.html#a546082d646a7cf9bda71269184b937b9">needsExclusive</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a660e7beed1d7d25852a9bc63d1f314b3"></a><!-- doxytag: member="MSHR::popTarget" ref="a660e7beed1d7d25852a9bc63d1f314b3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void popTarget </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pop first target. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00274"></a>00274     {
<a name="l00275"></a>00275         <a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.pop_front();
<a name="l00276"></a>00276     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae8a5b5e9e0e6be3b115ee77fa7b4d0c8"></a><!-- doxytag: member="MSHR::print" ref="ae8a5b5e9e0e6be3b115ee77fa7b4d0c8" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string print </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A no-args wrapper of print(std::ostream...) meant to be invoked from DPRINTFs avoiding string overheads in fast mode</p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>string with mshr fields + [deferred]targets </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00478"></a>00478 {
<a name="l00479"></a>00479     ostringstream str;
<a name="l00480"></a>00480     <a class="code" href="classMSHR.html#ae8a5b5e9e0e6be3b115ee77fa7b4d0c8">print</a>(str);
<a name="l00481"></a>00481     <span class="keywordflow">return</span> str.str();
<a name="l00482"></a>00482 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad5a464e147506af89ea2778d731fe46f"></a><!-- doxytag: member="MSHR::print" ref="ad5a464e147506af89ea2778d731fe46f" args="(std::ostream &amp;os, int verbosity=0, const std::string &amp;prefix=&quot;&quot;) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>os</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>verbosity</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>prefix</em> = <code>&quot;&quot;</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Prints the contents of this <a class="el" href="classMSHR.html">MSHR</a> for debugging. </p>

<p><a class="el" href="classPrintable.html#a3be2c5a60e9670becc3259fc689833c5">Printable</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00455"></a>00455 {
<a name="l00456"></a>00456     <a class="code" href="cprintf_8hh.html#ab172c0b086575bda3d04daee7df17da1">ccprintf</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>, <span class="stringliteral">&quot;%s[%x:%x](%s) %s %s %s state: %s %s %s %s %s\n&quot;</span>,
<a name="l00457"></a>00457              prefix, <a class="code" href="classMSHR.html#a0bb77b4ba61e408313e1118250f9278c">addr</a>, <a class="code" href="classMSHR.html#a0bb77b4ba61e408313e1118250f9278c">addr</a>+<a class="code" href="classMSHR.html#a439227feff9d7f55384e8780cfc2eb82">size</a>-1,
<a name="l00458"></a>00458              <a class="code" href="classMSHR.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a> ? <span class="stringliteral">&quot;s&quot;</span> : <span class="stringliteral">&quot;ns&quot;</span>,
<a name="l00459"></a>00459              <a class="code" href="classMSHR.html#a9b36b981f171b10bc35fbd5f79c3bae1">isForward</a> ? <span class="stringliteral">&quot;Forward&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,
<a name="l00460"></a>00460              <a class="code" href="classMSHR.html#aee2f7196808cfdd31122d93d11b633de">isForwardNoResponse</a>() ? <span class="stringliteral">&quot;ForwNoResp&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,
<a name="l00461"></a>00461              <a class="code" href="classMSHR.html#aa8e449288b878ff3ff7f286eb4d28b6a">needsExclusive</a>() ? <span class="stringliteral">&quot;Excl&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,
<a name="l00462"></a>00462              <a class="code" href="classMSHR.html#a1f29f1c59828a6c0fecd2d33c992c8a4">_isUncacheable</a> ? <span class="stringliteral">&quot;Unc&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,
<a name="l00463"></a>00463              <a class="code" href="classMSHR.html#a7f5c4fb6e9162689992ccd0cd7bce17b">inService</a> ? <span class="stringliteral">&quot;InSvc&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,
<a name="l00464"></a>00464              <a class="code" href="classMSHR.html#a5ea3d1c4eadd163d5f9bd35927044ed5">downstreamPending</a> ? <span class="stringliteral">&quot;DwnPend&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,
<a name="l00465"></a>00465              <a class="code" href="classMSHR.html#a492fb8bb0290ba36d8d05d9f86b8e754">hasPostInvalidate</a>() ? <span class="stringliteral">&quot;PostInv&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,
<a name="l00466"></a>00466              <a class="code" href="classMSHR.html#a74c74cd6091f9e3e1523d3044ae9e9b4">hasPostDowngrade</a>() ? <span class="stringliteral">&quot;PostDowngr&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);
<a name="l00467"></a>00467 
<a name="l00468"></a>00468     <a class="code" href="cprintf_8hh.html#ab172c0b086575bda3d04daee7df17da1">ccprintf</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>, <span class="stringliteral">&quot;%s  Targets:\n&quot;</span>, prefix);
<a name="l00469"></a>00469     <a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.<a class="code" href="classMSHR_1_1TargetList.html#a5cabeee2cd7415822c9088b27b3b9436">print</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>, verbosity, prefix + <span class="stringliteral">&quot;    &quot;</span>);
<a name="l00470"></a>00470     <span class="keywordflow">if</span> (!<a class="code" href="classMSHR.html#ab53d68e3f8e523ab7907b830d22bd35d">deferredTargets</a>.empty()) {
<a name="l00471"></a>00471         <a class="code" href="cprintf_8hh.html#ab172c0b086575bda3d04daee7df17da1">ccprintf</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>, <span class="stringliteral">&quot;%s  Deferred Targets:\n&quot;</span>, prefix);
<a name="l00472"></a>00472         <a class="code" href="classMSHR.html#ab53d68e3f8e523ab7907b830d22bd35d">deferredTargets</a>.<a class="code" href="classMSHR_1_1TargetList.html#a5cabeee2cd7415822c9088b27b3b9436">print</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>, verbosity, prefix + <span class="stringliteral">&quot;      &quot;</span>);
<a name="l00473"></a>00473     }
<a name="l00474"></a>00474 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6b0d016d76a2a7570d1d51eaa3086845"></a><!-- doxytag: member="MSHR::promoteDeferredTargets" ref="a6b0d016d76a2a7570d1d51eaa3086845" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool promoteDeferredTargets </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00391"></a>00391 {
<a name="l00392"></a>00392     assert(<a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.empty());
<a name="l00393"></a>00393     <span class="keywordflow">if</span> (<a class="code" href="classMSHR.html#ab53d68e3f8e523ab7907b830d22bd35d">deferredTargets</a>.empty()) {
<a name="l00394"></a>00394         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00395"></a>00395     }
<a name="l00396"></a>00396 
<a name="l00397"></a>00397     <span class="comment">// swap targets &amp; deferredTargets lists</span>
<a name="l00398"></a>00398     std::swap(<a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>, <a class="code" href="classMSHR.html#ab53d68e3f8e523ab7907b830d22bd35d">deferredTargets</a>);
<a name="l00399"></a>00399 
<a name="l00400"></a>00400     <span class="comment">// clear deferredTargets flags</span>
<a name="l00401"></a>00401     <a class="code" href="classMSHR.html#ab53d68e3f8e523ab7907b830d22bd35d">deferredTargets</a>.<a class="code" href="classMSHR_1_1TargetList.html#a62735a8af8d77cbab59807d09d9d57df">resetFlags</a>();
<a name="l00402"></a>00402 
<a name="l00403"></a>00403     <a class="code" href="classMSHR.html#a268baba59d9078c070be7059fd90d9bc">order</a> = <a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.front().order;
<a name="l00404"></a>00404     <a class="code" href="classMSHR.html#a7cb362ebfb8750bd53baf5e8f96e00d0">readyTime</a> = std::max(<a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>(), <a class="code" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a>.front().readyTime);
<a name="l00405"></a>00405 
<a name="l00406"></a>00406     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00407"></a>00407 }
</pre></div></p>

</div>
</div>
<hr/><h2>フレンドと関連する関数</h2>
<a class="anchor" id="a3d057950abc60f70219bad94198fd407"></a><!-- doxytag: member="MSHR::MSHRQueue" ref="a3d057950abc60f70219bad94198fd407" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classMSHRQueue.html">MSHRQueue</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Consider the <a class="el" href="classMSHRQueue.html">MSHRQueue</a> a friend to avoid making everything public </p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="a1f29f1c59828a6c0fecd2d33c992c8a4"></a><!-- doxytag: member="MSHR::_isUncacheable" ref="a1f29f1c59828a6c0fecd2d33c992c8a4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classMSHR.html#a1f29f1c59828a6c0fecd2d33c992c8a4">_isUncacheable</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>True if the request is uncacheable </p>

</div>
</div>
<a class="anchor" id="a0bb77b4ba61e408313e1118250f9278c"></a><!-- doxytag: member="MSHR::addr" ref="a0bb77b4ba61e408313e1118250f9278c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="el" href="classMSHR.html#a0bb77b4ba61e408313e1118250f9278c">addr</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classAddress.html">Address</a> of the request. </p>

</div>
</div>
<a class="anchor" id="afd1f01c04c4b2b391083188321ccd47e"></a><!-- doxytag: member="MSHR::allocIter" ref="afd1f01c04c4b2b391083188321ccd47e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMSHR.html#af944263ff3027ab76cf07354d3a3f0c6">Iterator</a> <a class="el" href="classMSHR.html#afd1f01c04c4b2b391083188321ccd47e">allocIter</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pointer to this <a class="el" href="classMSHR.html">MSHR</a> on the allocated list. </p>
<dl class="see"><dt><b>参照:</b></dt><dd>MissQueue, <a class="el" href="classMSHRQueue.html#a4bac1d00b2059c983d4afaf4df82f4ac">MSHRQueue::allocatedList</a> </dd></dl>

</div>
</div>
<a class="anchor" id="abe222f6d3581e7920dcad5306cc906a8"></a><!-- doxytag: member="MSHR::data" ref="abe222f6d3581e7920dcad5306cc906a8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* <a class="el" href="classMSHR.html#abe222f6d3581e7920dcad5306cc906a8">data</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Data buffer (if needed). Currently used only for pending upgrade handling. </p>

</div>
</div>
<a class="anchor" id="ab53d68e3f8e523ab7907b830d22bd35d"></a><!-- doxytag: member="MSHR::deferredTargets" ref="ab53d68e3f8e523ab7907b830d22bd35d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMSHR_1_1TargetList.html">TargetList</a> <a class="el" href="classMSHR.html#ab53d68e3f8e523ab7907b830d22bd35d">deferredTargets</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a5ea3d1c4eadd163d5f9bd35927044ed5"></a><!-- doxytag: member="MSHR::downstreamPending" ref="a5ea3d1c4eadd163d5f9bd35927044ed5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classMSHR.html#a5ea3d1c4eadd163d5f9bd35927044ed5">downstreamPending</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Flag set by downstream caches </p>

</div>
</div>
<a class="anchor" id="a7f5c4fb6e9162689992ccd0cd7bce17b"></a><!-- doxytag: member="MSHR::inService" ref="a7f5c4fb6e9162689992ccd0cd7bce17b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classMSHR.html#a7f5c4fb6e9162689992ccd0cd7bce17b">inService</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>True if the request has been sent to the bus. </p>

</div>
</div>
<a class="anchor" id="a9b36b981f171b10bc35fbd5f79c3bae1"></a><!-- doxytag: member="MSHR::isForward" ref="a9b36b981f171b10bc35fbd5f79c3bae1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classMSHR.html#a9b36b981f171b10bc35fbd5f79c3bae1">isForward</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>True if the request is just a simple forward from an upper level </p>

</div>
</div>
<a class="anchor" id="a62bc84f4251f16cf0cfa0f8d96e00c37"></a><!-- doxytag: member="MSHR::isSecure" ref="a62bc84f4251f16cf0cfa0f8d96e00c37" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classMSHR.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>True if the request targets the secure memory space. </p>

</div>
</div>
<a class="anchor" id="a268baba59d9078c070be7059fd90d9bc"></a><!-- doxytag: member="MSHR::order" ref="a268baba59d9078c070be7059fd90d9bc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e">Counter</a> <a class="el" href="classMSHR.html#a268baba59d9078c070be7059fd90d9bc">order</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Order number assigned by the miss queue. </p>

</div>
</div>
<a class="anchor" id="a2c6e696fb220ec9db6d72d614998c800"></a><!-- doxytag: member="MSHR::pendingDirty" ref="a2c6e696fb220ec9db6d72d614998c800" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classMSHR.html#a2c6e696fb220ec9db6d72d614998c800">pendingDirty</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Will we have a dirty copy after this request? </p>

</div>
</div>
<a class="anchor" id="a361fccb7e46b8119bda165f80f2753ac"></a><!-- doxytag: member="MSHR::postDowngrade" ref="a361fccb7e46b8119bda165f80f2753ac" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classMSHR.html#a361fccb7e46b8119bda165f80f2753ac">postDowngrade</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Did we snoop a read while waiting for data? </p>

</div>
</div>
<a class="anchor" id="af4c42f3027a6f426f32521a251fd724d"></a><!-- doxytag: member="MSHR::postInvalidate" ref="af4c42f3027a6f426f32521a251fd724d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classMSHR.html#af4c42f3027a6f426f32521a251fd724d">postInvalidate</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Did we snoop an invalidate while waiting for data? </p>

</div>
</div>
<a class="anchor" id="a524ec1b0c7b11e23904171e42211679e"></a><!-- doxytag: member="MSHR::queue" ref="a524ec1b0c7b11e23904171e42211679e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMSHRQueue.html">MSHRQueue</a>* <a class="el" href="classMSHR.html#a524ec1b0c7b11e23904171e42211679e">queue</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pointer to queue containing this <a class="el" href="classMSHR.html">MSHR</a>. </p>

</div>
</div>
<a class="anchor" id="a6ff6af8d20926ded4e18e8f676784ff6"></a><!-- doxytag: member="MSHR::readyIter" ref="a6ff6af8d20926ded4e18e8f676784ff6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMSHR.html#af944263ff3027ab76cf07354d3a3f0c6">Iterator</a> <a class="el" href="classMSHR.html#a6ff6af8d20926ded4e18e8f676784ff6">readyIter</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pointer to this <a class="el" href="classMSHR.html">MSHR</a> on the ready list. </p>
<dl class="see"><dt><b>参照:</b></dt><dd>MissQueue, <a class="el" href="classMSHRQueue.html#ab090e7fb494c0f9af81d19d1959684a0">MSHRQueue::readyList</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a7cb362ebfb8750bd53baf5e8f96e00d0"></a><!-- doxytag: member="MSHR::readyTime" ref="a7cb362ebfb8750bd53baf5e8f96e00d0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="el" href="classMSHR.html#a7cb362ebfb8750bd53baf5e8f96e00d0">readyTime</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Cycle when ready to issue </p>

</div>
</div>
<a class="anchor" id="a439227feff9d7f55384e8780cfc2eb82"></a><!-- doxytag: member="MSHR::size" ref="a439227feff9d7f55384e8780cfc2eb82" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classMSHR.html#a439227feff9d7f55384e8780cfc2eb82">size</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Size of the request. </p>

</div>
</div>
<a class="anchor" id="ac0771ddfd90fe1ffe0d2da35dad7dd36"></a><!-- doxytag: member="MSHR::targets" ref="ac0771ddfd90fe1ffe0d2da35dad7dd36" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMSHR_1_1TargetList.html">TargetList</a> <a class="el" href="classMSHR.html#ac0771ddfd90fe1ffe0d2da35dad7dd36">targets</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>List of all requests that match the address </p>

</div>
</div>
<a class="anchor" id="a7ec985ceacc8f2c379dbccca0b2e0f44"></a><!-- doxytag: member="MSHR::threadNum" ref="a7ec985ceacc8f2c379dbccca0b2e0f44" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> <a class="el" href="classMSHR.html#a7ec985ceacc8f2c379dbccca0b2e0f44">threadNum</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Thread number of the miss. </p>

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>mem/cache/<a class="el" href="mshr_8hh_source.html">mshr.hh</a></li>
<li>mem/cache/<a class="el" href="mshr_8cc.html">mshr.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
