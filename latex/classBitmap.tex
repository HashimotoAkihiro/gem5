\hypertarget{classBitmap}{
\section{クラス Bitmap}
\label{classBitmap}\index{Bitmap@{Bitmap}}
}


{\ttfamily \#include $<$bitmap.hh$>$}\subsection*{構成}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structBitmap_1_1Header}{Header}
\item 
struct \hyperlink{structBitmap_1_1Info}{Info}
\item 
struct \hyperlink{structBitmap_1_1Magic}{Magic}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classBitmap_a9ff596a4368fb81b7df59656b9090f99}{Bitmap} (\hyperlink{classVideoConvert_a46c8a310cf4c094f8c80e1cb8dc1f911}{VideoConvert::Mode} \hyperlink{classBitmap_a04dbb1673fce676e164d63b34f561279}{mode}, uint16\_\-t w, uint16\_\-t h, uint8\_\-t $\ast$d)
\item 
\hyperlink{classBitmap_a674e993ff780ec078ec387614ba2a230}{$\sim$Bitmap} ()
\item 
void \hyperlink{classBitmap_a22136d203fcf8657490b1844688596c4}{rawData} (uint8\_\-t $\ast$d)
\item 
void \hyperlink{classBitmap_a45a62e70b01ae32e2815ab26cc8219f5}{write} (std::ostream $\ast$bmp) const 
\item 
uint64\_\-t \hyperlink{classBitmap_a3ef96fae93207d460641b50add069399}{getHash} () const 
\end{DoxyCompactItemize}
\subsection*{Private 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classVideoConvert_a46c8a310cf4c094f8c80e1cb8dc1f911}{VideoConvert::Mode} \hyperlink{classBitmap_a04dbb1673fce676e164d63b34f561279}{mode}
\item 
uint16\_\-t \hyperlink{classBitmap_a81c9f8d0b8c3b49d770be14dbe9f0d37}{height}
\item 
uint16\_\-t \hyperlink{classBitmap_ad0eab1042455a2067c812ab8071d5376}{width}
\item 
uint8\_\-t $\ast$ \hyperlink{classBitmap_abe222f6d3581e7920dcad5306cc906a8}{data}
\item 
\hyperlink{classVideoConvert}{VideoConvert} \hyperlink{classBitmap_ae8e736e4fe6c1de602b7f4ac03d7d7a7}{vc}
\item 
char $\ast$ \hyperlink{classBitmap_a5ae882f02e94df66131138319e712c96}{headerBuffer}
\end{DoxyCompactItemize}
\subsection*{Static Private 変数}
\begin{DoxyCompactItemize}
\item 
static const size\_\-t \hyperlink{classBitmap_aa659ac1e8f41fbbeff951253e434390f}{sizeofHeaderBuffer}
\end{DoxyCompactItemize}


\subsection{コンストラクタとデストラクタ}
\hypertarget{classBitmap_a9ff596a4368fb81b7df59656b9090f99}{
\index{Bitmap@{Bitmap}!Bitmap@{Bitmap}}
\index{Bitmap@{Bitmap}!Bitmap@{Bitmap}}
\subsubsection[{Bitmap}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Bitmap} ({\bf VideoConvert::Mode} {\em mode}, \/  uint16\_\-t {\em w}, \/  uint16\_\-t {\em h}, \/  uint8\_\-t $\ast$ {\em d})}}
\label{classBitmap_a9ff596a4368fb81b7df59656b9090f99}
Create a \hyperlink{classBitmap}{Bitmap} creator that takes data in the given mode \& size and outputs to an fstream 
\begin{DoxyParams}{引数}
\item[{\em mode}]the type of data that is being provided \item[{\em h}]the hight of the image \item[{\em w}]the width of the image \item[{\em d}]the data for the image in mode \end{DoxyParams}



\begin{DoxyCode}
52     : mode(_mode), height(h), width(w), data(d),
53     vc(mode, VideoConvert::rgb8888, width, height), headerBuffer(0)
54 {
55 }
\end{DoxyCode}
\hypertarget{classBitmap_a674e993ff780ec078ec387614ba2a230}{
\index{Bitmap@{Bitmap}!$\sim$Bitmap@{$\sim$Bitmap}}
\index{$\sim$Bitmap@{$\sim$Bitmap}!Bitmap@{Bitmap}}
\subsubsection[{$\sim$Bitmap}]{\setlength{\rightskip}{0pt plus 5cm}$\sim${\bf Bitmap} ()}}
\label{classBitmap_a674e993ff780ec078ec387614ba2a230}
Destructor 


\begin{DoxyCode}
57                 {
58     if (headerBuffer)
59         delete [] headerBuffer;
60 }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classBitmap_a3ef96fae93207d460641b50add069399}{
\index{Bitmap@{Bitmap}!getHash@{getHash}}
\index{getHash@{getHash}!Bitmap@{Bitmap}}
\subsubsection[{getHash}]{\setlength{\rightskip}{0pt plus 5cm}uint64\_\-t getHash () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classBitmap_a3ef96fae93207d460641b50add069399}
Gets a hash over the bitmap for quick comparisons to other bitmaps. \begin{DoxyReturn}{戻り値}
hash of the bitmap 
\end{DoxyReturn}



\begin{DoxyCode}
83 { return vc.getHash(data); }
\end{DoxyCode}
\hypertarget{classBitmap_a22136d203fcf8657490b1844688596c4}{
\index{Bitmap@{Bitmap}!rawData@{rawData}}
\index{rawData@{rawData}!Bitmap@{Bitmap}}
\subsubsection[{rawData}]{\setlength{\rightskip}{0pt plus 5cm}void rawData (uint8\_\-t $\ast$ {\em d})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classBitmap_a22136d203fcf8657490b1844688596c4}
Provide the converter with the data that should be output. It will be converted into rgb8888 and write out when \hyperlink{classBitmap_a45a62e70b01ae32e2815ab26cc8219f5}{write()} is called. 
\begin{DoxyParams}{引数}
\item[{\em d}]the data \end{DoxyParams}



\begin{DoxyCode}
73 { data = d; }
\end{DoxyCode}
\hypertarget{classBitmap_a45a62e70b01ae32e2815ab26cc8219f5}{
\index{Bitmap@{Bitmap}!write@{write}}
\index{write@{write}!Bitmap@{Bitmap}}
\subsubsection[{write}]{\setlength{\rightskip}{0pt plus 5cm}void write (std::ostream $\ast$ {\em bmp}) const}}
\label{classBitmap_a45a62e70b01ae32e2815ab26cc8219f5}
Write the provided data into the fstream provided 
\begin{DoxyParams}{引数}
\item[{\em bmp}]stream to write to \end{DoxyParams}



\begin{DoxyCode}
64 {
65     assert(data);
66 
67     // header is always the same for a bitmap object; compute the info once per
68     //   bitmap object
69     if (!headerBuffer) {
70         // For further information see:
71         //   http://en.wikipedia.org/wiki/BMP_file_format
72         Magic magic = {{'B','M'}};
73         Header header = {
74             static_cast<uint32_t>(sizeof(VideoConvert::Rgb8888)) *
75             width * height, 0, 0, 54};
76         Info info = {static_cast<uint32_t>(sizeof(Info)), width, height, 1,
77                      static_cast<uint32_t>(sizeof(VideoConvert::Rgb8888)) * 8,
78                      0, static_cast<uint32_t>(sizeof(VideoConvert::Rgb8888)) *
79                      width * height, 1, 1, 0, 0};
80 
81         char *p = headerBuffer = new char[sizeofHeaderBuffer];
82         memcpy(p, &magic, sizeof(Magic));
83         p += sizeof(Magic);
84         memcpy(p, &header, sizeof(Header));
85         p += sizeof(Header);
86         memcpy(p, &info,   sizeof(Info));
87     }
88 
89     // 1.  write the header
90     bmp->write(headerBuffer, sizeofHeaderBuffer);
91 
92     // 2.  write the bitmap data
93     uint8_t *tmp = vc.convert(data);
94     uint32_t *tmp32 = (uint32_t*)tmp;
95 
96     // BMP start store data left to right starting with the bottom row
97     // so we need to do some creative flipping
98     for (int i = height - 1; i >= 0; i--)
99         for (int j = 0; j < width; j++)
100             bmp->write((char*)&tmp32[i * width + j], sizeof(uint32_t));
101 
102     bmp->flush();
103 
104     delete [] tmp;
105 }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classBitmap_abe222f6d3581e7920dcad5306cc906a8}{
\index{Bitmap@{Bitmap}!data@{data}}
\index{data@{data}!Bitmap@{Bitmap}}
\subsubsection[{data}]{\setlength{\rightskip}{0pt plus 5cm}uint8\_\-t$\ast$ {\bf data}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classBitmap_abe222f6d3581e7920dcad5306cc906a8}
\hypertarget{classBitmap_a5ae882f02e94df66131138319e712c96}{
\index{Bitmap@{Bitmap}!headerBuffer@{headerBuffer}}
\index{headerBuffer@{headerBuffer}!Bitmap@{Bitmap}}
\subsubsection[{headerBuffer}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ {\bf headerBuffer}\hspace{0.3cm}{\ttfamily  \mbox{[}mutable, private\mbox{]}}}}
\label{classBitmap_a5ae882f02e94df66131138319e712c96}
\hypertarget{classBitmap_a81c9f8d0b8c3b49d770be14dbe9f0d37}{
\index{Bitmap@{Bitmap}!height@{height}}
\index{height@{height}!Bitmap@{Bitmap}}
\subsubsection[{height}]{\setlength{\rightskip}{0pt plus 5cm}uint16\_\-t {\bf height}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classBitmap_a81c9f8d0b8c3b49d770be14dbe9f0d37}
\hypertarget{classBitmap_a04dbb1673fce676e164d63b34f561279}{
\index{Bitmap@{Bitmap}!mode@{mode}}
\index{mode@{mode}!Bitmap@{Bitmap}}
\subsubsection[{mode}]{\setlength{\rightskip}{0pt plus 5cm}{\bf VideoConvert::Mode} {\bf mode}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classBitmap_a04dbb1673fce676e164d63b34f561279}
\hypertarget{classBitmap_aa659ac1e8f41fbbeff951253e434390f}{
\index{Bitmap@{Bitmap}!sizeofHeaderBuffer@{sizeofHeaderBuffer}}
\index{sizeofHeaderBuffer@{sizeofHeaderBuffer}!Bitmap@{Bitmap}}
\subsubsection[{sizeofHeaderBuffer}]{\setlength{\rightskip}{0pt plus 5cm}const size\_\-t {\bf sizeofHeaderBuffer}\hspace{0.3cm}{\ttfamily  \mbox{[}static, private\mbox{]}}}}
\label{classBitmap_aa659ac1e8f41fbbeff951253e434390f}
{\bfseries 初期値:}
\begin{DoxyCode}
 sizeof(Magic) + sizeof(Header) +
                                        sizeof(Info)
\end{DoxyCode}
\hypertarget{classBitmap_ae8e736e4fe6c1de602b7f4ac03d7d7a7}{
\index{Bitmap@{Bitmap}!vc@{vc}}
\index{vc@{vc}!Bitmap@{Bitmap}}
\subsubsection[{vc}]{\setlength{\rightskip}{0pt plus 5cm}{\bf VideoConvert} {\bf vc}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classBitmap_ae8e736e4fe6c1de602b7f4ac03d7d7a7}
\hypertarget{classBitmap_ad0eab1042455a2067c812ab8071d5376}{
\index{Bitmap@{Bitmap}!width@{width}}
\index{width@{width}!Bitmap@{Bitmap}}
\subsubsection[{width}]{\setlength{\rightskip}{0pt plus 5cm}uint16\_\-t {\bf width}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classBitmap_ad0eab1042455a2067c812ab8071d5376}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
base/\hyperlink{bitmap_8hh}{bitmap.hh}\item 
base/\hyperlink{bitmap_8cc}{bitmap.cc}\end{DoxyCompactItemize}
