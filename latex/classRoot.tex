\hypertarget{classRoot}{
\section{クラス Root}
\label{classRoot}\index{Root@{Root}}
}


{\ttfamily \#include $<$root.hh$>$}Rootに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3cm]{classRoot}
\end{center}
\end{figure}
\subsection*{構成}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classRoot_1_1Root}{Root}
\end{DoxyCompactItemize}
\subsection*{Public 型}
\begin{DoxyCompactItemize}
\item 
typedef RootParams \hyperlink{classRoot_a0e87bb7e60cbe3229b1cb552ebb686e0}{Params}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classRoot_a7ca6e6b75b6eeb4aa20e46edce0ac6de}{timeSyncEnabled} () const 
\begin{DoxyCompactList}\small\item\em \hyperlink{classCheck}{Check} whether time syncing is enabled. \item\end{DoxyCompactList}\item 
const \hyperlink{classTime}{Time} \hyperlink{classRoot_a830a76b9f0c3aea17ec77cd0e5011ad6}{timeSyncPeriod} () const 
\begin{DoxyCompactList}\small\item\em Retrieve the period for the sync event. \item\end{DoxyCompactList}\item 
const \hyperlink{classTime}{Time} \hyperlink{classRoot_a6528f63bdbdbc8055bbc6b8e34155c31}{timeSyncSpinThreshold} () const 
\begin{DoxyCompactList}\small\item\em Retrieve the threshold for time remaining to spin wait. \item\end{DoxyCompactList}\item 
void \hyperlink{classRoot_ad966d7a16083475060291e68ac9c9e24}{timeSyncEnable} (bool en)
\begin{DoxyCompactList}\small\item\em Enable or disable time syncing. \item\end{DoxyCompactList}\item 
void \hyperlink{classRoot_ac3f63e1a46d7fb3cc8d11ddbb148b65b}{timeSyncPeriod} (\hyperlink{classTime}{Time} newPeriod)
\begin{DoxyCompactList}\small\item\em Configure the period for time sync events. \item\end{DoxyCompactList}\item 
void \hyperlink{classRoot_a2424f9c13e5cf005bc79fbaf431ca660}{timeSyncSpinThreshold} (\hyperlink{classTime}{Time} newThreshold)
\begin{DoxyCompactList}\small\item\em \hyperlink{classSet}{Set} the threshold for time remaining to spin wait. \item\end{DoxyCompactList}\item 
const \hyperlink{classRoot_a0e87bb7e60cbe3229b1cb552ebb686e0}{Params} $\ast$ \hyperlink{classRoot_acd3c3feb78ae7a8f88fe0f110a718dff}{params} () const 
\item 
\hyperlink{classRoot_abc86df64e340cf2d26b91bb2006f6823}{Root} (\hyperlink{classRoot_a0e87bb7e60cbe3229b1cb552ebb686e0}{Params} $\ast$p)
\item 
void \hyperlink{classRoot_a0c3e6eb311ceff72035b11f2a5e0f186}{loadState} (\hyperlink{classCheckpoint}{Checkpoint} $\ast$cp)
\item 
void \hyperlink{classRoot_a3c34ea9b29f410748d4435a667484924}{initState} ()
\item 
virtual void \hyperlink{classRoot_a53e036786d17361be4c7320d39c99b84}{serialize} (std::ostream \&os)
\item 
virtual void \hyperlink{classRoot_af22e5d6d660b97db37003ac61ac4ee49}{unserialize} (\hyperlink{classCheckpoint}{Checkpoint} $\ast$cp, const std::string \&section)
\end{DoxyCompactItemize}
\subsection*{Static Public メソッド}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classRoot_1_1Root}{Root} $\ast$ \hyperlink{classRoot_ac0ea009f164c8391bd2371c57518a5b2}{root} ()
\end{DoxyCompactItemize}
\subsection*{Protected メソッド}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classRoot_a9a1e892e8081bcf0f3d918f378d78e52}{timeSync} ()
\end{DoxyCompactItemize}
\subsection*{Protected 変数}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classRoot_a096e979db21287ad2b56b0ad270ac681}{\_\-enabled}
\item 
\hyperlink{classTime}{Time} \hyperlink{classRoot_a858c13841be35f29f395107eba533cb8}{\_\-period}
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classRoot_a73b10c2d1eeecc817ef8cb4814c514fb}{\_\-periodTick}
\item 
\hyperlink{classTime}{Time} \hyperlink{classRoot_a95af4ca66c183d211cbe51f28f876625}{\_\-spinThreshold}
\item 
\hyperlink{classTime}{Time} \hyperlink{classRoot_af285d39478c6a28a617a471a6232fd4c}{lastTime}
\item 
\hyperlink{classEventWrapper}{EventWrapper}$<$ \hyperlink{classRoot_1_1Root}{Root},\&Root::timeSync $>$ \hyperlink{classRoot_ac83acdff678c3ae9e22c78d639866177}{syncEvent}
\end{DoxyCompactItemize}
\subsection*{Static Private 変数}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classRoot_1_1Root}{Root} $\ast$ \hyperlink{classRoot_a99366a4f856d83fbfa33f9a97441512b}{\_\-root} = NULL
\end{DoxyCompactItemize}
\subsection*{フレンド}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classRoot_a47a21fa8d012ff7d9657be29b3e52ee1}{EventWrapper$<$ Root,\&Root::timeSync $>$}
\end{DoxyCompactItemize}


\subsection{型定義}
\hypertarget{classRoot_a0e87bb7e60cbe3229b1cb552ebb686e0}{
\index{Root@{Root}!Params@{Params}}
\index{Params@{Params}!Root@{Root}}
\subsubsection[{Params}]{\setlength{\rightskip}{0pt plus 5cm}typedef RootParams {\bf Params}}}
\label{classRoot_a0e87bb7e60cbe3229b1cb552ebb686e0}


\hyperlink{classSimObject_a0f0761d2db586a23bb2a2880b8f387bb}{SimObject}を再定義しています。

\subsection{コンストラクタとデストラクタ}
\hypertarget{classRoot_abc86df64e340cf2d26b91bb2006f6823}{
\index{Root@{Root}!Root@{Root}}
\index{Root@{Root}!Root@{Root}}
\subsubsection[{Root}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Root} ({\bf Params} $\ast$ {\em p})}}
\label{classRoot_abc86df64e340cf2d26b91bb2006f6823}



\begin{DoxyCode}
106                         : SimObject(p), _enabled(false),
107     _periodTick(p->time_sync_period), syncEvent(this)
108 {
109     _period.setTick(p->time_sync_period);
110     _spinThreshold.setTick(p->time_sync_spin_threshold);
111 
112     assert(_root == NULL);
113     _root = this;
114     lastTime.setTimer();
115 
116     simQuantum = p->sim_quantum;
117 }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classRoot_a3c34ea9b29f410748d4435a667484924}{
\index{Root@{Root}!initState@{initState}}
\index{initState@{initState}!Root@{Root}}
\subsubsection[{initState}]{\setlength{\rightskip}{0pt plus 5cm}void initState ()\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classRoot_a3c34ea9b29f410748d4435a667484924}
Schedule the timesync event at \hyperlink{classRoot_a3c34ea9b29f410748d4435a667484924}{initState()} when not unserializing 

\hyperlink{classSimObject_a3c34ea9b29f410748d4435a667484924}{SimObject}を再定義しています。


\begin{DoxyCode}
121 {
122     timeSyncEnable(params()->time_sync_enable);
123 }
\end{DoxyCode}
\hypertarget{classRoot_a0c3e6eb311ceff72035b11f2a5e0f186}{
\index{Root@{Root}!loadState@{loadState}}
\index{loadState@{loadState}!Root@{Root}}
\subsubsection[{loadState}]{\setlength{\rightskip}{0pt plus 5cm}void loadState ({\bf Checkpoint} $\ast$ {\em cp})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classRoot_a0c3e6eb311ceff72035b11f2a5e0f186}
Schedule the timesync event at \hyperlink{classRoot_a0c3e6eb311ceff72035b11f2a5e0f186}{loadState()} so that curTick is correct 

\hyperlink{classSimObject_a0c3e6eb311ceff72035b11f2a5e0f186}{SimObject}を再定義しています。


\begin{DoxyCode}
127 {
128     SimObject::loadState(cp);
129     timeSyncEnable(params()->time_sync_enable);
130 }
\end{DoxyCode}
\hypertarget{classRoot_acd3c3feb78ae7a8f88fe0f110a718dff}{
\index{Root@{Root}!params@{params}}
\index{params@{params}!Root@{Root}}
\subsubsection[{params}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Params}$\ast$ params () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classRoot_acd3c3feb78ae7a8f88fe0f110a718dff}


\hyperlink{classSimObject_acd3c3feb78ae7a8f88fe0f110a718dff}{SimObject}を再定義しています。


\begin{DoxyCode}
101     {
102         return dynamic_cast<const Params *>(_params);
103     }
\end{DoxyCode}
\hypertarget{classRoot_ac0ea009f164c8391bd2371c57518a5b2}{
\index{Root@{Root}!root@{root}}
\index{root@{root}!Root@{Root}}
\subsubsection[{root}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf Root}$\ast$ root ()\hspace{0.3cm}{\ttfamily  \mbox{[}inline, static\mbox{]}}}}
\label{classRoot_ac0ea009f164c8391bd2371c57518a5b2}
Use this function to get a pointer to the single \hyperlink{classRoot}{Root} object in the simulation. This function asserts that such an object has actual been constructed to avoid having to perform that check everywhere the root is used. This is to allow calling the functions below.

\begin{DoxyReturn}{戻り値}
Pointer to the single root object. 
\end{DoxyReturn}



\begin{DoxyCode}
77     {
78         assert(_root);
79         return _root;
80     }
\end{DoxyCode}
\hypertarget{classRoot_a53e036786d17361be4c7320d39c99b84}{
\index{Root@{Root}!serialize@{serialize}}
\index{serialize@{serialize}!Root@{Root}}
\subsubsection[{serialize}]{\setlength{\rightskip}{0pt plus 5cm}void serialize (std::ostream \& {\em os})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classRoot_a53e036786d17361be4c7320d39c99b84}


\hyperlink{classSerializable_ad6272f80ae37e8331e3969b3f072a801}{Serializable}を再定義しています。


\begin{DoxyCode}
134 {
135     uint64_t cpt_ver = gem5CheckpointVersion;
136     SERIALIZE_SCALAR(cpt_ver);
137     SERIALIZE_SCALAR(FullSystem);
138     std::string isa = THE_ISA_STR;
139     SERIALIZE_SCALAR(isa);
140 }
\end{DoxyCode}
\hypertarget{classRoot_a9a1e892e8081bcf0f3d918f378d78e52}{
\index{Root@{Root}!timeSync@{timeSync}}
\index{timeSync@{timeSync}!Root@{Root}}
\subsubsection[{timeSync}]{\setlength{\rightskip}{0pt plus 5cm}void timeSync ()\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classRoot_a9a1e892e8081bcf0f3d918f378d78e52}



\begin{DoxyCode}
51 {
52     Time cur_time, diff, period = timeSyncPeriod();
53 
54     do {
55         cur_time.setTimer();
56         diff = cur_time - lastTime;
57         Time remainder = period - diff;
58         if (diff < period && remainder > _spinThreshold) {
59             DPRINTF(TimeSync, "Sleeping to sync with real time.\n");
60             // Sleep until the end of the period, or until a signal.
61             sleep(remainder);
62             // Refresh the current time.
63             cur_time.setTimer();
64         }
65     } while (diff < period);
66     lastTime = cur_time;
67     schedule(&syncEvent, curTick() + _periodTick);
68 }
\end{DoxyCode}
\hypertarget{classRoot_ad966d7a16083475060291e68ac9c9e24}{
\index{Root@{Root}!timeSyncEnable@{timeSyncEnable}}
\index{timeSyncEnable@{timeSyncEnable}!Root@{Root}}
\subsubsection[{timeSyncEnable}]{\setlength{\rightskip}{0pt plus 5cm}void timeSyncEnable (bool {\em en})}}
\label{classRoot_ad966d7a16083475060291e68ac9c9e24}


Enable or disable time syncing. 


\begin{DoxyCode}
72 {
73     if (en == _enabled)
74         return;
75     _enabled = en;
76     if (_enabled) {
77         // Get event going.
78         Tick periods = ((curTick() + _periodTick - 1) / _periodTick);
79         Tick nextPeriod = periods * _periodTick;
80         schedule(&syncEvent, nextPeriod);
81     } else {
82         // Stop event.
83         deschedule(&syncEvent);
84     }
85 }
\end{DoxyCode}
\hypertarget{classRoot_a7ca6e6b75b6eeb4aa20e46edce0ac6de}{
\index{Root@{Root}!timeSyncEnabled@{timeSyncEnabled}}
\index{timeSyncEnabled@{timeSyncEnabled}!Root@{Root}}
\subsubsection[{timeSyncEnabled}]{\setlength{\rightskip}{0pt plus 5cm}bool timeSyncEnabled () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classRoot_a7ca6e6b75b6eeb4aa20e46edce0ac6de}


\hyperlink{classCheck}{Check} whether time syncing is enabled. 


\begin{DoxyCode}
85 { return _enabled; }
\end{DoxyCode}
\hypertarget{classRoot_ac3f63e1a46d7fb3cc8d11ddbb148b65b}{
\index{Root@{Root}!timeSyncPeriod@{timeSyncPeriod}}
\index{timeSyncPeriod@{timeSyncPeriod}!Root@{Root}}
\subsubsection[{timeSyncPeriod}]{\setlength{\rightskip}{0pt plus 5cm}void timeSyncPeriod ({\bf Time} {\em newPeriod})}}
\label{classRoot_ac3f63e1a46d7fb3cc8d11ddbb148b65b}


Configure the period for time sync events. 


\begin{DoxyCode}
90 {
91     bool en = timeSyncEnabled();
92     _period = newPeriod;
93     _periodTick = _period.getTick();
94     timeSyncEnable(en);
95 }
\end{DoxyCode}
\hypertarget{classRoot_a830a76b9f0c3aea17ec77cd0e5011ad6}{
\index{Root@{Root}!timeSyncPeriod@{timeSyncPeriod}}
\index{timeSyncPeriod@{timeSyncPeriod}!Root@{Root}}
\subsubsection[{timeSyncPeriod}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Time} timeSyncPeriod () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classRoot_a830a76b9f0c3aea17ec77cd0e5011ad6}


Retrieve the period for the sync event. 


\begin{DoxyCode}
87 { return _period; }
\end{DoxyCode}
\hypertarget{classRoot_a2424f9c13e5cf005bc79fbaf431ca660}{
\index{Root@{Root}!timeSyncSpinThreshold@{timeSyncSpinThreshold}}
\index{timeSyncSpinThreshold@{timeSyncSpinThreshold}!Root@{Root}}
\subsubsection[{timeSyncSpinThreshold}]{\setlength{\rightskip}{0pt plus 5cm}void timeSyncSpinThreshold ({\bf Time} {\em newThreshold})}}
\label{classRoot_a2424f9c13e5cf005bc79fbaf431ca660}


\hyperlink{classSet}{Set} the threshold for time remaining to spin wait. 


\begin{DoxyCode}
100 {
101     bool en = timeSyncEnabled();
102     _spinThreshold = newThreshold;
103     timeSyncEnable(en);
104 }
\end{DoxyCode}
\hypertarget{classRoot_a6528f63bdbdbc8055bbc6b8e34155c31}{
\index{Root@{Root}!timeSyncSpinThreshold@{timeSyncSpinThreshold}}
\index{timeSyncSpinThreshold@{timeSyncSpinThreshold}!Root@{Root}}
\subsubsection[{timeSyncSpinThreshold}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Time} timeSyncSpinThreshold () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classRoot_a6528f63bdbdbc8055bbc6b8e34155c31}


Retrieve the threshold for time remaining to spin wait. 


\begin{DoxyCode}
89 { return _spinThreshold; }
\end{DoxyCode}
\hypertarget{classRoot_af22e5d6d660b97db37003ac61ac4ee49}{
\index{Root@{Root}!unserialize@{unserialize}}
\index{unserialize@{unserialize}!Root@{Root}}
\subsubsection[{unserialize}]{\setlength{\rightskip}{0pt plus 5cm}void unserialize ({\bf Checkpoint} $\ast$ {\em cp}, \/  const std::string \& {\em section})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classRoot_af22e5d6d660b97db37003ac61ac4ee49}


\hyperlink{classSerializable_af100c4e9feabf3cd918619c88c718387}{Serializable}を再定義しています。


\begin{DoxyCode}
144 {
145     uint64_t cpt_ver = 0;
146     UNSERIALIZE_OPT_SCALAR(cpt_ver);
147     if (cpt_ver < gem5CheckpointVersion) {
148         warn("**********************************************************\n");
149         warn("!!!! Checkpoint ver %#x is older than current ver %#x !!!!\n",
150                 cpt_ver, gem5CheckpointVersion);
151         warn("You might experience some issues when restoring and should run "
152              "the checkpoint upgrader (util/cpt_upgrader.py) on your "
153              "checkpoint\n");
154         warn("**********************************************************\n");
155     } else if (cpt_ver > gem5CheckpointVersion) {
156         warn("**********************************************************\n");
157         warn("!!!! Checkpoint ver %#x is newer than current ver %#x !!!!\n",
158                 cpt_ver, gem5CheckpointVersion);
159         warn("Running a new checkpoint with an older version of gem5 is not "
160              "supported. While it might work, you may experience incorrect "
161              "behavior or crashes.\n");
162         warn("**********************************************************\n");
163      }
164 }
\end{DoxyCode}


\subsection{フレンドと関連する関数}
\hypertarget{classRoot_a47a21fa8d012ff7d9657be29b3e52ee1}{
\index{Root@{Root}!EventWrapper$<$ Root,\&Root::timeSync $>$@{EventWrapper$<$ Root,\&Root::timeSync $>$}}
\index{EventWrapper$<$ Root,\&Root::timeSync $>$@{EventWrapper$<$ Root,\&Root::timeSync $>$}!Root@{Root}}
\subsubsection[{EventWrapper$<$ Root,\&Root::timeSync $>$}]{\setlength{\rightskip}{0pt plus 5cm}friend class {\bf EventWrapper}$<$ {\bf Root},\&Root::timeSync $>$\hspace{0.3cm}{\ttfamily  \mbox{[}friend\mbox{]}}}}
\label{classRoot_a47a21fa8d012ff7d9657be29b3e52ee1}


\subsection{変数}
\hypertarget{classRoot_a096e979db21287ad2b56b0ad270ac681}{
\index{Root@{Root}!\_\-enabled@{\_\-enabled}}
\index{\_\-enabled@{\_\-enabled}!Root@{Root}}
\subsubsection[{\_\-enabled}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf \_\-enabled}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classRoot_a096e979db21287ad2b56b0ad270ac681}
\hypertarget{classRoot_a858c13841be35f29f395107eba533cb8}{
\index{Root@{Root}!\_\-period@{\_\-period}}
\index{\_\-period@{\_\-period}!Root@{Root}}
\subsubsection[{\_\-period}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} {\bf \_\-period}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classRoot_a858c13841be35f29f395107eba533cb8}
\hypertarget{classRoot_a73b10c2d1eeecc817ef8cb4814c514fb}{
\index{Root@{Root}!\_\-periodTick@{\_\-periodTick}}
\index{\_\-periodTick@{\_\-periodTick}!Root@{Root}}
\subsubsection[{\_\-periodTick}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} {\bf \_\-periodTick}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classRoot_a73b10c2d1eeecc817ef8cb4814c514fb}
\hypertarget{classRoot_a99366a4f856d83fbfa33f9a97441512b}{
\index{Root@{Root}!\_\-root@{\_\-root}}
\index{\_\-root@{\_\-root}!Root@{Root}}
\subsubsection[{\_\-root}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Root} $\ast$ {\bf \_\-root} = NULL\hspace{0.3cm}{\ttfamily  \mbox{[}static, private\mbox{]}}}}
\label{classRoot_a99366a4f856d83fbfa33f9a97441512b}
\hypertarget{classRoot_a95af4ca66c183d211cbe51f28f876625}{
\index{Root@{Root}!\_\-spinThreshold@{\_\-spinThreshold}}
\index{\_\-spinThreshold@{\_\-spinThreshold}!Root@{Root}}
\subsubsection[{\_\-spinThreshold}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} {\bf \_\-spinThreshold}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classRoot_a95af4ca66c183d211cbe51f28f876625}
\hypertarget{classRoot_af285d39478c6a28a617a471a6232fd4c}{
\index{Root@{Root}!lastTime@{lastTime}}
\index{lastTime@{lastTime}!Root@{Root}}
\subsubsection[{lastTime}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time} {\bf lastTime}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classRoot_af285d39478c6a28a617a471a6232fd4c}
\hypertarget{classRoot_ac83acdff678c3ae9e22c78d639866177}{
\index{Root@{Root}!syncEvent@{syncEvent}}
\index{syncEvent@{syncEvent}!Root@{Root}}
\subsubsection[{syncEvent}]{\setlength{\rightskip}{0pt plus 5cm}{\bf EventWrapper}$<${\bf Root}, \&Root::timeSync$>$ {\bf syncEvent}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classRoot_ac83acdff678c3ae9e22c78d639866177}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
sim/\hyperlink{root_8hh}{root.hh}\item 
sim/\hyperlink{root_8cc}{root.cc}\end{DoxyCompactItemize}
