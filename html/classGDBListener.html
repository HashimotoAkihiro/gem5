<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス GDBListener</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>クラス GDBListener</h1><!-- doxytag: class="GDBListener" -->
<p><code>#include &lt;<a class="el" href="base_2remote__gdb_8hh_source.html">remote_gdb.hh</a>&gt;</code></p>

<p><a href="classGDBListener-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>構成</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGDBListener_1_1Event.html">Event</a></td></tr>
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGDBListener.html#aa8b3c682f637e2fe4d93e2623219ee37">GDBListener</a> (<a class="el" href="classBaseRemoteGDB.html">BaseRemoteGDB</a> *g, int p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGDBListener.html#afe14217db64403242d45b6e321a389a6">~GDBListener</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGDBListener.html#aadb9f3b844fb4cf98288cd3c60a3af91">accept</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGDBListener.html#a458bbe4cf81360301586b2e62a7f9dd2">listen</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGDBListener.html#aa62b508d2c0e7d9cec12924965276eb5">name</a> ()</td></tr>
<tr><td colspan="2"><h2>Protected 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classGDBListener_1_1Event.html">Event</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGDBListener.html#a765488c8f26c7f8713d5245212dcae01">event</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classListenSocket.html">ListenSocket</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGDBListener.html#acf9ea448b26a541b4a197f1ca92f700b">listener</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBaseRemoteGDB.html">BaseRemoteGDB</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGDBListener.html#abc7630d7a55d0751927fed9b12d7b202">gdb</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGDBListener.html#a63c89c04d1feae07ca35558055155ffb">port</a></td></tr>
<tr><td colspan="2"><h2>フレンド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGDBListener.html#a3c7b3c89bf96f51e80a919b3a82a3915">Event</a></td></tr>
</table>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="aa8b3c682f637e2fe4d93e2623219ee37"></a><!-- doxytag: member="GDBListener::GDBListener" ref="aa8b3c682f637e2fe4d93e2623219ee37" args="(BaseRemoteGDB *g, int p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classGDBListener.html">GDBListener</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseRemoteGDB.html">BaseRemoteGDB</a> *&nbsp;</td>
          <td class="paramname"> <em>g</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00178"></a>00178     : <a class="code" href="classGDBListener.html#a765488c8f26c7f8713d5245212dcae01">event</a>(<a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>), <a class="code" href="classGDBListener.html#abc7630d7a55d0751927fed9b12d7b202">gdb</a>(g), <a class="code" href="classGDBListener.html#a63c89c04d1feae07ca35558055155ffb">port</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>)
<a name="l00179"></a>00179 {
<a name="l00180"></a>00180     assert(!<a class="code" href="classGDBListener.html#abc7630d7a55d0751927fed9b12d7b202">gdb</a>-&gt;<a class="code" href="classBaseRemoteGDB.html#a70415b68fb0739613a991b92c4d127a5">listener</a>);
<a name="l00181"></a>00181     <a class="code" href="classGDBListener.html#abc7630d7a55d0751927fed9b12d7b202">gdb</a>-&gt;<a class="code" href="classBaseRemoteGDB.html#a70415b68fb0739613a991b92c4d127a5">listener</a> = <span class="keyword">this</span>;
<a name="l00182"></a>00182 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="afe14217db64403242d45b6e321a389a6"></a><!-- doxytag: member="GDBListener::~GDBListener" ref="afe14217db64403242d45b6e321a389a6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classGDBListener.html">GDBListener</a> </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00185"></a>00185 {
<a name="l00186"></a>00186     <span class="keywordflow">if</span> (<a class="code" href="classGDBListener.html#a765488c8f26c7f8713d5245212dcae01">event</a>)
<a name="l00187"></a>00187         <span class="keyword">delete</span> <a class="code" href="classGDBListener.html#a765488c8f26c7f8713d5245212dcae01">event</a>;
<a name="l00188"></a>00188 }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="aadb9f3b844fb4cf98288cd3c60a3af91"></a><!-- doxytag: member="GDBListener::accept" ref="aadb9f3b844fb4cf98288cd3c60a3af91" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void accept </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00228"></a>00228 {
<a name="l00229"></a>00229     <span class="keywordflow">if</span> (!<a class="code" href="classGDBListener.html#acf9ea448b26a541b4a197f1ca92f700b">listener</a>.<a class="code" href="classListenSocket.html#a2848e5513ce657609b8210b7d23e4f6b">islistening</a>())
<a name="l00230"></a>00230         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;GDBListener::accept(): cannot accept if we&apos;re not listening!&quot;</span>);
<a name="l00231"></a>00231 
<a name="l00232"></a>00232     <span class="keywordtype">int</span> sfd = <a class="code" href="classGDBListener.html#acf9ea448b26a541b4a197f1ca92f700b">listener</a>.<a class="code" href="classListenSocket.html#a456b2a8397007045eca1f89d086b5778">accept</a>(<span class="keyword">true</span>);
<a name="l00233"></a>00233 
<a name="l00234"></a>00234     <span class="keywordflow">if</span> (sfd != -1) {
<a name="l00235"></a>00235         <span class="keywordflow">if</span> (<a class="code" href="classGDBListener.html#abc7630d7a55d0751927fed9b12d7b202">gdb</a>-&gt;<a class="code" href="classBaseRemoteGDB.html#ab1d071ce59a596e7db67b12d384469cc">isattached</a>())
<a name="l00236"></a>00236             close(sfd);
<a name="l00237"></a>00237         <span class="keywordflow">else</span>
<a name="l00238"></a>00238             <a class="code" href="classGDBListener.html#abc7630d7a55d0751927fed9b12d7b202">gdb</a>-&gt;<a class="code" href="classBaseRemoteGDB.html#a9b8a915c2058dbc784c223ff9b93f1a5">attach</a>(sfd);
<a name="l00239"></a>00239     }
<a name="l00240"></a>00240 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a458bbe4cf81360301586b2e62a7f9dd2"></a><!-- doxytag: member="GDBListener::listen" ref="a458bbe4cf81360301586b2e62a7f9dd2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void listen </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00198"></a>00198 {
<a name="l00199"></a>00199     <span class="keywordflow">if</span> (<a class="code" href="classListenSocket.html#a70ba2cf446c7e6363080efd46cd330c5">ListenSocket::allDisabled</a>()) {
<a name="l00200"></a>00200         <a class="code" href="base_2misc_8hh.html#abb243c15dfbeedf4ae64aa213f4f18c7">warn_once</a>(<span class="stringliteral">&quot;Sockets disabled, not accepting gdb connections&quot;</span>);
<a name="l00201"></a>00201         <span class="keywordflow">return</span>;
<a name="l00202"></a>00202     }
<a name="l00203"></a>00203 
<a name="l00204"></a>00204     <span class="keywordflow">while</span> (!<a class="code" href="classGDBListener.html#acf9ea448b26a541b4a197f1ca92f700b">listener</a>.<a class="code" href="classListenSocket.html#adc0204f049c93d5c4ed27c604d1127a4">listen</a>(<a class="code" href="classGDBListener.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="keyword">true</span>)) {
<a name="l00205"></a>00205         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(GDBMisc, <span class="stringliteral">&quot;Can&apos;t bind port %d\n&quot;</span>, <a class="code" href="classGDBListener.html#a63c89c04d1feae07ca35558055155ffb">port</a>);
<a name="l00206"></a>00206         <a class="code" href="classGDBListener.html#a63c89c04d1feae07ca35558055155ffb">port</a>++;
<a name="l00207"></a>00207     }
<a name="l00208"></a>00208 
<a name="l00209"></a>00209     <span class="keyword">event</span> = <span class="keyword">new</span> <a class="code" href="classGDBListener.html#a3c7b3c89bf96f51e80a919b3a82a3915">Event</a>(<span class="keyword">this</span>, <a class="code" href="classGDBListener.html#acf9ea448b26a541b4a197f1ca92f700b">listener</a>.<a class="code" href="classListenSocket.html#a6246250322a585921fc1e9d27b0d7b80">getfd</a>(), POLLIN);
<a name="l00210"></a>00210     <a class="code" href="pollevent_8cc.html#a6d9704e1e32950ea3b587e96e8873739">pollQueue</a>.<a class="code" href="classPollQueue.html#a3f09bc14c53cce046dfdc7d11c96bb72">schedule</a>(<a class="code" href="classGDBListener.html#a765488c8f26c7f8713d5245212dcae01">event</a>);
<a name="l00211"></a>00211 
<a name="l00212"></a>00212 <span class="preprocessor">#ifndef NDEBUG</span>
<a name="l00213"></a>00213 <span class="preprocessor"></span>    <a class="code" href="classGDBListener.html#abc7630d7a55d0751927fed9b12d7b202">gdb</a>-&gt;<a class="code" href="classBaseRemoteGDB.html#a7106e2abc437ad981830d14176d15f09">number</a> = <a class="code" href="base_2remote__gdb_8cc.html#a440297d7c52371260909155863c42e8a">debuggers</a>.size();
<a name="l00214"></a>00214     <a class="code" href="base_2remote__gdb_8cc.html#a440297d7c52371260909155863c42e8a">debuggers</a>.push_back(<a class="code" href="classGDBListener.html#abc7630d7a55d0751927fed9b12d7b202">gdb</a>);
<a name="l00215"></a>00215 <span class="preprocessor">#endif</span>
<a name="l00216"></a>00216 <span class="preprocessor"></span>
<a name="l00217"></a>00217 <span class="preprocessor">#ifndef NDEBUG</span>
<a name="l00218"></a>00218 <span class="preprocessor"></span>    <a class="code" href="cprintf_8hh.html#ab172c0b086575bda3d04daee7df17da1">ccprintf</a>(cerr, <span class="stringliteral">&quot;%d: %s: listening for remote gdb #%d on port %d\n&quot;</span>,
<a name="l00219"></a>00219              <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>(), <a class="code" href="classGDBListener.html#aa62b508d2c0e7d9cec12924965276eb5">name</a>(), <a class="code" href="classGDBListener.html#abc7630d7a55d0751927fed9b12d7b202">gdb</a>-&gt;<a class="code" href="classBaseRemoteGDB.html#a7106e2abc437ad981830d14176d15f09">number</a>, <a class="code" href="classGDBListener.html#a63c89c04d1feae07ca35558055155ffb">port</a>);
<a name="l00220"></a>00220 <span class="preprocessor">#else</span>
<a name="l00221"></a>00221 <span class="preprocessor"></span>    <a class="code" href="cprintf_8hh.html#ab172c0b086575bda3d04daee7df17da1">ccprintf</a>(cerr, <span class="stringliteral">&quot;%d: %s: listening for remote gdb on port %d\n&quot;</span>,
<a name="l00222"></a>00222              <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>(), <a class="code" href="classGDBListener.html#aa62b508d2c0e7d9cec12924965276eb5">name</a>(), <a class="code" href="classGDBListener.html#a63c89c04d1feae07ca35558055155ffb">port</a>);
<a name="l00223"></a>00223 <span class="preprocessor">#endif</span>
<a name="l00224"></a>00224 <span class="preprocessor"></span>}
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa62b508d2c0e7d9cec12924965276eb5"></a><!-- doxytag: member="GDBListener::name" ref="aa62b508d2c0e7d9cec12924965276eb5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string name </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00192"></a>00192 {
<a name="l00193"></a>00193     <span class="keywordflow">return</span> <a class="code" href="classGDBListener.html#abc7630d7a55d0751927fed9b12d7b202">gdb</a>-&gt;<a class="code" href="classBaseRemoteGDB.html#aa62b508d2c0e7d9cec12924965276eb5">name</a>() + <span class="stringliteral">&quot;.listener&quot;</span>;
<a name="l00194"></a>00194 }
</pre></div></p>

</div>
</div>
<hr/><h2>フレンドと関連する関数</h2>
<a class="anchor" id="a3c7b3c89bf96f51e80a919b3a82a3915"></a><!-- doxytag: member="GDBListener::Event" ref="a3c7b3c89bf96f51e80a919b3a82a3915" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classGDBListener_1_1Event.html">Event</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="a765488c8f26c7f8713d5245212dcae01"></a><!-- doxytag: member="GDBListener::event" ref="a765488c8f26c7f8713d5245212dcae01" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classGDBListener_1_1Event.html">Event</a>* <a class="el" href="classGDBListener.html#a765488c8f26c7f8713d5245212dcae01">event</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="abc7630d7a55d0751927fed9b12d7b202"></a><!-- doxytag: member="GDBListener::gdb" ref="abc7630d7a55d0751927fed9b12d7b202" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBaseRemoteGDB.html">BaseRemoteGDB</a>* <a class="el" href="classGDBListener.html#abc7630d7a55d0751927fed9b12d7b202">gdb</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="acf9ea448b26a541b4a197f1ca92f700b"></a><!-- doxytag: member="GDBListener::listener" ref="acf9ea448b26a541b4a197f1ca92f700b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classListenSocket.html">ListenSocket</a> <a class="el" href="classGDBListener.html#acf9ea448b26a541b4a197f1ca92f700b">listener</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a63c89c04d1feae07ca35558055155ffb"></a><!-- doxytag: member="GDBListener::port" ref="a63c89c04d1feae07ca35558055155ffb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classGDBListener.html#a63c89c04d1feae07ca35558055155ffb">port</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>base/<a class="el" href="base_2remote__gdb_8hh_source.html">remote_gdb.hh</a></li>
<li>base/<a class="el" href="base_2remote__gdb_8cc.html">remote_gdb.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
