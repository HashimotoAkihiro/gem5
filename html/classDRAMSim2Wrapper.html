<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス DRAMSim2Wrapper</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>クラス DRAMSim2Wrapper</h1><!-- doxytag: class="DRAMSim2Wrapper" -->
<p><code>#include &lt;<a class="el" href="dramsim2__wrapper_8hh_source.html">dramsim2_wrapper.hh</a>&gt;</code></p>

<p><a href="classDRAMSim2Wrapper-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDRAMSim2Wrapper.html#afb9d47202b904139c97115bb9b11a1f2">DRAMSim2Wrapper</a> (const std::string &amp;config_file, const std::string &amp;system_file, const std::string &amp;working_dir, const std::string &amp;trace_file, unsigned int memory_size_mb, bool enable_debug)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDRAMSim2Wrapper.html#ae3508f5d656008b2209e4455d1649428">~DRAMSim2Wrapper</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDRAMSim2Wrapper.html#a0beecd7e864561c9474bc80e993556bf">printStats</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDRAMSim2Wrapper.html#ae7cabadc2302c5b4899c5db3b66b2549">setCallbacks</a> (DRAMSim::TransactionCompleteCB *read_callback, DRAMSim::TransactionCompleteCB *write_callback)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDRAMSim2Wrapper.html#a34b4e8ea869adbb57c71b30c55e6f5bd">canAccept</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDRAMSim2Wrapper.html#ae247cb4ece9657b8730c721920c23ab7">enqueue</a> (bool is_write, uint64_t addr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDRAMSim2Wrapper.html#a6efe80b239837bd53bf8d8694c665993">clockPeriod</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDRAMSim2Wrapper.html#a667ea9ca9654bced2242c6ccd77599ee">queueSize</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDRAMSim2Wrapper.html#ad4ebfa7de0b48f306bf4d5e736843d62">burstSize</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDRAMSim2Wrapper.html#a873dd91783f9efb4a590aded1f70d6b0">tick</a> ()</td></tr>
<tr><td colspan="2"><h2>Private メソッド</h2></td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">T&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classDRAMSim2Wrapper.html#aafb8a8238026119400ee0c470e3f7695">extractConfig</a> (const std::string &amp;field_name, const std::string &amp;file_name) const </td></tr>
<tr><td colspan="2"><h2>Private 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">DRAMSim::MultiChannelMemorySystem *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDRAMSim2Wrapper.html#ab3fdccad236992bb048094aa3fb52893">dramsim</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDRAMSim2Wrapper.html#aba0cb71192619554d50451635e5d6a52">_clockPeriod</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDRAMSim2Wrapper.html#a16dbba262c462bdaa1a3e55e1d69968c">_queueSize</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDRAMSim2Wrapper.html#a5164bcd378cd3ca479f3df831726f5da">_burstSize</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>説明</h2>
<p>Wrapper class to avoid having <a class="el" href="classDRAMSim2.html">DRAMSim2</a> names like <a class="el" href="classClockDomain.html">ClockDomain</a> etc clashing with the normal gem5 world. Many of the <a class="el" href="classDRAMSim2.html">DRAMSim2</a> headers do not make use of namespaces, and quite a few also open up <a class="el" href="namespacestd.html">std</a>. The only thing that needs to be exposed externally are the callbacks. This wrapper effectively avoids clashes by not including any of the conventional gem5 headers (e.g. <a class="el" href="classPacket.html">Packet</a> or <a class="el" href="classSimObject.html">SimObject</a>). </p>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="afb9d47202b904139c97115bb9b11a1f2"></a><!-- doxytag: member="DRAMSim2Wrapper::DRAMSim2Wrapper" ref="afb9d47202b904139c97115bb9b11a1f2" args="(const std::string &amp;config_file, const std::string &amp;system_file, const std::string &amp;working_dir, const std::string &amp;trace_file, unsigned int memory_size_mb, bool enable_debug)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDRAMSim2Wrapper.html">DRAMSim2Wrapper</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>config_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>system_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>working_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>trace_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>memory_size_mb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>enable_debug</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create an instance of the <a class="el" href="classDRAMSim2.html">DRAMSim2</a> multi-channel memory controller using a specific config and system description.</p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>config_file</em>&nbsp;</td><td>Memory config file </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>system_file</em>&nbsp;</td><td><a class="el" href="namespaceController.html">Controller</a> config file </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>working_dir</em>&nbsp;</td><td>Path pre-pended to config files </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>trace_file</em>&nbsp;</td><td>Output trace file </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>memory_size_mb</em>&nbsp;</td><td>Total memory size in MByte </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>enable_debug</em>&nbsp;</td><td>Enable debug output </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00070"></a>00070                                                     :
<a name="l00071"></a>00071     <a class="code" href="classDRAMSim2Wrapper.html#ab3fdccad236992bb048094aa3fb52893">dramsim</a>(<span class="keyword">new</span> DRAMSim::MultiChannelMemorySystem(config_file, system_file,
<a name="l00072"></a>00072                                                   working_dir, trace_file,
<a name="l00073"></a>00073                                                   memory_size_mb, <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>, <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>)),
<a name="l00074"></a>00074     <a class="code" href="classDRAMSim2Wrapper.html#aba0cb71192619554d50451635e5d6a52">_clockPeriod</a>(0.0), <a class="code" href="classDRAMSim2Wrapper.html#a16dbba262c462bdaa1a3e55e1d69968c">_queueSize</a>(0), <a class="code" href="classDRAMSim2Wrapper.html#a5164bcd378cd3ca479f3df831726f5da">_burstSize</a>(0)
<a name="l00075"></a>00075 {
<a name="l00076"></a>00076     <span class="comment">// tell DRAMSim2 to ignore its internal notion of a CPU frequency</span>
<a name="l00077"></a>00077     <a class="code" href="classDRAMSim2Wrapper.html#ab3fdccad236992bb048094aa3fb52893">dramsim</a>-&gt;setCPUClockSpeed(0);
<a name="l00078"></a>00078 
<a name="l00079"></a>00079     <span class="comment">// switch on debug output if requested</span>
<a name="l00080"></a>00080     <span class="keywordflow">if</span> (enable_debug)
<a name="l00081"></a>00081         <a class="code" href="dramsim2__wrapper_8cc.html#af495515caad973d420a29e147e5a91e5">SHOW_SIM_OUTPUT</a> = 1;
<a name="l00082"></a>00082 
<a name="l00083"></a>00083     <span class="comment">// there is no way of getting DRAMSim2 to tell us what frequency</span>
<a name="l00084"></a>00084     <span class="comment">// it is assuming, so we have to extract it ourselves</span>
<a name="l00085"></a>00085     <a class="code" href="classDRAMSim2Wrapper.html#aba0cb71192619554d50451635e5d6a52">_clockPeriod</a> = extractConfig&lt;double&gt;(<span class="stringliteral">&quot;tCK=&quot;</span>,
<a name="l00086"></a>00086                                          working_dir + <span class="charliteral">&apos;/&apos;</span> + config_file);
<a name="l00087"></a>00087 
<a name="l00088"></a>00088     <span class="keywordflow">if</span> (!<a class="code" href="classDRAMSim2Wrapper.html#aba0cb71192619554d50451635e5d6a52">_clockPeriod</a>)
<a name="l00089"></a>00089         <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;DRAMSim2 wrapper failed to get clock\n&quot;</span>);
<a name="l00090"></a>00090 
<a name="l00091"></a>00091     <span class="comment">// we also need to know what transaction queue size DRAMSim2 is</span>
<a name="l00092"></a>00092     <span class="comment">// using so we can stall when responses are blocked</span>
<a name="l00093"></a>00093    <a class="code" href="classDRAMSim2Wrapper.html#a16dbba262c462bdaa1a3e55e1d69968c">_queueSize</a> = extractConfig&lt;unsigned int&gt;(<span class="stringliteral">&quot;TRANS_QUEUE_DEPTH=&quot;</span>,
<a name="l00094"></a>00094                                             working_dir + <span class="charliteral">&apos;/&apos;</span> + system_file);
<a name="l00095"></a>00095 
<a name="l00096"></a>00096     <span class="keywordflow">if</span> (!<a class="code" href="classDRAMSim2Wrapper.html#a16dbba262c462bdaa1a3e55e1d69968c">_queueSize</a>)
<a name="l00097"></a>00097         <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;DRAMSim2 wrapper failed to get queue size\n&quot;</span>);
<a name="l00098"></a>00098 
<a name="l00099"></a>00099 
<a name="l00100"></a>00100    <span class="comment">// finally, get the data bus bits and burst length so we can add a</span>
<a name="l00101"></a>00101    <span class="comment">// sanity check for the burst size</span>
<a name="l00102"></a>00102     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dataBusBits =
<a name="l00103"></a>00103         extractConfig&lt;unsigned int&gt;(<span class="stringliteral">&quot;JEDEC_DATA_BUS_BITS=&quot;</span>,
<a name="l00104"></a>00104                                     working_dir + <span class="charliteral">&apos;/&apos;</span> + system_file);
<a name="l00105"></a>00105    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> burstLength =
<a name="l00106"></a>00106        extractConfig&lt;unsigned int&gt;(<span class="stringliteral">&quot;BL=&quot;</span>, working_dir + <span class="charliteral">&apos;/&apos;</span> + config_file);
<a name="l00107"></a>00107 
<a name="l00108"></a>00108    <span class="keywordflow">if</span> (!dataBusBits || !burstLength)
<a name="l00109"></a>00109        <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;DRAMSim22 wrapper failed to get burst size\n&quot;</span>);
<a name="l00110"></a>00110 
<a name="l00111"></a>00111    <a class="code" href="classDRAMSim2Wrapper.html#a5164bcd378cd3ca479f3df831726f5da">_burstSize</a> = dataBusBits * burstLength / 8;
<a name="l00112"></a>00112 }

</pre></div></p>

</div>
</div>
<a class="anchor" id="ae3508f5d656008b2209e4455d1649428"></a><!-- doxytag: member="DRAMSim2Wrapper::~DRAMSim2Wrapper" ref="ae3508f5d656008b2209e4455d1649428" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classDRAMSim2Wrapper.html">DRAMSim2Wrapper</a> </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00115"></a>00115 {
<a name="l00116"></a>00116     <span class="keyword">delete</span> <a class="code" href="classDRAMSim2Wrapper.html#ab3fdccad236992bb048094aa3fb52893">dramsim</a>;
<a name="l00117"></a>00117 }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="ad4ebfa7de0b48f306bf4d5e736843d62"></a><!-- doxytag: member="DRAMSim2Wrapper::burstSize" ref="ad4ebfa7de0b48f306bf4d5e736843d62" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int burstSize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the burst size in bytes used by <a class="el" href="classDRAMSim2.html">DRAMSim2</a>.</p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>The burst size in bytes (data width * burst length) </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00191"></a>00191 {
<a name="l00192"></a>00192     <span class="keywordflow">return</span> <a class="code" href="classDRAMSim2Wrapper.html#a5164bcd378cd3ca479f3df831726f5da">_burstSize</a>;
<a name="l00193"></a>00193 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a34b4e8ea869adbb57c71b30c55e6f5bd"></a><!-- doxytag: member="DRAMSim2Wrapper::canAccept" ref="a34b4e8ea869adbb57c71b30c55e6f5bd" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool canAccept </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Determine if the controller can accept a new packet or not.</p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>true if the controller can accept transactions </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00166"></a>00166 {
<a name="l00167"></a>00167     <span class="keywordflow">return</span> <a class="code" href="classDRAMSim2Wrapper.html#ab3fdccad236992bb048094aa3fb52893">dramsim</a>-&gt;willAcceptTransaction();
<a name="l00168"></a>00168 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6efe80b239837bd53bf8d8694c665993"></a><!-- doxytag: member="DRAMSim2Wrapper::clockPeriod" ref="a6efe80b239837bd53bf8d8694c665993" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double clockPeriod </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the internal clock period used by <a class="el" href="classDRAMSim2.html">DRAMSim2</a>, specified in ns.</p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>The clock period of the DRAM interface in ns </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00179"></a>00179 {
<a name="l00180"></a>00180     <span class="keywordflow">return</span> <a class="code" href="classDRAMSim2Wrapper.html#aba0cb71192619554d50451635e5d6a52">_clockPeriod</a>;
<a name="l00181"></a>00181 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae247cb4ece9657b8730c721920c23ab7"></a><!-- doxytag: member="DRAMSim2Wrapper::enqueue" ref="ae247cb4ece9657b8730c721920c23ab7" args="(bool is_write, uint64_t addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enqueue </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>is_write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>addr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Enqueue a packet. This assumes that canAccept has returned true.</p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pkt</em>&nbsp;</td><td><a class="el" href="classPacket.html">Packet</a> to turn into a <a class="el" href="classDRAMSim2.html">DRAMSim2</a> transaction </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00172"></a>00172 {
<a name="l00173"></a>00173     <span class="keywordtype">bool</span> success M5_VAR_USED = <a class="code" href="classDRAMSim2Wrapper.html#ab3fdccad236992bb048094aa3fb52893">dramsim</a>-&gt;addTransaction(is_write, <a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a>);
<a name="l00174"></a>00174     assert(success);
<a name="l00175"></a>00175 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aafb8a8238026119400ee0c470e3f7695"></a><!-- doxytag: member="DRAMSim2Wrapper::extractConfig" ref="aafb8a8238026119400ee0c470e3f7695" args="(const std::string &amp;field_name, const std::string &amp;file_name) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">T extractConfig </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>file_name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00123"></a>00123 {
<a name="l00124"></a>00124     std::ifstream file_stream(file_name.c_str(), ios::in);
<a name="l00125"></a>00125 
<a name="l00126"></a>00126     <span class="keywordflow">if</span> (!file_stream.good())
<a name="l00127"></a>00127         <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;DRAMSim2 wrapper could not open %s for reading\n&quot;</span>, file_name);
<a name="l00128"></a>00128 
<a name="l00129"></a>00129     <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;
<a name="l00130"></a>00130     T res;
<a name="l00131"></a>00131     std::string line;
<a name="l00132"></a>00132     <span class="keywordflow">while</span> (!found &amp;&amp; file_stream) {
<a name="l00133"></a>00133         getline(file_stream, line);
<a name="l00134"></a>00134         <span class="keywordflow">if</span> (line.substr(0, field_name.size()) == field_name) {
<a name="l00135"></a>00135             found = <span class="keyword">true</span>;
<a name="l00136"></a>00136             istringstream iss(line.substr(field_name.size()));
<a name="l00137"></a>00137             iss &gt;&gt; res;
<a name="l00138"></a>00138         }
<a name="l00139"></a>00139     }
<a name="l00140"></a>00140 
<a name="l00141"></a>00141     file_stream.close();
<a name="l00142"></a>00142 
<a name="l00143"></a>00143     <span class="keywordflow">if</span> (!found)
<a name="l00144"></a>00144         <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;DRAMSim2 wrapper could not find %s in %s\n&quot;</span>, field_name,
<a name="l00145"></a>00145               file_name);
<a name="l00146"></a>00146 
<a name="l00147"></a>00147     <span class="keywordflow">return</span> res;
<a name="l00148"></a>00148 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0beecd7e864561c9474bc80e993556bf"></a><!-- doxytag: member="DRAMSim2Wrapper::printStats" ref="a0beecd7e864561c9474bc80e993556bf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void printStats </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Print the stats gathered in DRAMsim2. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00152"></a>00152 {
<a name="l00153"></a>00153     <a class="code" href="classDRAMSim2Wrapper.html#ab3fdccad236992bb048094aa3fb52893">dramsim</a>-&gt;printStats(<span class="keyword">true</span>);
<a name="l00154"></a>00154 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a667ea9ca9654bced2242c6ccd77599ee"></a><!-- doxytag: member="DRAMSim2Wrapper::queueSize" ref="a667ea9ca9654bced2242c6ccd77599ee" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int queueSize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the transaction queue size used by <a class="el" href="classDRAMSim2.html">DRAMSim2</a>.</p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>The queue size counted in number of transactions </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00185"></a>00185 {
<a name="l00186"></a>00186     <span class="keywordflow">return</span> <a class="code" href="classDRAMSim2Wrapper.html#a16dbba262c462bdaa1a3e55e1d69968c">_queueSize</a>;
<a name="l00187"></a>00187 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae7cabadc2302c5b4899c5db3b66b2549"></a><!-- doxytag: member="DRAMSim2Wrapper::setCallbacks" ref="ae7cabadc2302c5b4899c5db3b66b2549" args="(DRAMSim::TransactionCompleteCB *read_callback, DRAMSim::TransactionCompleteCB *write_callback)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setCallbacks </td>
          <td>(</td>
          <td class="paramtype">DRAMSim::TransactionCompleteCB *&nbsp;</td>
          <td class="paramname"> <em>read_callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DRAMSim::TransactionCompleteCB *&nbsp;</td>
          <td class="paramname"> <em>write_callback</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classSet.html">Set</a> the callbacks to use for read and write completion.</p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>read_callback</em>&nbsp;</td><td><a class="el" href="classCallback.html">Callback</a> used for read completions </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>write_callback</em>&nbsp;</td><td><a class="el" href="classCallback.html">Callback</a> used for write completions </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00159"></a>00159 {
<a name="l00160"></a>00160     <span class="comment">// simply pass it on, for now we ignore the power callback</span>
<a name="l00161"></a>00161     <a class="code" href="classDRAMSim2Wrapper.html#ab3fdccad236992bb048094aa3fb52893">dramsim</a>-&gt;RegisterCallbacks(read_callback, write_callback, <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>);
<a name="l00162"></a>00162 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a873dd91783f9efb4a590aded1f70d6b0"></a><!-- doxytag: member="DRAMSim2Wrapper::tick" ref="a873dd91783f9efb4a590aded1f70d6b0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tick </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Progress the memory controller one cycle </p>

<p><div class="fragment"><pre class="fragment"><a name="l00197"></a>00197 {
<a name="l00198"></a>00198     <a class="code" href="classDRAMSim2Wrapper.html#ab3fdccad236992bb048094aa3fb52893">dramsim</a>-&gt;update();
<a name="l00199"></a>00199 }
</pre></div></p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="a5164bcd378cd3ca479f3df831726f5da"></a><!-- doxytag: member="DRAMSim2Wrapper::_burstSize" ref="a5164bcd378cd3ca479f3df831726f5da" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="classDRAMSim2Wrapper.html#a5164bcd378cd3ca479f3df831726f5da">_burstSize</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aba0cb71192619554d50451635e5d6a52"></a><!-- doxytag: member="DRAMSim2Wrapper::_clockPeriod" ref="aba0cb71192619554d50451635e5d6a52" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classDRAMSim2Wrapper.html#aba0cb71192619554d50451635e5d6a52">_clockPeriod</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a16dbba262c462bdaa1a3e55e1d69968c"></a><!-- doxytag: member="DRAMSim2Wrapper::_queueSize" ref="a16dbba262c462bdaa1a3e55e1d69968c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="classDRAMSim2Wrapper.html#a16dbba262c462bdaa1a3e55e1d69968c">_queueSize</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab3fdccad236992bb048094aa3fb52893"></a><!-- doxytag: member="DRAMSim2Wrapper::dramsim" ref="ab3fdccad236992bb048094aa3fb52893" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DRAMSim::MultiChannelMemorySystem* <a class="el" href="classDRAMSim2Wrapper.html#ab3fdccad236992bb048094aa3fb52893">dramsim</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>mem/<a class="el" href="dramsim2__wrapper_8hh_source.html">dramsim2_wrapper.hh</a></li>
<li>mem/<a class="el" href="dramsim2__wrapper_8cc.html">dramsim2_wrapper.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
