<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス Resource</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>クラス Resource</h1><!-- doxytag: class="Resource" -->
<p><code>#include &lt;<a class="el" href="resource_8hh_source.html">resource.hh</a>&gt;</code></p>
<div class="dynheader">
Resourceに対する継承グラフ</div>
<div class="dynsection">
 <div class="center">
  <img src="classResource.gif" usemap="#Resource_map" alt=""/>
  <map id="Resource_map" name="Resource_map">
<area href="classAGENUnit.html" alt="AGENUnit" shape="rect" coords="225,56,440,80"/>
<area href="classBranchPredictor.html" alt="BranchPredictor" shape="rect" coords="225,112,440,136"/>
<area href="classCacheUnit.html" alt="CacheUnit" shape="rect" coords="225,168,440,192"/>
<area href="classDecodeUnit.html" alt="DecodeUnit" shape="rect" coords="225,224,440,248"/>
<area href="classExecutionUnit.html" alt="ExecutionUnit" shape="rect" coords="225,280,440,304"/>
<area href="classFetchSeqUnit.html" alt="FetchSeqUnit" shape="rect" coords="225,336,440,360"/>
<area href="classGraduationUnit.html" alt="GraduationUnit" shape="rect" coords="225,392,440,416"/>
<area href="classInstBuffer.html" alt="InstBuffer" shape="rect" coords="225,448,440,472"/>
<area href="classMemDepUnit.html" alt="MemDepUnit&lt; MemDepPred, Impl &gt;" shape="rect" coords="225,504,440,528"/>
<area href="classMultDivUnit.html" alt="MultDivUnit" shape="rect" coords="225,560,440,584"/>
<area href="classTLBUnit.html" alt="TLBUnit" shape="rect" coords="225,616,440,640"/>
<area href="classUseDefUnit.html" alt="UseDefUnit" shape="rect" coords="225,672,440,696"/>
</map>
 </div>
</div>

<p><a href="classResource-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public 型</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classRefCountingPtr.html">ThePipeline::DynInstPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#af9d0c8a46736ba6aa2d8bb94da1a5e73">DynInstPtr</a></td></tr>
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a0fa53d2551f0069c7ce630fca9105c63">Resource</a> (std::string res_name, int res_id, int res_width, <a class="el" href="classCycles.html">Cycles</a> res_latency, <a class="el" href="classInOrderCPU.html">InOrderCPU</a> *_cpu)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#af04be79e8cd12b4e3ab7361f3237ed26">~Resource</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#af1801e31af6399bccce114ab12575168">name</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a67283be3f45257d1e0c474c563ebb6b6">getId</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a02fd73d861ef2e4aabb38c0c9ff82947">init</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#aef17f15baa657a3b0b17d6a2c855fb02">initSlots</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#ac1739a9be0fbd5d96cf441cd3b2c1c78">regStats</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#ab75d2f4e158982d66b44263d96cdd058">activateThread</a> (<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#ad11d9216ad92d9036ebf37844cf6e706">deactivateThread</a> (<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#ad2f3fddbc6dd67ef5e3a84cd7a9814e6">suspendThread</a> (<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a2cf5450ce736e0c76aca0d4ef24b922a">updateAfterContextSwitch</a> (<a class="el" href="classRefCountingPtr.html">DynInstPtr</a> inst, <a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#ad09300971c77caba13bf59e77b99ea24">instGraduated</a> (<a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> seq_num, <a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a1eb2a0229740a87bde0282416035b864">trap</a> (<a class="el" href="classRefCountingPtr.html">Fault</a> fault, <a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid, <a class="el" href="classRefCountingPtr.html">DynInstPtr</a> inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classResourceRequest.html">ResourceRequest</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#acd38b2c94092af431807b57f7b7cef6c">request</a> (<a class="el" href="classRefCountingPtr.html">DynInstPtr</a> inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#ab3ba2ee95c723c8c056db0a1f2a6dfd3">getSlot</a> (<a class="el" href="classRefCountingPtr.html">DynInstPtr</a> inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a990f82d45376225d628def316f024f6b">findSlot</a> (<a class="el" href="classRefCountingPtr.html">DynInstPtr</a> inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a19ec1254d9f9be5b3058fad36034f7da">freeSlot</a> (int slot_idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classResourceRequest.html">ResourceRequest</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#aae5ce84f94a1057d7f60172daf5d731d">getRequest</a> (<a class="el" href="classRefCountingPtr.html">DynInstPtr</a> _inst, int stage_num, int res_idx, int slot_num, unsigned cmd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a9f90c5efcf202dda43bb780a645bee1f">scheduleExecution</a> (int slot_idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a39af49c5568d1db3f53c12d7d6914c32">execute</a> (int slot_idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a04a5d185526d3121fee572712fe353ad">doFetchAccess</a> (<a class="el" href="classRefCountingPtr.html">DynInstPtr</a> inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#aa874bbb279acf67627511df8f4c3dce5">doCacheAccess</a> (<a class="el" href="classRefCountingPtr.html">DynInstPtr</a> inst, uint64_t *write_result=NULL, <a class="el" href="classCacheRequest.html">CacheReqPtr</a> split_req=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#ab03920cf8ee0a1dd131d4a6db0320f71">setupSquash</a> (<a class="el" href="classRefCountingPtr.html">DynInstPtr</a> inst, int stage_num, <a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a52235c5e3d912452f254dc45f1496fd2">squash</a> (<a class="el" href="classRefCountingPtr.html">DynInstPtr</a> inst, int stage_num, <a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> squash_seq_num, <a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#ae2d6fba25ece343caad6eb029a4a3b5b">squashDueToMemStall</a> (<a class="el" href="classRefCountingPtr.html">DynInstPtr</a> inst, int stage_num, <a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> squash_seq_num, <a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#ac04c1a8a5c1212f9bbdc1ce83b1da882">squashThenTrap</a> (int stage_num, <a class="el" href="classRefCountingPtr.html">DynInstPtr</a> inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#aa376a7fab43ff33531fff37daaf97d30">slotsAvail</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a7996fa2858e57c95ac52ee2813f816f7">slotsInUse</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a55e9744a3539be9ff746b13b1d6bafc3">scheduleEvent</a> (int slot_idx, <a class="el" href="classCycles.html">Cycles</a> delay)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a9463594c1003adcd1e810ad6cea904eb">scheduleEvent</a> (<a class="el" href="classRefCountingPtr.html">DynInstPtr</a> inst, <a class="el" href="classCycles.html">Cycles</a> delay)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a30247366c4c8cb82c2a196a286d309ad">unscheduleEvent</a> (int slot_idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a2ca5964896e91fdb616377369e29cfc4">unscheduleEvent</a> (<a class="el" href="classRefCountingPtr.html">DynInstPtr</a> inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classResourceRequest.html">ResReqPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#ae3afc1c63d17a49a6301bd18fca574a0">findRequest</a> (<a class="el" href="classRefCountingPtr.html">DynInstPtr</a> inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a00d6f4600ca80ac12352a9c0d3922857">rejectRequest</a> (<a class="el" href="classRefCountingPtr.html">DynInstPtr</a> inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a9063fd6f97e36e3565247339ffa3882c">requestAgain</a> (<a class="el" href="classRefCountingPtr.html">DynInstPtr</a> inst, bool &amp;try_request)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classCycles.html">Cycles</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a0d3550b57856a6b656d76b87a9d6b6e8">getLatency</a> (int slot_num)</td></tr>
<tr><td colspan="2"><h2>Public 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt; <a class="el" href="classResourceRequest.html">ResReqPtr</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a83b4e5928b54d2813c3c4911043e677d">reqs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt; int &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a1dd2ecf45bf9024f273d09813d993f97">availSlots</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classInOrderCPU.html">InOrderCPU</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a41d682c28d0f49e04393c52815808782">cpu</a></td></tr>
<tr><td colspan="2"><h2>Protected 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a991d4c92f58169fd45fe3f1c1881ac9e">resName</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a2474a5474cbff19523a51eb1de01cda4">width</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classCycles.html">Cycles</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a46b9d67ee437c6ecdbedca8ec8d2ed40">latency</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classResourceEvent.html">ResourceEvent</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#abde7a6c4ff046aa4c2ecd476c4266be3">resourceEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classResourceRequest.html">ResReqPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a52489b62c55d7db3b70c3713b3000601">deniedReq</a></td></tr>
<tr><td colspan="2"><h2>フレンド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#a80da161b04f097f36d40b2bb699192b6">ResourceEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResource.html#ae78e4599e7afd86b067119e90ac5dfed">ResourceRequest</a></td></tr>
</table>
<hr/><h2>型定義</h2>
<a class="anchor" id="af9d0c8a46736ba6aa2d8bb94da1a5e73"></a><!-- doxytag: member="Resource::DynInstPtr" ref="af9d0c8a46736ba6aa2d8bb94da1a5e73" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classRefCountingPtr.html">ThePipeline::DynInstPtr</a> <a class="el" href="classRefCountingPtr.html">DynInstPtr</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classAGENUnit.html#a32d1573770d3d1d96a1741ac80433e33">AGENUnit</a>, <a class="el" href="classBranchPredictor.html#af9d0c8a46736ba6aa2d8bb94da1a5e73">BranchPredictor</a>, <a class="el" href="classCacheUnit.html#af9d0c8a46736ba6aa2d8bb94da1a5e73">CacheUnit</a>, <a class="el" href="classDecodeUnit.html#af9d0c8a46736ba6aa2d8bb94da1a5e73">DecodeUnit</a>, <a class="el" href="classExecutionUnit.html#af9d0c8a46736ba6aa2d8bb94da1a5e73">ExecutionUnit</a>, <a class="el" href="classFetchSeqUnit.html#af9d0c8a46736ba6aa2d8bb94da1a5e73">FetchSeqUnit</a>, <a class="el" href="classFetchUnit.html#af9d0c8a46736ba6aa2d8bb94da1a5e73">FetchUnit</a>, <a class="el" href="classGraduationUnit.html#af9d0c8a46736ba6aa2d8bb94da1a5e73">GraduationUnit</a>, <a class="el" href="classInstBuffer.html#af9d0c8a46736ba6aa2d8bb94da1a5e73">InstBuffer</a>, <a class="el" href="classMemDepUnit.html#af9d0c8a46736ba6aa2d8bb94da1a5e73">MemDepUnit&lt; MemDepPred, Impl &gt;</a>, <a class="el" href="classMultDivUnit.html#af9d0c8a46736ba6aa2d8bb94da1a5e73">MultDivUnit</a>, <a class="el" href="classTLBUnit.html#af9d0c8a46736ba6aa2d8bb94da1a5e73">TLBUnit</a>, <a class="el" href="classUseDefUnit.html#af9d0c8a46736ba6aa2d8bb94da1a5e73">UseDefUnit</a>, と <a class="el" href="classMemDepUnit.html#a028ce10889c5f6450239d9e9a7347976">MemDepUnit&lt; MemDepPred, Impl &gt;</a>で再定義されています。</p>

</div>
</div>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="a0fa53d2551f0069c7ce630fca9105c63"></a><!-- doxytag: member="Resource::Resource" ref="a0fa53d2551f0069c7ce630fca9105c63" args="(std::string res_name, int res_id, int res_width, Cycles res_latency, InOrderCPU *_cpu)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classResource.html">Resource</a> </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>res_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>res_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>res_width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCycles.html">Cycles</a>&nbsp;</td>
          <td class="paramname"> <em>res_latency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classInOrderCPU.html">InOrderCPU</a> *&nbsp;</td>
          <td class="paramname"> <em>_cpu</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="af04be79e8cd12b4e3ab7361f3237ed26"></a><!-- doxytag: member="Resource::~Resource" ref="af04be79e8cd12b4e3ab7361f3237ed26" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classResource.html">Resource</a> </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00060"></a>00060 {
<a name="l00061"></a>00061     <span class="keywordflow">if</span> (<a class="code" href="classResource.html#abde7a6c4ff046aa4c2ecd476c4266be3">resourceEvent</a>) {
<a name="l00062"></a>00062         <span class="keyword">delete</span> [] <a class="code" href="classResource.html#abde7a6c4ff046aa4c2ecd476c4266be3">resourceEvent</a>;
<a name="l00063"></a>00063     }
<a name="l00064"></a>00064 
<a name="l00065"></a>00065     <span class="keyword">delete</span> <a class="code" href="classResource.html#a52489b62c55d7db3b70c3713b3000601">deniedReq</a>;
<a name="l00066"></a>00066 
<a name="l00067"></a>00067     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classResource.html#a2474a5474cbff19523a51eb1de01cda4">width</a>; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00068"></a>00068         <span class="keyword">delete</span> <a class="code" href="classResource.html#a83b4e5928b54d2813c3c4911043e677d">reqs</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>];
<a name="l00069"></a>00069     }
<a name="l00070"></a>00070 }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="ab75d2f4e158982d66b44263d96cdd058"></a><!-- doxytag: member="Resource::activateThread" ref="ab75d2f4e158982d66b44263d96cdd058" args="(ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void activateThread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Resources that care about thread activation override this. </p>

<p><a class="el" href="classFetchSeqUnit.html#a687aa4600423bb30ecf3bb1da6cd6000">FetchSeqUnit</a>で再定義されています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00086"></a>00086 { }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad11d9216ad92d9036ebf37844cf6e706"></a><!-- doxytag: member="Resource::deactivateThread" ref="ad11d9216ad92d9036ebf37844cf6e706" args="(ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void deactivateThread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Deactivate Thread. Default action is to squash all instructions from deactivated thread. </p>

<p><a class="el" href="classFetchSeqUnit.html#ad11d9216ad92d9036ebf37844cf6e706">FetchSeqUnit</a>で再定義されています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00284"></a>00284 {
<a name="l00285"></a>00285     <span class="comment">// In the most basic case, deactivation means squashing everything</span>
<a name="l00286"></a>00286     <span class="comment">// from a particular thread</span>
<a name="l00287"></a>00287     <a class="code" href="classResource.html#af9d0c8a46736ba6aa2d8bb94da1a5e73">DynInstPtr</a> dummy_inst = <span class="keyword">new</span> <a class="code" href="classInOrderDynInst.html">InOrderDynInst</a>(<a class="code" href="classResource.html#a41d682c28d0f49e04393c52815808782">cpu</a>, <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>, 0, tid, tid);
<a name="l00288"></a>00288     <a class="code" href="classResource.html#a52235c5e3d912452f254dc45f1496fd2">squash</a>(dummy_inst, 0, 0, tid);
<a name="l00289"></a>00289 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa874bbb279acf67627511df8f4c3dce5"></a><!-- doxytag: member="Resource::doCacheAccess" ref="aa874bbb279acf67627511df8f4c3dce5" args="(DynInstPtr inst, uint64_t *write_result=NULL, CacheReqPtr split_req=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void doCacheAccess </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRefCountingPtr.html">DynInstPtr</a>&nbsp;</td>
          <td class="paramname"> <em>inst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&nbsp;</td>
          <td class="paramname"> <em>write_result</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCacheRequest.html">CacheReqPtr</a>&nbsp;</td>
          <td class="paramname"> <em>split_req</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Read/Write on behalf of an instruction. Will check to see if instruction is actually in resource before trying to do access.Needs to be defined for derived units. </p>

<p><a class="el" href="classCacheUnit.html#afc4f09d8e36072c3a3c361f2edf108b4">CacheUnit</a>で再定義されています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00161"></a>00161     { <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;doCacheAccess undefined for %s&quot;</span>, <a class="code" href="classResource.html#af1801e31af6399bccce114ab12575168">name</a>()); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a04a5d185526d3121fee572712fe353ad"></a><!-- doxytag: member="Resource::doFetchAccess" ref="a04a5d185526d3121fee572712fe353ad" args="(DynInstPtr inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classRefCountingPtr.html">Fault</a> doFetchAccess </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRefCountingPtr.html">DynInstPtr</a>&nbsp;</td>
          <td class="paramname"> <em>inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Fetch on behalf of an instruction. Will check to see if instruction is actually in resource before trying to fetch. Needs to be defined for derived units. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00148"></a>00148     { <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;doFetchAccess undefined for %s&quot;</span>, <a class="code" href="classResource.html#af1801e31af6399bccce114ab12575168">name</a>()); <span class="keywordflow">return</span> <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a39af49c5568d1db3f53c12d7d6914c32"></a><!-- doxytag: member="Resource::execute" ref="a39af49c5568d1db3f53c12d7d6914c32" args="(int slot_idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void execute </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>slot_idx</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Execute the function of this resource. The Default is action is to do nothing. More specific models will derive from this class and define their own execute function. </p>

<p><a class="el" href="classAGENUnit.html#a7b7fff82f8c9cbdb02add1346f60bb9e">AGENUnit</a>, <a class="el" href="classBranchPredictor.html#a7b7fff82f8c9cbdb02add1346f60bb9e">BranchPredictor</a>, <a class="el" href="classCacheUnit.html#a7b7fff82f8c9cbdb02add1346f60bb9e">CacheUnit</a>, <a class="el" href="classDecodeUnit.html#a7b7fff82f8c9cbdb02add1346f60bb9e">DecodeUnit</a>, <a class="el" href="classExecutionUnit.html#a7b7fff82f8c9cbdb02add1346f60bb9e">ExecutionUnit</a>, <a class="el" href="classFetchSeqUnit.html#a7b7fff82f8c9cbdb02add1346f60bb9e">FetchSeqUnit</a>, <a class="el" href="classFetchUnit.html#a7b7fff82f8c9cbdb02add1346f60bb9e">FetchUnit</a>, <a class="el" href="classGraduationUnit.html#a7b7fff82f8c9cbdb02add1346f60bb9e">GraduationUnit</a>, <a class="el" href="classInstBuffer.html#a7b7fff82f8c9cbdb02add1346f60bb9e">InstBuffer</a>, <a class="el" href="classMemDepUnit.html#a74d7cd749b79186057ad86f5f7b79fd2">MemDepUnit&lt; MemDepPred, Impl &gt;</a>, <a class="el" href="classMultDivUnit.html#a7b7fff82f8c9cbdb02add1346f60bb9e">MultDivUnit</a>, <a class="el" href="classTLBUnit.html#a7b7fff82f8c9cbdb02add1346f60bb9e">TLBUnit</a>, と <a class="el" href="classUseDefUnit.html#a7b7fff82f8c9cbdb02add1346f60bb9e">UseDefUnit</a>で再定義されています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00274"></a>00274 {
<a name="l00275"></a>00275     <span class="comment">//@todo: have each resource print out command their executing</span>
<a name="l00276"></a>00276     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classResource.html">Resource</a>, <span class="stringliteral">&quot;[tid:%i]: Executing %s resource.\n&quot;</span>,
<a name="l00277"></a>00277             <a class="code" href="classResource.html#a83b4e5928b54d2813c3c4911043e677d">reqs</a>[slot_idx]-&gt;getTid(), <a class="code" href="classResource.html#af1801e31af6399bccce114ab12575168">name</a>());
<a name="l00278"></a>00278     <a class="code" href="classResource.html#a83b4e5928b54d2813c3c4911043e677d">reqs</a>[slot_idx]-&gt;setCompleted(<span class="keyword">true</span>);
<a name="l00279"></a>00279     <a class="code" href="classResource.html#a83b4e5928b54d2813c3c4911043e677d">reqs</a>[slot_idx]-&gt;done();
<a name="l00280"></a>00280 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae3afc1c63d17a49a6301bd18fca574a0"></a><!-- doxytag: member="Resource::findRequest" ref="ae3afc1c63d17a49a6301bd18fca574a0" args="(DynInstPtr inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classResourceRequest.html">ResReqPtr</a> findRequest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRefCountingPtr.html">DynInstPtr</a>&nbsp;</td>
          <td class="paramname"> <em>inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Find the request that corresponds to this instruction </p>

<p><a class="el" href="classCacheUnit.html#ae3afc1c63d17a49a6301bd18fca574a0">CacheUnit</a>, と <a class="el" href="classUseDefUnit.html#ae3afc1c63d17a49a6301bd18fca574a0">UseDefUnit</a>で再定義されています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00254"></a>00254 {
<a name="l00255"></a>00255     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classResource.html#a2474a5474cbff19523a51eb1de01cda4">width</a>; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00256"></a>00256         <span class="keywordflow">if</span> (<a class="code" href="classResource.html#a83b4e5928b54d2813c3c4911043e677d">reqs</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>]-&gt;valid &amp;&amp;
<a name="l00257"></a>00257             <a class="code" href="classResource.html#a83b4e5928b54d2813c3c4911043e677d">reqs</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>]-&gt;getInst() == inst) {
<a name="l00258"></a>00258             <span class="keywordflow">return</span> <a class="code" href="classResource.html#a83b4e5928b54d2813c3c4911043e677d">reqs</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>];
<a name="l00259"></a>00259         }
<a name="l00260"></a>00260     }
<a name="l00261"></a>00261 
<a name="l00262"></a>00262     <span class="keywordflow">return</span> <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00263"></a>00263 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a990f82d45376225d628def316f024f6b"></a><!-- doxytag: member="Resource::findSlot" ref="a990f82d45376225d628def316f024f6b" args="(DynInstPtr inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int findSlot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRefCountingPtr.html">DynInstPtr</a>&nbsp;</td>
          <td class="paramname"> <em>inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Find the slot that this instruction is using in a resource </p>

<p><div class="fragment"><pre class="fragment"><a name="l00136"></a>00136 {
<a name="l00137"></a>00137     <span class="keywordtype">int</span> slot_num = -1;
<a name="l00138"></a>00138 
<a name="l00139"></a>00139     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classResource.html#a2474a5474cbff19523a51eb1de01cda4">width</a>; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00140"></a>00140         <span class="keywordflow">if</span> (<a class="code" href="classResource.html#a83b4e5928b54d2813c3c4911043e677d">reqs</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>]-&gt;valid &amp;&amp;
<a name="l00141"></a>00141             <a class="code" href="classResource.html#a83b4e5928b54d2813c3c4911043e677d">reqs</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>]-&gt;getInst()-&gt;seqNum == inst-&gt;seqNum) {
<a name="l00142"></a>00142             slot_num = <a class="code" href="classResource.html#a83b4e5928b54d2813c3c4911043e677d">reqs</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>]-&gt;getSlot();
<a name="l00143"></a>00143         }
<a name="l00144"></a>00144     }
<a name="l00145"></a>00145     <span class="keywordflow">return</span> slot_num;
<a name="l00146"></a>00146 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a19ec1254d9f9be5b3058fad36034f7da"></a><!-- doxytag: member="Resource::freeSlot" ref="a19ec1254d9f9be5b3058fad36034f7da" args="(int slot_idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void freeSlot </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>slot_idx</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Free a resource slot </p>

<p><div class="fragment"><pre class="fragment"><a name="l00123"></a>00123 {
<a name="l00124"></a>00124     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classResource.html">Resource</a>, <span class="stringliteral">&quot;Deallocating [slot:%i].\n&quot;</span>,
<a name="l00125"></a>00125             slot_idx);
<a name="l00126"></a>00126 
<a name="l00127"></a>00127     <span class="comment">// Put slot number on this resource&apos;s free list</span>
<a name="l00128"></a>00128     <a class="code" href="classResource.html#a1dd2ecf45bf9024f273d09813d993f97">availSlots</a>.push_back(slot_idx);
<a name="l00129"></a>00129 
<a name="l00130"></a>00130     <span class="comment">// Invalidate Request &amp; Reset it&apos;s flags</span>
<a name="l00131"></a>00131     <a class="code" href="classResource.html#a83b4e5928b54d2813c3c4911043e677d">reqs</a>[slot_idx]-&gt;clearRequest();
<a name="l00132"></a>00132 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a67283be3f45257d1e0c474c563ebb6b6"></a><!-- doxytag: member="Resource::getId" ref="a67283be3f45257d1e0c474c563ebb6b6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getId </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return ID for this resource </p>

<p><div class="fragment"><pre class="fragment"><a name="l00074"></a>00074 { <span class="keywordflow">return</span> <a class="code" href="classResource.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0d3550b57856a6b656d76b87a9d6b6e8"></a><!-- doxytag: member="Resource::getLatency" ref="a0d3550b57856a6b656d76b87a9d6b6e8" args="(int slot_num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classCycles.html">Cycles</a> getLatency </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>slot_num</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return Latency of <a class="el" href="classResource.html">Resource</a> </p>

<p><div class="fragment"><pre class="fragment"><a name="l00211"></a>00211 { <span class="keywordflow">return</span> <a class="code" href="classResource.html#a46b9d67ee437c6ecdbedca8ec8d2ed40">latency</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aae5ce84f94a1057d7f60172daf5d731d"></a><!-- doxytag: member="Resource::getRequest" ref="aae5ce84f94a1057d7f60172daf5d731d" args="(DynInstPtr _inst, int stage_num, int res_idx, int slot_num, unsigned cmd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classResourceRequest.html">ResReqPtr</a> getRequest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRefCountingPtr.html">DynInstPtr</a>&nbsp;</td>
          <td class="paramname"> <em>_inst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stage_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>res_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>slot_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>cmd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classRequest.html">Request</a> usage of a resource for this instruction. If this instruction already has made this request to this resource, and that request is uncompleted this function will just return that request </p>

<p><a class="el" href="classCacheUnit.html#aae5ce84f94a1057d7f60172daf5d731d">CacheUnit</a>, <a class="el" href="classFetchUnit.html#aae5ce84f94a1057d7f60172daf5d731d">FetchUnit</a>, <a class="el" href="classTLBUnit.html#a98b2e8ae07f180e62be1d03beae400f9">TLBUnit</a>, と <a class="el" href="classUseDefUnit.html#aae5ce84f94a1057d7f60172daf5d731d">UseDefUnit</a>で再定義されています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00247"></a>00247 {
<a name="l00248"></a>00248     <a class="code" href="classResource.html#a83b4e5928b54d2813c3c4911043e677d">reqs</a>[slot_num]-&gt;setRequest(inst, stage_num, <span class="keywordtype">id</span>, slot_num, cmd);
<a name="l00249"></a>00249     <span class="keywordflow">return</span> <a class="code" href="classResource.html#a83b4e5928b54d2813c3c4911043e677d">reqs</a>[slot_num];
<a name="l00250"></a>00250 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab3ba2ee95c723c8c056db0a1f2a6dfd3"></a><!-- doxytag: member="Resource::getSlot" ref="ab3ba2ee95c723c8c056db0a1f2a6dfd3" args="(DynInstPtr inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getSlot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRefCountingPtr.html">DynInstPtr</a>&nbsp;</td>
          <td class="paramname"> <em>inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the next available slot in this resource. Instruction is passed so that resources can check the instruction before allocating a slot if necessary. </p>

<p><a class="el" href="classCacheUnit.html#ab3ba2ee95c723c8c056db0a1f2a6dfd3">CacheUnit</a>, <a class="el" href="classMultDivUnit.html#ab3ba2ee95c723c8c056db0a1f2a6dfd3">MultDivUnit</a>, と <a class="el" href="classTLBUnit.html#ab3ba2ee95c723c8c056db0a1f2a6dfd3">TLBUnit</a>で再定義されています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00150"></a>00150 {
<a name="l00151"></a>00151     <span class="keywordtype">int</span> slot_num = -1;
<a name="l00152"></a>00152 
<a name="l00153"></a>00153     <span class="keywordflow">if</span> (<a class="code" href="classResource.html#aa376a7fab43ff33531fff37daaf97d30">slotsAvail</a>() != 0) {
<a name="l00154"></a>00154         slot_num = <a class="code" href="classResource.html#a1dd2ecf45bf9024f273d09813d993f97">availSlots</a>[0];
<a name="l00155"></a>00155 
<a name="l00156"></a>00156         <a class="code" href="classstd_1_1vector.html">vector&lt;int&gt;::iterator</a> vect_it = <a class="code" href="classResource.html#a1dd2ecf45bf9024f273d09813d993f97">availSlots</a>.begin();
<a name="l00157"></a>00157 
<a name="l00158"></a>00158         assert(slot_num == *vect_it);
<a name="l00159"></a>00159 
<a name="l00160"></a>00160         <a class="code" href="classResource.html#a1dd2ecf45bf9024f273d09813d993f97">availSlots</a>.erase(vect_it);
<a name="l00161"></a>00161     }
<a name="l00162"></a>00162 
<a name="l00163"></a>00163     <span class="keywordflow">return</span> slot_num;
<a name="l00164"></a>00164 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a02fd73d861ef2e4aabb38c0c9ff82947"></a><!-- doxytag: member="Resource::init" ref="a02fd73d861ef2e4aabb38c0c9ff82947" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Any extra initiliazation stuff can be set up using this function that should get called before the simulation starts (tick 0) </p>

<p><a class="el" href="classCacheUnit.html#a02fd73d861ef2e4aabb38c0c9ff82947">CacheUnit</a>, <a class="el" href="classFetchSeqUnit.html#a02fd73d861ef2e4aabb38c0c9ff82947">FetchSeqUnit</a>, <a class="el" href="classMultDivUnit.html#a02fd73d861ef2e4aabb38c0c9ff82947">MultDivUnit</a>, <a class="el" href="classTLBUnit.html#a02fd73d861ef2e4aabb38c0c9ff82947">TLBUnit</a>, と <a class="el" href="classUseDefUnit.html#a02fd73d861ef2e4aabb38c0c9ff82947">UseDefUnit</a>で再定義されています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00075"></a>00075 {
<a name="l00076"></a>00076     <span class="comment">// If the resource has a zero-cycle (no latency)</span>
<a name="l00077"></a>00077     <span class="comment">// function, then no reason to have events</span>
<a name="l00078"></a>00078     <span class="comment">// that will process them for the right tick</span>
<a name="l00079"></a>00079     <span class="keywordflow">if</span> (<a class="code" href="classResource.html#a46b9d67ee437c6ecdbedca8ec8d2ed40">latency</a> &gt; <a class="code" href="classCycles.html">Cycles</a>(0))
<a name="l00080"></a>00080       <a class="code" href="classResource.html#abde7a6c4ff046aa4c2ecd476c4266be3">resourceEvent</a> = <span class="keyword">new</span> <a class="code" href="classResourceEvent.html">ResourceEvent</a>[<a class="code" href="classResource.html#a2474a5474cbff19523a51eb1de01cda4">width</a>];
<a name="l00081"></a>00081 
<a name="l00082"></a>00082 
<a name="l00083"></a>00083     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classResource.html#a2474a5474cbff19523a51eb1de01cda4">width</a>; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++)
<a name="l00084"></a>00084       <a class="code" href="classResource.html#a83b4e5928b54d2813c3c4911043e677d">reqs</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>] = <span class="keyword">new</span> <a class="code" href="classResource.html#ae78e4599e7afd86b067119e90ac5dfed">ResourceRequest</a>(<span class="keyword">this</span>);
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 
<a name="l00087"></a>00087     <a class="code" href="classResource.html#aef17f15baa657a3b0b17d6a2c855fb02">initSlots</a>();
<a name="l00088"></a>00088 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aef17f15baa657a3b0b17d6a2c855fb02"></a><!-- doxytag: member="Resource::initSlots" ref="aef17f15baa657a3b0b17d6a2c855fb02" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initSlots </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00092"></a>00092 {
<a name="l00093"></a>00093     <span class="comment">// Add available slot numbers for resource</span>
<a name="l00094"></a>00094     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> slot_idx = 0; slot_idx &lt; <a class="code" href="classResource.html#a2474a5474cbff19523a51eb1de01cda4">width</a>; slot_idx++) {
<a name="l00095"></a>00095         <a class="code" href="classResource.html#a1dd2ecf45bf9024f273d09813d993f97">availSlots</a>.push_back(slot_idx);
<a name="l00096"></a>00096 
<a name="l00097"></a>00097         <span class="keywordflow">if</span> (<a class="code" href="classResource.html#abde7a6c4ff046aa4c2ecd476c4266be3">resourceEvent</a>) {
<a name="l00098"></a>00098             <a class="code" href="classResource.html#abde7a6c4ff046aa4c2ecd476c4266be3">resourceEvent</a>[slot_idx].<a class="code" href="classResourceEvent.html#ac5f8be30d21fb73f191f9e7319c55bb4">init</a>(<span class="keyword">this</span>, slot_idx);
<a name="l00099"></a>00099         }
<a name="l00100"></a>00100     }
<a name="l00101"></a>00101 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad09300971c77caba13bf59e77b99ea24"></a><!-- doxytag: member="Resource::instGraduated" ref="ad09300971c77caba13bf59e77b99ea24" args="(InstSeqNum seq_num, ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void instGraduated </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a>&nbsp;</td>
          <td class="paramname"> <em>seq_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Resources that care when an instruction has been graduated can override this </p>

<p><a class="el" href="classBranchPredictor.html#a3f5f4da90448a4c3a3c0533881fb3129">BranchPredictor</a>で再定義されています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00104"></a>00104 { }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af1801e31af6399bccce114ab12575168"></a><!-- doxytag: member="Resource::name" ref="af1801e31af6399bccce114ab12575168" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string name </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return name of this resource </p>

<p><div class="fragment"><pre class="fragment"><a name="l00105"></a>00105 {
<a name="l00106"></a>00106     <span class="keywordflow">return</span> <a class="code" href="classResource.html#a41d682c28d0f49e04393c52815808782">cpu</a>-&gt;name() + <span class="stringliteral">&quot;.&quot;</span>  + <a class="code" href="classResource.html#a991d4c92f58169fd45fe3f1c1881ac9e">resName</a>;
<a name="l00107"></a>00107 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac1739a9be0fbd5d96cf441cd3b2c1c78"></a><!-- doxytag: member="Resource::regStats" ref="ac1739a9be0fbd5d96cf441cd3b2c1c78" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void regStats </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classRegister.html">Register</a> <a class="el" href="namespaceStats.html">Stats</a> for this resource </p>

<p><a class="el" href="classAGENUnit.html#a4dc637449366fcdfc4e764cdf12d9b11">AGENUnit</a>, <a class="el" href="classBranchPredictor.html#a4dc637449366fcdfc4e764cdf12d9b11">BranchPredictor</a>, <a class="el" href="classExecutionUnit.html#a4dc637449366fcdfc4e764cdf12d9b11">ExecutionUnit</a>, <a class="el" href="classInstBuffer.html#a4dc637449366fcdfc4e764cdf12d9b11">InstBuffer</a>, <a class="el" href="classMultDivUnit.html#a4dc637449366fcdfc4e764cdf12d9b11">MultDivUnit</a>, <a class="el" href="classUseDefUnit.html#a4dc637449366fcdfc4e764cdf12d9b11">UseDefUnit</a>, と <a class="el" href="classMemDepUnit.html#a4dc637449366fcdfc4e764cdf12d9b11">MemDepUnit&lt; MemDepPred, Impl &gt;</a>で再定義されています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00083"></a>00083 { }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a00d6f4600ca80ac12352a9c0d3922857"></a><!-- doxytag: member="Resource::rejectRequest" ref="a00d6f4600ca80ac12352a9c0d3922857" args="(DynInstPtr inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rejectRequest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRefCountingPtr.html">DynInstPtr</a>&nbsp;</td>
          <td class="paramname"> <em>inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00267"></a>00267 {
<a name="l00268"></a>00268     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(RefCount, <span class="stringliteral">&quot;[tid:%i]: Unable to grant request for [sn:%i].\n&quot;</span>,
<a name="l00269"></a>00269             inst-&gt;readTid(), inst-&gt;seqNum);
<a name="l00270"></a>00270 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acd38b2c94092af431807b57f7b7cef6c"></a><!-- doxytag: member="Resource::request" ref="acd38b2c94092af431807b57f7b7cef6c" args="(DynInstPtr inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classResourceRequest.html">ResReqPtr</a> request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRefCountingPtr.html">DynInstPtr</a>&nbsp;</td>
          <td class="paramname"> <em>inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classRequest.html">Request</a> usage of this resource. Returns a <a class="el" href="classResourceRequest.html">ResourceRequest</a> object with all the necessary resource information </p>

<p><div class="fragment"><pre class="fragment"><a name="l00168"></a>00168 {
<a name="l00169"></a>00169     <span class="comment">// See if the resource is already serving this instruction.</span>
<a name="l00170"></a>00170     <span class="comment">// If so, use that request;</span>
<a name="l00171"></a>00171     <span class="keywordtype">bool</span> try_request = <span class="keyword">false</span>;
<a name="l00172"></a>00172     <span class="keywordtype">int</span> slot_num = -1;
<a name="l00173"></a>00173     <span class="keywordtype">int</span> stage_num;
<a name="l00174"></a>00174     <a class="code" href="classResourceRequest.html">ResReqPtr</a> inst_req = <a class="code" href="classResource.html#ae3afc1c63d17a49a6301bd18fca574a0">findRequest</a>(inst);
<a name="l00175"></a>00175 
<a name="l00176"></a>00176     <span class="keywordflow">if</span> (inst_req) {
<a name="l00177"></a>00177         <span class="comment">// If some preprocessing has to be done on instruction</span>
<a name="l00178"></a>00178         <span class="comment">// that has already requested once, then handle it here.</span>
<a name="l00179"></a>00179         <span class="comment">// update the &apos;try_request&apos; variable if we should</span>
<a name="l00180"></a>00180         <span class="comment">// re-execute the request.</span>
<a name="l00181"></a>00181         <a class="code" href="classResource.html#a9063fd6f97e36e3565247339ffa3882c">requestAgain</a>(inst, try_request);
<a name="l00182"></a>00182 
<a name="l00183"></a>00183         slot_num = inst_req-&gt;<a class="code" href="classResourceRequest.html#aa3dcf920f4d17ee3b6baf56b80de49b8">getSlot</a>();
<a name="l00184"></a>00184         stage_num = inst_req-&gt;<a class="code" href="classResourceRequest.html#a23f98e01fefe4f9932dab663601fc371">getStageNum</a>();
<a name="l00185"></a>00185     } <span class="keywordflow">else</span> {
<a name="l00186"></a>00186         <span class="comment">// Get new slot # for instruction</span>
<a name="l00187"></a>00187         slot_num = <a class="code" href="classResource.html#ab3ba2ee95c723c8c056db0a1f2a6dfd3">getSlot</a>(inst);
<a name="l00188"></a>00188 
<a name="l00189"></a>00189         <span class="keywordflow">if</span> (slot_num != -1) {
<a name="l00190"></a>00190             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classResource.html">Resource</a>, <span class="stringliteral">&quot;Allocating [slot:%i] for [tid:%i]: [sn:%i]\n&quot;</span>,
<a name="l00191"></a>00191                     slot_num, inst-&gt;readTid(), inst-&gt;seqNum);
<a name="l00192"></a>00192 
<a name="l00193"></a>00193             <span class="comment">// Get Stage # from Schedule Entry</span>
<a name="l00194"></a>00194             stage_num = inst-&gt;curSkedEntry-&gt;stageNum;
<a name="l00195"></a>00195             <span class="keywordtype">unsigned</span> cmd = inst-&gt;curSkedEntry-&gt;cmd;
<a name="l00196"></a>00196 
<a name="l00197"></a>00197             <span class="comment">// Generate Resource Request</span>
<a name="l00198"></a>00198             inst_req = <a class="code" href="classResource.html#aae5ce84f94a1057d7f60172daf5d731d">getRequest</a>(inst, stage_num, <span class="keywordtype">id</span>, slot_num, cmd);
<a name="l00199"></a>00199 
<a name="l00200"></a>00200             <span class="keywordflow">if</span> (inst-&gt;staticInst) {
<a name="l00201"></a>00201                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classResource.html">Resource</a>, <span class="stringliteral">&quot;[tid:%i]: [sn:%i] requesting this &quot;</span>
<a name="l00202"></a>00202                         <span class="stringliteral">&quot;resource.\n&quot;</span>,
<a name="l00203"></a>00203                         inst-&gt;readTid(), inst-&gt;seqNum);
<a name="l00204"></a>00204             } <span class="keywordflow">else</span> {
<a name="l00205"></a>00205                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classResource.html">Resource</a>, <span class="stringliteral">&quot;[tid:%i]: instruction requesting this &quot;</span>
<a name="l00206"></a>00206                         <span class="stringliteral">&quot;resource.\n&quot;</span>,
<a name="l00207"></a>00207                         inst-&gt;readTid());
<a name="l00208"></a>00208             }
<a name="l00209"></a>00209 
<a name="l00210"></a>00210             try_request = <span class="keyword">true</span>;
<a name="l00211"></a>00211         } <span class="keywordflow">else</span> {
<a name="l00212"></a>00212             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classResource.html">Resource</a>, <span class="stringliteral">&quot;No slot available for [tid:%i]: [sn:%i]\n&quot;</span>,
<a name="l00213"></a>00213                     inst-&gt;readTid(), inst-&gt;seqNum);
<a name="l00214"></a>00214         }
<a name="l00215"></a>00215 
<a name="l00216"></a>00216     }
<a name="l00217"></a>00217 
<a name="l00218"></a>00218     <span class="keywordflow">if</span> (try_request) {
<a name="l00219"></a>00219         <span class="comment">// Schedule execution of resource</span>
<a name="l00220"></a>00220         <a class="code" href="classResource.html#a9f90c5efcf202dda43bb780a645bee1f">scheduleExecution</a>(slot_num);
<a name="l00221"></a>00221     } <span class="keywordflow">else</span> {
<a name="l00222"></a>00222         inst_req = <a class="code" href="classResource.html#a52489b62c55d7db3b70c3713b3000601">deniedReq</a>;
<a name="l00223"></a>00223         <a class="code" href="classResource.html#a00d6f4600ca80ac12352a9c0d3922857">rejectRequest</a>(inst);
<a name="l00224"></a>00224     }
<a name="l00225"></a>00225 
<a name="l00226"></a>00226     <span class="keywordflow">return</span> inst_req;
<a name="l00227"></a>00227 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9063fd6f97e36e3565247339ffa3882c"></a><!-- doxytag: member="Resource::requestAgain" ref="a9063fd6f97e36e3565247339ffa3882c" args="(DynInstPtr inst, bool &amp;try_request)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void requestAgain </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRefCountingPtr.html">DynInstPtr</a>&nbsp;</td>
          <td class="paramname"> <em>inst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&nbsp;</td>
          <td class="paramname"> <em>try_request</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classRequest.html">Request</a> a <a class="el" href="classResource.html">Resource</a> again. Some resources have to special process this in subsequent accesses. </p>

<p><a class="el" href="classCacheUnit.html#a9063fd6f97e36e3565247339ffa3882c">CacheUnit</a>, と <a class="el" href="classMultDivUnit.html#a9063fd6f97e36e3565247339ffa3882c">MultDivUnit</a>で再定義されています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00231"></a>00231 {
<a name="l00232"></a>00232     do_request = <span class="keyword">true</span>;
<a name="l00233"></a>00233 
<a name="l00234"></a>00234     <span class="keywordflow">if</span> (inst-&gt;staticInst) {
<a name="l00235"></a>00235         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classResource.html">Resource</a>, <span class="stringliteral">&quot;[tid:%i]: [sn:%i] requesting this resource &quot;</span>
<a name="l00236"></a>00236                 <span class="stringliteral">&quot;again.\n&quot;</span>,
<a name="l00237"></a>00237                 inst-&gt;readTid(), inst-&gt;seqNum);
<a name="l00238"></a>00238     } <span class="keywordflow">else</span> {
<a name="l00239"></a>00239         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classResource.html">Resource</a>, <span class="stringliteral">&quot;[tid:%i]: requesting this resource again.\n&quot;</span>,
<a name="l00240"></a>00240                 inst-&gt;readTid());
<a name="l00241"></a>00241     }
<a name="l00242"></a>00242 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9463594c1003adcd1e810ad6cea904eb"></a><!-- doxytag: member="Resource::scheduleEvent" ref="a9463594c1003adcd1e810ad6cea904eb" args="(DynInstPtr inst, Cycles delay)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool scheduleEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRefCountingPtr.html">DynInstPtr</a>&nbsp;</td>
          <td class="paramname"> <em>inst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCycles.html">Cycles</a>&nbsp;</td>
          <td class="paramname"> <em>delay</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Find instruction in list, Schedule resource event, regardless of its current state. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00388"></a>00388 {
<a name="l00389"></a>00389     <span class="keywordtype">int</span> slot_idx = <a class="code" href="classResource.html#a990f82d45376225d628def316f024f6b">findSlot</a>(inst);
<a name="l00390"></a>00390 
<a name="l00391"></a>00391     <span class="keywordflow">if</span>(slot_idx != -1)
<a name="l00392"></a>00392         <a class="code" href="classResource.html#abde7a6c4ff046aa4c2ecd476c4266be3">resourceEvent</a>[slot_idx].<a class="code" href="classResourceEvent.html#af53dcbdc9da1cc615d43ff3bd2b4162c">scheduleEvent</a>(delay);
<a name="l00393"></a>00393 
<a name="l00394"></a>00394     <span class="keywordflow">return</span> slot_idx;
<a name="l00395"></a>00395 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a55e9744a3539be9ff746b13b1d6bafc3"></a><!-- doxytag: member="Resource::scheduleEvent" ref="a55e9744a3539be9ff746b13b1d6bafc3" args="(int slot_idx, Cycles delay)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scheduleEvent </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>slot_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCycles.html">Cycles</a>&nbsp;</td>
          <td class="paramname"> <em>delay</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Schedule resource event, regardless of its current state. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00378"></a>00378 {
<a name="l00379"></a>00379     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classResource.html">Resource</a>, <span class="stringliteral">&quot;[tid:%i]: Scheduling event for [sn:%i] on tick %i.\n&quot;</span>,
<a name="l00380"></a>00380             <a class="code" href="classResource.html#a83b4e5928b54d2813c3c4911043e677d">reqs</a>[slot_idx]-&gt;inst-&gt;readTid(),
<a name="l00381"></a>00381             <a class="code" href="classResource.html#a83b4e5928b54d2813c3c4911043e677d">reqs</a>[slot_idx]-&gt;inst-&gt;seqNum,
<a name="l00382"></a>00382             <a class="code" href="classResource.html#a41d682c28d0f49e04393c52815808782">cpu</a>-&gt;clockEdge(delay));
<a name="l00383"></a>00383     <a class="code" href="classResource.html#abde7a6c4ff046aa4c2ecd476c4266be3">resourceEvent</a>[slot_idx].<a class="code" href="classResourceEvent.html#af53dcbdc9da1cc615d43ff3bd2b4162c">scheduleEvent</a>(delay);
<a name="l00384"></a>00384 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9f90c5efcf202dda43bb780a645bee1f"></a><!-- doxytag: member="Resource::scheduleExecution" ref="a9f90c5efcf202dda43bb780a645bee1f" args="(int slot_idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scheduleExecution </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>slot_idx</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Schedule Execution of This <a class="el" href="classResource.html">Resource</a> For A Given Slot </p>

<p><div class="fragment"><pre class="fragment"><a name="l00368"></a>00368 {
<a name="l00369"></a>00369     <span class="keywordflow">if</span> (<a class="code" href="classResource.html#a46b9d67ee437c6ecdbedca8ec8d2ed40">latency</a> &gt; <a class="code" href="classCycles.html">Cycles</a>(0)) {
<a name="l00370"></a>00370         <a class="code" href="classResource.html#a55e9744a3539be9ff746b13b1d6bafc3">scheduleEvent</a>(slot_num, <a class="code" href="classResource.html#a46b9d67ee437c6ecdbedca8ec8d2ed40">latency</a>);
<a name="l00371"></a>00371     } <span class="keywordflow">else</span> {
<a name="l00372"></a>00372         <a class="code" href="classResource.html#a39af49c5568d1db3f53c12d7d6914c32">execute</a>(slot_num);
<a name="l00373"></a>00373     }
<a name="l00374"></a>00374 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab03920cf8ee0a1dd131d4a6db0320f71"></a><!-- doxytag: member="Resource::setupSquash" ref="ab03920cf8ee0a1dd131d4a6db0320f71" args="(DynInstPtr inst, int stage_num, ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setupSquash </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRefCountingPtr.html">DynInstPtr</a>&nbsp;</td>
          <td class="paramname"> <em>inst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stage_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Setup Squash to be sent out to pipeline and resource pool </p>

<p><div class="fragment"><pre class="fragment"><a name="l00293"></a>00293 {
<a name="l00294"></a>00294     <span class="comment">// Squash In Pipeline Stage</span>
<a name="l00295"></a>00295     <a class="code" href="classResource.html#a41d682c28d0f49e04393c52815808782">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#aae220dcd072e514a6cf72df0abf36d42">pipelineStage</a>[stage_num]-&gt;<a class="code" href="classPipelineStage.html#a9c19142b0bc2ce7b7a6593a5190cebc7">setupSquash</a>(inst, tid);
<a name="l00296"></a>00296 
<a name="l00297"></a>00297     <span class="comment">// Schedule Squash Through-out Resource Pool</span>
<a name="l00298"></a>00298     <a class="code" href="classResource.html#a41d682c28d0f49e04393c52815808782">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a2979f0f9689d1d8615cacdc85c65e11f">resPool</a>-&gt;<a class="code" href="classResourcePool.html#a2ab648fcabe96285d025deacd2175cbd">scheduleEvent</a>(
<a name="l00299"></a>00299         (<a class="code" href="classInOrderCPU.html#aedc081b7a3ef1b1568e62dec4a64c1ca">InOrderCPU::CPUEventType</a>)<a class="code" href="classResourcePool.html#a35de859343d36cfc41403577ea3c7de5af0747b9517d1d94424ee2430a3d7c44c">ResourcePool::SquashAll</a>, inst,
<a name="l00300"></a>00300         <a class="code" href="classCycles.html">Cycles</a>(0));
<a name="l00301"></a>00301 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa376a7fab43ff33531fff37daaf97d30"></a><!-- doxytag: member="Resource::slotsAvail" ref="aa376a7fab43ff33531fff37daaf97d30" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int slotsAvail </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The number of instructions available that this resource can can still process </p>

<p><div class="fragment"><pre class="fragment"><a name="l00111"></a>00111 {
<a name="l00112"></a>00112     <span class="keywordflow">return</span> <a class="code" href="classResource.html#a1dd2ecf45bf9024f273d09813d993f97">availSlots</a>.size();
<a name="l00113"></a>00113 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7996fa2858e57c95ac52ee2813f816f7"></a><!-- doxytag: member="Resource::slotsInUse" ref="a7996fa2858e57c95ac52ee2813f816f7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int slotsInUse </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The number of instructions using this resource </p>

<p><div class="fragment"><pre class="fragment"><a name="l00117"></a>00117 {
<a name="l00118"></a>00118     <span class="keywordflow">return</span> <a class="code" href="classResource.html#a2474a5474cbff19523a51eb1de01cda4">width</a> - <a class="code" href="classResource.html#a1dd2ecf45bf9024f273d09813d993f97">availSlots</a>.size();
<a name="l00119"></a>00119 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a52235c5e3d912452f254dc45f1496fd2"></a><!-- doxytag: member="Resource::squash" ref="a52235c5e3d912452f254dc45f1496fd2" args="(DynInstPtr inst, int stage_num, InstSeqNum squash_seq_num, ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void squash </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRefCountingPtr.html">DynInstPtr</a>&nbsp;</td>
          <td class="paramname"> <em>inst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stage_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a>&nbsp;</td>
          <td class="paramname"> <em>squash_seq_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Squash All Requests After This Seq Num </p>

<p><a class="el" href="classBranchPredictor.html#a52235c5e3d912452f254dc45f1496fd2">BranchPredictor</a>, <a class="el" href="classCacheUnit.html#a52235c5e3d912452f254dc45f1496fd2">CacheUnit</a>, <a class="el" href="classFetchSeqUnit.html#a48e371fe43e53aebbe5b2b2afc5aa8e3">FetchSeqUnit</a>, <a class="el" href="classInstBuffer.html#a52235c5e3d912452f254dc45f1496fd2">InstBuffer</a>, <a class="el" href="classMultDivUnit.html#a52235c5e3d912452f254dc45f1496fd2">MultDivUnit</a>, と <a class="el" href="classTLBUnit.html#a52235c5e3d912452f254dc45f1496fd2">TLBUnit</a>で再定義されています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00306"></a>00306 {
<a name="l00307"></a>00307     <span class="comment">//@todo: check squash seq num before squashing. can save time going</span>
<a name="l00308"></a>00308     <span class="comment">//       through this function.</span>
<a name="l00309"></a>00309     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classResource.html#a2474a5474cbff19523a51eb1de01cda4">width</a>; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00310"></a>00310         <a class="code" href="classResourceRequest.html">ResReqPtr</a> req_ptr = <a class="code" href="classResource.html#a83b4e5928b54d2813c3c4911043e677d">reqs</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>];
<a name="l00311"></a>00311         <a class="code" href="classResource.html#af9d0c8a46736ba6aa2d8bb94da1a5e73">DynInstPtr</a> inst = req_ptr-&gt;<a class="code" href="classResourceRequest.html#af6db09c48a5520b022682b3f32ff771c">getInst</a>();
<a name="l00312"></a>00312 
<a name="l00313"></a>00313         <span class="keywordflow">if</span> (req_ptr-&gt;<a class="code" href="classResourceRequest.html#a28e3c179a86f337095088b3ca02a2b2a">valid</a> &amp;&amp;
<a name="l00314"></a>00314             inst-&gt;readTid() == tid &amp;&amp;
<a name="l00315"></a>00315             inst-&gt;seqNum &gt; squash_seq_num) {
<a name="l00316"></a>00316 
<a name="l00317"></a>00317             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classResource.html">Resource</a>, <span class="stringliteral">&quot;[tid:%i]: Squashing [sn:%i].\n&quot;</span>,
<a name="l00318"></a>00318                     req_ptr-&gt;<a class="code" href="classResourceRequest.html#af6db09c48a5520b022682b3f32ff771c">getInst</a>()-&gt;readTid(),
<a name="l00319"></a>00319                     req_ptr-&gt;<a class="code" href="classResourceRequest.html#af6db09c48a5520b022682b3f32ff771c">getInst</a>()-&gt;seqNum);
<a name="l00320"></a>00320 
<a name="l00321"></a>00321             req_ptr-&gt;<a class="code" href="classResourceRequest.html#abfa7b30b342b5ef70b7e060b305a2f94">setSquashed</a>();
<a name="l00322"></a>00322 
<a name="l00323"></a>00323             <span class="keywordtype">int</span> req_slot_num = req_ptr-&gt;<a class="code" href="classResourceRequest.html#aa3dcf920f4d17ee3b6baf56b80de49b8">getSlot</a>();
<a name="l00324"></a>00324 
<a name="l00325"></a>00325             <span class="keywordflow">if</span> (<a class="code" href="classResource.html#a46b9d67ee437c6ecdbedca8ec8d2ed40">latency</a> &gt; <a class="code" href="classCycles.html">Cycles</a>(0)) {
<a name="l00326"></a>00326                 <span class="keywordflow">if</span> (<a class="code" href="classResource.html#abde7a6c4ff046aa4c2ecd476c4266be3">resourceEvent</a>[req_slot_num].scheduled())
<a name="l00327"></a>00327                     <a class="code" href="classResource.html#a30247366c4c8cb82c2a196a286d309ad">unscheduleEvent</a>(req_slot_num);
<a name="l00328"></a>00328             }
<a name="l00329"></a>00329 
<a name="l00330"></a>00330             <a class="code" href="classResource.html#a19ec1254d9f9be5b3058fad36034f7da">freeSlot</a>(req_slot_num);
<a name="l00331"></a>00331         }
<a name="l00332"></a>00332     }
<a name="l00333"></a>00333 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae2d6fba25ece343caad6eb029a4a3b5b"></a><!-- doxytag: member="Resource::squashDueToMemStall" ref="ae2d6fba25ece343caad6eb029a4a3b5b" args="(DynInstPtr inst, int stage_num, InstSeqNum squash_seq_num, ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void squashDueToMemStall </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRefCountingPtr.html">DynInstPtr</a>&nbsp;</td>
          <td class="paramname"> <em>inst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stage_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a>&nbsp;</td>
          <td class="paramname"> <em>squash_seq_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Squash Requests Due to a Memory Stall (By Default, same as "squash" </p>

<p><a class="el" href="classCacheUnit.html#ae2d6fba25ece343caad6eb029a4a3b5b">CacheUnit</a>で再定義されています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00339"></a>00339 {
<a name="l00340"></a>00340     <a class="code" href="classResource.html#a52235c5e3d912452f254dc45f1496fd2">squash</a>(inst, stage_num, squash_seq_num, tid);    
<a name="l00341"></a>00341 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac04c1a8a5c1212f9bbdc1ce83b1da882"></a><!-- doxytag: member="Resource::squashThenTrap" ref="ac04c1a8a5c1212f9bbdc1ce83b1da882" args="(int stage_num, DynInstPtr inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void squashThenTrap </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stage_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classRefCountingPtr.html">DynInstPtr</a>&nbsp;</td>
          <td class="paramname"> <em>inst</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Handle Squash &amp; Trap that occured from an instruction in a resource </p>

<p><div class="fragment"><pre class="fragment"><a name="l00345"></a>00345 {
<a name="l00346"></a>00346     <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = inst-&gt;readTid();
<a name="l00347"></a>00347 
<a name="l00348"></a>00348     inst-&gt;setSquashInfo(stage_num);
<a name="l00349"></a>00349     <a class="code" href="classResource.html#ab03920cf8ee0a1dd131d4a6db0320f71">setupSquash</a>(inst, stage_num, tid);
<a name="l00350"></a>00350 
<a name="l00351"></a>00351     <span class="keywordflow">if</span> (inst-&gt;traceData) {
<a name="l00352"></a>00352         <span class="keywordflow">if</span> (inst-&gt;staticInst &amp;&amp;
<a name="l00353"></a>00353             inst-&gt;fault != <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a> &amp;&amp; <a class="code" href="trace_8hh.html#af76c9f7776aade1bf9d7dfa8a0c6b341">DTRACE</a>(ExecFaulting)) {
<a name="l00354"></a>00354             inst-&gt;traceData-&gt;setStageCycle(stage_num, <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>());
<a name="l00355"></a>00355             inst-&gt;traceData-&gt;setFetchSeq(inst-&gt;seqNum);
<a name="l00356"></a>00356             inst-&gt;traceData-&gt;dump();
<a name="l00357"></a>00357         }
<a name="l00358"></a>00358 
<a name="l00359"></a>00359         <span class="keyword">delete</span> inst-&gt;traceData;
<a name="l00360"></a>00360         inst-&gt;traceData = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00361"></a>00361     }
<a name="l00362"></a>00362 
<a name="l00363"></a>00363     <a class="code" href="classResource.html#a41d682c28d0f49e04393c52815808782">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a89e3462bf1fe289c9196b20b1d4a907e">trapContext</a>(inst-&gt;fault, tid, inst);
<a name="l00364"></a>00364 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad2f3fddbc6dd67ef5e3a84cd7a9814e6"></a><!-- doxytag: member="Resource::suspendThread" ref="ad2f3fddbc6dd67ef5e3a84cd7a9814e6" args="(ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void suspendThread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Resources that care about thread activation override this. </p>

<p><a class="el" href="classFetchSeqUnit.html#aee7a498a20266fbfbc6aa3f165577b68">FetchSeqUnit</a>で再定義されています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00094"></a>00094 { }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1eb2a0229740a87bde0282416035b864"></a><!-- doxytag: member="Resource::trap" ref="a1eb2a0229740a87bde0282416035b864" args="(Fault fault, ThreadID tid, DynInstPtr inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void trap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td>
          <td class="paramname"> <em>fault</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classRefCountingPtr.html">DynInstPtr</a>&nbsp;</td>
          <td class="paramname"> <em>inst</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Post-processsing for Trap Generated from this instruction </p>

<p><a class="el" href="classCacheUnit.html#abf76d6d245f7d3b17d26ea8dcc0cf36f">CacheUnit</a>, <a class="el" href="classFetchSeqUnit.html#abf76d6d245f7d3b17d26ea8dcc0cf36f">FetchSeqUnit</a>, と <a class="el" href="classFetchUnit.html#abf76d6d245f7d3b17d26ea8dcc0cf36f">FetchUnit</a>で再定義されています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00107"></a>00107 { }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2ca5964896e91fdb616377369e29cfc4"></a><!-- doxytag: member="Resource::unscheduleEvent" ref="a2ca5964896e91fdb616377369e29cfc4" args="(DynInstPtr inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool unscheduleEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRefCountingPtr.html">DynInstPtr</a>&nbsp;</td>
          <td class="paramname"> <em>inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Unschedule resource event, regardless of its current state. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00405"></a>00405 {
<a name="l00406"></a>00406     <span class="keywordtype">int</span> slot_idx = <a class="code" href="classResource.html#a990f82d45376225d628def316f024f6b">findSlot</a>(inst);
<a name="l00407"></a>00407 
<a name="l00408"></a>00408     <span class="keywordflow">if</span>(slot_idx != -1)
<a name="l00409"></a>00409         <a class="code" href="classResource.html#abde7a6c4ff046aa4c2ecd476c4266be3">resourceEvent</a>[slot_idx].<a class="code" href="classResourceEvent.html#a8521a64adc8d310754330bc7dfe48831">unscheduleEvent</a>();
<a name="l00410"></a>00410 
<a name="l00411"></a>00411     <span class="keywordflow">return</span> slot_idx;
<a name="l00412"></a>00412 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a30247366c4c8cb82c2a196a286d309ad"></a><!-- doxytag: member="Resource::unscheduleEvent" ref="a30247366c4c8cb82c2a196a286d309ad" args="(int slot_idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void unscheduleEvent </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>slot_idx</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Unschedule resource event, regardless of its current state. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00399"></a>00399 {
<a name="l00400"></a>00400     <a class="code" href="classResource.html#abde7a6c4ff046aa4c2ecd476c4266be3">resourceEvent</a>[slot_idx].<a class="code" href="classResourceEvent.html#a8521a64adc8d310754330bc7dfe48831">unscheduleEvent</a>();
<a name="l00401"></a>00401 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2cf5450ce736e0c76aca0d4ef24b922a"></a><!-- doxytag: member="Resource::updateAfterContextSwitch" ref="a2cf5450ce736e0c76aca0d4ef24b922a" args="(DynInstPtr inst, ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void updateAfterContextSwitch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRefCountingPtr.html">DynInstPtr</a>&nbsp;</td>
          <td class="paramname"> <em>inst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Will be called the cycle before a context switch. Any bookkeeping that needs to be kept for that, can be done here </p>

<p><a class="el" href="classFetchSeqUnit.html#a339073618ad3c21c492d64a55ce2e216">FetchSeqUnit</a>, と <a class="el" href="classUseDefUnit.html#a339073618ad3c21c492d64a55ce2e216">UseDefUnit</a>で再定義されています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00099"></a>00099 { }    
</pre></div></p>

</div>
</div>
<hr/><h2>フレンドと関連する関数</h2>
<a class="anchor" id="a80da161b04f097f36d40b2bb699192b6"></a><!-- doxytag: member="Resource::ResourceEvent" ref="a80da161b04f097f36d40b2bb699192b6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classResourceEvent.html">ResourceEvent</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae78e4599e7afd86b067119e90ac5dfed"></a><!-- doxytag: member="Resource::ResourceRequest" ref="ae78e4599e7afd86b067119e90ac5dfed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classResourceRequest.html">ResourceRequest</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="a1dd2ecf45bf9024f273d09813d993f97"></a><!-- doxytag: member="Resource::availSlots" ref="a1dd2ecf45bf9024f273d09813d993f97" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt;int&gt; <a class="el" href="classResource.html#a1dd2ecf45bf9024f273d09813d993f97">availSlots</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A list of all the available execution slots for this resource. This correlates with the actual resource event idx. </p>

</div>
</div>
<a class="anchor" id="a41d682c28d0f49e04393c52815808782"></a><!-- doxytag: member="Resource::cpu" ref="a41d682c28d0f49e04393c52815808782" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classInOrderCPU.html">InOrderCPU</a>* <a class="el" href="classResource.html#a41d682c28d0f49e04393c52815808782">cpu</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The CPU(s) that this resource interacts with </p>

</div>
</div>
<a class="anchor" id="a52489b62c55d7db3b70c3713b3000601"></a><!-- doxytag: member="Resource::deniedReq" ref="a52489b62c55d7db3b70c3713b3000601" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classResourceRequest.html">ResReqPtr</a> <a class="el" href="classResource.html#a52489b62c55d7db3b70c3713b3000601">deniedReq</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Default denied resource request pointer </p>

</div>
</div>
<a class="anchor" id="a7441ef0865bcb3db9b8064dd7375c1ea"></a><!-- doxytag: member="Resource::id" ref="a7441ef0865bcb3db9b8064dd7375c1ea" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classResource.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>ID of the resource. The <a class="el" href="classResource.html">Resource</a> Pool uses this # to identify this resource. </p>

<p><a class="el" href="classMemDepUnit.html#a7441ef0865bcb3db9b8064dd7375c1ea">MemDepUnit&lt; MemDepPred, Impl &gt;</a>で再定義されています。</p>

</div>
</div>
<a class="anchor" id="a46b9d67ee437c6ecdbedca8ec8d2ed40"></a><!-- doxytag: member="Resource::latency" ref="a46b9d67ee437c6ecdbedca8ec8d2ed40" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classCycles.html">Cycles</a> <a class="el" href="classResource.html#a46b9d67ee437c6ecdbedca8ec8d2ed40">latency</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Constant latency for this resource. Note: Dynamic latency resources set this to 0 and manage the latency themselves </p>

</div>
</div>
<a class="anchor" id="a83b4e5928b54d2813c3c4911043e677d"></a><!-- doxytag: member="Resource::reqs" ref="a83b4e5928b54d2813c3c4911043e677d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt;<a class="el" href="classResourceRequest.html">ResReqPtr</a>&gt; <a class="el" href="classResource.html#a83b4e5928b54d2813c3c4911043e677d">reqs</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>List of all Requests the <a class="el" href="classResource.html">Resource</a> is Servicing. Each request represents part of the resource's bandwidth </p>

</div>
</div>
<a class="anchor" id="a991d4c92f58169fd45fe3f1c1881ac9e"></a><!-- doxytag: member="Resource::resName" ref="a991d4c92f58169fd45fe3f1c1881ac9e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="classResource.html#a991d4c92f58169fd45fe3f1c1881ac9e">resName</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The name of this resource </p>

</div>
</div>
<a class="anchor" id="abde7a6c4ff046aa4c2ecd476c4266be3"></a><!-- doxytag: member="Resource::resourceEvent" ref="abde7a6c4ff046aa4c2ecd476c4266be3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classResourceEvent.html">ResourceEvent</a>* <a class="el" href="classResource.html#abde7a6c4ff046aa4c2ecd476c4266be3">resourceEvent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The resource event used for scheduling resource slots on the event queue </p>

</div>
</div>
<a class="anchor" id="a2474a5474cbff19523a51eb1de01cda4"></a><!-- doxytag: member="Resource::width" ref="a2474a5474cbff19523a51eb1de01cda4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classResource.html#a2474a5474cbff19523a51eb1de01cda4">width</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The number of instructions the resource can simultaneously process. </p>

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>cpu/inorder/<a class="el" href="resource_8hh_source.html">resource.hh</a></li>
<li>cpu/inorder/<a class="el" href="resource_8cc.html">resource.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
