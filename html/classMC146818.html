<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス MC146818</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>クラス MC146818</h1><!-- doxytag: class="MC146818" --><!-- doxytag: inherits="EventManager" -->
<p><code>#include &lt;<a class="el" href="mc146818_8hh_source.html">mc146818.hh</a>&gt;</code></p>
<div class="dynheader">
MC146818に対する継承グラフ</div>
<div class="dynsection">
 <div class="center">
  <img src="classMC146818.gif" usemap="#MC146818_map" alt=""/>
  <map id="MC146818_map" name="MC146818_map">
<area href="classEventManager.html" alt="EventManager" shape="rect" coords="105,0,200,24"/>
<area href="classMaltaIO_1_1RTC.html" alt="RTC" shape="rect" coords="0,112,95,136"/>
<area href="classTsunamiIO_1_1RTC.html" alt="RTC" shape="rect" coords="105,112,200,136"/>
<area href="classX86ISA_1_1Cmos_1_1X86RTC.html" alt="X86RTC" shape="rect" coords="210,112,305,136"/>
</map>
 </div>
</div>

<p><a href="classMC146818-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>構成</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structMC146818_1_1RTCEvent.html">RTCEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structMC146818_1_1RTCTickEvent.html">RTCTickEvent</a></td></tr>
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#a281b3c32232ad842ca99d76d81907f0d">MC146818</a> (<a class="el" href="classEventManager.html">EventManager</a> *em, const std::string &amp;name, const struct tm time, bool bcd, <a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> frequency)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#a9b8c835ca258cba33b1c311acd73c664">~MC146818</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#a0322692b645738d2f01925d065dcab62">writeData</a> (const uint8_t addr, const uint8_t data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#a7190f8b918c6a32feff80f288faa50c2">readData</a> (const uint8_t addr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#a56fef941f638fcd7eb6c44ed7817bb24">tickClock</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#ab4138b21b48e3371a8e20df72b675a88">serialize</a> (const std::string &amp;base, std::ostream &amp;os)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#a147c320e3d6506edf5587a40cd8e430d">unserialize</a> (const std::string &amp;base, <a class="el" href="classCheckpoint.html">Checkpoint</a> *cp, const std::string &amp;section)</td></tr>
<tr><td colspan="2"><h2>Protected メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#a30dfd044b822d58a6ff7335f815af8b1">handleEvent</a> ()</td></tr>
<tr><td colspan="2"><h2>Private メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const std::string &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#a324e8c54c4c5161913681a1a52fef959">name</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#a2d06df539c4db142b96a5848870ebd28">setTime</a> (const struct tm time)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#a374ca70b66d8c7697052fbf0d917c31c">BitUnion8</a> (RtcRegA) Bitfield&lt; 7 &gt; uip</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#ae44f0fd1a86e3e746e818f5817c33e18">EndBitUnion</a> (RtcRegA) static inline bool rega_dv_disabled(const RtcRegA &amp;reg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Is the DV field in regA set to disabled?  <a href="#ae44f0fd1a86e3e746e818f5817c33e18"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#ae9e7ebb8d4dc55d588540f5b369c2bbd">BitUnion8</a> (RtcRegB) Bitfield&lt; 7 &gt; set</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#a7efacf2a80b3519649bf9901abe5eaae">EndBitUnion</a> (RtcRegB) RtcRegA stat_regA</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">USA Daylight Savings <a class="el" href="classTime.html">Time</a> enable.  <a href="#a7efacf2a80b3519649bf9901abe5eaae"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#aaf2ed934b37cbbd236fdd1b01a5f5005">_name</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structMC146818_1_1RTCEvent.html">RTCEvent</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#adb3e426cd9214d797472cddc46fd8b0a">event</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structMC146818_1_1RTCTickEvent.html">RTCTickEvent</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#afa706dc4758601c480227eead115ccfb">tickEvent</a></td></tr>
<tr><td class="memItemLeft" >union {</td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;uint8_t&nbsp;&nbsp;&nbsp;<a class="el" href="classMC146818.html#a574a6ffc3b886b66eb7f05f4a4abc0d4">clock_data</a> [10]</td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;struct {</td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint8_t&nbsp;&nbsp;&nbsp;<a class="el" href="classMC146818.html#ad1696900026b287a87c563b733a21bc3">sec</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint8_t&nbsp;&nbsp;&nbsp;<a class="el" href="classMC146818.html#a1d76d44501cb4a6ae50d2e4be0e81932">sec_alrm</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint8_t&nbsp;&nbsp;&nbsp;<a class="el" href="classMC146818.html#ac9b481208b43f7c37ed25e446bdec692">min</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint8_t&nbsp;&nbsp;&nbsp;<a class="el" href="classMC146818.html#a59555221d86f00c30bda63b8458fd6b4">min_alrm</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint8_t&nbsp;&nbsp;&nbsp;<a class="el" href="classMC146818.html#ae5af4ff48939d13d480f87e56a9385d6">hour</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint8_t&nbsp;&nbsp;&nbsp;<a class="el" href="classMC146818.html#a41c0d56541d0b0e66f915931f047e18d">hour_alrm</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint8_t&nbsp;&nbsp;&nbsp;<a class="el" href="classMC146818.html#acf7d2d98117c452b351c130883b70eba">wday</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint8_t&nbsp;&nbsp;&nbsp;<a class="el" href="classMC146818.html#a8f4f1d1a3991d8405faca08fd1c3ea9b">mday</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint8_t&nbsp;&nbsp;&nbsp;<a class="el" href="classMC146818.html#ac994d1b867aab54062cdd1ee94510030">mon</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint8_t&nbsp;&nbsp;&nbsp;<a class="el" href="classMC146818.html#a7af2065789bc84419b8d5fe109be83b5">year</a></td></tr>
<tr><td class="memItemLeft" valign="top">&nbsp;&nbsp;&nbsp;}&nbsp;</td><td class="memItemRight" valign="bottom"></td></tr>
<tr><td class="memItemLeft" valign="top">};&nbsp;</td><td class="memItemRight" valign="bottom"></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct tm&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#a1fa96dc80ff12927216cb2ce72306e55">curTime</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Bitfield&lt; 6, 4 &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#a6cb58630092effe3e8ef2d674d7a3d1a">dv</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">1 = date and time update in progress  <a href="#a6cb58630092effe3e8ef2d674d7a3d1a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Bitfield&lt; 3, 0 &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#af889c7c5198ff826946778bb663d2da5">rs</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Divider configuration.  <a href="#af889c7c5198ff826946778bb663d2da5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Bitfield&lt; 6 &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#ab481b76028ca7f38eef64a2a0df7daa9">pie</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">stop clock updates  <a href="#ab481b76028ca7f38eef64a2a0df7daa9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Bitfield&lt; 5 &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#a074fd4d27a675086372d4d0f43e96c3c">aie</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">1 = enable periodic clock interrupt  <a href="#a074fd4d27a675086372d4d0f43e96c3c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Bitfield&lt; 4 &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#ad8be3702ba014f17744bad97962b3942">uie</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">1 = enable alarm interrupt  <a href="#ad8be3702ba014f17744bad97962b3942"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Bitfield&lt; 3 &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#a91777eb5d8187720f48d7d5a193c7295">sqwe</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">1 = enable update-ended interrupt  <a href="#a91777eb5d8187720f48d7d5a193c7295"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Bitfield&lt; 2 &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#a0c41402e021fa90f547adf9392abcc8d">dm</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">1 = output sqare wave at SQW pin  <a href="#a0c41402e021fa90f547adf9392abcc8d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Bitfield&lt; 1 &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#a570b614b6c947c1a65c60a8b5f0c37a6">format24h</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">0 = BCD, 1 = Binary coded time  <a href="#a570b614b6c947c1a65c60a8b5f0c37a6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Bitfield&lt; 0 &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#a08a594a517342cdd7b68781496ff83cb">dse</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">0 = 12 hours, 1 = 24 hours  <a href="#a08a594a517342cdd7b68781496ff83cb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">RtcRegB&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMC146818.html#a59e2e13d7510625623f5f3e08ce29b1a">stat_regB</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>説明</h2>
<p>Real-Time <a class="el" href="classClock.html">Clock</a> (<a class="el" href="classMC146818.html">MC146818</a>) </p>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="a281b3c32232ad842ca99d76d81907f0d"></a><!-- doxytag: member="MC146818::MC146818" ref="a281b3c32232ad842ca99d76d81907f0d" args="(EventManager *em, const std::string &amp;name, const struct tm time, bool bcd, Tick frequency)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMC146818.html">MC146818</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classEventManager.html">EventManager</a> *&nbsp;</td>
          <td class="paramname"> <em>em</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct tm&nbsp;</td>
          <td class="paramname"> <em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>bcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td>
          <td class="paramname"> <em>frequency</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9b8c835ca258cba33b1c311acd73c664"></a><!-- doxytag: member="MC146818::~MC146818" ref="a9b8c835ca258cba33b1c311acd73c664" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classMC146818.html">MC146818</a> </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00113"></a>00113 {
<a name="l00114"></a>00114     <a class="code" href="classEventManager.html#a720e34da4db679fb3f30b20e55c23605">deschedule</a>(<a class="code" href="classMC146818.html#afa706dc4758601c480227eead115ccfb">tickEvent</a>);
<a name="l00115"></a>00115     <a class="code" href="classEventManager.html#a720e34da4db679fb3f30b20e55c23605">deschedule</a>(<a class="code" href="classMC146818.html#adb3e426cd9214d797472cddc46fd8b0a">event</a>);
<a name="l00116"></a>00116 }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="ae9e7ebb8d4dc55d588540f5b369c2bbd"></a><!-- doxytag: member="MC146818::BitUnion8" ref="ae9e7ebb8d4dc55d588540f5b369c2bbd" args="(RtcRegB) Bitfield&lt; 7 &gt; set" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BitUnion8 </td>
          <td>(</td>
          <td class="paramtype">RtcRegB&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a374ca70b66d8c7697052fbf0d917c31c"></a><!-- doxytag: member="MC146818::BitUnion8" ref="a374ca70b66d8c7697052fbf0d917c31c" args="(RtcRegA) Bitfield&lt; 7 &gt; uip" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BitUnion8 </td>
          <td>(</td>
          <td class="paramtype">RtcRegA&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a7efacf2a80b3519649bf9901abe5eaae"></a><!-- doxytag: member="MC146818::EndBitUnion" ref="a7efacf2a80b3519649bf9901abe5eaae" args="(RtcRegB) RtcRegA stat_regA" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EndBitUnion </td>
          <td>(</td>
          <td class="paramtype">RtcRegB&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>USA Daylight Savings <a class="el" href="classTime.html">Time</a> enable. </p>
<p>RTC status register A </p>

</div>
</div>
<a class="anchor" id="ae44f0fd1a86e3e746e818f5817c33e18"></a><!-- doxytag: member="MC146818::EndBitUnion" ref="ae44f0fd1a86e3e746e818f5817c33e18" args="(RtcRegA) static inline bool rega_dv_disabled(const RtcRegA &amp;reg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EndBitUnion </td>
          <td>(</td>
          <td class="paramtype">RtcRegA&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Is the DV field in regA set to disabled? </p>

</div>
</div>
<a class="anchor" id="a30dfd044b822d58a6ff7335f815af8b1"></a><!-- doxytag: member="MC146818::handleEvent" ref="a30dfd044b822d58a6ff7335f815af8b1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void handleEvent </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classTsunamiIO_1_1RTC.html#af592dd6aaf1c9c6af780a5cbc531417e">RTC</a>, <a class="el" href="classMaltaIO_1_1RTC.html#af592dd6aaf1c9c6af780a5cbc531417e">RTC</a>, と <a class="el" href="classX86ISA_1_1Cmos_1_1X86RTC.html#af592dd6aaf1c9c6af780a5cbc531417e">X86RTC</a>で再定義されています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00044"></a>00044     {
<a name="l00045"></a>00045         <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;No RTC event handler defined.\n&quot;</span>);
<a name="l00046"></a>00046     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a324e8c54c4c5161913681a1a52fef959"></a><!-- doxytag: member="MC146818::name" ref="a324e8c54c4c5161913681a1a52fef959" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string&amp; name </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00086"></a>00086 { <span class="keywordflow">return</span> <a class="code" href="classMC146818.html#aaf2ed934b37cbbd236fdd1b01a5f5005">_name</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7190f8b918c6a32feff80f288faa50c2"></a><!-- doxytag: member="MC146818::readData" ref="a7190f8b918c6a32feff80f288faa50c2" args="(const uint8_t addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t readData </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&nbsp;</td>
          <td class="paramname"> <em>addr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>RTC read data </p>

<p><div class="fragment"><pre class="fragment"><a name="l00220"></a>00220 {
<a name="l00221"></a>00221     <span class="keywordflow">if</span> (<a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a> &lt; <a class="code" href="rtcreg_8h.html#a4b02748bc198b05de97e8db07653b846">RTC_STAT_REGA</a>)
<a name="l00222"></a>00222         <span class="keywordflow">return</span> <a class="code" href="classMC146818.html#a574a6ffc3b886b66eb7f05f4a4abc0d4">clock_data</a>[<a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a>];
<a name="l00223"></a>00223     <span class="keywordflow">else</span> {
<a name="l00224"></a>00224         <span class="keywordflow">switch</span> (<a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a>) {
<a name="l00225"></a>00225           <span class="keywordflow">case</span> <a class="code" href="rtcreg_8h.html#a4b02748bc198b05de97e8db07653b846">RTC_STAT_REGA</a>:
<a name="l00226"></a>00226             <span class="comment">// toggle UIP bit for linux</span>
<a name="l00227"></a>00227             stat_regA.uip = !stat_regA.uip;
<a name="l00228"></a>00228             <span class="keywordflow">return</span> stat_regA;
<a name="l00229"></a>00229             <span class="keywordflow">break</span>;
<a name="l00230"></a>00230           <span class="keywordflow">case</span> <a class="code" href="rtcreg_8h.html#a6a8fd55fe2822e7f0fe118c364afae70">RTC_STAT_REGB</a>:
<a name="l00231"></a>00231             <span class="keywordflow">return</span> <a class="code" href="classMC146818.html#a59e2e13d7510625623f5f3e08ce29b1a">stat_regB</a>;
<a name="l00232"></a>00232             <span class="keywordflow">break</span>;
<a name="l00233"></a>00233           <span class="keywordflow">case</span> <a class="code" href="rtcreg_8h.html#ad9fda4a9dae0a08fa5ddc3ab5ddcae2f">RTC_STAT_REGC</a>:
<a name="l00234"></a>00234           <span class="keywordflow">case</span> <a class="code" href="rtcreg_8h.html#a7f7fb518a866fabcd86fa218dff9fa9b">RTC_STAT_REGD</a>:
<a name="l00235"></a>00235             <span class="keywordflow">return</span> 0x00;
<a name="l00236"></a>00236             <span class="keywordflow">break</span>;
<a name="l00237"></a>00237           <span class="keywordflow">default</span>:
<a name="l00238"></a>00238             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Shouldn&apos;t be here&quot;</span>);
<a name="l00239"></a>00239         }
<a name="l00240"></a>00240     }
<a name="l00241"></a>00241 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab4138b21b48e3371a8e20df72b675a88"></a><!-- doxytag: member="MC146818::serialize" ref="ab4138b21b48e3371a8e20df72b675a88" args="(const std::string &amp;base, std::ostream &amp;os)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void serialize </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>os</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Serialize this object to the given output stream. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>base</em>&nbsp;</td><td>The base name of the counter object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>os</em>&nbsp;</td><td>The stream to serialize to. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2d06df539c4db142b96a5848870ebd28"></a><!-- doxytag: member="MC146818::setTime" ref="a2d06df539c4db142b96a5848870ebd28" args="(const struct tm time)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setTime </td>
          <td>(</td>
          <td class="paramtype">const struct tm&nbsp;</td>
          <td class="paramname"> <em>time</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00067"></a>00067 {
<a name="l00068"></a>00068     <a class="code" href="classMC146818.html#a1fa96dc80ff12927216cb2ce72306e55">curTime</a> = time;
<a name="l00069"></a>00069     <a class="code" href="classMC146818.html#a7af2065789bc84419b8d5fe109be83b5">year</a> = time.tm_year;
<a name="l00070"></a>00070     <span class="comment">// Unix is 0-11 for month, data seet says start at 1</span>
<a name="l00071"></a>00071     <a class="code" href="classMC146818.html#ac994d1b867aab54062cdd1ee94510030">mon</a> = time.tm_mon + 1;
<a name="l00072"></a>00072     <a class="code" href="classMC146818.html#a8f4f1d1a3991d8405faca08fd1c3ea9b">mday</a> = time.tm_mday;
<a name="l00073"></a>00073     <a class="code" href="classMC146818.html#ae5af4ff48939d13d480f87e56a9385d6">hour</a> = time.tm_hour;
<a name="l00074"></a>00074     <a class="code" href="classMC146818.html#ac9b481208b43f7c37ed25e446bdec692">min</a> = time.tm_min;
<a name="l00075"></a>00075     <a class="code" href="classMC146818.html#ad1696900026b287a87c563b733a21bc3">sec</a> = time.tm_sec;
<a name="l00076"></a>00076 
<a name="l00077"></a>00077     <span class="comment">// Datasheet says 1 is sunday</span>
<a name="l00078"></a>00078     <a class="code" href="classMC146818.html#acf7d2d98117c452b351c130883b70eba">wday</a> = time.tm_wday + 1;
<a name="l00079"></a>00079 
<a name="l00080"></a>00080     <span class="keywordflow">if</span> (!<a class="code" href="classMC146818.html#a59e2e13d7510625623f5f3e08ce29b1a">stat_regB</a>.dm) {
<a name="l00081"></a>00081         <span class="comment">// The datasheet says that the year field can be either BCD or</span>
<a name="l00082"></a>00082         <span class="comment">// years since 1900.  Linux seems to be happy with years since</span>
<a name="l00083"></a>00083         <span class="comment">// 1900.</span>
<a name="l00084"></a>00084         <a class="code" href="classMC146818.html#a7af2065789bc84419b8d5fe109be83b5">year</a> = <a class="code" href="mc146818_8cc.html#a839068bfb23e0c3838b4979e9f50368e">bcdize</a>(<a class="code" href="classMC146818.html#a7af2065789bc84419b8d5fe109be83b5">year</a> % 100);
<a name="l00085"></a>00085         <a class="code" href="classMC146818.html#ac994d1b867aab54062cdd1ee94510030">mon</a> = <a class="code" href="mc146818_8cc.html#a839068bfb23e0c3838b4979e9f50368e">bcdize</a>(<a class="code" href="classMC146818.html#ac994d1b867aab54062cdd1ee94510030">mon</a>);
<a name="l00086"></a>00086         <a class="code" href="classMC146818.html#a8f4f1d1a3991d8405faca08fd1c3ea9b">mday</a> = <a class="code" href="mc146818_8cc.html#a839068bfb23e0c3838b4979e9f50368e">bcdize</a>(<a class="code" href="classMC146818.html#a8f4f1d1a3991d8405faca08fd1c3ea9b">mday</a>);
<a name="l00087"></a>00087         <a class="code" href="classMC146818.html#ae5af4ff48939d13d480f87e56a9385d6">hour</a> = <a class="code" href="mc146818_8cc.html#a839068bfb23e0c3838b4979e9f50368e">bcdize</a>(<a class="code" href="classMC146818.html#ae5af4ff48939d13d480f87e56a9385d6">hour</a>);
<a name="l00088"></a>00088         <a class="code" href="classMC146818.html#ac9b481208b43f7c37ed25e446bdec692">min</a> = <a class="code" href="mc146818_8cc.html#a839068bfb23e0c3838b4979e9f50368e">bcdize</a>(<a class="code" href="classMC146818.html#ac9b481208b43f7c37ed25e446bdec692">min</a>);
<a name="l00089"></a>00089         <a class="code" href="classMC146818.html#ad1696900026b287a87c563b733a21bc3">sec</a> = <a class="code" href="mc146818_8cc.html#a839068bfb23e0c3838b4979e9f50368e">bcdize</a>(<a class="code" href="classMC146818.html#ad1696900026b287a87c563b733a21bc3">sec</a>);
<a name="l00090"></a>00090     }
<a name="l00091"></a>00091 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a56fef941f638fcd7eb6c44ed7817bb24"></a><!-- doxytag: member="MC146818::tickClock" ref="a56fef941f638fcd7eb6c44ed7817bb24" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tickClock </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00245"></a>00245 {
<a name="l00246"></a>00246     assert(!rega_dv_disabled(stat_regA));
<a name="l00247"></a>00247 
<a name="l00248"></a>00248     <span class="keywordflow">if</span> (<a class="code" href="classMC146818.html#a59e2e13d7510625623f5f3e08ce29b1a">stat_regB</a>.set)
<a name="l00249"></a>00249         <span class="keywordflow">return</span>;
<a name="l00250"></a>00250     time_t calTime = <a class="code" href="time_8cc.html#a2c5d52bd64c50fccaf8e6bafde034236">mkutctime</a>(&amp;<a class="code" href="classMC146818.html#a1fa96dc80ff12927216cb2ce72306e55">curTime</a>);
<a name="l00251"></a>00251     calTime++;
<a name="l00252"></a>00252     <a class="code" href="classMC146818.html#a2d06df539c4db142b96a5848870ebd28">setTime</a>(*gmtime(&amp;calTime));
<a name="l00253"></a>00253 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a147c320e3d6506edf5587a40cd8e430d"></a><!-- doxytag: member="MC146818::unserialize" ref="a147c320e3d6506edf5587a40cd8e430d" args="(const std::string &amp;base, Checkpoint *cp, const std::string &amp;section)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void unserialize </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCheckpoint.html">Checkpoint</a> *&nbsp;</td>
          <td class="paramname"> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>section</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Reconstruct the state of this object from a checkpoint. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>base</em>&nbsp;</td><td>The base name of the counter object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="namespacecp.html">cp</a></em>&nbsp;</td><td>The checkpoint use. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>section</em>&nbsp;</td><td>The section name of this object </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0322692b645738d2f01925d065dcab62"></a><!-- doxytag: member="MC146818::writeData" ref="a0322692b645738d2f01925d065dcab62" args="(const uint8_t addr, const uint8_t data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void writeData </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>RTC write data </p>

<p><div class="fragment"><pre class="fragment"><a name="l00127"></a>00127 {
<a name="l00128"></a>00128     <span class="keywordtype">bool</span> panic_unsupported(<span class="keyword">false</span>);
<a name="l00129"></a>00129 
<a name="l00130"></a>00130     <span class="keywordflow">if</span> (<a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a> &lt; <a class="code" href="rtcreg_8h.html#a4b02748bc198b05de97e8db07653b846">RTC_STAT_REGA</a>) {
<a name="l00131"></a>00131         <a class="code" href="classMC146818.html#a574a6ffc3b886b66eb7f05f4a4abc0d4">clock_data</a>[<a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a>] = data;
<a name="l00132"></a>00132         <a class="code" href="classMC146818.html#a1fa96dc80ff12927216cb2ce72306e55">curTime</a>.tm_sec = <a class="code" href="mc146818_8cc.html#aff47906a04f886fcf4238851b4b19c1a">unbcdize</a>(<a class="code" href="classMC146818.html#ad1696900026b287a87c563b733a21bc3">sec</a>);
<a name="l00133"></a>00133         <a class="code" href="classMC146818.html#a1fa96dc80ff12927216cb2ce72306e55">curTime</a>.tm_min = <a class="code" href="mc146818_8cc.html#aff47906a04f886fcf4238851b4b19c1a">unbcdize</a>(<a class="code" href="classMC146818.html#ac9b481208b43f7c37ed25e446bdec692">min</a>);
<a name="l00134"></a>00134         <a class="code" href="classMC146818.html#a1fa96dc80ff12927216cb2ce72306e55">curTime</a>.tm_hour = <a class="code" href="mc146818_8cc.html#aff47906a04f886fcf4238851b4b19c1a">unbcdize</a>(<a class="code" href="classMC146818.html#ae5af4ff48939d13d480f87e56a9385d6">hour</a>);
<a name="l00135"></a>00135         <a class="code" href="classMC146818.html#a1fa96dc80ff12927216cb2ce72306e55">curTime</a>.tm_mday = <a class="code" href="mc146818_8cc.html#aff47906a04f886fcf4238851b4b19c1a">unbcdize</a>(<a class="code" href="classMC146818.html#a8f4f1d1a3991d8405faca08fd1c3ea9b">mday</a>);
<a name="l00136"></a>00136         <a class="code" href="classMC146818.html#a1fa96dc80ff12927216cb2ce72306e55">curTime</a>.tm_mon = <a class="code" href="mc146818_8cc.html#aff47906a04f886fcf4238851b4b19c1a">unbcdize</a>(<a class="code" href="classMC146818.html#ac994d1b867aab54062cdd1ee94510030">mon</a>) - 1;
<a name="l00137"></a>00137         <a class="code" href="classMC146818.html#a1fa96dc80ff12927216cb2ce72306e55">curTime</a>.tm_year = ((<a class="code" href="mc146818_8cc.html#aff47906a04f886fcf4238851b4b19c1a">unbcdize</a>(<a class="code" href="classMC146818.html#a7af2065789bc84419b8d5fe109be83b5">year</a>) + 50) % 100) + 1950;
<a name="l00138"></a>00138         <a class="code" href="classMC146818.html#a1fa96dc80ff12927216cb2ce72306e55">curTime</a>.tm_wday = <a class="code" href="mc146818_8cc.html#aff47906a04f886fcf4238851b4b19c1a">unbcdize</a>(<a class="code" href="classMC146818.html#acf7d2d98117c452b351c130883b70eba">wday</a>) - 1;
<a name="l00139"></a>00139     } <span class="keywordflow">else</span> {
<a name="l00140"></a>00140         <span class="keywordflow">switch</span> (<a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a>) {
<a name="l00141"></a>00141           <span class="keywordflow">case</span> <a class="code" href="rtcreg_8h.html#a4b02748bc198b05de97e8db07653b846">RTC_STAT_REGA</a>: {
<a name="l00142"></a>00142               RtcRegA old_rega(stat_regA);
<a name="l00143"></a>00143               stat_regA = data;
<a name="l00144"></a>00144               <span class="comment">// The &quot;update in progress&quot; bit is read only.</span>
<a name="l00145"></a>00145               stat_regA.uip = old_rega;
<a name="l00146"></a>00146 
<a name="l00147"></a>00147               <span class="keywordflow">if</span> (!rega_dv_disabled(stat_regA) &amp;&amp;
<a name="l00148"></a>00148                   stat_regA.dv != <a class="code" href="rtcreg_8h.html#afe64a9dcba3564b473da984ef67ad8b5">RTCA_DV_32768HZ</a>) {
<a name="l00149"></a>00149                   <a class="code" href="base_2misc_8hh.html#ae7d790080fa18103d7582effff570b9e">inform</a>(<span class="stringliteral">&quot;RTC: Unimplemented divider configuration: %i\n&quot;</span>,
<a name="l00150"></a>00150                         stat_regA.dv);
<a name="l00151"></a>00151                   panic_unsupported = <span class="keyword">true</span>;
<a name="l00152"></a>00152               }
<a name="l00153"></a>00153 
<a name="l00154"></a>00154               <span class="keywordflow">if</span> (stat_regA.rs != <a class="code" href="rtcreg_8h.html#a0283a861d37bc7eb84af82a68321aff7">RTCA_RS_1024HZ</a>) {
<a name="l00155"></a>00155                   <a class="code" href="base_2misc_8hh.html#ae7d790080fa18103d7582effff570b9e">inform</a>(<span class="stringliteral">&quot;RTC: Unimplemented interrupt rate: %i\n&quot;</span>,
<a name="l00156"></a>00156                         stat_regA.rs);
<a name="l00157"></a>00157                   panic_unsupported = <span class="keyword">true</span>;
<a name="l00158"></a>00158               }
<a name="l00159"></a>00159 
<a name="l00160"></a>00160               <span class="keywordflow">if</span> (rega_dv_disabled(stat_regA)) {
<a name="l00161"></a>00161                   <span class="comment">// The divider is disabled, make sure that we don&apos;t</span>
<a name="l00162"></a>00162                   <span class="comment">// schedule any ticks.</span>
<a name="l00163"></a>00163                   <span class="keywordflow">if</span> (<a class="code" href="classMC146818.html#afa706dc4758601c480227eead115ccfb">tickEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>())
<a name="l00164"></a>00164                       <a class="code" href="classEventManager.html#a720e34da4db679fb3f30b20e55c23605">deschedule</a>(<a class="code" href="classMC146818.html#afa706dc4758601c480227eead115ccfb">tickEvent</a>);
<a name="l00165"></a>00165               } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rega_dv_disabled(old_rega))  {
<a name="l00166"></a>00166                   <span class="comment">// According to the specification, the next tick</span>
<a name="l00167"></a>00167                   <span class="comment">// happens after 0.5s when the divider chain goes</span>
<a name="l00168"></a>00168                   <span class="comment">// from reset to active. So, we simply schedule the</span>
<a name="l00169"></a>00169                   <span class="comment">// tick after 0.5s.</span>
<a name="l00170"></a>00170                   assert(!<a class="code" href="classMC146818.html#afa706dc4758601c480227eead115ccfb">tickEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>());
<a name="l00171"></a>00171                   <a class="code" href="classEventManager.html#a4ddebbfe9a12b95be6fb993ce892dcd3">schedule</a>(<a class="code" href="classMC146818.html#afa706dc4758601c480227eead115ccfb">tickEvent</a>, <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>() + <a class="code" href="namespaceSimClock_1_1Int.html#a747b4704194d75d03891708cbba227b7" title="second">SimClock::Int::s</a> / 2);
<a name="l00172"></a>00172               }
<a name="l00173"></a>00173           } <span class="keywordflow">break</span>;
<a name="l00174"></a>00174           <span class="keywordflow">case</span> <a class="code" href="rtcreg_8h.html#a6a8fd55fe2822e7f0fe118c364afae70">RTC_STAT_REGB</a>:
<a name="l00175"></a>00175             <a class="code" href="classMC146818.html#a59e2e13d7510625623f5f3e08ce29b1a">stat_regB</a> = data;
<a name="l00176"></a>00176             <span class="keywordflow">if</span> (<a class="code" href="classMC146818.html#a59e2e13d7510625623f5f3e08ce29b1a">stat_regB</a>.aie || <a class="code" href="classMC146818.html#a59e2e13d7510625623f5f3e08ce29b1a">stat_regB</a>.uie) {
<a name="l00177"></a>00177                 <a class="code" href="base_2misc_8hh.html#ae7d790080fa18103d7582effff570b9e">inform</a>(<span class="stringliteral">&quot;RTC: Unimplemented interrupt configuration: %s %s\n&quot;</span>,
<a name="l00178"></a>00178                       <a class="code" href="classMC146818.html#a59e2e13d7510625623f5f3e08ce29b1a">stat_regB</a>.aie ? <span class="stringliteral">&quot;alarm&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,
<a name="l00179"></a>00179                       <a class="code" href="classMC146818.html#a59e2e13d7510625623f5f3e08ce29b1a">stat_regB</a>.uie ? <span class="stringliteral">&quot;update&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);
<a name="l00180"></a>00180                 panic_unsupported = <span class="keyword">true</span>;
<a name="l00181"></a>00181             }
<a name="l00182"></a>00182 
<a name="l00183"></a>00183             <span class="keywordflow">if</span> (<a class="code" href="classMC146818.html#a59e2e13d7510625623f5f3e08ce29b1a">stat_regB</a>.dm) {
<a name="l00184"></a>00184                 <a class="code" href="base_2misc_8hh.html#ae7d790080fa18103d7582effff570b9e">inform</a>(<span class="stringliteral">&quot;RTC: The binary interface is not fully implemented.\n&quot;</span>);
<a name="l00185"></a>00185                 panic_unsupported = <span class="keyword">true</span>;
<a name="l00186"></a>00186             }
<a name="l00187"></a>00187 
<a name="l00188"></a>00188             <span class="keywordflow">if</span> (!<a class="code" href="classMC146818.html#a59e2e13d7510625623f5f3e08ce29b1a">stat_regB</a>.format24h) {
<a name="l00189"></a>00189                 <a class="code" href="base_2misc_8hh.html#ae7d790080fa18103d7582effff570b9e">inform</a>(<span class="stringliteral">&quot;RTC: The 12h time format not supported.\n&quot;</span>);
<a name="l00190"></a>00190                 panic_unsupported = <span class="keyword">true</span>;
<a name="l00191"></a>00191             }
<a name="l00192"></a>00192 
<a name="l00193"></a>00193             <span class="keywordflow">if</span> (<a class="code" href="classMC146818.html#a59e2e13d7510625623f5f3e08ce29b1a">stat_regB</a>.dse) {
<a name="l00194"></a>00194                 <a class="code" href="base_2misc_8hh.html#ae7d790080fa18103d7582effff570b9e">inform</a>(<span class="stringliteral">&quot;RTC: Automatic daylight saving time not supported.\n&quot;</span>);
<a name="l00195"></a>00195                 panic_unsupported = <span class="keyword">true</span>;
<a name="l00196"></a>00196             }
<a name="l00197"></a>00197 
<a name="l00198"></a>00198             <span class="keywordflow">if</span> (<a class="code" href="classMC146818.html#a59e2e13d7510625623f5f3e08ce29b1a">stat_regB</a>.pie) {
<a name="l00199"></a>00199                 <span class="keywordflow">if</span> (!<a class="code" href="classMC146818.html#adb3e426cd9214d797472cddc46fd8b0a">event</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>())
<a name="l00200"></a>00200                     <a class="code" href="classMC146818.html#adb3e426cd9214d797472cddc46fd8b0a">event</a>.<a class="code" href="structMC146818_1_1RTCEvent.html#a5300e17e5d721149683cb2bac69c7571">scheduleIntr</a>();
<a name="l00201"></a>00201             } <span class="keywordflow">else</span> {
<a name="l00202"></a>00202                 <span class="keywordflow">if</span> (<a class="code" href="classMC146818.html#adb3e426cd9214d797472cddc46fd8b0a">event</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>())
<a name="l00203"></a>00203                     <a class="code" href="classEventManager.html#a720e34da4db679fb3f30b20e55c23605">deschedule</a>(<a class="code" href="classMC146818.html#adb3e426cd9214d797472cddc46fd8b0a">event</a>);
<a name="l00204"></a>00204             }
<a name="l00205"></a>00205             <span class="keywordflow">break</span>;
<a name="l00206"></a>00206           <span class="keywordflow">case</span> <a class="code" href="rtcreg_8h.html#ad9fda4a9dae0a08fa5ddc3ab5ddcae2f">RTC_STAT_REGC</a>:
<a name="l00207"></a>00207           <span class="keywordflow">case</span> <a class="code" href="rtcreg_8h.html#a7f7fb518a866fabcd86fa218dff9fa9b">RTC_STAT_REGD</a>:
<a name="l00208"></a>00208             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;RTC status registers C and D are not implemented.\n&quot;</span>);
<a name="l00209"></a>00209             <span class="keywordflow">break</span>;
<a name="l00210"></a>00210         }
<a name="l00211"></a>00211     }
<a name="l00212"></a>00212 
<a name="l00213"></a>00213     <span class="keywordflow">if</span> (panic_unsupported)
<a name="l00214"></a>00214         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Unimplemented RTC configuration!\n&quot;</span>);
<a name="l00215"></a>00215 
<a name="l00216"></a>00216 }
</pre></div></p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="a9e3f8b9b4d76baaaf27eda22289b266d"></a><!-- doxytag: member="MC146818::@60" ref="a9e3f8b9b4d76baaaf27eda22289b266d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">union { ... } <code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Data for real-time clock function </p>

</div>
</div>
<a class="anchor" id="aaf2ed934b37cbbd236fdd1b01a5f5005"></a><!-- doxytag: member="MC146818::_name" ref="aaf2ed934b37cbbd236fdd1b01a5f5005" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="classMC146818.html#aaf2ed934b37cbbd236fdd1b01a5f5005">_name</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a074fd4d27a675086372d4d0f43e96c3c"></a><!-- doxytag: member="MC146818::aie" ref="a074fd4d27a675086372d4d0f43e96c3c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bitfield&lt;5&gt; <a class="el" href="classMC146818.html#a074fd4d27a675086372d4d0f43e96c3c">aie</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>1 = enable periodic clock interrupt </p>

</div>
</div>
<a class="anchor" id="a574a6ffc3b886b66eb7f05f4a4abc0d4"></a><!-- doxytag: member="MC146818::clock_data" ref="a574a6ffc3b886b66eb7f05f4a4abc0d4" args="[10]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="classMC146818.html#a574a6ffc3b886b66eb7f05f4a4abc0d4">clock_data</a>[10]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1fa96dc80ff12927216cb2ce72306e55"></a><!-- doxytag: member="MC146818::curTime" ref="a1fa96dc80ff12927216cb2ce72306e55" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct tm <a class="el" href="classMC146818.html#a1fa96dc80ff12927216cb2ce72306e55">curTime</a><code> [read, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0c41402e021fa90f547adf9392abcc8d"></a><!-- doxytag: member="MC146818::dm" ref="a0c41402e021fa90f547adf9392abcc8d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bitfield&lt;2&gt; <a class="el" href="classMC146818.html#a0c41402e021fa90f547adf9392abcc8d">dm</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>1 = output sqare wave at SQW pin </p>

</div>
</div>
<a class="anchor" id="a08a594a517342cdd7b68781496ff83cb"></a><!-- doxytag: member="MC146818::dse" ref="a08a594a517342cdd7b68781496ff83cb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bitfield&lt;0&gt; <a class="el" href="classMC146818.html#a08a594a517342cdd7b68781496ff83cb">dse</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>0 = 12 hours, 1 = 24 hours </p>

</div>
</div>
<a class="anchor" id="a6cb58630092effe3e8ef2d674d7a3d1a"></a><!-- doxytag: member="MC146818::dv" ref="a6cb58630092effe3e8ef2d674d7a3d1a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bitfield&lt;6, 4&gt; <a class="el" href="classMC146818.html#a6cb58630092effe3e8ef2d674d7a3d1a">dv</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>1 = date and time update in progress </p>

</div>
</div>
<a class="anchor" id="adb3e426cd9214d797472cddc46fd8b0a"></a><!-- doxytag: member="MC146818::event" ref="adb3e426cd9214d797472cddc46fd8b0a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structMC146818_1_1RTCEvent.html">RTCEvent</a> <a class="el" href="classMC146818.html#adb3e426cd9214d797472cddc46fd8b0a">event</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>RTC periodic interrupt event </p>

</div>
</div>
<a class="anchor" id="a570b614b6c947c1a65c60a8b5f0c37a6"></a><!-- doxytag: member="MC146818::format24h" ref="a570b614b6c947c1a65c60a8b5f0c37a6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bitfield&lt;1&gt; <a class="el" href="classMC146818.html#a570b614b6c947c1a65c60a8b5f0c37a6">format24h</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>0 = BCD, 1 = Binary coded time </p>

</div>
</div>
<a class="anchor" id="ae5af4ff48939d13d480f87e56a9385d6"></a><!-- doxytag: member="MC146818::hour" ref="ae5af4ff48939d13d480f87e56a9385d6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="classMC146818.html#ae5af4ff48939d13d480f87e56a9385d6">hour</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a41c0d56541d0b0e66f915931f047e18d"></a><!-- doxytag: member="MC146818::hour_alrm" ref="a41c0d56541d0b0e66f915931f047e18d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="classMC146818.html#a41c0d56541d0b0e66f915931f047e18d">hour_alrm</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8f4f1d1a3991d8405faca08fd1c3ea9b"></a><!-- doxytag: member="MC146818::mday" ref="a8f4f1d1a3991d8405faca08fd1c3ea9b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="classMC146818.html#a8f4f1d1a3991d8405faca08fd1c3ea9b">mday</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ac9b481208b43f7c37ed25e446bdec692"></a><!-- doxytag: member="MC146818::min" ref="ac9b481208b43f7c37ed25e446bdec692" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="classMC146818.html#ac9b481208b43f7c37ed25e446bdec692">min</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a59555221d86f00c30bda63b8458fd6b4"></a><!-- doxytag: member="MC146818::min_alrm" ref="a59555221d86f00c30bda63b8458fd6b4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="classMC146818.html#a59555221d86f00c30bda63b8458fd6b4">min_alrm</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ac994d1b867aab54062cdd1ee94510030"></a><!-- doxytag: member="MC146818::mon" ref="ac994d1b867aab54062cdd1ee94510030" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="classMC146818.html#ac994d1b867aab54062cdd1ee94510030">mon</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab481b76028ca7f38eef64a2a0df7daa9"></a><!-- doxytag: member="MC146818::pie" ref="ab481b76028ca7f38eef64a2a0df7daa9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bitfield&lt;6&gt; <a class="el" href="classMC146818.html#ab481b76028ca7f38eef64a2a0df7daa9">pie</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>stop clock updates </p>

</div>
</div>
<a class="anchor" id="af889c7c5198ff826946778bb663d2da5"></a><!-- doxytag: member="MC146818::rs" ref="af889c7c5198ff826946778bb663d2da5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bitfield&lt;3, 0&gt; <a class="el" href="classMC146818.html#af889c7c5198ff826946778bb663d2da5">rs</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Divider configuration. </p>
<p>Rate selection 0 = Disabled For 32768 Hz time bases: Freq = 32768Hz / 2**(n-1) for n &gt;= 3 Freq = 256Hz if n = 1 Freq = 128Hz if n = 2 Othwerise: Freq = 32768Hz / 2**(n-1) </p>

</div>
</div>
<a class="anchor" id="ad1696900026b287a87c563b733a21bc3"></a><!-- doxytag: member="MC146818::sec" ref="ad1696900026b287a87c563b733a21bc3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="classMC146818.html#ad1696900026b287a87c563b733a21bc3">sec</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1d76d44501cb4a6ae50d2e4be0e81932"></a><!-- doxytag: member="MC146818::sec_alrm" ref="a1d76d44501cb4a6ae50d2e4be0e81932" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="classMC146818.html#a1d76d44501cb4a6ae50d2e4be0e81932">sec_alrm</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a91777eb5d8187720f48d7d5a193c7295"></a><!-- doxytag: member="MC146818::sqwe" ref="a91777eb5d8187720f48d7d5a193c7295" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bitfield&lt;3&gt; <a class="el" href="classMC146818.html#a91777eb5d8187720f48d7d5a193c7295">sqwe</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>1 = enable update-ended interrupt </p>

</div>
</div>
<a class="anchor" id="a59e2e13d7510625623f5f3e08ce29b1a"></a><!-- doxytag: member="MC146818::stat_regB" ref="a59e2e13d7510625623f5f3e08ce29b1a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RtcRegB <a class="el" href="classMC146818.html#a59e2e13d7510625623f5f3e08ce29b1a">stat_regB</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>RTC status register B </p>

</div>
</div>
<a class="anchor" id="afa706dc4758601c480227eead115ccfb"></a><!-- doxytag: member="MC146818::tickEvent" ref="afa706dc4758601c480227eead115ccfb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structMC146818_1_1RTCTickEvent.html">RTCTickEvent</a> <a class="el" href="classMC146818.html#afa706dc4758601c480227eead115ccfb">tickEvent</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>RTC tick event </p>

</div>
</div>
<a class="anchor" id="ad8be3702ba014f17744bad97962b3942"></a><!-- doxytag: member="MC146818::uie" ref="ad8be3702ba014f17744bad97962b3942" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bitfield&lt;4&gt; <a class="el" href="classMC146818.html#ad8be3702ba014f17744bad97962b3942">uie</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>1 = enable alarm interrupt </p>

</div>
</div>
<a class="anchor" id="acf7d2d98117c452b351c130883b70eba"></a><!-- doxytag: member="MC146818::wday" ref="acf7d2d98117c452b351c130883b70eba" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="classMC146818.html#acf7d2d98117c452b351c130883b70eba">wday</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a7af2065789bc84419b8d5fe109be83b5"></a><!-- doxytag: member="MC146818::year" ref="a7af2065789bc84419b8d5fe109be83b5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="classMC146818.html#a7af2065789bc84419b8d5fe109be83b5">year</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>dev/<a class="el" href="mc146818_8hh_source.html">mc146818.hh</a></li>
<li>dev/<a class="el" href="mc146818_8cc.html">mc146818.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
