<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス テンプレート OzoneLWLSQ&lt; Impl &gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>クラス テンプレート OzoneLWLSQ&lt; Impl &gt;</h1><!-- doxytag: class="OzoneLWLSQ" -->
<p><code>#include &lt;<a class="el" href="lw__lsq_8hh_source.html">lw_lsq.hh</a>&gt;</code></p>

<p><a href="classOzoneLWLSQ-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>構成</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ_1_1DcachePort.html">DcachePort</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structOzoneLWLSQ_1_1HashFn.html">HashFn</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ_1_1LSQSenderState.html">LSQSenderState</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structOzoneLWLSQ_1_1SQEntry.html">SQEntry</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ_1_1WritebackEvent.html">WritebackEvent</a></td></tr>
<tr><td colspan="2"><h2>Public 型</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70b">Status</a> { <a class="el" href="classOzoneLWLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70ba2f5f2c4a8c4f4f0519d503dcdfbf55cb">Running</a>, 
<a class="el" href="classOzoneLWLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70bad3fa9ae9431d6cb1772f9d9df48cab19">Idle</a>, 
<a class="el" href="classOzoneLWLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70ba4ba5ae5815b190bd652669e2fdea5ed7">DcacheMissStall</a>, 
<a class="el" href="classOzoneLWLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70bad01f64e5e67cc64e6ad4152f187a034d">DcacheMissSwitch</a>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef Impl::Params&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a818e103eae798a24a06a0a34631849ea">Params</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef Impl::OzoneCPU&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a9730cc41bccb218cae8f32869b8d887e">OzoneCPU</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef Impl::BackEnd&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a3de526baa0cbb2b55bf669a6f7bf81cc">BackEnd</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef Impl::DynInstPtr&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef Impl::IssueStruct&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a568c86f6403070f1cb743e994405ba8b">IssueStruct</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef TheISA::IntReg&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a1355cb78d031430d4d70eb5080267604">IntReg</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; <a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a>, <br class="typebreak"/>
<a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &gt;::iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a8b43ca5318a59872c61492868e50bab6">LdMapIt</a></td></tr>
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#aa933366a7f11b182f805d690c533776a">OzoneLWLSQ</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#ae8565b0968a8115705f1585e8aa21f75">init</a> (<a class="el" href="classOzoneLWLSQ.html#a818e103eae798a24a06a0a34631849ea">Params</a> *params, unsigned maxLQEntries, unsigned maxSQEntries, unsigned id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a4dc637449366fcdfc4e764cdf12d9b11">regStats</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#ab8056057b67b41f234f56940cc115cc1">setCPU</a> (<a class="el" href="classOzoneCPU.html">OzoneCPU</a> *cpu_ptr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a9134276ed85820d74779ad5826580822">setBE</a> (<a class="el" href="classBackEnd.html">BackEnd</a> *be_ptr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPort.html">Port</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a32e64f82b805fe23a17b01dda0f44fb0">getDcachePort</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a873dd91783f9efb4a590aded1f70d6b0">tick</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a773e88db1aa010c3755e603493bf40ec">insert</a> (<a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#ad22b3ecafed2bcd9c59fcab049a1cb98">insertLoad</a> (<a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;load_inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a6a4b4e51bfff3639932ebaba45e8a282">insertStore</a> (<a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;store_inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a30c6332142c2ecca389ed6ee463c692b">executeLoad</a> (<a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#aad78b8a37ee5c61e47df58dd39980340">executeStore</a> (<a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a8ddd26e169a62ec5ae591a9f95934839">commitLoad</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a1ae517a923a864a4e3a5aa1eeb2dd2d6">commitLoads</a> (<a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> &amp;youngest_inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a954ce1ce58b67cae49ba127d5ea40701">commitStores</a> (<a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> &amp;youngest_inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a5f04e29d6f6feb8b86460491f2ba7547">writebackStores</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a0f7f0d3412bbf494cd3d0c0f48e5fcf2">completeDataAccess</a> (<a class="el" href="classPacket.html">PacketPtr</a> pkt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#ae3af532345dbe6519e8272d9cd677230">clearLQ</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a171cd7891063f418b1ee217f5c03537b">clearSQ</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a3bc9500810cb2d5615e29206e2d6499f">resizeLQ</a> (unsigned size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a341dd6a3bd8d240659fd9d698c3b5c65">resizeSQ</a> (unsigned size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a51dd7e304d5413447717826fac6f4921">squash</a> (const <a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> &amp;squashed_num)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a4f720bbfb5fdefdb23516500eeb0b4de">violation</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a30adaf6f5fb6b38b5747f35c419e3f31">getMemDepViolator</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a05c413ba417c6453e99f75d87c958590">loadBlocked</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#aaa9628e569d007b553e6830774b8548c">clearLoadBlocked</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#ad0aa91a7b51ca925abf9c9992abad314">isLoadBlockedHandled</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#ac8bfb1e163f7ba2261d702623226973d">setLoadBlockedHandled</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a028971a565aca048c67ea1c36a6a9d51">numFreeEntries</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a9aa5d5a61b2229931008ac2ea802a3ab">numLoadsReady</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a54460b759fb06e2b18e26657279a6f49">numLoads</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#aa0fc32a4a9d77696f5907f4d25e7d07f">numStores</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a3e70330939fdfc4dbc2f60c1a660584d">isFull</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a5893daf623130be826f492bbff58f757">lqFull</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a477981d1f905d2d398a1527f7149e3c4">sqFull</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a80587b4fe043bbe1995536cb3b361588">dumpInsts</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a24ba9cb3fa1e726321780a20a960c8cd">getCount</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#ad2e4b46255cfb53e85522adeed4e2089">hasStoresToWB</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a276cdbdaf4551f1b846c4e2535c5f882">numStoresToWB</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a338be821734603396bfef8d9fb8f04b0">willWB</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a05f299b443f8cc73a93d61572edc0218">switchOut</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a5a901e7ec5b94a55bd61fde88ad0b7f1">takeOverFrom</a> (<a class="el" href="classThreadContext.html">ThreadContext</a> *old_tc=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a471165257f311a78136ce991a3bad31a">isSwitchedOut</a> ()</td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a0747777ac998dabdc20fa0c554d378d3">read</a> (<a class="el" href="classRequest.html">RequestPtr</a> req, T &amp;data, int load_idx)</td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#abbf7bcc93511421a1787650a43e2642a">write</a> (<a class="el" href="classRequest.html">RequestPtr</a> req, T &amp;data, int store_idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#aee7352adadc6b43b7ce36a8c052eb222">getLoadHeadSeqNum</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a1813b58ab7569d6aeefb5d4e235cceda">getStoreHeadSeqNum</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#af8eb8590fbfa6ecd2f796390677a4c00">isStalled</a> ()</td></tr>
<tr><td colspan="2"><h2>Public 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a1aee6db9bfb75cf02e38a82e5d02847f">switchedOut</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a04638dcfe9b4f8584453bb178bd2da5e">storesInFlight</a></td></tr>
<tr><td colspan="2"><h2>Private 型</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classstd_1_1list.html">std::list</a>&lt; <a class="el" href="structOzoneLWLSQ_1_1SQEntry.html">SQEntry</a> &gt;<br class="typebreak"/>
::iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a3b2dd16f487adc977c43201cd7f51558">SQIt</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classstd_1_1list.html">std::list</a>&lt; <a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &gt;<br class="typebreak"/>
::iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a363c8c15e054d23b34f72063429933b8">LQIt</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef m5::hash_map&lt; int, <br class="typebreak"/>
<a class="el" href="classOzoneLWLSQ.html#a363c8c15e054d23b34f72063429933b8">LQIt</a>, <a class="el" href="structOzoneLWLSQ_1_1HashFn.html">HashFn</a> &gt;::iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#ac0ca3d8ca19168e251c7233ec1f9a171">LQHashIt</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef m5::hash_map&lt; int, <br class="typebreak"/>
<a class="el" href="classOzoneLWLSQ.html#a3b2dd16f487adc977c43201cd7f51558">SQIt</a>, <a class="el" href="structOzoneLWLSQ_1_1HashFn.html">HashFn</a> &gt;::iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#af476de7b08376a4d7d7cd4b8dbbabb7a">SQHashIt</a></td></tr>
<tr><td colspan="2"><h2>Private メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a3911bacb8817c31cfbeefd125dba0217">writeback</a> (<a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;inst, <a class="el" href="classPacket.html">PacketPtr</a> pkt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#af841afeea43eb2b2272f0dfaf17c3f4e">storePostSend</a> (<a class="el" href="classPacket.html">PacketPtr</a> pkt, <a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a14bf528b217d02373076ed257f448dbf">completeStore</a> (<a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#ad5ff9e08c63a01ac86a8f80765b37365">removeStore</a> (int store_idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a29cb5a4f98063ce6e9210eacbdb35298">recvRetry</a> ()</td></tr>
<tr><td colspan="2"><h2>Private 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOzoneCPU.html">OzoneCPU</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a61b5f503eec141308b0cd6b4322b405b">cpu</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBackEnd.html">BackEnd</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a84f815aa1fa864ba2e6d75f5ad2b52d1">be</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOzoneLWLSQ_1_1DcachePort.html">DcachePort</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a38b03978ad7720fdc910ff6a8b44585f">dcachePort</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#adfd96fbbaa327a31d20f0d4134418fad">lsqID</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOzoneLWLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70b">Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a6cdf6e6db875a442f3ab6db542bd2bb5">_status</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1list.html">std::list</a>&lt; <a class="el" href="structOzoneLWLSQ_1_1SQEntry.html">SQEntry</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1list.html">std::list</a>&lt; <a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">m5::hash_map&lt; int, <a class="el" href="classOzoneLWLSQ.html#a3b2dd16f487adc977c43201cd7f51558">SQIt</a>, <a class="el" href="structOzoneLWLSQ_1_1HashFn.html">HashFn</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a3eb9bc9d55fde5b98e8d28a220d247f6">SQItHash</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::queue&lt; int &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a94838aca72c880423d2328ae17f065e6">SQIndices</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">m5::hash_map&lt; int, <a class="el" href="classOzoneLWLSQ.html#a363c8c15e054d23b34f72063429933b8">LQIt</a>, <a class="el" href="structOzoneLWLSQ_1_1HashFn.html">HashFn</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#afd55cfcf685cda7dafc7c52d5105e129">LQItHash</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::queue&lt; int &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a78218da891879fae16fe75c73981f75f">LQIndices</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a38c8af5392da70119dc5cce4e3637cbc">SQEntries</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#ab2e23636971c40e7ed945026b2a184e1">cachePorts</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a03435d626b7567ed154de5d7d8c3d419">usedPorts</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#ac499fc2b461e03a110deae7c695f75bc">lsqMemOrderViolation</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e">Counter</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a8b4696062ef09ab956804a7a99491853">lastDcacheStall</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a6f8bff553ad30865c7d0c62e05421eb8">stalled</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#afe1cdcfca6b44c28581d862228adc3da">stallingStoreIsn</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOzoneLWLSQ.html#a363c8c15e054d23b34f72063429933b8">LQIt</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a567a64b358df6ae6162124cfe4d00db3">stallingLoad</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a314ae93c04b3ca96e79e1b1f39a8e478">retryPkt</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a89d931c74b63e0b0e7ad856fe9525ff6">isStoreBlocked</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a95dc31b4ce3ebcb6b9d75a510b3a128c">isLoadBlocked</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a2c1620029c162c7180e523b089e56ed5">loadBlockedHandled</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a3fca34b247fd8d081557578f8ca60fe3">blockedLoadSeqNum</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a7123aa8b10829cc4712dff5454e13978">loadFaultInst</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#ab98cf7d5235b7402e8916e78569f4ab2">storeFaultInst</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLWLSQ.html#a270a20c3fa52139e0538288275db9d22">memDepViolator</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>説明</h2>
<h3>template&lt;class Impl&gt;<br/>
 class OzoneLWLSQ&lt; Impl &gt;</h3>

<p>Class that implements the actual LQ and SQ for each specific thread. Both are circular queues; load entries are freed upon committing, while store entries are freed once they writeback. The <a class="el" href="classLSQUnit.html">LSQUnit</a> tracks if there are memory ordering violations, and also detects partial load to store forwarding cases (a store only has part of a load's data) that requires the load to wait until the store writes back. In the former case it holds onto the instruction until the dependence unit looks at it, and in the latter it stalls the <a class="el" href="classLSQ.html">LSQ</a> until the store writes back. At that point the load is replayed. </p>
<hr/><h2>型定義</h2>
<a class="anchor" id="a3de526baa0cbb2b55bf669a6f7bf81cc"></a><!-- doxytag: member="OzoneLWLSQ::BackEnd" ref="a3de526baa0cbb2b55bf669a6f7bf81cc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef Impl::BackEnd <a class="el" href="classBackEnd.html">BackEnd</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a028ce10889c5f6450239d9e9a7347976"></a><!-- doxytag: member="OzoneLWLSQ::DynInstPtr" ref="a028ce10889c5f6450239d9e9a7347976" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef Impl::DynInstPtr <a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1355cb78d031430d4d70eb5080267604"></a><!-- doxytag: member="OzoneLWLSQ::IntReg" ref="a1355cb78d031430d4d70eb5080267604" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef TheISA::IntReg <a class="el" href="classOzoneLWLSQ.html#a1355cb78d031430d4d70eb5080267604">IntReg</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a568c86f6403070f1cb743e994405ba8b"></a><!-- doxytag: member="OzoneLWLSQ::IssueStruct" ref="a568c86f6403070f1cb743e994405ba8b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef Impl::IssueStruct <a class="el" href="structIssueStruct.html">IssueStruct</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8b43ca5318a59872c61492868e50bab6"></a><!-- doxytag: member="OzoneLWLSQ::LdMapIt" ref="a8b43ca5318a59872c61492868e50bab6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;<a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a>, <a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>&gt;::iterator <a class="el" href="classOzoneLWLSQ.html#a8b43ca5318a59872c61492868e50bab6">LdMapIt</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ac0ca3d8ca19168e251c7233ec1f9a171"></a><!-- doxytag: member="OzoneLWLSQ::LQHashIt" ref="ac0ca3d8ca19168e251c7233ec1f9a171" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef m5::hash_map&lt;int, <a class="el" href="classOzoneLWLSQ.html#a363c8c15e054d23b34f72063429933b8">LQIt</a>, <a class="el" href="structOzoneLWLSQ_1_1HashFn.html">HashFn</a>&gt;::iterator <a class="el" href="classOzoneLWLSQ.html#ac0ca3d8ca19168e251c7233ec1f9a171">LQHashIt</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a363c8c15e054d23b34f72063429933b8"></a><!-- doxytag: member="OzoneLWLSQ::LQIt" ref="a363c8c15e054d23b34f72063429933b8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classstd_1_1list.html">std::list</a>&lt;<a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>&gt;::iterator <a class="el" href="classOzoneLWLSQ.html#a363c8c15e054d23b34f72063429933b8">LQIt</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9730cc41bccb218cae8f32869b8d887e"></a><!-- doxytag: member="OzoneLWLSQ::OzoneCPU" ref="a9730cc41bccb218cae8f32869b8d887e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef Impl::OzoneCPU <a class="el" href="classOzoneCPU.html">OzoneCPU</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a818e103eae798a24a06a0a34631849ea"></a><!-- doxytag: member="OzoneLWLSQ::Params" ref="a818e103eae798a24a06a0a34631849ea" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef Impl::Params <a class="el" href="classOzoneLWLSQ.html#a818e103eae798a24a06a0a34631849ea">Params</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="af476de7b08376a4d7d7cd4b8dbbabb7a"></a><!-- doxytag: member="OzoneLWLSQ::SQHashIt" ref="af476de7b08376a4d7d7cd4b8dbbabb7a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef m5::hash_map&lt;int, <a class="el" href="classOzoneLWLSQ.html#a3b2dd16f487adc977c43201cd7f51558">SQIt</a>, <a class="el" href="structOzoneLWLSQ_1_1HashFn.html">HashFn</a>&gt;::iterator <a class="el" href="classOzoneLWLSQ.html#af476de7b08376a4d7d7cd4b8dbbabb7a">SQHashIt</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3b2dd16f487adc977c43201cd7f51558"></a><!-- doxytag: member="OzoneLWLSQ::SQIt" ref="a3b2dd16f487adc977c43201cd7f51558" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classstd_1_1list.html">std::list</a>&lt;<a class="el" href="structOzoneLWLSQ_1_1SQEntry.html">SQEntry</a>&gt;::iterator <a class="el" href="classOzoneLWLSQ.html#a3b2dd16f487adc977c43201cd7f51558">SQIt</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>列挙型</h2>
<a class="anchor" id="a67a0db04d321a74b7e7fcfd3f1a3f70b"></a><!-- doxytag: member="OzoneLWLSQ::Status" ref="a67a0db04d321a74b7e7fcfd3f1a3f70b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classOzoneLWLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70b">Status</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>列挙型の値: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a67a0db04d321a74b7e7fcfd3f1a3f70ba2f5f2c4a8c4f4f0519d503dcdfbf55cb"></a><!-- doxytag: member="Running" ref="a67a0db04d321a74b7e7fcfd3f1a3f70ba2f5f2c4a8c4f4f0519d503dcdfbf55cb" args="" -->Running</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a67a0db04d321a74b7e7fcfd3f1a3f70bad3fa9ae9431d6cb1772f9d9df48cab19"></a><!-- doxytag: member="Idle" ref="a67a0db04d321a74b7e7fcfd3f1a3f70bad3fa9ae9431d6cb1772f9d9df48cab19" args="" -->Idle</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a67a0db04d321a74b7e7fcfd3f1a3f70ba4ba5ae5815b190bd652669e2fdea5ed7"></a><!-- doxytag: member="DcacheMissStall" ref="a67a0db04d321a74b7e7fcfd3f1a3f70ba4ba5ae5815b190bd652669e2fdea5ed7" args="" -->DcacheMissStall</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a67a0db04d321a74b7e7fcfd3f1a3f70bad01f64e5e67cc64e6ad4152f187a034d"></a><!-- doxytag: member="DcacheMissSwitch" ref="a67a0db04d321a74b7e7fcfd3f1a3f70bad01f64e5e67cc64e6ad4152f187a034d" args="" -->DcacheMissSwitch</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00344"></a>00344                 {
<a name="l00345"></a>00345         <a class="code" href="classOzoneLWLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70ba2f5f2c4a8c4f4f0519d503dcdfbf55cb">Running</a>,
<a name="l00346"></a>00346         <a class="code" href="classOzoneLWLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70bad3fa9ae9431d6cb1772f9d9df48cab19">Idle</a>,
<a name="l00347"></a>00347         <a class="code" href="classOzoneLWLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70ba4ba5ae5815b190bd652669e2fdea5ed7">DcacheMissStall</a>,
<a name="l00348"></a>00348         <a class="code" href="classOzoneLWLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70bad01f64e5e67cc64e6ad4152f187a034d">DcacheMissSwitch</a>
<a name="l00349"></a>00349     };
</pre></div></p>

</div>
</div>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="aa933366a7f11b182f805d690c533776a"></a><!-- doxytag: member="OzoneLWLSQ::OzoneLWLSQ" ref="aa933366a7f11b182f805d690c533776a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOzoneLWLSQ.html">OzoneLWLSQ</a> </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Constructs an <a class="el" href="classLSQ.html">LSQ</a> unit. <a class="el" href="classOzoneLWLSQ.html#ae8565b0968a8115705f1585e8aa21f75">init()</a> must be called prior to use. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00126"></a>00126     : <a class="code" href="classOzoneLWLSQ.html#a1aee6db9bfb75cf02e38a82e5d02847f">switchedOut</a>(<span class="keyword">false</span>), <a class="code" href="classOzoneLWLSQ.html#a38b03978ad7720fdc910ff6a8b44585f">dcachePort</a>(<span class="keyword">this</span>), <a class="code" href="classOzoneLWLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a>(0), <a class="code" href="classOzoneLWLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a>(0),
<a name="l00127"></a>00127       <a class="code" href="classOzoneLWLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a>(0), <a class="code" href="classOzoneLWLSQ.html#a04638dcfe9b4f8584453bb178bd2da5e">storesInFlight</a>(0), <a class="code" href="classOzoneLWLSQ.html#a6f8bff553ad30865c7d0c62e05421eb8">stalled</a>(<span class="keyword">false</span>), <a class="code" href="classOzoneLWLSQ.html#a89d931c74b63e0b0e7ad856fe9525ff6">isStoreBlocked</a>(<span class="keyword">false</span>),
<a name="l00128"></a>00128       <a class="code" href="classOzoneLWLSQ.html#a95dc31b4ce3ebcb6b9d75a510b3a128c">isLoadBlocked</a>(<span class="keyword">false</span>), <a class="code" href="classOzoneLWLSQ.html#a2c1620029c162c7180e523b089e56ed5">loadBlockedHandled</a>(<span class="keyword">false</span>)
<a name="l00129"></a>00129 {
<a name="l00130"></a>00130 }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="aaa9628e569d007b553e6830774b8548c"></a><!-- doxytag: member="OzoneLWLSQ::clearLoadBlocked" ref="aaa9628e569d007b553e6830774b8548c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clearLoadBlocked </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00166"></a>00166     { <a class="code" href="classOzoneLWLSQ.html#a95dc31b4ce3ebcb6b9d75a510b3a128c">isLoadBlocked</a> = <span class="keyword">false</span>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae3af532345dbe6519e8272d9cd677230"></a><!-- doxytag: member="OzoneLWLSQ::clearLQ" ref="ae3af532345dbe6519e8272d9cd677230" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clearLQ </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Clears all the entries in the LQ. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00188"></a>00188 {
<a name="l00189"></a>00189     <a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.clear();
<a name="l00190"></a>00190 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a171cd7891063f418b1ee217f5c03537b"></a><!-- doxytag: member="OzoneLWLSQ::clearSQ" ref="a171cd7891063f418b1ee217f5c03537b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clearSQ </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Clears all the entries in the SQ. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00195"></a>00195 {
<a name="l00196"></a>00196     <a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.clear();
<a name="l00197"></a>00197 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8ddd26e169a62ec5ae591a9f95934839"></a><!-- doxytag: member="OzoneLWLSQ::commitLoad" ref="a8ddd26e169a62ec5ae591a9f95934839" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void commitLoad </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Commits the head load. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00482"></a>00482 {
<a name="l00483"></a>00483     assert(!<a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.empty());
<a name="l00484"></a>00484 
<a name="l00485"></a>00485     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;[sn:%lli] Committing head load instruction, PC %#x\n&quot;</span>,
<a name="l00486"></a>00486             <a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.back()-&gt;seqNum, <a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.back()-&gt;readPC());
<a name="l00487"></a>00487 
<a name="l00488"></a>00488     <a class="code" href="classOzoneLWLSQ.html#a78218da891879fae16fe75c73981f75f">LQIndices</a>.push(<a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.back()-&gt;lqIdx);
<a name="l00489"></a>00489     <a class="code" href="classOzoneLWLSQ.html#afd55cfcf685cda7dafc7c52d5105e129">LQItHash</a>.erase(<a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.back()-&gt;lqIdx);
<a name="l00490"></a>00490 
<a name="l00491"></a>00491     <a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.pop_back();
<a name="l00492"></a>00492 
<a name="l00493"></a>00493     --<a class="code" href="classOzoneLWLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a>;
<a name="l00494"></a>00494 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1ae517a923a864a4e3a5aa1eeb2dd2d6"></a><!-- doxytag: member="OzoneLWLSQ::commitLoads" ref="a1ae517a923a864a4e3a5aa1eeb2dd2d6" args="(InstSeqNum &amp;youngest_inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void commitLoads </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>youngest_inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Commits loads older than a specific sequence number. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00499"></a>00499 {
<a name="l00500"></a>00500     assert(<a class="code" href="classOzoneLWLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a> == 0 || !<a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.empty());
<a name="l00501"></a>00501 
<a name="l00502"></a>00502     <span class="keywordflow">while</span> (<a class="code" href="classOzoneLWLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a> != 0 &amp;&amp;
<a name="l00503"></a>00503            <a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.back()-&gt;seqNum &lt;= youngest_inst) {
<a name="l00504"></a>00504         <a class="code" href="classOzoneLWLSQ.html#a8ddd26e169a62ec5ae591a9f95934839">commitLoad</a>();
<a name="l00505"></a>00505     }
<a name="l00506"></a>00506 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a954ce1ce58b67cae49ba127d5ea40701"></a><!-- doxytag: member="OzoneLWLSQ::commitStores" ref="a954ce1ce58b67cae49ba127d5ea40701" args="(InstSeqNum &amp;youngest_inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void commitStores </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>youngest_inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Commits stores older than a specific sequence number. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00511"></a>00511 {
<a name="l00512"></a>00512     assert(<a class="code" href="classOzoneLWLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a> == 0 || !<a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.empty());
<a name="l00513"></a>00513 
<a name="l00514"></a>00514     <a class="code" href="classOzoneLWLSQ.html#a3b2dd16f487adc977c43201cd7f51558">SQIt</a> sq_it = --(<a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.end());
<a name="l00515"></a>00515     <span class="keywordflow">while</span> (!<a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.empty() &amp;&amp; sq_it != <a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.end()) {
<a name="l00516"></a>00516         assert((*sq_it).inst);
<a name="l00517"></a>00517         <span class="keywordflow">if</span> (!(*sq_it).canWB) {
<a name="l00518"></a>00518             <span class="keywordflow">if</span> ((*sq_it).inst-&gt;seqNum &gt; youngest_inst) {
<a name="l00519"></a>00519                 <span class="keywordflow">break</span>;
<a name="l00520"></a>00520             }
<a name="l00521"></a>00521             ++<a class="code" href="classOzoneLWLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a>;
<a name="l00522"></a>00522 
<a name="l00523"></a>00523             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Marking store as able to write back, PC &quot;</span>
<a name="l00524"></a>00524                     <span class="stringliteral">&quot;%#x [sn:%lli], storesToWB:%i\n&quot;</span>,
<a name="l00525"></a>00525                     (*sq_it).inst-&gt;readPC(),
<a name="l00526"></a>00526                     (*sq_it).inst-&gt;seqNum,
<a name="l00527"></a>00527                     <a class="code" href="classOzoneLWLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a>);
<a name="l00528"></a>00528 
<a name="l00529"></a>00529             (*sq_it).canWB = <span class="keyword">true</span>;
<a name="l00530"></a>00530         }
<a name="l00531"></a>00531 
<a name="l00532"></a>00532         sq_it--;
<a name="l00533"></a>00533     }
<a name="l00534"></a>00534 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0f7f0d3412bbf494cd3d0c0f48e5fcf2"></a><!-- doxytag: member="OzoneLWLSQ::completeDataAccess" ref="a0f7f0d3412bbf494cd3d0c0f48e5fcf2" args="(PacketPtr pkt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void completeDataAccess </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pkt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Completes the data access that has been returned from the memory system. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00098"></a>00098 {
<a name="l00099"></a>00099     LSQSenderState *state = <span class="keyword">dynamic_cast&lt;</span>LSQSenderState *<span class="keyword">&gt;</span>(pkt-&gt;<a class="code" href="classPacket.html#a983ade0479f946c813284dcc65073367">senderState</a>);
<a name="l00100"></a>00100     <a class="code" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> inst = state-&gt;inst;
<a name="l00101"></a>00101     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(IEW, <span class="stringliteral">&quot;Writeback event [sn:%lli]\n&quot;</span>, inst-&gt;seqNum);
<a name="l00102"></a>00102     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Activity, <span class="stringliteral">&quot;Activity: Writeback event [sn:%lli]\n&quot;</span>, inst-&gt;seqNum);
<a name="l00103"></a>00103 
<a name="l00104"></a>00104     <span class="comment">//iewStage-&gt;ldstQueue.removeMSHR(inst-&gt;threadNumber,inst-&gt;seqNum);</span>
<a name="l00105"></a>00105 
<a name="l00106"></a>00106     <span class="keywordflow">if</span> (<a class="code" href="classOzoneLWLSQ.html#a471165257f311a78136ce991a3bad31a">isSwitchedOut</a>() || inst-&gt;isSquashed()) {
<a name="l00107"></a>00107         <span class="keyword">delete</span> state;
<a name="l00108"></a>00108         <span class="keyword">delete</span> pkt;
<a name="l00109"></a>00109         <span class="keywordflow">return</span>;
<a name="l00110"></a>00110     } <span class="keywordflow">else</span> {
<a name="l00111"></a>00111         <span class="keywordflow">if</span> (!state-&gt;noWB) {
<a name="l00112"></a>00112             <a class="code" href="classOzoneLWLSQ.html#a3911bacb8817c31cfbeefd125dba0217">writeback</a>(inst, pkt);
<a name="l00113"></a>00113         }
<a name="l00114"></a>00114 
<a name="l00115"></a>00115         <span class="keywordflow">if</span> (inst-&gt;isStore()) {
<a name="l00116"></a>00116             <a class="code" href="classOzoneLWLSQ.html#a14bf528b217d02373076ed257f448dbf">completeStore</a>(inst);
<a name="l00117"></a>00117         }
<a name="l00118"></a>00118     }
<a name="l00119"></a>00119 
<a name="l00120"></a>00120     <span class="keyword">delete</span> state;
<a name="l00121"></a>00121     <span class="keyword">delete</span> pkt;
<a name="l00122"></a>00122 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a14bf528b217d02373076ed257f448dbf"></a><!-- doxytag: member="OzoneLWLSQ::completeStore" ref="a14bf528b217d02373076ed257f448dbf" args="(DynInstPtr &amp;inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void completeStore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Completes the store at the specified index. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00904"></a>00904 {
<a name="l00905"></a>00905     --<a class="code" href="classOzoneLWLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a>;
<a name="l00906"></a>00906     --<a class="code" href="classOzoneLWLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a>;
<a name="l00907"></a>00907 
<a name="l00908"></a>00908     inst-&gt;setCompleted();
<a name="l00909"></a>00909     <span class="keywordflow">if</span> (<a class="code" href="classOzoneLWLSQ.html#a61b5f503eec141308b0cd6b4322b405b">cpu</a>-&gt;<a class="code" href="classOzoneCPU.html#af07b45c0b87d6672f4066d2c189013f9">checker</a>) {
<a name="l00910"></a>00910         <a class="code" href="classOzoneLWLSQ.html#a61b5f503eec141308b0cd6b4322b405b">cpu</a>-&gt;<a class="code" href="classOzoneCPU.html#af07b45c0b87d6672f4066d2c189013f9">checker</a>-&gt;<a class="code" href="classChecker.html#af7588193b0187186501d440f02645196">verify</a>(inst);
<a name="l00911"></a>00911     }
<a name="l00912"></a>00912 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a80587b4fe043bbe1995536cb3b361588"></a><!-- doxytag: member="OzoneLWLSQ::dumpInsts" ref="a80587b4fe043bbe1995536cb3b361588" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dumpInsts </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Debugging function to dump instructions in the <a class="el" href="classLSQ.html">LSQ</a>. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00790"></a>00790 {
<a name="l00791"></a>00791     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Load store queue: Dumping instructions.\n&quot;</span>);
<a name="l00792"></a>00792     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Load queue size: %i\n&quot;</span>, <a class="code" href="classOzoneLWLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a>);
<a name="l00793"></a>00793     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Load queue: &quot;</span>);
<a name="l00794"></a>00794 
<a name="l00795"></a>00795     <a class="code" href="classOzoneLWLSQ.html#a363c8c15e054d23b34f72063429933b8">LQIt</a> lq_it = --(<a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.end());
<a name="l00796"></a>00796 
<a name="l00797"></a>00797     <span class="keywordflow">while</span> (lq_it != <a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.end() &amp;&amp; (*lq_it)) {
<a name="l00798"></a>00798         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;[sn:%lli] %#x &quot;</span>, (*lq_it)-&gt;seqNum,
<a name="l00799"></a>00799                 (*lq_it)-&gt;readPC());
<a name="l00800"></a>00800 
<a name="l00801"></a>00801         lq_it--;
<a name="l00802"></a>00802     }
<a name="l00803"></a>00803 
<a name="l00804"></a>00804     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;\nStore queue size: %i\n&quot;</span>, <a class="code" href="classOzoneLWLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a>);
<a name="l00805"></a>00805     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Store queue: &quot;</span>);
<a name="l00806"></a>00806 
<a name="l00807"></a>00807     <a class="code" href="classOzoneLWLSQ.html#a3b2dd16f487adc977c43201cd7f51558">SQIt</a> sq_it = --(<a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.end());
<a name="l00808"></a>00808 
<a name="l00809"></a>00809     <span class="keywordflow">while</span> (sq_it != <a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.end() &amp;&amp; (*sq_it).inst) {
<a name="l00810"></a>00810         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;[sn:%lli]\nPC:%#x\nSize:%i\nCommitted:%i\nCompleted:%i\ncanWB:%i\n&quot;</span>,
<a name="l00811"></a>00811                 (*sq_it).inst-&gt;seqNum,
<a name="l00812"></a>00812                 (*sq_it).inst-&gt;readPC(),
<a name="l00813"></a>00813                 (*sq_it).size,
<a name="l00814"></a>00814                 (*sq_it).committed,
<a name="l00815"></a>00815                 (*sq_it).completed,
<a name="l00816"></a>00816                 (*sq_it).canWB);
<a name="l00817"></a>00817 
<a name="l00818"></a>00818         sq_it--;
<a name="l00819"></a>00819     }
<a name="l00820"></a>00820 
<a name="l00821"></a>00821     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00822"></a>00822 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a30c6332142c2ecca389ed6ee463c692b"></a><!-- doxytag: member="OzoneLWLSQ::executeLoad" ref="a30c6332142c2ecca389ed6ee463c692b" args="(DynInstPtr &amp;inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">Fault</a> executeLoad </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Executes a load instruction. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00352"></a>00352 {
<a name="l00353"></a>00353     <span class="comment">// Execute a specific load.</span>
<a name="l00354"></a>00354     <a class="code" href="classRefCountingPtr.html">Fault</a> load_fault = <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00355"></a>00355 
<a name="l00356"></a>00356     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Executing load PC %#x, [sn:%lli]\n&quot;</span>,
<a name="l00357"></a>00357             inst-&gt;readPC(),inst-&gt;seqNum);
<a name="l00358"></a>00358 
<a name="l00359"></a>00359     <span class="comment">// Make sure it&apos;s really in the list.</span>
<a name="l00360"></a>00360     <span class="comment">// Normally it should always be in the list.  However,</span>
<a name="l00361"></a>00361     <span class="comment">/* due to a syscall it may not be the list.</span>
<a name="l00362"></a>00362 <span class="comment">#ifdef DEBUG</span>
<a name="l00363"></a>00363 <span class="comment">    int i = loadHead;</span>
<a name="l00364"></a>00364 <span class="comment">    while (1) {</span>
<a name="l00365"></a>00365 <span class="comment">        if (i == loadTail &amp;&amp; !find(inst)) {</span>
<a name="l00366"></a>00366 <span class="comment">            assert(0 &amp;&amp; &quot;Load not in the queue!&quot;);</span>
<a name="l00367"></a>00367 <span class="comment">        } else if (loadQueue[i] == inst) {</span>
<a name="l00368"></a>00368 <span class="comment">            break;</span>
<a name="l00369"></a>00369 <span class="comment">        }</span>
<a name="l00370"></a>00370 <span class="comment"></span>
<a name="l00371"></a>00371 <span class="comment">        i = i + 1;</span>
<a name="l00372"></a>00372 <span class="comment">        if (i &gt;= LQEntries) {</span>
<a name="l00373"></a>00373 <span class="comment">            i = 0;</span>
<a name="l00374"></a>00374 <span class="comment">        }</span>
<a name="l00375"></a>00375 <span class="comment">    }</span>
<a name="l00376"></a>00376 <span class="comment">#endif // DEBUG*/</span>
<a name="l00377"></a>00377 
<a name="l00378"></a>00378     load_fault = inst-&gt;initiateAcc();
<a name="l00379"></a>00379 
<a name="l00380"></a>00380     <span class="comment">// Might want to make sure that I&apos;m not overwriting a previously faulting</span>
<a name="l00381"></a>00381     <span class="comment">// instruction that hasn&apos;t been checked yet.</span>
<a name="l00382"></a>00382     <span class="comment">// Actually probably want the oldest faulting load</span>
<a name="l00383"></a>00383     <span class="keywordflow">if</span> (load_fault != <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>) {
<a name="l00384"></a>00384         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Load [sn:%lli] has a fault\n&quot;</span>, inst-&gt;seqNum);
<a name="l00385"></a>00385         <span class="keywordflow">if</span> (!(inst-&gt;req-&gt;isUncacheable() &amp;&amp; !inst-&gt;isAtCommit())) {
<a name="l00386"></a>00386             inst-&gt;setExecuted();
<a name="l00387"></a>00387         }
<a name="l00388"></a>00388         <span class="comment">// Maybe just set it as can commit here, although that might cause</span>
<a name="l00389"></a>00389         <span class="comment">// some other problems with sending traps to the ROB too quickly.</span>
<a name="l00390"></a>00390         <a class="code" href="classOzoneLWLSQ.html#a84f815aa1fa864ba2e6d75f5ad2b52d1">be</a>-&gt;<a class="code" href="classBackEnd.html#a720e9865ffa6e84b756f5ec1d1a24d94">instToCommit</a>(inst);
<a name="l00391"></a>00391 <span class="comment">//        iewStage-&gt;activityThisCycle();</span>
<a name="l00392"></a>00392     }
<a name="l00393"></a>00393 
<a name="l00394"></a>00394     <span class="keywordflow">return</span> load_fault;
<a name="l00395"></a>00395 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aad78b8a37ee5c61e47df58dd39980340"></a><!-- doxytag: member="OzoneLWLSQ::executeStore" ref="aad78b8a37ee5c61e47df58dd39980340" args="(DynInstPtr &amp;inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">Fault</a> executeStore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Executes a store instruction. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00400"></a>00400 {
<a name="l00401"></a>00401     <span class="comment">// Make sure that a store exists.</span>
<a name="l00402"></a>00402     assert(<a class="code" href="classOzoneLWLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a> != 0);
<a name="l00403"></a>00403 
<a name="l00404"></a>00404     <span class="keywordtype">int</span> store_idx = store_inst-&gt;sqIdx;
<a name="l00405"></a>00405     <a class="code" href="classOzoneLWLSQ.html#af476de7b08376a4d7d7cd4b8dbbabb7a">SQHashIt</a> sq_hash_it = <a class="code" href="classOzoneLWLSQ.html#a3eb9bc9d55fde5b98e8d28a220d247f6">SQItHash</a>.find(store_idx);
<a name="l00406"></a>00406     assert(sq_hash_it != <a class="code" href="classOzoneLWLSQ.html#a3eb9bc9d55fde5b98e8d28a220d247f6">SQItHash</a>.end());
<a name="l00407"></a>00407     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Executing store PC %#x [sn:%lli]\n&quot;</span>,
<a name="l00408"></a>00408             store_inst-&gt;readPC(), store_inst-&gt;seqNum);
<a name="l00409"></a>00409 
<a name="l00410"></a>00410     <a class="code" href="classOzoneLWLSQ.html#a3b2dd16f487adc977c43201cd7f51558">SQIt</a> sq_it = (*sq_hash_it).second;
<a name="l00411"></a>00411 
<a name="l00412"></a>00412     <a class="code" href="classRefCountingPtr.html">Fault</a> store_fault = store_inst-&gt;initiateAcc();
<a name="l00413"></a>00413 
<a name="l00414"></a>00414     <span class="comment">// Store size should now be available.  Use it to get proper offset for</span>
<a name="l00415"></a>00415     <span class="comment">// addr comparisons.</span>
<a name="l00416"></a>00416     <span class="keywordtype">int</span> size = (*sq_it).size;
<a name="l00417"></a>00417 
<a name="l00418"></a>00418     <span class="keywordflow">if</span> (size == 0) {
<a name="l00419"></a>00419         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>,<span class="stringliteral">&quot;Fault on Store PC %#x, [sn:%lli],Size = 0\n&quot;</span>,
<a name="l00420"></a>00420                 store_inst-&gt;readPC(),store_inst-&gt;seqNum);
<a name="l00421"></a>00421 
<a name="l00422"></a>00422         <span class="keywordflow">return</span> store_fault;
<a name="l00423"></a>00423     }
<a name="l00424"></a>00424 
<a name="l00425"></a>00425     assert(store_fault == <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>);
<a name="l00426"></a>00426 
<a name="l00427"></a>00427     <span class="keywordflow">if</span> (!<a class="code" href="classOzoneLWLSQ.html#ab98cf7d5235b7402e8916e78569f4ab2">storeFaultInst</a>) {
<a name="l00428"></a>00428         <span class="keywordflow">if</span> (store_fault != <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>) {
<a name="l00429"></a>00429             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Fault in a store instruction!&quot;</span>);
<a name="l00430"></a>00430             <a class="code" href="classOzoneLWLSQ.html#ab98cf7d5235b7402e8916e78569f4ab2">storeFaultInst</a> = store_inst;
<a name="l00431"></a>00431         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (store_inst-&gt;isStoreConditional()) {
<a name="l00432"></a>00432             <span class="comment">// Store conditionals need to set themselves as able to</span>
<a name="l00433"></a>00433             <span class="comment">// writeback if we haven&apos;t had a fault by here.</span>
<a name="l00434"></a>00434             (*sq_it).canWB = <span class="keyword">true</span>;
<a name="l00435"></a>00435 
<a name="l00436"></a>00436             ++<a class="code" href="classOzoneLWLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a>;
<a name="l00437"></a>00437             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Nonspeculative store! storesToWB:%i\n&quot;</span>,
<a name="l00438"></a>00438                     <a class="code" href="classOzoneLWLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a>);
<a name="l00439"></a>00439         }
<a name="l00440"></a>00440     }
<a name="l00441"></a>00441 
<a name="l00442"></a>00442     <a class="code" href="classOzoneLWLSQ.html#a363c8c15e054d23b34f72063429933b8">LQIt</a> lq_it = --(<a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.end());
<a name="l00443"></a>00443 
<a name="l00444"></a>00444     <span class="keywordflow">if</span> (!<a class="code" href="classOzoneLWLSQ.html#a270a20c3fa52139e0538288275db9d22">memDepViolator</a>) {
<a name="l00445"></a>00445         <span class="keywordflow">while</span> (lq_it != <a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.end()) {
<a name="l00446"></a>00446             <span class="keywordflow">if</span> ((*lq_it)-&gt;seqNum &lt; store_inst-&gt;seqNum) {
<a name="l00447"></a>00447                 lq_it--;
<a name="l00448"></a>00448                 <span class="keywordflow">continue</span>;
<a name="l00449"></a>00449             }
<a name="l00450"></a>00450             <span class="comment">// Actually should only check loads that have actually executed</span>
<a name="l00451"></a>00451             <span class="comment">// Might be safe because effAddr is set to InvalAddr when the</span>
<a name="l00452"></a>00452             <span class="comment">// dyn inst is created.</span>
<a name="l00453"></a>00453 
<a name="l00454"></a>00454             <span class="comment">// Must actually check all addrs in the proper size range</span>
<a name="l00455"></a>00455             <span class="comment">// Which is more correct than needs to be.  What if for now we just</span>
<a name="l00456"></a>00456             <span class="comment">// assume all loads are quad-word loads, and do the addr based</span>
<a name="l00457"></a>00457             <span class="comment">// on that.</span>
<a name="l00458"></a>00458             <span class="comment">// @todo: Fix this, magic number being used here</span>
<a name="l00459"></a>00459             <span class="keywordflow">if</span> (((*lq_it)-&gt;effAddr &gt;&gt; 8) ==
<a name="l00460"></a>00460                 (store_inst-&gt;effAddr &gt;&gt; 8)) {
<a name="l00461"></a>00461                 <span class="comment">// A load incorrectly passed this store.  Squash and refetch.</span>
<a name="l00462"></a>00462                 <span class="comment">// For now return a fault to show that it was unsuccessful.</span>
<a name="l00463"></a>00463                 <a class="code" href="classOzoneLWLSQ.html#a270a20c3fa52139e0538288275db9d22">memDepViolator</a> = (*lq_it);
<a name="l00464"></a>00464                 ++<a class="code" href="classOzoneLWLSQ.html#ac499fc2b461e03a110deae7c695f75bc">lsqMemOrderViolation</a>;
<a name="l00465"></a>00465 
<a name="l00466"></a>00466                 <span class="keywordflow">return</span> TheISA::genMachineCheckFault();
<a name="l00467"></a>00467             }
<a name="l00468"></a>00468 
<a name="l00469"></a>00469             lq_it--;
<a name="l00470"></a>00470         }
<a name="l00471"></a>00471 
<a name="l00472"></a>00472         <span class="comment">// If we&apos;ve reached this point, there was no violation.</span>
<a name="l00473"></a>00473         <a class="code" href="classOzoneLWLSQ.html#a270a20c3fa52139e0538288275db9d22">memDepViolator</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00474"></a>00474     }
<a name="l00475"></a>00475 
<a name="l00476"></a>00476     <span class="keywordflow">return</span> store_fault;
<a name="l00477"></a>00477 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a24ba9cb3fa1e726321780a20a960c8cd"></a><!-- doxytag: member="OzoneLWLSQ::getCount" ref="a24ba9cb3fa1e726321780a20a960c8cd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned getCount </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the number of instructions in the <a class="el" href="classLSQ.html">LSQ</a>. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00199"></a>00199 { <span class="keywordflow">return</span> <a class="code" href="classOzoneLWLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a> + <a class="code" href="classOzoneLWLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a32e64f82b805fe23a17b01dda0f44fb0"></a><!-- doxytag: member="OzoneLWLSQ::getDcachePort" ref="a32e64f82b805fe23a17b01dda0f44fb0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPort.html">Port</a>* getDcachePort </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00096"></a>00096 { <span class="keywordflow">return</span> &amp;<a class="code" href="classOzoneLWLSQ.html#a38b03978ad7720fdc910ff6a8b44585f">dcachePort</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aee7352adadc6b43b7ce36a8c052eb222"></a><!-- doxytag: member="OzoneLWLSQ::getLoadHeadSeqNum" ref="aee7352adadc6b43b7ce36a8c052eb222" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> getLoadHeadSeqNum </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the sequence number of the head load instruction. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00465"></a>00465     {
<a name="l00466"></a>00466         <span class="keywordflow">if</span> (!<a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.empty()) {
<a name="l00467"></a>00467             <span class="keywordflow">return</span> <a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.back()-&gt;seqNum;
<a name="l00468"></a>00468         } <span class="keywordflow">else</span> {
<a name="l00469"></a>00469             <span class="keywordflow">return</span> 0;
<a name="l00470"></a>00470         }
<a name="l00471"></a>00471 
<a name="l00472"></a>00472     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a30adaf6f5fb6b38b5747f35c419e3f31"></a><!-- doxytag: member="OzoneLWLSQ::getMemDepViolator" ref="a30adaf6f5fb6b38b5747f35c419e3f31" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Impl::DynInstPtr getMemDepViolator </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the memory ordering violator. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00308"></a>00308 {
<a name="l00309"></a>00309     <a class="code" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> temp = <a class="code" href="classOzoneLWLSQ.html#a270a20c3fa52139e0538288275db9d22">memDepViolator</a>;
<a name="l00310"></a>00310 
<a name="l00311"></a>00311     <a class="code" href="classOzoneLWLSQ.html#a270a20c3fa52139e0538288275db9d22">memDepViolator</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00312"></a>00312 
<a name="l00313"></a>00313     <span class="keywordflow">return</span> temp;
<a name="l00314"></a>00314 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1813b58ab7569d6aeefb5d4e235cceda"></a><!-- doxytag: member="OzoneLWLSQ::getStoreHeadSeqNum" ref="a1813b58ab7569d6aeefb5d4e235cceda" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> getStoreHeadSeqNum </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the sequence number of the head store instruction. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00476"></a>00476     {
<a name="l00477"></a>00477         <span class="keywordflow">if</span> (!<a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.empty()) {
<a name="l00478"></a>00478             <span class="keywordflow">return</span> <a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.back().inst-&gt;seqNum;
<a name="l00479"></a>00479         } <span class="keywordflow">else</span> {
<a name="l00480"></a>00480             <span class="keywordflow">return</span> 0;
<a name="l00481"></a>00481         }
<a name="l00482"></a>00482 
<a name="l00483"></a>00483     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad2e4b46255cfb53e85522adeed4e2089"></a><!-- doxytag: member="OzoneLWLSQ::hasStoresToWB" ref="ad2e4b46255cfb53e85522adeed4e2089" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool hasStoresToWB </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns if there are any stores to writeback. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00202"></a>00202 { <span class="keywordflow">return</span> <a class="code" href="classOzoneLWLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae8565b0968a8115705f1585e8aa21f75"></a><!-- doxytag: member="OzoneLWLSQ::init" ref="ae8565b0968a8115705f1585e8aa21f75" args="(Params *params, unsigned maxLQEntries, unsigned maxSQEntries, unsigned id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classOzoneLWLSQ.html#a818e103eae798a24a06a0a34631849ea">Params</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>maxLQEntries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>maxSQEntries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes the <a class="el" href="classLSQ.html">LSQ</a> unit with the specified number of entries. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00136"></a>00136 {
<a name="l00137"></a>00137     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Creating OzoneLWLSQ%i object.\n&quot;</span>,<span class="keywordtype">id</span>);
<a name="l00138"></a>00138 
<a name="l00139"></a>00139     <a class="code" href="classOzoneLWLSQ.html#adfd96fbbaa327a31d20f0d4134418fad">lsqID</a> = <a class="code" href="namespaceSparcISA.html#a2b4cf644f5af9ebaec502fb09986f302">id</a>;
<a name="l00140"></a>00140 
<a name="l00141"></a>00141     <a class="code" href="classOzoneLWLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a> = maxLQEntries;
<a name="l00142"></a>00142     <a class="code" href="classOzoneLWLSQ.html#a38c8af5392da70119dc5cce4e3637cbc">SQEntries</a> = maxSQEntries;
<a name="l00143"></a>00143 
<a name="l00144"></a>00144     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classOzoneLWLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a> * 2; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00145"></a>00145         <a class="code" href="classOzoneLWLSQ.html#a78218da891879fae16fe75c73981f75f">LQIndices</a>.push(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>);
<a name="l00146"></a>00146         <a class="code" href="classOzoneLWLSQ.html#a94838aca72c880423d2328ae17f065e6">SQIndices</a>.push(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>);
<a name="l00147"></a>00147     }
<a name="l00148"></a>00148 
<a name="l00149"></a>00149     <a class="code" href="classOzoneLWLSQ.html#a03435d626b7567ed154de5d7d8c3d419">usedPorts</a> = 0;
<a name="l00150"></a>00150     <a class="code" href="classOzoneLWLSQ.html#ab2e23636971c40e7ed945026b2a184e1">cachePorts</a> = params-&gt;cachePorts;
<a name="l00151"></a>00151 
<a name="l00152"></a>00152     <a class="code" href="classOzoneLWLSQ.html#a7123aa8b10829cc4712dff5454e13978">loadFaultInst</a> = <a class="code" href="classOzoneLWLSQ.html#ab98cf7d5235b7402e8916e78569f4ab2">storeFaultInst</a> = <a class="code" href="classOzoneLWLSQ.html#a270a20c3fa52139e0538288275db9d22">memDepViolator</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00153"></a>00153 
<a name="l00154"></a>00154     <a class="code" href="classOzoneLWLSQ.html#a3fca34b247fd8d081557578f8ca60fe3">blockedLoadSeqNum</a> = 0;
<a name="l00155"></a>00155 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a773e88db1aa010c3755e603493bf40ec"></a><!-- doxytag: member="OzoneLWLSQ::insert" ref="a773e88db1aa010c3755e603493bf40ec" args="(DynInstPtr &amp;inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Inserts an instruction. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00243"></a>00243 {
<a name="l00244"></a>00244     <span class="comment">// Make sure we really have a memory reference.</span>
<a name="l00245"></a>00245     assert(inst-&gt;isMemRef());
<a name="l00246"></a>00246 
<a name="l00247"></a>00247     <span class="comment">// Make sure it&apos;s one of the two classes of memory references.</span>
<a name="l00248"></a>00248     assert(inst-&gt;isLoad() || inst-&gt;isStore());
<a name="l00249"></a>00249 
<a name="l00250"></a>00250     <span class="keywordflow">if</span> (inst-&gt;isLoad()) {
<a name="l00251"></a>00251         <a class="code" href="classOzoneLWLSQ.html#ad22b3ecafed2bcd9c59fcab049a1cb98">insertLoad</a>(inst);
<a name="l00252"></a>00252     } <span class="keywordflow">else</span> {
<a name="l00253"></a>00253         <a class="code" href="classOzoneLWLSQ.html#a6a4b4e51bfff3639932ebaba45e8a282">insertStore</a>(inst);
<a name="l00254"></a>00254     }
<a name="l00255"></a>00255 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad22b3ecafed2bcd9c59fcab049a1cb98"></a><!-- doxytag: member="OzoneLWLSQ::insertLoad" ref="ad22b3ecafed2bcd9c59fcab049a1cb98" args="(DynInstPtr &amp;load_inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void insertLoad </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>load_inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Inserts a load instruction. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00260"></a>00260 {
<a name="l00261"></a>00261     assert(<a class="code" href="classOzoneLWLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a> &lt; <a class="code" href="classOzoneLWLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a> * 2);
<a name="l00262"></a>00262     assert(!<a class="code" href="classOzoneLWLSQ.html#a78218da891879fae16fe75c73981f75f">LQIndices</a>.empty());
<a name="l00263"></a>00263     <span class="keywordtype">int</span> load_index = <a class="code" href="classOzoneLWLSQ.html#a78218da891879fae16fe75c73981f75f">LQIndices</a>.front();
<a name="l00264"></a>00264     <a class="code" href="classOzoneLWLSQ.html#a78218da891879fae16fe75c73981f75f">LQIndices</a>.pop();
<a name="l00265"></a>00265 
<a name="l00266"></a>00266     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Inserting load PC %#x, idx:%i [sn:%lli]\n&quot;</span>,
<a name="l00267"></a>00267             load_inst-&gt;readPC(), load_index, load_inst-&gt;seqNum);
<a name="l00268"></a>00268 
<a name="l00269"></a>00269     load_inst-&gt;lqIdx = load_index;
<a name="l00270"></a>00270 
<a name="l00271"></a>00271     <a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.push_front(load_inst);
<a name="l00272"></a>00272     <a class="code" href="classOzoneLWLSQ.html#afd55cfcf685cda7dafc7c52d5105e129">LQItHash</a>[load_index] = <a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.begin();
<a name="l00273"></a>00273 
<a name="l00274"></a>00274     ++<a class="code" href="classOzoneLWLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a>;
<a name="l00275"></a>00275 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6a4b4e51bfff3639932ebaba45e8a282"></a><!-- doxytag: member="OzoneLWLSQ::insertStore" ref="a6a4b4e51bfff3639932ebaba45e8a282" args="(DynInstPtr &amp;store_inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void insertStore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>store_inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Inserts a store instruction. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00280"></a>00280 {
<a name="l00281"></a>00281     <span class="comment">// Make sure it is not full before inserting an instruction.</span>
<a name="l00282"></a>00282     assert(<a class="code" href="classOzoneLWLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a> - <a class="code" href="classOzoneLWLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a> &lt; <a class="code" href="classOzoneLWLSQ.html#a38c8af5392da70119dc5cce4e3637cbc">SQEntries</a>);
<a name="l00283"></a>00283 
<a name="l00284"></a>00284     assert(!<a class="code" href="classOzoneLWLSQ.html#a94838aca72c880423d2328ae17f065e6">SQIndices</a>.empty());
<a name="l00285"></a>00285     <span class="keywordtype">int</span> store_index = <a class="code" href="classOzoneLWLSQ.html#a94838aca72c880423d2328ae17f065e6">SQIndices</a>.front();
<a name="l00286"></a>00286     <a class="code" href="classOzoneLWLSQ.html#a94838aca72c880423d2328ae17f065e6">SQIndices</a>.pop();
<a name="l00287"></a>00287 
<a name="l00288"></a>00288     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Inserting store PC %#x, idx:%i [sn:%lli]\n&quot;</span>,
<a name="l00289"></a>00289             store_inst-&gt;readPC(), store_index, store_inst-&gt;seqNum);
<a name="l00290"></a>00290 
<a name="l00291"></a>00291     store_inst-&gt;sqIdx = store_index;
<a name="l00292"></a>00292     SQEntry entry(store_inst);
<a name="l00293"></a>00293     <span class="keywordflow">if</span> (<a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.empty()) {
<a name="l00294"></a>00294         entry.lqIt = <a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.end();
<a name="l00295"></a>00295     } <span class="keywordflow">else</span> {
<a name="l00296"></a>00296         entry.lqIt = <a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.begin();
<a name="l00297"></a>00297     }
<a name="l00298"></a>00298     <a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.push_front(entry);
<a name="l00299"></a>00299 
<a name="l00300"></a>00300     <a class="code" href="classOzoneLWLSQ.html#a3eb9bc9d55fde5b98e8d28a220d247f6">SQItHash</a>[store_index] = <a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.begin();
<a name="l00301"></a>00301 
<a name="l00302"></a>00302     ++<a class="code" href="classOzoneLWLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a>;
<a name="l00303"></a>00303 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3e70330939fdfc4dbc2f60c1a660584d"></a><!-- doxytag: member="OzoneLWLSQ::isFull" ref="a3e70330939fdfc4dbc2f60c1a660584d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool isFull </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns if either the LQ or SQ is full. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00187"></a>00187 { <span class="keywordflow">return</span> <a class="code" href="classOzoneLWLSQ.html#a5893daf623130be826f492bbff58f757">lqFull</a>() || <a class="code" href="classOzoneLWLSQ.html#a477981d1f905d2d398a1527f7149e3c4">sqFull</a>(); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad0aa91a7b51ca925abf9c9992abad314"></a><!-- doxytag: member="OzoneLWLSQ::isLoadBlockedHandled" ref="ad0aa91a7b51ca925abf9c9992abad314" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool isLoadBlockedHandled </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00169"></a>00169     { <span class="keywordflow">return</span> <a class="code" href="classOzoneLWLSQ.html#a2c1620029c162c7180e523b089e56ed5">loadBlockedHandled</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af8eb8590fbfa6ecd2f796390677a4c00"></a><!-- doxytag: member="OzoneLWLSQ::isStalled" ref="af8eb8590fbfa6ecd2f796390677a4c00" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool isStalled </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns whether or not the <a class="el" href="classLSQ.html">LSQ</a> unit is stalled. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00486"></a>00486 { <span class="keywordflow">return</span> <a class="code" href="classOzoneLWLSQ.html#a6f8bff553ad30865c7d0c62e05421eb8">stalled</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a471165257f311a78136ce991a3bad31a"></a><!-- doxytag: member="OzoneLWLSQ::isSwitchedOut" ref="a471165257f311a78136ce991a3bad31a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool isSwitchedOut </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00216"></a>00216 { <span class="keywordflow">return</span> <a class="code" href="classOzoneLWLSQ.html#a1aee6db9bfb75cf02e38a82e5d02847f">switchedOut</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a05c413ba417c6453e99f75d87c958590"></a><!-- doxytag: member="OzoneLWLSQ::loadBlocked" ref="a05c413ba417c6453e99f75d87c958590" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool loadBlocked </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns if a load became blocked due to the memory system. It clears the bool's value upon this being called. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00163"></a>00163     { <span class="keywordflow">return</span> <a class="code" href="classOzoneLWLSQ.html#a95dc31b4ce3ebcb6b9d75a510b3a128c">isLoadBlocked</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5893daf623130be826f492bbff58f757"></a><!-- doxytag: member="OzoneLWLSQ::lqFull" ref="a5893daf623130be826f492bbff58f757" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool lqFull </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns if the LQ is full. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00190"></a>00190 { <span class="keywordflow">return</span> <a class="code" href="classOzoneLWLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a> &gt;= (<a class="code" href="classOzoneLWLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a> - 1); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a37627d5d5bba7f4a8690c71c2ab3cb07"></a><!-- doxytag: member="OzoneLWLSQ::name" ref="a37627d5d5bba7f4a8690c71c2ab3cb07" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string name </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the name of the <a class="el" href="classLSQ.html">LSQ</a> unit. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00160"></a>00160 {
<a name="l00161"></a>00161     <span class="keywordflow">return</span> <span class="stringliteral">&quot;lsqunit&quot;</span>;
<a name="l00162"></a>00162 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a028971a565aca048c67ea1c36a6a9d51"></a><!-- doxytag: member="OzoneLWLSQ::numFreeEntries" ref="a028971a565aca048c67ea1c36a6a9d51" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned numFreeEntries </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the number of free entries (min of free LQ and SQ entries). </p>

<p><div class="fragment"><pre class="fragment"><a name="l00319"></a>00319 {
<a name="l00320"></a>00320     <span class="keywordtype">unsigned</span> free_lq_entries = <a class="code" href="classOzoneLWLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a> - <a class="code" href="classOzoneLWLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a>;
<a name="l00321"></a>00321     <span class="keywordtype">unsigned</span> free_sq_entries = <a class="code" href="classOzoneLWLSQ.html#a38c8af5392da70119dc5cce4e3637cbc">SQEntries</a> - (<a class="code" href="classOzoneLWLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a> + <a class="code" href="classOzoneLWLSQ.html#a04638dcfe9b4f8584453bb178bd2da5e">storesInFlight</a>);
<a name="l00322"></a>00322 
<a name="l00323"></a>00323     <span class="comment">// Both the LQ and SQ entries have an extra dummy entry to differentiate</span>
<a name="l00324"></a>00324     <span class="comment">// empty/full conditions.  Subtract 1 from the free entries.</span>
<a name="l00325"></a>00325     <span class="keywordflow">if</span> (free_lq_entries &lt; free_sq_entries) {
<a name="l00326"></a>00326         <span class="keywordflow">return</span> free_lq_entries - 1;
<a name="l00327"></a>00327     } <span class="keywordflow">else</span> {
<a name="l00328"></a>00328         <span class="keywordflow">return</span> free_sq_entries - 1;
<a name="l00329"></a>00329     }
<a name="l00330"></a>00330 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a54460b759fb06e2b18e26657279a6f49"></a><!-- doxytag: member="OzoneLWLSQ::numLoads" ref="a54460b759fb06e2b18e26657279a6f49" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int numLoads </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the number of loads in the LQ. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00181"></a>00181 { <span class="keywordflow">return</span> <a class="code" href="classOzoneLWLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9aa5d5a61b2229931008ac2ea802a3ab"></a><!-- doxytag: member="OzoneLWLSQ::numLoadsReady" ref="a9aa5d5a61b2229931008ac2ea802a3ab" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int numLoadsReady </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the number of loads ready to execute. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00335"></a>00335 {
<a name="l00336"></a>00336     <span class="keywordtype">int</span> retval = 0;
<a name="l00337"></a>00337     <a class="code" href="classOzoneLWLSQ.html#a363c8c15e054d23b34f72063429933b8">LQIt</a> lq_it = <a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.begin();
<a name="l00338"></a>00338     <a class="code" href="classOzoneLWLSQ.html#a363c8c15e054d23b34f72063429933b8">LQIt</a> end_it = <a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.end();
<a name="l00339"></a>00339 
<a name="l00340"></a>00340     <span class="keywordflow">while</span> (lq_it != end_it) {
<a name="l00341"></a>00341         <span class="keywordflow">if</span> ((*lq_it)-&gt;readyToIssue()) {
<a name="l00342"></a>00342             ++retval;
<a name="l00343"></a>00343         }
<a name="l00344"></a>00344     }
<a name="l00345"></a>00345 
<a name="l00346"></a>00346     <span class="keywordflow">return</span> retval;
<a name="l00347"></a>00347 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa0fc32a4a9d77696f5907f4d25e7d07f"></a><!-- doxytag: member="OzoneLWLSQ::numStores" ref="aa0fc32a4a9d77696f5907f4d25e7d07f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int numStores </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the number of stores in the SQ. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00184"></a>00184 { <span class="keywordflow">return</span> <a class="code" href="classOzoneLWLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a> + <a class="code" href="classOzoneLWLSQ.html#a04638dcfe9b4f8584453bb178bd2da5e">storesInFlight</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a276cdbdaf4551f1b846c4e2535c5f882"></a><!-- doxytag: member="OzoneLWLSQ::numStoresToWB" ref="a276cdbdaf4551f1b846c4e2535c5f882" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int numStoresToWB </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the number of stores to writeback. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00205"></a>00205 { <span class="keywordflow">return</span> <a class="code" href="classOzoneLWLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0747777ac998dabdc20fa0c554d378d3"></a><!-- doxytag: member="OzoneLWLSQ::read" ref="a0747777ac998dabdc20fa0c554d378d3" args="(RequestPtr req, T &amp;data, int load_idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">Fault</a> read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRequest.html">RequestPtr</a>&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T &amp;&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>load_idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Executes the load at the given index. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00493"></a>00493 {
<a name="l00494"></a>00494     <span class="comment">//Depending on issue2execute delay a squashed load could</span>
<a name="l00495"></a>00495     <span class="comment">//execute if it is found to be squashed in the same</span>
<a name="l00496"></a>00496     <span class="comment">//cycle it is scheduled to execute</span>
<a name="l00497"></a>00497     <span class="keyword">typename</span> m5::hash_map&lt;int, LQIt, HashFn&gt;::iterator
<a name="l00498"></a>00498         lq_hash_it = <a class="code" href="classOzoneLWLSQ.html#afd55cfcf685cda7dafc7c52d5105e129">LQItHash</a>.find(load_idx);
<a name="l00499"></a>00499     assert(lq_hash_it != <a class="code" href="classOzoneLWLSQ.html#afd55cfcf685cda7dafc7c52d5105e129">LQItHash</a>.end());
<a name="l00500"></a>00500     <a class="code" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> inst = (*(*lq_hash_it).second);
<a name="l00501"></a>00501 
<a name="l00502"></a>00502     <span class="comment">// Make sure this isn&apos;t an uncacheable access</span>
<a name="l00503"></a>00503     <span class="comment">// A bit of a hackish way to get uncached accesses to work only if they&apos;re</span>
<a name="l00504"></a>00504     <span class="comment">// at the head of the LSQ and are ready to commit (at the head of the ROB</span>
<a name="l00505"></a>00505     <span class="comment">// too).</span>
<a name="l00506"></a>00506     <span class="comment">// @todo: Fix uncached accesses.</span>
<a name="l00507"></a>00507     <span class="keywordflow">if</span> (req-&gt;<a class="code" href="classRequest.html#a70c74b2809417ea8701dd6ba9e34312d">isUncacheable</a>() &amp;&amp;
<a name="l00508"></a>00508         (inst != <a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.back() || !inst-&gt;isAtCommit())) {
<a name="l00509"></a>00509         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;[sn:%lli] Uncached load and not head of &quot;</span>
<a name="l00510"></a>00510                 <span class="stringliteral">&quot;commit/LSQ!\n&quot;</span>,
<a name="l00511"></a>00511                 inst-&gt;seqNum);
<a name="l00512"></a>00512         <a class="code" href="classOzoneLWLSQ.html#a84f815aa1fa864ba2e6d75f5ad2b52d1">be</a>-&gt;<a class="code" href="classBackEnd.html#aa9c46f45f491ef90a936c7e2b95f20aa">rescheduleMemInst</a>(inst);
<a name="l00513"></a>00513         <span class="keywordflow">return</span> TheISA::genMachineCheckFault();
<a name="l00514"></a>00514     }
<a name="l00515"></a>00515 
<a name="l00516"></a>00516     <span class="comment">// Check the SQ for any previous stores that might lead to forwarding</span>
<a name="l00517"></a>00517     <a class="code" href="classOzoneLWLSQ.html#a3b2dd16f487adc977c43201cd7f51558">SQIt</a> sq_it = <a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.begin();
<a name="l00518"></a>00518     <span class="keywordtype">int</span> store_size = 0;
<a name="l00519"></a>00519 
<a name="l00520"></a>00520     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Read called, load idx: %i addr: %#x\n&quot;</span>,
<a name="l00521"></a>00521             load_idx, req-&gt;<a class="code" href="classRequest.html#a744ef11a5afe9d3651ce5f954259cb43">getPaddr</a>());
<a name="l00522"></a>00522 
<a name="l00523"></a>00523     <span class="keywordflow">while</span> (sq_it != <a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.end() &amp;&amp; (*sq_it).inst-&gt;seqNum &gt; inst-&gt;seqNum)
<a name="l00524"></a>00524         ++sq_it;
<a name="l00525"></a>00525 
<a name="l00526"></a>00526     <span class="keywordflow">while</span> (1) {
<a name="l00527"></a>00527         <span class="comment">// End once we&apos;ve reached the top of the LSQ</span>
<a name="l00528"></a>00528         <span class="keywordflow">if</span> (sq_it == <a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.end()) {
<a name="l00529"></a>00529             <span class="keywordflow">break</span>;
<a name="l00530"></a>00530         }
<a name="l00531"></a>00531 
<a name="l00532"></a>00532         assert((*sq_it).inst);
<a name="l00533"></a>00533 
<a name="l00534"></a>00534         store_size = (*sq_it).size;
<a name="l00535"></a>00535 
<a name="l00536"></a>00536         <span class="keywordflow">if</span> (store_size == 0 || (*sq_it).committed) {
<a name="l00537"></a>00537             sq_it++;
<a name="l00538"></a>00538             <span class="keywordflow">continue</span>;
<a name="l00539"></a>00539         }
<a name="l00540"></a>00540 
<a name="l00541"></a>00541         <span class="comment">// Check if the store data is within the lower and upper bounds of</span>
<a name="l00542"></a>00542         <span class="comment">// addresses that the request needs.</span>
<a name="l00543"></a>00543         <span class="keywordtype">bool</span> store_has_lower_limit =
<a name="l00544"></a>00544             req-&gt;<a class="code" href="classRequest.html#a68d2230b37b30d25462093fefdd813ac">getVaddr</a>() &gt;= (*sq_it).inst-&gt;effAddr;
<a name="l00545"></a>00545         <span class="keywordtype">bool</span> store_has_upper_limit =
<a name="l00546"></a>00546             (req-&gt;<a class="code" href="classRequest.html#a68d2230b37b30d25462093fefdd813ac">getVaddr</a>() + req-&gt;<a class="code" href="classRequest.html#a3c4029b904a61a9873e6d12785ce19a1">getSize</a>()) &lt;= ((*sq_it).inst-&gt;effAddr +
<a name="l00547"></a>00547                                                    store_size);
<a name="l00548"></a>00548         <span class="keywordtype">bool</span> lower_load_has_store_part =
<a name="l00549"></a>00549             req-&gt;<a class="code" href="classRequest.html#a68d2230b37b30d25462093fefdd813ac">getVaddr</a>() &lt; ((*sq_it).inst-&gt;effAddr +
<a name="l00550"></a>00550                                store_size);
<a name="l00551"></a>00551         <span class="keywordtype">bool</span> upper_load_has_store_part =
<a name="l00552"></a>00552             (req-&gt;<a class="code" href="classRequest.html#a68d2230b37b30d25462093fefdd813ac">getVaddr</a>() + req-&gt;<a class="code" href="classRequest.html#a3c4029b904a61a9873e6d12785ce19a1">getSize</a>()) &gt; (*sq_it).inst-&gt;effAddr;
<a name="l00553"></a>00553 
<a name="l00554"></a>00554         <span class="comment">// If the store&apos;s data has all of the data needed, we can forward.</span>
<a name="l00555"></a>00555         if (store_has_lower_limit &amp;&amp; store_has_upper_limit) {
<a name="l00556"></a>00556             <span class="keywordtype">int</span> shift_amt = req-&gt;<a class="code" href="classRequest.html#a68d2230b37b30d25462093fefdd813ac">getVaddr</a>() &amp; (store_size - 1);
<a name="l00557"></a>00557             <span class="comment">// Assumes byte addressing</span>
<a name="l00558"></a>00558             shift_amt = shift_amt &lt;&lt; 3;
<a name="l00559"></a>00559 
<a name="l00560"></a>00560             <span class="comment">// Cast this to type T?</span>
<a name="l00561"></a>00561             data = (*sq_it).data &gt;&gt; shift_amt;
<a name="l00562"></a>00562 
<a name="l00563"></a>00563             assert(!inst-&gt;memData);
<a name="l00564"></a>00564             inst-&gt;memData = <span class="keyword">new</span> uint8_t[64];
<a name="l00565"></a>00565 
<a name="l00566"></a>00566             memcpy(inst-&gt;memData, &amp;data, req-&gt;<a class="code" href="classRequest.html#a3c4029b904a61a9873e6d12785ce19a1">getSize</a>());
<a name="l00567"></a>00567 
<a name="l00568"></a>00568             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Forwarding from store [sn:%lli] to load to &quot;</span>
<a name="l00569"></a>00569                     <span class="stringliteral">&quot;[sn:%lli] addr %#x, data %#x\n&quot;</span>,
<a name="l00570"></a>00570                     (*sq_it).inst-&gt;seqNum, inst-&gt;seqNum, req-&gt;<a class="code" href="classRequest.html#a68d2230b37b30d25462093fefdd813ac">getVaddr</a>(),
<a name="l00571"></a>00571                     *(inst-&gt;memData));
<a name="l00572"></a>00572 
<a name="l00573"></a>00573             <a class="code" href="classPacket.html">PacketPtr</a> data_pkt = <span class="keyword">new</span> <a class="code" href="classPacket.html">Packet</a>(req, Packet::ReadReq);
<a name="l00574"></a>00574             data_pkt-&gt;<a class="code" href="classPacket.html#a60621b00d6ecd49b3e336087aca2eda0">dataStatic</a>(inst-&gt;memData);
<a name="l00575"></a>00575 
<a name="l00576"></a>00576             WritebackEvent *wb = <span class="keyword">new</span> WritebackEvent(inst, data_pkt, <span class="keyword">this</span>);
<a name="l00577"></a>00577 
<a name="l00578"></a>00578             <span class="comment">// We&apos;ll say this has a 1 cycle load-store forwarding latency</span>
<a name="l00579"></a>00579             <span class="comment">// for now.</span>
<a name="l00580"></a>00580             <span class="comment">// @todo: Need to make this a parameter.</span>
<a name="l00581"></a>00581             wb-&gt;schedule(<a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>());
<a name="l00582"></a>00582 
<a name="l00583"></a>00583             <span class="comment">// Should keep track of stat for forwarded data</span>
<a name="l00584"></a>00584             <span class="keywordflow">return</span> <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00585"></a>00585         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((store_has_lower_limit &amp;&amp; lower_load_has_store_part) ||
<a name="l00586"></a>00586                    (store_has_upper_limit &amp;&amp; upper_load_has_store_part) ||
<a name="l00587"></a>00587                    (lower_load_has_store_part &amp;&amp; upper_load_has_store_part)) {
<a name="l00588"></a>00588             <span class="comment">// This is the partial store-load forwarding case where a store</span>
<a name="l00589"></a>00589             <span class="comment">// has only part of the load&apos;s data.</span>
<a name="l00590"></a>00590 
<a name="l00591"></a>00591             <span class="comment">// If it&apos;s already been written back, then don&apos;t worry about</span>
<a name="l00592"></a>00592             <span class="comment">// stalling on it.</span>
<a name="l00593"></a>00593             <span class="keywordflow">if</span> ((*sq_it).completed) {
<a name="l00594"></a>00594                 sq_it++;
<a name="l00595"></a>00595                 <span class="keywordflow">break</span>;
<a name="l00596"></a>00596             }
<a name="l00597"></a>00597 
<a name="l00598"></a>00598             <span class="comment">// Must stall load and force it to retry, so long as it&apos;s the oldest</span>
<a name="l00599"></a>00599             <span class="comment">// load that needs to do so.</span>
<a name="l00600"></a>00600             <span class="keywordflow">if</span> (!<a class="code" href="classOzoneLWLSQ.html#a6f8bff553ad30865c7d0c62e05421eb8">stalled</a> ||
<a name="l00601"></a>00601                 (<a class="code" href="classOzoneLWLSQ.html#a6f8bff553ad30865c7d0c62e05421eb8">stalled</a> &amp;&amp;
<a name="l00602"></a>00602                  inst-&gt;seqNum &lt;
<a name="l00603"></a>00603                  (*stallingLoad)-&gt;seqNum)) {
<a name="l00604"></a>00604                 <a class="code" href="classOzoneLWLSQ.html#a6f8bff553ad30865c7d0c62e05421eb8">stalled</a> = <span class="keyword">true</span>;
<a name="l00605"></a>00605                 <a class="code" href="classOzoneLWLSQ.html#afe1cdcfca6b44c28581d862228adc3da">stallingStoreIsn</a> = (*sq_it).inst-&gt;seqNum;
<a name="l00606"></a>00606                 <a class="code" href="classOzoneLWLSQ.html#a567a64b358df6ae6162124cfe4d00db3">stallingLoad</a> = (*lq_hash_it).second;
<a name="l00607"></a>00607             }
<a name="l00608"></a>00608 
<a name="l00609"></a>00609             <span class="comment">// Tell IQ/mem dep unit that this instruction will need to be</span>
<a name="l00610"></a>00610             <span class="comment">// rescheduled eventually</span>
<a name="l00611"></a>00611             <a class="code" href="classOzoneLWLSQ.html#a84f815aa1fa864ba2e6d75f5ad2b52d1">be</a>-&gt;<a class="code" href="classBackEnd.html#aa9c46f45f491ef90a936c7e2b95f20aa">rescheduleMemInst</a>(inst);
<a name="l00612"></a>00612 
<a name="l00613"></a>00613             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Load-store forwarding mis-match. &quot;</span>
<a name="l00614"></a>00614                     <span class="stringliteral">&quot;Store [sn:%lli] to load addr %#x\n&quot;</span>,
<a name="l00615"></a>00615                     (*sq_it).inst-&gt;seqNum, req-&gt;<a class="code" href="classRequest.html#a68d2230b37b30d25462093fefdd813ac">getVaddr</a>());
<a name="l00616"></a>00616 
<a name="l00617"></a>00617             <span class="keywordflow">return</span> <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00618"></a>00618         }
<a name="l00619"></a>00619         sq_it++;
<a name="l00620"></a>00620     }
<a name="l00621"></a>00621 
<a name="l00622"></a>00622     <span class="comment">// If there&apos;s no forwarding case, then go access memory</span>
<a name="l00623"></a>00623     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Doing functional access for inst PC %#x\n&quot;</span>,
<a name="l00624"></a>00624             inst-&gt;readPC());
<a name="l00625"></a>00625 
<a name="l00626"></a>00626     assert(!inst-&gt;memData);
<a name="l00627"></a>00627     inst-&gt;memData = <span class="keyword">new</span> uint8_t[64];
<a name="l00628"></a>00628 
<a name="l00629"></a>00629     ++<a class="code" href="classOzoneLWLSQ.html#a03435d626b7567ed154de5d7d8c3d419">usedPorts</a>;
<a name="l00630"></a>00630 
<a name="l00631"></a>00631     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Doing timing access for inst PC %#x\n&quot;</span>,
<a name="l00632"></a>00632             inst-&gt;readPC());
<a name="l00633"></a>00633 
<a name="l00634"></a>00634     <a class="code" href="classPacket.html">PacketPtr</a> data_pkt =
<a name="l00635"></a>00635         <span class="keyword">new</span> <a class="code" href="classPacket.html">Packet</a>(req,
<a name="l00636"></a>00636                    (req-&gt;<a class="code" href="classRequest.html#a8965874e960faf91ad4b6af8dbf31875">isLLSC</a>() ?
<a name="l00637"></a>00637                     <a class="code" href="classMemCmd.html#a2afce0a47a93eee73a314d53e4890153a1c703221ee751b9d3d635fe33ea8e350">MemCmd::LoadLockedReq</a> : Packet::ReadReq));
<a name="l00638"></a>00638     data_pkt-&gt;dataStatic(inst-&gt;memData);
<a name="l00639"></a>00639 
<a name="l00640"></a>00640     LSQSenderState *state = <span class="keyword">new</span> LSQSenderState;
<a name="l00641"></a>00641     state-&gt;isLoad = <span class="keyword">true</span>;
<a name="l00642"></a>00642     state-&gt;idx = load_idx;
<a name="l00643"></a>00643     state-&gt;inst = inst;
<a name="l00644"></a>00644     data_pkt-&gt;senderState = state;
<a name="l00645"></a>00645 
<a name="l00646"></a>00646     <span class="comment">// if we have a cache, do cache access too</span>
<a name="l00647"></a>00647     <span class="keywordflow">if</span> (!<a class="code" href="classOzoneLWLSQ.html#a38b03978ad7720fdc910ff6a8b44585f">dcachePort</a>.sendTiming(data_pkt)) {
<a name="l00648"></a>00648         <span class="comment">// There&apos;s an older load that&apos;s already going to squash.</span>
<a name="l00649"></a>00649         <span class="keywordflow">if</span> (<a class="code" href="classOzoneLWLSQ.html#a95dc31b4ce3ebcb6b9d75a510b3a128c">isLoadBlocked</a> &amp;&amp; blockedLoadSeqNum &lt; inst-&gt;seqNum)
<a name="l00650"></a>00650             <span class="keywordflow">return</span> <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00651"></a>00651 
<a name="l00652"></a>00652         <span class="comment">// Record that the load was blocked due to memory.  This</span>
<a name="l00653"></a>00653         <span class="comment">// load will squash all instructions after it, be</span>
<a name="l00654"></a>00654         <span class="comment">// refetched, and re-executed.</span>
<a name="l00655"></a>00655         <a class="code" href="classOzoneLWLSQ.html#a95dc31b4ce3ebcb6b9d75a510b3a128c">isLoadBlocked</a> = <span class="keyword">true</span>;
<a name="l00656"></a>00656         <a class="code" href="classOzoneLWLSQ.html#a2c1620029c162c7180e523b089e56ed5">loadBlockedHandled</a> = <span class="keyword">false</span>;
<a name="l00657"></a>00657         <a class="code" href="classOzoneLWLSQ.html#a3fca34b247fd8d081557578f8ca60fe3">blockedLoadSeqNum</a> = inst-&gt;seqNum;
<a name="l00658"></a>00658         <span class="comment">// No fault occurred, even though the interface is blocked.</span>
<a name="l00659"></a>00659         <span class="keywordflow">return</span> <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00660"></a>00660     }
<a name="l00661"></a>00661 
<a name="l00662"></a>00662     <span class="keywordflow">if</span> (req-&gt;<a class="code" href="classRequest.html#a8965874e960faf91ad4b6af8dbf31875">isLLSC</a>()) {
<a name="l00663"></a>00663         <a class="code" href="classOzoneLWLSQ.html#a61b5f503eec141308b0cd6b4322b405b">cpu</a>-&gt;<a class="code" href="classOzoneCPU.html#aa062c7f3423632ca66107fdbb9d38131">lockFlag</a> = <span class="keyword">true</span>;
<a name="l00664"></a>00664     }
<a name="l00665"></a>00665 
<a name="l00666"></a>00666     <span class="keywordflow">return</span> <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00667"></a>00667 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a29cb5a4f98063ce6e9210eacbdb35298"></a><!-- doxytag: member="OzoneLWLSQ::recvRetry" ref="a29cb5a4f98063ce6e9210eacbdb35298" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void recvRetry </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Handles doing the retry. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00917"></a>00917 {
<a name="l00918"></a>00918     <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Unimplemented!&quot;</span>);
<a name="l00919"></a>00919 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4dc637449366fcdfc4e764cdf12d9b11"></a><!-- doxytag: member="OzoneLWLSQ::regStats" ref="a4dc637449366fcdfc4e764cdf12d9b11" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void regStats </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00167"></a>00167 {
<a name="l00168"></a>00168     <a class="code" href="classOzoneLWLSQ.html#ac499fc2b461e03a110deae7c695f75bc">lsqMemOrderViolation</a>
<a name="l00169"></a>00169         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classOzoneLWLSQ.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.memOrderViolation&quot;</span>)
<a name="l00170"></a>00170         .desc(<span class="stringliteral">&quot;Number of memory ordering violations&quot;</span>);
<a name="l00171"></a>00171 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad5ff9e08c63a01ac86a8f80765b37365"></a><!-- doxytag: member="OzoneLWLSQ::removeStore" ref="ad5ff9e08c63a01ac86a8f80765b37365" args="(int store_idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void removeStore </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>store_idx</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00873"></a>00873 {
<a name="l00874"></a>00874     <a class="code" href="classOzoneLWLSQ.html#af476de7b08376a4d7d7cd4b8dbbabb7a">SQHashIt</a> sq_hash_it = <a class="code" href="classOzoneLWLSQ.html#a3eb9bc9d55fde5b98e8d28a220d247f6">SQItHash</a>.find(store_idx);
<a name="l00875"></a>00875     assert(sq_hash_it != <a class="code" href="classOzoneLWLSQ.html#a3eb9bc9d55fde5b98e8d28a220d247f6">SQItHash</a>.end());
<a name="l00876"></a>00876     <a class="code" href="classOzoneLWLSQ.html#a3b2dd16f487adc977c43201cd7f51558">SQIt</a> sq_it = (*sq_hash_it).second;
<a name="l00877"></a>00877 
<a name="l00878"></a>00878     assert((*sq_it).inst);
<a name="l00879"></a>00879     (*sq_it).completed = <span class="keyword">true</span>;
<a name="l00880"></a>00880     <a class="code" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> inst = (*sq_it).inst;
<a name="l00881"></a>00881 
<a name="l00882"></a>00882     <span class="keywordflow">if</span> (<a class="code" href="classOzoneLWLSQ.html#af8eb8590fbfa6ecd2f796390677a4c00">isStalled</a>() &amp;&amp;
<a name="l00883"></a>00883         inst-&gt;seqNum == <a class="code" href="classOzoneLWLSQ.html#afe1cdcfca6b44c28581d862228adc3da">stallingStoreIsn</a>) {
<a name="l00884"></a>00884         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Unstalling, stalling store [sn:%lli] &quot;</span>
<a name="l00885"></a>00885                 <span class="stringliteral">&quot;load [sn:%lli]\n&quot;</span>,
<a name="l00886"></a>00886                 <a class="code" href="classOzoneLWLSQ.html#afe1cdcfca6b44c28581d862228adc3da">stallingStoreIsn</a>, (*stallingLoad)-&gt;seqNum);
<a name="l00887"></a>00887         <a class="code" href="classOzoneLWLSQ.html#a6f8bff553ad30865c7d0c62e05421eb8">stalled</a> = <span class="keyword">false</span>;
<a name="l00888"></a>00888         <a class="code" href="classOzoneLWLSQ.html#afe1cdcfca6b44c28581d862228adc3da">stallingStoreIsn</a> = 0;
<a name="l00889"></a>00889         <a class="code" href="classOzoneLWLSQ.html#a84f815aa1fa864ba2e6d75f5ad2b52d1">be</a>-&gt;<a class="code" href="classBackEnd.html#ae165df775b4de9e9430228c7f04c2bc9">replayMemInst</a>((*<a class="code" href="classOzoneLWLSQ.html#a567a64b358df6ae6162124cfe4d00db3">stallingLoad</a>));
<a name="l00890"></a>00890     }
<a name="l00891"></a>00891 
<a name="l00892"></a>00892     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Completing store idx:%i [sn:%lli], storesToWB:%i\n&quot;</span>,
<a name="l00893"></a>00893             inst-&gt;sqIdx, inst-&gt;seqNum, <a class="code" href="classOzoneLWLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a>);
<a name="l00894"></a>00894 
<a name="l00895"></a>00895     assert(!<a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.empty());
<a name="l00896"></a>00896     <a class="code" href="classOzoneLWLSQ.html#a3eb9bc9d55fde5b98e8d28a220d247f6">SQItHash</a>.erase(sq_hash_it);
<a name="l00897"></a>00897     <a class="code" href="classOzoneLWLSQ.html#a94838aca72c880423d2328ae17f065e6">SQIndices</a>.push(inst-&gt;sqIdx);
<a name="l00898"></a>00898     <a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.erase(sq_it);
<a name="l00899"></a>00899 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3bc9500810cb2d5615e29206e2d6499f"></a><!-- doxytag: member="OzoneLWLSQ::resizeLQ" ref="a3bc9500810cb2d5615e29206e2d6499f" args="(unsigned size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void resizeLQ </td>
          <td>(</td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>size</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Resizes the LQ to a given size. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00210"></a>00210 {
<a name="l00211"></a>00211     assert( size &gt;= <a class="code" href="classOzoneLWLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a>);
<a name="l00212"></a>00212 
<a name="l00213"></a>00213     <span class="keywordflow">if</span> (size &gt; <a class="code" href="classOzoneLWLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a>) {
<a name="l00214"></a>00214         <span class="keywordflow">while</span> (size &gt; <a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.size()) {
<a name="l00215"></a>00215             <a class="code" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> dummy;
<a name="l00216"></a>00216             <a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.push_back(dummy);
<a name="l00217"></a>00217             <a class="code" href="classOzoneLWLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a>++;
<a name="l00218"></a>00218         }
<a name="l00219"></a>00219     } <span class="keywordflow">else</span> {
<a name="l00220"></a>00220         <a class="code" href="classOzoneLWLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a> = size;
<a name="l00221"></a>00221     }
<a name="l00222"></a>00222 
<a name="l00223"></a>00223 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a341dd6a3bd8d240659fd9d698c3b5c65"></a><!-- doxytag: member="OzoneLWLSQ::resizeSQ" ref="a341dd6a3bd8d240659fd9d698c3b5c65" args="(unsigned size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void resizeSQ </td>
          <td>(</td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>size</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Resizes the SQ to a given size. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00228"></a>00228 {
<a name="l00229"></a>00229     <span class="keywordflow">if</span> (size &gt; <a class="code" href="classOzoneLWLSQ.html#a38c8af5392da70119dc5cce4e3637cbc">SQEntries</a>) {
<a name="l00230"></a>00230         <span class="keywordflow">while</span> (size &gt; <a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.size()) {
<a name="l00231"></a>00231             SQEntry dummy;
<a name="l00232"></a>00232             <a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.push_back(dummy);
<a name="l00233"></a>00233             <a class="code" href="classOzoneLWLSQ.html#a38c8af5392da70119dc5cce4e3637cbc">SQEntries</a>++;
<a name="l00234"></a>00234         }
<a name="l00235"></a>00235     } <span class="keywordflow">else</span> {
<a name="l00236"></a>00236         <a class="code" href="classOzoneLWLSQ.html#a38c8af5392da70119dc5cce4e3637cbc">SQEntries</a> = size;
<a name="l00237"></a>00237     }
<a name="l00238"></a>00238 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9134276ed85820d74779ad5826580822"></a><!-- doxytag: member="OzoneLWLSQ::setBE" ref="a9134276ed85820d74779ad5826580822" args="(BackEnd *be_ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setBE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBackEnd.html">BackEnd</a> *&nbsp;</td>
          <td class="paramname"> <em>be_ptr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the back-end stage pointer. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00094"></a>00094     { <a class="code" href="classOzoneLWLSQ.html#a84f815aa1fa864ba2e6d75f5ad2b52d1">be</a> = be_ptr; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab8056057b67b41f234f56940cc115cc1"></a><!-- doxytag: member="OzoneLWLSQ::setCPU" ref="ab8056057b67b41f234f56940cc115cc1" args="(OzoneCPU *cpu_ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setCPU </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classOzoneCPU.html">OzoneCPU</a> *&nbsp;</td>
          <td class="paramname"> <em>cpu_ptr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the CPU pointer. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00176"></a>00176 {
<a name="l00177"></a>00177     <a class="code" href="classOzoneLWLSQ.html#a61b5f503eec141308b0cd6b4322b405b">cpu</a> = cpu_ptr;
<a name="l00178"></a>00178     <a class="code" href="classOzoneLWLSQ.html#a38b03978ad7720fdc910ff6a8b44585f">dcachePort</a>.setName(this-&gt;<a class="code" href="classOzoneLWLSQ.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;-dport&quot;</span>);
<a name="l00179"></a>00179 
<a name="l00180"></a>00180     <span class="keywordflow">if</span> (<a class="code" href="classOzoneLWLSQ.html#a61b5f503eec141308b0cd6b4322b405b">cpu</a>-&gt;<a class="code" href="classOzoneCPU.html#af07b45c0b87d6672f4066d2c189013f9">checker</a>) {
<a name="l00181"></a>00181         <a class="code" href="classOzoneLWLSQ.html#a61b5f503eec141308b0cd6b4322b405b">cpu</a>-&gt;<a class="code" href="classOzoneCPU.html#af07b45c0b87d6672f4066d2c189013f9">checker</a>-&gt;<a class="code" href="classCheckerCPU.html#a8d77cc755c7a424f4eb80130fb627012">setDcachePort</a>(&amp;<a class="code" href="classOzoneLWLSQ.html#a38b03978ad7720fdc910ff6a8b44585f">dcachePort</a>);
<a name="l00182"></a>00182     }
<a name="l00183"></a>00183 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac8bfb1e163f7ba2261d702623226973d"></a><!-- doxytag: member="OzoneLWLSQ::setLoadBlockedHandled" ref="ac8bfb1e163f7ba2261d702623226973d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setLoadBlockedHandled </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00172"></a>00172     { <a class="code" href="classOzoneLWLSQ.html#a2c1620029c162c7180e523b089e56ed5">loadBlockedHandled</a> = <span class="keyword">true</span>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a477981d1f905d2d398a1527f7149e3c4"></a><!-- doxytag: member="OzoneLWLSQ::sqFull" ref="a477981d1f905d2d398a1527f7149e3c4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sqFull </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns if the SQ is full. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00193"></a>00193 { <span class="keywordflow">return</span> (<a class="code" href="classOzoneLWLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a> + <a class="code" href="classOzoneLWLSQ.html#a04638dcfe9b4f8584453bb178bd2da5e">storesInFlight</a>) &gt;= (<a class="code" href="classOzoneLWLSQ.html#a38c8af5392da70119dc5cce4e3637cbc">SQEntries</a> - 1); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a51dd7e304d5413447717826fac6f4921"></a><!-- doxytag: member="OzoneLWLSQ::squash" ref="a51dd7e304d5413447717826fac6f4921" args="(const InstSeqNum &amp;squashed_num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void squash </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>squashed_num</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Squashes all instructions younger than a specific sequence number. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00713"></a>00713 {
<a name="l00714"></a>00714     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Squashing until [sn:%lli]!&quot;</span>
<a name="l00715"></a>00715             <span class="stringliteral">&quot;(Loads:%i Stores:%i)\n&quot;</span>,squashed_num,<a class="code" href="classOzoneLWLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a>,<a class="code" href="classOzoneLWLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a>+<a class="code" href="classOzoneLWLSQ.html#a04638dcfe9b4f8584453bb178bd2da5e">storesInFlight</a>);
<a name="l00716"></a>00716 
<a name="l00717"></a>00717 
<a name="l00718"></a>00718     <a class="code" href="classOzoneLWLSQ.html#a363c8c15e054d23b34f72063429933b8">LQIt</a> lq_it = <a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.begin();
<a name="l00719"></a>00719 
<a name="l00720"></a>00720     <span class="keywordflow">while</span> (<a class="code" href="classOzoneLWLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a> != 0 &amp;&amp; (*lq_it)-&gt;seqNum &gt; squashed_num) {
<a name="l00721"></a>00721         assert(!<a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.empty());
<a name="l00722"></a>00722         <span class="comment">// Clear the smart pointer to make sure it is decremented.</span>
<a name="l00723"></a>00723         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>,<span class="stringliteral">&quot;Load Instruction PC %#x squashed, &quot;</span>
<a name="l00724"></a>00724                 <span class="stringliteral">&quot;[sn:%lli]\n&quot;</span>,
<a name="l00725"></a>00725                 (*lq_it)-&gt;readPC(),
<a name="l00726"></a>00726                 (*lq_it)-&gt;seqNum);
<a name="l00727"></a>00727 
<a name="l00728"></a>00728         <span class="keywordflow">if</span> (<a class="code" href="classOzoneLWLSQ.html#af8eb8590fbfa6ecd2f796390677a4c00">isStalled</a>() &amp;&amp; lq_it == <a class="code" href="classOzoneLWLSQ.html#a567a64b358df6ae6162124cfe4d00db3">stallingLoad</a>) {
<a name="l00729"></a>00729             <a class="code" href="classOzoneLWLSQ.html#a6f8bff553ad30865c7d0c62e05421eb8">stalled</a> = <span class="keyword">false</span>;
<a name="l00730"></a>00730             <a class="code" href="classOzoneLWLSQ.html#afe1cdcfca6b44c28581d862228adc3da">stallingStoreIsn</a> = 0;
<a name="l00731"></a>00731             <a class="code" href="classOzoneLWLSQ.html#a567a64b358df6ae6162124cfe4d00db3">stallingLoad</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00732"></a>00732         }
<a name="l00733"></a>00733 
<a name="l00734"></a>00734         --<a class="code" href="classOzoneLWLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a>;
<a name="l00735"></a>00735 
<a name="l00736"></a>00736         <span class="comment">// Inefficient!</span>
<a name="l00737"></a>00737         <a class="code" href="classOzoneLWLSQ.html#ac0ca3d8ca19168e251c7233ec1f9a171">LQHashIt</a> lq_hash_it = <a class="code" href="classOzoneLWLSQ.html#afd55cfcf685cda7dafc7c52d5105e129">LQItHash</a>.find((*lq_it)-&gt;lqIdx);
<a name="l00738"></a>00738         assert(lq_hash_it != <a class="code" href="classOzoneLWLSQ.html#afd55cfcf685cda7dafc7c52d5105e129">LQItHash</a>.end());
<a name="l00739"></a>00739         <a class="code" href="classOzoneLWLSQ.html#afd55cfcf685cda7dafc7c52d5105e129">LQItHash</a>.erase(lq_hash_it);
<a name="l00740"></a>00740         <a class="code" href="classOzoneLWLSQ.html#a78218da891879fae16fe75c73981f75f">LQIndices</a>.push((*lq_it)-&gt;lqIdx);
<a name="l00741"></a>00741         <a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.erase(lq_it++);
<a name="l00742"></a>00742     }
<a name="l00743"></a>00743 
<a name="l00744"></a>00744     <span class="keywordflow">if</span> (<a class="code" href="classOzoneLWLSQ.html#a95dc31b4ce3ebcb6b9d75a510b3a128c">isLoadBlocked</a>) {
<a name="l00745"></a>00745         <span class="keywordflow">if</span> (squashed_num &lt; <a class="code" href="classOzoneLWLSQ.html#a3fca34b247fd8d081557578f8ca60fe3">blockedLoadSeqNum</a>) {
<a name="l00746"></a>00746             <a class="code" href="classOzoneLWLSQ.html#a95dc31b4ce3ebcb6b9d75a510b3a128c">isLoadBlocked</a> = <span class="keyword">false</span>;
<a name="l00747"></a>00747             <a class="code" href="classOzoneLWLSQ.html#a2c1620029c162c7180e523b089e56ed5">loadBlockedHandled</a> = <span class="keyword">false</span>;
<a name="l00748"></a>00748             <a class="code" href="classOzoneLWLSQ.html#a3fca34b247fd8d081557578f8ca60fe3">blockedLoadSeqNum</a> = 0;
<a name="l00749"></a>00749         }
<a name="l00750"></a>00750     }
<a name="l00751"></a>00751 
<a name="l00752"></a>00752     <a class="code" href="classOzoneLWLSQ.html#a3b2dd16f487adc977c43201cd7f51558">SQIt</a> sq_it = <a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.begin();
<a name="l00753"></a>00753 
<a name="l00754"></a>00754     <span class="keywordflow">while</span> (<a class="code" href="classOzoneLWLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a> != 0 &amp;&amp; (*sq_it).inst-&gt;seqNum &gt; squashed_num) {
<a name="l00755"></a>00755         assert(!<a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.empty());
<a name="l00756"></a>00756 
<a name="l00757"></a>00757         <span class="keywordflow">if</span> ((*sq_it).canWB) {
<a name="l00758"></a>00758             <span class="keywordflow">break</span>;
<a name="l00759"></a>00759         }
<a name="l00760"></a>00760 
<a name="l00761"></a>00761         <span class="comment">// Clear the smart pointer to make sure it is decremented.</span>
<a name="l00762"></a>00762         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>,<span class="stringliteral">&quot;Store Instruction PC %#x idx:%i squashed [sn:%lli]\n&quot;</span>,
<a name="l00763"></a>00763                 (*sq_it).inst-&gt;readPC(), (*sq_it).inst-&gt;sqIdx,
<a name="l00764"></a>00764                 (*sq_it).inst-&gt;seqNum);
<a name="l00765"></a>00765 
<a name="l00766"></a>00766         <span class="comment">// I don&apos;t think this can happen.  It should have been cleared by the</span>
<a name="l00767"></a>00767         <span class="comment">// stalling load.</span>
<a name="l00768"></a>00768         <span class="keywordflow">if</span> (<a class="code" href="classOzoneLWLSQ.html#af8eb8590fbfa6ecd2f796390677a4c00">isStalled</a>() &amp;&amp;
<a name="l00769"></a>00769             (*sq_it).inst-&gt;seqNum == <a class="code" href="classOzoneLWLSQ.html#afe1cdcfca6b44c28581d862228adc3da">stallingStoreIsn</a>) {
<a name="l00770"></a>00770             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Is stalled should have been cleared by stalling load!\n&quot;</span>);
<a name="l00771"></a>00771             <a class="code" href="classOzoneLWLSQ.html#a6f8bff553ad30865c7d0c62e05421eb8">stalled</a> = <span class="keyword">false</span>;
<a name="l00772"></a>00772             <a class="code" href="classOzoneLWLSQ.html#afe1cdcfca6b44c28581d862228adc3da">stallingStoreIsn</a> = 0;
<a name="l00773"></a>00773         }
<a name="l00774"></a>00774 
<a name="l00775"></a>00775         <a class="code" href="classOzoneLWLSQ.html#af476de7b08376a4d7d7cd4b8dbbabb7a">SQHashIt</a> sq_hash_it = <a class="code" href="classOzoneLWLSQ.html#a3eb9bc9d55fde5b98e8d28a220d247f6">SQItHash</a>.find((*sq_it).inst-&gt;sqIdx);
<a name="l00776"></a>00776         assert(sq_hash_it != <a class="code" href="classOzoneLWLSQ.html#a3eb9bc9d55fde5b98e8d28a220d247f6">SQItHash</a>.end());
<a name="l00777"></a>00777         <a class="code" href="classOzoneLWLSQ.html#a3eb9bc9d55fde5b98e8d28a220d247f6">SQItHash</a>.erase(sq_hash_it);
<a name="l00778"></a>00778         <a class="code" href="classOzoneLWLSQ.html#a94838aca72c880423d2328ae17f065e6">SQIndices</a>.push((*sq_it).inst-&gt;sqIdx);
<a name="l00779"></a>00779         (*sq_it).inst = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00780"></a>00780         (*sq_it).canWB = 0;
<a name="l00781"></a>00781         (*sq_it).req = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00782"></a>00782         --<a class="code" href="classOzoneLWLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a>;
<a name="l00783"></a>00783         <a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.erase(sq_it++);
<a name="l00784"></a>00784     }
<a name="l00785"></a>00785 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af841afeea43eb2b2272f0dfaf17c3f4e"></a><!-- doxytag: member="OzoneLWLSQ::storePostSend" ref="af841afeea43eb2b2272f0dfaf17c3f4e" args="(PacketPtr pkt, DynInstPtr &amp;inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void storePostSend </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>inst</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Handles completing the send of a store to memory. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00827"></a>00827 {
<a name="l00828"></a>00828     <span class="keywordflow">if</span> (<a class="code" href="classOzoneLWLSQ.html#af8eb8590fbfa6ecd2f796390677a4c00">isStalled</a>() &amp;&amp;
<a name="l00829"></a>00829         inst-&gt;seqNum == <a class="code" href="classOzoneLWLSQ.html#afe1cdcfca6b44c28581d862228adc3da">stallingStoreIsn</a>) {
<a name="l00830"></a>00830         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Unstalling, stalling store [sn:%lli] &quot;</span>
<a name="l00831"></a>00831                 <span class="stringliteral">&quot;load [sn:%lli]\n&quot;</span>,
<a name="l00832"></a>00832                 <a class="code" href="classOzoneLWLSQ.html#afe1cdcfca6b44c28581d862228adc3da">stallingStoreIsn</a>, (*stallingLoad)-&gt;seqNum);
<a name="l00833"></a>00833         <a class="code" href="classOzoneLWLSQ.html#a6f8bff553ad30865c7d0c62e05421eb8">stalled</a> = <span class="keyword">false</span>;
<a name="l00834"></a>00834         <a class="code" href="classOzoneLWLSQ.html#afe1cdcfca6b44c28581d862228adc3da">stallingStoreIsn</a> = 0;
<a name="l00835"></a>00835         <a class="code" href="classOzoneLWLSQ.html#a84f815aa1fa864ba2e6d75f5ad2b52d1">be</a>-&gt;<a class="code" href="classBackEnd.html#ae165df775b4de9e9430228c7f04c2bc9">replayMemInst</a>((*<a class="code" href="classOzoneLWLSQ.html#a567a64b358df6ae6162124cfe4d00db3">stallingLoad</a>));
<a name="l00836"></a>00836     }
<a name="l00837"></a>00837 
<a name="l00838"></a>00838     <span class="keywordflow">if</span> (!inst-&gt;isStoreConditional()) {
<a name="l00839"></a>00839         <span class="comment">// The store is basically completed at this time. This</span>
<a name="l00840"></a>00840         <span class="comment">// only works so long as the checker doesn&apos;t try to</span>
<a name="l00841"></a>00841         <span class="comment">// verify the value in memory for stores.</span>
<a name="l00842"></a>00842         inst-&gt;setCompleted();
<a name="l00843"></a>00843         <span class="keywordflow">if</span> (<a class="code" href="classOzoneLWLSQ.html#a61b5f503eec141308b0cd6b4322b405b">cpu</a>-&gt;<a class="code" href="classOzoneCPU.html#af07b45c0b87d6672f4066d2c189013f9">checker</a>) {
<a name="l00844"></a>00844             <a class="code" href="classOzoneLWLSQ.html#a61b5f503eec141308b0cd6b4322b405b">cpu</a>-&gt;<a class="code" href="classOzoneCPU.html#af07b45c0b87d6672f4066d2c189013f9">checker</a>-&gt;<a class="code" href="classChecker.html#af7588193b0187186501d440f02645196">verify</a>(inst);
<a name="l00845"></a>00845         }
<a name="l00846"></a>00846     }
<a name="l00847"></a>00847 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a05f299b443f8cc73a93d61572edc0218"></a><!-- doxytag: member="OzoneLWLSQ::switchOut" ref="a05f299b443f8cc73a93d61572edc0218" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void switchOut </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00924"></a>00924 {
<a name="l00925"></a>00925     assert(<a class="code" href="classOzoneLWLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a> == 0);
<a name="l00926"></a>00926     <a class="code" href="classOzoneLWLSQ.html#a1aee6db9bfb75cf02e38a82e5d02847f">switchedOut</a> = <span class="keyword">true</span>;
<a name="l00927"></a>00927 
<a name="l00928"></a>00928     <span class="comment">// Clear the queue to free up resources</span>
<a name="l00929"></a>00929     assert(<a class="code" href="classOzoneLWLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a> == 0);
<a name="l00930"></a>00930     assert(<a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.empty());
<a name="l00931"></a>00931     assert(<a class="code" href="classOzoneLWLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a> == 0);
<a name="l00932"></a>00932     assert(<a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.empty());
<a name="l00933"></a>00933     assert(<a class="code" href="classOzoneLWLSQ.html#a04638dcfe9b4f8584453bb178bd2da5e">storesInFlight</a> == 0);
<a name="l00934"></a>00934     <a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.clear();
<a name="l00935"></a>00935     <a class="code" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a>.clear();
<a name="l00936"></a>00936     <a class="code" href="classOzoneLWLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a> = <a class="code" href="classOzoneLWLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a> = <a class="code" href="classOzoneLWLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a> = <a class="code" href="classOzoneLWLSQ.html#a04638dcfe9b4f8584453bb178bd2da5e">storesInFlight</a> = 0;
<a name="l00937"></a>00937 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5a901e7ec5b94a55bd61fde88ad0b7f1"></a><!-- doxytag: member="OzoneLWLSQ::takeOverFrom" ref="a5a901e7ec5b94a55bd61fde88ad0b7f1" args="(ThreadContext *old_tc=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void takeOverFrom </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>old_tc</em> = <code>NULL</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00942"></a>00942 {
<a name="l00943"></a>00943     <span class="comment">// Clear out any old state. May be redundant if this is the first time</span>
<a name="l00944"></a>00944     <span class="comment">// the CPU is being used.</span>
<a name="l00945"></a>00945     <a class="code" href="classOzoneLWLSQ.html#a6f8bff553ad30865c7d0c62e05421eb8">stalled</a> = <span class="keyword">false</span>;
<a name="l00946"></a>00946     <a class="code" href="classOzoneLWLSQ.html#a95dc31b4ce3ebcb6b9d75a510b3a128c">isLoadBlocked</a> = <span class="keyword">false</span>;
<a name="l00947"></a>00947     <a class="code" href="classOzoneLWLSQ.html#a2c1620029c162c7180e523b089e56ed5">loadBlockedHandled</a> = <span class="keyword">false</span>;
<a name="l00948"></a>00948     <a class="code" href="classOzoneLWLSQ.html#a1aee6db9bfb75cf02e38a82e5d02847f">switchedOut</a> = <span class="keyword">false</span>;
<a name="l00949"></a>00949 
<a name="l00950"></a>00950     <span class="comment">// Could do simple checks here to see if indices are on twice</span>
<a name="l00951"></a>00951     <span class="keywordflow">while</span> (!<a class="code" href="classOzoneLWLSQ.html#a78218da891879fae16fe75c73981f75f">LQIndices</a>.empty())
<a name="l00952"></a>00952         <a class="code" href="classOzoneLWLSQ.html#a78218da891879fae16fe75c73981f75f">LQIndices</a>.pop();
<a name="l00953"></a>00953     <span class="keywordflow">while</span> (!<a class="code" href="classOzoneLWLSQ.html#a94838aca72c880423d2328ae17f065e6">SQIndices</a>.empty())
<a name="l00954"></a>00954         <a class="code" href="classOzoneLWLSQ.html#a94838aca72c880423d2328ae17f065e6">SQIndices</a>.pop();
<a name="l00955"></a>00955 
<a name="l00956"></a>00956     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classOzoneLWLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a> * 2; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00957"></a>00957         <a class="code" href="classOzoneLWLSQ.html#a78218da891879fae16fe75c73981f75f">LQIndices</a>.push(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>);
<a name="l00958"></a>00958         <a class="code" href="classOzoneLWLSQ.html#a94838aca72c880423d2328ae17f065e6">SQIndices</a>.push(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>);
<a name="l00959"></a>00959     }
<a name="l00960"></a>00960 
<a name="l00961"></a>00961     <a class="code" href="classOzoneLWLSQ.html#a03435d626b7567ed154de5d7d8c3d419">usedPorts</a> = 0;
<a name="l00962"></a>00962 
<a name="l00963"></a>00963     <a class="code" href="classOzoneLWLSQ.html#a7123aa8b10829cc4712dff5454e13978">loadFaultInst</a> = <a class="code" href="classOzoneLWLSQ.html#ab98cf7d5235b7402e8916e78569f4ab2">storeFaultInst</a> = <a class="code" href="classOzoneLWLSQ.html#a270a20c3fa52139e0538288275db9d22">memDepViolator</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00964"></a>00964 
<a name="l00965"></a>00965     <a class="code" href="classOzoneLWLSQ.html#a3fca34b247fd8d081557578f8ca60fe3">blockedLoadSeqNum</a> = 0;
<a name="l00966"></a>00966 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a873dd91783f9efb4a590aded1f70d6b0"></a><!-- doxytag: member="OzoneLWLSQ::tick" ref="a873dd91783f9efb4a590aded1f70d6b0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tick </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Ticks the <a class="el" href="classLSQ.html">LSQ</a> unit, which in this case only resets the number of used cache ports. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000046">TODO:</a></b></dt><dd>: Move the number of used ports up to the <a class="el" href="classLSQ.html">LSQ</a> level so it can be shared by all <a class="el" href="classLSQ.html">LSQ</a> units. </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00103"></a>00103 { <a class="code" href="classOzoneLWLSQ.html#a03435d626b7567ed154de5d7d8c3d419">usedPorts</a> = 0; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4f720bbfb5fdefdb23516500eeb0b4de"></a><!-- doxytag: member="OzoneLWLSQ::violation" ref="a4f720bbfb5fdefdb23516500eeb0b4de" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool violation </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns if there is a memory ordering violation. Value is reset upon call to <a class="el" href="classOzoneLWLSQ.html#a30adaf6f5fb6b38b5747f35c419e3f31">getMemDepViolator()</a>. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00154"></a>00154 { <span class="keywordflow">return</span> <a class="code" href="classOzoneLWLSQ.html#a270a20c3fa52139e0538288275db9d22">memDepViolator</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a338be821734603396bfef8d9fb8f04b0"></a><!-- doxytag: member="OzoneLWLSQ::willWB" ref="a338be821734603396bfef8d9fb8f04b0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool willWB </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns if the <a class="el" href="classLSQ.html">LSQ</a> unit will writeback on this cycle. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00208"></a>00208                   { <span class="keywordflow">return</span> <a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.back().canWB &amp;&amp;
<a name="l00209"></a>00209                         !<a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.back().completed &amp;&amp;
<a name="l00210"></a>00210                         !<a class="code" href="classOzoneLWLSQ.html#a89d931c74b63e0b0e7ad856fe9525ff6">isStoreBlocked</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="abbf7bcc93511421a1787650a43e2642a"></a><!-- doxytag: member="OzoneLWLSQ::write" ref="abbf7bcc93511421a1787650a43e2642a" args="(RequestPtr req, T &amp;data, int store_idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">Fault</a> write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRequest.html">RequestPtr</a>&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T &amp;&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>store_idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Executes the store at the given index. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00673"></a>00673 {
<a name="l00674"></a>00674     <a class="code" href="classOzoneLWLSQ.html#af476de7b08376a4d7d7cd4b8dbbabb7a">SQHashIt</a> sq_hash_it = <a class="code" href="classOzoneLWLSQ.html#a3eb9bc9d55fde5b98e8d28a220d247f6">SQItHash</a>.find(store_idx);
<a name="l00675"></a>00675     assert(sq_hash_it != <a class="code" href="classOzoneLWLSQ.html#a3eb9bc9d55fde5b98e8d28a220d247f6">SQItHash</a>.end());
<a name="l00676"></a>00676 
<a name="l00677"></a>00677     <a class="code" href="classOzoneLWLSQ.html#a3b2dd16f487adc977c43201cd7f51558">SQIt</a> sq_it = (*sq_hash_it).second;
<a name="l00678"></a>00678     assert((*sq_it).inst);
<a name="l00679"></a>00679 
<a name="l00680"></a>00680     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Doing write to store idx %i, addr %#x data %#x&quot;</span>
<a name="l00681"></a>00681             <span class="stringliteral">&quot; | [sn:%lli]\n&quot;</span>,
<a name="l00682"></a>00682             store_idx, req-&gt;<a class="code" href="classRequest.html#a744ef11a5afe9d3651ce5f954259cb43">getPaddr</a>(), data, (*sq_it).inst-&gt;seqNum);
<a name="l00683"></a>00683 
<a name="l00684"></a>00684     (*sq_it).req = req;
<a name="l00685"></a>00685     (*sq_it).size = <span class="keyword">sizeof</span>(T);
<a name="l00686"></a>00686     (*sq_it).data = data;
<a name="l00687"></a>00687 <span class="comment">/*</span>
<a name="l00688"></a>00688 <span class="comment">    assert(!req-&gt;data);</span>
<a name="l00689"></a>00689 <span class="comment">    req-&gt;data = new uint8_t[64];</span>
<a name="l00690"></a>00690 <span class="comment">    memcpy(req-&gt;data, (uint8_t *)&amp;(*sq_it).data, req-&gt;size);</span>
<a name="l00691"></a>00691 <span class="comment">*/</span>
<a name="l00692"></a>00692 
<a name="l00693"></a>00693     <span class="comment">// This function only writes the data to the store queue, so no fault</span>
<a name="l00694"></a>00694     <span class="comment">// can happen here.</span>
<a name="l00695"></a>00695     <span class="keywordflow">return</span> <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00696"></a>00696 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3911bacb8817c31cfbeefd125dba0217"></a><!-- doxytag: member="OzoneLWLSQ::writeback" ref="a3911bacb8817c31cfbeefd125dba0217" args="(DynInstPtr &amp;inst, PacketPtr pkt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void writeback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>inst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pkt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Writes back the instruction, sending it to IEW. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00852"></a>00852 {
<a name="l00853"></a>00853     <span class="comment">// Squashed instructions do not need to complete their access.</span>
<a name="l00854"></a>00854     <span class="keywordflow">if</span> (inst-&gt;isSquashed()) {
<a name="l00855"></a>00855         assert(!inst-&gt;isStore());
<a name="l00856"></a>00856         <span class="keywordflow">return</span>;
<a name="l00857"></a>00857     }
<a name="l00858"></a>00858 
<a name="l00859"></a>00859     <span class="keywordflow">if</span> (!inst-&gt;isExecuted()) {
<a name="l00860"></a>00860         inst-&gt;setExecuted();
<a name="l00861"></a>00861 
<a name="l00862"></a>00862         <span class="comment">// Complete access to copy data to proper place.</span>
<a name="l00863"></a>00863         inst-&gt;completeAcc(pkt);
<a name="l00864"></a>00864     }
<a name="l00865"></a>00865 
<a name="l00866"></a>00866     <span class="comment">// Need to insert instruction into queue to commit</span>
<a name="l00867"></a>00867     <a class="code" href="classOzoneLWLSQ.html#a84f815aa1fa864ba2e6d75f5ad2b52d1">be</a>-&gt;<a class="code" href="classBackEnd.html#a720e9865ffa6e84b756f5ec1d1a24d94">instToCommit</a>(inst);
<a name="l00868"></a>00868 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5f04e29d6f6feb8b86460491f2ba7547"></a><!-- doxytag: member="OzoneLWLSQ::writebackStores" ref="a5f04e29d6f6feb8b86460491f2ba7547" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void writebackStores </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Writes back stores. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00539"></a>00539 {
<a name="l00540"></a>00540     <a class="code" href="classOzoneLWLSQ.html#a3b2dd16f487adc977c43201cd7f51558">SQIt</a> sq_it = --(<a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.end());
<a name="l00541"></a>00541     <span class="keywordflow">while</span> (<a class="code" href="classOzoneLWLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a> &gt; 0 &amp;&amp;
<a name="l00542"></a>00542            sq_it != <a class="code" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a>.end() &amp;&amp;
<a name="l00543"></a>00543            (*sq_it).inst &amp;&amp;
<a name="l00544"></a>00544            (*sq_it).canWB &amp;&amp;
<a name="l00545"></a>00545            <a class="code" href="classOzoneLWLSQ.html#a03435d626b7567ed154de5d7d8c3d419">usedPorts</a> &lt; <a class="code" href="classOzoneLWLSQ.html#ab2e23636971c40e7ed945026b2a184e1">cachePorts</a>) {
<a name="l00546"></a>00546 
<a name="l00547"></a>00547         <span class="keywordflow">if</span> (<a class="code" href="classOzoneLWLSQ.html#a89d931c74b63e0b0e7ad856fe9525ff6">isStoreBlocked</a>) {
<a name="l00548"></a>00548             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Unable to write back any more stores, cache&quot;</span>
<a name="l00549"></a>00549                     <span class="stringliteral">&quot; is blocked!\n&quot;</span>);
<a name="l00550"></a>00550             <span class="keywordflow">break</span>;
<a name="l00551"></a>00551         }
<a name="l00552"></a>00552 
<a name="l00553"></a>00553         <a class="code" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> inst = (*sq_it).inst;
<a name="l00554"></a>00554 
<a name="l00555"></a>00555         <span class="keywordflow">if</span> ((*sq_it).size == 0 &amp;&amp; !(*sq_it).completed) {
<a name="l00556"></a>00556             sq_it--;
<a name="l00557"></a>00557             <a class="code" href="classOzoneLWLSQ.html#ad5ff9e08c63a01ac86a8f80765b37365">removeStore</a>(inst-&gt;sqIdx);
<a name="l00558"></a>00558             <a class="code" href="classOzoneLWLSQ.html#a14bf528b217d02373076ed257f448dbf">completeStore</a>(inst);
<a name="l00559"></a>00559             <span class="keywordflow">continue</span>;
<a name="l00560"></a>00560         }
<a name="l00561"></a>00561 
<a name="l00562"></a>00562         <span class="keywordflow">if</span> (inst-&gt;isDataPrefetch() || (*sq_it).committed) {
<a name="l00563"></a>00563             sq_it--;
<a name="l00564"></a>00564             <span class="keywordflow">continue</span>;
<a name="l00565"></a>00565         }
<a name="l00566"></a>00566 
<a name="l00567"></a>00567         ++<a class="code" href="classOzoneLWLSQ.html#a03435d626b7567ed154de5d7d8c3d419">usedPorts</a>;
<a name="l00568"></a>00568 
<a name="l00569"></a>00569         assert((*sq_it).req);
<a name="l00570"></a>00570         assert(!(*sq_it).committed);
<a name="l00571"></a>00571 
<a name="l00572"></a>00572         <a class="code" href="classRequest.html">Request</a> *req = (*sq_it).req;
<a name="l00573"></a>00573         (*sq_it).committed = <span class="keyword">true</span>;
<a name="l00574"></a>00574 
<a name="l00575"></a>00575         assert(!inst-&gt;memData);
<a name="l00576"></a>00576         inst-&gt;memData = <span class="keyword">new</span> uint8_t[64];
<a name="l00577"></a>00577         memcpy(inst-&gt;memData, (uint8_t *)&amp;(*sq_it).data,
<a name="l00578"></a>00578                req-&gt;<a class="code" href="classRequest.html#a3c4029b904a61a9873e6d12785ce19a1">getSize</a>());
<a name="l00579"></a>00579 
<a name="l00580"></a>00580         <a class="code" href="classMemCmd.html">MemCmd</a> command =
<a name="l00581"></a>00581             req-&gt;<a class="code" href="classRequest.html#a6ec455c5a36403d3a8319bcfbf356bc1">isSwap</a>() ? <a class="code" href="classMemCmd.html#a2afce0a47a93eee73a314d53e4890153a544e456dc06d65a6998a7df182d247d3">MemCmd::SwapReq</a> :
<a name="l00582"></a>00582             (req-&gt;<a class="code" href="classRequest.html#a8965874e960faf91ad4b6af8dbf31875">isLLSC</a>() ? <a class="code" href="classMemCmd.html#a2afce0a47a93eee73a314d53e4890153aa5ec34a7e56b23ff12c9b819519d168a">MemCmd::WriteReq</a> : <a class="code" href="classMemCmd.html#a2afce0a47a93eee73a314d53e4890153a10ce12df51611216e2e8c4cb9b5d4047">MemCmd::StoreCondReq</a>);
<a name="l00583"></a>00583         <a class="code" href="classPacket.html">PacketPtr</a> data_pkt = <span class="keyword">new</span> <a class="code" href="classPacket.html">Packet</a>(req, command);
<a name="l00584"></a>00584         data_pkt-&gt;<a class="code" href="classPacket.html#a60621b00d6ecd49b3e336087aca2eda0">dataStatic</a>(inst-&gt;memData);
<a name="l00585"></a>00585 
<a name="l00586"></a>00586         LSQSenderState *state = <span class="keyword">new</span> LSQSenderState;
<a name="l00587"></a>00587         state-&gt;isLoad = <span class="keyword">false</span>;
<a name="l00588"></a>00588         state-&gt;idx = inst-&gt;sqIdx;
<a name="l00589"></a>00589         state-&gt;inst = inst;
<a name="l00590"></a>00590         data_pkt-&gt;<a class="code" href="classPacket.html#a983ade0479f946c813284dcc65073367">senderState</a> = state;
<a name="l00591"></a>00591 
<a name="l00592"></a>00592         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;D-Cache: Writing back store PC:%#x &quot;</span>
<a name="l00593"></a>00593                 <span class="stringliteral">&quot;to Addr:%#x, data:%#x [sn:%lli]\n&quot;</span>,
<a name="l00594"></a>00594                 (*sq_it).inst-&gt;readPC(),
<a name="l00595"></a>00595                 req-&gt;<a class="code" href="classRequest.html#a744ef11a5afe9d3651ce5f954259cb43">getPaddr</a>(), *(inst-&gt;memData),
<a name="l00596"></a>00596                 inst-&gt;seqNum);
<a name="l00597"></a>00597 
<a name="l00598"></a>00598         <span class="comment">// @todo: Remove this SC hack once the memory system handles it.</span>
<a name="l00599"></a>00599         <span class="keywordflow">if</span> (req-&gt;<a class="code" href="classRequest.html#a8965874e960faf91ad4b6af8dbf31875">isLLSC</a>()) {
<a name="l00600"></a>00600             <span class="keywordflow">if</span> (req-&gt;<a class="code" href="classRequest.html#a70c74b2809417ea8701dd6ba9e34312d">isUncacheable</a>()) {
<a name="l00601"></a>00601                 req-&gt;<a class="code" href="classRequest.html#ac73800a0bae4776befb9d416e95ea6d9">setExtraData</a>(2);
<a name="l00602"></a>00602             } <span class="keywordflow">else</span> {
<a name="l00603"></a>00603                 <span class="keywordflow">if</span> (<a class="code" href="classOzoneLWLSQ.html#a61b5f503eec141308b0cd6b4322b405b">cpu</a>-&gt;<a class="code" href="classOzoneCPU.html#aa062c7f3423632ca66107fdbb9d38131">lockFlag</a>) {
<a name="l00604"></a>00604                     req-&gt;<a class="code" href="classRequest.html#ac73800a0bae4776befb9d416e95ea6d9">setExtraData</a>(1);
<a name="l00605"></a>00605                 } <span class="keywordflow">else</span> {
<a name="l00606"></a>00606                     req-&gt;<a class="code" href="classRequest.html#ac73800a0bae4776befb9d416e95ea6d9">setExtraData</a>(0);
<a name="l00607"></a>00607                     <span class="comment">// Hack: Instantly complete this store.</span>
<a name="l00608"></a>00608                     <a class="code" href="classOzoneLWLSQ.html#a0f7f0d3412bbf494cd3d0c0f48e5fcf2">completeDataAccess</a>(data_pkt);
<a name="l00609"></a>00609                     --sq_it;
<a name="l00610"></a>00610                     <span class="keywordflow">continue</span>;
<a name="l00611"></a>00611                 }
<a name="l00612"></a>00612             }
<a name="l00613"></a>00613         } <span class="keywordflow">else</span> {
<a name="l00614"></a>00614             <span class="comment">// Non-store conditionals do not need a writeback.</span>
<a name="l00615"></a>00615             state-&gt;noWB = <span class="keyword">true</span>;
<a name="l00616"></a>00616         }
<a name="l00617"></a>00617 
<a name="l00618"></a>00618         <span class="keywordflow">if</span> (!<a class="code" href="classOzoneLWLSQ.html#a38b03978ad7720fdc910ff6a8b44585f">dcachePort</a>.sendTiming(data_pkt)) {
<a name="l00619"></a>00619             <span class="comment">// Need to handle becoming blocked on a store.</span>
<a name="l00620"></a>00620             <a class="code" href="classOzoneLWLSQ.html#a89d931c74b63e0b0e7ad856fe9525ff6">isStoreBlocked</a> = <span class="keyword">true</span>;
<a name="l00621"></a>00621             assert(<a class="code" href="classOzoneLWLSQ.html#a314ae93c04b3ca96e79e1b1f39a8e478">retryPkt</a> == <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>);
<a name="l00622"></a>00622             <a class="code" href="classOzoneLWLSQ.html#a314ae93c04b3ca96e79e1b1f39a8e478">retryPkt</a> = data_pkt;
<a name="l00623"></a>00623         } <span class="keywordflow">else</span> {
<a name="l00624"></a>00624             <a class="code" href="classOzoneLWLSQ.html#af841afeea43eb2b2272f0dfaf17c3f4e">storePostSend</a>(data_pkt, inst);
<a name="l00625"></a>00625             --sq_it;
<a name="l00626"></a>00626         }
<a name="l00627"></a>00627 <span class="comment">/*</span>
<a name="l00628"></a>00628 <span class="comment">        DPRINTF(OzoneLSQ, &quot;D-Cache: Writing back store idx:%i PC:%#x &quot;</span>
<a name="l00629"></a>00629 <span class="comment">                &quot;to Addr:%#x, data:%#x [sn:%lli]\n&quot;,</span>
<a name="l00630"></a>00630 <span class="comment">                inst-&gt;sqIdx,inst-&gt;readPC(),</span>
<a name="l00631"></a>00631 <span class="comment">                req-&gt;paddr, *(req-&gt;data),</span>
<a name="l00632"></a>00632 <span class="comment">                inst-&gt;seqNum);</span>
<a name="l00633"></a>00633 <span class="comment">        DPRINTF(OzoneLSQ, &quot;StoresInFlight: %i\n&quot;,</span>
<a name="l00634"></a>00634 <span class="comment">                storesInFlight + 1);</span>
<a name="l00635"></a>00635 <span class="comment"></span>
<a name="l00636"></a>00636 <span class="comment">        if (dcacheInterface) {</span>
<a name="l00637"></a>00637 <span class="comment">            assert(!req-&gt;completionEvent);</span>
<a name="l00638"></a>00638 <span class="comment">            StoreCompletionEvent *store_event = new</span>
<a name="l00639"></a>00639 <span class="comment">                StoreCompletionEvent(inst, be, NULL, this);</span>
<a name="l00640"></a>00640 <span class="comment">            req-&gt;completionEvent = store_event;</span>
<a name="l00641"></a>00641 <span class="comment"></span>
<a name="l00642"></a>00642 <span class="comment">            MemAccessResult result = dcacheInterface-&gt;access(req);</span>
<a name="l00643"></a>00643 <span class="comment"></span>
<a name="l00644"></a>00644 <span class="comment">            if (isStalled() &amp;&amp;</span>
<a name="l00645"></a>00645 <span class="comment">                inst-&gt;seqNum == stallingStoreIsn) {</span>
<a name="l00646"></a>00646 <span class="comment">                DPRINTF(OzoneLSQ, &quot;Unstalling, stalling store [sn:%lli] &quot;</span>
<a name="l00647"></a>00647 <span class="comment">                        &quot;load [sn:%lli]\n&quot;,</span>
<a name="l00648"></a>00648 <span class="comment">                        stallingStoreIsn, (*stallingLoad)-&gt;seqNum);</span>
<a name="l00649"></a>00649 <span class="comment">                stalled = false;</span>
<a name="l00650"></a>00650 <span class="comment">                stallingStoreIsn = 0;</span>
<a name="l00651"></a>00651 <span class="comment">                be-&gt;replayMemInst((*stallingLoad));</span>
<a name="l00652"></a>00652 <span class="comment">            }</span>
<a name="l00653"></a>00653 <span class="comment"></span>
<a name="l00654"></a>00654 <span class="comment">            if (result != MA_HIT &amp;&amp; dcacheInterface-&gt;doEvents()) {</span>
<a name="l00655"></a>00655 <span class="comment">                store_event-&gt;miss = true;</span>
<a name="l00656"></a>00656 <span class="comment">                typename BackEnd::LdWritebackEvent *wb = NULL;</span>
<a name="l00657"></a>00657 <span class="comment">                if (req-&gt;isLLSC()) {</span>
<a name="l00658"></a>00658 <span class="comment">                    wb = new typename BackEnd::LdWritebackEvent(inst,</span>
<a name="l00659"></a>00659 <span class="comment">                                                            be);</span>
<a name="l00660"></a>00660 <span class="comment">                    store_event-&gt;wbEvent = wb;</span>
<a name="l00661"></a>00661 <span class="comment">                }</span>
<a name="l00662"></a>00662 <span class="comment"></span>
<a name="l00663"></a>00663 <span class="comment">                DPRINTF(OzoneLSQ,&quot;D-Cache Write Miss!\n&quot;);</span>
<a name="l00664"></a>00664 <span class="comment"></span>
<a name="l00665"></a>00665 <span class="comment">//                DPRINTF(Activity, &quot;Active st accessing mem miss [sn:%lli]\n&quot;,</span>
<a name="l00666"></a>00666 <span class="comment">//                        inst-&gt;seqNum);</span>
<a name="l00667"></a>00667 <span class="comment"></span>
<a name="l00668"></a>00668 <span class="comment">                be-&gt;addDcacheMiss(inst);</span>
<a name="l00669"></a>00669 <span class="comment"></span>
<a name="l00670"></a>00670 <span class="comment">                lastDcacheStall = curTick();</span>
<a name="l00671"></a>00671 <span class="comment"></span>
<a name="l00672"></a>00672 <span class="comment">                _status = DcacheMissStall;</span>
<a name="l00673"></a>00673 <span class="comment"></span>
<a name="l00674"></a>00674 <span class="comment">                // Increment stat here or something</span>
<a name="l00675"></a>00675 <span class="comment"></span>
<a name="l00676"></a>00676 <span class="comment">                sq_it--;</span>
<a name="l00677"></a>00677 <span class="comment">            } else {</span>
<a name="l00678"></a>00678 <span class="comment">                DPRINTF(OzoneLSQ,&quot;D-Cache: Write Hit on idx:%i !\n&quot;,</span>
<a name="l00679"></a>00679 <span class="comment">                        inst-&gt;sqIdx);</span>
<a name="l00680"></a>00680 <span class="comment"></span>
<a name="l00681"></a>00681 <span class="comment">//                DPRINTF(Activity, &quot;Active st accessing mem hit [sn:%lli]\n&quot;,</span>
<a name="l00682"></a>00682 <span class="comment">//                        inst-&gt;seqNum);</span>
<a name="l00683"></a>00683 <span class="comment"></span>
<a name="l00684"></a>00684 <span class="comment">                if (req-&gt;isLLSC()) {</span>
<a name="l00685"></a>00685 <span class="comment">                    // Stx_C does not generate a system port</span>
<a name="l00686"></a>00686 <span class="comment">                    // transaction in the 21264, but that might be</span>
<a name="l00687"></a>00687 <span class="comment">                    // hard to accomplish in this model.</span>
<a name="l00688"></a>00688 <span class="comment"></span>
<a name="l00689"></a>00689 <span class="comment">                    typename BackEnd::LdWritebackEvent *wb =</span>
<a name="l00690"></a>00690 <span class="comment">                        new typename BackEnd::LdWritebackEvent(inst,</span>
<a name="l00691"></a>00691 <span class="comment">                                                               be);</span>
<a name="l00692"></a>00692 <span class="comment">                    store_event-&gt;wbEvent = wb;</span>
<a name="l00693"></a>00693 <span class="comment">                }</span>
<a name="l00694"></a>00694 <span class="comment">                sq_it--;</span>
<a name="l00695"></a>00695 <span class="comment">            }</span>
<a name="l00696"></a>00696 <span class="comment">            ++storesInFlight;</span>
<a name="l00697"></a>00697 <span class="comment">//            removeStore(inst-&gt;sqIdx);</span>
<a name="l00698"></a>00698 <span class="comment">        } else {</span>
<a name="l00699"></a>00699 <span class="comment">            panic(&quot;Must HAVE DCACHE!!!!!\n&quot;);</span>
<a name="l00700"></a>00700 <span class="comment">        }</span>
<a name="l00701"></a>00701 <span class="comment">*/</span>
<a name="l00702"></a>00702     }
<a name="l00703"></a>00703 
<a name="l00704"></a>00704     <span class="comment">// Not sure this should set it to 0.</span>
<a name="l00705"></a>00705     <a class="code" href="classOzoneLWLSQ.html#a03435d626b7567ed154de5d7d8c3d419">usedPorts</a> = 0;
<a name="l00706"></a>00706 
<a name="l00707"></a>00707     assert(<a class="code" href="classOzoneLWLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a> &gt;= 0 &amp;&amp; <a class="code" href="classOzoneLWLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a> &gt;= 0);
<a name="l00708"></a>00708 }
</pre></div></p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="a6cdf6e6db875a442f3ab6db542bd2bb5"></a><!-- doxytag: member="OzoneLWLSQ::_status" ref="a6cdf6e6db875a442f3ab6db542bd2bb5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOzoneLWLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70b">Status</a> <a class="el" href="classOzoneLWLSQ.html#a6cdf6e6db875a442f3ab6db542bd2bb5">_status</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The status of the <a class="el" href="classLSQ.html">LSQ</a> unit. </p>

</div>
</div>
<a class="anchor" id="a84f815aa1fa864ba2e6d75f5ad2b52d1"></a><!-- doxytag: member="OzoneLWLSQ::be" ref="a84f815aa1fa864ba2e6d75f5ad2b52d1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBackEnd.html">BackEnd</a>* <a class="el" href="classOzoneLWLSQ.html#a84f815aa1fa864ba2e6d75f5ad2b52d1">be</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pointer to the back-end stage. </p>

</div>
</div>
<a class="anchor" id="a3fca34b247fd8d081557578f8ca60fe3"></a><!-- doxytag: member="OzoneLWLSQ::blockedLoadSeqNum" ref="a3fca34b247fd8d081557578f8ca60fe3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> <a class="el" href="classOzoneLWLSQ.html#a3fca34b247fd8d081557578f8ca60fe3">blockedLoadSeqNum</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab2e23636971c40e7ed945026b2a184e1"></a><!-- doxytag: member="OzoneLWLSQ::cachePorts" ref="ab2e23636971c40e7ed945026b2a184e1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classOzoneLWLSQ.html#ab2e23636971c40e7ed945026b2a184e1">cachePorts</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000047">TODO:</a></b></dt><dd>Consider moving to a more advanced model with write vs read ports </dd></dl>
<p>The number of cache ports available each cycle. </p>

</div>
</div>
<a class="anchor" id="a61b5f503eec141308b0cd6b4322b405b"></a><!-- doxytag: member="OzoneLWLSQ::cpu" ref="a61b5f503eec141308b0cd6b4322b405b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOzoneCPU.html">OzoneCPU</a>* <a class="el" href="classOzoneLWLSQ.html#a61b5f503eec141308b0cd6b4322b405b">cpu</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pointer to the CPU. </p>

</div>
</div>
<a class="anchor" id="a38b03978ad7720fdc910ff6a8b44585f"></a><!-- doxytag: member="OzoneLWLSQ::dcachePort" ref="a38b03978ad7720fdc910ff6a8b44585f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOzoneLWLSQ_1_1DcachePort.html">DcachePort</a> <a class="el" href="classOzoneLWLSQ.html#a38b03978ad7720fdc910ff6a8b44585f">dcachePort</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>D-cache port. </p>

</div>
</div>
<a class="anchor" id="a95dc31b4ce3ebcb6b9d75a510b3a128c"></a><!-- doxytag: member="OzoneLWLSQ::isLoadBlocked" ref="a95dc31b4ce3ebcb6b9d75a510b3a128c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classOzoneLWLSQ.html#a95dc31b4ce3ebcb6b9d75a510b3a128c">isLoadBlocked</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Whether or not a load is blocked due to the memory system. It is cleared when this value is checked via <a class="el" href="classOzoneLWLSQ.html#a05c413ba417c6453e99f75d87c958590">loadBlocked()</a>. </p>

</div>
</div>
<a class="anchor" id="a89d931c74b63e0b0e7ad856fe9525ff6"></a><!-- doxytag: member="OzoneLWLSQ::isStoreBlocked" ref="a89d931c74b63e0b0e7ad856fe9525ff6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classOzoneLWLSQ.html#a89d931c74b63e0b0e7ad856fe9525ff6">isStoreBlocked</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Whehter or not a store is blocked due to the memory system. </p>

</div>
</div>
<a class="anchor" id="a8b4696062ef09ab956804a7a99491853"></a><!-- doxytag: member="OzoneLWLSQ::lastDcacheStall" ref="a8b4696062ef09ab956804a7a99491853" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e">Counter</a> <a class="el" href="classOzoneLWLSQ.html#a8b4696062ef09ab956804a7a99491853">lastDcacheStall</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2c1620029c162c7180e523b089e56ed5"></a><!-- doxytag: member="OzoneLWLSQ::loadBlockedHandled" ref="a2c1620029c162c7180e523b089e56ed5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classOzoneLWLSQ.html#a2c1620029c162c7180e523b089e56ed5">loadBlockedHandled</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a7123aa8b10829cc4712dff5454e13978"></a><!-- doxytag: member="OzoneLWLSQ::loadFaultInst" ref="a7123aa8b10829cc4712dff5454e13978" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> <a class="el" href="classOzoneLWLSQ.html#a7123aa8b10829cc4712dff5454e13978">loadFaultInst</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The oldest faulting load instruction. </p>

</div>
</div>
<a class="anchor" id="a6800290ffd43f3207c629be7f2d6228f"></a><!-- doxytag: member="OzoneLWLSQ::loadQueue" ref="a6800290ffd43f3207c629be7f2d6228f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1list.html">std::list</a>&lt;<a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>&gt; <a class="el" href="classOzoneLWLSQ.html#a6800290ffd43f3207c629be7f2d6228f">loadQueue</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The load queue. </p>

</div>
</div>
<a class="anchor" id="a867971f18e464abd16193e069c64a8ad"></a><!-- doxytag: member="OzoneLWLSQ::loads" ref="a867971f18e464abd16193e069c64a8ad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classOzoneLWLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The number of load instructions in the LQ. </p>

</div>
</div>
<a class="anchor" id="aafa99d800d574095881acbacdbbbcc47"></a><!-- doxytag: member="OzoneLWLSQ::LQEntries" ref="aafa99d800d574095881acbacdbbbcc47" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classOzoneLWLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The number of LQ entries. </p>

</div>
</div>
<a class="anchor" id="a78218da891879fae16fe75c73981f75f"></a><!-- doxytag: member="OzoneLWLSQ::LQIndices" ref="a78218da891879fae16fe75c73981f75f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::queue&lt;int&gt; <a class="el" href="classOzoneLWLSQ.html#a78218da891879fae16fe75c73981f75f">LQIndices</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="afd55cfcf685cda7dafc7c52d5105e129"></a><!-- doxytag: member="OzoneLWLSQ::LQItHash" ref="afd55cfcf685cda7dafc7c52d5105e129" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">m5::hash_map&lt;int, <a class="el" href="classOzoneLWLSQ.html#a363c8c15e054d23b34f72063429933b8">LQIt</a>, <a class="el" href="structOzoneLWLSQ_1_1HashFn.html">HashFn</a>&gt; <a class="el" href="classOzoneLWLSQ.html#afd55cfcf685cda7dafc7c52d5105e129">LQItHash</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="adfd96fbbaa327a31d20f0d4134418fad"></a><!-- doxytag: member="OzoneLWLSQ::lsqID" ref="adfd96fbbaa327a31d20f0d4134418fad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classOzoneLWLSQ.html#adfd96fbbaa327a31d20f0d4134418fad">lsqID</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The <a class="el" href="classOzoneLWLSQ.html">OzoneLWLSQ</a> thread id. </p>

</div>
</div>
<a class="anchor" id="ac499fc2b461e03a110deae7c695f75bc"></a><!-- doxytag: member="OzoneLWLSQ::lsqMemOrderViolation" ref="ac499fc2b461e03a110deae7c695f75bc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classOzoneLWLSQ.html#ac499fc2b461e03a110deae7c695f75bc">lsqMemOrderViolation</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Tota number of memory ordering violations. </p>

</div>
</div>
<a class="anchor" id="a270a20c3fa52139e0538288275db9d22"></a><!-- doxytag: member="OzoneLWLSQ::memDepViolator" ref="a270a20c3fa52139e0538288275db9d22" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> <a class="el" href="classOzoneLWLSQ.html#a270a20c3fa52139e0538288275db9d22">memDepViolator</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The oldest load that caused a memory ordering violation. </p>

</div>
</div>
<a class="anchor" id="a314ae93c04b3ca96e79e1b1f39a8e478"></a><!-- doxytag: member="OzoneLWLSQ::retryPkt" ref="a314ae93c04b3ca96e79e1b1f39a8e478" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPacket.html">PacketPtr</a> <a class="el" href="classOzoneLWLSQ.html#a314ae93c04b3ca96e79e1b1f39a8e478">retryPkt</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The packet that needs to be retried. </p>

</div>
</div>
<a class="anchor" id="a38c8af5392da70119dc5cce4e3637cbc"></a><!-- doxytag: member="OzoneLWLSQ::SQEntries" ref="a38c8af5392da70119dc5cce4e3637cbc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classOzoneLWLSQ.html#a38c8af5392da70119dc5cce4e3637cbc">SQEntries</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The number of SQ entries. </p>

</div>
</div>
<a class="anchor" id="a94838aca72c880423d2328ae17f065e6"></a><!-- doxytag: member="OzoneLWLSQ::SQIndices" ref="a94838aca72c880423d2328ae17f065e6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::queue&lt;int&gt; <a class="el" href="classOzoneLWLSQ.html#a94838aca72c880423d2328ae17f065e6">SQIndices</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3eb9bc9d55fde5b98e8d28a220d247f6"></a><!-- doxytag: member="OzoneLWLSQ::SQItHash" ref="a3eb9bc9d55fde5b98e8d28a220d247f6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">m5::hash_map&lt;int, <a class="el" href="classOzoneLWLSQ.html#a3b2dd16f487adc977c43201cd7f51558">SQIt</a>, <a class="el" href="structOzoneLWLSQ_1_1HashFn.html">HashFn</a>&gt; <a class="el" href="classOzoneLWLSQ.html#a3eb9bc9d55fde5b98e8d28a220d247f6">SQItHash</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a6f8bff553ad30865c7d0c62e05421eb8"></a><!-- doxytag: member="OzoneLWLSQ::stalled" ref="a6f8bff553ad30865c7d0c62e05421eb8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classOzoneLWLSQ.html#a6f8bff553ad30865c7d0c62e05421eb8">stalled</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Whether or not the <a class="el" href="classLSQ.html">LSQ</a> is stalled. </p>

</div>
</div>
<a class="anchor" id="a567a64b358df6ae6162124cfe4d00db3"></a><!-- doxytag: member="OzoneLWLSQ::stallingLoad" ref="a567a64b358df6ae6162124cfe4d00db3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOzoneLWLSQ.html#a363c8c15e054d23b34f72063429933b8">LQIt</a> <a class="el" href="classOzoneLWLSQ.html#a567a64b358df6ae6162124cfe4d00db3">stallingLoad</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The index of the above store. </p>

</div>
</div>
<a class="anchor" id="afe1cdcfca6b44c28581d862228adc3da"></a><!-- doxytag: member="OzoneLWLSQ::stallingStoreIsn" ref="afe1cdcfca6b44c28581d862228adc3da" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> <a class="el" href="classOzoneLWLSQ.html#afe1cdcfca6b44c28581d862228adc3da">stallingStoreIsn</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The store that causes the stall due to partial store to load forwarding. </p>

</div>
</div>
<a class="anchor" id="ab98cf7d5235b7402e8916e78569f4ab2"></a><!-- doxytag: member="OzoneLWLSQ::storeFaultInst" ref="ab98cf7d5235b7402e8916e78569f4ab2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOzoneLWLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> <a class="el" href="classOzoneLWLSQ.html#ab98cf7d5235b7402e8916e78569f4ab2">storeFaultInst</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The oldest faulting store instruction. </p>

</div>
</div>
<a class="anchor" id="aadda2adf789b0c8a3eb952ac5d65d4ed"></a><!-- doxytag: member="OzoneLWLSQ::storeQueue" ref="aadda2adf789b0c8a3eb952ac5d65d4ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1list.html">std::list</a>&lt;<a class="el" href="structOzoneLWLSQ_1_1SQEntry.html">SQEntry</a>&gt; <a class="el" href="classOzoneLWLSQ.html#aadda2adf789b0c8a3eb952ac5d65d4ed">storeQueue</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The store queue. </p>

</div>
</div>
<a class="anchor" id="ade9e895aa9c5ace27779c985c4f43326"></a><!-- doxytag: member="OzoneLWLSQ::stores" ref="ade9e895aa9c5ace27779c985c4f43326" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classOzoneLWLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The number of store instructions in the SQ (excludes those waiting to writeback). </p>

</div>
</div>
<a class="anchor" id="a04638dcfe9b4f8584453bb178bd2da5e"></a><!-- doxytag: member="OzoneLWLSQ::storesInFlight" ref="a04638dcfe9b4f8584453bb178bd2da5e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classOzoneLWLSQ.html#a04638dcfe9b4f8584453bb178bd2da5e">storesInFlight</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3831a7965ffbe90df177026988476f9c"></a><!-- doxytag: member="OzoneLWLSQ::storesToWB" ref="a3831a7965ffbe90df177026988476f9c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classOzoneLWLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1aee6db9bfb75cf02e38a82e5d02847f"></a><!-- doxytag: member="OzoneLWLSQ::switchedOut" ref="a1aee6db9bfb75cf02e38a82e5d02847f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classOzoneLWLSQ.html#a1aee6db9bfb75cf02e38a82e5d02847f">switchedOut</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a03435d626b7567ed154de5d7d8c3d419"></a><!-- doxytag: member="OzoneLWLSQ::usedPorts" ref="a03435d626b7567ed154de5d7d8c3d419" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classOzoneLWLSQ.html#a03435d626b7567ed154de5d7d8c3d419">usedPorts</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The number of used cache ports in this cycle. </p>

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>cpu/ozone/<a class="el" href="lw__lsq_8hh_source.html">lw_lsq.hh</a></li>
<li>cpu/ozone/<a class="el" href="lw__lsq__impl_8hh_source.html">lw_lsq_impl.hh</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
