\hypertarget{classResourceSked}{
\section{クラス ResourceSked}
\label{classResourceSked}\index{ResourceSked@{ResourceSked}}
}


{\ttfamily \#include $<$resource\_\-sked.hh$>$}\subsection*{Public 型}
\begin{DoxyCompactItemize}
\item 
typedef \hyperlink{classstd_1_1list}{std::list}$<$ \hyperlink{classScheduleEntry}{ScheduleEntry} $\ast$ $>$::iterator \hyperlink{classResourceSked_ab2a9eec675af76477619cacd99ea5225}{SkedIt}
\item 
typedef \hyperlink{classstd_1_1vector}{std::vector}$<$ \hyperlink{classstd_1_1list}{std::list}$<$ \hyperlink{classScheduleEntry}{ScheduleEntry} $\ast$ $>$ $>$ \hyperlink{classResourceSked_acd54846efdfb59f7183a9ecc11ebdbdb}{StageList}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classResourceSked_aaaf7785027bb745b7d1e41dd0da8767a}{ResourceSked} ()
\item 
void \hyperlink{classResourceSked_a02fd73d861ef2e4aabb38c0c9ff82947}{init} ()
\item 
int \hyperlink{classResourceSked_af4b57d21919c42d55af03391f91a1c08}{size} ()
\item 
bool \hyperlink{classResourceSked_a3f37b042a1e7cd4bd38fc564de81f0da}{empty} ()
\item 
\hyperlink{classResourceSked_ab2a9eec675af76477619cacd99ea5225}{SkedIt} \hyperlink{classResourceSked_a7227fc077388658a1be7f6cae404798b}{begin} ()
\item 
\hyperlink{classResourceSked_ab2a9eec675af76477619cacd99ea5225}{SkedIt} \hyperlink{classResourceSked_a4143a7b8e61054ec5afbaf95b11997a3}{end} ()
\item 
\hyperlink{classResourceSked_ab2a9eec675af76477619cacd99ea5225}{SkedIt} \hyperlink{classResourceSked_aaf76f72bed236e2d9f89259942adba23}{end} (int stage\_\-num)
\item 
\hyperlink{classResourceSked_ab2a9eec675af76477619cacd99ea5225}{SkedIt} \hyperlink{classResourceSked_aa24faf36fbcfdcc28b6d24a25ba50427}{find} (int stage\_\-num, int cmd)
\item 
\hyperlink{structThePipeline_1_1ScheduleEntry}{ScheduleEntry} $\ast$ \hyperlink{classResourceSked_ade2a2e6ba16898f027e8269832f46da3}{top} ()
\item 
void \hyperlink{classResourceSked_a312e7f6c761a199c1369fbe651e084f0}{pop} ()
\item 
void \hyperlink{classResourceSked_aa963665051eed3db02917334982edc22}{push} (\hyperlink{classScheduleEntry}{ScheduleEntry} $\ast$sked\_\-entry)
\item 
void \hyperlink{classResourceSked_a9284522561e5c9c0e38d75fd9264374e}{pushBefore} (\hyperlink{classScheduleEntry}{ScheduleEntry} $\ast$sked\_\-entry, int sked\_\-cmd, int sked\_\-cmd\_\-idx)
\item 
void \hyperlink{classResourceSked_a388f572c62279f839ee138a9afbdeeb5}{print} ()
\item 
\hyperlink{classstd_1_1vector}{StageList} $\ast$ \hyperlink{classResourceSked_acea7e9a7691586cc080fd9872992fd61}{getStages} ()
\end{DoxyCompactItemize}
\subsection*{Private メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classResourceSked_ab2a9eec675af76477619cacd99ea5225}{SkedIt} \hyperlink{classResourceSked_ae8e8d099790bc4d1c165f44c4cc031e3}{findIterByPriority} (\hyperlink{classScheduleEntry}{ScheduleEntry} $\ast$sked\_\-entry, int stage\_\-num)
\item 
\hyperlink{classResourceSked_ab2a9eec675af76477619cacd99ea5225}{SkedIt} \hyperlink{classResourceSked_a0227e29ef6102c3bf012bd8ef5b53b88}{findIterByCommand} (\hyperlink{classScheduleEntry}{ScheduleEntry} $\ast$sked\_\-entry, int stage\_\-num, int sked\_\-cmd, int sked\_\-cmd\_\-idx=-\/1)
\end{DoxyCompactItemize}
\subsection*{Private 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classResourceSked_ab2a9eec675af76477619cacd99ea5225}{SkedIt} \hyperlink{classResourceSked_a776f518c901720e43d62f12f8d1cad70}{curSkedEntry}
\item 
\hyperlink{classstd_1_1vector}{StageList} \hyperlink{classResourceSked_aacb3efd7714ef0cabf149e417086ad56}{stages}
\end{DoxyCompactItemize}


\subsection{説明}
The \hyperlink{classResourceSked}{ResourceSked} maintains the complete schedule for an instruction. That schedule includes what resources an instruction wants to acquire at each pipeline stage and is represented by a collection of \hyperlink{classScheduleEntry}{ScheduleEntry} objects (described above) that must be executed in-\/order.

In every pipeline stage, the InOrder model will process all entries on the resource schedule for that stage and then send the instruction to the next stage if and only if the instruction successfully completed each \hyperlink{classScheduleEntry}{ScheduleEntry}. 

\subsection{型定義}
\hypertarget{classResourceSked_ab2a9eec675af76477619cacd99ea5225}{
\index{ResourceSked@{ResourceSked}!SkedIt@{SkedIt}}
\index{SkedIt@{SkedIt}!ResourceSked@{ResourceSked}}
\subsubsection[{SkedIt}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf std::list}$<${\bf ScheduleEntry}$\ast$$>$::iterator {\bf SkedIt}}}
\label{classResourceSked_ab2a9eec675af76477619cacd99ea5225}
\hypertarget{classResourceSked_acd54846efdfb59f7183a9ecc11ebdbdb}{
\index{ResourceSked@{ResourceSked}!StageList@{StageList}}
\index{StageList@{StageList}!ResourceSked@{ResourceSked}}
\subsubsection[{StageList}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf std::vector}$<${\bf std::list}$<${\bf ScheduleEntry}$\ast$$>$ $>$ {\bf StageList}}}
\label{classResourceSked_acd54846efdfb59f7183a9ecc11ebdbdb}


\subsection{コンストラクタとデストラクタ}
\hypertarget{classResourceSked_aaaf7785027bb745b7d1e41dd0da8767a}{
\index{ResourceSked@{ResourceSked}!ResourceSked@{ResourceSked}}
\index{ResourceSked@{ResourceSked}!ResourceSked@{ResourceSked}}
\subsubsection[{ResourceSked}]{\setlength{\rightskip}{0pt plus 5cm}{\bf ResourceSked} ()}}
\label{classResourceSked_aaaf7785027bb745b7d1e41dd0da8767a}



\begin{DoxyCode}
44 {
45     stages.resize(NumStages);
46 }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classResourceSked_a7227fc077388658a1be7f6cae404798b}{
\index{ResourceSked@{ResourceSked}!begin@{begin}}
\index{begin@{begin}!ResourceSked@{ResourceSked}}
\subsubsection[{begin}]{\setlength{\rightskip}{0pt plus 5cm}{\bf ResourceSked::SkedIt} begin ()}}
\label{classResourceSked_a7227fc077388658a1be7f6cae404798b}
Beginning Entry of this schedule 


\begin{DoxyCode}
76 {
77     int num_stages = stages.size();
78     for (int i = 0; i < num_stages; i++) {
79         if (stages[i].size() > 0)
80             return stages[i].begin();
81     }
82 
83     return stages[num_stages - 1].end();
84 }
\end{DoxyCode}
\hypertarget{classResourceSked_a3f37b042a1e7cd4bd38fc564de81f0da}{
\index{ResourceSked@{ResourceSked}!empty@{empty}}
\index{empty@{empty}!ResourceSked@{ResourceSked}}
\subsubsection[{empty}]{\setlength{\rightskip}{0pt plus 5cm}bool empty ()}}
\label{classResourceSked_a3f37b042a1e7cd4bd38fc564de81f0da}
Is the schedule empty? 


\begin{DoxyCode}
69 {
70     return size() == 0;
71 }
\end{DoxyCode}
\hypertarget{classResourceSked_aaf76f72bed236e2d9f89259942adba23}{
\index{ResourceSked@{ResourceSked}!end@{end}}
\index{end@{end}!ResourceSked@{ResourceSked}}
\subsubsection[{end}]{\setlength{\rightskip}{0pt plus 5cm}{\bf ResourceSked::SkedIt} end (int {\em stage\_\-num})}}
\label{classResourceSked_aaf76f72bed236e2d9f89259942adba23}
Ending Entry of a specified stage 


\begin{DoxyCode}
95 {
96     return stages[stage_num].end();
97 }
\end{DoxyCode}
\hypertarget{classResourceSked_a4143a7b8e61054ec5afbaf95b11997a3}{
\index{ResourceSked@{ResourceSked}!end@{end}}
\index{end@{end}!ResourceSked@{ResourceSked}}
\subsubsection[{end}]{\setlength{\rightskip}{0pt plus 5cm}{\bf ResourceSked::SkedIt} end ()}}
\label{classResourceSked_a4143a7b8e61054ec5afbaf95b11997a3}
Ending Entry of this schedule 


\begin{DoxyCode}
88 {
89     int num_stages = stages.size();
90     return stages[num_stages - 1].end();
91 }
\end{DoxyCode}
\hypertarget{classResourceSked_aa24faf36fbcfdcc28b6d24a25ba50427}{
\index{ResourceSked@{ResourceSked}!find@{find}}
\index{find@{find}!ResourceSked@{ResourceSked}}
\subsubsection[{find}]{\setlength{\rightskip}{0pt plus 5cm}{\bf ResourceSked::SkedIt} find (int {\em stage\_\-num}, \/  int {\em cmd})}}
\label{classResourceSked_aa24faf36fbcfdcc28b6d24a25ba50427}
Find a schedule entry based on stage and command 


\begin{DoxyCode}
101 {
102     SkedIt stage_it = stages[stage_num].begin();
103     SkedIt stage_end = stages[stage_num].end();
104 
105     while (stage_it != stage_end) {
106         if ((*stage_it)->cmd == cmd)
107             return stage_it;
108         stage_it++;
109     }
110 
111     return stages[stage_num].end();
112 }
\end{DoxyCode}
\hypertarget{classResourceSked_a0227e29ef6102c3bf012bd8ef5b53b88}{
\index{ResourceSked@{ResourceSked}!findIterByCommand@{findIterByCommand}}
\index{findIterByCommand@{findIterByCommand}!ResourceSked@{ResourceSked}}
\subsubsection[{findIterByCommand}]{\setlength{\rightskip}{0pt plus 5cm}{\bf SkedIt} findIterByCommand ({\bf ScheduleEntry} $\ast$ {\em sked\_\-entry}, \/  int {\em stage\_\-num}, \/  int {\em sked\_\-cmd}, \/  int {\em sked\_\-cmd\_\-idx} = {\ttfamily -\/1})\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classResourceSked_a0227e29ef6102c3bf012bd8ef5b53b88}
Find a place to insert the instruction using a particular command to look for. \hypertarget{classResourceSked_ae8e8d099790bc4d1c165f44c4cc031e3}{
\index{ResourceSked@{ResourceSked}!findIterByPriority@{findIterByPriority}}
\index{findIterByPriority@{findIterByPriority}!ResourceSked@{ResourceSked}}
\subsubsection[{findIterByPriority}]{\setlength{\rightskip}{0pt plus 5cm}{\bf SkedIt} findIterByPriority ({\bf ScheduleEntry} $\ast$ {\em sked\_\-entry}, \/  int {\em stage\_\-num})\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classResourceSked_ae8e8d099790bc4d1c165f44c4cc031e3}
Find a place to insert the instruction using the schedule entries priority \hypertarget{classResourceSked_acea7e9a7691586cc080fd9872992fd61}{
\index{ResourceSked@{ResourceSked}!getStages@{getStages}}
\index{getStages@{getStages}!ResourceSked@{ResourceSked}}
\subsubsection[{getStages}]{\setlength{\rightskip}{0pt plus 5cm}{\bf StageList}$\ast$ getStages ()\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classResourceSked_acea7e9a7691586cc080fd9872992fd61}



\begin{DoxyCode}
138     {
139         return &stages;
140     }
\end{DoxyCode}
\hypertarget{classResourceSked_a02fd73d861ef2e4aabb38c0c9ff82947}{
\index{ResourceSked@{ResourceSked}!init@{init}}
\index{init@{init}!ResourceSked@{ResourceSked}}
\subsubsection[{init}]{\setlength{\rightskip}{0pt plus 5cm}void init ()}}
\label{classResourceSked_a02fd73d861ef2e4aabb38c0c9ff82947}
Initializee the current entry pointer to pipeline stage 0 and the 1st schedule entry 


\begin{DoxyCode}
50 {
51     assert(!stages[0].empty());
52 
53     curSkedEntry = stages[0].begin();
54 }
\end{DoxyCode}
\hypertarget{classResourceSked_a312e7f6c761a199c1369fbe651e084f0}{
\index{ResourceSked@{ResourceSked}!pop@{pop}}
\index{pop@{pop}!ResourceSked@{ResourceSked}}
\subsubsection[{pop}]{\setlength{\rightskip}{0pt plus 5cm}void pop ()}}
\label{classResourceSked_a312e7f6c761a199c1369fbe651e084f0}
Top() Task is completed, remove it from schedule 


\begin{DoxyCode}
124 {
125     int stage_num = (*curSkedEntry)->stageNum;
126 
127     stages[stage_num].erase(curSkedEntry);
128 
129     if (!stages[stage_num].empty()) {
130         curSkedEntry = stages[stage_num].begin();
131     } else {
132         int next_stage = stage_num + 1;
133 
134         while (next_stage < NumStages) {
135             if (stages[next_stage].empty()) {
136                 next_stage++;
137             } else {
138                 curSkedEntry = stages[next_stage].begin();
139                 break;
140             }
141         }
142     }
143 }
\end{DoxyCode}
\hypertarget{classResourceSked_a388f572c62279f839ee138a9afbdeeb5}{
\index{ResourceSked@{ResourceSked}!print@{print}}
\index{print@{print}!ResourceSked@{ResourceSked}}
\subsubsection[{print}]{\setlength{\rightskip}{0pt plus 5cm}void print ()}}
\label{classResourceSked_a388f572c62279f839ee138a9afbdeeb5}
Print what's left on the instruction schedule 


\begin{DoxyCode}
219 {
220     for (int i = 0; i < stages.size(); i++) {
221         //ccprintf(cerr, "Stage %i\n====\n", i);
222         SkedIt sked_it = stages[i].begin();
223         SkedIt sked_end = stages[i].end();
224         while (sked_it != sked_end) {
225             DPRINTF(SkedCache, "\t stage:%i res:%i cmd:%i idx:%i\n",
226                     (*sked_it)->stageNum,
227                     (*sked_it)->resNum,
228                     (*sked_it)->cmd,
229                     (*sked_it)->idx);
230             sked_it++;
231         }
232     }
233 }
\end{DoxyCode}
\hypertarget{classResourceSked_aa963665051eed3db02917334982edc22}{
\index{ResourceSked@{ResourceSked}!push@{push}}
\index{push@{push}!ResourceSked@{ResourceSked}}
\subsubsection[{push}]{\setlength{\rightskip}{0pt plus 5cm}void push ({\bf ScheduleEntry} $\ast$ {\em sked\_\-entry})}}
\label{classResourceSked_aa963665051eed3db02917334982edc22}
Add To Schedule based on stage num and priority of Schedule Entry \hypertarget{classResourceSked_a9284522561e5c9c0e38d75fd9264374e}{
\index{ResourceSked@{ResourceSked}!pushBefore@{pushBefore}}
\index{pushBefore@{pushBefore}!ResourceSked@{ResourceSked}}
\subsubsection[{pushBefore}]{\setlength{\rightskip}{0pt plus 5cm}void pushBefore ({\bf ScheduleEntry} $\ast$ {\em sked\_\-entry}, \/  int {\em sked\_\-cmd}, \/  int {\em sked\_\-cmd\_\-idx})}}
\label{classResourceSked_a9284522561e5c9c0e38d75fd9264374e}
Add Schedule Entry to be in front of another Entry \hypertarget{classResourceSked_af4b57d21919c42d55af03391f91a1c08}{
\index{ResourceSked@{ResourceSked}!size@{size}}
\index{size@{size}!ResourceSked@{ResourceSked}}
\subsubsection[{size}]{\setlength{\rightskip}{0pt plus 5cm}int size ()}}
\label{classResourceSked_af4b57d21919c42d55af03391f91a1c08}
Goes through the remaining stages on the schedule and sums all the remaining entries left to be processed 


\begin{DoxyCode}
58 {
59     int total = 0;
60     for (int i = 0; i < stages.size(); i++) {
61         total += stages[i].size();
62     }
63 
64     return total;
65 }
\end{DoxyCode}
\hypertarget{classResourceSked_ade2a2e6ba16898f027e8269832f46da3}{
\index{ResourceSked@{ResourceSked}!top@{top}}
\index{top@{top}!ResourceSked@{ResourceSked}}
\subsubsection[{top}]{\setlength{\rightskip}{0pt plus 5cm}{\bf ScheduleEntry} $\ast$ top ()}}
\label{classResourceSked_ade2a2e6ba16898f027e8269832f46da3}
What is the next task for this instruction schedule? 


\begin{DoxyCode}
116 {
117     assert(size() > 0);
118 
119     return *curSkedEntry;
120 }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classResourceSked_a776f518c901720e43d62f12f8d1cad70}{
\index{ResourceSked@{ResourceSked}!curSkedEntry@{curSkedEntry}}
\index{curSkedEntry@{curSkedEntry}!ResourceSked@{ResourceSked}}
\subsubsection[{curSkedEntry}]{\setlength{\rightskip}{0pt plus 5cm}{\bf SkedIt} {\bf curSkedEntry}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classResourceSked_a776f518c901720e43d62f12f8d1cad70}
Current Schedule Entry Pointer \hypertarget{classResourceSked_aacb3efd7714ef0cabf149e417086ad56}{
\index{ResourceSked@{ResourceSked}!stages@{stages}}
\index{stages@{stages}!ResourceSked@{ResourceSked}}
\subsubsection[{stages}]{\setlength{\rightskip}{0pt plus 5cm}{\bf StageList} {\bf stages}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classResourceSked_aacb3efd7714ef0cabf149e417086ad56}
The Stage-\/by-\/Stage \hyperlink{classResource}{Resource} Schedule: Resized to Number of Stages in the constructor 

このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
cpu/inorder/\hyperlink{resource__sked_8hh}{resource\_\-sked.hh}\item 
cpu/inorder/\hyperlink{resource__sked_8cc}{resource\_\-sked.cc}\end{DoxyCompactItemize}
