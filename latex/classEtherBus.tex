\hypertarget{classEtherBus}{
\section{クラス EtherBus}
\label{classEtherBus}\index{EtherBus@{EtherBus}}
}


{\ttfamily \#include $<$etherbus.hh$>$}EtherBusに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=4cm]{classEtherBus}
\end{center}
\end{figure}
\subsection*{構成}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classEtherBus_1_1DoneEvent}{DoneEvent}
\end{DoxyCompactItemize}
\subsection*{Public 型}
\begin{DoxyCompactItemize}
\item 
typedef EtherBusParams \hyperlink{classEtherBus_af0984f6bd7717c1679765dfdacae4ddd}{Params}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classEtherBus_ab73501ab17a42dc39bad5da11f6e490a}{EtherBus} (const \hyperlink{classEtherBus_af0984f6bd7717c1679765dfdacae4ddd}{Params} $\ast$p)
\item 
virtual \hyperlink{classEtherBus_a05588250081fe8f1dba9e46b0ac85da5}{$\sim$EtherBus} ()
\item 
const \hyperlink{classEtherBus_af0984f6bd7717c1679765dfdacae4ddd}{Params} $\ast$ \hyperlink{classEtherBus_acd3c3feb78ae7a8f88fe0f110a718dff}{params} () const 
\item 
void \hyperlink{classEtherBus_ac06188e141ad966d9d760cfcfc258587}{txDone} ()
\item 
void \hyperlink{classEtherBus_a97ce707445b2b82e64a1cd5a981d5ad5}{reg} (\hyperlink{classEtherInt}{EtherInt} $\ast$dev)
\item 
bool \hyperlink{classEtherBus_ab4dfde754c39017408feef7294770646}{busy} () const 
\item 
bool \hyperlink{classEtherBus_af0ac5d7bc5c392555ef3176bd27292f4}{send} (\hyperlink{classEtherInt}{EtherInt} $\ast$\hyperlink{classEtherBus_a748042e0d79456e5d2ec45a85392b06c}{sender}, \hyperlink{classRefCountingPtr}{EthPacketPtr} \&\hyperlink{classEtherBus_a8bd0d3f7eb9e8d7189c7027028a5fac0}{packet})
\item 
virtual \hyperlink{classEtherInt}{EtherInt} $\ast$ \hyperlink{classEtherBus_a10260c5a583c0894dcdcd1ced50a53ae}{getEthPort} (const std::string \&if\_\-name, int idx)
\end{DoxyCompactItemize}
\subsection*{Protected 型}
\begin{DoxyCompactItemize}
\item 
typedef \hyperlink{classstd_1_1list}{std::list}$<$ \hyperlink{classEtherInt}{EtherInt} $\ast$ $>$ \hyperlink{classEtherBus_aa7b4b8d9a39bc67842b5c47e1b2a1b19}{devlist\_\-t}
\end{DoxyCompactItemize}
\subsection*{Protected 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classstd_1_1list}{devlist\_\-t} \hyperlink{classEtherBus_a2fac447706dd3bd8d783a380065b144b}{devlist}
\item 
double \hyperlink{classEtherBus_ab03ddf4a7f12da61f07e2e0c644ef06c}{ticksPerByte}
\item 
bool \hyperlink{classEtherBus_a3ea0b2f2695b0c84cd8495484456a58e}{loopback}
\item 
\hyperlink{classEtherBus_1_1DoneEvent}{DoneEvent} \hyperlink{classEtherBus_aa53a666ea226afe0aba62ffc48fda9a8}{event}
\item 
\hyperlink{classRefCountingPtr}{EthPacketPtr} \hyperlink{classEtherBus_a8bd0d3f7eb9e8d7189c7027028a5fac0}{packet}
\item 
\hyperlink{classEtherInt}{EtherInt} $\ast$ \hyperlink{classEtherBus_a748042e0d79456e5d2ec45a85392b06c}{sender}
\item 
\hyperlink{classEtherDump}{EtherDump} $\ast$ \hyperlink{classEtherBus_ad5a0f1baca11c9598fdb6996bd03ac8c}{dump}
\end{DoxyCompactItemize}


\subsection{型定義}
\hypertarget{classEtherBus_aa7b4b8d9a39bc67842b5c47e1b2a1b19}{
\index{EtherBus@{EtherBus}!devlist\_\-t@{devlist\_\-t}}
\index{devlist\_\-t@{devlist\_\-t}!EtherBus@{EtherBus}}
\subsubsection[{devlist\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf std::list}$<${\bf EtherInt} $\ast$$>$ {\bf devlist\_\-t}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classEtherBus_aa7b4b8d9a39bc67842b5c47e1b2a1b19}
\hypertarget{classEtherBus_af0984f6bd7717c1679765dfdacae4ddd}{
\index{EtherBus@{EtherBus}!Params@{Params}}
\index{Params@{Params}!EtherBus@{EtherBus}}
\subsubsection[{Params}]{\setlength{\rightskip}{0pt plus 5cm}typedef EtherBusParams {\bf Params}}}
\label{classEtherBus_af0984f6bd7717c1679765dfdacae4ddd}


\hyperlink{classEtherObject_a47be5a25ff75cbf22f60f87dde950e13}{EtherObject}を再定義しています。

\subsection{コンストラクタとデストラクタ}
\hypertarget{classEtherBus_ab73501ab17a42dc39bad5da11f6e490a}{
\index{EtherBus@{EtherBus}!EtherBus@{EtherBus}}
\index{EtherBus@{EtherBus}!EtherBus@{EtherBus}}
\subsubsection[{EtherBus}]{\setlength{\rightskip}{0pt plus 5cm}{\bf EtherBus} (const {\bf Params} $\ast$ {\em p})}}
\label{classEtherBus_ab73501ab17a42dc39bad5da11f6e490a}



\begin{DoxyCode}
53     : EtherObject(p), ticksPerByte(p->speed), loopback(p->loopback),
54       event(this), sender(0), dump(p->dump)
55 {
56 }
\end{DoxyCode}
\hypertarget{classEtherBus_a05588250081fe8f1dba9e46b0ac85da5}{
\index{EtherBus@{EtherBus}!$\sim$EtherBus@{$\sim$EtherBus}}
\index{$\sim$EtherBus@{$\sim$EtherBus}!EtherBus@{EtherBus}}
\subsubsection[{$\sim$EtherBus}]{\setlength{\rightskip}{0pt plus 5cm}virtual $\sim${\bf EtherBus} ()\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}
\label{classEtherBus_a05588250081fe8f1dba9e46b0ac85da5}



\begin{DoxyCode}
75 {}
\end{DoxyCode}


\subsection{関数}
\hypertarget{classEtherBus_ab4dfde754c39017408feef7294770646}{
\index{EtherBus@{EtherBus}!busy@{busy}}
\index{busy@{busy}!EtherBus@{EtherBus}}
\subsubsection[{busy}]{\setlength{\rightskip}{0pt plus 5cm}bool busy () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classEtherBus_ab4dfde754c39017408feef7294770646}



\begin{DoxyCode}
85 { return (bool)packet; }
\end{DoxyCode}
\hypertarget{classEtherBus_a10260c5a583c0894dcdcd1ced50a53ae}{
\index{EtherBus@{EtherBus}!getEthPort@{getEthPort}}
\index{getEthPort@{getEthPort}!EtherBus@{EtherBus}}
\subsubsection[{getEthPort}]{\setlength{\rightskip}{0pt plus 5cm}{\bf EtherInt} $\ast$ getEthPort (const std::string \& {\em if\_\-name}, \/  int {\em idx})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classEtherBus_a10260c5a583c0894dcdcd1ced50a53ae}
Additional function to return the \hyperlink{classPort}{Port} of a memory object. 

\hyperlink{classEtherObject_ac1aa24c1f8c0f1ee8bdc3f3d3799f67c}{EtherObject}を実装しています。


\begin{DoxyCode}
84 {
85     panic("Etherbus doesn't work\n");
86 }
\end{DoxyCode}
\hypertarget{classEtherBus_acd3c3feb78ae7a8f88fe0f110a718dff}{
\index{EtherBus@{EtherBus}!params@{params}}
\index{params@{params}!EtherBus@{EtherBus}}
\subsubsection[{params}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Params}$\ast$ params () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classEtherBus_acd3c3feb78ae7a8f88fe0f110a718dff}


\hyperlink{classEtherObject_acd3c3feb78ae7a8f88fe0f110a718dff}{EtherObject}を再定義しています。


\begin{DoxyCode}
79     {
80         return dynamic_cast<const Params *>(_params);
81     }
\end{DoxyCode}
\hypertarget{classEtherBus_a97ce707445b2b82e64a1cd5a981d5ad5}{
\index{EtherBus@{EtherBus}!reg@{reg}}
\index{reg@{reg}!EtherBus@{EtherBus}}
\subsubsection[{reg}]{\setlength{\rightskip}{0pt plus 5cm}void reg ({\bf EtherInt} $\ast$ {\em dev})}}
\label{classEtherBus_a97ce707445b2b82e64a1cd5a981d5ad5}
\hypertarget{classEtherBus_af0ac5d7bc5c392555ef3176bd27292f4}{
\index{EtherBus@{EtherBus}!send@{send}}
\index{send@{send}!EtherBus@{EtherBus}}
\subsubsection[{send}]{\setlength{\rightskip}{0pt plus 5cm}bool send ({\bf EtherInt} $\ast$ {\em sender}, \/  {\bf EthPacketPtr} \& {\em packet})}}
\label{classEtherBus_af0ac5d7bc5c392555ef3176bd27292f4}



\begin{DoxyCode}
90 {
91     if (busy()) {
92         DPRINTF(Ethernet, "ethernet packet not sent, bus busy\n", curTick());
93         return false;
94     }
95 
96     DPRINTF(Ethernet, "ethernet packet sent: length=%d\n", pkt->length);
97     DDUMP(EthernetData, pkt->data, pkt->length);
98 
99     packet = pkt;
100     sender = sndr;
101     int delay = (int)ceil(((double)pkt->length * ticksPerByte) + 1.0);
102     DPRINTF(Ethernet, "scheduling packet: delay=%d, (rate=%f)\n",
103             delay, ticksPerByte);
104     schedule(event, curTick() + delay);
105 
106     return true;
107 }
\end{DoxyCode}
\hypertarget{classEtherBus_ac06188e141ad966d9d760cfcfc258587}{
\index{EtherBus@{EtherBus}!txDone@{txDone}}
\index{txDone@{txDone}!EtherBus@{EtherBus}}
\subsubsection[{txDone}]{\setlength{\rightskip}{0pt plus 5cm}void txDone ()}}
\label{classEtherBus_ac06188e141ad966d9d760cfcfc258587}



\begin{DoxyCode}
60 {
61     devlist_t::iterator i = devlist.begin();
62     devlist_t::iterator end = devlist.end();
63 
64     DPRINTF(Ethernet, "ethernet packet received: length=%d\n", packet->length);
65     DDUMP(EthernetData, packet->data, packet->length);
66 
67     while (i != end) {
68         if (loopback || *i != sender)
69             (*i)->sendPacket(packet);
70         ++i;
71     }
72 
73     sender->sendDone();
74 
75     if (dump)
76         dump->dump(packet);
77 
78     sender = 0;
79     packet = 0;
80 }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classEtherBus_a2fac447706dd3bd8d783a380065b144b}{
\index{EtherBus@{EtherBus}!devlist@{devlist}}
\index{devlist@{devlist}!EtherBus@{EtherBus}}
\subsubsection[{devlist}]{\setlength{\rightskip}{0pt plus 5cm}{\bf devlist\_\-t} {\bf devlist}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classEtherBus_a2fac447706dd3bd8d783a380065b144b}
\hypertarget{classEtherBus_ad5a0f1baca11c9598fdb6996bd03ac8c}{
\index{EtherBus@{EtherBus}!dump@{dump}}
\index{dump@{dump}!EtherBus@{EtherBus}}
\subsubsection[{dump}]{\setlength{\rightskip}{0pt plus 5cm}{\bf EtherDump}$\ast$ {\bf dump}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classEtherBus_ad5a0f1baca11c9598fdb6996bd03ac8c}
\hypertarget{classEtherBus_aa53a666ea226afe0aba62ffc48fda9a8}{
\index{EtherBus@{EtherBus}!event@{event}}
\index{event@{event}!EtherBus@{EtherBus}}
\subsubsection[{event}]{\setlength{\rightskip}{0pt plus 5cm}{\bf DoneEvent} {\bf event}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classEtherBus_aa53a666ea226afe0aba62ffc48fda9a8}
\hypertarget{classEtherBus_a3ea0b2f2695b0c84cd8495484456a58e}{
\index{EtherBus@{EtherBus}!loopback@{loopback}}
\index{loopback@{loopback}!EtherBus@{EtherBus}}
\subsubsection[{loopback}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf loopback}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classEtherBus_a3ea0b2f2695b0c84cd8495484456a58e}
\hypertarget{classEtherBus_a8bd0d3f7eb9e8d7189c7027028a5fac0}{
\index{EtherBus@{EtherBus}!packet@{packet}}
\index{packet@{packet}!EtherBus@{EtherBus}}
\subsubsection[{packet}]{\setlength{\rightskip}{0pt plus 5cm}{\bf EthPacketPtr} {\bf packet}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classEtherBus_a8bd0d3f7eb9e8d7189c7027028a5fac0}
\hypertarget{classEtherBus_a748042e0d79456e5d2ec45a85392b06c}{
\index{EtherBus@{EtherBus}!sender@{sender}}
\index{sender@{sender}!EtherBus@{EtherBus}}
\subsubsection[{sender}]{\setlength{\rightskip}{0pt plus 5cm}{\bf EtherInt}$\ast$ {\bf sender}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classEtherBus_a748042e0d79456e5d2ec45a85392b06c}
\hypertarget{classEtherBus_ab03ddf4a7f12da61f07e2e0c644ef06c}{
\index{EtherBus@{EtherBus}!ticksPerByte@{ticksPerByte}}
\index{ticksPerByte@{ticksPerByte}!EtherBus@{EtherBus}}
\subsubsection[{ticksPerByte}]{\setlength{\rightskip}{0pt plus 5cm}double {\bf ticksPerByte}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classEtherBus_ab03ddf4a7f12da61f07e2e0c644ef06c}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
dev/\hyperlink{etherbus_8hh}{etherbus.hh}\item 
dev/\hyperlink{etherbus_8cc}{etherbus.cc}\end{DoxyCompactItemize}
