<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス TraceGen</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>クラス TraceGen</h1><!-- doxytag: class="TraceGen" --><!-- doxytag: inherits="BaseGen" -->
<p><code>#include &lt;<a class="el" href="generators_8hh_source.html">generators.hh</a>&gt;</code></p>
<div class="dynheader">
TraceGenに対する継承グラフ</div>
<div class="dynsection">
 <div class="center">
  <img src="classTraceGen.gif" usemap="#TraceGen_map" alt=""/>
  <map id="TraceGen_map" name="TraceGen_map">
<area href="classBaseGen.html" alt="BaseGen" shape="rect" coords="0,0,68,24"/>
</map>
 </div>
</div>

<p><a href="classTraceGen-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>構成</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraceGen_1_1InputStream.html">InputStream</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structTraceGen_1_1TraceElement.html">TraceElement</a></td></tr>
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraceGen.html#a6c6cce0385b1ab2fd059a9b4ac5ccd5a">TraceGen</a> (const std::string &amp;<a class="el" href="classBaseGen.html#a1b003dc5cfce1a4d8f9a0c4b9b589045">_name</a>, <a class="el" href="request_8hh.html#ac366b729262fd8e7cbd3283da6f775cf">MasterID</a> master_id, <a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> _duration, const std::string &amp;trace_file, <a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> addr_offset)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraceGen.html#a2759dad6560aaf485b16356d7142d69d">enter</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraceGen.html#a938aa9841a9a62a776afbd0768af5379">getNextPacket</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraceGen.html#a358d2e2397ca11ccd17553e3c40e7901">exit</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraceGen.html#a65f805b54c24ac3ce0a37716de3e8abc">nextPacketTick</a> (bool elastic, <a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> delay) const </td></tr>
<tr><td colspan="2"><h2>Private 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTraceGen_1_1InputStream.html">InputStream</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraceGen.html#a5dfbfce0ad4d1bee9295a75fb9f22e67">trace</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structTraceGen_1_1TraceElement.html">TraceElement</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraceGen.html#a9569c34c782ed59f9eabae29d83b3c69">currElement</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structTraceGen_1_1TraceElement.html">TraceElement</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraceGen.html#af75daad6a6b104153bcfc8b0b9738fc1">nextElement</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraceGen.html#a909a0f7344e9c9dc4e84b9db494e3913">tickOffset</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraceGen.html#ab197a601b77c63555474cccf2ba4132c">addrOffset</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraceGen.html#a072f6c8d6720b220445074f5a4c0ceff">traceComplete</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>説明</h2>
<p>The trace replay generator reads a trace file and plays back the transactions. The trace is offset with respect to the time when the state was entered. </p>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="a6c6cce0385b1ab2fd059a9b4ac5ccd5a"></a><!-- doxytag: member="TraceGen::TraceGen" ref="a6c6cce0385b1ab2fd059a9b4ac5ccd5a" args="(const std::string &amp;_name, MasterID master_id, Tick _duration, const std::string &amp;trace_file, Addr addr_offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTraceGen.html">TraceGen</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="request_8hh.html#ac366b729262fd8e7cbd3283da6f775cf">MasterID</a>&nbsp;</td>
          <td class="paramname"> <em>master_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td>
          <td class="paramname"> <em>_duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>trace_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>addr_offset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create a trace generator.</p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>_name</em>&nbsp;</td><td>Name to use for status and debug </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>master_id</em>&nbsp;</td><td>MasterID set on each request </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>_duration</em>&nbsp;</td><td>duration of this state before transitioning </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>trace_file</em>&nbsp;</td><td>File to read the transactions from </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>addr_offset</em>&nbsp;</td><td>Positive offset to add to trace address </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00508"></a>00508         : <a class="code" href="classBaseGen.html#ac9104baf1e55a6b796dbe3d08d9b348c">BaseGen</a>(<a class="code" href="classBaseGen.html#a1b003dc5cfce1a4d8f9a0c4b9b589045">_name</a>, master_id, _duration),
<a name="l00509"></a>00509           <a class="code" href="classTraceGen.html#a5dfbfce0ad4d1bee9295a75fb9f22e67">trace</a>(trace_file),
<a name="l00510"></a>00510           <a class="code" href="classTraceGen.html#a909a0f7344e9c9dc4e84b9db494e3913">tickOffset</a>(0),
<a name="l00511"></a>00511           <a class="code" href="classTraceGen.html#ab197a601b77c63555474cccf2ba4132c">addrOffset</a>(addr_offset),
<a name="l00512"></a>00512           <a class="code" href="classTraceGen.html#a072f6c8d6720b220445074f5a4c0ceff">traceComplete</a>(<span class="keyword">false</span>)
<a name="l00513"></a>00513     {
<a name="l00514"></a>00514     }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="a2759dad6560aaf485b16356d7142d69d"></a><!-- doxytag: member="TraceGen::enter" ref="a2759dad6560aaf485b16356d7142d69d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enter </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Enter this generator state. </p>

<p><a class="el" href="classBaseGen.html#ac51895063c53dfbc0f47a01940a3aa05">BaseGen</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00364"></a>00364 {
<a name="l00365"></a>00365     <span class="comment">// update the trace offset to the time where the state was entered.</span>
<a name="l00366"></a>00366     <a class="code" href="classTraceGen.html#a909a0f7344e9c9dc4e84b9db494e3913">tickOffset</a> = <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>();
<a name="l00367"></a>00367 
<a name="l00368"></a>00368     <span class="comment">// clear everything</span>
<a name="l00369"></a>00369     <a class="code" href="classTraceGen.html#a9569c34c782ed59f9eabae29d83b3c69">currElement</a>.<a class="code" href="structTraceGen_1_1TraceElement.html#ac8bb3912a3ce86b15842e79d0b421204">clear</a>();
<a name="l00370"></a>00370 
<a name="l00371"></a>00371     <span class="comment">// read the first element in the file and set the complete flag</span>
<a name="l00372"></a>00372     <a class="code" href="classTraceGen.html#a072f6c8d6720b220445074f5a4c0ceff">traceComplete</a> = !<a class="code" href="classTraceGen.html#a5dfbfce0ad4d1bee9295a75fb9f22e67">trace</a>.<a class="code" href="classTraceGen_1_1InputStream.html#ad46fc07f6483a6b8cd3b07223de00477">read</a>(<a class="code" href="classTraceGen.html#af75daad6a6b104153bcfc8b0b9738fc1">nextElement</a>);
<a name="l00373"></a>00373 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a358d2e2397ca11ccd17553e3c40e7901"></a><!-- doxytag: member="TraceGen::exit" ref="a358d2e2397ca11ccd17553e3c40e7901" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void exit </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Exit this generator state. By default do nothing. </p>

<p><a class="el" href="classBaseGen.html#acbd8338aaa3340f10faecd6d2f759324">BaseGen</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00413"></a>00413 {
<a name="l00414"></a>00414     <span class="comment">// Check if we reached the end of the trace file. If we did not</span>
<a name="l00415"></a>00415     <span class="comment">// then we want to generate a warning stating that not the entire</span>
<a name="l00416"></a>00416     <span class="comment">// trace was played.</span>
<a name="l00417"></a>00417     <span class="keywordflow">if</span> (!<a class="code" href="classTraceGen.html#a072f6c8d6720b220445074f5a4c0ceff">traceComplete</a>) {
<a name="l00418"></a>00418         <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;Trace player %s was unable to replay the entire trace!\n&quot;</span>,
<a name="l00419"></a>00419              <a class="code" href="classBaseGen.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>());
<a name="l00420"></a>00420     }
<a name="l00421"></a>00421 
<a name="l00422"></a>00422     <span class="comment">// Clear any flags and start over again from the beginning of the</span>
<a name="l00423"></a>00423     <span class="comment">// file</span>
<a name="l00424"></a>00424     <a class="code" href="classTraceGen.html#a5dfbfce0ad4d1bee9295a75fb9f22e67">trace</a>.<a class="code" href="classTraceGen_1_1InputStream.html#ad20897c5c8bd47f5d4005989bead0e55">reset</a>();
<a name="l00425"></a>00425 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a938aa9841a9a62a776afbd0768af5379"></a><!-- doxytag: member="TraceGen::getNextPacket" ref="a938aa9841a9a62a776afbd0768af5379" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPacket.html">PacketPtr</a> getNextPacket </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the next generated packet.</p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>A packet to be sent at the current tick </dd></dl>

<p><a class="el" href="classBaseGen.html#a6cdb7c977e91dfc33aeea10a3dfcefed">BaseGen</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00377"></a>00377 {
<a name="l00378"></a>00378     <span class="comment">// shift things one step forward</span>
<a name="l00379"></a>00379     <a class="code" href="classTraceGen.html#a9569c34c782ed59f9eabae29d83b3c69">currElement</a> = <a class="code" href="classTraceGen.html#af75daad6a6b104153bcfc8b0b9738fc1">nextElement</a>;
<a name="l00380"></a>00380     <a class="code" href="classTraceGen.html#af75daad6a6b104153bcfc8b0b9738fc1">nextElement</a>.<a class="code" href="structTraceGen_1_1TraceElement.html#ac8bb3912a3ce86b15842e79d0b421204">clear</a>();
<a name="l00381"></a>00381 
<a name="l00382"></a>00382     <span class="comment">// read the next element and set the complete flag</span>
<a name="l00383"></a>00383     <a class="code" href="classTraceGen.html#a072f6c8d6720b220445074f5a4c0ceff">traceComplete</a> = !<a class="code" href="classTraceGen.html#a5dfbfce0ad4d1bee9295a75fb9f22e67">trace</a>.<a class="code" href="classTraceGen_1_1InputStream.html#ad46fc07f6483a6b8cd3b07223de00477">read</a>(<a class="code" href="classTraceGen.html#af75daad6a6b104153bcfc8b0b9738fc1">nextElement</a>);
<a name="l00384"></a>00384 
<a name="l00385"></a>00385     <span class="comment">// it is the responsibility of the traceComplete flag to ensure we</span>
<a name="l00386"></a>00386     <span class="comment">// always have a valid element here</span>
<a name="l00387"></a>00387     assert(<a class="code" href="classTraceGen.html#a9569c34c782ed59f9eabae29d83b3c69">currElement</a>.<a class="code" href="structTraceGen_1_1TraceElement.html#aac1b70a2ed67ead038c4d3f5ac4d8a81">isValid</a>());
<a name="l00388"></a>00388 
<a name="l00389"></a>00389     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classTrafficGen.html">TrafficGen</a>, <span class="stringliteral">&quot;TraceGen::getNextPacket: %c %d %d %d 0x%x\n&quot;</span>,
<a name="l00390"></a>00390             <a class="code" href="classTraceGen.html#a9569c34c782ed59f9eabae29d83b3c69">currElement</a>.<a class="code" href="structTraceGen_1_1TraceElement.html#af88eb56d484b750933cd2ea86594f001">cmd</a>.<a class="code" href="classMemCmd.html#adc47901747fc3c447db3abddaf01491a">isRead</a>() ? <span class="charliteral">&apos;r&apos;</span> : <span class="charliteral">&apos;w&apos;</span>,
<a name="l00391"></a>00391             <a class="code" href="classTraceGen.html#a9569c34c782ed59f9eabae29d83b3c69">currElement</a>.<a class="code" href="structTraceGen_1_1TraceElement.html#a0bb77b4ba61e408313e1118250f9278c">addr</a>,
<a name="l00392"></a>00392             <a class="code" href="classTraceGen.html#a9569c34c782ed59f9eabae29d83b3c69">currElement</a>.<a class="code" href="structTraceGen_1_1TraceElement.html#ac1ad082ce835505ea433e658c844c8ac">blocksize</a>,
<a name="l00393"></a>00393             <a class="code" href="classTraceGen.html#a9569c34c782ed59f9eabae29d83b3c69">currElement</a>.<a class="code" href="structTraceGen_1_1TraceElement.html#a4daae57fbf09ee5423d123f5ce330e92">tick</a>,
<a name="l00394"></a>00394             <a class="code" href="classTraceGen.html#a9569c34c782ed59f9eabae29d83b3c69">currElement</a>.<a class="code" href="structTraceGen_1_1TraceElement.html#a539ce2286409a81e04ce978c1ea74c18">flags</a>);
<a name="l00395"></a>00395 
<a name="l00396"></a>00396     <a class="code" href="classPacket.html">PacketPtr</a> pkt = <a class="code" href="classBaseGen.html#ae4f945239fa7bde755f55122f661f467">getPacket</a>(<a class="code" href="classTraceGen.html#a9569c34c782ed59f9eabae29d83b3c69">currElement</a>.<a class="code" href="structTraceGen_1_1TraceElement.html#a0bb77b4ba61e408313e1118250f9278c">addr</a> + <a class="code" href="classTraceGen.html#ab197a601b77c63555474cccf2ba4132c">addrOffset</a>,
<a name="l00397"></a>00397                               <a class="code" href="classTraceGen.html#a9569c34c782ed59f9eabae29d83b3c69">currElement</a>.<a class="code" href="structTraceGen_1_1TraceElement.html#ac1ad082ce835505ea433e658c844c8ac">blocksize</a>,
<a name="l00398"></a>00398                               <a class="code" href="classTraceGen.html#a9569c34c782ed59f9eabae29d83b3c69">currElement</a>.<a class="code" href="structTraceGen_1_1TraceElement.html#af88eb56d484b750933cd2ea86594f001">cmd</a>, <a class="code" href="classTraceGen.html#a9569c34c782ed59f9eabae29d83b3c69">currElement</a>.<a class="code" href="structTraceGen_1_1TraceElement.html#a539ce2286409a81e04ce978c1ea74c18">flags</a>);
<a name="l00399"></a>00399 
<a name="l00400"></a>00400     <span class="keywordflow">if</span> (!<a class="code" href="classTraceGen.html#a072f6c8d6720b220445074f5a4c0ceff">traceComplete</a>)
<a name="l00401"></a>00401         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classTrafficGen.html">TrafficGen</a>, <span class="stringliteral">&quot;nextElement: %c addr %d size %d tick %d (%d)\n&quot;</span>,
<a name="l00402"></a>00402                 <a class="code" href="classTraceGen.html#af75daad6a6b104153bcfc8b0b9738fc1">nextElement</a>.<a class="code" href="structTraceGen_1_1TraceElement.html#af88eb56d484b750933cd2ea86594f001">cmd</a>.<a class="code" href="classMemCmd.html#adc47901747fc3c447db3abddaf01491a">isRead</a>() ? <span class="charliteral">&apos;r&apos;</span> : <span class="charliteral">&apos;w&apos;</span>,
<a name="l00403"></a>00403                 <a class="code" href="classTraceGen.html#af75daad6a6b104153bcfc8b0b9738fc1">nextElement</a>.<a class="code" href="structTraceGen_1_1TraceElement.html#a0bb77b4ba61e408313e1118250f9278c">addr</a>,
<a name="l00404"></a>00404                 <a class="code" href="classTraceGen.html#af75daad6a6b104153bcfc8b0b9738fc1">nextElement</a>.<a class="code" href="structTraceGen_1_1TraceElement.html#ac1ad082ce835505ea433e658c844c8ac">blocksize</a>,
<a name="l00405"></a>00405                 <a class="code" href="classTraceGen.html#af75daad6a6b104153bcfc8b0b9738fc1">nextElement</a>.<a class="code" href="structTraceGen_1_1TraceElement.html#a4daae57fbf09ee5423d123f5ce330e92">tick</a> + <a class="code" href="classTraceGen.html#a909a0f7344e9c9dc4e84b9db494e3913">tickOffset</a>,
<a name="l00406"></a>00406                 <a class="code" href="classTraceGen.html#af75daad6a6b104153bcfc8b0b9738fc1">nextElement</a>.<a class="code" href="structTraceGen_1_1TraceElement.html#a4daae57fbf09ee5423d123f5ce330e92">tick</a>);
<a name="l00407"></a>00407 
<a name="l00408"></a>00408     <span class="keywordflow">return</span> pkt;
<a name="l00409"></a>00409 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a65f805b54c24ac3ce0a37716de3e8abc"></a><!-- doxytag: member="TraceGen::nextPacketTick" ref="a65f805b54c24ac3ce0a37716de3e8abc" args="(bool elastic, Tick delay) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> nextPacketTick </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>elastic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td>
          <td class="paramname"> <em>delay</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the tick when the next request should be generated. If the end of the file has been reached, it returns MaxTick to indicate that there will be no more requests. </p>

<p><a class="el" href="classBaseGen.html#abee7e4d35054bbc37e9332bbd17f4a69">BaseGen</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00341"></a>00341 {
<a name="l00342"></a>00342     <span class="keywordflow">if</span> (<a class="code" href="classTraceGen.html#a072f6c8d6720b220445074f5a4c0ceff">traceComplete</a>) {
<a name="l00343"></a>00343         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classTrafficGen.html">TrafficGen</a>, <span class="stringliteral">&quot;No next tick as trace is finished\n&quot;</span>);
<a name="l00344"></a>00344         <span class="comment">// We are at the end of the file, thus we have no more data in</span>
<a name="l00345"></a>00345         <span class="comment">// the trace Return MaxTick to signal that there will be no</span>
<a name="l00346"></a>00346         <span class="comment">// more transactions in this active period for the state.</span>
<a name="l00347"></a>00347         <span class="keywordflow">return</span> <a class="code" href="base_2types_8hh.html#abe940b1b328825e234da719447e15ca5">MaxTick</a>;
<a name="l00348"></a>00348     }
<a name="l00349"></a>00349 
<a name="l00350"></a>00350     assert(<a class="code" href="classTraceGen.html#af75daad6a6b104153bcfc8b0b9738fc1">nextElement</a>.<a class="code" href="structTraceGen_1_1TraceElement.html#aac1b70a2ed67ead038c4d3f5ac4d8a81">isValid</a>());
<a name="l00351"></a>00351 
<a name="l00352"></a>00352     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classTrafficGen.html">TrafficGen</a>, <span class="stringliteral">&quot;Next packet tick is %d\n&quot;</span>, <a class="code" href="classTraceGen.html#a909a0f7344e9c9dc4e84b9db494e3913">tickOffset</a> +
<a name="l00353"></a>00353             <a class="code" href="classTraceGen.html#af75daad6a6b104153bcfc8b0b9738fc1">nextElement</a>.<a class="code" href="structTraceGen_1_1TraceElement.html#a4daae57fbf09ee5423d123f5ce330e92">tick</a>);
<a name="l00354"></a>00354 
<a name="l00355"></a>00355     <span class="comment">// if the playback is supposed to be elastic, add the delay</span>
<a name="l00356"></a>00356     <span class="keywordflow">if</span> (elastic)
<a name="l00357"></a>00357         <a class="code" href="classTraceGen.html#a909a0f7344e9c9dc4e84b9db494e3913">tickOffset</a> += delay;
<a name="l00358"></a>00358 
<a name="l00359"></a>00359     <span class="keywordflow">return</span> std::max(<a class="code" href="classTraceGen.html#a909a0f7344e9c9dc4e84b9db494e3913">tickOffset</a> + <a class="code" href="classTraceGen.html#af75daad6a6b104153bcfc8b0b9738fc1">nextElement</a>.<a class="code" href="structTraceGen_1_1TraceElement.html#a4daae57fbf09ee5423d123f5ce330e92">tick</a>, <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>());
<a name="l00360"></a>00360 }
</pre></div></p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="ab197a601b77c63555474cccf2ba4132c"></a><!-- doxytag: member="TraceGen::addrOffset" ref="ab197a601b77c63555474cccf2ba4132c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="el" href="classTraceGen.html#ab197a601b77c63555474cccf2ba4132c">addrOffset</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Offset for memory requests. Used to shift the trace away from the CPU address space. </p>

</div>
</div>
<a class="anchor" id="a9569c34c782ed59f9eabae29d83b3c69"></a><!-- doxytag: member="TraceGen::currElement" ref="a9569c34c782ed59f9eabae29d83b3c69" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structTraceGen_1_1TraceElement.html">TraceElement</a> <a class="el" href="classTraceGen.html#a9569c34c782ed59f9eabae29d83b3c69">currElement</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Store the current and next element in the trace </p>

</div>
</div>
<a class="anchor" id="af75daad6a6b104153bcfc8b0b9738fc1"></a><!-- doxytag: member="TraceGen::nextElement" ref="af75daad6a6b104153bcfc8b0b9738fc1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structTraceGen_1_1TraceElement.html">TraceElement</a> <a class="el" href="classTraceGen.html#af75daad6a6b104153bcfc8b0b9738fc1">nextElement</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a909a0f7344e9c9dc4e84b9db494e3913"></a><!-- doxytag: member="TraceGen::tickOffset" ref="a909a0f7344e9c9dc4e84b9db494e3913" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="el" href="classTraceGen.html#a909a0f7344e9c9dc4e84b9db494e3913">tickOffset</a><code> [mutable, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stores the time when the state was entered. This is to add an offset to the times stored in the trace file. This is mutable to allow us to change it as part of nextPacketTick. </p>

</div>
</div>
<a class="anchor" id="a5dfbfce0ad4d1bee9295a75fb9f22e67"></a><!-- doxytag: member="TraceGen::trace" ref="a5dfbfce0ad4d1bee9295a75fb9f22e67" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTraceGen_1_1InputStream.html">InputStream</a> <a class="el" href="classTraceGen.html#a5dfbfce0ad4d1bee9295a75fb9f22e67">trace</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Input stream used for reading the input trace file </p>

</div>
</div>
<a class="anchor" id="a072f6c8d6720b220445074f5a4c0ceff"></a><!-- doxytag: member="TraceGen::traceComplete" ref="a072f6c8d6720b220445074f5a4c0ceff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classTraceGen.html#a072f6c8d6720b220445074f5a4c0ceff">traceComplete</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classSet.html">Set</a> to true when the trace replay for one instance of state is complete. </p>

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>cpu/testers/traffic_gen/<a class="el" href="generators_8hh_source.html">generators.hh</a></li>
<li>cpu/testers/traffic_gen/<a class="el" href="generators_8cc.html">generators.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
