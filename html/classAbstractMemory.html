<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス AbstractMemory</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>クラス AbstractMemory</h1><!-- doxytag: class="AbstractMemory" --><!-- doxytag: inherits="MemObject" -->
<p><code>#include &lt;<a class="el" href="abstract__mem_8hh_source.html">abstract_mem.hh</a>&gt;</code></p>
<div class="dynheader">
AbstractMemoryに対する継承グラフ</div>
<div class="dynsection">
 <div class="center">
  <img src="classAbstractMemory.gif" usemap="#AbstractMemory_map" alt=""/>
  <map id="AbstractMemory_map" name="AbstractMemory_map">
<area href="classMemObject.html" alt="MemObject" shape="rect" coords="658,168,836,192"/>
<area href="classClockedObject.html" alt="ClockedObject" shape="rect" coords="658,112,836,136"/>
<area href="classSimObject.html" alt="SimObject" shape="rect" coords="658,56,836,80"/>
<area href="classEventManager.html" alt="EventManager" shape="rect" coords="470,0,648,24"/>
<area href="classSerializable.html" alt="Serializable" shape="rect" coords="658,0,836,24"/>
<area href="classDrainable.html" alt="Drainable" shape="rect" coords="846,0,1024,24"/>
<area href="classDRAMCtrl.html" alt="DRAMCtrl" shape="rect" coords="0,280,178,304"/>
<area href="classDRAMCtrl_1_1DRAMCtrl.html" alt="DRAMCtrl" shape="rect" coords="470,280,648,304"/>
<area href="classDRAMSim2.html" alt="DRAMSim2" shape="rect" coords="658,280,836,304"/>
<area href="classSimpleMemory.html" alt="SimpleMemory" shape="rect" coords="846,280,1024,304"/>
<area href="classSimpleMemory_1_1SimpleMemory.html" alt="SimpleMemory" shape="rect" coords="1034,280,1212,304"/>
<area href="classDRAMCtrl_1_1DDR3__1333__x64__DRAMSim2.html" alt="DDR3_1333_x64_DRAMSim2" shape="rect" coords="0,336,178,360"/>
<area href="classDRAMCtrl_1_1DDR3__1600__x64.html" alt="DDR3_1600_x64" shape="rect" coords="188,336,366,360"/>
<area href="classDRAMCtrl_1_1DDR4__2400__x64.html" alt="DDR4_2400_x64" shape="rect" coords="376,336,554,360"/>
<area href="classDRAMCtrl_1_1LPDDR2__S4__1066__x32.html" alt="LPDDR2_S4_1066_x32" shape="rect" coords="564,336,742,360"/>
<area href="classDRAMCtrl_1_1LPDDR3__1600__x32.html" alt="LPDDR3_1600_x32" shape="rect" coords="752,336,930,360"/>
<area href="classDRAMCtrl_1_1WideIO__200__x128.html" alt="WideIO_200_x128" shape="rect" coords="940,336,1118,360"/>
<area href="classDRAMCtrl_1_1DDR3__2133__x64.html" alt="DDR3_2133_x64" shape="rect" coords="188,392,366,416"/>
</map>
 </div>
</div>

<p><a href="classAbstractMemory-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>構成</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory_1_1AbstractMemory.html">AbstractMemory</a></td></tr>
<tr><td colspan="2"><h2>Public 型</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef AbstractMemoryParams&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#ab4fcbcbcfef78d6bc871995f8eca40eb">Params</a></td></tr>
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#a69baeab8b9f1056447fe16519fd89923">AbstractMemory</a> (const <a class="el" href="classAbstractMemory.html#ab4fcbcbcfef78d6bc871995f8eca40eb">Params</a> *p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#a7cff70b609d2b2b8ac45e1fe12b7bc96">~AbstractMemory</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#ac02f2a4d7312eb91f40980adfd4e31b2">isNull</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#a2651a6edea3b7884410b1abefac8b2de">setBackingStore</a> (uint8_t *pmem_addr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classstd_1_1list.html">std::list</a>&lt; <a class="el" href="classLockedAddr.html">LockedAddr</a> &gt; &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#a5b569455e6a1bd8629737fa02564a9a8">getLockedAddrList</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#a41e2bc27bc88cc5c7d1d8c7a905e7cfc">addLockedAddr</a> (<a class="el" href="classLockedAddr.html">LockedAddr</a> addr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSystem.html">System</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#ad086bdc3ed123ad02169847d658bf5cb">system</a> (<a class="el" href="classSystem.html">System</a> *sys)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classAbstractMemory.html#ab4fcbcbcfef78d6bc871995f8eca40eb">Params</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classAddrRange.html">AddrRange</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#aa3df62a6c92a30a0ab9247f8ec9e6e7a">getAddrRange</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#a0b6868dbef44fc07f11d050eb59e5f7e">size</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#a85325674b7aed05d6b4e40a48563189b">start</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#aca224861e09cf94a49088bb51bb02350">isConfReported</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#ad89e9980a76342142d63ff15deb19497">isInAddrMap</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#aac5d96736802cb79fb2287135bcc1dff">access</a> (<a class="el" href="classPacket.html">PacketPtr</a> pkt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#ace845b5316308e12fd958fa5df09a8e8">functionalAccess</a> (<a class="el" href="classPacket.html">PacketPtr</a> pkt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#a4dc637449366fcdfc4e764cdf12d9b11">regStats</a> ()</td></tr>
<tr><td colspan="2"><h2>Protected メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#af088ed7a675d24827a3300bdbc62e96a">checkLockedAddrList</a> (<a class="el" href="classPacket.html">PacketPtr</a> pkt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#ad317aec11d97a72993e653755fa1c003">trackLoadLocked</a> (<a class="el" href="classPacket.html">PacketPtr</a> pkt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#ab1136219a28374092ad398d673bd23e0">writeOK</a> (<a class="el" href="classPacket.html">PacketPtr</a> pkt)</td></tr>
<tr><td colspan="2"><h2>Protected 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classAddrRange.html">AddrRange</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#a194876a072a83a9fd59dde82e5213f0d">range</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#a9f8ed24d8442f662831d51922e7fddd2">pmemAddr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#adee792d6bf567779ea9c16640af42784">confTableReported</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#a7302c053380cdccd0bdf63b25f73cbc5">inAddrMap</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1list.html">std::list</a>&lt; <a class="el" href="classLockedAddr.html">LockedAddr</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#af35631da2ae35079d76e07c46fe78565">lockedAddrList</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#aa36971a2ea8ddd9d82832059cbc1b21f">bytesRead</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#a5e52eb4a824c1fb452d77dae86dfa970">bytesInstRead</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#ab89ec4a4876671ad5186d0e9c0e674ed">bytesWritten</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#a27f442fbcb7bc7661412cc1d96ca51e7">numReads</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#acfd6a97aa6c2de05417a7403369e71c2">numWrites</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#a52bafd014022e75d82b4e0de25d3faf7">numOther</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Formula.html">Stats::Formula</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#a14a0a95f3cd104b70d5b5c19c3ee8099">bwRead</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Formula.html">Stats::Formula</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#a00512ebb77886b71a63bd1595828d592">bwInstRead</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Formula.html">Stats::Formula</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#a8077d31db9c4f4f9e78888def6de8430">bwWrite</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Formula.html">Stats::Formula</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#a678ff8c93c78d0be1884742ef8aa41e8">bwTotal</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSystem.html">System</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#a1da55f4024bf8a9b14b64054841148b8">_system</a></td></tr>
<tr><td colspan="2"><h2>Private メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#abe7c4ad03729f9b3dd25d3dc43361103">AbstractMemory</a> (const <a class="el" href="classAbstractMemory_1_1AbstractMemory.html">AbstractMemory</a> &amp;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classAbstractMemory_1_1AbstractMemory.html">AbstractMemory</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractMemory.html#a8524c3be63882adac591f591519f3a3b">operator=</a> (const <a class="el" href="classAbstractMemory_1_1AbstractMemory.html">AbstractMemory</a> &amp;)</td></tr>
</table>
<hr/><a name="_details"></a><h2>説明</h2>
<p>An abstract memory represents a contiguous block of physical memory, with an associated address range, and also provides basic functionality for reading and writing this memory without any timing information. It is a <a class="el" href="classMemObject.html">MemObject</a> since any subclass must have at least one slave port. </p>
<hr/><h2>型定義</h2>
<a class="anchor" id="ab4fcbcbcfef78d6bc871995f8eca40eb"></a><!-- doxytag: member="AbstractMemory::Params" ref="ab4fcbcbcfef78d6bc871995f8eca40eb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef AbstractMemoryParams <a class="el" href="classAbstractMemory.html#ab4fcbcbcfef78d6bc871995f8eca40eb">Params</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMemObject.html#a905bbc621eeec0ed08859e21c8c95412">MemObject</a>を再定義しています。</p>

<p><a class="el" href="classDRAMSim2.html#ae66665a06c9d64a6ba0e56d589b74d6c">DRAMSim2</a>で再定義されています。</p>

</div>
</div>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="abe7c4ad03729f9b3dd25d3dc43361103"></a><!-- doxytag: member="AbstractMemory::AbstractMemory" ref="abe7c4ad03729f9b3dd25d3dc43361103" args="(const AbstractMemory &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classAbstractMemory_1_1AbstractMemory.html">AbstractMemory</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classAbstractMemory_1_1AbstractMemory.html">AbstractMemory</a> &amp;&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a69baeab8b9f1056447fe16519fd89923"></a><!-- doxytag: member="AbstractMemory::AbstractMemory" ref="a69baeab8b9f1056447fe16519fd89923" args="(const Params *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classAbstractMemory_1_1AbstractMemory.html">AbstractMemory</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classAbstractMemory.html#ab4fcbcbcfef78d6bc871995f8eca40eb">Params</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00057"></a>00057                                               :
<a name="l00058"></a>00058     <a class="code" href="classMemObject.html#a0390aa3eb5acd29074fac67b8d6472bd">MemObject</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>), <a class="code" href="classAbstractMemory.html#a194876a072a83a9fd59dde82e5213f0d">range</a>(<a class="code" href="classAbstractMemory.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;<a class="code" href="classAbstractMemory.html#a194876a072a83a9fd59dde82e5213f0d">range</a>), <a class="code" href="classAbstractMemory.html#a9f8ed24d8442f662831d51922e7fddd2">pmemAddr</a>(<a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>),
<a name="l00059"></a>00059     <a class="code" href="classAbstractMemory.html#adee792d6bf567779ea9c16640af42784">confTableReported</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;conf_table_reported), <a class="code" href="classAbstractMemory.html#a7302c053380cdccd0bdf63b25f73cbc5">inAddrMap</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;in_addr_map),
<a name="l00060"></a>00060     <a class="code" href="classAbstractMemory.html#a1da55f4024bf8a9b14b64054841148b8">_system</a>(<a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>)
<a name="l00061"></a>00061 {
<a name="l00062"></a>00062     <span class="keywordflow">if</span> (<a class="code" href="classAbstractMemory.html#a0b6868dbef44fc07f11d050eb59e5f7e">size</a>() % <a class="code" href="namespaceAlphaISA.html#ad9d6a4d965e107c9a7214f096107296b">TheISA::PageBytes</a> != 0)
<a name="l00063"></a>00063         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Memory Size not divisible by page size\n&quot;</span>);
<a name="l00064"></a>00064 }

</pre></div></p>

</div>
</div>
<a class="anchor" id="a7cff70b609d2b2b8ac45e1fe12b7bc96"></a><!-- doxytag: member="AbstractMemory::~AbstractMemory" ref="a7cff70b609d2b2b8ac45e1fe12b7bc96" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual ~<a class="el" href="classAbstractMemory_1_1AbstractMemory.html">AbstractMemory</a> </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00195"></a>00195 {}
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="aac5d96736802cb79fb2287135bcc1dff"></a><!-- doxytag: member="AbstractMemory::access" ref="aac5d96736802cb79fb2287135bcc1dff" args="(PacketPtr pkt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void access </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pkt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Perform an untimed memory access and update all the state (e.g. locked addresses) and statistics accordingly. The packet is turned into a response if required.</p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pkt</em>&nbsp;</td><td><a class="el" href="classPacket.html">Packet</a> performing the access </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00317"></a>00317 {
<a name="l00318"></a>00318     assert(<a class="code" href="classAddrRange.html">AddrRange</a>(pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>(),
<a name="l00319"></a>00319                      pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>() + pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>() - 1).isSubset(<a class="code" href="classAbstractMemory.html#a194876a072a83a9fd59dde82e5213f0d">range</a>));
<a name="l00320"></a>00320 
<a name="l00321"></a>00321     <span class="keywordflow">if</span> (pkt-&gt;<a class="code" href="classPacket.html#a9693a1ffeda326646443ab2a2a92be41">memInhibitAsserted</a>()) {
<a name="l00322"></a>00322         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(MemoryAccess, <span class="stringliteral">&quot;mem inhibited on 0x%x: not responding\n&quot;</span>,
<a name="l00323"></a>00323                 pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>());
<a name="l00324"></a>00324         <span class="keywordflow">return</span>;
<a name="l00325"></a>00325     }
<a name="l00326"></a>00326 
<a name="l00327"></a>00327     uint8_t *hostAddr = <a class="code" href="classAbstractMemory.html#a9f8ed24d8442f662831d51922e7fddd2">pmemAddr</a> + pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>() - <a class="code" href="classAbstractMemory.html#a194876a072a83a9fd59dde82e5213f0d">range</a>.<a class="code" href="classAddrRange.html#a85325674b7aed05d6b4e40a48563189b">start</a>();
<a name="l00328"></a>00328 
<a name="l00329"></a>00329     <span class="keywordflow">if</span> (pkt-&gt;<a class="code" href="classPacket.html#af88eb56d484b750933cd2ea86594f001" title="The command field of the packet.">cmd</a> == <a class="code" href="classMemCmd.html#a2afce0a47a93eee73a314d53e4890153a544e456dc06d65a6998a7df182d247d3">MemCmd::SwapReq</a>) {
<a name="l00330"></a>00330         <a class="code" href="namespaceAlphaISA.html#a0e080577527fb3e9685399f75b5caf15">TheISA::IntReg</a> overwrite_val;
<a name="l00331"></a>00331         <span class="keywordtype">bool</span> overwrite_mem;
<a name="l00332"></a>00332         uint64_t condition_val64;
<a name="l00333"></a>00333         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> condition_val32;
<a name="l00334"></a>00334 
<a name="l00335"></a>00335         <span class="keywordflow">if</span> (!<a class="code" href="classAbstractMemory.html#a9f8ed24d8442f662831d51922e7fddd2">pmemAddr</a>)
<a name="l00336"></a>00336             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Swap only works if there is real memory (i.e. null=False)&quot;</span>);
<a name="l00337"></a>00337         assert(<span class="keyword">sizeof</span>(<a class="code" href="namespaceAlphaISA.html#a0e080577527fb3e9685399f75b5caf15">TheISA::IntReg</a>) &gt;= pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>());
<a name="l00338"></a>00338 
<a name="l00339"></a>00339         overwrite_mem = <span class="keyword">true</span>;
<a name="l00340"></a>00340         <span class="comment">// keep a copy of our possible write value, and copy what is at the</span>
<a name="l00341"></a>00341         <span class="comment">// memory address into the packet</span>
<a name="l00342"></a>00342         std::memcpy(&amp;overwrite_val, pkt-&gt;<a class="code" href="classPacket.html#a5c451baf3f0a89084e79e69bb9061200">getPtr</a>&lt;uint8_t&gt;(), pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>());
<a name="l00343"></a>00343         std::memcpy(pkt-&gt;<a class="code" href="classPacket.html#a5c451baf3f0a89084e79e69bb9061200">getPtr</a>&lt;uint8_t&gt;(), hostAddr, pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>());
<a name="l00344"></a>00344 
<a name="l00345"></a>00345         <span class="keywordflow">if</span> (pkt-&gt;<a class="code" href="classPacket.html#a956cd41d82347558b9c0a5b0474903f2" title="A pointer to the original request.">req</a>-&gt;<a class="code" href="classRequest.html#a086ef1e55d60089d0aa0232ff797eaef">isCondSwap</a>()) {
<a name="l00346"></a>00346             <span class="keywordflow">if</span> (pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>() == <span class="keyword">sizeof</span>(uint64_t)) {
<a name="l00347"></a>00347                 condition_val64 = pkt-&gt;<a class="code" href="classPacket.html#a956cd41d82347558b9c0a5b0474903f2" title="A pointer to the original request.">req</a>-&gt;<a class="code" href="classRequest.html#af848a06a731668855b203d679077623d">getExtraData</a>();
<a name="l00348"></a>00348                 overwrite_mem = !std::memcmp(&amp;condition_val64, hostAddr,
<a name="l00349"></a>00349                                              <span class="keyword">sizeof</span>(uint64_t));
<a name="l00350"></a>00350             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>() == <span class="keyword">sizeof</span>(<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)) {
<a name="l00351"></a>00351                 condition_val32 = (<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)pkt-&gt;<a class="code" href="classPacket.html#a956cd41d82347558b9c0a5b0474903f2" title="A pointer to the original request.">req</a>-&gt;<a class="code" href="classRequest.html#af848a06a731668855b203d679077623d">getExtraData</a>();
<a name="l00352"></a>00352                 overwrite_mem = !std::memcmp(&amp;condition_val32, hostAddr,
<a name="l00353"></a>00353                                              <span class="keyword">sizeof</span>(<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>));
<a name="l00354"></a>00354             } <span class="keywordflow">else</span>
<a name="l00355"></a>00355                 <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Invalid size for conditional read/write\n&quot;</span>);
<a name="l00356"></a>00356         }
<a name="l00357"></a>00357 
<a name="l00358"></a>00358         <span class="keywordflow">if</span> (overwrite_mem)
<a name="l00359"></a>00359             std::memcpy(hostAddr, &amp;overwrite_val, pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>());
<a name="l00360"></a>00360 
<a name="l00361"></a>00361         assert(!pkt-&gt;<a class="code" href="classPacket.html#a956cd41d82347558b9c0a5b0474903f2" title="A pointer to the original request.">req</a>-&gt;<a class="code" href="classRequest.html#ae742b8e8aaa2e18506dc64c7b7f3fc0a">isInstFetch</a>());
<a name="l00362"></a>00362         <a class="code" href="abstract__mem_8cc.html#a585e1b7e8e1875f7212a6defdcb63270">TRACE_PACKET</a>(<span class="stringliteral">&quot;Read/Write&quot;</span>);
<a name="l00363"></a>00363         <a class="code" href="classAbstractMemory.html#a52bafd014022e75d82b4e0de25d3faf7">numOther</a>[pkt-&gt;<a class="code" href="classPacket.html#a956cd41d82347558b9c0a5b0474903f2" title="A pointer to the original request.">req</a>-&gt;<a class="code" href="classRequest.html#a9b7d32db0521388c0953e531c79aab50">masterId</a>()]++;
<a name="l00364"></a>00364     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pkt-&gt;<a class="code" href="classPacket.html#adc47901747fc3c447db3abddaf01491a">isRead</a>()) {
<a name="l00365"></a>00365         assert(!pkt-&gt;<a class="code" href="classPacket.html#ab699d2f0d186312531fd1c279fd27b73">isWrite</a>());
<a name="l00366"></a>00366         <span class="keywordflow">if</span> (pkt-&gt;<a class="code" href="classPacket.html#a8965874e960faf91ad4b6af8dbf31875">isLLSC</a>()) {
<a name="l00367"></a>00367             <a class="code" href="classAbstractMemory.html#ad317aec11d97a72993e653755fa1c003">trackLoadLocked</a>(pkt);
<a name="l00368"></a>00368         }
<a name="l00369"></a>00369         <span class="keywordflow">if</span> (<a class="code" href="classAbstractMemory.html#a9f8ed24d8442f662831d51922e7fddd2">pmemAddr</a>)
<a name="l00370"></a>00370             memcpy(pkt-&gt;<a class="code" href="classPacket.html#a5c451baf3f0a89084e79e69bb9061200">getPtr</a>&lt;uint8_t&gt;(), hostAddr, pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>());
<a name="l00371"></a>00371         <a class="code" href="abstract__mem_8cc.html#a585e1b7e8e1875f7212a6defdcb63270">TRACE_PACKET</a>(pkt-&gt;<a class="code" href="classPacket.html#a956cd41d82347558b9c0a5b0474903f2" title="A pointer to the original request.">req</a>-&gt;<a class="code" href="classRequest.html#ae742b8e8aaa2e18506dc64c7b7f3fc0a">isInstFetch</a>() ? <span class="stringliteral">&quot;IFetch&quot;</span> : <span class="stringliteral">&quot;Read&quot;</span>);
<a name="l00372"></a>00372         <a class="code" href="classAbstractMemory.html#a27f442fbcb7bc7661412cc1d96ca51e7">numReads</a>[pkt-&gt;<a class="code" href="classPacket.html#a956cd41d82347558b9c0a5b0474903f2" title="A pointer to the original request.">req</a>-&gt;<a class="code" href="classRequest.html#a9b7d32db0521388c0953e531c79aab50">masterId</a>()]++;
<a name="l00373"></a>00373         <a class="code" href="classAbstractMemory.html#aa36971a2ea8ddd9d82832059cbc1b21f">bytesRead</a>[pkt-&gt;<a class="code" href="classPacket.html#a956cd41d82347558b9c0a5b0474903f2" title="A pointer to the original request.">req</a>-&gt;<a class="code" href="classRequest.html#a9b7d32db0521388c0953e531c79aab50">masterId</a>()] += pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>();
<a name="l00374"></a>00374         <span class="keywordflow">if</span> (pkt-&gt;<a class="code" href="classPacket.html#a956cd41d82347558b9c0a5b0474903f2" title="A pointer to the original request.">req</a>-&gt;<a class="code" href="classRequest.html#ae742b8e8aaa2e18506dc64c7b7f3fc0a">isInstFetch</a>())
<a name="l00375"></a>00375             <a class="code" href="classAbstractMemory.html#a5e52eb4a824c1fb452d77dae86dfa970">bytesInstRead</a>[pkt-&gt;<a class="code" href="classPacket.html#a956cd41d82347558b9c0a5b0474903f2" title="A pointer to the original request.">req</a>-&gt;<a class="code" href="classRequest.html#a9b7d32db0521388c0953e531c79aab50">masterId</a>()] += pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>();
<a name="l00376"></a>00376     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pkt-&gt;<a class="code" href="classPacket.html#ab699d2f0d186312531fd1c279fd27b73">isWrite</a>()) {
<a name="l00377"></a>00377         <span class="keywordflow">if</span> (<a class="code" href="classAbstractMemory.html#ab1136219a28374092ad398d673bd23e0">writeOK</a>(pkt)) {
<a name="l00378"></a>00378             <span class="keywordflow">if</span> (<a class="code" href="classAbstractMemory.html#a9f8ed24d8442f662831d51922e7fddd2">pmemAddr</a>) {
<a name="l00379"></a>00379                 memcpy(hostAddr, pkt-&gt;<a class="code" href="classPacket.html#a5c451baf3f0a89084e79e69bb9061200">getPtr</a>&lt;uint8_t&gt;(), pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>());
<a name="l00380"></a>00380                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(MemoryAccess, <span class="stringliteral">&quot;%s wrote %x bytes to address %x\n&quot;</span>,
<a name="l00381"></a>00381                         __func__, pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>(), pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>());
<a name="l00382"></a>00382             }
<a name="l00383"></a>00383             assert(!pkt-&gt;<a class="code" href="classPacket.html#a956cd41d82347558b9c0a5b0474903f2" title="A pointer to the original request.">req</a>-&gt;<a class="code" href="classRequest.html#ae742b8e8aaa2e18506dc64c7b7f3fc0a">isInstFetch</a>());
<a name="l00384"></a>00384             <a class="code" href="abstract__mem_8cc.html#a585e1b7e8e1875f7212a6defdcb63270">TRACE_PACKET</a>(<span class="stringliteral">&quot;Write&quot;</span>);
<a name="l00385"></a>00385             <a class="code" href="classAbstractMemory.html#acfd6a97aa6c2de05417a7403369e71c2">numWrites</a>[pkt-&gt;<a class="code" href="classPacket.html#a956cd41d82347558b9c0a5b0474903f2" title="A pointer to the original request.">req</a>-&gt;<a class="code" href="classRequest.html#a9b7d32db0521388c0953e531c79aab50">masterId</a>()]++;
<a name="l00386"></a>00386             <a class="code" href="classAbstractMemory.html#ab89ec4a4876671ad5186d0e9c0e674ed">bytesWritten</a>[pkt-&gt;<a class="code" href="classPacket.html#a956cd41d82347558b9c0a5b0474903f2" title="A pointer to the original request.">req</a>-&gt;<a class="code" href="classRequest.html#a9b7d32db0521388c0953e531c79aab50">masterId</a>()] += pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>();
<a name="l00387"></a>00387         }
<a name="l00388"></a>00388     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pkt-&gt;<a class="code" href="classPacket.html#a4a1a39b8ffab2d6266cd9d794ca332e3">isInvalidate</a>()) {
<a name="l00389"></a>00389         <span class="comment">// no need to do anything</span>
<a name="l00390"></a>00390     } <span class="keywordflow">else</span> {
<a name="l00391"></a>00391         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;unimplemented&quot;</span>);
<a name="l00392"></a>00392     }
<a name="l00393"></a>00393 
<a name="l00394"></a>00394     <span class="keywordflow">if</span> (pkt-&gt;<a class="code" href="classPacket.html#a390c6cced05593f0a2c75a38a7a24fa9">needsResponse</a>()) {
<a name="l00395"></a>00395         pkt-&gt;<a class="code" href="classPacket.html#a9330bf4cbbc7e25bbfc9626182df27e5">makeResponse</a>();
<a name="l00396"></a>00396     }
<a name="l00397"></a>00397 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a41e2bc27bc88cc5c7d1d8c7a905e7cfc"></a><!-- doxytag: member="AbstractMemory::addLockedAddr" ref="a41e2bc27bc88cc5c7d1d8c7a905e7cfc" args="(LockedAddr addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void addLockedAddr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classLockedAddr.html">LockedAddr</a>&nbsp;</td>
          <td class="paramname"> <em>addr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Add a locked address to allow for checkpointing. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00222"></a>00222 { <a class="code" href="classAbstractMemory.html#af35631da2ae35079d76e07c46fe78565">lockedAddrList</a>.push_back(addr); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af088ed7a675d24827a3300bdbc62e96a"></a><!-- doxytag: member="AbstractMemory::checkLockedAddrList" ref="af088ed7a675d24827a3300bdbc62e96a" args="(PacketPtr pkt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool checkLockedAddrList </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pkt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00221"></a>00221 {
<a name="l00222"></a>00222     <a class="code" href="classRequest.html">Request</a> *req = pkt-&gt;<a class="code" href="classPacket.html#a956cd41d82347558b9c0a5b0474903f2" title="A pointer to the original request.">req</a>;
<a name="l00223"></a>00223     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> paddr = <a class="code" href="namespaceArmISA.html#a9534dbda5e7db9881c7955c6e08cfdc0">LockedAddr::mask</a>(req-&gt;<a class="code" href="classRequest.html#a744ef11a5afe9d3651ce5f954259cb43">getPaddr</a>());
<a name="l00224"></a>00224     <span class="keywordtype">bool</span> isLLSC = pkt-&gt;<a class="code" href="classPacket.html#a8965874e960faf91ad4b6af8dbf31875">isLLSC</a>();
<a name="l00225"></a>00225 
<a name="l00226"></a>00226     <span class="comment">// Initialize return value.  Non-conditional stores always</span>
<a name="l00227"></a>00227     <span class="comment">// succeed.  Assume conditional stores will fail until proven</span>
<a name="l00228"></a>00228     <span class="comment">// otherwise.</span>
<a name="l00229"></a>00229     <span class="keywordtype">bool</span> allowStore = !isLLSC;
<a name="l00230"></a>00230 
<a name="l00231"></a>00231     <span class="comment">// Iterate over list.  Note that there could be multiple matching records,</span>
<a name="l00232"></a>00232     <span class="comment">// as more than one context could have done a load locked to this location.</span>
<a name="l00233"></a>00233     <span class="comment">// Only remove records when we succeed in finding a record for (xc, addr);</span>
<a name="l00234"></a>00234     <span class="comment">// then, remove all records with this address.  Failed store-conditionals do</span>
<a name="l00235"></a>00235     <span class="comment">// not blow unrelated reservations.</span>
<a name="l00236"></a>00236     <a class="code" href="classstd_1_1list.html">list&lt;LockedAddr&gt;::iterator</a> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = <a class="code" href="classAbstractMemory.html#af35631da2ae35079d76e07c46fe78565">lockedAddrList</a>.begin();
<a name="l00237"></a>00237 
<a name="l00238"></a>00238     <span class="keywordflow">if</span> (isLLSC) {
<a name="l00239"></a>00239         <span class="keywordflow">while</span> (i != <a class="code" href="classAbstractMemory.html#af35631da2ae35079d76e07c46fe78565">lockedAddrList</a>.end()) {
<a name="l00240"></a>00240             <span class="keywordflow">if</span> (i-&gt;addr == paddr &amp;&amp; i-&gt;matchesContext(req)) {
<a name="l00241"></a>00241                 <span class="comment">// it&apos;s a store conditional, and as far as the memory system can</span>
<a name="l00242"></a>00242                 <span class="comment">// tell, the requesting context&apos;s lock is still valid.</span>
<a name="l00243"></a>00243                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(LLSC, <span class="stringliteral">&quot;StCond success: context %d addr %#x\n&quot;</span>,
<a name="l00244"></a>00244                         req-&gt;<a class="code" href="classRequest.html#a651d5d14e7a4e95ebe6d7f5b8ee5a107">contextId</a>(), paddr);
<a name="l00245"></a>00245                 allowStore = <span class="keyword">true</span>;
<a name="l00246"></a>00246                 <span class="keywordflow">break</span>;
<a name="l00247"></a>00247             }
<a name="l00248"></a>00248             <span class="comment">// If we didn&apos;t find a match, keep searching!  Someone else may well</span>
<a name="l00249"></a>00249             <span class="comment">// have a reservation on this line here but we may find ours in just</span>
<a name="l00250"></a>00250             <span class="comment">// a little while.</span>
<a name="l00251"></a>00251             i++;
<a name="l00252"></a>00252         }
<a name="l00253"></a>00253         req-&gt;<a class="code" href="classRequest.html#ac73800a0bae4776befb9d416e95ea6d9">setExtraData</a>(allowStore ? 1 : 0);
<a name="l00254"></a>00254     }
<a name="l00255"></a>00255     <span class="comment">// LLSCs that succeeded AND non-LLSC stores both fall into here:</span>
<a name="l00256"></a>00256     <span class="keywordflow">if</span> (allowStore) {
<a name="l00257"></a>00257         <span class="comment">// We write address paddr.  However, there may be several entries with a</span>
<a name="l00258"></a>00258         <span class="comment">// reservation on this address (for other contextIds) and they must all</span>
<a name="l00259"></a>00259         <span class="comment">// be removed.</span>
<a name="l00260"></a>00260         i = <a class="code" href="classAbstractMemory.html#af35631da2ae35079d76e07c46fe78565">lockedAddrList</a>.begin();
<a name="l00261"></a>00261         <span class="keywordflow">while</span> (i != <a class="code" href="classAbstractMemory.html#af35631da2ae35079d76e07c46fe78565">lockedAddrList</a>.end()) {
<a name="l00262"></a>00262             <span class="keywordflow">if</span> (i-&gt;addr == paddr) {
<a name="l00263"></a>00263                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(LLSC, <span class="stringliteral">&quot;Erasing lock record: context %d addr %#x\n&quot;</span>,
<a name="l00264"></a>00264                         i-&gt;contextId, paddr);
<a name="l00265"></a>00265                 <span class="comment">// For ARM, a spinlock would typically include a Wait</span>
<a name="l00266"></a>00266                 <span class="comment">// For Event (WFE) to conserve energy. The ARMv8</span>
<a name="l00267"></a>00267                 <span class="comment">// architecture specifies that an event is</span>
<a name="l00268"></a>00268                 <span class="comment">// automatically generated when clearing the exclusive</span>
<a name="l00269"></a>00269                 <span class="comment">// monitor to wake up the processor in WFE.</span>
<a name="l00270"></a>00270                 <a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;<a class="code" href="classSystem.html#af349994bde91bd82c98f31e10c495cd1">getThreadContext</a>(i-&gt;contextId)-&gt;<a class="code" href="classThreadContext.html#ad10a7ef049c2d2ffadfc809341e66d4e">getCpuPtr</a>()-&gt;<a class="code" href="classBaseCPU.html#a75101f8aee74078c8c3c1d1f3617f7cc">wakeup</a>();
<a name="l00271"></a>00271                 i = <a class="code" href="classAbstractMemory.html#af35631da2ae35079d76e07c46fe78565">lockedAddrList</a>.erase(i);
<a name="l00272"></a>00272             } <span class="keywordflow">else</span> {
<a name="l00273"></a>00273                 i++;
<a name="l00274"></a>00274             }
<a name="l00275"></a>00275         }
<a name="l00276"></a>00276     }
<a name="l00277"></a>00277 
<a name="l00278"></a>00278     <span class="keywordflow">return</span> allowStore;
<a name="l00279"></a>00279 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ace845b5316308e12fd958fa5df09a8e8"></a><!-- doxytag: member="AbstractMemory::functionalAccess" ref="ace845b5316308e12fd958fa5df09a8e8" args="(PacketPtr pkt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void functionalAccess </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pkt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Perform an untimed memory read or write without changing anything but the memory itself. No stats are affected by this access. In addition to normal accesses this also facilitates print requests.</p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pkt</em>&nbsp;</td><td><a class="el" href="classPacket.html">Packet</a> performing the access </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00401"></a>00401 {
<a name="l00402"></a>00402     assert(<a class="code" href="classAddrRange.html">AddrRange</a>(pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>(),
<a name="l00403"></a>00403                      pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>() + pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>() - 1).isSubset(<a class="code" href="classAbstractMemory.html#a194876a072a83a9fd59dde82e5213f0d">range</a>));
<a name="l00404"></a>00404 
<a name="l00405"></a>00405     uint8_t *hostAddr = <a class="code" href="classAbstractMemory.html#a9f8ed24d8442f662831d51922e7fddd2">pmemAddr</a> + pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>() - <a class="code" href="classAbstractMemory.html#a194876a072a83a9fd59dde82e5213f0d">range</a>.<a class="code" href="classAddrRange.html#a85325674b7aed05d6b4e40a48563189b">start</a>();
<a name="l00406"></a>00406 
<a name="l00407"></a>00407     <span class="keywordflow">if</span> (pkt-&gt;<a class="code" href="classPacket.html#adc47901747fc3c447db3abddaf01491a">isRead</a>()) {
<a name="l00408"></a>00408         <span class="keywordflow">if</span> (<a class="code" href="classAbstractMemory.html#a9f8ed24d8442f662831d51922e7fddd2">pmemAddr</a>)
<a name="l00409"></a>00409             memcpy(pkt-&gt;<a class="code" href="classPacket.html#a5c451baf3f0a89084e79e69bb9061200">getPtr</a>&lt;uint8_t&gt;(), hostAddr, pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>());
<a name="l00410"></a>00410         <a class="code" href="abstract__mem_8cc.html#a585e1b7e8e1875f7212a6defdcb63270">TRACE_PACKET</a>(<span class="stringliteral">&quot;Read&quot;</span>);
<a name="l00411"></a>00411         pkt-&gt;<a class="code" href="classPacket.html#a9330bf4cbbc7e25bbfc9626182df27e5">makeResponse</a>();
<a name="l00412"></a>00412     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pkt-&gt;<a class="code" href="classPacket.html#ab699d2f0d186312531fd1c279fd27b73">isWrite</a>()) {
<a name="l00413"></a>00413         <span class="keywordflow">if</span> (<a class="code" href="classAbstractMemory.html#a9f8ed24d8442f662831d51922e7fddd2">pmemAddr</a>)
<a name="l00414"></a>00414             memcpy(hostAddr, pkt-&gt;<a class="code" href="classPacket.html#a5c451baf3f0a89084e79e69bb9061200">getPtr</a>&lt;uint8_t&gt;(), pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>());
<a name="l00415"></a>00415         <a class="code" href="abstract__mem_8cc.html#a585e1b7e8e1875f7212a6defdcb63270">TRACE_PACKET</a>(<span class="stringliteral">&quot;Write&quot;</span>);
<a name="l00416"></a>00416         pkt-&gt;<a class="code" href="classPacket.html#a9330bf4cbbc7e25bbfc9626182df27e5">makeResponse</a>();
<a name="l00417"></a>00417     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pkt-&gt;<a class="code" href="classPacket.html#ae56bb417ddf53e85cb389267590fe969">isPrint</a>()) {
<a name="l00418"></a>00418         <a class="code" href="classPacket_1_1PrintReqState.html">Packet::PrintReqState</a> *prs =
<a name="l00419"></a>00419             <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classPacket_1_1PrintReqState.html">Packet::PrintReqState</a>*<span class="keyword">&gt;</span>(pkt-&gt;<a class="code" href="classPacket.html#a983ade0479f946c813284dcc65073367">senderState</a>);
<a name="l00420"></a>00420         assert(prs);
<a name="l00421"></a>00421         <span class="comment">// Need to call printLabels() explicitly since we&apos;re not going</span>
<a name="l00422"></a>00422         <span class="comment">// through printObj().</span>
<a name="l00423"></a>00423         prs-&gt;<a class="code" href="classPacket_1_1PrintReqState.html#afbf1f814881d73eefde6bccdde641db8">printLabels</a>();
<a name="l00424"></a>00424         <span class="comment">// Right now we just print the single byte at the specified address.</span>
<a name="l00425"></a>00425         <a class="code" href="cprintf_8hh.html#ab172c0b086575bda3d04daee7df17da1">ccprintf</a>(prs-&gt;<a class="code" href="classPacket_1_1PrintReqState.html#a1a917786b846a8a836dd09f6970db62a">os</a>, <span class="stringliteral">&quot;%s%#x\n&quot;</span>, prs-&gt;<a class="code" href="classPacket_1_1PrintReqState.html#ad5d5a6a6da677a4961b84d82bbe05153">curPrefix</a>(), *hostAddr);
<a name="l00426"></a>00426     } <span class="keywordflow">else</span> {
<a name="l00427"></a>00427         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;AbstractMemory: unimplemented functional command %s&quot;</span>,
<a name="l00428"></a>00428               pkt-&gt;<a class="code" href="classPacket.html#a863af57e28a01258236ea303155fc7ff">cmdString</a>());
<a name="l00429"></a>00429     }
<a name="l00430"></a>00430 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa3df62a6c92a30a0ab9247f8ec9e6e7a"></a><!-- doxytag: member="AbstractMemory::getAddrRange" ref="aa3df62a6c92a30a0ab9247f8ec9e6e7a" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classAddrRange.html">AddrRange</a> getAddrRange </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the address range</p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>a single contigous address range </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00182"></a>00182 {
<a name="l00183"></a>00183     <span class="keywordflow">return</span> <a class="code" href="classAbstractMemory.html#a194876a072a83a9fd59dde82e5213f0d">range</a>;
<a name="l00184"></a>00184 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5b569455e6a1bd8629737fa02564a9a8"></a><!-- doxytag: member="AbstractMemory::getLockedAddrList" ref="a5b569455e6a1bd8629737fa02564a9a8" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classstd_1_1list.html">std::list</a>&lt;<a class="el" href="classLockedAddr.html">LockedAddr</a>&gt;&amp; getLockedAddrList </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the list of locked addresses to allow checkpointing. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00217"></a>00217     { <span class="keywordflow">return</span> <a class="code" href="classAbstractMemory.html#af35631da2ae35079d76e07c46fe78565">lockedAddrList</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aca224861e09cf94a49088bb51bb02350"></a><!-- doxytag: member="AbstractMemory::isConfReported" ref="aca224861e09cf94a49088bb51bb02350" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool isConfReported </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Should this memory be passed to the kernel and part of the OS physical memory layout.</p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>if this memory is reported </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00270"></a>00270 { <span class="keywordflow">return</span> <a class="code" href="classAbstractMemory.html#adee792d6bf567779ea9c16640af42784">confTableReported</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad89e9980a76342142d63ff15deb19497"></a><!-- doxytag: member="AbstractMemory::isInAddrMap" ref="ad89e9980a76342142d63ff15deb19497" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool isInAddrMap </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Some memories are used as shadow memories or should for other reasons not be part of the global address map.</p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>if this memory is part of the address map </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00278"></a>00278 { <span class="keywordflow">return</span> <a class="code" href="classAbstractMemory.html#a7302c053380cdccd0bdf63b25f73cbc5">inAddrMap</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac02f2a4d7312eb91f40980adfd4e31b2"></a><!-- doxytag: member="AbstractMemory::isNull" ref="ac02f2a4d7312eb91f40980adfd4e31b2" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool isNull </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>See if this is a null memory that should never store data and always return zero.</p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>true if null </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00203"></a>00203 { <span class="keywordflow">return</span> <a class="code" href="classAbstractMemory.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;null; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8524c3be63882adac591f591519f3a3b"></a><!-- doxytag: member="AbstractMemory::operator=" ref="a8524c3be63882adac591f591519f3a3b" args="(const AbstractMemory &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classAbstractMemory_1_1AbstractMemory.html">AbstractMemory</a>&amp; operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classAbstractMemory_1_1AbstractMemory.html">AbstractMemory</a> &amp;&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="acd3c3feb78ae7a8f88fe0f110a718dff"></a><!-- doxytag: member="AbstractMemory::params" ref="acd3c3feb78ae7a8f88fe0f110a718dff" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classAbstractMemory.html#ab4fcbcbcfef78d6bc871995f8eca40eb">Params</a>* params </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMemObject.html#acd3c3feb78ae7a8f88fe0f110a718dff">MemObject</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00239"></a>00239     {
<a name="l00240"></a>00240         <span class="keywordflow">return</span> <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classAbstractMemory.html#ab4fcbcbcfef78d6bc871995f8eca40eb">Params</a> *<span class="keyword">&gt;</span>(<a class="code" href="classSimObject.html#acaf6024ae9dda44bfb1c67e05ad70aef">_params</a>);
<a name="l00241"></a>00241     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4dc637449366fcdfc4e764cdf12d9b11"></a><!-- doxytag: member="AbstractMemory::regStats" ref="a4dc637449366fcdfc4e764cdf12d9b11" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void regStats </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classRegister.html">Register</a> Statistics </p>

<p><a class="el" href="classSimObject.html#a4dc637449366fcdfc4e764cdf12d9b11">SimObject</a>を再定義しています。</p>

<p><a class="el" href="classDRAMCtrl.html#a4dc637449366fcdfc4e764cdf12d9b11">DRAMCtrl</a>で再定義されています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00074"></a>00074 {
<a name="l00075"></a>00075     <span class="keyword">using namespace </span>Stats;
<a name="l00076"></a>00076 
<a name="l00077"></a>00077     assert(<a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>());
<a name="l00078"></a>00078 
<a name="l00079"></a>00079     <a class="code" href="classAbstractMemory.html#aa36971a2ea8ddd9d82832059cbc1b21f">bytesRead</a>
<a name="l00080"></a>00080         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;maxMasters())
<a name="l00081"></a>00081         .name(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.bytes_read&quot;</span>)
<a name="l00082"></a>00082         .desc(<span class="stringliteral">&quot;Number of bytes read from this memory&quot;</span>)
<a name="l00083"></a>00083         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a> | <a class="code" href="namespaceStats.html#aea66fede55fadabd06c458fb36736378">nozero</a> | <a class="code" href="namespaceStats.html#a8e574059d445838aa4d851c263cb0e78">nonan</a>)
<a name="l00084"></a>00084         ;
<a name="l00085"></a>00085     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;<a class="code" href="classSystem.html#a4cd916c36458ce47e9ba4ccbfc75a095">maxMasters</a>(); <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00086"></a>00086         <a class="code" href="classAbstractMemory.html#aa36971a2ea8ddd9d82832059cbc1b21f">bytesRead</a>.<a class="code" href="classStats_1_1DataWrapVec.html#a74726d23d92792c7c3cebdaf3bfd23f0">subname</a>(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>, <a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;getMasterName(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>));
<a name="l00087"></a>00087     }
<a name="l00088"></a>00088     <a class="code" href="classAbstractMemory.html#a5e52eb4a824c1fb452d77dae86dfa970">bytesInstRead</a>
<a name="l00089"></a>00089         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;maxMasters())
<a name="l00090"></a>00090         .name(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.bytes_inst_read&quot;</span>)
<a name="l00091"></a>00091         .desc(<span class="stringliteral">&quot;Number of instructions bytes read from this memory&quot;</span>)
<a name="l00092"></a>00092         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a> | <a class="code" href="namespaceStats.html#aea66fede55fadabd06c458fb36736378">nozero</a> | <a class="code" href="namespaceStats.html#a8e574059d445838aa4d851c263cb0e78">nonan</a>)
<a name="l00093"></a>00093         ;
<a name="l00094"></a>00094     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;<a class="code" href="classSystem.html#a4cd916c36458ce47e9ba4ccbfc75a095">maxMasters</a>(); <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00095"></a>00095         <a class="code" href="classAbstractMemory.html#a5e52eb4a824c1fb452d77dae86dfa970">bytesInstRead</a>.<a class="code" href="classStats_1_1DataWrapVec.html#a74726d23d92792c7c3cebdaf3bfd23f0">subname</a>(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>, <a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;getMasterName(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>));
<a name="l00096"></a>00096     }
<a name="l00097"></a>00097     <a class="code" href="classAbstractMemory.html#ab89ec4a4876671ad5186d0e9c0e674ed">bytesWritten</a>
<a name="l00098"></a>00098         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;maxMasters())
<a name="l00099"></a>00099         .name(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.bytes_written&quot;</span>)
<a name="l00100"></a>00100         .desc(<span class="stringliteral">&quot;Number of bytes written to this memory&quot;</span>)
<a name="l00101"></a>00101         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a> | <a class="code" href="namespaceStats.html#aea66fede55fadabd06c458fb36736378">nozero</a> | <a class="code" href="namespaceStats.html#a8e574059d445838aa4d851c263cb0e78">nonan</a>)
<a name="l00102"></a>00102         ;
<a name="l00103"></a>00103     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;<a class="code" href="classSystem.html#a4cd916c36458ce47e9ba4ccbfc75a095">maxMasters</a>(); <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00104"></a>00104         <a class="code" href="classAbstractMemory.html#ab89ec4a4876671ad5186d0e9c0e674ed">bytesWritten</a>.<a class="code" href="classStats_1_1DataWrapVec.html#a74726d23d92792c7c3cebdaf3bfd23f0">subname</a>(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>, <a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;getMasterName(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>));
<a name="l00105"></a>00105     }
<a name="l00106"></a>00106     <a class="code" href="classAbstractMemory.html#a27f442fbcb7bc7661412cc1d96ca51e7">numReads</a>
<a name="l00107"></a>00107         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;maxMasters())
<a name="l00108"></a>00108         .name(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.num_reads&quot;</span>)
<a name="l00109"></a>00109         .desc(<span class="stringliteral">&quot;Number of read requests responded to by this memory&quot;</span>)
<a name="l00110"></a>00110         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a> | <a class="code" href="namespaceStats.html#aea66fede55fadabd06c458fb36736378">nozero</a> | <a class="code" href="namespaceStats.html#a8e574059d445838aa4d851c263cb0e78">nonan</a>)
<a name="l00111"></a>00111         ;
<a name="l00112"></a>00112     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;<a class="code" href="classSystem.html#a4cd916c36458ce47e9ba4ccbfc75a095">maxMasters</a>(); <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00113"></a>00113         <a class="code" href="classAbstractMemory.html#a27f442fbcb7bc7661412cc1d96ca51e7">numReads</a>.<a class="code" href="classStats_1_1DataWrapVec.html#a74726d23d92792c7c3cebdaf3bfd23f0">subname</a>(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>, <a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;getMasterName(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>));
<a name="l00114"></a>00114     }
<a name="l00115"></a>00115     <a class="code" href="classAbstractMemory.html#acfd6a97aa6c2de05417a7403369e71c2">numWrites</a>
<a name="l00116"></a>00116         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;maxMasters())
<a name="l00117"></a>00117         .name(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.num_writes&quot;</span>)
<a name="l00118"></a>00118         .desc(<span class="stringliteral">&quot;Number of write requests responded to by this memory&quot;</span>)
<a name="l00119"></a>00119         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a> | <a class="code" href="namespaceStats.html#aea66fede55fadabd06c458fb36736378">nozero</a> | <a class="code" href="namespaceStats.html#a8e574059d445838aa4d851c263cb0e78">nonan</a>)
<a name="l00120"></a>00120         ;
<a name="l00121"></a>00121     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;<a class="code" href="classSystem.html#a4cd916c36458ce47e9ba4ccbfc75a095">maxMasters</a>(); <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00122"></a>00122         <a class="code" href="classAbstractMemory.html#acfd6a97aa6c2de05417a7403369e71c2">numWrites</a>.<a class="code" href="classStats_1_1DataWrapVec.html#a74726d23d92792c7c3cebdaf3bfd23f0">subname</a>(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>, <a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;getMasterName(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>));
<a name="l00123"></a>00123     }
<a name="l00124"></a>00124     <a class="code" href="classAbstractMemory.html#a52bafd014022e75d82b4e0de25d3faf7">numOther</a>
<a name="l00125"></a>00125         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;maxMasters())
<a name="l00126"></a>00126         .name(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.num_other&quot;</span>)
<a name="l00127"></a>00127         .desc(<span class="stringliteral">&quot;Number of other requests responded to by this memory&quot;</span>)
<a name="l00128"></a>00128         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a> | <a class="code" href="namespaceStats.html#aea66fede55fadabd06c458fb36736378">nozero</a> | <a class="code" href="namespaceStats.html#a8e574059d445838aa4d851c263cb0e78">nonan</a>)
<a name="l00129"></a>00129         ;
<a name="l00130"></a>00130     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;<a class="code" href="classSystem.html#a4cd916c36458ce47e9ba4ccbfc75a095">maxMasters</a>(); <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00131"></a>00131         <a class="code" href="classAbstractMemory.html#a52bafd014022e75d82b4e0de25d3faf7">numOther</a>.<a class="code" href="classStats_1_1DataWrapVec.html#a74726d23d92792c7c3cebdaf3bfd23f0">subname</a>(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>, <a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;getMasterName(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>));
<a name="l00132"></a>00132     }
<a name="l00133"></a>00133     <a class="code" href="classAbstractMemory.html#a14a0a95f3cd104b70d5b5c19c3ee8099">bwRead</a>
<a name="l00134"></a>00134         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.bw_read&quot;</span>)
<a name="l00135"></a>00135         .desc(<span class="stringliteral">&quot;Total read bandwidth from this memory (bytes/s)&quot;</span>)
<a name="l00136"></a>00136         .precision(0)
<a name="l00137"></a>00137         .prereq(<a class="code" href="classAbstractMemory.html#aa36971a2ea8ddd9d82832059cbc1b21f">bytesRead</a>)
<a name="l00138"></a>00138         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a> | <a class="code" href="namespaceStats.html#aea66fede55fadabd06c458fb36736378">nozero</a> | <a class="code" href="namespaceStats.html#a8e574059d445838aa4d851c263cb0e78">nonan</a>)
<a name="l00139"></a>00139         ;
<a name="l00140"></a>00140     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;<a class="code" href="classSystem.html#a4cd916c36458ce47e9ba4ccbfc75a095">maxMasters</a>(); <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00141"></a>00141         <a class="code" href="classAbstractMemory.html#a14a0a95f3cd104b70d5b5c19c3ee8099">bwRead</a>.<a class="code" href="classStats_1_1DataWrapVec.html#a74726d23d92792c7c3cebdaf3bfd23f0">subname</a>(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>, <a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;getMasterName(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>));
<a name="l00142"></a>00142     }
<a name="l00143"></a>00143 
<a name="l00144"></a>00144     <a class="code" href="classAbstractMemory.html#a00512ebb77886b71a63bd1595828d592">bwInstRead</a>
<a name="l00145"></a>00145         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.bw_inst_read&quot;</span>)
<a name="l00146"></a>00146         .desc(<span class="stringliteral">&quot;Instruction read bandwidth from this memory (bytes/s)&quot;</span>)
<a name="l00147"></a>00147         .precision(0)
<a name="l00148"></a>00148         .prereq(<a class="code" href="classAbstractMemory.html#a5e52eb4a824c1fb452d77dae86dfa970">bytesInstRead</a>)
<a name="l00149"></a>00149         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a> | <a class="code" href="namespaceStats.html#aea66fede55fadabd06c458fb36736378">nozero</a> | <a class="code" href="namespaceStats.html#a8e574059d445838aa4d851c263cb0e78">nonan</a>)
<a name="l00150"></a>00150         ;
<a name="l00151"></a>00151     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;<a class="code" href="classSystem.html#a4cd916c36458ce47e9ba4ccbfc75a095">maxMasters</a>(); <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00152"></a>00152         <a class="code" href="classAbstractMemory.html#a00512ebb77886b71a63bd1595828d592">bwInstRead</a>.<a class="code" href="classStats_1_1DataWrapVec.html#a74726d23d92792c7c3cebdaf3bfd23f0">subname</a>(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>, <a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;getMasterName(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>));
<a name="l00153"></a>00153     }
<a name="l00154"></a>00154     <a class="code" href="classAbstractMemory.html#a8077d31db9c4f4f9e78888def6de8430">bwWrite</a>
<a name="l00155"></a>00155         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.bw_write&quot;</span>)
<a name="l00156"></a>00156         .desc(<span class="stringliteral">&quot;Write bandwidth from this memory (bytes/s)&quot;</span>)
<a name="l00157"></a>00157         .precision(0)
<a name="l00158"></a>00158         .prereq(<a class="code" href="classAbstractMemory.html#ab89ec4a4876671ad5186d0e9c0e674ed">bytesWritten</a>)
<a name="l00159"></a>00159         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a> | <a class="code" href="namespaceStats.html#aea66fede55fadabd06c458fb36736378">nozero</a> | <a class="code" href="namespaceStats.html#a8e574059d445838aa4d851c263cb0e78">nonan</a>)
<a name="l00160"></a>00160         ;
<a name="l00161"></a>00161     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;<a class="code" href="classSystem.html#a4cd916c36458ce47e9ba4ccbfc75a095">maxMasters</a>(); <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00162"></a>00162         <a class="code" href="classAbstractMemory.html#a8077d31db9c4f4f9e78888def6de8430">bwWrite</a>.<a class="code" href="classStats_1_1DataWrapVec.html#a74726d23d92792c7c3cebdaf3bfd23f0">subname</a>(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>, <a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;getMasterName(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>));
<a name="l00163"></a>00163     }
<a name="l00164"></a>00164     <a class="code" href="classAbstractMemory.html#a678ff8c93c78d0be1884742ef8aa41e8">bwTotal</a>
<a name="l00165"></a>00165         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.bw_total&quot;</span>)
<a name="l00166"></a>00166         .desc(<span class="stringliteral">&quot;Total bandwidth to/from this memory (bytes/s)&quot;</span>)
<a name="l00167"></a>00167         .precision(0)
<a name="l00168"></a>00168         .prereq(<a class="code" href="classAbstractMemory.html#a678ff8c93c78d0be1884742ef8aa41e8">bwTotal</a>)
<a name="l00169"></a>00169         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a> | <a class="code" href="namespaceStats.html#aea66fede55fadabd06c458fb36736378">nozero</a> | <a class="code" href="namespaceStats.html#a8e574059d445838aa4d851c263cb0e78">nonan</a>)
<a name="l00170"></a>00170         ;
<a name="l00171"></a>00171     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;<a class="code" href="classSystem.html#a4cd916c36458ce47e9ba4ccbfc75a095">maxMasters</a>(); <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00172"></a>00172         <a class="code" href="classAbstractMemory.html#a678ff8c93c78d0be1884742ef8aa41e8">bwTotal</a>.<a class="code" href="classStats_1_1DataWrapVec.html#a74726d23d92792c7c3cebdaf3bfd23f0">subname</a>(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>, <a class="code" href="classAbstractMemory.html#a83984c42bc765168929779ed9a37ebe8">system</a>()-&gt;getMasterName(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>));
<a name="l00173"></a>00173     }
<a name="l00174"></a>00174     <a class="code" href="classAbstractMemory.html#a14a0a95f3cd104b70d5b5c19c3ee8099">bwRead</a> = <a class="code" href="classAbstractMemory.html#aa36971a2ea8ddd9d82832059cbc1b21f">bytesRead</a> / <a class="code" href="stat__control_8cc.html#aaad77dbb4162ef5a66c24dcd1ce256d0">simSeconds</a>;
<a name="l00175"></a>00175     <a class="code" href="classAbstractMemory.html#a00512ebb77886b71a63bd1595828d592">bwInstRead</a> = <a class="code" href="classAbstractMemory.html#a5e52eb4a824c1fb452d77dae86dfa970">bytesInstRead</a> / <a class="code" href="stat__control_8cc.html#aaad77dbb4162ef5a66c24dcd1ce256d0">simSeconds</a>;
<a name="l00176"></a>00176     <a class="code" href="classAbstractMemory.html#a8077d31db9c4f4f9e78888def6de8430">bwWrite</a> = <a class="code" href="classAbstractMemory.html#ab89ec4a4876671ad5186d0e9c0e674ed">bytesWritten</a> / <a class="code" href="stat__control_8cc.html#aaad77dbb4162ef5a66c24dcd1ce256d0">simSeconds</a>;
<a name="l00177"></a>00177     <a class="code" href="classAbstractMemory.html#a678ff8c93c78d0be1884742ef8aa41e8">bwTotal</a> = (<a class="code" href="classAbstractMemory.html#aa36971a2ea8ddd9d82832059cbc1b21f">bytesRead</a> + <a class="code" href="classAbstractMemory.html#ab89ec4a4876671ad5186d0e9c0e674ed">bytesWritten</a>) / <a class="code" href="stat__control_8cc.html#aaad77dbb4162ef5a66c24dcd1ce256d0">simSeconds</a>;
<a name="l00178"></a>00178 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2651a6edea3b7884410b1abefac8b2de"></a><!-- doxytag: member="AbstractMemory::setBackingStore" ref="a2651a6edea3b7884410b1abefac8b2de" args="(uint8_t *pmem_addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setBackingStore </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&nbsp;</td>
          <td class="paramname"> <em>pmem_addr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classSet.html">Set</a> the host memory backing store to be used by this memory controller.</p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pmem_addr</em>&nbsp;</td><td>Pointer to a segment of host memory </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00068"></a>00068 {
<a name="l00069"></a>00069     <a class="code" href="classAbstractMemory.html#a9f8ed24d8442f662831d51922e7fddd2">pmemAddr</a> = pmem_addr;
<a name="l00070"></a>00070 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0b6868dbef44fc07f11d050eb59e5f7e"></a><!-- doxytag: member="AbstractMemory::size" ref="a0b6868dbef44fc07f11d050eb59e5f7e" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t size </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the memory size.</p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>the size of the memory </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00255"></a>00255 { <span class="keywordflow">return</span> <a class="code" href="classAbstractMemory.html#a194876a072a83a9fd59dde82e5213f0d">range</a>.<a class="code" href="classAddrRange.html#ade0faa4f478bf244b35fb208d640c648">size</a>(); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a85325674b7aed05d6b4e40a48563189b"></a><!-- doxytag: member="AbstractMemory::start" ref="a85325674b7aed05d6b4e40a48563189b" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> start </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the start address.</p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>the start address of the memory </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00262"></a>00262 { <span class="keywordflow">return</span> <a class="code" href="classAbstractMemory.html#a194876a072a83a9fd59dde82e5213f0d">range</a>.<a class="code" href="classAddrRange.html#a85325674b7aed05d6b4e40a48563189b">start</a>(); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad086bdc3ed123ad02169847d658bf5cb"></a><!-- doxytag: member="AbstractMemory::system" ref="ad086bdc3ed123ad02169847d658bf5cb" args="(System *sys)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void system </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSystem.html">System</a> *&nbsp;</td>
          <td class="paramname"> <em>sys</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classSet.html">Set</a> the system pointer on this memory This can't be done via a python parameter because the system needs pointers to all the memories and the reverse would create a cycle in the object graph. An <a class="el" href="classSimObject.html#a02fd73d861ef2e4aabb38c0c9ff82947">init()</a> this is set. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sys</em>&nbsp;</td><td>system pointer to set </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00235"></a>00235 { <a class="code" href="classAbstractMemory.html#a1da55f4024bf8a9b14b64054841148b8">_system</a> = sys; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a83984c42bc765168929779ed9a37ebe8"></a><!-- doxytag: member="AbstractMemory::system" ref="a83984c42bc765168929779ed9a37ebe8" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSystem.html">System</a>* system </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>read the system pointer Implemented for completeness with the setter </p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>pointer to the system object </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00227"></a>00227 { <span class="keywordflow">return</span> <a class="code" href="classAbstractMemory.html#a1da55f4024bf8a9b14b64054841148b8">_system</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad317aec11d97a72993e653755fa1c003"></a><!-- doxytag: member="AbstractMemory::trackLoadLocked" ref="ad317aec11d97a72993e653755fa1c003" args="(PacketPtr pkt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trackLoadLocked </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pkt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00190"></a>00190 {
<a name="l00191"></a>00191     <a class="code" href="classRequest.html">Request</a> *req = pkt-&gt;<a class="code" href="classPacket.html#a956cd41d82347558b9c0a5b0474903f2" title="A pointer to the original request.">req</a>;
<a name="l00192"></a>00192     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> paddr = <a class="code" href="namespaceArmISA.html#a9534dbda5e7db9881c7955c6e08cfdc0">LockedAddr::mask</a>(req-&gt;<a class="code" href="classRequest.html#a744ef11a5afe9d3651ce5f954259cb43">getPaddr</a>());
<a name="l00193"></a>00193 
<a name="l00194"></a>00194     <span class="comment">// first we check if we already have a locked addr for this</span>
<a name="l00195"></a>00195     <span class="comment">// xc.  Since each xc only gets one, we just update the</span>
<a name="l00196"></a>00196     <span class="comment">// existing record with the new address.</span>
<a name="l00197"></a>00197     <a class="code" href="classstd_1_1list.html">list&lt;LockedAddr&gt;::iterator</a> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>;
<a name="l00198"></a>00198 
<a name="l00199"></a>00199     <span class="keywordflow">for</span> (i = <a class="code" href="classAbstractMemory.html#af35631da2ae35079d76e07c46fe78565">lockedAddrList</a>.begin(); i != <a class="code" href="classAbstractMemory.html#af35631da2ae35079d76e07c46fe78565">lockedAddrList</a>.end(); ++i) {
<a name="l00200"></a>00200         <span class="keywordflow">if</span> (i-&gt;matchesContext(req)) {
<a name="l00201"></a>00201             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(LLSC, <span class="stringliteral">&quot;Modifying lock record: context %d addr %#x\n&quot;</span>,
<a name="l00202"></a>00202                     req-&gt;<a class="code" href="classRequest.html#a651d5d14e7a4e95ebe6d7f5b8ee5a107">contextId</a>(), paddr);
<a name="l00203"></a>00203             i-&gt;addr = paddr;
<a name="l00204"></a>00204             <span class="keywordflow">return</span>;
<a name="l00205"></a>00205         }
<a name="l00206"></a>00206     }
<a name="l00207"></a>00207 
<a name="l00208"></a>00208     <span class="comment">// no record for this xc: need to allocate a new one</span>
<a name="l00209"></a>00209     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(LLSC, <span class="stringliteral">&quot;Adding lock record: context %d addr %#x\n&quot;</span>,
<a name="l00210"></a>00210             req-&gt;<a class="code" href="classRequest.html#a651d5d14e7a4e95ebe6d7f5b8ee5a107">contextId</a>(), paddr);
<a name="l00211"></a>00211     <a class="code" href="classAbstractMemory.html#af35631da2ae35079d76e07c46fe78565">lockedAddrList</a>.push_front(<a class="code" href="classLockedAddr.html">LockedAddr</a>(req));
<a name="l00212"></a>00212 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab1136219a28374092ad398d673bd23e0"></a><!-- doxytag: member="AbstractMemory::writeOK" ref="ab1136219a28374092ad398d673bd23e0" args="(PacketPtr pkt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool writeOK </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pkt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00139"></a>00139                                 {
<a name="l00140"></a>00140         <a class="code" href="classRequest.html">Request</a> *req = pkt-&gt;<a class="code" href="classPacket.html#a956cd41d82347558b9c0a5b0474903f2" title="A pointer to the original request.">req</a>;
<a name="l00141"></a>00141         <span class="keywordflow">if</span> (<a class="code" href="classAbstractMemory.html#af35631da2ae35079d76e07c46fe78565">lockedAddrList</a>.empty()) {
<a name="l00142"></a>00142             <span class="comment">// no locked addrs: nothing to check, store_conditional fails</span>
<a name="l00143"></a>00143             <span class="keywordtype">bool</span> isLLSC = pkt-&gt;<a class="code" href="classPacket.html#a8965874e960faf91ad4b6af8dbf31875">isLLSC</a>();
<a name="l00144"></a>00144             <span class="keywordflow">if</span> (isLLSC) {
<a name="l00145"></a>00145                 req-&gt;<a class="code" href="classRequest.html#ac73800a0bae4776befb9d416e95ea6d9">setExtraData</a>(0);
<a name="l00146"></a>00146             }
<a name="l00147"></a>00147             <span class="keywordflow">return</span> !isLLSC; <span class="comment">// only do write if not an sc</span>
<a name="l00148"></a>00148         } <span class="keywordflow">else</span> {
<a name="l00149"></a>00149             <span class="comment">// iterate over list...</span>
<a name="l00150"></a>00150             <span class="keywordflow">return</span> <a class="code" href="classAbstractMemory.html#af088ed7a675d24827a3300bdbc62e96a">checkLockedAddrList</a>(pkt);
<a name="l00151"></a>00151         }
<a name="l00152"></a>00152     }
</pre></div></p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="a1da55f4024bf8a9b14b64054841148b8"></a><!-- doxytag: member="AbstractMemory::_system" ref="a1da55f4024bf8a9b14b64054841148b8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSystem.html">System</a>* <a class="el" href="classAbstractMemory.html#a1da55f4024bf8a9b14b64054841148b8">_system</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pointor to the <a class="el" href="classSystem.html">System</a> object. This is used for getting the number of masters in the system which is needed when registering stats </p>

</div>
</div>
<a class="anchor" id="a00512ebb77886b71a63bd1595828d592"></a><!-- doxytag: member="AbstractMemory::bwInstRead" ref="a00512ebb77886b71a63bd1595828d592" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Formula.html">Stats::Formula</a> <a class="el" href="classAbstractMemory.html#a00512ebb77886b71a63bd1595828d592">bwInstRead</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Read bandwidth from this memory </p>

</div>
</div>
<a class="anchor" id="a14a0a95f3cd104b70d5b5c19c3ee8099"></a><!-- doxytag: member="AbstractMemory::bwRead" ref="a14a0a95f3cd104b70d5b5c19c3ee8099" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Formula.html">Stats::Formula</a> <a class="el" href="classAbstractMemory.html#a14a0a95f3cd104b70d5b5c19c3ee8099">bwRead</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Read bandwidth from this memory </p>

</div>
</div>
<a class="anchor" id="a678ff8c93c78d0be1884742ef8aa41e8"></a><!-- doxytag: member="AbstractMemory::bwTotal" ref="a678ff8c93c78d0be1884742ef8aa41e8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Formula.html">Stats::Formula</a> <a class="el" href="classAbstractMemory.html#a678ff8c93c78d0be1884742ef8aa41e8">bwTotal</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Total bandwidth from this memory </p>

</div>
</div>
<a class="anchor" id="a8077d31db9c4f4f9e78888def6de8430"></a><!-- doxytag: member="AbstractMemory::bwWrite" ref="a8077d31db9c4f4f9e78888def6de8430" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Formula.html">Stats::Formula</a> <a class="el" href="classAbstractMemory.html#a8077d31db9c4f4f9e78888def6de8430">bwWrite</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Write bandwidth from this memory </p>

</div>
</div>
<a class="anchor" id="a5e52eb4a824c1fb452d77dae86dfa970"></a><!-- doxytag: member="AbstractMemory::bytesInstRead" ref="a5e52eb4a824c1fb452d77dae86dfa970" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a> <a class="el" href="classAbstractMemory.html#a5e52eb4a824c1fb452d77dae86dfa970">bytesInstRead</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of instruction bytes read from this memory </p>

</div>
</div>
<a class="anchor" id="aa36971a2ea8ddd9d82832059cbc1b21f"></a><!-- doxytag: member="AbstractMemory::bytesRead" ref="aa36971a2ea8ddd9d82832059cbc1b21f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a> <a class="el" href="classAbstractMemory.html#aa36971a2ea8ddd9d82832059cbc1b21f">bytesRead</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of total bytes read from this memory </p>

</div>
</div>
<a class="anchor" id="ab89ec4a4876671ad5186d0e9c0e674ed"></a><!-- doxytag: member="AbstractMemory::bytesWritten" ref="ab89ec4a4876671ad5186d0e9c0e674ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a> <a class="el" href="classAbstractMemory.html#ab89ec4a4876671ad5186d0e9c0e674ed">bytesWritten</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of bytes written to this memory </p>

<p><a class="el" href="classDRAMCtrl.html#a98c4533d0a7053d00f6882f984ebdaef">DRAMCtrl</a>で再定義されています。</p>

</div>
</div>
<a class="anchor" id="adee792d6bf567779ea9c16640af42784"></a><!-- doxytag: member="AbstractMemory::confTableReported" ref="adee792d6bf567779ea9c16640af42784" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classAbstractMemory.html#adee792d6bf567779ea9c16640af42784">confTableReported</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a7302c053380cdccd0bdf63b25f73cbc5"></a><!-- doxytag: member="AbstractMemory::inAddrMap" ref="a7302c053380cdccd0bdf63b25f73cbc5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classAbstractMemory.html#a7302c053380cdccd0bdf63b25f73cbc5">inAddrMap</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="af35631da2ae35079d76e07c46fe78565"></a><!-- doxytag: member="AbstractMemory::lockedAddrList" ref="af35631da2ae35079d76e07c46fe78565" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1list.html">std::list</a>&lt;<a class="el" href="classLockedAddr.html">LockedAddr</a>&gt; <a class="el" href="classAbstractMemory.html#af35631da2ae35079d76e07c46fe78565">lockedAddrList</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a52bafd014022e75d82b4e0de25d3faf7"></a><!-- doxytag: member="AbstractMemory::numOther" ref="a52bafd014022e75d82b4e0de25d3faf7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a> <a class="el" href="classAbstractMemory.html#a52bafd014022e75d82b4e0de25d3faf7">numOther</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of other requests </p>

</div>
</div>
<a class="anchor" id="a27f442fbcb7bc7661412cc1d96ca51e7"></a><!-- doxytag: member="AbstractMemory::numReads" ref="a27f442fbcb7bc7661412cc1d96ca51e7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a> <a class="el" href="classAbstractMemory.html#a27f442fbcb7bc7661412cc1d96ca51e7">numReads</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of read requests </p>

</div>
</div>
<a class="anchor" id="acfd6a97aa6c2de05417a7403369e71c2"></a><!-- doxytag: member="AbstractMemory::numWrites" ref="acfd6a97aa6c2de05417a7403369e71c2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a> <a class="el" href="classAbstractMemory.html#acfd6a97aa6c2de05417a7403369e71c2">numWrites</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of write requests </p>

</div>
</div>
<a class="anchor" id="a9f8ed24d8442f662831d51922e7fddd2"></a><!-- doxytag: member="AbstractMemory::pmemAddr" ref="a9f8ed24d8442f662831d51922e7fddd2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* <a class="el" href="classAbstractMemory.html#a9f8ed24d8442f662831d51922e7fddd2">pmemAddr</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a194876a072a83a9fd59dde82e5213f0d"></a><!-- doxytag: member="AbstractMemory::range" ref="a194876a072a83a9fd59dde82e5213f0d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classAddrRange.html">AddrRange</a> <a class="el" href="classAbstractMemory.html#a194876a072a83a9fd59dde82e5213f0d">range</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>mem/<a class="el" href="abstract__mem_8hh_source.html">abstract_mem.hh</a></li>
<li>mem/<a class="el" href="abstract__mem_8cc.html">abstract_mem.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
