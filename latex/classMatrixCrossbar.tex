\hypertarget{classMatrixCrossbar}{
\section{クラス MatrixCrossbar}
\label{classMatrixCrossbar}\index{MatrixCrossbar@{MatrixCrossbar}}
}


{\ttfamily \#include $<$MatrixCrossbar.hh$>$}MatrixCrossbarに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2cm]{classMatrixCrossbar}
\end{center}
\end{figure}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classMatrixCrossbar_ad6fae5a13780d51dbd7d618caba5660b}{MatrixCrossbar} (const string \&conn\_\-type\_\-str\_\-, const string \&trans\_\-type\_\-str\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-in\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-out\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} data\_\-width\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-in\_\-seg\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-out\_\-seg\_\-, double len\_\-in\_\-wire\_\-, double len\_\-out\_\-wire\_\-, const \hyperlink{classTechParameter}{TechParameter} $\ast$tech\_\-param\_\-ptr\_\-)
\item 
\hyperlink{classMatrixCrossbar_a55d5985b387f1147e082dfe5e55e79ee}{$\sim$MatrixCrossbar} ()
\item 
double \hyperlink{classMatrixCrossbar_a912bfef03e3ce71b4bbc0b5136b087f5}{get\_\-dynamic\_\-energy} (bool is\_\-max\_\-) const 
\end{DoxyCompactItemize}
\subsection*{Private メソッド}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classMatrixCrossbar_a02fd73d861ef2e4aabb38c0c9ff82947}{init} ()
\item 
double \hyperlink{classMatrixCrossbar_a0027807356ac4ca07fe2e593234eb884}{calc\_\-i\_\-static} ()
\end{DoxyCompactItemize}
\subsection*{Private 変数}
\begin{DoxyCompactItemize}
\item 
double \hyperlink{classMatrixCrossbar_aff2fda531349c91521ef8a9ae4fdabb7}{m\_\-len\_\-in\_\-wire}
\item 
double \hyperlink{classMatrixCrossbar_a401bc9c8a912bebae3e0361bdb4c6235}{m\_\-len\_\-out\_\-wire}
\end{DoxyCompactItemize}


\subsection{コンストラクタとデストラクタ}
\hypertarget{classMatrixCrossbar_ad6fae5a13780d51dbd7d618caba5660b}{
\index{MatrixCrossbar@{MatrixCrossbar}!MatrixCrossbar@{MatrixCrossbar}}
\index{MatrixCrossbar@{MatrixCrossbar}!MatrixCrossbar@{MatrixCrossbar}}
\subsubsection[{MatrixCrossbar}]{\setlength{\rightskip}{0pt plus 5cm}{\bf MatrixCrossbar} (const string \& {\em conn\_\-type\_\-str\_\-}, \/  const string \& {\em trans\_\-type\_\-str\_\-}, \/  {\bf uint32\_\-t} {\em num\_\-in\_\-}, \/  {\bf uint32\_\-t} {\em num\_\-out\_\-}, \/  {\bf uint32\_\-t} {\em data\_\-width\_\-}, \/  {\bf uint32\_\-t} {\em num\_\-in\_\-seg\_\-}, \/  {\bf uint32\_\-t} {\em num\_\-out\_\-seg\_\-}, \/  double {\em len\_\-in\_\-wire\_\-}, \/  double {\em len\_\-out\_\-wire\_\-}, \/  const {\bf TechParameter} $\ast$ {\em tech\_\-param\_\-ptr\_\-})}}
\label{classMatrixCrossbar_ad6fae5a13780d51dbd7d618caba5660b}



\begin{DoxyCode}
55           : Crossbar(
56             MATRIX_CROSSBAR, conn_type_str_, trans_type_str_, 
57             num_in_, num_out_, data_width_, num_in_seg_, num_out_seg_, 
58             0, tech_param_ptr_)
59 {
60     assert(len_in_wire_ == len_in_wire_);
61     assert(len_out_wire_ == len_out_wire_);
62 
63     m_len_in_wire = len_in_wire_;
64     m_len_out_wire = len_out_wire_;
65     init();
66 }
\end{DoxyCode}
\hypertarget{classMatrixCrossbar_a55d5985b387f1147e082dfe5e55e79ee}{
\index{MatrixCrossbar@{MatrixCrossbar}!$\sim$MatrixCrossbar@{$\sim$MatrixCrossbar}}
\index{$\sim$MatrixCrossbar@{$\sim$MatrixCrossbar}!MatrixCrossbar@{MatrixCrossbar}}
\subsubsection[{$\sim$MatrixCrossbar}]{\setlength{\rightskip}{0pt plus 5cm}$\sim${\bf MatrixCrossbar} ()}}
\label{classMatrixCrossbar_a55d5985b387f1147e082dfe5e55e79ee}



\begin{DoxyCode}
69 {}
\end{DoxyCode}


\subsection{関数}
\hypertarget{classMatrixCrossbar_a0027807356ac4ca07fe2e593234eb884}{
\index{MatrixCrossbar@{MatrixCrossbar}!calc\_\-i\_\-static@{calc\_\-i\_\-static}}
\index{calc\_\-i\_\-static@{calc\_\-i\_\-static}!MatrixCrossbar@{MatrixCrossbar}}
\subsubsection[{calc\_\-i\_\-static}]{\setlength{\rightskip}{0pt plus 5cm}double calc\_\-i\_\-static ()\hspace{0.3cm}{\ttfamily  \mbox{[}private, virtual\mbox{]}}}}
\label{classMatrixCrossbar_a0027807356ac4ca07fe2e593234eb884}


\hyperlink{classCrossbar_a231bfef1332fc2583c9120c237648492}{Crossbar}を実装しています。


\begin{DoxyCode}
117 {
118     double Woutdrvnandn = m_tech_param_ptr->get_Woutdrvnandn();
119     double Woutdrvnandp = m_tech_param_ptr->get_Woutdrvnandp();
120     double Woutdrvnorn = m_tech_param_ptr->get_Woutdrvnorn();
121     double Woutdrvnorp = m_tech_param_ptr->get_Woutdrvnorp();
122     double Wdecinvn = m_tech_param_ptr->get_Wdecinvn();
123     double Wdecinvp = m_tech_param_ptr->get_Wdecinvp();
124     double Woutdrivern = m_tech_param_ptr->get_Woutdrivern();
125     double Woutdriverp = m_tech_param_ptr->get_Woutdriverp();
126     double NAND2_TAB_0 = m_tech_param_ptr->get_NAND2_TAB(0);
127     double NAND2_TAB_1 = m_tech_param_ptr->get_NAND2_TAB(1);
128     double NAND2_TAB_2 = m_tech_param_ptr->get_NAND2_TAB(2);
129     double NAND2_TAB_3 = m_tech_param_ptr->get_NAND2_TAB(3);
130     double NOR2_TAB_0 = m_tech_param_ptr->get_NOR2_TAB(0);
131     double NOR2_TAB_1 = m_tech_param_ptr->get_NOR2_TAB(1);
132     double NOR2_TAB_2 = m_tech_param_ptr->get_NOR2_TAB(2);
133     double NOR2_TAB_3 = m_tech_param_ptr->get_NOR2_TAB(3);
134     double NMOS_TAB_0 = m_tech_param_ptr->get_NMOS_TAB(0);
135     double PMOS_TAB_0 = m_tech_param_ptr->get_PMOS_TAB(0);
136 
137     double i_static = 0;
138     // tri-state buffers
139     i_static += ((Woutdrvnandp*(NAND2_TAB_0+NAND2_TAB_1+NAND2_TAB_2)+Woutdrvnandn
      *NAND2_TAB_3)/4
140             + (Woutdrvnorp*NOR2_TAB_0+Woutdrvnorn*(NOR2_TAB_1+NOR2_TAB_2+NOR2_TAB
      _3))/4
141             + Woutdrivern*NMOS_TAB_0+Woutdriverp*PMOS_TAB_0)*m_num_in*m_num_out*
      m_data_width;
142 
143     // input driver
144     i_static += (Wdecinvn*NMOS_TAB_0+Wdecinvp*PMOS_TAB_0)*m_num_in*m_data_width;
145 
146     // output driver
147     i_static += (Woutdrivern*NMOS_TAB_0+Woutdriverp*PMOS_TAB_0)*m_num_out*
      m_data_width;
148 
149     // control siganl inverter
150     i_static += (Wdecinvn*NMOS_TAB_0+Wdecinvp*PMOS_TAB_0)*m_num_in*m_num_out;
151     return i_static;
152 }
\end{DoxyCode}
\hypertarget{classMatrixCrossbar_a912bfef03e3ce71b4bbc0b5136b087f5}{
\index{MatrixCrossbar@{MatrixCrossbar}!get\_\-dynamic\_\-energy@{get\_\-dynamic\_\-energy}}
\index{get\_\-dynamic\_\-energy@{get\_\-dynamic\_\-energy}!MatrixCrossbar@{MatrixCrossbar}}
\subsubsection[{get\_\-dynamic\_\-energy}]{\setlength{\rightskip}{0pt plus 5cm}double get\_\-dynamic\_\-energy (bool {\em is\_\-max\_\-}) const\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classMatrixCrossbar_a912bfef03e3ce71b4bbc0b5136b087f5}


\hyperlink{classCrossbar_ac2104354778bb800a8854b9386a66fbe}{Crossbar}を実装しています。


\begin{DoxyCode}
72 {
73     double e_atomic;
74     double e_access = 0;
75 
76     e_atomic = m_e_chg_in*m_data_width*(is_max_? 1:0.5);
77     e_access += e_atomic;
78 
79     e_atomic = m_e_chg_out*m_data_width*(is_max_? 1:0.5);
80     e_access += e_atomic;
81 
82     e_atomic = m_e_chg_ctr;
83     e_access += e_atomic;
84 
85     return e_access;
86 }
\end{DoxyCode}
\hypertarget{classMatrixCrossbar_a02fd73d861ef2e4aabb38c0c9ff82947}{
\index{MatrixCrossbar@{MatrixCrossbar}!init@{init}}
\index{init@{init}!MatrixCrossbar@{MatrixCrossbar}}
\subsubsection[{init}]{\setlength{\rightskip}{0pt plus 5cm}void init ()\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classMatrixCrossbar_a02fd73d861ef2e4aabb38c0c9ff82947}



\begin{DoxyCode}
89 {
90     // FIXME: need accurate spacing
91     double CrsbarCellWidth = m_tech_param_ptr->get_CrsbarCellWidth();
92     double CrsbarCellHeight = m_tech_param_ptr->get_CrsbarCellHeight();
93     double len_in = m_num_out*m_data_width*CrsbarCellWidth;
94     double len_out = m_num_in*m_data_width*CrsbarCellHeight;
95     if(len_in > m_len_in_wire) m_len_in_wire = len_in;
96     if(len_out > m_len_out_wire) m_len_out_wire = len_out;
97     double CC3metal = m_tech_param_ptr->get_CC3metal();
98     m_cap_in_wire = CC3metal*m_len_in_wire;
99     m_cap_out_wire = CC3metal*m_len_out_wire;
100     double Cmetal = m_tech_param_ptr->get_Cmetal();
101     m_cap_ctr_wire = Cmetal*m_len_in_wire/2.0;
102     m_len_req_wire = m_len_in_wire;
103 
104     double e_factor = m_tech_param_ptr->get_EnergyFactor();
105     m_e_chg_in = calc_in_cap()*e_factor;
106     m_e_chg_out = calc_out_cap(m_num_out)*e_factor;
107     //FIXME: wire length estimation, really reset?
108     //control signal should reset after transmission is done, so no 1/2
109     m_e_chg_ctr = calc_ctr_cap(m_cap_ctr_wire, 0, 0)*e_factor;
110     m_e_chg_int = 0;
111 
112     m_i_static = calc_i_static();
113     return;
114 }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classMatrixCrossbar_aff2fda531349c91521ef8a9ae4fdabb7}{
\index{MatrixCrossbar@{MatrixCrossbar}!m\_\-len\_\-in\_\-wire@{m\_\-len\_\-in\_\-wire}}
\index{m\_\-len\_\-in\_\-wire@{m\_\-len\_\-in\_\-wire}!MatrixCrossbar@{MatrixCrossbar}}
\subsubsection[{m\_\-len\_\-in\_\-wire}]{\setlength{\rightskip}{0pt plus 5cm}double {\bf m\_\-len\_\-in\_\-wire}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classMatrixCrossbar_aff2fda531349c91521ef8a9ae4fdabb7}
\hypertarget{classMatrixCrossbar_a401bc9c8a912bebae3e0361bdb4c6235}{
\index{MatrixCrossbar@{MatrixCrossbar}!m\_\-len\_\-out\_\-wire@{m\_\-len\_\-out\_\-wire}}
\index{m\_\-len\_\-out\_\-wire@{m\_\-len\_\-out\_\-wire}!MatrixCrossbar@{MatrixCrossbar}}
\subsubsection[{m\_\-len\_\-out\_\-wire}]{\setlength{\rightskip}{0pt plus 5cm}double {\bf m\_\-len\_\-out\_\-wire}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classMatrixCrossbar_a401bc9c8a912bebae3e0361bdb4c6235}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
mem/ruby/network/orion/Crossbar/\hyperlink{MatrixCrossbar_8hh}{MatrixCrossbar.hh}\item 
mem/ruby/network/orion/Crossbar/\hyperlink{MatrixCrossbar_8cc}{MatrixCrossbar.cc}\end{DoxyCompactItemize}
