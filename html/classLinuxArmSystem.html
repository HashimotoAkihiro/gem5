<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス LinuxArmSystem</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>クラス LinuxArmSystem</h1><!-- doxytag: class="LinuxArmSystem" --><!-- doxytag: inherits="ArmSystem" -->
<p><code>#include &lt;<a class="el" href="arch_2arm_2linux_2system_8hh_source.html">system.hh</a>&gt;</code></p>
<div class="dynheader">
LinuxArmSystemに対する継承グラフ</div>
<div class="dynsection">
 <div class="center">
  <img src="classLinuxArmSystem.gif" usemap="#LinuxArmSystem_map" alt=""/>
  <map id="LinuxArmSystem_map" name="LinuxArmSystem_map">
<area href="classArmSystem.html" alt="ArmSystem" shape="rect" coords="115,280,220,304"/>
<area href="classSystem.html" alt="System" shape="rect" coords="115,224,220,248"/>
<area href="classMemObject.html" alt="MemObject" shape="rect" coords="115,168,220,192"/>
<area href="classClockedObject.html" alt="ClockedObject" shape="rect" coords="115,112,220,136"/>
<area href="classSimObject.html" alt="SimObject" shape="rect" coords="115,56,220,80"/>
<area href="classEventManager.html" alt="EventManager" shape="rect" coords="0,0,105,24"/>
<area href="classSerializable.html" alt="Serializable" shape="rect" coords="115,0,220,24"/>
<area href="classDrainable.html" alt="Drainable" shape="rect" coords="230,0,335,24"/>
</map>
 </div>
</div>

<p><a href="classLinuxArmSystem-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public 型</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef LinuxArmSystemParams&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinuxArmSystem.html#ae0ebf28024a7bb607cc65e59c8faa9d5">Params</a></td></tr>
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classLinuxArmSystem.html#ae0ebf28024a7bb607cc65e59c8faa9d5">Params</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinuxArmSystem.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinuxArmSystem.html#a8bd9f34635b50e93feedccfe117e75bb">LinuxArmSystem</a> (<a class="el" href="classLinuxArmSystem.html#ae0ebf28024a7bb607cc65e59c8faa9d5">Params</a> *p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinuxArmSystem.html#a3e10e01606ed67da6f24837440bfb69f">~LinuxArmSystem</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinuxArmSystem.html#a3c34ea9b29f410748d4435a667484924">initState</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinuxArmSystem.html#ac081da131af9bc2b37f4c4d7d99eaff1">adderBootUncacheable</a> (<a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a> a)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinuxArmSystem.html#aecc7d8debf54990ffeaaed5bac7d7d81">startup</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinuxArmSystem.html#a7126cba24850188b3f0e08beec5e95d8">mapPid</a> (<a class="el" href="classThreadContext.html">ThreadContext</a> *tc, <a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> pid)</td></tr>
<tr><td colspan="2"><h2>Public 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinuxArmSystem.html#a4f36b860c5380f4fc20e37e283fd8a1b">enableContextSwitchStatsDump</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>, <a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinuxArmSystem.html#af0a9621b833015091de5c531ad29b078">taskMap</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::ostream *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinuxArmSystem.html#aade5b03480aa42a0aab017e273e847a1">taskFile</a></td></tr>
<tr><td colspan="2"><h2>Protected 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDumpStatsPCEvent.html">DumpStatsPCEvent</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinuxArmSystem.html#a20f10ec8abaa110783e089fa10fc4da3">dumpStatsPCEvent</a></td></tr>
<tr><td colspan="2"><h2>Private 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPCEvent.html">PCEvent</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinuxArmSystem.html#a06483304d3fd0e7aa71e46d602fd8fca">kernelPanicEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPCEvent.html">PCEvent</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinuxArmSystem.html#a34ff17256dac7f50230fa2647f283d8b">kernelOopsEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Linux::UDelayEvent *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinuxArmSystem.html#a556c0b2adbf4b92eb5105b222ce79e55">uDelaySkipEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Linux::UDelayEvent *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinuxArmSystem.html#a4f8baa07addc116cd3bbca7ced7ed334">constUDelaySkipEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinuxArmSystem.html#adfcef8a6e43803757c1e941c5005ad36">secDataPtrAddr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinuxArmSystem.html#a6c059b006ceb752c5e6b2e1d90b54e33">secDataAddr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinuxArmSystem.html#a38de836fdda5d23ffd25ffbd1a1faa74">penReleaseAddr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinuxArmSystem.html#a013c7886af50b6686a3146af9a3ea898">pen64ReleaseAddr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinuxArmSystem.html#ab9398c8331a3a3619bf16596eb81c1dc">bootReleaseAddr</a></td></tr>
</table>
<hr/><h2>型定義</h2>
<a class="anchor" id="ae0ebf28024a7bb607cc65e59c8faa9d5"></a><!-- doxytag: member="LinuxArmSystem::Params" ref="ae0ebf28024a7bb607cc65e59c8faa9d5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef LinuxArmSystemParams <a class="el" href="classLinuxArmSystem.html#ae0ebf28024a7bb607cc65e59c8faa9d5">Params</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Boilerplate params code </p>

<p><a class="el" href="classArmSystem.html#a8ae84e66b34bac08937a6bad4412ba5d">ArmSystem</a>を再定義しています。</p>

</div>
</div>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="a8bd9f34635b50e93feedccfe117e75bb"></a><!-- doxytag: member="LinuxArmSystem::LinuxArmSystem" ref="a8bd9f34635b50e93feedccfe117e75bb" args="(Params *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classLinuxArmSystem.html">LinuxArmSystem</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classLinuxArmSystem.html#ae0ebf28024a7bb607cc65e59c8faa9d5">Params</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00064"></a>00064     : <a class="code" href="classArmSystem.html#a770423e6e1a1f3470611eeebb5499e52">ArmSystem</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>),
<a name="l00065"></a>00065       <a class="code" href="classLinuxArmSystem.html#a4f36b860c5380f4fc20e37e283fd8a1b">enableContextSwitchStatsDump</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;enable_context_switch_stats_dump),
<a name="l00066"></a>00066       <a class="code" href="classLinuxArmSystem.html#a06483304d3fd0e7aa71e46d602fd8fca">kernelPanicEvent</a>(<a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>), <a class="code" href="classLinuxArmSystem.html#a34ff17256dac7f50230fa2647f283d8b">kernelOopsEvent</a>(<a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>),
<a name="l00067"></a>00067       <a class="code" href="classLinuxArmSystem.html#ab9398c8331a3a3619bf16596eb81c1dc">bootReleaseAddr</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;boot_release_addr)
<a name="l00068"></a>00068 {
<a name="l00069"></a>00069     <span class="keywordflow">if</span> (<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;panic_on_panic) {
<a name="l00070"></a>00070         <a class="code" href="classLinuxArmSystem.html#a06483304d3fd0e7aa71e46d602fd8fca">kernelPanicEvent</a> = addKernelFuncEventOrPanic&lt;PanicPCEvent&gt;(
<a name="l00071"></a>00071             <span class="stringliteral">&quot;panic&quot;</span>, <span class="stringliteral">&quot;Kernel panic in simulated kernel&quot;</span>);
<a name="l00072"></a>00072     } <span class="keywordflow">else</span> {
<a name="l00073"></a>00073 <span class="preprocessor">#ifndef NDEBUG</span>
<a name="l00074"></a>00074 <span class="preprocessor"></span>        <a class="code" href="classLinuxArmSystem.html#a06483304d3fd0e7aa71e46d602fd8fca">kernelPanicEvent</a> = addKernelFuncEventOrPanic&lt;BreakPCEvent&gt;(<span class="stringliteral">&quot;panic&quot;</span>);
<a name="l00075"></a>00075 <span class="preprocessor">#endif</span>
<a name="l00076"></a>00076 <span class="preprocessor"></span>    }
<a name="l00077"></a>00077 
<a name="l00078"></a>00078     <span class="keywordflow">if</span> (<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;panic_on_oops) {
<a name="l00079"></a>00079         <a class="code" href="classLinuxArmSystem.html#a34ff17256dac7f50230fa2647f283d8b">kernelOopsEvent</a> = addKernelFuncEventOrPanic&lt;PanicPCEvent&gt;(
<a name="l00080"></a>00080             <span class="stringliteral">&quot;oops_exit&quot;</span>, <span class="stringliteral">&quot;Kernel oops in guest&quot;</span>);
<a name="l00081"></a>00081     }
<a name="l00082"></a>00082 
<a name="l00083"></a>00083     <span class="comment">// With ARM udelay() is #defined to __udelay</span>
<a name="l00084"></a>00084     <span class="comment">// newer kernels use __loop_udelay and __loop_const_udelay symbols</span>
<a name="l00085"></a>00085     <a class="code" href="classLinuxArmSystem.html#a556c0b2adbf4b92eb5105b222ce79e55">uDelaySkipEvent</a> = addKernelFuncEvent&lt;UDelayEvent&gt;(
<a name="l00086"></a>00086         <span class="stringliteral">&quot;__loop_udelay&quot;</span>, <span class="stringliteral">&quot;__udelay&quot;</span>, 1000, 0);
<a name="l00087"></a>00087     <span class="keywordflow">if</span>(!<a class="code" href="classLinuxArmSystem.html#a556c0b2adbf4b92eb5105b222ce79e55">uDelaySkipEvent</a>)
<a name="l00088"></a>00088         <a class="code" href="classLinuxArmSystem.html#a556c0b2adbf4b92eb5105b222ce79e55">uDelaySkipEvent</a> = addKernelFuncEventOrPanic&lt;UDelayEvent&gt;(
<a name="l00089"></a>00089          <span class="stringliteral">&quot;__udelay&quot;</span>, <span class="stringliteral">&quot;__udelay&quot;</span>, 1000, 0);
<a name="l00090"></a>00090 
<a name="l00091"></a>00091     <span class="comment">// constant arguments to udelay() have some precomputation done ahead of</span>
<a name="l00092"></a>00092     <span class="comment">// time. Constant comes from code.</span>
<a name="l00093"></a>00093     <a class="code" href="classLinuxArmSystem.html#a4f8baa07addc116cd3bbca7ced7ed334">constUDelaySkipEvent</a> = addKernelFuncEvent&lt;UDelayEvent&gt;(
<a name="l00094"></a>00094         <span class="stringliteral">&quot;__loop_const_udelay&quot;</span>, <span class="stringliteral">&quot;__const_udelay&quot;</span>, 1000, 107374);
<a name="l00095"></a>00095     <span class="keywordflow">if</span>(!constUDelaySkipEvent)
<a name="l00096"></a>00096         constUDelaySkipEvent = addKernelFuncEventOrPanic&lt;UDelayEvent&gt;(
<a name="l00097"></a>00097          <span class="stringliteral">&quot;__const_udelay&quot;</span>, <span class="stringliteral">&quot;__const_udelay&quot;</span>, 1000, 107374);
<a name="l00098"></a>00098 
<a name="l00099"></a>00099     <a class="code" href="classLinuxArmSystem.html#adfcef8a6e43803757c1e941c5005ad36">secDataPtrAddr</a> = 0;
<a name="l00100"></a>00100     <a class="code" href="classLinuxArmSystem.html#a6c059b006ceb752c5e6b2e1d90b54e33">secDataAddr</a> = 0;
<a name="l00101"></a>00101     <a class="code" href="classLinuxArmSystem.html#a38de836fdda5d23ffd25ffbd1a1faa74">penReleaseAddr</a> = 0;
<a name="l00102"></a>00102 
<a name="l00103"></a>00103     <a class="code" href="classSystem.html#a579bef006c1d6148c2764355c0b039b7">kernelSymtab</a>-&gt;findAddress(<span class="stringliteral">&quot;__secondary_data&quot;</span>, secDataPtrAddr);
<a name="l00104"></a>00104     <a class="code" href="classSystem.html#a579bef006c1d6148c2764355c0b039b7">kernelSymtab</a>-&gt;findAddress(<span class="stringliteral">&quot;secondary_data&quot;</span>, <a class="code" href="classLinuxArmSystem.html#a6c059b006ceb752c5e6b2e1d90b54e33">secDataAddr</a>);
<a name="l00105"></a>00105     <a class="code" href="classSystem.html#a579bef006c1d6148c2764355c0b039b7">kernelSymtab</a>-&gt;findAddress(<span class="stringliteral">&quot;pen_release&quot;</span>, <a class="code" href="classLinuxArmSystem.html#a38de836fdda5d23ffd25ffbd1a1faa74">penReleaseAddr</a>);
<a name="l00106"></a>00106     <a class="code" href="classSystem.html#a579bef006c1d6148c2764355c0b039b7">kernelSymtab</a>-&gt;findAddress(<span class="stringliteral">&quot;secondary_holding_pen_release&quot;</span>, <a class="code" href="classLinuxArmSystem.html#a013c7886af50b6686a3146af9a3ea898">pen64ReleaseAddr</a>);
<a name="l00107"></a>00107 
<a name="l00108"></a>00108     secDataPtrAddr &amp;= ~<a class="code" href="base_2types_8hh.html#adcc3cf526a71c0dfaae020d432c78b83">ULL</a>(0x7F);
<a name="l00109"></a>00109     <a class="code" href="classLinuxArmSystem.html#a6c059b006ceb752c5e6b2e1d90b54e33">secDataAddr</a> &amp;= ~<a class="code" href="base_2types_8hh.html#adcc3cf526a71c0dfaae020d432c78b83">ULL</a>(0x7F);
<a name="l00110"></a>00110     <a class="code" href="classLinuxArmSystem.html#a38de836fdda5d23ffd25ffbd1a1faa74">penReleaseAddr</a> &amp;= ~<a class="code" href="base_2types_8hh.html#adcc3cf526a71c0dfaae020d432c78b83">ULL</a>(0x7F);
<a name="l00111"></a>00111     <a class="code" href="classLinuxArmSystem.html#a013c7886af50b6686a3146af9a3ea898">pen64ReleaseAddr</a> &amp;= ~<a class="code" href="base_2types_8hh.html#adcc3cf526a71c0dfaae020d432c78b83">ULL</a>(0x7F);
<a name="l00112"></a>00112     <a class="code" href="classLinuxArmSystem.html#ab9398c8331a3a3619bf16596eb81c1dc">bootReleaseAddr</a> = (<a class="code" href="classLinuxArmSystem.html#ab9398c8331a3a3619bf16596eb81c1dc">bootReleaseAddr</a> &amp; ~<a class="code" href="base_2types_8hh.html#adcc3cf526a71c0dfaae020d432c78b83">ULL</a>(0x7F)) + <a class="code" href="classSystem.html#a23e95dade560d359d40e4e98456279ad">loadAddrOffset</a>;
<a name="l00113"></a>00113 
<a name="l00114"></a>00114 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3e10e01606ed67da6f24837440bfb69f"></a><!-- doxytag: member="LinuxArmSystem::~LinuxArmSystem" ref="a3e10e01606ed67da6f24837440bfb69f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classLinuxArmSystem.html">LinuxArmSystem</a> </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00243"></a>00243 {
<a name="l00244"></a>00244     <span class="keywordflow">if</span> (<a class="code" href="classLinuxArmSystem.html#a556c0b2adbf4b92eb5105b222ce79e55">uDelaySkipEvent</a>)
<a name="l00245"></a>00245         <span class="keyword">delete</span> <a class="code" href="classLinuxArmSystem.html#a556c0b2adbf4b92eb5105b222ce79e55">uDelaySkipEvent</a>;
<a name="l00246"></a>00246     <span class="keywordflow">if</span> (<a class="code" href="classLinuxArmSystem.html#a4f8baa07addc116cd3bbca7ced7ed334">constUDelaySkipEvent</a>)
<a name="l00247"></a>00247         <span class="keyword">delete</span> <a class="code" href="classLinuxArmSystem.html#a4f8baa07addc116cd3bbca7ced7ed334">constUDelaySkipEvent</a>;
<a name="l00248"></a>00248 
<a name="l00249"></a>00249     <span class="keywordflow">if</span> (<a class="code" href="classLinuxArmSystem.html#a20f10ec8abaa110783e089fa10fc4da3">dumpStatsPCEvent</a>)
<a name="l00250"></a>00250         <span class="keyword">delete</span> <a class="code" href="classLinuxArmSystem.html#a20f10ec8abaa110783e089fa10fc4da3">dumpStatsPCEvent</a>;
<a name="l00251"></a>00251 }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="ac081da131af9bc2b37f4c4d7d99eaff1"></a><!-- doxytag: member="LinuxArmSystem::adderBootUncacheable" ref="ac081da131af9bc2b37f4c4d7d99eaff1" args="(Addr a)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool adderBootUncacheable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>a</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classCheck.html">Check</a> if an address should be uncacheable until all caches are enabled. This exits because coherence on some addresses at boot is maintained via sw coherence until the caches are enbaled. Since we don't support sw coherence operations in gem5, this is a method that allows a system type to designate certain addresses that should remain uncachebale for a while. </p>

<p><a class="el" href="classArmSystem.html#aa3d376f8ebebf8bc40b44b3ef359cf3d">ArmSystem</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00118"></a>00118 {
<a name="l00119"></a>00119     <a class="code" href="classm5_1_1params_1_1Addr.html">Addr</a> block = a &amp; ~<a class="code" href="base_2types_8hh.html#adcc3cf526a71c0dfaae020d432c78b83">ULL</a>(0x7F);
<a name="l00120"></a>00120 
<a name="l00121"></a>00121     <span class="keywordflow">if</span> (block == <a class="code" href="classLinuxArmSystem.html#adfcef8a6e43803757c1e941c5005ad36">secDataPtrAddr</a> || block == <a class="code" href="classLinuxArmSystem.html#a6c059b006ceb752c5e6b2e1d90b54e33">secDataAddr</a> ||
<a name="l00122"></a>00122             block == <a class="code" href="classLinuxArmSystem.html#a38de836fdda5d23ffd25ffbd1a1faa74">penReleaseAddr</a> || <a class="code" href="classLinuxArmSystem.html#a013c7886af50b6686a3146af9a3ea898">pen64ReleaseAddr</a> == block ||
<a name="l00123"></a>00123             block == <a class="code" href="classLinuxArmSystem.html#ab9398c8331a3a3619bf16596eb81c1dc">bootReleaseAddr</a>)
<a name="l00124"></a>00124         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00125"></a>00125 
<a name="l00126"></a>00126     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00127"></a>00127 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3c34ea9b29f410748d4435a667484924"></a><!-- doxytag: member="LinuxArmSystem::initState" ref="a3c34ea9b29f410748d4435a667484924" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initState </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialise the system </p>

<p><a class="el" href="classArmSystem.html#a3c34ea9b29f410748d4435a667484924">ArmSystem</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00131"></a>00131 {
<a name="l00132"></a>00132     <span class="comment">// Moved from the constructor to here since it relies on the</span>
<a name="l00133"></a>00133     <span class="comment">// address map being resolved in the interconnect</span>
<a name="l00134"></a>00134 
<a name="l00135"></a>00135     <span class="comment">// Call the initialisation of the super class</span>
<a name="l00136"></a>00136     <a class="code" href="classLinuxArmSystem.html#a3c34ea9b29f410748d4435a667484924">ArmSystem::initState</a>();
<a name="l00137"></a>00137 
<a name="l00138"></a>00138     <span class="comment">// Load symbols at physical address, we might not want</span>
<a name="l00139"></a>00139     <span class="comment">// to do this permanently, for but early bootup work</span>
<a name="l00140"></a>00140     <span class="comment">// it is helpful.</span>
<a name="l00141"></a>00141     <span class="keywordflow">if</span> (<a class="code" href="classLinuxArmSystem.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;early_kernel_symbols) {
<a name="l00142"></a>00142         <a class="code" href="classSystem.html#ab5c2cc90b7ed9b57e9d9c6ce42a5200b">kernel</a>-&gt;<a class="code" href="classObjectFile.html#abd8b86c98494f055ba7e0babbd55f4a0">loadGlobalSymbols</a>(<a class="code" href="classSystem.html#a579bef006c1d6148c2764355c0b039b7">kernelSymtab</a>, <a class="code" href="classSystem.html#a49e011922eb3cd15a03e61e206bf02d3">loadAddrMask</a>);
<a name="l00143"></a>00143         <a class="code" href="classSystem.html#ab5c2cc90b7ed9b57e9d9c6ce42a5200b">kernel</a>-&gt;<a class="code" href="classObjectFile.html#abd8b86c98494f055ba7e0babbd55f4a0">loadGlobalSymbols</a>(<a class="code" href="symtab_8cc.html#abece40c619c717eea028f1339f0c31b9">debugSymbolTable</a>, <a class="code" href="classSystem.html#a49e011922eb3cd15a03e61e206bf02d3">loadAddrMask</a>);
<a name="l00144"></a>00144     }
<a name="l00145"></a>00145 
<a name="l00146"></a>00146     <span class="comment">// Setup boot data structure</span>
<a name="l00147"></a>00147     <a class="code" href="classm5_1_1params_1_1Addr.html">Addr</a> <a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a> = 0;
<a name="l00148"></a>00148     <span class="comment">// Check if the kernel image has a symbol that tells us it supports</span>
<a name="l00149"></a>00149     <span class="comment">// device trees.</span>
<a name="l00150"></a>00150     <span class="keywordtype">bool</span> kernel_has_fdt_support =
<a name="l00151"></a>00151         <a class="code" href="classSystem.html#a579bef006c1d6148c2764355c0b039b7">kernelSymtab</a>-&gt;findAddress(<span class="stringliteral">&quot;unflatten_device_tree&quot;</span>, addr);
<a name="l00152"></a>00152     <span class="keywordtype">bool</span> dtb_file_specified = <a class="code" href="classLinuxArmSystem.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;dtb_filename != <span class="stringliteral">&quot;&quot;</span>;
<a name="l00153"></a>00153 
<a name="l00154"></a>00154     <span class="keywordflow">if</span> (kernel_has_fdt_support &amp;&amp; dtb_file_specified) {
<a name="l00155"></a>00155         <span class="comment">// Kernel supports flattened device tree and dtb file specified.</span>
<a name="l00156"></a>00156         <span class="comment">// Using Device Tree Blob to describe system configuration.</span>
<a name="l00157"></a>00157         <a class="code" href="base_2misc_8hh.html#ae7d790080fa18103d7582effff570b9e">inform</a>(<span class="stringliteral">&quot;Loading DTB file: %s at address %#x\n&quot;</span>, <a class="code" href="classLinuxArmSystem.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;dtb_filename,
<a name="l00158"></a>00158                 <a class="code" href="classLinuxArmSystem.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;atags_addr + <a class="code" href="classSystem.html#a23e95dade560d359d40e4e98456279ad">loadAddrOffset</a>);
<a name="l00159"></a>00159 
<a name="l00160"></a>00160         <a class="code" href="classObjectFile.html">ObjectFile</a> *dtb_file = <a class="code" href="object__file_8cc.html#af9c937baadd807efe7819a5214ca652f">createObjectFile</a>(<a class="code" href="classLinuxArmSystem.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;dtb_filename, <span class="keyword">true</span>);
<a name="l00161"></a>00161         <span class="keywordflow">if</span> (!dtb_file) {
<a name="l00162"></a>00162             <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;couldn&apos;t load DTB file: %s\n&quot;</span>, <a class="code" href="classLinuxArmSystem.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;dtb_filename);
<a name="l00163"></a>00163         }
<a name="l00164"></a>00164 
<a name="l00165"></a>00165         <a class="code" href="classDtbObject.html">DtbObject</a> *_dtb_file = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classDtbObject.html">DtbObject</a>*<span class="keyword">&gt;</span>(dtb_file);
<a name="l00166"></a>00166 
<a name="l00167"></a>00167         <span class="keywordflow">if</span> (_dtb_file) {
<a name="l00168"></a>00168             <span class="keywordflow">if</span> (!_dtb_file-&gt;<a class="code" href="classDtbObject.html#a3d1578c362819bbd3af37cbbfeb6732e">addBootCmdLine</a>(<a class="code" href="classLinuxArmSystem.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;boot_osflags.c_str(),
<a name="l00169"></a>00169                                            <a class="code" href="classLinuxArmSystem.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;boot_osflags.size())) {
<a name="l00170"></a>00170                 <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;couldn&apos;t append bootargs to DTB file: %s\n&quot;</span>,
<a name="l00171"></a>00171                      <a class="code" href="classLinuxArmSystem.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;dtb_filename);
<a name="l00172"></a>00172             }
<a name="l00173"></a>00173         } <span class="keywordflow">else</span> {
<a name="l00174"></a>00174             <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;dtb_file cast failed; couldn&apos;t append bootargs &quot;</span>
<a name="l00175"></a>00175                  <span class="stringliteral">&quot;to DTB file: %s\n&quot;</span>, <a class="code" href="classLinuxArmSystem.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;dtb_filename);
<a name="l00176"></a>00176         }
<a name="l00177"></a>00177 
<a name="l00178"></a>00178         dtb_file-&gt;<a class="code" href="classObjectFile.html#a94b9967a6f94e8ea6fee38d6ae664405">setTextBase</a>(<a class="code" href="classLinuxArmSystem.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;atags_addr + <a class="code" href="classSystem.html#a23e95dade560d359d40e4e98456279ad">loadAddrOffset</a>);
<a name="l00179"></a>00179         dtb_file-&gt;<a class="code" href="classObjectFile.html#a69ba3469bb66a1ffa5049d581c1faf70">loadSections</a>(<a class="code" href="classSystem.html#a6219b40ecb92ec67602ae32c1ae2c0d6">physProxy</a>);
<a name="l00180"></a>00180         <span class="keyword">delete</span> dtb_file;
<a name="l00181"></a>00181     } <span class="keywordflow">else</span> {
<a name="l00182"></a>00182         <span class="comment">// Using ATAGS</span>
<a name="l00183"></a>00183         <span class="comment">// Warn if the kernel supports FDT and we haven&apos;t specified one</span>
<a name="l00184"></a>00184         <span class="keywordflow">if</span> (kernel_has_fdt_support) {
<a name="l00185"></a>00185             assert(!dtb_file_specified);
<a name="l00186"></a>00186             <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;Kernel supports device tree, but no DTB file specified\n&quot;</span>);
<a name="l00187"></a>00187         }
<a name="l00188"></a>00188         <span class="comment">// Warn if the kernel doesn&apos;t support FDT and we have specified one</span>
<a name="l00189"></a>00189         <span class="keywordflow">if</span> (dtb_file_specified) {
<a name="l00190"></a>00190             assert(!kernel_has_fdt_support);
<a name="l00191"></a>00191             <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;DTB file specified, but no device tree support in kernel\n&quot;</span>);
<a name="l00192"></a>00192         }
<a name="l00193"></a>00193 
<a name="l00194"></a>00194         <a class="code" href="classAtagCore.html">AtagCore</a> <a class="code" href="namespaceX86ISA.html#a9b4ee74f199ac88ff6c5af0112066e15">ac</a>;
<a name="l00195"></a>00195         ac.<a class="code" href="classAtagCore.html#a9194d847dbae195ee96ef3fb62cac560">flags</a>(1); <span class="comment">// read-only</span>
<a name="l00196"></a>00196         ac.<a class="code" href="classAtagCore.html#a0514c636f3ed15e3c9d0d975271b516b">pagesize</a>(8192);
<a name="l00197"></a>00197         ac.<a class="code" href="classAtagCore.html#af4d4fe4fbce50b7557161db8885f1fd1">rootdev</a>(0);
<a name="l00198"></a>00198 
<a name="l00199"></a>00199         <a class="code" href="classstd_1_1list.html">AddrRangeList</a> atagRanges = <a class="code" href="classSystem.html#aefd0d5534ce05a7596afe30efe297ad8">physmem</a>.<a class="code" href="classPhysicalMemory.html#a564b079bb27347c8bd8430f009539623">getConfAddrRanges</a>();
<a name="l00200"></a>00200         <span class="keywordflow">if</span> (atagRanges.size() != 1) {
<a name="l00201"></a>00201             <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;Expected a single ATAG memory entry but got %d\n&quot;</span>,
<a name="l00202"></a>00202                   atagRanges.size());
<a name="l00203"></a>00203         }
<a name="l00204"></a>00204         <a class="code" href="classAtagMem.html">AtagMem</a> <a class="code" href="namespaceSparcISA.html#a221d874609a3a07e22447f60e33cffdb">am</a>;
<a name="l00205"></a>00205         am.<a class="code" href="classAtagMem.html#a90062018f5fdfc088eec2f2de8e85aa2">memSize</a>(atagRanges.begin()-&gt;size());
<a name="l00206"></a>00206         am.<a class="code" href="classAtagMem.html#a1cac14faf981166796e6deb5c3d2dbdc">memStart</a>(atagRanges.begin()-&gt;start());
<a name="l00207"></a>00207 
<a name="l00208"></a>00208         <a class="code" href="classAtagCmdline.html">AtagCmdline</a> ad;
<a name="l00209"></a>00209         ad.<a class="code" href="classAtagCmdline.html#ae151a0716df5ef8d2f9f327b5a10106d">cmdline</a>(<a class="code" href="classLinuxArmSystem.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;boot_osflags);
<a name="l00210"></a>00210 
<a name="l00211"></a>00211         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Loader, <span class="stringliteral">&quot;boot command line %d bytes: %s\n&quot;</span>,
<a name="l00212"></a>00212                 ad.<a class="code" href="classAtagHeader.html#a213614ba4a6ad67fa2743a987609ca18">size</a>() &lt;&lt;2, <a class="code" href="classLinuxArmSystem.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;boot_osflags.c_str());
<a name="l00213"></a>00213 
<a name="l00214"></a>00214         <a class="code" href="classAtagNone.html">AtagNone</a> an;
<a name="l00215"></a>00215 
<a name="l00216"></a>00216         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> size = ac.<a class="code" href="classAtagHeader.html#a213614ba4a6ad67fa2743a987609ca18">size</a>() + am.<a class="code" href="classAtagHeader.html#a213614ba4a6ad67fa2743a987609ca18">size</a>() + ad.<a class="code" href="classAtagHeader.html#a213614ba4a6ad67fa2743a987609ca18">size</a>() + an.size();
<a name="l00217"></a>00217         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="namespaceArmISA.html#a87b7a740701cddafb930a9460e9f4eba">offset</a> = 0;
<a name="l00218"></a>00218         uint8_t *boot_data = <span class="keyword">new</span> uint8_t[size &lt;&lt; 2];
<a name="l00219"></a>00219 
<a name="l00220"></a>00220         offset += ac.<a class="code" href="classAtagHeader.html#a685d2cec993b872c6370a1ee5c101dd0">copyOut</a>(boot_data + offset);
<a name="l00221"></a>00221         offset += am.<a class="code" href="classAtagHeader.html#a685d2cec993b872c6370a1ee5c101dd0">copyOut</a>(boot_data + offset);
<a name="l00222"></a>00222         offset += ad.<a class="code" href="classAtagHeader.html#a685d2cec993b872c6370a1ee5c101dd0">copyOut</a>(boot_data + offset);
<a name="l00223"></a>00223         offset += an.copyOut(boot_data + offset);
<a name="l00224"></a>00224 
<a name="l00225"></a>00225         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Loader, <span class="stringliteral">&quot;Boot atags was %d bytes in total\n&quot;</span>, size &lt;&lt; 2);
<a name="l00226"></a>00226         <a class="code" href="trace_8hh.html#a556faf39d3fa9f7db5f344487ddbb397">DDUMP</a>(Loader, boot_data, size &lt;&lt; 2);
<a name="l00227"></a>00227 
<a name="l00228"></a>00228         <a class="code" href="classSystem.html#a6219b40ecb92ec67602ae32c1ae2c0d6">physProxy</a>.<a class="code" href="classPortProxy.html#af68c0d93cdb9ff9c4df789c4c9029709">writeBlob</a>(<a class="code" href="classLinuxArmSystem.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;atags_addr + <a class="code" href="classSystem.html#a23e95dade560d359d40e4e98456279ad">loadAddrOffset</a>, boot_data,
<a name="l00229"></a>00229                 size &lt;&lt; 2);
<a name="l00230"></a>00230 
<a name="l00231"></a>00231         <span class="keyword">delete</span>[] boot_data;
<a name="l00232"></a>00232     }
<a name="l00233"></a>00233 
<a name="l00234"></a>00234     <span class="comment">// Kernel boot requirements to set up r0, r1 and r2 in ARMv7</span>
<a name="l00235"></a>00235     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classSystem.html#a19840a204c4d6f67b45a07073e8b41df">threadContexts</a>.size(); <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00236"></a>00236         <a class="code" href="classSystem.html#a19840a204c4d6f67b45a07073e8b41df">threadContexts</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>]-&gt;setIntReg(0, 0);
<a name="l00237"></a>00237         <a class="code" href="classSystem.html#a19840a204c4d6f67b45a07073e8b41df">threadContexts</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>]-&gt;setIntReg(1, <a class="code" href="classLinuxArmSystem.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;machine_type);
<a name="l00238"></a>00238         <a class="code" href="classSystem.html#a19840a204c4d6f67b45a07073e8b41df">threadContexts</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>]-&gt;setIntReg(2, <a class="code" href="classLinuxArmSystem.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;atags_addr + <a class="code" href="classSystem.html#a23e95dade560d359d40e4e98456279ad">loadAddrOffset</a>);
<a name="l00239"></a>00239     }
<a name="l00240"></a>00240 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7126cba24850188b3f0e08beec5e95d8"></a><!-- doxytag: member="LinuxArmSystem::mapPid" ref="a7126cba24850188b3f0e08beec5e95d8" args="(ThreadContext *tc, uint32_t pid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mapPid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>pid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function creates a new task Id for the given pid. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tc</em>&nbsp;</td><td>thread context that is currentyl executing </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00283"></a>00283 {
<a name="l00284"></a>00284     <span class="comment">// Create a new unique identifier for this pid</span>
<a name="l00285"></a>00285     std::map&lt;uint32_t, uint32_t&gt;::iterator itr = <a class="code" href="classLinuxArmSystem.html#af0a9621b833015091de5c531ad29b078">taskMap</a>.find(pid);
<a name="l00286"></a>00286     <span class="keywordflow">if</span> (itr == <a class="code" href="classLinuxArmSystem.html#af0a9621b833015091de5c531ad29b078">taskMap</a>.end()) {
<a name="l00287"></a>00287         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> map_size = <a class="code" href="classLinuxArmSystem.html#af0a9621b833015091de5c531ad29b078">taskMap</a>.size();
<a name="l00288"></a>00288         <span class="keywordflow">if</span> (map_size &gt; <a class="code" href="namespaceContextSwitchTaskId.html#aa8dd388981e62e592eb420a58ab290b7a675ac8c10b4bdb20e74ca50add8789f5">ContextSwitchTaskId::MaxNormalTaskId</a> + 1) {
<a name="l00289"></a>00289             <a class="code" href="base_2misc_8hh.html#abb243c15dfbeedf4ae64aa213f4f18c7">warn_once</a>(<span class="stringliteral">&quot;Error out of identifiers for cache occupancy stats&quot;</span>);
<a name="l00290"></a>00290             <a class="code" href="classLinuxArmSystem.html#af0a9621b833015091de5c531ad29b078">taskMap</a>[pid] = <a class="code" href="namespaceContextSwitchTaskId.html#aa8dd388981e62e592eb420a58ab290b7a4e81c184ac3ad48a389cd4454c4a05bb">ContextSwitchTaskId::Unknown</a>;
<a name="l00291"></a>00291         } <span class="keywordflow">else</span> {
<a name="l00292"></a>00292             <a class="code" href="classLinuxArmSystem.html#af0a9621b833015091de5c531ad29b078">taskMap</a>[pid] = map_size;
<a name="l00293"></a>00293         }
<a name="l00294"></a>00294     }
<a name="l00295"></a>00295 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acd3c3feb78ae7a8f88fe0f110a718dff"></a><!-- doxytag: member="LinuxArmSystem::params" ref="acd3c3feb78ae7a8f88fe0f110a718dff" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classLinuxArmSystem.html#ae0ebf28024a7bb607cc65e59c8faa9d5">Params</a>* params </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classArmSystem.html#acd3c3feb78ae7a8f88fe0f110a718dff">ArmSystem</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00069"></a>00069     {
<a name="l00070"></a>00070         <span class="keywordflow">return</span> <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classLinuxArmSystem.html#ae0ebf28024a7bb607cc65e59c8faa9d5">Params</a> *<span class="keyword">&gt;</span>(<a class="code" href="classSystem.html#afb9ae78c3e2cd51a280162491c99366c">_params</a>);
<a name="l00071"></a>00071     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aecc7d8debf54990ffeaaed5bac7d7d81"></a><!-- doxytag: member="LinuxArmSystem::startup" ref="aecc7d8debf54990ffeaaed5bac7d7d81" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void startup </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classLinuxArmSystem.html#aecc7d8debf54990ffeaaed5bac7d7d81">startup()</a> is the final initialization call before simulation. All state is initialized (including unserialized state, if any, such as the <a class="el" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick()</a> value), so this is the appropriate place to schedule initial event(s) for objects that need them. </p>

<p><a class="el" href="classSimObject.html#aecc7d8debf54990ffeaaed5bac7d7d81">SimObject</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00261"></a>00261 {
<a name="l00262"></a>00262     <span class="keywordflow">if</span> (<a class="code" href="classLinuxArmSystem.html#a4f36b860c5380f4fc20e37e283fd8a1b">enableContextSwitchStatsDump</a>) {
<a name="l00263"></a>00263         <a class="code" href="classLinuxArmSystem.html#a20f10ec8abaa110783e089fa10fc4da3">dumpStatsPCEvent</a> = addKernelFuncEvent&lt;DumpStatsPCEvent&gt;(<span class="stringliteral">&quot;__switch_to&quot;</span>);
<a name="l00264"></a>00264         <span class="keywordflow">if</span> (!<a class="code" href="classLinuxArmSystem.html#a20f10ec8abaa110783e089fa10fc4da3">dumpStatsPCEvent</a>)
<a name="l00265"></a>00265            <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;dumpStatsPCEvent not created!&quot;</span>);
<a name="l00266"></a>00266 
<a name="l00267"></a>00267         std::string task_filename = <span class="stringliteral">&quot;tasks.txt&quot;</span>;
<a name="l00268"></a>00268         <a class="code" href="classLinuxArmSystem.html#aade5b03480aa42a0aab017e273e847a1">taskFile</a> = <a class="code" href="output_8cc.html#a08819d32c217c58b155584845ddadd4a">simout</a>.<a class="code" href="classOutputDirectory.html#a22e4aa8ec29a265a1c299a1a009c85cc">create</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.&quot;</span> + task_filename);
<a name="l00269"></a>00269 
<a name="l00270"></a>00270         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classSystem.html#a13d38579137b1a8b8a2fcfdd501f8d4a">_numContexts</a>; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00271"></a>00271             <a class="code" href="classThreadContext.html">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#a5aff829af55e65b802d83dfcef4e9dd0">tc</a> = <a class="code" href="classSystem.html#a19840a204c4d6f67b45a07073e8b41df">threadContexts</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>];
<a name="l00272"></a>00272             <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> pid = tc-&gt;<a class="code" href="classThreadContext.html#ad10a7ef049c2d2ffadfc809341e66d4e">getCpuPtr</a>()-&gt;getPid();
<a name="l00273"></a>00273             <span class="keywordflow">if</span> (pid != <a class="code" href="classRequest.html#ac5c3b2d7d6e9f98184fbfccb6ffc7273">Request::invldPid</a>) {
<a name="l00274"></a>00274                 <a class="code" href="classLinuxArmSystem.html#a7126cba24850188b3f0e08beec5e95d8">mapPid</a>(tc, pid);
<a name="l00275"></a>00275                 tc-&gt;<a class="code" href="classThreadContext.html#ad10a7ef049c2d2ffadfc809341e66d4e">getCpuPtr</a>()-&gt;taskId(<a class="code" href="classLinuxArmSystem.html#af0a9621b833015091de5c531ad29b078">taskMap</a>[pid]);
<a name="l00276"></a>00276             }
<a name="l00277"></a>00277         }
<a name="l00278"></a>00278     }
<a name="l00279"></a>00279 }
</pre></div></p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="ab9398c8331a3a3619bf16596eb81c1dc"></a><!-- doxytag: member="LinuxArmSystem::bootReleaseAddr" ref="ab9398c8331a3a3619bf16596eb81c1dc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="el" href="classLinuxArmSystem.html#ab9398c8331a3a3619bf16596eb81c1dc">bootReleaseAddr</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4f8baa07addc116cd3bbca7ced7ed334"></a><!-- doxytag: member="LinuxArmSystem::constUDelaySkipEvent" ref="a4f8baa07addc116cd3bbca7ced7ed334" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Linux::UDelayEvent* <a class="el" href="classLinuxArmSystem.html#a4f8baa07addc116cd3bbca7ced7ed334">constUDelaySkipEvent</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Another PC based skip event for const_udelay(). Similar to the udelay skip, but this function precomputes the first multiply that is done in the generic case since the parameter is known at compile time. Thus we need to do some division to get back to us. </p>

</div>
</div>
<a class="anchor" id="a20f10ec8abaa110783e089fa10fc4da3"></a><!-- doxytag: member="LinuxArmSystem::dumpStatsPCEvent" ref="a20f10ec8abaa110783e089fa10fc4da3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDumpStatsPCEvent.html">DumpStatsPCEvent</a>* <a class="el" href="classLinuxArmSystem.html#a20f10ec8abaa110783e089fa10fc4da3">dumpStatsPCEvent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4f36b860c5380f4fc20e37e283fd8a1b"></a><!-- doxytag: member="LinuxArmSystem::enableContextSwitchStatsDump" ref="a4f36b860c5380f4fc20e37e283fd8a1b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classLinuxArmSystem.html#a4f36b860c5380f4fc20e37e283fd8a1b">enableContextSwitchStatsDump</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>When enabled, dump stats/task info on context switches for Streamline and per-thread cache occupancy studies, etc. </p>

</div>
</div>
<a class="anchor" id="a34ff17256dac7f50230fa2647f283d8b"></a><!-- doxytag: member="LinuxArmSystem::kernelOopsEvent" ref="a34ff17256dac7f50230fa2647f283d8b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPCEvent.html">PCEvent</a>* <a class="el" href="classLinuxArmSystem.html#a34ff17256dac7f50230fa2647f283d8b">kernelOopsEvent</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classEvent.html">Event</a> to halt the simulator if the kernel calls oopses </p>

</div>
</div>
<a class="anchor" id="a06483304d3fd0e7aa71e46d602fd8fca"></a><!-- doxytag: member="LinuxArmSystem::kernelPanicEvent" ref="a06483304d3fd0e7aa71e46d602fd8fca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPCEvent.html">PCEvent</a>* <a class="el" href="classLinuxArmSystem.html#a06483304d3fd0e7aa71e46d602fd8fca">kernelPanicEvent</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classEvent.html">Event</a> to halt the simulator if the kernel calls <a class="el" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic()</a> </p>

</div>
</div>
<a class="anchor" id="a013c7886af50b6686a3146af9a3ea898"></a><!-- doxytag: member="LinuxArmSystem::pen64ReleaseAddr" ref="a013c7886af50b6686a3146af9a3ea898" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="el" href="classLinuxArmSystem.html#a013c7886af50b6686a3146af9a3ea898">pen64ReleaseAddr</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a38de836fdda5d23ffd25ffbd1a1faa74"></a><!-- doxytag: member="LinuxArmSystem::penReleaseAddr" ref="a38de836fdda5d23ffd25ffbd1a1faa74" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="el" href="classLinuxArmSystem.html#a38de836fdda5d23ffd25ffbd1a1faa74">penReleaseAddr</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a6c059b006ceb752c5e6b2e1d90b54e33"></a><!-- doxytag: member="LinuxArmSystem::secDataAddr" ref="a6c059b006ceb752c5e6b2e1d90b54e33" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="el" href="classLinuxArmSystem.html#a6c059b006ceb752c5e6b2e1d90b54e33">secDataAddr</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="adfcef8a6e43803757c1e941c5005ad36"></a><!-- doxytag: member="LinuxArmSystem::secDataPtrAddr" ref="adfcef8a6e43803757c1e941c5005ad36" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="el" href="classLinuxArmSystem.html#adfcef8a6e43803757c1e941c5005ad36">secDataPtrAddr</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>These variables store addresses of important data structures that are normaly kept coherent at boot with cache mainetence operations. Since these operations aren't supported in gem5, we keep them coherent by making them uncacheable until all processors in the system boot. </p>

</div>
</div>
<a class="anchor" id="aade5b03480aa42a0aab017e273e847a1"></a><!-- doxytag: member="LinuxArmSystem::taskFile" ref="aade5b03480aa42a0aab017e273e847a1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream* <a class="el" href="classLinuxArmSystem.html#aade5b03480aa42a0aab017e273e847a1">taskFile</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This is a file that is placed in the run directory that prints out mappings between taskIds and OS process IDs </p>

</div>
</div>
<a class="anchor" id="af0a9621b833015091de5c531ad29b078"></a><!-- doxytag: member="LinuxArmSystem::taskMap" ref="af0a9621b833015091de5c531ad29b078" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>, <a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt; <a class="el" href="classLinuxArmSystem.html#af0a9621b833015091de5c531ad29b078">taskMap</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This map stores a mapping of OS process IDs to internal Task IDs. The mapping is done because the stats system doesn't tend to like vectors that are much greater than 1000 items and the entire process space is 65K. </p>

</div>
</div>
<a class="anchor" id="a556c0b2adbf4b92eb5105b222ce79e55"></a><!-- doxytag: member="LinuxArmSystem::uDelaySkipEvent" ref="a556c0b2adbf4b92eb5105b222ce79e55" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Linux::UDelayEvent* <a class="el" href="classLinuxArmSystem.html#a556c0b2adbf4b92eb5105b222ce79e55">uDelaySkipEvent</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>PC based event to skip udelay(&lt;time&gt;) calls and quiesce the processor for the appropriate amount of time. This is not functionally required but does speed up simulation. </p>

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>arch/arm/linux/<a class="el" href="arch_2arm_2linux_2system_8hh_source.html">system.hh</a></li>
<li>arch/arm/linux/<a class="el" href="arch_2arm_2linux_2system_8cc.html">system.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
