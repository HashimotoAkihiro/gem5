\hypertarget{classX86ISA_1_1SMBios_1_1SMBiosTable}{
\section{クラス SMBiosTable}
\label{classX86ISA_1_1SMBios_1_1SMBiosTable}\index{X86ISA::SMBios::SMBiosTable@{X86ISA::SMBios::SMBiosTable}}
}


{\ttfamily \#include $<$smbios.hh$>$}SMBiosTableに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2cm]{classX86ISA_1_1SMBios_1_1SMBiosTable}
\end{center}
\end{figure}
\subsection*{構成}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structX86ISA_1_1SMBios_1_1SMBiosTable_1_1SMBiosHeader}{SMBiosHeader}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classX86ISA_1_1SMBios_1_1SMBiosTable_ace99a7f5fa8efd3e8c7b26adbd98f7f3}{SMBiosTable} (\hyperlink{classX86ISA_1_1SMBios_1_1SMBiosTable_a53bcb95b42fba31b72dea12caeeed9cf}{Params} $\ast$\hyperlink{namespaceX86ISA_af675c1d542a25b96e11164b80809a856}{p})
\item 
\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{classX86ISA_1_1SMBios_1_1SMBiosTable_ad2b5276c95bbec6102bd1b9f1eb8ea26}{getTableAddr} ()
\item 
void \hyperlink{classX86ISA_1_1SMBios_1_1SMBiosTable_aeaa306e0b92006f1478facf62f5d93d9}{setTableAddr} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{namespaceX86ISA_ab705917f60c5566f9ce56a93f798b2e2}{addr})
\item 
void \hyperlink{classX86ISA_1_1SMBios_1_1SMBiosTable_ac061b4f51e0ec5b55cdadd9c58d96da9}{writeOut} (\hyperlink{classPortProxy}{PortProxy} \&proxy, \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{namespaceX86ISA_ab705917f60c5566f9ce56a93f798b2e2}{addr}, \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \&headerSize, \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \&structSize)
\end{DoxyCompactItemize}
\subsection*{Protected 型}
\begin{DoxyCompactItemize}
\item 
typedef X86SMBiosSMBiosTableParams \hyperlink{classX86ISA_1_1SMBios_1_1SMBiosTable_a53bcb95b42fba31b72dea12caeeed9cf}{Params}
\end{DoxyCompactItemize}
\subsection*{Protected 変数}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structX86ISA_1_1SMBios_1_1SMBiosTable_1_1SMBiosHeader}{X86ISA::SMBios::SMBiosTable::SMBiosHeader} \hyperlink{classX86ISA_1_1SMBios_1_1SMBiosTable_afd906d478b7ba5149013125da68c4eb9}{smbiosHeader}
\item 
\hyperlink{classstd_1_1vector}{std::vector}$<$ \hyperlink{classX86ISA_1_1SMBios_1_1SMBiosStructure}{SMBiosStructure} $\ast$ $>$ \hyperlink{classX86ISA_1_1SMBios_1_1SMBiosTable_a6fbbb38d1b8f7ce977a28367efb09b7c}{structures}
\end{DoxyCompactItemize}


\subsection{型定義}
\hypertarget{classX86ISA_1_1SMBios_1_1SMBiosTable_a53bcb95b42fba31b72dea12caeeed9cf}{
\index{X86ISA::SMBios::SMBiosTable@{X86ISA::SMBios::SMBiosTable}!Params@{Params}}
\index{Params@{Params}!X86ISA::SMBios::SMBiosTable@{X86ISA::SMBios::SMBiosTable}}
\subsubsection[{Params}]{\setlength{\rightskip}{0pt plus 5cm}typedef X86SMBiosSMBiosTableParams {\bf Params}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classX86ISA_1_1SMBios_1_1SMBiosTable_a53bcb95b42fba31b72dea12caeeed9cf}


\subsection{コンストラクタとデストラクタ}
\hypertarget{classX86ISA_1_1SMBios_1_1SMBiosTable_ace99a7f5fa8efd3e8c7b26adbd98f7f3}{
\index{X86ISA::SMBios::SMBiosTable@{X86ISA::SMBios::SMBiosTable}!SMBiosTable@{SMBiosTable}}
\index{SMBiosTable@{SMBiosTable}!X86ISA::SMBios::SMBiosTable@{X86ISA::SMBios::SMBiosTable}}
\subsubsection[{SMBiosTable}]{\setlength{\rightskip}{0pt plus 5cm}{\bf SMBiosTable} ({\bf Params} $\ast$ {\em p})}}
\label{classX86ISA_1_1SMBios_1_1SMBiosTable_ace99a7f5fa8efd3e8c7b26adbd98f7f3}



\begin{DoxyCode}
205                                                :
206     SimObject(p), structures(p->structures)
207 {
208     smbiosHeader.majorVersion = p->major_version;
209     smbiosHeader.minorVersion = p->minor_version;
210     assert(p->major_version <= 9);
211     assert(p->minor_version <= 9);
212     smbiosHeader.intermediateHeader.smbiosBCDRevision =
213         (p->major_version << 4) | p->minor_version;
214 }

\end{DoxyCode}


\subsection{関数}
\hypertarget{classX86ISA_1_1SMBios_1_1SMBiosTable_ad2b5276c95bbec6102bd1b9f1eb8ea26}{
\index{X86ISA::SMBios::SMBiosTable@{X86ISA::SMBios::SMBiosTable}!getTableAddr@{getTableAddr}}
\index{getTableAddr@{getTableAddr}!X86ISA::SMBios::SMBiosTable@{X86ISA::SMBios::SMBiosTable}}
\subsubsection[{getTableAddr}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Addr} getTableAddr ()\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classX86ISA_1_1SMBios_1_1SMBiosTable_ad2b5276c95bbec6102bd1b9f1eb8ea26}



\begin{DoxyCode}
217     {
218         return smbiosHeader.intermediateHeader.tableAddr;
219     }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1SMBios_1_1SMBiosTable_aeaa306e0b92006f1478facf62f5d93d9}{
\index{X86ISA::SMBios::SMBiosTable@{X86ISA::SMBios::SMBiosTable}!setTableAddr@{setTableAddr}}
\index{setTableAddr@{setTableAddr}!X86ISA::SMBios::SMBiosTable@{X86ISA::SMBios::SMBiosTable}}
\subsubsection[{setTableAddr}]{\setlength{\rightskip}{0pt plus 5cm}void setTableAddr ({\bf Addr} {\em addr})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classX86ISA_1_1SMBios_1_1SMBiosTable_aeaa306e0b92006f1478facf62f5d93d9}



\begin{DoxyCode}
222     {
223         smbiosHeader.intermediateHeader.tableAddr = addr;
224     }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1SMBios_1_1SMBiosTable_ac061b4f51e0ec5b55cdadd9c58d96da9}{
\index{X86ISA::SMBios::SMBiosTable@{X86ISA::SMBios::SMBiosTable}!writeOut@{writeOut}}
\index{writeOut@{writeOut}!X86ISA::SMBios::SMBiosTable@{X86ISA::SMBios::SMBiosTable}}
\subsubsection[{writeOut}]{\setlength{\rightskip}{0pt plus 5cm}void writeOut ({\bf PortProxy} \& {\em proxy}, \/  {\bf Addr} {\em addr}, \/  {\bf Addr} \& {\em headerSize}, \/  {\bf Addr} \& {\em structSize})}}
\label{classX86ISA_1_1SMBios_1_1SMBiosTable_ac061b4f51e0ec5b55cdadd9c58d96da9}



\begin{DoxyCode}
219 {
220     headerSize = 0x1F;
221 
222     /*
223      * The main header
224      */
225     uint8_t mainChecksum = 0;
226 
227     proxy.writeBlob(addr, (uint8_t *)smbiosHeader.anchorString, 4);
228     for (int i = 0; i < 4; i++)
229         mainChecksum += smbiosHeader.anchorString[i];
230 
231     // The checksum goes here, but we're figuring it out as we go.
232 
233     proxy.writeBlob(addr + 0x5,
234             (uint8_t *)(&smbiosHeader.entryPointLength), 1);
235     mainChecksum += smbiosHeader.entryPointLength;
236     proxy.writeBlob(addr + 0x6,
237             (uint8_t *)(&smbiosHeader.majorVersion), 1);
238     mainChecksum += smbiosHeader.majorVersion;
239     proxy.writeBlob(addr + 0x7,
240             (uint8_t *)(&smbiosHeader.minorVersion), 1);
241     mainChecksum += smbiosHeader.minorVersion;
242     // Maximum structure size goes here, but we'll figure it out later.
243     proxy.writeBlob(addr + 0xA,
244             (uint8_t *)(&smbiosHeader.entryPointRevision), 1);
245     mainChecksum += smbiosHeader.entryPointRevision;
246     proxy.writeBlob(addr + 0xB,
247             (uint8_t *)(&smbiosHeader.formattedArea), 5);
248     for (int i = 0; i < 5; i++)
249         mainChecksum += smbiosHeader.formattedArea[i];
250 
251     /*
252      * The intermediate header
253      */
254     uint8_t intChecksum = 0;
255 
256     proxy.writeBlob(addr + 0x10,
257             (uint8_t *)smbiosHeader.intermediateHeader.anchorString, 5);
258     for (int i = 0; i < 5; i++)
259         intChecksum += smbiosHeader.intermediateHeader.anchorString[i];
260 
261     // The checksum goes here, but we're figuring it out as we go.
262     // Then the length of the structure table which we'll find later
263 
264     uint32_t tableAddrGuest =
265         X86ISA::htog(smbiosHeader.intermediateHeader.tableAddr);
266     proxy.writeBlob(addr + 0x18, (uint8_t *)(&tableAddrGuest), 4);
267     for (int i = 0; i < 4; i++) {
268         intChecksum += tableAddrGuest;
269         tableAddrGuest >>= 8;
270     }
271 
272     uint16_t numStructs = X86ISA::gtoh(structures.size());
273     proxy.writeBlob(addr + 0x1C, (uint8_t *)(&numStructs), 2);
274     for (int i = 0; i < 2; i++) {
275         intChecksum += numStructs;
276         numStructs >>= 8;
277     }
278 
279     proxy.writeBlob(addr + 0x1E,
280             (uint8_t *)(&smbiosHeader.intermediateHeader.smbiosBCDRevision),
281             1);
282     intChecksum += smbiosHeader.intermediateHeader.smbiosBCDRevision;
283 
284     /*
285      * Structure table
286      */
287 
288     Addr base = smbiosHeader.intermediateHeader.tableAddr;
289     Addr offset = 0;
290     uint16_t maxSize = 0;
291     std::vector<SMBiosStructure *>::iterator it;
292     for (it = structures.begin(); it != structures.end(); it++) {
293         uint16_t size = (*it)->writeOut(proxy, base + offset);
294         if (size > maxSize)
295             maxSize = size;
296         offset += size;
297     }
298 
299     structSize = offset;
300 
301     /*
302      * Header
303      */
304 
305     maxSize = X86ISA::htog(maxSize);
306     proxy.writeBlob(addr + 0x8, (uint8_t *)(&maxSize), 2);
307     for (int i = 0; i < 2; i++) {
308         mainChecksum += maxSize;
309         maxSize >>= 8;
310     }
311 
312     // Set the checksum
313     mainChecksum = -mainChecksum;
314     proxy.writeBlob(addr + 0x4, (uint8_t *)(&mainChecksum), 1);
315 
316     /*
317      * Intermediate header
318      */
319 
320     uint16_t tableSize = offset;
321     tableSize = X86ISA::htog(tableSize);
322     proxy.writeBlob(addr + 0x16, (uint8_t *)(&tableSize), 2);
323     for (int i = 0; i < 2; i++) {
324         intChecksum += tableSize;
325         tableSize >>= 8;
326     }
327 
328     intChecksum = -intChecksum;
329     proxy.writeBlob(addr + 0x15, (uint8_t *)(&intChecksum), 1);
330 }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classX86ISA_1_1SMBios_1_1SMBiosTable_afd906d478b7ba5149013125da68c4eb9}{
\index{X86ISA::SMBios::SMBiosTable@{X86ISA::SMBios::SMBiosTable}!smbiosHeader@{smbiosHeader}}
\index{smbiosHeader@{smbiosHeader}!X86ISA::SMBios::SMBiosTable@{X86ISA::SMBios::SMBiosTable}}
\subsubsection[{smbiosHeader}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf X86ISA::SMBios::SMBiosTable::SMBiosHeader}  {\bf smbiosHeader}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classX86ISA_1_1SMBios_1_1SMBiosTable_afd906d478b7ba5149013125da68c4eb9}
\hypertarget{classX86ISA_1_1SMBios_1_1SMBiosTable_a6fbbb38d1b8f7ce977a28367efb09b7c}{
\index{X86ISA::SMBios::SMBiosTable@{X86ISA::SMBios::SMBiosTable}!structures@{structures}}
\index{structures@{structures}!X86ISA::SMBios::SMBiosTable@{X86ISA::SMBios::SMBiosTable}}
\subsubsection[{structures}]{\setlength{\rightskip}{0pt plus 5cm}{\bf std::vector}$<${\bf SMBiosStructure} $\ast$$>$ {\bf structures}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classX86ISA_1_1SMBios_1_1SMBiosTable_a6fbbb38d1b8f7ce977a28367efb09b7c}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
arch/x86/bios/\hyperlink{smbios_8hh}{smbios.hh}\item 
arch/x86/bios/\hyperlink{smbios_8cc}{smbios.cc}\end{DoxyCompactItemize}
