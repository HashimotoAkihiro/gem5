<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: dev/i8254xGBe.hh ソースファイル</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li><a href="annotated.html"><span>クラス</span></a></li>
      <li class="current"><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>ファイル一覧</span></a></li>
      <li><a href="globals.html"><span>ファイルメンバ</span></a></li>
    </ul>
  </div>
<h1>dev/i8254xGBe.hh</h1><a href="i8254xGBe_8hh.html">説明を見る。</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (c) 2006 The Regents of The University of Michigan</span>
<a name="l00003"></a>00003 <span class="comment"> * All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
<a name="l00006"></a>00006 <span class="comment"> * modification, are permitted provided that the following conditions are</span>
<a name="l00007"></a>00007 <span class="comment"> * met: redistributions of source code must retain the above copyright</span>
<a name="l00008"></a>00008 <span class="comment"> * notice, this list of conditions and the following disclaimer;</span>
<a name="l00009"></a>00009 <span class="comment"> * redistributions in binary form must reproduce the above copyright</span>
<a name="l00010"></a>00010 <span class="comment"> * notice, this list of conditions and the following disclaimer in the</span>
<a name="l00011"></a>00011 <span class="comment"> * documentation and/or other materials provided with the distribution;</span>
<a name="l00012"></a>00012 <span class="comment"> * neither the name of the copyright holders nor the names of its</span>
<a name="l00013"></a>00013 <span class="comment"> * contributors may be used to endorse or promote products derived from</span>
<a name="l00014"></a>00014 <span class="comment"> * this software without specific prior written permission.</span>
<a name="l00015"></a>00015 <span class="comment"> *</span>
<a name="l00016"></a>00016 <span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<a name="l00017"></a>00017 <span class="comment"> * &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<a name="l00018"></a>00018 <span class="comment"> * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span>
<a name="l00019"></a>00019 <span class="comment"> * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span>
<a name="l00020"></a>00020 <span class="comment"> * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
<a name="l00021"></a>00021 <span class="comment"> * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
<a name="l00022"></a>00022 <span class="comment"> * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span>
<a name="l00023"></a>00023 <span class="comment"> * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span>
<a name="l00024"></a>00024 <span class="comment"> * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<a name="l00025"></a>00025 <span class="comment"> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<a name="l00026"></a>00026 <span class="comment"> * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00027"></a>00027 <span class="comment"> *</span>
<a name="l00028"></a>00028 <span class="comment"> * Authors: Ali Saidi</span>
<a name="l00029"></a>00029 <span class="comment"> */</span>
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="comment">/* @file</span>
<a name="l00032"></a>00032 <span class="comment"> * Device model for Intel&apos;s 8254x line of gigabit ethernet controllers.</span>
<a name="l00033"></a>00033 <span class="comment"> */</span>
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 <span class="preprocessor">#ifndef __DEV_I8254XGBE_HH__</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span><span class="preprocessor">#define __DEV_I8254XGBE_HH__</span>
<a name="l00037"></a>00037 <span class="preprocessor"></span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;deque&gt;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="cp__annotate_8hh.html">base/cp_annotate.hh</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;<a class="code" href="inet_8hh.html">base/inet.hh</a>&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;debug/EthernetDesc.hh&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;debug/EthernetIntr.hh&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;<a class="code" href="etherdevice_8hh.html">dev/etherdevice.hh</a>&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="etherint_8hh.html">dev/etherint.hh</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="etherpkt_8hh.html">dev/etherpkt.hh</a>&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;<a class="code" href="i8254xGBe__defs_8hh.html">dev/i8254xGBe_defs.hh</a>&quot;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &quot;<a class="code" href="pcidev_8hh.html">dev/pcidev.hh</a>&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;<a class="code" href="pktfifo_8hh.html">dev/pktfifo.hh</a>&quot;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &quot;params/IGbE.hh&quot;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &quot;<a class="code" href="eventq_8hh.html">sim/eventq.hh</a>&quot;</span>
<a name="l00053"></a>00053 
<a name="l00054"></a>00054 <span class="keyword">class </span><a class="code" href="classIGbEInt.html">IGbEInt</a>;
<a name="l00055"></a>00055 
<a name="l00056"></a><a class="code" href="classIGbE.html">00056</a> <span class="keyword">class </span><a class="code" href="classIGbE.html">IGbE</a> : <span class="keyword">public</span> <a class="code" href="classEtherDevice.html">EtherDevice</a>
<a name="l00057"></a>00057 {
<a name="l00058"></a>00058   <span class="keyword">private</span>:
<a name="l00059"></a><a class="code" href="classIGbE.html#a4c7684471cc2bc72bc660ea06ca78c91">00059</a>     <a class="code" href="classIGbEInt.html">IGbEInt</a> *<a class="code" href="classIGbE.html#a4c7684471cc2bc72bc660ea06ca78c91">etherInt</a>;
<a name="l00060"></a><a class="code" href="classIGbE.html#ad3738d2e08f4ea21f1c3721f2492c9c2">00060</a>     <a class="code" href="classCPA.html">CPA</a> *<a class="code" href="classIGbE.html#ad3738d2e08f4ea21f1c3721f2492c9c2">cpa</a>;
<a name="l00061"></a>00061 
<a name="l00062"></a>00062     <span class="comment">// device registers</span>
<a name="l00063"></a><a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">00063</a>     <a class="code" href="structiGbReg_1_1Regs.html">iGbReg::Regs</a> <a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>;
<a name="l00064"></a>00064 
<a name="l00065"></a>00065     <span class="comment">// eeprom data, status and control bits</span>
<a name="l00066"></a><a class="code" href="classIGbE.html#a8988636da8c2e4f74e8c62d7ad585a61">00066</a>     <span class="keywordtype">int</span> <a class="code" href="classIGbE.html#a8988636da8c2e4f74e8c62d7ad585a61">eeOpBits</a>, <a class="code" href="classIGbE.html#a976342e4e142f8f031f86a8e7ce7a55f">eeAddrBits</a>, <a class="code" href="classIGbE.html#ad2c36d4fa51a4befaa7518f6fa3590be">eeDataBits</a>;
<a name="l00067"></a><a class="code" href="classIGbE.html#aa6c5c24d6b03e9f01ddacc4448214383">00067</a>     uint8_t <a class="code" href="classIGbE.html#aa6c5c24d6b03e9f01ddacc4448214383">eeOpcode</a>, <a class="code" href="classIGbE.html#a00d8c4d0c00b1a7fc2a5885222511eee">eeAddr</a>;
<a name="l00068"></a><a class="code" href="classIGbE.html#a7a8d29882b2cc202e8f3d9f4e758937c">00068</a>     uint16_t <a class="code" href="classIGbE.html#a7a8d29882b2cc202e8f3d9f4e758937c">flash</a>[<a class="code" href="namespaceiGbReg.html#adb0e1024d46141c966014951f5b1e5c8">iGbReg::EEPROM_SIZE</a>];
<a name="l00069"></a>00069 
<a name="l00070"></a>00070     <span class="comment">// The drain event if we have one</span>
<a name="l00071"></a><a class="code" href="classIGbE.html#a329b71fb934a93312ca0aacbf5a3f982">00071</a>     <a class="code" href="classDrainManager.html">DrainManager</a> *<a class="code" href="classIGbE.html#a329b71fb934a93312ca0aacbf5a3f982">drainManager</a>;
<a name="l00072"></a>00072 
<a name="l00073"></a>00073     <span class="comment">// packet fifos</span>
<a name="l00074"></a><a class="code" href="classIGbE.html#a45c9c6a3665bcd91e57ff35aa9089fa7">00074</a>     <a class="code" href="classPacketFifo.html">PacketFifo</a> <a class="code" href="classIGbE.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>;
<a name="l00075"></a><a class="code" href="classIGbE.html#ae699c324753236e0a59aa2465920eb46">00075</a>     <a class="code" href="classPacketFifo.html">PacketFifo</a> <a class="code" href="classIGbE.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>;
<a name="l00076"></a>00076 
<a name="l00077"></a>00077     <span class="comment">// Packet that we are currently putting into the txFifo</span>
<a name="l00078"></a><a class="code" href="classIGbE.html#a8d22e1a154942ff0d4ab9048e7e844bb">00078</a>     <a class="code" href="classRefCountingPtr.html">EthPacketPtr</a> <a class="code" href="classIGbE.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a>;
<a name="l00079"></a>00079 
<a name="l00080"></a>00080     <span class="comment">// Should to Rx/Tx State machine tick?</span>
<a name="l00081"></a><a class="code" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">00081</a>     <span class="keywordtype">bool</span> <a class="code" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">rxTick</a>;
<a name="l00082"></a><a class="code" href="classIGbE.html#a0f33aec9eb84199e089e1917f7df501d">00082</a>     <span class="keywordtype">bool</span> <a class="code" href="classIGbE.html#a0f33aec9eb84199e089e1917f7df501d">txTick</a>;
<a name="l00083"></a><a class="code" href="classIGbE.html#a99be71cc5dbbb45b77d1d66d1bedf454">00083</a>     <span class="keywordtype">bool</span> <a class="code" href="classIGbE.html#a99be71cc5dbbb45b77d1d66d1bedf454">txFifoTick</a>;
<a name="l00084"></a>00084 
<a name="l00085"></a><a class="code" href="classIGbE.html#aa8031223419e9d8480a99fae1f2de778">00085</a>     <span class="keywordtype">bool</span> <a class="code" href="classIGbE.html#aa8031223419e9d8480a99fae1f2de778">rxDmaPacket</a>;
<a name="l00086"></a>00086 
<a name="l00087"></a>00087     <span class="comment">// Number of bytes copied from current RX packet</span>
<a name="l00088"></a><a class="code" href="classIGbE.html#a41fd0002dbd12f7ab760e7f0a6620953">00088</a>     <span class="keywordtype">unsigned</span> <a class="code" href="classIGbE.html#a41fd0002dbd12f7ab760e7f0a6620953">pktOffset</a>;
<a name="l00089"></a>00089 
<a name="l00090"></a>00090     <span class="comment">// Delays in managaging descriptors</span>
<a name="l00091"></a><a class="code" href="classIGbE.html#a899afa4a59ed0cf8334061645dc16c53">00091</a>     <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="code" href="classIGbE.html#aa17c871ae2de13303ab07a8e8b571965">fetchDelay</a>, <a class="code" href="classIGbE.html#a899afa4a59ed0cf8334061645dc16c53">wbDelay</a>;
<a name="l00092"></a><a class="code" href="classIGbE.html#ab0f05d6ecbedd2a670abfe34bc8112e1">00092</a>     <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="code" href="classIGbE.html#ae404928093bd61ac24cd54406a98046e">fetchCompDelay</a>, <a class="code" href="classIGbE.html#ab0f05d6ecbedd2a670abfe34bc8112e1">wbCompDelay</a>;
<a name="l00093"></a><a class="code" href="classIGbE.html#a2e204efac3d8a0a09aef20570520baac">00093</a>     <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="code" href="classIGbE.html#a94231b5b6ec824655f1e33a2481009fb">rxWriteDelay</a>, <a class="code" href="classIGbE.html#a2e204efac3d8a0a09aef20570520baac">txReadDelay</a>;
<a name="l00094"></a>00094 
<a name="l00095"></a>00095     <span class="comment">// Event and function to deal with RDTR timer expiring</span>
<a name="l00096"></a><a class="code" href="classIGbE.html#a047d922eba10484b3a0127faa8e1be0a">00096</a>     <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#a047d922eba10484b3a0127faa8e1be0a">rdtrProcess</a>() {
<a name="l00097"></a>00097         <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#af6593b85cc3920a68b9a0317053a4416">writeback</a>(0);
<a name="l00098"></a>00098         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetIntr,
<a name="l00099"></a>00099                 <span class="stringliteral">&quot;Posting RXT interrupt because RDTR timer expired\n&quot;</span>);
<a name="l00100"></a>00100         <a class="code" href="classIGbE.html#a5421bafb8503ffca04cac20d616ae4cc">postInterrupt</a>(<a class="code" href="namespaceiGbReg.html#ab881f740bd3545d8eb42b05253752e9ca5de08c161325e1127c2727a0b234f9b3">iGbReg::IT_RXT</a>);
<a name="l00101"></a>00101     }
<a name="l00102"></a>00102 
<a name="l00103"></a>00103     <span class="comment">//friend class EventWrapper&lt;IGbE, &amp;IGbE::rdtrProcess&gt;;</span>
<a name="l00104"></a><a class="code" href="classIGbE.html#a72b4c60f46bdb4b88427dec167aaca80">00104</a>     <a class="code" href="classEventWrapper.html">EventWrapper&lt;IGbE, &amp;IGbE::rdtrProcess&gt;</a> <a class="code" href="classIGbE.html#a72b4c60f46bdb4b88427dec167aaca80">rdtrEvent</a>;
<a name="l00105"></a>00105 
<a name="l00106"></a>00106     <span class="comment">// Event and function to deal with RADV timer expiring</span>
<a name="l00107"></a><a class="code" href="classIGbE.html#a1d54e26efe0f0a1fbd354ccffa34459f">00107</a>     <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#a1d54e26efe0f0a1fbd354ccffa34459f">radvProcess</a>() {
<a name="l00108"></a>00108         <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#af6593b85cc3920a68b9a0317053a4416">writeback</a>(0);
<a name="l00109"></a>00109         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetIntr,
<a name="l00110"></a>00110                 <span class="stringliteral">&quot;Posting RXT interrupt because RADV timer expired\n&quot;</span>);
<a name="l00111"></a>00111         <a class="code" href="classIGbE.html#a5421bafb8503ffca04cac20d616ae4cc">postInterrupt</a>(<a class="code" href="namespaceiGbReg.html#ab881f740bd3545d8eb42b05253752e9ca5de08c161325e1127c2727a0b234f9b3">iGbReg::IT_RXT</a>);
<a name="l00112"></a>00112     }
<a name="l00113"></a>00113 
<a name="l00114"></a>00114     <span class="comment">//friend class EventWrapper&lt;IGbE, &amp;IGbE::radvProcess&gt;;</span>
<a name="l00115"></a><a class="code" href="classIGbE.html#a30a3a2a8194ad851683c915beca8a172">00115</a>     <a class="code" href="classEventWrapper.html">EventWrapper&lt;IGbE, &amp;IGbE::radvProcess&gt;</a> <a class="code" href="classIGbE.html#a30a3a2a8194ad851683c915beca8a172">radvEvent</a>;
<a name="l00116"></a>00116 
<a name="l00117"></a>00117     <span class="comment">// Event and function to deal with TADV timer expiring</span>
<a name="l00118"></a><a class="code" href="classIGbE.html#a7e3216d8f11c9d6c3fa244be21648778">00118</a>     <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#a7e3216d8f11c9d6c3fa244be21648778">tadvProcess</a>() {
<a name="l00119"></a>00119         <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#af6593b85cc3920a68b9a0317053a4416">writeback</a>(0);
<a name="l00120"></a>00120         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetIntr,
<a name="l00121"></a>00121                 <span class="stringliteral">&quot;Posting TXDW interrupt because TADV timer expired\n&quot;</span>);
<a name="l00122"></a>00122         <a class="code" href="classIGbE.html#a5421bafb8503ffca04cac20d616ae4cc">postInterrupt</a>(<a class="code" href="namespaceiGbReg.html#ab881f740bd3545d8eb42b05253752e9ca41242befdd855ef8192a0cad76e34a02">iGbReg::IT_TXDW</a>);
<a name="l00123"></a>00123     }
<a name="l00124"></a>00124 
<a name="l00125"></a>00125     <span class="comment">//friend class EventWrapper&lt;IGbE, &amp;IGbE::tadvProcess&gt;;</span>
<a name="l00126"></a><a class="code" href="classIGbE.html#a52af2948f0bdbd05624c9f1e90872556">00126</a>     <a class="code" href="classEventWrapper.html">EventWrapper&lt;IGbE, &amp;IGbE::tadvProcess&gt;</a> <a class="code" href="classIGbE.html#a52af2948f0bdbd05624c9f1e90872556">tadvEvent</a>;
<a name="l00127"></a>00127 
<a name="l00128"></a>00128     <span class="comment">// Event and function to deal with TIDV timer expiring</span>
<a name="l00129"></a><a class="code" href="classIGbE.html#aedc70a3ef5f173813e3060f77fa53bc8">00129</a>     <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#aedc70a3ef5f173813e3060f77fa53bc8">tidvProcess</a>() {
<a name="l00130"></a>00130         <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>.<a class="code" href="classIGbE_1_1DescCache.html#af6593b85cc3920a68b9a0317053a4416">writeback</a>(0);
<a name="l00131"></a>00131         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetIntr,
<a name="l00132"></a>00132                 <span class="stringliteral">&quot;Posting TXDW interrupt because TIDV timer expired\n&quot;</span>);
<a name="l00133"></a>00133         <a class="code" href="classIGbE.html#a5421bafb8503ffca04cac20d616ae4cc">postInterrupt</a>(<a class="code" href="namespaceiGbReg.html#ab881f740bd3545d8eb42b05253752e9ca41242befdd855ef8192a0cad76e34a02">iGbReg::IT_TXDW</a>);
<a name="l00134"></a>00134     }
<a name="l00135"></a>00135     <span class="comment">//friend class EventWrapper&lt;IGbE, &amp;IGbE::tidvProcess&gt;;</span>
<a name="l00136"></a><a class="code" href="classIGbE.html#a91fce863693eb4c56a924639620d77cf">00136</a>     <a class="code" href="classEventWrapper.html">EventWrapper&lt;IGbE, &amp;IGbE::tidvProcess&gt;</a> <a class="code" href="classIGbE.html#a91fce863693eb4c56a924639620d77cf">tidvEvent</a>;
<a name="l00137"></a>00137 
<a name="l00138"></a>00138     <span class="comment">// Main event to tick the device</span>
<a name="l00139"></a>00139     <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#a873dd91783f9efb4a590aded1f70d6b0">tick</a>();
<a name="l00140"></a>00140     <span class="comment">//friend class EventWrapper&lt;IGbE, &amp;IGbE::tick&gt;;</span>
<a name="l00141"></a><a class="code" href="classIGbE.html#a13b02e56360d63f349a514edb321bd9c">00141</a>     <a class="code" href="classEventWrapper.html">EventWrapper&lt;IGbE, &amp;IGbE::tick&gt;</a> <a class="code" href="classIGbE.html#a13b02e56360d63f349a514edb321bd9c">tickEvent</a>;
<a name="l00142"></a>00142 
<a name="l00143"></a>00143 
<a name="l00144"></a><a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">00144</a>     uint64_t <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>;
<a name="l00145"></a>00145 
<a name="l00146"></a>00146     <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#aa22f1272cbc1c6b44dd50faaa71a0d87">rxStateMachine</a>();
<a name="l00147"></a>00147     <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#a86f1c8a72188e638c991535ba96f5f0e">txStateMachine</a>();
<a name="l00148"></a>00148     <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#af67ff1365c83adc97fef8753e38f3d9e">txWire</a>();
<a name="l00149"></a>00149 
<a name="l00155"></a>00155     <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#a5421bafb8503ffca04cac20d616ae4cc">postInterrupt</a>(<a class="code" href="namespaceiGbReg.html#ab881f740bd3545d8eb42b05253752e9c">iGbReg::IntTypes</a> <a class="code" href="namespaceArmISA.html#af5dfd7e551f8c5b461816e813dab252f">t</a>, <span class="keywordtype">bool</span> now = <span class="keyword">false</span>);
<a name="l00156"></a>00156 
<a name="l00160"></a>00160     <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#a29bfbbe58f3015bfb026c019295a8836">chkInterrupt</a>();
<a name="l00161"></a>00161 
<a name="l00164"></a>00164     <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#a671c460437037741ca81581773939a28">delayIntEvent</a>();
<a name="l00165"></a>00165     <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#a6cc0f5948b3dc7c1f2e489bce23ef907">cpuPostInt</a>();
<a name="l00166"></a>00166     <span class="comment">// Event to moderate interrupts</span>
<a name="l00167"></a><a class="code" href="classIGbE.html#a3de27cfe33d0ae9f9451c767ee40a57d">00167</a>     <a class="code" href="classEventWrapper.html">EventWrapper&lt;IGbE, &amp;IGbE::delayIntEvent&gt;</a> <a class="code" href="classIGbE.html#a3de27cfe33d0ae9f9451c767ee40a57d">interEvent</a>;
<a name="l00168"></a>00168 
<a name="l00171"></a>00171     <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#a5bb6e41ae1497d53a611db0a6b455115">cpuClearInt</a>();
<a name="l00172"></a>00172 
<a name="l00173"></a><a class="code" href="classIGbE.html#ad4b9fb8ece2ddee6cda2b12e4f77b3d1">00173</a>     <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="code" href="classIGbE.html#ad4b9fb8ece2ddee6cda2b12e4f77b3d1">intClock</a>() { <span class="keywordflow">return</span> <a class="code" href="namespaceSimClock_1_1Int.html#a370bc05be45c1b9f039369ffd5c0efd4" title="nanosecond">SimClock::Int::ns</a> * 1024; }
<a name="l00174"></a>00174 
<a name="l00177"></a>00177     <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#a9506deecc41eb6290f9b9b8662cc33c2">restartClock</a>();
<a name="l00178"></a>00178 
<a name="l00182"></a>00182     <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#a97cbf86aeda5390deb20b1d39396d111">checkDrain</a>();
<a name="l00183"></a>00183 
<a name="l00184"></a><a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">00184</a>     <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(std::string <a class="code" href="namespaceMipsISA.html#a54c7875eaf2634ca9f55701aee2a22e5">sm</a>, std::string <a class="code" href="namespaceArmISA.html#ae9ccb60923e03f5112b726ef11e2d299">st</a>, <span class="keywordtype">int</span> <a class="code" href="namespacem5_1_1debug.html#a9ceb38153d5c0f156fbeada6dc00ff4f">flags</a> = <a class="code" href="classCPA.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9a96f120298159c9334e174bf9f286f63b">CPA::FL_NONE</a>) {
<a name="l00185"></a>00185         <a class="code" href="classIGbE.html#ad3738d2e08f4ea21f1c3721f2492c9c2">cpa</a>-&gt;<a class="code" href="classCPA.html#adaf891d4f8327c0311472739f4a2235b">hwBegin</a>((<a class="code" href="classCPA.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">CPA::flags</a>)<a class="code" href="namespacem5_1_1debug.html#a9ceb38153d5c0f156fbeada6dc00ff4f">flags</a>, <a class="code" href="classPioDevice.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>, sm, st);
<a name="l00186"></a>00186     }
<a name="l00187"></a>00187 
<a name="l00188"></a><a class="code" href="classIGbE.html#ad5560d7f7671ea0c96250beacf187ac8">00188</a>     <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#ad5560d7f7671ea0c96250beacf187ac8">anQ</a>(std::string <a class="code" href="namespaceMipsISA.html#a54c7875eaf2634ca9f55701aee2a22e5">sm</a>, std::string <a class="code" href="namespaceArmISA.html#a853401ad1c480843ad53caaa0198fd05">q</a>) { 
<a name="l00189"></a>00189         <a class="code" href="classIGbE.html#ad3738d2e08f4ea21f1c3721f2492c9c2">cpa</a>-&gt;<a class="code" href="classCPA.html#a31614725ede04f43ff983d5dedb56590">hwQ</a>(<a class="code" href="classCPA.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9a96f120298159c9334e174bf9f286f63b">CPA::FL_NONE</a>, <a class="code" href="classPioDevice.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>, sm, q, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>);
<a name="l00190"></a>00190     }
<a name="l00191"></a>00191 
<a name="l00192"></a><a class="code" href="classIGbE.html#a4d59c58fec3355c64488974a9110bb70">00192</a>     <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#a4d59c58fec3355c64488974a9110bb70">anDq</a>(std::string <a class="code" href="namespaceMipsISA.html#a54c7875eaf2634ca9f55701aee2a22e5">sm</a>, std::string <a class="code" href="namespaceArmISA.html#a853401ad1c480843ad53caaa0198fd05">q</a>) {
<a name="l00193"></a>00193         <a class="code" href="classIGbE.html#ad3738d2e08f4ea21f1c3721f2492c9c2">cpa</a>-&gt;<a class="code" href="classCPA.html#ac6ac43bd87dec93efd50230427086a92">hwDq</a>(<a class="code" href="classCPA.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9a96f120298159c9334e174bf9f286f63b">CPA::FL_NONE</a>, <a class="code" href="classPioDevice.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>, sm, q, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>);
<a name="l00194"></a>00194     }
<a name="l00195"></a>00195 
<a name="l00196"></a><a class="code" href="classIGbE.html#a9398b9f9270a0cfcc96ab2f8ad4b2c87">00196</a>     <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#a9398b9f9270a0cfcc96ab2f8ad4b2c87">anPq</a>(std::string <a class="code" href="namespaceMipsISA.html#a54c7875eaf2634ca9f55701aee2a22e5">sm</a>, std::string <a class="code" href="namespaceArmISA.html#a853401ad1c480843ad53caaa0198fd05">q</a>, <span class="keywordtype">int</span> num = 1) {
<a name="l00197"></a>00197         <a class="code" href="classIGbE.html#ad3738d2e08f4ea21f1c3721f2492c9c2">cpa</a>-&gt;<a class="code" href="classCPA.html#af8e1db0d850fba66449e84c9387c2fca">hwPq</a>(<a class="code" href="classCPA.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9a96f120298159c9334e174bf9f286f63b">CPA::FL_NONE</a>, <a class="code" href="classPioDevice.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>, sm, q, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>, <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>, num);
<a name="l00198"></a>00198     }
<a name="l00199"></a>00199 
<a name="l00200"></a><a class="code" href="classIGbE.html#a48fd12dd7cf4b842162b7a0b89875559">00200</a>     <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#a48fd12dd7cf4b842162b7a0b89875559">anRq</a>(std::string <a class="code" href="namespaceMipsISA.html#a54c7875eaf2634ca9f55701aee2a22e5">sm</a>, std::string <a class="code" href="namespaceArmISA.html#a853401ad1c480843ad53caaa0198fd05">q</a>, <span class="keywordtype">int</span> num = 1) {
<a name="l00201"></a>00201         <a class="code" href="classIGbE.html#ad3738d2e08f4ea21f1c3721f2492c9c2">cpa</a>-&gt;<a class="code" href="classCPA.html#abfcac9cc80c2bd60bafb7da3f6669ba6">hwRq</a>(<a class="code" href="classCPA.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9a96f120298159c9334e174bf9f286f63b">CPA::FL_NONE</a>, <a class="code" href="classPioDevice.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>, sm, q, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>, <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>, num);
<a name="l00202"></a>00202     }
<a name="l00203"></a>00203 
<a name="l00204"></a><a class="code" href="classIGbE.html#ace79fee3c0fd652014ae35a7b1497ca1">00204</a>     <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#ace79fee3c0fd652014ae35a7b1497ca1">anWe</a>(std::string <a class="code" href="namespaceMipsISA.html#a54c7875eaf2634ca9f55701aee2a22e5">sm</a>, std::string <a class="code" href="namespaceArmISA.html#a853401ad1c480843ad53caaa0198fd05">q</a>) {
<a name="l00205"></a>00205         <a class="code" href="classIGbE.html#ad3738d2e08f4ea21f1c3721f2492c9c2">cpa</a>-&gt;<a class="code" href="classCPA.html#a5b3ce310c0911ec7bca22bc32f243cb9">hwWe</a>(<a class="code" href="classCPA.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9a96f120298159c9334e174bf9f286f63b">CPA::FL_NONE</a>, <a class="code" href="classPioDevice.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>, sm, q, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>);
<a name="l00206"></a>00206     }
<a name="l00207"></a>00207 
<a name="l00208"></a><a class="code" href="classIGbE.html#a09c6a12f9551bd90d913dfe8ed396a67">00208</a>     <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#a09c6a12f9551bd90d913dfe8ed396a67">anWf</a>(std::string <a class="code" href="namespaceMipsISA.html#a54c7875eaf2634ca9f55701aee2a22e5">sm</a>, std::string <a class="code" href="namespaceArmISA.html#a853401ad1c480843ad53caaa0198fd05">q</a>) {
<a name="l00209"></a>00209         <a class="code" href="classIGbE.html#ad3738d2e08f4ea21f1c3721f2492c9c2">cpa</a>-&gt;<a class="code" href="classCPA.html#a5f67bcd321d7d3535e71a61c71fbd304">hwWf</a>(<a class="code" href="classCPA.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9a96f120298159c9334e174bf9f286f63b">CPA::FL_NONE</a>, <a class="code" href="classPioDevice.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>, sm, q, <a class="code" href="classIGbE.html#ab70964077d0446a01beedcfb7b9f64da">macAddr</a>);
<a name="l00210"></a>00210     }
<a name="l00211"></a>00211 
<a name="l00212"></a>00212 
<a name="l00213"></a>00213     <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00214"></a><a class="code" href="classIGbE_1_1DescCache.html">00214</a>     <span class="keyword">class </span><a class="code" href="classIGbE_1_1DescCache.html">DescCache</a>
<a name="l00215"></a>00215     {
<a name="l00216"></a>00216       <span class="keyword">protected</span>:
<a name="l00217"></a>00217         <span class="keyword">virtual</span> <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="code" href="classIGbE_1_1DescCache.html#aa8bdc83aee2be5e0eaa7a1f7f1f284e2">descBase</a>() <span class="keyword">const</span> = 0;
<a name="l00218"></a>00218         <span class="keyword">virtual</span> <span class="keywordtype">long</span> <a class="code" href="classIGbE_1_1DescCache.html#af413050780b6b8b2fe0793fff12037e3">descHead</a>() <span class="keyword">const</span> = 0;
<a name="l00219"></a>00219         <span class="keyword">virtual</span> <span class="keywordtype">long</span> <a class="code" href="classIGbE_1_1DescCache.html#a88ebc5d9eb88ca9148465557e9a66c1c">descTail</a>() <span class="keyword">const</span> = 0;
<a name="l00220"></a>00220         <span class="keyword">virtual</span> <span class="keywordtype">long</span> <a class="code" href="classIGbE_1_1DescCache.html#a8eb35163568b01fa17aa47b23a80f90c">descLen</a>() <span class="keyword">const</span> = 0;
<a name="l00221"></a>00221         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1DescCache.html#af48912789332a0283480cd85c7197f15">updateHead</a>(<span class="keywordtype">long</span> h) = 0;
<a name="l00222"></a>00222         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1DescCache.html#a9b931707aadb26e13262c50e0dd87006">enableSm</a>() = 0;
<a name="l00223"></a><a class="code" href="classIGbE_1_1DescCache.html#a22d736f39e553f2f93799dc2e0eea912">00223</a>         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1DescCache.html#a22d736f39e553f2f93799dc2e0eea912">actionAfterWb</a>() {}
<a name="l00224"></a>00224         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1DescCache.html#abe568c102619a35d2aa1a37c64dff086">fetchAfterWb</a>() = 0;
<a name="l00225"></a>00225 
<a name="l00226"></a><a class="code" href="classIGbE_1_1DescCache.html#a1587fdc5fc2e56988bee51b7a035cd30">00226</a>         <span class="keyword">typedef</span> <a class="code" href="classstd_1_1deque.html">std::deque&lt;T *&gt;</a> <a class="code" href="classstd_1_1deque.html">CacheType</a>;
<a name="l00227"></a><a class="code" href="classIGbE_1_1DescCache.html#a99982ada48f129fedf0ee5d8871f5df8">00227</a>         <a class="code" href="classstd_1_1deque.html">CacheType</a> <a class="code" href="classIGbE_1_1DescCache.html#a99982ada48f129fedf0ee5d8871f5df8">usedCache</a>;
<a name="l00228"></a><a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">00228</a>         <a class="code" href="classstd_1_1deque.html">CacheType</a> <a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>;
<a name="l00229"></a>00229 
<a name="l00230"></a><a class="code" href="classIGbE_1_1DescCache.html#a45bfe33ba83d15f61fe3f115d779717e">00230</a>         T *<a class="code" href="classIGbE_1_1DescCache.html#a45bfe33ba83d15f61fe3f115d779717e">fetchBuf</a>;
<a name="l00231"></a><a class="code" href="classIGbE_1_1DescCache.html#a48d72919f0a5e868ed72f1b9f995e294">00231</a>         T *<a class="code" href="classIGbE_1_1DescCache.html#a48d72919f0a5e868ed72f1b9f995e294">wbBuf</a>;
<a name="l00232"></a>00232 
<a name="l00233"></a>00233         <span class="comment">// Pointer to the device we cache for</span>
<a name="l00234"></a><a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">00234</a>         <a class="code" href="classIGbE.html">IGbE</a> *<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>;
<a name="l00235"></a>00235 
<a name="l00236"></a>00236         <span class="comment">// Name of this  descriptor cache</span>
<a name="l00237"></a><a class="code" href="classIGbE_1_1DescCache.html#aaf2ed934b37cbbd236fdd1b01a5f5005">00237</a>         std::string <a class="code" href="classIGbE_1_1DescCache.html#aaf2ed934b37cbbd236fdd1b01a5f5005">_name</a>;
<a name="l00238"></a>00238 
<a name="l00239"></a>00239         <span class="comment">// How far we&apos;ve cached</span>
<a name="l00240"></a><a class="code" href="classIGbE_1_1DescCache.html#ae61bf30eb8cd19a999687fc3b471f778">00240</a>         <span class="keywordtype">int</span> <a class="code" href="classIGbE_1_1DescCache.html#ae61bf30eb8cd19a999687fc3b471f778">cachePnt</a>;
<a name="l00241"></a>00241 
<a name="l00242"></a>00242         <span class="comment">// The size of the descriptor cache</span>
<a name="l00243"></a><a class="code" href="classIGbE_1_1DescCache.html#a439227feff9d7f55384e8780cfc2eb82">00243</a>         <span class="keywordtype">int</span> <a class="code" href="classIGbE_1_1DescCache.html#a439227feff9d7f55384e8780cfc2eb82">size</a>;
<a name="l00244"></a>00244 
<a name="l00245"></a>00245         <span class="comment">// How many descriptors we are currently fetching</span>
<a name="l00246"></a><a class="code" href="classIGbE_1_1DescCache.html#adf659db1aecba7384fa82d960d89d602">00246</a>         <span class="keywordtype">int</span> <a class="code" href="classIGbE_1_1DescCache.html#adf659db1aecba7384fa82d960d89d602">curFetching</a>;
<a name="l00247"></a>00247 
<a name="l00248"></a>00248         <span class="comment">// How many descriptors we are currently writing back</span>
<a name="l00249"></a><a class="code" href="classIGbE_1_1DescCache.html#a40ac490f16b3b0f977f34621d2b8c550">00249</a>         <span class="keywordtype">int</span> <a class="code" href="classIGbE_1_1DescCache.html#a40ac490f16b3b0f977f34621d2b8c550">wbOut</a>;
<a name="l00250"></a>00250 
<a name="l00251"></a>00251         <span class="comment">// if the we wrote back to the end of the descriptor ring and are going</span>
<a name="l00252"></a>00252         <span class="comment">// to have to wrap and write more</span>
<a name="l00253"></a><a class="code" href="classIGbE_1_1DescCache.html#adf55798327cfefd75a5db0a6e71009e6">00253</a>         <span class="keywordtype">bool</span> <a class="code" href="classIGbE_1_1DescCache.html#adf55798327cfefd75a5db0a6e71009e6">moreToWb</a>;
<a name="l00254"></a>00254 
<a name="l00255"></a>00255         <span class="comment">// What the alignment is of the next descriptor writeback</span>
<a name="l00256"></a><a class="code" href="classIGbE_1_1DescCache.html#aeb55673ae3c17ae211ad114c823bf761">00256</a>         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="code" href="classIGbE_1_1DescCache.html#aeb55673ae3c17ae211ad114c823bf761">wbAlignment</a>;
<a name="l00257"></a>00257 
<a name="l00259"></a><a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">00259</a>         <a class="code" href="classRefCountingPtr.html">EthPacketPtr</a> <a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a>;
<a name="l00260"></a>00260 
<a name="l00262"></a><a class="code" href="classIGbE_1_1DescCache.html#aaeea87c73c95205c88d11e03fe8f48b9">00262</a>         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="code" href="classIGbE_1_1DescCache.html#aaeea87c73c95205c88d11e03fe8f48b9">pciToDma</a>(<a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="code" href="namespaceArmISA.html#a468da4d7330577ee8746df2acfa40959">a</a>) { <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classPciDevice.html#a75b48f1787959a4617f2a599d7c09aab">platform</a>-&gt;<a class="code" href="classPlatform.html#a87078b3d3a28ae134f6736337e90dac3">pciToDma</a>(a); }
<a name="l00263"></a>00263 
<a name="l00264"></a>00264       <span class="keyword">public</span>:
<a name="l00266"></a><a class="code" href="classIGbE_1_1DescCache.html#a7fe6b65fb10d40a843ce4e8925062aa6">00266</a>         std::string <a class="code" href="classIGbE_1_1DescCache.html#afa0b0aa4b6539cf61d33c27e35c809a1">annSmFetch</a>, <a class="code" href="classIGbE_1_1DescCache.html#af0c632f8282132e3abbbe879fcdea126">annSmWb</a>, <a class="code" href="classIGbE_1_1DescCache.html#a7cc80d85ecc41b9f0e262b9ad332fc76">annUnusedDescQ</a>, <a class="code" href="classIGbE_1_1DescCache.html#a6ee5c97cfcef9e794d9691f2d11454aa">annUsedCacheQ</a>,
<a name="l00267"></a>00267             <a class="code" href="classIGbE_1_1DescCache.html#a7fe6b65fb10d40a843ce4e8925062aa6">annUsedDescQ</a>, <a class="code" href="classIGbE_1_1DescCache.html#aa1b65175b7b2bc6609744ebc8657ac7d">annUnusedCacheQ</a>, <a class="code" href="classIGbE_1_1DescCache.html#a710b789ff37ebd40141ea5d4239cb50d">annDescQ</a>;
<a name="l00268"></a>00268 
<a name="l00269"></a>00269         <a class="code" href="classIGbE_1_1DescCache.html#a5d52519add3740ad26acef908669a09f">DescCache</a>(<a class="code" href="classIGbE.html">IGbE</a> *<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>, <span class="keyword">const</span> std::string <a class="code" href="namespaceArmISA.html#aeab71244afb687f16d8c4f5ee9d6ef0e">n</a>, <span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#afaeb18e17f862d8fcb76dfb68a18854f">s</a>);
<a name="l00270"></a>00270         <span class="keyword">virtual</span> <a class="code" href="classIGbE_1_1DescCache.html#a386ef53292372f92559f7d22782dfa76">~DescCache</a>();
<a name="l00271"></a>00271 
<a name="l00272"></a><a class="code" href="classIGbE_1_1DescCache.html#af1801e31af6399bccce114ab12575168">00272</a>         std::string <a class="code" href="classIGbE_1_1DescCache.html#af1801e31af6399bccce114ab12575168">name</a>() { <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1DescCache.html#aaf2ed934b37cbbd236fdd1b01a5f5005">_name</a>; }
<a name="l00273"></a>00273 
<a name="l00278"></a>00278         <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1DescCache.html#aa55a03ef5e0e85dfa7860656c57c649a">areaChanged</a>();
<a name="l00279"></a>00279 
<a name="l00280"></a>00280         <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1DescCache.html#af6593b85cc3920a68b9a0317053a4416">writeback</a>(<a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> aMask);
<a name="l00281"></a>00281         <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1DescCache.html#a427d2491d0856a590c1168301f146509">writeback1</a>();
<a name="l00282"></a><a class="code" href="classIGbE_1_1DescCache.html#a20fa57c5779fd6371598e36d8ba9a5aa">00282</a>         <a class="code" href="classEventWrapper.html">EventWrapper&lt;DescCache, &amp;DescCache::writeback1&gt;</a> <a class="code" href="classIGbE_1_1DescCache.html#a20fa57c5779fd6371598e36d8ba9a5aa">wbDelayEvent</a>;
<a name="l00283"></a>00283 
<a name="l00287"></a>00287         <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1DescCache.html#a69c2eb368f23448d28ccb10dfa67c250">fetchDescriptors</a>();
<a name="l00288"></a>00288         <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1DescCache.html#a2fbe1c3d2d7e697512e63f3d14787e8b">fetchDescriptors1</a>();
<a name="l00289"></a><a class="code" href="classIGbE_1_1DescCache.html#a31cb5aa7ad676c587a8b467dfd762b9b">00289</a>         <a class="code" href="classEventWrapper.html">EventWrapper&lt;DescCache, &amp;DescCache::fetchDescriptors1&gt;</a> <a class="code" href="classIGbE_1_1DescCache.html#a31cb5aa7ad676c587a8b467dfd762b9b">fetchDelayEvent</a>;
<a name="l00290"></a>00290 
<a name="l00293"></a>00293         <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1DescCache.html#a23b4635f3979b87b52d2324c4d7ab39a">fetchComplete</a>();
<a name="l00294"></a><a class="code" href="classIGbE_1_1DescCache.html#a663aeb25d4224f8d4cbe8d4e1fe3d7d3">00294</a>         <a class="code" href="classEventWrapper.html">EventWrapper&lt;DescCache, &amp;DescCache::fetchComplete&gt;</a> <a class="code" href="classIGbE_1_1DescCache.html#a663aeb25d4224f8d4cbe8d4e1fe3d7d3">fetchEvent</a>;
<a name="l00295"></a>00295 
<a name="l00298"></a>00298         <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1DescCache.html#a4e5412affaf9bee5874dcbdb032659cf">wbComplete</a>();
<a name="l00299"></a><a class="code" href="classIGbE_1_1DescCache.html#ae9ac7c384feda84fd885f523f0ce5f73">00299</a>         <a class="code" href="classEventWrapper.html">EventWrapper&lt;DescCache, &amp;DescCache::wbComplete&gt;</a> <a class="code" href="classIGbE_1_1DescCache.html#ae9ac7c384feda84fd885f523f0ce5f73">wbEvent</a>;
<a name="l00300"></a>00300 
<a name="l00301"></a>00301         <span class="comment">/* Return the number of descriptors left in the ring, so the device has</span>
<a name="l00302"></a>00302 <span class="comment">         * a way to figure out if it needs to interrupt.</span>
<a name="l00303"></a>00303 <span class="comment">         */</span>
<a name="l00304"></a>00304         <span class="keywordtype">unsigned</span>
<a name="l00305"></a><a class="code" href="classIGbE_1_1DescCache.html#ad60cb6948516cc9177fc65c07c7a0550">00305</a>         <a class="code" href="classIGbE_1_1DescCache.html#ad60cb6948516cc9177fc65c07c7a0550">descLeft</a>()<span class="keyword"> const</span>
<a name="l00306"></a>00306 <span class="keyword">        </span>{
<a name="l00307"></a>00307             <span class="keywordtype">unsigned</span> left = <a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.size();
<a name="l00308"></a>00308             <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1DescCache.html#ae61bf30eb8cd19a999687fc3b471f778">cachePnt</a> &gt; <a class="code" href="classIGbE_1_1DescCache.html#a88ebc5d9eb88ca9148465557e9a66c1c">descTail</a>())
<a name="l00309"></a>00309                 left += (<a class="code" href="classIGbE_1_1DescCache.html#a8eb35163568b01fa17aa47b23a80f90c">descLen</a>() - <a class="code" href="classIGbE_1_1DescCache.html#ae61bf30eb8cd19a999687fc3b471f778">cachePnt</a> + <a class="code" href="classIGbE_1_1DescCache.html#a88ebc5d9eb88ca9148465557e9a66c1c">descTail</a>());
<a name="l00310"></a>00310             <span class="keywordflow">else</span>
<a name="l00311"></a>00311                 left += (<a class="code" href="classIGbE_1_1DescCache.html#a88ebc5d9eb88ca9148465557e9a66c1c">descTail</a>() - <a class="code" href="classIGbE_1_1DescCache.html#ae61bf30eb8cd19a999687fc3b471f778">cachePnt</a>);
<a name="l00312"></a>00312 
<a name="l00313"></a>00313             <span class="keywordflow">return</span> left;
<a name="l00314"></a>00314         }
<a name="l00315"></a>00315 
<a name="l00316"></a>00316         <span class="comment">/* Return the number of descriptors used and not written back.</span>
<a name="l00317"></a>00317 <span class="comment">         */</span>
<a name="l00318"></a><a class="code" href="classIGbE_1_1DescCache.html#a8e6020ce06b62c70f3aaa6d6222353fb">00318</a>         <span class="keywordtype">unsigned</span> <a class="code" href="classIGbE_1_1DescCache.html#a8e6020ce06b62c70f3aaa6d6222353fb">descUsed</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1DescCache.html#a99982ada48f129fedf0ee5d8871f5df8">usedCache</a>.size(); }
<a name="l00319"></a>00319 
<a name="l00320"></a>00320         <span class="comment">/* Return the number of cache unused descriptors we have. */</span>
<a name="l00321"></a><a class="code" href="classIGbE_1_1DescCache.html#a73d7e7efbb2dc6340aef1e2f3e4cb02d">00321</a>         <span class="keywordtype">unsigned</span> <a class="code" href="classIGbE_1_1DescCache.html#a73d7e7efbb2dc6340aef1e2f3e4cb02d">descUnused</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.size(); }
<a name="l00322"></a>00322 
<a name="l00323"></a>00323         <span class="comment">/* Get into a state where the descriptor address/head/etc colud be</span>
<a name="l00324"></a>00324 <span class="comment">         * changed */</span>
<a name="l00325"></a>00325         <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1DescCache.html#ad20897c5c8bd47f5d4005989bead0e55">reset</a>();
<a name="l00326"></a>00326 
<a name="l00327"></a>00327         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1DescCache.html#a53e036786d17361be4c7320d39c99b84">serialize</a>(std::ostream &amp;<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>);
<a name="l00328"></a>00328         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1DescCache.html#af22e5d6d660b97db37003ac61ac4ee49">unserialize</a>(<a class="code" href="classCheckpoint.html">Checkpoint</a> *cp, <span class="keyword">const</span> std::string &amp;section);
<a name="l00329"></a>00329 
<a name="l00330"></a><a class="code" href="classIGbE_1_1DescCache.html#a09989bc9720a200c8164dc1ef109d70b">00330</a>         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classIGbE_1_1DescCache.html#a09989bc9720a200c8164dc1ef109d70b">hasOutstandingEvents</a>() {
<a name="l00331"></a>00331             <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1DescCache.html#ae9ac7c384feda84fd885f523f0ce5f73">wbEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>() || <a class="code" href="classIGbE_1_1DescCache.html#a663aeb25d4224f8d4cbe8d4e1fe3d7d3">fetchEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>();
<a name="l00332"></a>00332         }
<a name="l00333"></a>00333 
<a name="l00334"></a>00334     };
<a name="l00335"></a>00335 
<a name="l00336"></a>00336 
<a name="l00337"></a><a class="code" href="classIGbE_1_1RxDescCache.html">00337</a>     <span class="keyword">class </span><a class="code" href="classIGbE_1_1RxDescCache.html">RxDescCache</a> : <span class="keyword">public</span> <a class="code" href="classIGbE_1_1DescCache.html">DescCache</a>&lt;iGbReg::RxDesc&gt;
<a name="l00338"></a>00338     {
<a name="l00339"></a>00339       <span class="keyword">protected</span>:
<a name="l00340"></a><a class="code" href="classIGbE_1_1RxDescCache.html#ae5a77c90557026fdf4fd78883f92bef9">00340</a>         <span class="keyword">virtual</span> <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="code" href="classIGbE_1_1RxDescCache.html#ae5a77c90557026fdf4fd78883f92bef9">descBase</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a688fc8a72222faa75cd03f727b684adc">rdba</a>(); }
<a name="l00341"></a><a class="code" href="classIGbE_1_1RxDescCache.html#af3d1877b6f30bdf98b95351c38d400f3">00341</a>         <span class="keyword">virtual</span> <span class="keywordtype">long</span> <a class="code" href="classIGbE_1_1RxDescCache.html#af3d1877b6f30bdf98b95351c38d400f3">descHead</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a6b6133f358acecf01c1b8f5df50bca79">rdh</a>(); }
<a name="l00342"></a><a class="code" href="classIGbE_1_1RxDescCache.html#a465e4e31be3a89db3d7f9cd1ecc40064">00342</a>         <span class="keyword">virtual</span> <span class="keywordtype">long</span> <a class="code" href="classIGbE_1_1RxDescCache.html#a465e4e31be3a89db3d7f9cd1ecc40064">descLen</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa4a69b303cfc97591de35a8aa05f472f">rdlen</a>() &gt;&gt; 4; }
<a name="l00343"></a><a class="code" href="classIGbE_1_1RxDescCache.html#a4b6b769be62592fc43518ba480bbd1f7">00343</a>         <span class="keyword">virtual</span> <span class="keywordtype">long</span> <a class="code" href="classIGbE_1_1RxDescCache.html#a4b6b769be62592fc43518ba480bbd1f7">descTail</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7518b9a796cfdbb12e4ad473349ffb80">rdt</a>(); }
<a name="l00344"></a><a class="code" href="classIGbE_1_1RxDescCache.html#a4f8dbb4f64167626cac110753708c55c">00344</a>         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1RxDescCache.html#a4f8dbb4f64167626cac110753708c55c">updateHead</a>(<span class="keywordtype">long</span> h) { <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a6b6133f358acecf01c1b8f5df50bca79">rdh</a>(h); }
<a name="l00345"></a>00345         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1RxDescCache.html#aec7fdcc540223076999e0f8f07f854bc">enableSm</a>();
<a name="l00346"></a><a class="code" href="classIGbE_1_1RxDescCache.html#abb8070fbcfa38a9697d92bbc4a0b6505">00346</a>         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1RxDescCache.html#abb8070fbcfa38a9697d92bbc4a0b6505">fetchAfterWb</a>() {
<a name="l00347"></a>00347             <span class="keywordflow">if</span> (!<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">rxTick</a> &amp;&amp; <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classDrainable.html#a5c95358f0e9355bcc3979baf3fb7307f">getDrainState</a>() == <a class="code" href="classDrainable.html#a5d74787dedbc4e11c1ab15bf487e61f8a2f5f2c4a8c4f4f0519d503dcdfbf55cb">Drainable::Running</a>)
<a name="l00348"></a>00348                 <a class="code" href="classIGbE_1_1DescCache.html#a69c2eb368f23448d28ccb10dfa67c250">fetchDescriptors</a>();
<a name="l00349"></a>00349         }
<a name="l00350"></a>00350 
<a name="l00351"></a><a class="code" href="classIGbE_1_1RxDescCache.html#a0807bda2e863c4492ab0165135bf396c">00351</a>         <span class="keywordtype">bool</span> <a class="code" href="classIGbE_1_1RxDescCache.html#a0807bda2e863c4492ab0165135bf396c">pktDone</a>;
<a name="l00352"></a>00352 
<a name="l00354"></a><a class="code" href="classIGbE_1_1RxDescCache.html#acdf18a76e0bed7bae532a2708fc559da">00354</a>         <span class="keywordtype">int</span> <a class="code" href="classIGbE_1_1RxDescCache.html#acdf18a76e0bed7bae532a2708fc559da">splitCount</a>;
<a name="l00355"></a>00355 
<a name="l00358"></a><a class="code" href="classIGbE_1_1RxDescCache.html#ac3c1fb8dcc0c6c83f6a85ef03c5047db">00358</a>         <span class="keywordtype">unsigned</span> <a class="code" href="classIGbE_1_1RxDescCache.html#ac3c1fb8dcc0c6c83f6a85ef03c5047db">bytesCopied</a>;
<a name="l00359"></a>00359 
<a name="l00360"></a>00360       <span class="keyword">public</span>:
<a name="l00361"></a>00361         <a class="code" href="classIGbE_1_1RxDescCache.html#aa0df94c8316951374e466ed453451b26">RxDescCache</a>(<a class="code" href="classIGbE.html">IGbE</a> *<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>, std::string <a class="code" href="namespaceArmISA.html#aeab71244afb687f16d8c4f5ee9d6ef0e">n</a>, <span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#afaeb18e17f862d8fcb76dfb68a18854f">s</a>);
<a name="l00362"></a>00362 
<a name="l00370"></a>00370         <span class="keywordtype">int</span> <a class="code" href="classIGbE_1_1RxDescCache.html#a3e213f353f926628fed12519b96f1b47">writePacket</a>(<a class="code" href="classRefCountingPtr.html">EthPacketPtr</a> packet, <span class="keywordtype">int</span> pkt_offset);
<a name="l00371"></a>00371 
<a name="l00374"></a>00374         <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1RxDescCache.html#a4f0881be8aa8698e16dcf52a89085100">pktComplete</a>();
<a name="l00375"></a>00375 
<a name="l00379"></a>00379         <span class="keywordtype">bool</span> <a class="code" href="classIGbE_1_1RxDescCache.html#a430d1dfdf7dcec48b02f69d6769acab6">packetDone</a>();
<a name="l00380"></a>00380 
<a name="l00381"></a><a class="code" href="classIGbE_1_1RxDescCache.html#a28964c300d774b0dc1d7cabcff1cdc7b">00381</a>         <a class="code" href="classEventWrapper.html">EventWrapper&lt;RxDescCache, &amp;RxDescCache::pktComplete&gt;</a> <a class="code" href="classIGbE_1_1RxDescCache.html#a28964c300d774b0dc1d7cabcff1cdc7b">pktEvent</a>;
<a name="l00382"></a>00382 
<a name="l00383"></a>00383         <span class="comment">// Event to handle issuing header and data write at the same time</span>
<a name="l00384"></a>00384         <span class="comment">// and only callking pktComplete() when both are completed</span>
<a name="l00385"></a>00385         <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1RxDescCache.html#a05f4f640320394e21432a2d1c2ce8edc">pktSplitDone</a>();
<a name="l00386"></a><a class="code" href="classIGbE_1_1RxDescCache.html#aa1e4265fed174c3f3f46281e329a45de">00386</a>         <a class="code" href="classEventWrapper.html">EventWrapper&lt;RxDescCache, &amp;RxDescCache::pktSplitDone&gt;</a> <a class="code" href="classIGbE_1_1RxDescCache.html#aa1e4265fed174c3f3f46281e329a45de">pktHdrEvent</a>;
<a name="l00387"></a><a class="code" href="classIGbE_1_1RxDescCache.html#a80533f1573c797ab5f5333d376e899c7">00387</a>         <a class="code" href="classEventWrapper.html">EventWrapper&lt;RxDescCache, &amp;RxDescCache::pktSplitDone&gt;</a> <a class="code" href="classIGbE_1_1RxDescCache.html#a80533f1573c797ab5f5333d376e899c7">pktDataEvent</a>;
<a name="l00388"></a>00388 
<a name="l00389"></a>00389         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classIGbE_1_1RxDescCache.html#a2587421ae644a9474416e5a5b63ccbca">hasOutstandingEvents</a>();
<a name="l00390"></a>00390 
<a name="l00391"></a>00391         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1RxDescCache.html#a53e036786d17361be4c7320d39c99b84">serialize</a>(std::ostream &amp;<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>);
<a name="l00392"></a>00392         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1RxDescCache.html#af22e5d6d660b97db37003ac61ac4ee49">unserialize</a>(<a class="code" href="classCheckpoint.html">Checkpoint</a> *cp, <span class="keyword">const</span> std::string &amp;section);
<a name="l00393"></a>00393     };
<a name="l00394"></a><a class="code" href="classIGbE.html#a5117ecf4d368d174c17a9304676a45a5">00394</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classIGbE_1_1RxDescCache.html">RxDescCache</a>;
<a name="l00395"></a>00395 
<a name="l00396"></a><a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">00396</a>     <a class="code" href="classIGbE_1_1RxDescCache.html">RxDescCache</a> <a class="code" href="classIGbE.html#a0e260069d3ff6994b7ab0d843388c5d5">rxDescCache</a>;
<a name="l00397"></a>00397 
<a name="l00398"></a><a class="code" href="classIGbE_1_1TxDescCache.html">00398</a>     <span class="keyword">class </span><a class="code" href="classIGbE_1_1TxDescCache.html">TxDescCache</a>  : <span class="keyword">public</span> <a class="code" href="classIGbE_1_1DescCache.html">DescCache</a>&lt;iGbReg::TxDesc&gt;
<a name="l00399"></a>00399     {
<a name="l00400"></a>00400       <span class="keyword">protected</span>:
<a name="l00401"></a><a class="code" href="classIGbE_1_1TxDescCache.html#ae5a77c90557026fdf4fd78883f92bef9">00401</a>         <span class="keyword">virtual</span> <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="code" href="classIGbE_1_1TxDescCache.html#ae5a77c90557026fdf4fd78883f92bef9">descBase</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7f50fa230d52f1e8a3d501722e3f2bf8">tdba</a>(); }
<a name="l00402"></a><a class="code" href="classIGbE_1_1TxDescCache.html#af3d1877b6f30bdf98b95351c38d400f3">00402</a>         <span class="keyword">virtual</span> <span class="keywordtype">long</span> <a class="code" href="classIGbE_1_1TxDescCache.html#af3d1877b6f30bdf98b95351c38d400f3">descHead</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a001949adaeea4f9ae509aaeb09d87056">tdh</a>(); }
<a name="l00403"></a><a class="code" href="classIGbE_1_1TxDescCache.html#a4b6b769be62592fc43518ba480bbd1f7">00403</a>         <span class="keyword">virtual</span> <span class="keywordtype">long</span> <a class="code" href="classIGbE_1_1TxDescCache.html#a4b6b769be62592fc43518ba480bbd1f7">descTail</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a928dc76d0b5b003d9336bee496f78089">tdt</a>(); }
<a name="l00404"></a><a class="code" href="classIGbE_1_1TxDescCache.html#a465e4e31be3a89db3d7f9cd1ecc40064">00404</a>         <span class="keyword">virtual</span> <span class="keywordtype">long</span> <a class="code" href="classIGbE_1_1TxDescCache.html#a465e4e31be3a89db3d7f9cd1ecc40064">descLen</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#abfbe0450e80a5b975712629e8635d42b">tdlen</a>() &gt;&gt; 4; }
<a name="l00405"></a><a class="code" href="classIGbE_1_1TxDescCache.html#a4f8dbb4f64167626cac110753708c55c">00405</a>         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1TxDescCache.html#a4f8dbb4f64167626cac110753708c55c">updateHead</a>(<span class="keywordtype">long</span> h) { <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a001949adaeea4f9ae509aaeb09d87056">tdh</a>(h); }
<a name="l00406"></a>00406         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1TxDescCache.html#aec7fdcc540223076999e0f8f07f854bc">enableSm</a>();
<a name="l00407"></a>00407         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1TxDescCache.html#a32bbafeff677d291df2eb9247a33b292">actionAfterWb</a>();
<a name="l00408"></a><a class="code" href="classIGbE_1_1TxDescCache.html#abb8070fbcfa38a9697d92bbc4a0b6505">00408</a>         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1TxDescCache.html#abb8070fbcfa38a9697d92bbc4a0b6505">fetchAfterWb</a>() {
<a name="l00409"></a>00409             <span class="keywordflow">if</span> (!<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a0f33aec9eb84199e089e1917f7df501d">txTick</a> &amp;&amp; <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classDrainable.html#a5c95358f0e9355bcc3979baf3fb7307f">getDrainState</a>() == <a class="code" href="classDrainable.html#a5d74787dedbc4e11c1ab15bf487e61f8a2f5f2c4a8c4f4f0519d503dcdfbf55cb">Drainable::Running</a>)
<a name="l00410"></a>00410                 <a class="code" href="classIGbE_1_1DescCache.html#a69c2eb368f23448d28ccb10dfa67c250">fetchDescriptors</a>();
<a name="l00411"></a>00411         }
<a name="l00412"></a>00412         
<a name="l00413"></a>00413 
<a name="l00414"></a>00414 
<a name="l00415"></a><a class="code" href="classIGbE_1_1TxDescCache.html#a0807bda2e863c4492ab0165135bf396c">00415</a>         <span class="keywordtype">bool</span> <a class="code" href="classIGbE_1_1TxDescCache.html#a0807bda2e863c4492ab0165135bf396c">pktDone</a>;
<a name="l00416"></a><a class="code" href="classIGbE_1_1TxDescCache.html#ad610366c4a18d924d4962433c0b8515e">00416</a>         <span class="keywordtype">bool</span> <a class="code" href="classIGbE_1_1TxDescCache.html#ad610366c4a18d924d4962433c0b8515e">isTcp</a>;
<a name="l00417"></a><a class="code" href="classIGbE_1_1TxDescCache.html#a584d7923b741a0ed4ae9c59b8ab254ad">00417</a>         <span class="keywordtype">bool</span> <a class="code" href="classIGbE_1_1TxDescCache.html#a584d7923b741a0ed4ae9c59b8ab254ad">pktWaiting</a>;
<a name="l00418"></a><a class="code" href="classIGbE_1_1TxDescCache.html#adb0830579bf508fe91ec42f51928ca5d">00418</a>         <span class="keywordtype">bool</span> <a class="code" href="classIGbE_1_1TxDescCache.html#adb0830579bf508fe91ec42f51928ca5d">pktMultiDesc</a>;
<a name="l00419"></a><a class="code" href="classIGbE_1_1TxDescCache.html#a9bad25394212b8c9bf19b5b3fd692d7a">00419</a>         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="code" href="classIGbE_1_1TxDescCache.html#a9bad25394212b8c9bf19b5b3fd692d7a">completionAddress</a>;
<a name="l00420"></a><a class="code" href="classIGbE_1_1TxDescCache.html#ad3481e86d121444fdcc4b02650d38e47">00420</a>         <span class="keywordtype">bool</span> <a class="code" href="classIGbE_1_1TxDescCache.html#ad3481e86d121444fdcc4b02650d38e47">completionEnabled</a>;
<a name="l00421"></a><a class="code" href="classIGbE_1_1TxDescCache.html#a487a3ccede49d6015e8e320bcd5b29e7">00421</a>         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="classIGbE_1_1TxDescCache.html#a487a3ccede49d6015e8e320bcd5b29e7">descEnd</a>;
<a name="l00422"></a>00422         
<a name="l00423"></a>00423 
<a name="l00424"></a>00424         <span class="comment">// tso variables</span>
<a name="l00425"></a><a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">00425</a>         <span class="keywordtype">bool</span> <a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a>;
<a name="l00426"></a><a class="code" href="classIGbE_1_1TxDescCache.html#abdc8c249b4ac1dcba87bb5dd61aad6b4">00426</a>         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="code" href="classIGbE_1_1TxDescCache.html#abdc8c249b4ac1dcba87bb5dd61aad6b4">tsoHeaderLen</a>;
<a name="l00427"></a><a class="code" href="classIGbE_1_1TxDescCache.html#a140f29bf479ea15261618bed60b9f777">00427</a>         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="code" href="classIGbE_1_1TxDescCache.html#a140f29bf479ea15261618bed60b9f777">tsoMss</a>;
<a name="l00428"></a><a class="code" href="classIGbE_1_1TxDescCache.html#a94166f6af145a255d6623ebd93b0c0f5">00428</a>         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="code" href="classIGbE_1_1TxDescCache.html#a94166f6af145a255d6623ebd93b0c0f5">tsoTotalLen</a>;
<a name="l00429"></a><a class="code" href="classIGbE_1_1TxDescCache.html#afaeeb9d655b0c19961b86d83fc025ae5">00429</a>         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="code" href="classIGbE_1_1TxDescCache.html#afaeeb9d655b0c19961b86d83fc025ae5">tsoUsedLen</a>;
<a name="l00430"></a><a class="code" href="classIGbE_1_1TxDescCache.html#a2906204858e8f7b554a7b5a449bbb4cb">00430</a>         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="code" href="classIGbE_1_1TxDescCache.html#a2906204858e8f7b554a7b5a449bbb4cb">tsoPrevSeq</a>;
<a name="l00431"></a><a class="code" href="classIGbE_1_1TxDescCache.html#a6113e9447ae2e0f5fcea17ac8b4a2fd5">00431</a>         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="code" href="classIGbE_1_1TxDescCache.html#a6113e9447ae2e0f5fcea17ac8b4a2fd5">tsoPktPayloadBytes</a>;
<a name="l00432"></a><a class="code" href="classIGbE_1_1TxDescCache.html#aea6ed56838e016f0ad81353c348b62cb">00432</a>         <span class="keywordtype">bool</span> <a class="code" href="classIGbE_1_1TxDescCache.html#aea6ed56838e016f0ad81353c348b62cb">tsoLoadedHeader</a>;
<a name="l00433"></a><a class="code" href="classIGbE_1_1TxDescCache.html#a3e767a1c20550a9a1f1c04e0900475d3">00433</a>         <span class="keywordtype">bool</span> <a class="code" href="classIGbE_1_1TxDescCache.html#a3e767a1c20550a9a1f1c04e0900475d3">tsoPktHasHeader</a>;
<a name="l00434"></a><a class="code" href="classIGbE_1_1TxDescCache.html#a3309d8f5e1d64bb4d1ce8a654d406094">00434</a>         uint8_t <a class="code" href="classIGbE_1_1TxDescCache.html#a3309d8f5e1d64bb4d1ce8a654d406094">tsoHeader</a>[256];
<a name="l00435"></a><a class="code" href="classIGbE_1_1TxDescCache.html#a9db8e95f501ae2399c15308b5fd40905">00435</a>         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="code" href="classIGbE_1_1TxDescCache.html#a9db8e95f501ae2399c15308b5fd40905">tsoDescBytesUsed</a>;
<a name="l00436"></a><a class="code" href="classIGbE_1_1TxDescCache.html#a4e886802f97241586f0f9e59d4d3b27e">00436</a>         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="code" href="classIGbE_1_1TxDescCache.html#a4e886802f97241586f0f9e59d4d3b27e">tsoCopyBytes</a>;
<a name="l00437"></a><a class="code" href="classIGbE_1_1TxDescCache.html#a50260682f8c2508080a0c2c51727b40c">00437</a>         <span class="keywordtype">int</span> <a class="code" href="classIGbE_1_1TxDescCache.html#a50260682f8c2508080a0c2c51727b40c">tsoPkts</a>;
<a name="l00438"></a>00438 
<a name="l00439"></a>00439       <span class="keyword">public</span>:
<a name="l00440"></a>00440         <a class="code" href="classIGbE_1_1TxDescCache.html#a5c53fad45a69d0f3c20bd08b980a2485">TxDescCache</a>(<a class="code" href="classIGbE.html">IGbE</a> *<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>, std::string <a class="code" href="namespaceArmISA.html#aeab71244afb687f16d8c4f5ee9d6ef0e">n</a>, <span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#afaeb18e17f862d8fcb76dfb68a18854f">s</a>);
<a name="l00441"></a>00441 
<a name="l00446"></a>00446         <span class="keywordtype">unsigned</span> <a class="code" href="classIGbE_1_1TxDescCache.html#a924187a1c689184efd8492916ca12e32">getPacketSize</a>(<a class="code" href="classRefCountingPtr.html">EthPacketPtr</a> <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>);
<a name="l00447"></a>00447         <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1TxDescCache.html#af58491ad4f774a610584c404231b30ae">getPacketData</a>(<a class="code" href="classRefCountingPtr.html">EthPacketPtr</a> <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>);
<a name="l00448"></a>00448         <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1TxDescCache.html#af7a2e6e84647ba93598a7a02730cba41">processContextDesc</a>();
<a name="l00449"></a>00449 
<a name="l00453"></a>00453         <span class="keywordtype">unsigned</span>
<a name="l00454"></a><a class="code" href="classIGbE_1_1TxDescCache.html#a6fb0bd6d34eae6de55fb211662f92180">00454</a>         <a class="code" href="classIGbE_1_1TxDescCache.html#a6fb0bd6d34eae6de55fb211662f92180">descInBlock</a>(<span class="keywordtype">unsigned</span> num_desc)
<a name="l00455"></a>00455         {
<a name="l00456"></a>00456             <span class="keywordflow">return</span> num_desc / <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classDmaDevice.html#a3e6e4aa434d2b5c83de3660307a49001">cacheBlockSize</a>() / <span class="keyword">sizeof</span>(<a class="code" href="structiGbReg_1_1TxDesc.html">iGbReg::TxDesc</a>);
<a name="l00457"></a>00457         }
<a name="l00458"></a>00458 
<a name="l00463"></a>00463         <span class="keywordtype">bool</span> <a class="code" href="classIGbE_1_1TxDescCache.html#a3fd3cdfc66306ff22b53325aeb4e2c64">packetAvailable</a>();
<a name="l00464"></a>00464 
<a name="l00468"></a><a class="code" href="classIGbE_1_1TxDescCache.html#ad8a4f7d1ef74ba318f35597c58bc757b">00468</a>         <span class="keywordtype">bool</span> <a class="code" href="classIGbE_1_1TxDescCache.html#ad8a4f7d1ef74ba318f35597c58bc757b">packetWaiting</a>() { <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1TxDescCache.html#a584d7923b741a0ed4ae9c59b8ab254ad">pktWaiting</a>; }
<a name="l00469"></a>00469 
<a name="l00476"></a><a class="code" href="classIGbE_1_1TxDescCache.html#a126e4d9db081d9783bdcf86befdff3de">00476</a>         <span class="keywordtype">bool</span> <a class="code" href="classIGbE_1_1TxDescCache.html#a126e4d9db081d9783bdcf86befdff3de">packetMultiDesc</a>() { <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1TxDescCache.html#adb0830579bf508fe91ec42f51928ca5d">pktMultiDesc</a>;}
<a name="l00477"></a>00477 
<a name="l00480"></a>00480         <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1TxDescCache.html#a4f0881be8aa8698e16dcf52a89085100">pktComplete</a>();
<a name="l00481"></a><a class="code" href="classIGbE_1_1TxDescCache.html#a2a06f4aa962fc09e9e764d3e9006d11b">00481</a>         <a class="code" href="classEventWrapper.html">EventWrapper&lt;TxDescCache, &amp;TxDescCache::pktComplete&gt;</a> <a class="code" href="classIGbE_1_1TxDescCache.html#a2a06f4aa962fc09e9e764d3e9006d11b">pktEvent</a>;
<a name="l00482"></a>00482 
<a name="l00483"></a>00483         <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1TxDescCache.html#ae7e4853724fee8019b3bdd04200b9d6b">headerComplete</a>();
<a name="l00484"></a><a class="code" href="classIGbE_1_1TxDescCache.html#ae7a8388f5aa169f8c86c19f91c3b128d">00484</a>         <a class="code" href="classEventWrapper.html">EventWrapper&lt;TxDescCache, &amp;TxDescCache::headerComplete&gt;</a> <a class="code" href="classIGbE_1_1TxDescCache.html#ae7a8388f5aa169f8c86c19f91c3b128d">headerEvent</a>;
<a name="l00485"></a>00485 
<a name="l00486"></a>00486 
<a name="l00487"></a><a class="code" href="classIGbE_1_1TxDescCache.html#a10c4245eaf8149b42c17bb6aa4a7c5eb">00487</a>         <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1TxDescCache.html#a10c4245eaf8149b42c17bb6aa4a7c5eb">completionWriteback</a>(<a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="code" href="namespaceArmISA.html#a468da4d7330577ee8746df2acfa40959">a</a>, <span class="keywordtype">bool</span> <a class="code" href="namespaceTrace.html#a8740ba80e30dd75e71d09fa1dcf04f3d">enabled</a>) {
<a name="l00488"></a>00488             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc,
<a name="l00489"></a>00489                     <span class="stringliteral">&quot;Completion writeback Addr: %#x enabled: %d\n&quot;</span>, 
<a name="l00490"></a>00490                     a, enabled);
<a name="l00491"></a>00491             <a class="code" href="classIGbE_1_1TxDescCache.html#a9bad25394212b8c9bf19b5b3fd692d7a">completionAddress</a> = a;
<a name="l00492"></a>00492             <a class="code" href="classIGbE_1_1TxDescCache.html#ad3481e86d121444fdcc4b02650d38e47">completionEnabled</a> = enabled;
<a name="l00493"></a>00493         }
<a name="l00494"></a>00494 
<a name="l00495"></a>00495         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classIGbE_1_1TxDescCache.html#a2587421ae644a9474416e5a5b63ccbca">hasOutstandingEvents</a>();
<a name="l00496"></a>00496 
<a name="l00497"></a><a class="code" href="classIGbE_1_1TxDescCache.html#a34032325b571ff60682217adbf73ad37">00497</a>         <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1TxDescCache.html#a34032325b571ff60682217adbf73ad37">nullCallback</a>() {
<a name="l00498"></a>00498             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Completion writeback complete\n&quot;</span>);
<a name="l00499"></a>00499         }
<a name="l00500"></a><a class="code" href="classIGbE_1_1TxDescCache.html#adc0e7fe81737dc40daddf8391bffae79">00500</a>         <a class="code" href="classEventWrapper.html">EventWrapper&lt;TxDescCache, &amp;TxDescCache::nullCallback&gt;</a> <a class="code" href="classIGbE_1_1TxDescCache.html#adc0e7fe81737dc40daddf8391bffae79">nullEvent</a>;
<a name="l00501"></a>00501 
<a name="l00502"></a>00502         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1TxDescCache.html#a53e036786d17361be4c7320d39c99b84">serialize</a>(std::ostream &amp;<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>);
<a name="l00503"></a>00503         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classIGbE_1_1TxDescCache.html#af22e5d6d660b97db37003ac61ac4ee49">unserialize</a>(<a class="code" href="classCheckpoint.html">Checkpoint</a> *cp, <span class="keyword">const</span> std::string &amp;section);
<a name="l00504"></a>00504 
<a name="l00505"></a>00505     };
<a name="l00506"></a><a class="code" href="classIGbE.html#ab83c1d837daa8ccbbd651c133208ced0">00506</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classIGbE_1_1TxDescCache.html">TxDescCache</a>;
<a name="l00507"></a>00507 
<a name="l00508"></a><a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">00508</a>     <a class="code" href="classIGbE_1_1TxDescCache.html">TxDescCache</a> <a class="code" href="classIGbE.html#a8ab7bc15342abe2e4fe9d9bde951441b">txDescCache</a>;
<a name="l00509"></a>00509 
<a name="l00510"></a>00510   <span class="keyword">public</span>:
<a name="l00511"></a><a class="code" href="classIGbE.html#ad27b5cfed87f35a483863a73336d8258">00511</a>     <span class="keyword">typedef</span> IGbEParams <a class="code" href="classIGbE.html#ad27b5cfed87f35a483863a73336d8258">Params</a>;
<a name="l00512"></a>00512     <span class="keyword">const</span> <a class="code" href="classIGbE.html#ad27b5cfed87f35a483863a73336d8258">Params</a> *
<a name="l00513"></a><a class="code" href="classIGbE.html#acd3c3feb78ae7a8f88fe0f110a718dff">00513</a>     <a class="code" href="classIGbE.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()<span class="keyword"> const </span>{
<a name="l00514"></a>00514         <span class="keywordflow">return</span> <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classIGbE.html#ad27b5cfed87f35a483863a73336d8258">Params</a> *<span class="keyword">&gt;</span>(<a class="code" href="classSimObject.html#acaf6024ae9dda44bfb1c67e05ad70aef">_params</a>);
<a name="l00515"></a>00515     }
<a name="l00516"></a>00516 
<a name="l00517"></a>00517     <a class="code" href="classIGbE.html#a3e3eef81d3caf789558505740ce0ed07">IGbE</a>(<span class="keyword">const</span> <a class="code" href="classIGbE.html#ad27b5cfed87f35a483863a73336d8258">Params</a> *<a class="code" href="classIGbE.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>);
<a name="l00518"></a>00518     <a class="code" href="classIGbE.html#a8ff05c4d178fcac0d8a3ae83db67d89b">~IGbE</a>();
<a name="l00519"></a>00519     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#a02fd73d861ef2e4aabb38c0c9ff82947">init</a>();
<a name="l00520"></a>00520 
<a name="l00521"></a>00521     <span class="keyword">virtual</span> <a class="code" href="classEtherInt.html">EtherInt</a> *<a class="code" href="classIGbE.html#a10260c5a583c0894dcdcd1ced50a53ae">getEthPort</a>(<span class="keyword">const</span> std::string &amp;if_name, <span class="keywordtype">int</span> idx);
<a name="l00522"></a>00522 
<a name="l00523"></a><a class="code" href="classIGbE.html#adad52012a21d414368149556f2cc909b">00523</a>     <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="code" href="classIGbE.html#adad52012a21d414368149556f2cc909b">lastInterrupt</a>;
<a name="l00524"></a>00524 
<a name="l00525"></a>00525     <span class="keyword">virtual</span> <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="code" href="classIGbE.html#a613ec7d5e1ec64f8d21fec78ae8e568e">read</a>(<a class="code" href="classPacket.html">PacketPtr</a> pkt);
<a name="l00526"></a>00526     <span class="keyword">virtual</span> <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="code" href="classIGbE.html#a4cefab464e72b5dd42c003a0a4341802">write</a>(<a class="code" href="classPacket.html">PacketPtr</a> pkt);
<a name="l00527"></a>00527 
<a name="l00528"></a>00528     <span class="keyword">virtual</span> <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="code" href="classIGbE.html#aac7b61a78530109bfa20923a53064bbf">writeConfig</a>(<a class="code" href="classPacket.html">PacketPtr</a> pkt);
<a name="l00529"></a>00529 
<a name="l00530"></a>00530     <span class="keywordtype">bool</span> <a class="code" href="classIGbE.html#aaae8ccdf0f0b15e4d1b93e71a0c8b303">ethRxPkt</a>(<a class="code" href="classRefCountingPtr.html">EthPacketPtr</a> packet);
<a name="l00531"></a>00531     <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#a4b170caf60b0a01672ab8e8e3e4dff10">ethTxDone</a>();
<a name="l00532"></a>00532 
<a name="l00533"></a>00533     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#a53e036786d17361be4c7320d39c99b84">serialize</a>(std::ostream &amp;<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>);
<a name="l00534"></a>00534     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#af22e5d6d660b97db37003ac61ac4ee49">unserialize</a>(<a class="code" href="classCheckpoint.html">Checkpoint</a> *cp, <span class="keyword">const</span> std::string &amp;section);
<a name="l00535"></a>00535 
<a name="l00536"></a>00536     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classIGbE.html#aa8a18d230dba7a674ac8a0b4f35bc36a">drain</a>(<a class="code" href="classDrainManager.html">DrainManager</a> *<a class="code" href="namespaceMipsISA.html#a2575c29e7f4617b6076486f340b6fe19">dm</a>);
<a name="l00537"></a>00537     <span class="keywordtype">void</span> <a class="code" href="classIGbE.html#a8f020d3237536fe007fc488c4125c5d8">drainResume</a>();
<a name="l00538"></a>00538 
<a name="l00539"></a>00539 };
<a name="l00540"></a>00540 
<a name="l00541"></a><a class="code" href="classIGbEInt.html">00541</a> <span class="keyword">class </span><a class="code" href="classIGbEInt.html">IGbEInt</a> : <span class="keyword">public</span> <a class="code" href="classEtherInt.html">EtherInt</a>
<a name="l00542"></a>00542 {
<a name="l00543"></a>00543   <span class="keyword">private</span>:
<a name="l00544"></a><a class="code" href="classIGbEInt.html#a98d2ca35267d7f0e3548330b6311cb1c">00544</a>     <a class="code" href="classIGbE.html">IGbE</a> *<a class="code" href="classIGbEInt.html#a98d2ca35267d7f0e3548330b6311cb1c">dev</a>;
<a name="l00545"></a>00545 
<a name="l00546"></a>00546   <span class="keyword">public</span>:
<a name="l00547"></a><a class="code" href="classIGbEInt.html#a8680285b5800463f07aeca5d354743f7">00547</a>     <a class="code" href="classIGbEInt.html#a8680285b5800463f07aeca5d354743f7">IGbEInt</a>(<span class="keyword">const</span> std::string &amp;<a class="code" href="classEtherInt.html#a324e8c54c4c5161913681a1a52fef959">name</a>, <a class="code" href="classIGbE.html">IGbE</a> *<a class="code" href="namespaceArmISA.html#a780d191da4f56c853452d790bddbacb1">d</a>)
<a name="l00548"></a>00548         : <a class="code" href="classEtherInt.html">EtherInt</a>(name), <a class="code" href="classIGbEInt.html#a98d2ca35267d7f0e3548330b6311cb1c">dev</a>(d)
<a name="l00549"></a>00549     { }
<a name="l00550"></a>00550 
<a name="l00551"></a><a class="code" href="classIGbEInt.html#a9bd96a108d6f58f140c9f7d83726eebe">00551</a>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classIGbEInt.html#a9bd96a108d6f58f140c9f7d83726eebe">recvPacket</a>(<a class="code" href="classRefCountingPtr.html">EthPacketPtr</a> pkt) { <span class="keywordflow">return</span> <a class="code" href="classIGbEInt.html#a98d2ca35267d7f0e3548330b6311cb1c">dev</a>-&gt;<a class="code" href="classIGbE.html#aaae8ccdf0f0b15e4d1b93e71a0c8b303">ethRxPkt</a>(pkt); }
<a name="l00552"></a><a class="code" href="classIGbEInt.html#a967489e0b2900f4b12d99e6257d24dbe">00552</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classIGbEInt.html#a967489e0b2900f4b12d99e6257d24dbe">sendDone</a>() { <a class="code" href="classIGbEInt.html#a98d2ca35267d7f0e3548330b6311cb1c">dev</a>-&gt;<a class="code" href="classIGbE.html#a4b170caf60b0a01672ab8e8e3e4dff10">ethTxDone</a>(); }
<a name="l00553"></a>00553 };
<a name="l00554"></a>00554 
<a name="l00555"></a>00555 <span class="preprocessor">#endif //__DEV_I8254XGBE_HH__</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
