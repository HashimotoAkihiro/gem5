\hypertarget{classX86ISA_1_1I82094AA}{
\section{クラス I82094AA}
\label{classX86ISA_1_1I82094AA}\index{X86ISA::I82094AA@{X86ISA::I82094AA}}
}


{\ttfamily \#include $<$i82094aa.hh$>$}I82094AAに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=7cm]{classX86ISA_1_1I82094AA}
\end{center}
\end{figure}
\subsection*{Public 型}
\begin{DoxyCompactItemize}
\item 
typedef I82094AAParams \hyperlink{classX86ISA_1_1I82094AA_ab98883343dbcbe45660e9b16b61507ad}{Params}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classX86ISA_1_1I82094AA_a97c44df53cb92aeac5243310502a31f4}{BitUnion64} (RedirTableEntry) Bitfield$<$ 63
\item 
const \hyperlink{classX86ISA_1_1I82094AA_ab98883343dbcbe45660e9b16b61507ad}{Params} $\ast$ \hyperlink{classX86ISA_1_1I82094AA_acd3c3feb78ae7a8f88fe0f110a718dff}{params} () const 
\item 
\hyperlink{classX86ISA_1_1I82094AA_a65401d9d5f73fed0b27a6c9aa13f0ded}{I82094AA} (\hyperlink{classX86ISA_1_1I82094AA_ab98883343dbcbe45660e9b16b61507ad}{Params} $\ast$\hyperlink{namespaceX86ISA_af675c1d542a25b96e11164b80809a856}{p})
\item 
void \hyperlink{classX86ISA_1_1I82094AA_a02fd73d861ef2e4aabb38c0c9ff82947}{init} ()
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classX86ISA_1_1I82094AA_a613ec7d5e1ec64f8d21fec78ae8e568e}{read} (\hyperlink{classPacket}{PacketPtr} pkt)
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classX86ISA_1_1I82094AA_a4cefab464e72b5dd42c003a0a4341802}{write} (\hyperlink{classPacket}{PacketPtr} pkt)
\item 
\hyperlink{classstd_1_1list}{AddrRangeList} \hyperlink{classX86ISA_1_1I82094AA_ad86b339471781a0d7634d3c41c6a1c87}{getIntAddrRange} () const 
\item 
void \hyperlink{classX86ISA_1_1I82094AA_ae27db6ba83a73230a1bd07e9a0bc7bd0}{writeReg} (uint8\_\-t offset, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} value)
\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} \hyperlink{classX86ISA_1_1I82094AA_a2e9f685c7a9db218d1bb3db976b98e9c}{readReg} (uint8\_\-t offset)
\item 
\hyperlink{classBaseMasterPort}{BaseMasterPort} \& \hyperlink{classX86ISA_1_1I82094AA_adc4e675e51defbdd1e354dac729d0703}{getMasterPort} (const std::string \&if\_\-name, \hyperlink{base_2types_8hh_acef4d7d41cb21fdc252e20c04cd7bb8e}{PortID} idx=\hyperlink{base_2types_8hh_a65bf40f138cf863f0c5e2d8ca1144126}{InvalidPortID})
\item 
void \hyperlink{classX86ISA_1_1I82094AA_a9d80b13f2832340962ab374bc9a14c4f}{signalInterrupt} (int line)
\item 
void \hyperlink{classX86ISA_1_1I82094AA_ac26dfa4264d910f3ef50015beafea211}{raiseInterruptPin} (int number)
\item 
void \hyperlink{classX86ISA_1_1I82094AA_a41406df644356ee1578b77b1acd18042}{lowerInterruptPin} (int number)
\item 
virtual void \hyperlink{classX86ISA_1_1I82094AA_a53e036786d17361be4c7320d39c99b84}{serialize} (std::ostream \&\hyperlink{namespaceX86ISA_a6b6e6ba763e7eaf46ac5b6372ca98d30}{os})
\item 
virtual void \hyperlink{classX86ISA_1_1I82094AA_af22e5d6d660b97db37003ac61ac4ee49}{unserialize} (\hyperlink{classCheckpoint}{Checkpoint} $\ast$cp, const std::string \&section)
\end{DoxyCompactItemize}
\subsection*{Public 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classX86ISA_1_1I82094AA_a111bfdfbf9000eeefa76026350b2597f}{topDW}
\item 
Bitfield$<$ 55, 32 $>$ \hyperlink{classX86ISA_1_1I82094AA_a91847c8f9fbbd5be70da8e6af01b26bb}{topReserved}
\item 
Bitfield$<$ 31, 0 $>$ \hyperlink{classX86ISA_1_1I82094AA_a09039405e8bb064cfab41786a5a3038b}{bottomDW}
\item 
Bitfield$<$ 31, 17 $>$ \hyperlink{classX86ISA_1_1I82094AA_aa5d6a929978df9b06c2a7d4c50ce385d}{bottomReserved}
\item 
Bitfield$<$ 63, 56 $>$ \hyperlink{classX86ISA_1_1I82094AA_aeaa7168c2c22fe679ac5f9a4a1fb0390}{dest}
\item 
Bitfield$<$ 16 $>$ \hyperlink{classX86ISA_1_1I82094AA_aabfd857e75bf142be3b1bd1db6d81583}{mask}
\item 
Bitfield$<$ 15 $>$ \hyperlink{classX86ISA_1_1I82094AA_a1a8acf21e383afeb477a3d8e88b689de}{trigger}
\item 
Bitfield$<$ 14 $>$ \hyperlink{classX86ISA_1_1I82094AA_ae074e6e7f5c02b863d4ffe1040e7e7a0}{remoteIRR}
\item 
Bitfield$<$ 13 $>$ \hyperlink{classX86ISA_1_1I82094AA_ae3c9a79ca2272b1906da22919f226af3}{polarity}
\item 
Bitfield$<$ 12 $>$ \hyperlink{classX86ISA_1_1I82094AA_abe55336004f210f2b2c0421f55ea7c3e}{deliveryStatus}
\item 
Bitfield$<$ 11 $>$ \hyperlink{classX86ISA_1_1I82094AA_ae6a8d79068dd7c14202c5384ab9076ae}{destMode}
\item 
Bitfield$<$ 10, 8 $>$ \hyperlink{classX86ISA_1_1I82094AA_aa6bdaa7818eb499f0dcf848f4ae7d569}{deliveryMode}
\item 
Bitfield$<$ 7, 0 $>$ \hyperlink{classX86ISA_1_1I82094AA_a8b9597b04839779d67912b193653be20}{vector}
\item 
EndBitUnion(RedirTableEntry) protected uint8\_\-t \hyperlink{classX86ISA_1_1I82094AA_aa40a207fb274f62046d99924bd138280}{regSel}
\item 
uint8\_\-t \hyperlink{classX86ISA_1_1I82094AA_a106ad81ca27007fff38acbd0a0b61d8e}{initialApicId}
\item 
uint8\_\-t \hyperlink{classX86ISA_1_1I82094AA_a1e6927fa1486224044e568f9c370519b}{id}
\item 
uint8\_\-t \hyperlink{classX86ISA_1_1I82094AA_a6a6f6c02dd2e4ed286c88b2809e36146}{arbId}
\item 
uint64\_\-t \hyperlink{classX86ISA_1_1I82094AA_a0e3677dd1ad49cc615abbee3bc94af3f}{lowestPriorityOffset}
\item 
RedirTableEntry \hyperlink{classX86ISA_1_1I82094AA_acad7eb01e83e49ac5388cd6fddd75f89}{redirTable} \mbox{[}\hyperlink{classX86ISA_1_1I82094AA_a7556b7f499a21a1415a7ed642e8a9f9b}{TableSize}\mbox{]}
\item 
bool \hyperlink{classX86ISA_1_1I82094AA_af77117f04721948e9078ef45189b6bb6}{pinStates} \mbox{[}\hyperlink{classX86ISA_1_1I82094AA_a7556b7f499a21a1415a7ed642e8a9f9b}{TableSize}\mbox{]}
\end{DoxyCompactItemize}
\subsection*{Static Public 変数}
\begin{DoxyCompactItemize}
\item 
static const uint8\_\-t \hyperlink{classX86ISA_1_1I82094AA_a7556b7f499a21a1415a7ed642e8a9f9b}{TableSize} = 24
\item 
static const uint8\_\-t \hyperlink{classX86ISA_1_1I82094AA_a437efc43f76d70132c38495623562007}{APICVersion} = 0x14
\end{DoxyCompactItemize}


\subsection{型定義}
\hypertarget{classX86ISA_1_1I82094AA_ab98883343dbcbe45660e9b16b61507ad}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!Params@{Params}}
\index{Params@{Params}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{Params}]{\setlength{\rightskip}{0pt plus 5cm}typedef I82094AAParams {\bf Params}}}
\label{classX86ISA_1_1I82094AA_ab98883343dbcbe45660e9b16b61507ad}


\hyperlink{classBasicPioDevice_a2845515ac6467f10540747053c8a0449}{BasicPioDevice}を再定義しています。

\subsection{コンストラクタとデストラクタ}
\hypertarget{classX86ISA_1_1I82094AA_a65401d9d5f73fed0b27a6c9aa13f0ded}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!I82094AA@{I82094AA}}
\index{I82094AA@{I82094AA}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{I82094AA}]{\setlength{\rightskip}{0pt plus 5cm}{\bf I82094AA} ({\bf Params} $\ast$ {\em p})}}
\label{classX86ISA_1_1I82094AA_a65401d9d5f73fed0b27a6c9aa13f0ded}



\begin{DoxyCode}
42     : BasicPioDevice(p, 20), IntDevice(this, p->int_latency),
43       extIntPic(p->external_int_pic), lowestPriorityOffset(0)
44 {
45     // This assumes there's only one I/O APIC in the system and since the apic
46     // id is stored in a 8-bit field with 0xff meaning broadcast, the id must
47     // be less than 0xff
48 
49     assert(p->apic_id < 0xff);
50     initialApicId = id = p->apic_id;
51     arbId = id;
52     regSel = 0;
53     RedirTableEntry entry = 0;
54     entry.mask = 1;
55     for (int i = 0; i < TableSize; i++) {
56         redirTable[i] = entry;
57         pinStates[i] = false;
58     }
59 }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classX86ISA_1_1I82094AA_a97c44df53cb92aeac5243310502a31f4}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!BitUnion64@{BitUnion64}}
\index{BitUnion64@{BitUnion64}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{BitUnion64}]{\setlength{\rightskip}{0pt plus 5cm}BitUnion64 (RedirTableEntry)}}
\label{classX86ISA_1_1I82094AA_a97c44df53cb92aeac5243310502a31f4}
\hypertarget{classX86ISA_1_1I82094AA_ad86b339471781a0d7634d3c41c6a1c87}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!getIntAddrRange@{getIntAddrRange}}
\index{getIntAddrRange@{getIntAddrRange}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{getIntAddrRange}]{\setlength{\rightskip}{0pt plus 5cm}{\bf AddrRangeList} getIntAddrRange () const\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classX86ISA_1_1I82094AA_ad86b339471781a0d7634d3c41c6a1c87}


\hyperlink{classX86ISA_1_1IntDevice_ac142ed8f5e7f1e45022f45d316e131a3}{IntDevice}を再定義しています。


\begin{DoxyCode}
82 {
83     AddrRangeList ranges;
84     ranges.push_back(RangeEx(x86InterruptAddress(initialApicId, 0),
85                              x86InterruptAddress(initialApicId, 0) +
86                              PhysAddrAPICRangeSize));
87     return ranges;
88 }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1I82094AA_adc4e675e51defbdd1e354dac729d0703}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!getMasterPort@{getMasterPort}}
\index{getMasterPort@{getMasterPort}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{getMasterPort}]{\setlength{\rightskip}{0pt plus 5cm}{\bf BaseMasterPort} \& getMasterPort (const std::string \& {\em if\_\-name}, \/  {\bf PortID} {\em idx} = {\ttfamily {\bf InvalidPortID}})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classX86ISA_1_1I82094AA_adc4e675e51defbdd1e354dac729d0703}
Get a master port with a given name and index. This is used at binding time and returns a reference to a protocol-\/agnostic base master port.


\begin{DoxyParams}{引数}
\item[{\em if\_\-name}]\hyperlink{classPort}{Port} name \item[{\em idx}]Index in the case of a VectorPort\end{DoxyParams}
\begin{DoxyReturn}{戻り値}
A reference to the given port 
\end{DoxyReturn}


\hyperlink{classMemObject_adc4e675e51defbdd1e354dac729d0703}{MemObject}を再定義しています。


\begin{DoxyCode}
74 {
75     if (if_name == "int_master")
76         return intMasterPort;
77     return BasicPioDevice::getMasterPort(if_name, idx);
78 }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1I82094AA_a02fd73d861ef2e4aabb38c0c9ff82947}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!init@{init}}
\index{init@{init}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{init}]{\setlength{\rightskip}{0pt plus 5cm}void init ()\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classX86ISA_1_1I82094AA_a02fd73d861ef2e4aabb38c0c9ff82947}


\hyperlink{classX86ISA_1_1IntDevice_a02fd73d861ef2e4aabb38c0c9ff82947}{IntDevice}を再定義しています。


\begin{DoxyCode}
63 {
64     // The io apic must register its address ranges on both its pio port
65     // via the piodevice init() function and its int port that it inherited
66     // from IntDevice.  Note IntDevice is not a SimObject itself.
67 
68     BasicPioDevice::init();
69     IntDevice::init();
70 }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1I82094AA_a41406df644356ee1578b77b1acd18042}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!lowerInterruptPin@{lowerInterruptPin}}
\index{lowerInterruptPin@{lowerInterruptPin}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{lowerInterruptPin}]{\setlength{\rightskip}{0pt plus 5cm}void lowerInterruptPin (int {\em number})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classX86ISA_1_1I82094AA_a41406df644356ee1578b77b1acd18042}


\hyperlink{classX86ISA_1_1IntDevice_a1909001c0927e6a93d8bebf9d30bc11c}{IntDevice}を再定義しています。


\begin{DoxyCode}
257 {
258     assert(number < TableSize);
259     pinStates[number] = false;
260 }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1I82094AA_acd3c3feb78ae7a8f88fe0f110a718dff}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!params@{params}}
\index{params@{params}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{params}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Params}$\ast$ params () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classX86ISA_1_1I82094AA_acd3c3feb78ae7a8f88fe0f110a718dff}


\hyperlink{classBasicPioDevice_acd3c3feb78ae7a8f88fe0f110a718dff}{BasicPioDevice}を再定義しています。


\begin{DoxyCode}
89     {
90         return dynamic_cast<const Params *>(_params);
91     }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1I82094AA_ac26dfa4264d910f3ef50015beafea211}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!raiseInterruptPin@{raiseInterruptPin}}
\index{raiseInterruptPin@{raiseInterruptPin}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{raiseInterruptPin}]{\setlength{\rightskip}{0pt plus 5cm}void raiseInterruptPin (int {\em number})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classX86ISA_1_1I82094AA_ac26dfa4264d910f3ef50015beafea211}


\hyperlink{classX86ISA_1_1IntDevice_a4bafbbd02159d7bdc6eae7f4197db84f}{IntDevice}を再定義しています。


\begin{DoxyCode}
248 {
249     assert(number < TableSize);
250     if (!pinStates[number])
251         signalInterrupt(number);
252     pinStates[number] = true;
253 }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1I82094AA_a613ec7d5e1ec64f8d21fec78ae8e568e}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!read@{read}}
\index{read@{read}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{read}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} read ({\bf PacketPtr} {\em pkt})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classX86ISA_1_1I82094AA_a613ec7d5e1ec64f8d21fec78ae8e568e}
Pure virtual function that the device must implement. Called when a read command is recieved by the port. 
\begin{DoxyParams}{引数}
\item[{\em pkt}]\hyperlink{classPacket}{Packet} describing this request \end{DoxyParams}
\begin{DoxyReturn}{戻り値}
number of ticks it took to complete 
\end{DoxyReturn}


\hyperlink{classPioDevice_a842312590432036092c422c87a442358}{PioDevice}を実装しています。


\begin{DoxyCode}
92 {
93     assert(pkt->getSize() == 4);
94     Addr offset = pkt->getAddr() - pioAddr;
95     switch(offset) {
96       case 0:
97         pkt->set<uint32_t>(regSel);
98         break;
99       case 16:
100         pkt->set<uint32_t>(readReg(regSel));
101         break;
102       default:
103         panic("Illegal read from I/O APIC.\n");
104     }
105     pkt->makeAtomicResponse();
106     return pioDelay;
107 }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1I82094AA_a2e9f685c7a9db218d1bb3db976b98e9c}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!readReg@{readReg}}
\index{readReg@{readReg}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{readReg}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t} readReg (uint8\_\-t {\em offset})}}
\label{classX86ISA_1_1I82094AA_a2e9f685c7a9db218d1bb3db976b98e9c}



\begin{DoxyCode}
155 {
156     uint32_t result = 0;
157     if (offset == 0x0) {
158         result = id << 24;
159     } else if (offset == 0x1) {
160         result = ((TableSize - 1) << 16) | APICVersion;
161     } else if (offset == 0x2) {
162         result = arbId << 24;
163     } else if (offset >= 0x10 && offset <= (0x10 + TableSize * 2)) {
164         int index = (offset - 0x10) / 2;
165         if (offset % 2) {
166             result = redirTable[index].topDW;
167         } else {
168             result = redirTable[index].bottomDW;
169         }
170     } else {
171         warn("Access to undefined I/O APIC register %#x.\n", offset);
172     }
173     DPRINTF(I82094AA,
174             "Read %#x from I/O APIC register %#x.\n", result, offset);
175     return result;
176 }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1I82094AA_a53e036786d17361be4c7320d39c99b84}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!serialize@{serialize}}
\index{serialize@{serialize}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{serialize}]{\setlength{\rightskip}{0pt plus 5cm}void serialize (std::ostream \& {\em os})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classX86ISA_1_1I82094AA_a53e036786d17361be4c7320d39c99b84}


\hyperlink{classSerializable_ad6272f80ae37e8331e3969b3f072a801}{Serializable}を再定義しています。


\begin{DoxyCode}
264 {
265     uint64_t* redirTableArray = (uint64_t*)redirTable;
266     SERIALIZE_SCALAR(regSel);
267     SERIALIZE_SCALAR(initialApicId);
268     SERIALIZE_SCALAR(id);
269     SERIALIZE_SCALAR(arbId);
270     SERIALIZE_SCALAR(lowestPriorityOffset);
271     SERIALIZE_ARRAY(redirTableArray, TableSize);
272     SERIALIZE_ARRAY(pinStates, TableSize);
273 }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1I82094AA_a9d80b13f2832340962ab374bc9a14c4f}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!signalInterrupt@{signalInterrupt}}
\index{signalInterrupt@{signalInterrupt}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{signalInterrupt}]{\setlength{\rightskip}{0pt plus 5cm}void signalInterrupt (int {\em line})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classX86ISA_1_1I82094AA_a9d80b13f2832340962ab374bc9a14c4f}


\hyperlink{classX86ISA_1_1IntDevice_a10c7e7cffe2e50c6c515fa1d8f0a4460}{IntDevice}を再定義しています。


\begin{DoxyCode}
180 {
181     DPRINTF(I82094AA, "Received interrupt %d.\n", line);
182     assert(line < TableSize);
183     RedirTableEntry entry = redirTable[line];
184     if (entry.mask) {
185         DPRINTF(I82094AA, "Entry was masked.\n");
186         return;
187     } else {
188         TriggerIntMessage message = 0;
189         message.destination = entry.dest;
190         if (entry.deliveryMode == DeliveryMode::ExtInt) {
191             assert(extIntPic);
192             message.vector = extIntPic->getVector();
193         } else {
194             message.vector = entry.vector;
195         }
196         message.deliveryMode = entry.deliveryMode;
197         message.destMode = entry.destMode;
198         message.level = entry.polarity;
199         message.trigger = entry.trigger;
200         ApicList apics;
201         int numContexts = sys->numContexts();
202         if (message.destMode == 0) {
203             if (message.deliveryMode == DeliveryMode::LowestPriority) {
204                 panic("Lowest priority delivery mode from the "
205                         "IO APIC aren't supported in physical "
206                         "destination mode.\n");
207             }
208             if (message.destination == 0xFF) {
209                 for (int i = 0; i < numContexts; i++) {
210                     apics.push_back(i);
211                 }
212             } else {
213                 apics.push_back(message.destination);
214             }
215         } else {
216             for (int i = 0; i < numContexts; i++) {
217                 Interrupts *localApic = sys->getThreadContext(i)->
218                     getCpuPtr()->getInterruptController();
219                 if ((localApic->readReg(APIC_LOGICAL_DESTINATION) >> 24) &
220                         message.destination) {
221                     apics.push_back(localApic->getInitialApicId());
222                 }
223             }
224             if (message.deliveryMode == DeliveryMode::LowestPriority &&
225                     apics.size()) {
226                 // The manual seems to suggest that the chipset just does
227                 // something reasonable for these instead of actually using
228                 // state from the local APIC. We'll just rotate an offset
229                 // through the set of APICs selected above.
230                 uint64_t modOffset = lowestPriorityOffset % apics.size();
231                 lowestPriorityOffset++;
232                 ApicList::iterator apicIt = apics.begin();
233                 while (modOffset--) {
234                     apicIt++;
235                     assert(apicIt != apics.end());
236                 }
237                 int selected = *apicIt;
238                 apics.clear();
239                 apics.push_back(selected);
240             }
241         }
242         intMasterPort.sendMessage(apics, message, sys->isTimingMode());
243     }
244 }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1I82094AA_af22e5d6d660b97db37003ac61ac4ee49}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!unserialize@{unserialize}}
\index{unserialize@{unserialize}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{unserialize}]{\setlength{\rightskip}{0pt plus 5cm}void unserialize ({\bf Checkpoint} $\ast$ {\em cp}, \/  const std::string \& {\em section})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classX86ISA_1_1I82094AA_af22e5d6d660b97db37003ac61ac4ee49}


\hyperlink{classSerializable_af100c4e9feabf3cd918619c88c718387}{Serializable}を再定義しています。


\begin{DoxyCode}
277 {
278     uint64_t redirTableArray[TableSize];
279     UNSERIALIZE_SCALAR(regSel);
280     UNSERIALIZE_SCALAR(initialApicId);
281     UNSERIALIZE_SCALAR(id);
282     UNSERIALIZE_SCALAR(arbId);
283     UNSERIALIZE_SCALAR(lowestPriorityOffset);
284     UNSERIALIZE_ARRAY(redirTableArray, TableSize);
285     UNSERIALIZE_ARRAY(pinStates, TableSize);
286     for (int i = 0; i < TableSize; i++) {
287         redirTable[i] = (RedirTableEntry)redirTableArray[i];
288     }
289 }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1I82094AA_a4cefab464e72b5dd42c003a0a4341802}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!write@{write}}
\index{write@{write}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{write}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} write ({\bf PacketPtr} {\em pkt})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classX86ISA_1_1I82094AA_a4cefab464e72b5dd42c003a0a4341802}
Pure virtual function that the device must implement. Called when a write command is recieved by the port. 
\begin{DoxyParams}{引数}
\item[{\em pkt}]\hyperlink{classPacket}{Packet} describing this request \end{DoxyParams}
\begin{DoxyReturn}{戻り値}
number of ticks it took to complete 
\end{DoxyReturn}


\hyperlink{classPioDevice_afe8371668d023bb2516b286e5e399b6f}{PioDevice}を実装しています。


\begin{DoxyCode}
111 {
112     assert(pkt->getSize() == 4);
113     Addr offset = pkt->getAddr() - pioAddr;
114     switch(offset) {
115       case 0:
116         regSel = pkt->get<uint32_t>();
117         break;
118       case 16:
119         writeReg(regSel, pkt->get<uint32_t>());
120         break;
121       default:
122         panic("Illegal write to I/O APIC.\n");
123     }
124     pkt->makeAtomicResponse();
125     return pioDelay;
126 }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1I82094AA_ae27db6ba83a73230a1bd07e9a0bc7bd0}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!writeReg@{writeReg}}
\index{writeReg@{writeReg}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{writeReg}]{\setlength{\rightskip}{0pt plus 5cm}void writeReg (uint8\_\-t {\em offset}, \/  {\bf uint32\_\-t} {\em value})}}
\label{classX86ISA_1_1I82094AA_ae27db6ba83a73230a1bd07e9a0bc7bd0}



\begin{DoxyCode}
130 {
131     if (offset == 0x0) {
132         id = bits(value, 31, 24);
133     } else if (offset == 0x1) {
134         // The IOAPICVER register is read only.
135     } else if (offset == 0x2) {
136         arbId = bits(value, 31, 24);
137     } else if (offset >= 0x10 && offset <= (0x10 + TableSize * 2)) {
138         int index = (offset - 0x10) / 2;
139         if (offset % 2) {
140             redirTable[index].topDW = value;
141             redirTable[index].topReserved = 0;
142         } else {
143             redirTable[index].bottomDW = value;
144             redirTable[index].bottomReserved = 0;
145         }
146     } else {
147         warn("Access to undefined I/O APIC register %#x.\n", offset);
148     }
149     DPRINTF(I82094AA,
150             "Wrote %#x to I/O APIC register %#x .\n", value, offset);
151 }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classX86ISA_1_1I82094AA_a437efc43f76d70132c38495623562007}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!APICVersion@{APICVersion}}
\index{APICVersion@{APICVersion}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{APICVersion}]{\setlength{\rightskip}{0pt plus 5cm}const uint8\_\-t {\bf APICVersion} = 0x14\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classX86ISA_1_1I82094AA_a437efc43f76d70132c38495623562007}
\hypertarget{classX86ISA_1_1I82094AA_a6a6f6c02dd2e4ed286c88b2809e36146}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!arbId@{arbId}}
\index{arbId@{arbId}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{arbId}]{\setlength{\rightskip}{0pt plus 5cm}uint8\_\-t {\bf arbId}}}
\label{classX86ISA_1_1I82094AA_a6a6f6c02dd2e4ed286c88b2809e36146}
\hypertarget{classX86ISA_1_1I82094AA_a09039405e8bb064cfab41786a5a3038b}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!bottomDW@{bottomDW}}
\index{bottomDW@{bottomDW}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{bottomDW}]{\setlength{\rightskip}{0pt plus 5cm}Bitfield$<$31, 0$>$ {\bf bottomDW}}}
\label{classX86ISA_1_1I82094AA_a09039405e8bb064cfab41786a5a3038b}
\hypertarget{classX86ISA_1_1I82094AA_aa5d6a929978df9b06c2a7d4c50ce385d}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!bottomReserved@{bottomReserved}}
\index{bottomReserved@{bottomReserved}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{bottomReserved}]{\setlength{\rightskip}{0pt plus 5cm}Bitfield$<$31, 17$>$ {\bf bottomReserved}}}
\label{classX86ISA_1_1I82094AA_aa5d6a929978df9b06c2a7d4c50ce385d}
\hypertarget{classX86ISA_1_1I82094AA_aa6bdaa7818eb499f0dcf848f4ae7d569}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!deliveryMode@{deliveryMode}}
\index{deliveryMode@{deliveryMode}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{deliveryMode}]{\setlength{\rightskip}{0pt plus 5cm}Bitfield$<$10, 8$>$ {\bf deliveryMode}}}
\label{classX86ISA_1_1I82094AA_aa6bdaa7818eb499f0dcf848f4ae7d569}
\hypertarget{classX86ISA_1_1I82094AA_abe55336004f210f2b2c0421f55ea7c3e}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!deliveryStatus@{deliveryStatus}}
\index{deliveryStatus@{deliveryStatus}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{deliveryStatus}]{\setlength{\rightskip}{0pt plus 5cm}Bitfield$<$12$>$ {\bf deliveryStatus}}}
\label{classX86ISA_1_1I82094AA_abe55336004f210f2b2c0421f55ea7c3e}
\hypertarget{classX86ISA_1_1I82094AA_aeaa7168c2c22fe679ac5f9a4a1fb0390}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!dest@{dest}}
\index{dest@{dest}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{dest}]{\setlength{\rightskip}{0pt plus 5cm}Bitfield$<$63, 56$>$ {\bf dest}}}
\label{classX86ISA_1_1I82094AA_aeaa7168c2c22fe679ac5f9a4a1fb0390}
\hypertarget{classX86ISA_1_1I82094AA_ae6a8d79068dd7c14202c5384ab9076ae}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!destMode@{destMode}}
\index{destMode@{destMode}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{destMode}]{\setlength{\rightskip}{0pt plus 5cm}Bitfield$<$11$>$ {\bf destMode}}}
\label{classX86ISA_1_1I82094AA_ae6a8d79068dd7c14202c5384ab9076ae}
\hypertarget{classX86ISA_1_1I82094AA_a1e6927fa1486224044e568f9c370519b}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!id@{id}}
\index{id@{id}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{id}]{\setlength{\rightskip}{0pt plus 5cm}uint8\_\-t {\bf id}}}
\label{classX86ISA_1_1I82094AA_a1e6927fa1486224044e568f9c370519b}
\hypertarget{classX86ISA_1_1I82094AA_a106ad81ca27007fff38acbd0a0b61d8e}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!initialApicId@{initialApicId}}
\index{initialApicId@{initialApicId}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{initialApicId}]{\setlength{\rightskip}{0pt plus 5cm}uint8\_\-t {\bf initialApicId}}}
\label{classX86ISA_1_1I82094AA_a106ad81ca27007fff38acbd0a0b61d8e}
\hypertarget{classX86ISA_1_1I82094AA_a0e3677dd1ad49cc615abbee3bc94af3f}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!lowestPriorityOffset@{lowestPriorityOffset}}
\index{lowestPriorityOffset@{lowestPriorityOffset}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{lowestPriorityOffset}]{\setlength{\rightskip}{0pt plus 5cm}uint64\_\-t {\bf lowestPriorityOffset}}}
\label{classX86ISA_1_1I82094AA_a0e3677dd1ad49cc615abbee3bc94af3f}
\hypertarget{classX86ISA_1_1I82094AA_aabfd857e75bf142be3b1bd1db6d81583}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!mask@{mask}}
\index{mask@{mask}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{mask}]{\setlength{\rightskip}{0pt plus 5cm}Bitfield$<$16$>$ {\bf mask}}}
\label{classX86ISA_1_1I82094AA_aabfd857e75bf142be3b1bd1db6d81583}
\hypertarget{classX86ISA_1_1I82094AA_af77117f04721948e9078ef45189b6bb6}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!pinStates@{pinStates}}
\index{pinStates@{pinStates}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{pinStates}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf pinStates}\mbox{[}{\bf TableSize}\mbox{]}}}
\label{classX86ISA_1_1I82094AA_af77117f04721948e9078ef45189b6bb6}
\hypertarget{classX86ISA_1_1I82094AA_ae3c9a79ca2272b1906da22919f226af3}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!polarity@{polarity}}
\index{polarity@{polarity}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{polarity}]{\setlength{\rightskip}{0pt plus 5cm}Bitfield$<$13$>$ {\bf polarity}}}
\label{classX86ISA_1_1I82094AA_ae3c9a79ca2272b1906da22919f226af3}
\hypertarget{classX86ISA_1_1I82094AA_acad7eb01e83e49ac5388cd6fddd75f89}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!redirTable@{redirTable}}
\index{redirTable@{redirTable}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{redirTable}]{\setlength{\rightskip}{0pt plus 5cm}RedirTableEntry {\bf redirTable}\mbox{[}{\bf TableSize}\mbox{]}}}
\label{classX86ISA_1_1I82094AA_acad7eb01e83e49ac5388cd6fddd75f89}
\hypertarget{classX86ISA_1_1I82094AA_aa40a207fb274f62046d99924bd138280}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!regSel@{regSel}}
\index{regSel@{regSel}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{regSel}]{\setlength{\rightskip}{0pt plus 5cm}EndBitUnion (RedirTableEntry) protected uint8\_\-t {\bf regSel}}}
\label{classX86ISA_1_1I82094AA_aa40a207fb274f62046d99924bd138280}
\hypertarget{classX86ISA_1_1I82094AA_ae074e6e7f5c02b863d4ffe1040e7e7a0}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!remoteIRR@{remoteIRR}}
\index{remoteIRR@{remoteIRR}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{remoteIRR}]{\setlength{\rightskip}{0pt plus 5cm}Bitfield$<$14$>$ {\bf remoteIRR}}}
\label{classX86ISA_1_1I82094AA_ae074e6e7f5c02b863d4ffe1040e7e7a0}
\hypertarget{classX86ISA_1_1I82094AA_a7556b7f499a21a1415a7ed642e8a9f9b}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!TableSize@{TableSize}}
\index{TableSize@{TableSize}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{TableSize}]{\setlength{\rightskip}{0pt plus 5cm}const uint8\_\-t {\bf TableSize} = 24\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classX86ISA_1_1I82094AA_a7556b7f499a21a1415a7ed642e8a9f9b}
\hypertarget{classX86ISA_1_1I82094AA_a111bfdfbf9000eeefa76026350b2597f}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!topDW@{topDW}}
\index{topDW@{topDW}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{topDW}]{\setlength{\rightskip}{0pt plus 5cm}{\bf topDW}}}
\label{classX86ISA_1_1I82094AA_a111bfdfbf9000eeefa76026350b2597f}
\hypertarget{classX86ISA_1_1I82094AA_a91847c8f9fbbd5be70da8e6af01b26bb}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!topReserved@{topReserved}}
\index{topReserved@{topReserved}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{topReserved}]{\setlength{\rightskip}{0pt plus 5cm}Bitfield$<$55, 32$>$ {\bf topReserved}}}
\label{classX86ISA_1_1I82094AA_a91847c8f9fbbd5be70da8e6af01b26bb}
\hypertarget{classX86ISA_1_1I82094AA_a1a8acf21e383afeb477a3d8e88b689de}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!trigger@{trigger}}
\index{trigger@{trigger}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{trigger}]{\setlength{\rightskip}{0pt plus 5cm}Bitfield$<$15$>$ {\bf trigger}}}
\label{classX86ISA_1_1I82094AA_a1a8acf21e383afeb477a3d8e88b689de}
\hypertarget{classX86ISA_1_1I82094AA_a8b9597b04839779d67912b193653be20}{
\index{X86ISA::I82094AA@{X86ISA::I82094AA}!vector@{vector}}
\index{vector@{vector}!X86ISA::I82094AA@{X86ISA::I82094AA}}
\subsubsection[{vector}]{\setlength{\rightskip}{0pt plus 5cm}Bitfield$<$7, 0$>$ {\bf vector}}}
\label{classX86ISA_1_1I82094AA_a8b9597b04839779d67912b193653be20}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
dev/x86/\hyperlink{i82094aa_8hh}{i82094aa.hh}\item 
dev/x86/\hyperlink{i82094aa_8cc}{i82094aa.cc}\end{DoxyCompactItemize}
