<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス テンプレート DependencyGraph&lt; DynInstPtr &gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>クラス テンプレート DependencyGraph&lt; DynInstPtr &gt;</h1><!-- doxytag: class="DependencyGraph" -->
<p><code>#include &lt;<a class="el" href="dep__graph_8hh_source.html">dep_graph.hh</a>&gt;</code></p>

<p><a href="classDependencyGraph-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public 型</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classDependencyEntry.html">DependencyEntry</a><br class="typebreak"/>
&lt; DynInstPtr &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDependencyGraph.html#ab740e4c6c7a7c521e28f61fc991417f8">DepEntry</a></td></tr>
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDependencyGraph.html#a272991aeaffc4f6a74a9f3de8cb3e055">DependencyGraph</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDependencyGraph.html#aadf0cefbf15be129075d5c91be7c61b4">~DependencyGraph</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDependencyGraph.html#a3780426d320e4d44a0bc9f44ce6c2175">resize</a> (int num_entries)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDependencyGraph.html#ad20897c5c8bd47f5d4005989bead0e55">reset</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDependencyGraph.html#a8147b910a65e5096dbbb3b8359f375f8">insert</a> (<a class="el" href="o3_2comm_8hh.html#a5ec29599c4bc29a3054c451674969e7b">PhysRegIndex</a> idx, DynInstPtr &amp;new_inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDependencyGraph.html#ade8120ce15ebff1cb55df7995a51d237">setInst</a> (<a class="el" href="o3_2comm_8hh.html#a5ec29599c4bc29a3054c451674969e7b">PhysRegIndex</a> idx, DynInstPtr &amp;new_inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDependencyGraph.html#a68804553aa4fc717c5e467b252ef37ca">clearInst</a> (<a class="el" href="o3_2comm_8hh.html#a5ec29599c4bc29a3054c451674969e7b">PhysRegIndex</a> idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDependencyGraph.html#a0f84aaa20d93732630c72593b97f5e13">remove</a> (<a class="el" href="o3_2comm_8hh.html#a5ec29599c4bc29a3054c451674969e7b">PhysRegIndex</a> idx, DynInstPtr &amp;inst_to_remove)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">DynInstPtr&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDependencyGraph.html#a37140b50c279f856724fe1eac144bc3a">pop</a> (<a class="el" href="o3_2comm_8hh.html#a5ec29599c4bc29a3054c451674969e7b">PhysRegIndex</a> idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDependencyGraph.html#ac6e61de369e994009e36f344f99c15ad">empty</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDependencyGraph.html#a790abdbbdb5625ac65e5e3702b1e1a43">empty</a> (<a class="el" href="o3_2comm_8hh.html#a5ec29599c4bc29a3054c451674969e7b">PhysRegIndex</a> idx) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDependencyGraph.html#accd2600060dbaee3a3b41aed4034c63c">dump</a> ()</td></tr>
<tr><td colspan="2"><h2>Public 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDependencyGraph.html#a3872e5bf089b4615d62a04b097795a6e">nodesTraversed</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDependencyGraph.html#ad997769c2f059584b9ffb4a2e118207b">nodesRemoved</a></td></tr>
<tr><td colspan="2"><h2>Private 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDependencyEntry.html">DepEntry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDependencyGraph.html#a6f79afe06f613dc0de42e79175c6e776">dependGraph</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDependencyGraph.html#a75b15f0e26b4ccf3195772b134b660ec">numEntries</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDependencyGraph.html#a3cfe22df7cc4db63a7704ae43ef789aa">memAllocCounter</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>説明</h2>
<h3>template&lt;class DynInstPtr&gt;<br/>
 class DependencyGraph&lt; DynInstPtr &gt;</h3>

<p>Array of linked list that maintains the dependencies between producing instructions and consuming instructions. Each linked list represents a single physical register, having the future producer of the register's value, and all consumers waiting on that value on the list. The head node of each linked list represents the producing instruction of that register. Instructions are put on the list upon reaching the IQ, and are removed from the list either when the producer completes, or the instruction is squashed. </p>
<hr/><h2>型定義</h2>
<a class="anchor" id="ab740e4c6c7a7c521e28f61fc991417f8"></a><!-- doxytag: member="DependencyGraph::DepEntry" ref="ab740e4c6c7a7c521e28f61fc991417f8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classDependencyEntry.html">DependencyEntry</a>&lt;DynInstPtr&gt; <a class="el" href="classDependencyEntry.html">DepEntry</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="a272991aeaffc4f6a74a9f3de8cb3e055"></a><!-- doxytag: member="DependencyGraph::DependencyGraph" ref="a272991aeaffc4f6a74a9f3de8cb3e055" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDependencyGraph.html">DependencyGraph</a> </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Default construction. Must call <a class="el" href="classDependencyGraph.html#a3780426d320e4d44a0bc9f44ce6c2175">resize()</a> prior to use. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00080"></a>00080         : <a class="code" href="classDependencyGraph.html#a75b15f0e26b4ccf3195772b134b660ec">numEntries</a>(0), <a class="code" href="classDependencyGraph.html#a3cfe22df7cc4db63a7704ae43ef789aa">memAllocCounter</a>(0), <a class="code" href="classDependencyGraph.html#a3872e5bf089b4615d62a04b097795a6e">nodesTraversed</a>(0), <a class="code" href="classDependencyGraph.html#ad997769c2f059584b9ffb4a2e118207b">nodesRemoved</a>(0)
<a name="l00081"></a>00081     { }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aadf0cefbf15be129075d5c91be7c61b4"></a><!-- doxytag: member="DependencyGraph::~DependencyGraph" ref="aadf0cefbf15be129075d5c91be7c61b4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classDependencyGraph.html">DependencyGraph</a> </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00142"></a>00142 {
<a name="l00143"></a>00143     <span class="keyword">delete</span> [] <a class="code" href="classDependencyGraph.html#a6f79afe06f613dc0de42e79175c6e776">dependGraph</a>;
<a name="l00144"></a>00144 }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="a68804553aa4fc717c5e467b252ef37ca"></a><!-- doxytag: member="DependencyGraph::clearInst" ref="a68804553aa4fc717c5e467b252ef37ca" args="(PhysRegIndex idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clearInst </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="o3_2comm_8hh.html#a5ec29599c4bc29a3054c451674969e7b">PhysRegIndex</a>&nbsp;</td>
          <td class="paramname"> <em>idx</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Clears the producing instruction. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00100"></a>00100     { <a class="code" href="classDependencyGraph.html#a6f79afe06f613dc0de42e79175c6e776">dependGraph</a>[idx].<a class="code" href="classDependencyEntry.html#af5d4fb974eeb4507d4c837d365d0cefc">inst</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="accd2600060dbaee3a3b41aed4034c63c"></a><!-- doxytag: member="DependencyGraph::dump" ref="accd2600060dbaee3a3b41aed4034c63c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dump </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Debugging function to dump out the dependency graph. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00272"></a>00272 {
<a name="l00273"></a>00273     <a class="code" href="classDependencyGraph.html#ab740e4c6c7a7c521e28f61fc991417f8">DepEntry</a> *curr;
<a name="l00274"></a>00274 
<a name="l00275"></a>00275     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classDependencyGraph.html#a75b15f0e26b4ccf3195772b134b660ec">numEntries</a>; ++<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>)
<a name="l00276"></a>00276     {
<a name="l00277"></a>00277         curr = &amp;<a class="code" href="classDependencyGraph.html#a6f79afe06f613dc0de42e79175c6e776">dependGraph</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>];
<a name="l00278"></a>00278 
<a name="l00279"></a>00279         <span class="keywordflow">if</span> (curr-&gt;inst) {
<a name="l00280"></a>00280             <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;dependGraph[%i]: producer: %s [sn:%lli] consumer: &quot;</span>,
<a name="l00281"></a>00281                     <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>, curr-&gt;inst-&gt;pcState(), curr-&gt;inst-&gt;seqNum);
<a name="l00282"></a>00282         } <span class="keywordflow">else</span> {
<a name="l00283"></a>00283             <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;dependGraph[%i]: No producer. consumer: &quot;</span>, <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>);
<a name="l00284"></a>00284         }
<a name="l00285"></a>00285 
<a name="l00286"></a>00286         <span class="keywordflow">while</span> (curr-&gt;next != <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>) {
<a name="l00287"></a>00287             curr = curr-&gt;next;
<a name="l00288"></a>00288 
<a name="l00289"></a>00289             <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;%s [sn:%lli] &quot;</span>,
<a name="l00290"></a>00290                     curr-&gt;inst-&gt;pcState(), curr-&gt;inst-&gt;seqNum);
<a name="l00291"></a>00291         }
<a name="l00292"></a>00292 
<a name="l00293"></a>00293         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00294"></a>00294     }
<a name="l00295"></a>00295     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;memAllocCounter: %i\n&quot;</span>, <a class="code" href="classDependencyGraph.html#a3cfe22df7cc4db63a7704ae43ef789aa">memAllocCounter</a>);
<a name="l00296"></a>00296 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a790abdbbdb5625ac65e5e3702b1e1a43"></a><!-- doxytag: member="DependencyGraph::empty" ref="a790abdbbdb5625ac65e5e3702b1e1a43" args="(PhysRegIndex idx) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool empty </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="o3_2comm_8hh.html#a5ec29599c4bc29a3054c451674969e7b">PhysRegIndex</a>&nbsp;</td>
          <td class="paramname"> <em>idx</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Checks if there are any dependents on a specific register. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00112"></a>00112 { <span class="keywordflow">return</span> !<a class="code" href="classDependencyGraph.html#a6f79afe06f613dc0de42e79175c6e776">dependGraph</a>[idx].<a class="code" href="classDependencyEntry.html#a8e52e096475018c4b11a52dc63a23a02">next</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac6e61de369e994009e36f344f99c15ad"></a><!-- doxytag: member="DependencyGraph::empty" ref="ac6e61de369e994009e36f344f99c15ad" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool empty </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Checks if the entire dependency graph is empty. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00261"></a>00261 {
<a name="l00262"></a>00262     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classDependencyGraph.html#a75b15f0e26b4ccf3195772b134b660ec">numEntries</a>; ++<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>) {
<a name="l00263"></a>00263         <span class="keywordflow">if</span> (!<a class="code" href="classDependencyGraph.html#ac6e61de369e994009e36f344f99c15ad">empty</a>(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>))
<a name="l00264"></a>00264             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00265"></a>00265     }
<a name="l00266"></a>00266     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00267"></a>00267 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8147b910a65e5096dbbb3b8359f375f8"></a><!-- doxytag: member="DependencyGraph::insert" ref="a8147b910a65e5096dbbb3b8359f375f8" args="(PhysRegIndex idx, DynInstPtr &amp;new_inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="o3_2comm_8hh.html#a5ec29599c4bc29a3054c451674969e7b">PhysRegIndex</a>&nbsp;</td>
          <td class="paramname"> <em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DynInstPtr &amp;&nbsp;</td>
          <td class="paramname"> <em>new_inst</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Inserts an instruction to be dependent on the given index. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00186"></a>00186 {
<a name="l00187"></a>00187     <span class="comment">//Add this new, dependent instruction at the head of the dependency</span>
<a name="l00188"></a>00188     <span class="comment">//chain.</span>
<a name="l00189"></a>00189 
<a name="l00190"></a>00190     <span class="comment">// First create the entry that will be added to the head of the</span>
<a name="l00191"></a>00191     <span class="comment">// dependency chain.</span>
<a name="l00192"></a>00192     <a class="code" href="classDependencyGraph.html#ab740e4c6c7a7c521e28f61fc991417f8">DepEntry</a> *new_entry = <span class="keyword">new</span> <a class="code" href="classDependencyGraph.html#ab740e4c6c7a7c521e28f61fc991417f8">DepEntry</a>;
<a name="l00193"></a>00193     new_entry-&gt;next = <a class="code" href="classDependencyGraph.html#a6f79afe06f613dc0de42e79175c6e776">dependGraph</a>[idx].<a class="code" href="classDependencyEntry.html#a8e52e096475018c4b11a52dc63a23a02">next</a>;
<a name="l00194"></a>00194     new_entry-&gt;inst = new_inst;
<a name="l00195"></a>00195 
<a name="l00196"></a>00196     <span class="comment">// Then actually add it to the chain.</span>
<a name="l00197"></a>00197     <a class="code" href="classDependencyGraph.html#a6f79afe06f613dc0de42e79175c6e776">dependGraph</a>[idx].<a class="code" href="classDependencyEntry.html#a8e52e096475018c4b11a52dc63a23a02">next</a> = new_entry;
<a name="l00198"></a>00198 
<a name="l00199"></a>00199     ++<a class="code" href="classDependencyGraph.html#a3cfe22df7cc4db63a7704ae43ef789aa">memAllocCounter</a>;
<a name="l00200"></a>00200 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a37140b50c279f856724fe1eac144bc3a"></a><!-- doxytag: member="DependencyGraph::pop" ref="a37140b50c279f856724fe1eac144bc3a" args="(PhysRegIndex idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DynInstPtr pop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="o3_2comm_8hh.html#a5ec29599c4bc29a3054c451674969e7b">PhysRegIndex</a>&nbsp;</td>
          <td class="paramname"> <em>idx</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Removes and returns the newest dependent of a specific register. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00244"></a>00244 {
<a name="l00245"></a>00245     <a class="code" href="classDependencyGraph.html#ab740e4c6c7a7c521e28f61fc991417f8">DepEntry</a> *node;
<a name="l00246"></a>00246     node = <a class="code" href="classDependencyGraph.html#a6f79afe06f613dc0de42e79175c6e776">dependGraph</a>[idx].<a class="code" href="classDependencyEntry.html#a8e52e096475018c4b11a52dc63a23a02">next</a>;
<a name="l00247"></a>00247     <a class="code" href="namespaceThePipeline.html#a992959fefcd659c6ba422aa4de14677c">DynInstPtr</a> inst = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00248"></a>00248     <span class="keywordflow">if</span> (node) {
<a name="l00249"></a>00249         inst = node-&gt;inst;
<a name="l00250"></a>00250         <a class="code" href="classDependencyGraph.html#a6f79afe06f613dc0de42e79175c6e776">dependGraph</a>[idx].<a class="code" href="classDependencyEntry.html#a8e52e096475018c4b11a52dc63a23a02">next</a> = node-&gt;next;
<a name="l00251"></a>00251         node-&gt;inst = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00252"></a>00252         <a class="code" href="classDependencyGraph.html#a3cfe22df7cc4db63a7704ae43ef789aa">memAllocCounter</a>--;
<a name="l00253"></a>00253         <span class="keyword">delete</span> node;
<a name="l00254"></a>00254     }
<a name="l00255"></a>00255     <span class="keywordflow">return</span> inst;
<a name="l00256"></a>00256 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0f84aaa20d93732630c72593b97f5e13"></a><!-- doxytag: member="DependencyGraph::remove" ref="a0f84aaa20d93732630c72593b97f5e13" args="(PhysRegIndex idx, DynInstPtr &amp;inst_to_remove)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void remove </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="o3_2comm_8hh.html#a5ec29599c4bc29a3054c451674969e7b">PhysRegIndex</a>&nbsp;</td>
          <td class="paramname"> <em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DynInstPtr &amp;&nbsp;</td>
          <td class="paramname"> <em>inst_to_remove</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Removes an instruction from a single linked list. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00207"></a>00207 {
<a name="l00208"></a>00208     <a class="code" href="classDependencyGraph.html#ab740e4c6c7a7c521e28f61fc991417f8">DepEntry</a> *prev = &amp;<a class="code" href="classDependencyGraph.html#a6f79afe06f613dc0de42e79175c6e776">dependGraph</a>[idx];
<a name="l00209"></a>00209     <a class="code" href="classDependencyGraph.html#ab740e4c6c7a7c521e28f61fc991417f8">DepEntry</a> *curr = <a class="code" href="classDependencyGraph.html#a6f79afe06f613dc0de42e79175c6e776">dependGraph</a>[idx].<a class="code" href="classDependencyEntry.html#a8e52e096475018c4b11a52dc63a23a02">next</a>;
<a name="l00210"></a>00210 
<a name="l00211"></a>00211     <span class="comment">// Make sure curr isn&apos;t NULL.  Because this instruction is being</span>
<a name="l00212"></a>00212     <span class="comment">// removed from a dependency list, it must have been placed there at</span>
<a name="l00213"></a>00213     <span class="comment">// an earlier time.  The dependency chain should not be empty,</span>
<a name="l00214"></a>00214     <span class="comment">// unless the instruction dependent upon it is already ready.</span>
<a name="l00215"></a>00215     <span class="keywordflow">if</span> (curr == <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>) {
<a name="l00216"></a>00216         <span class="keywordflow">return</span>;
<a name="l00217"></a>00217     }
<a name="l00218"></a>00218 
<a name="l00219"></a>00219     <a class="code" href="classDependencyGraph.html#ad997769c2f059584b9ffb4a2e118207b">nodesRemoved</a>++;
<a name="l00220"></a>00220 
<a name="l00221"></a>00221     <span class="comment">// Find the instruction to remove within the dependency linked list.</span>
<a name="l00222"></a>00222     <span class="keywordflow">while</span> (curr-&gt;inst != inst_to_remove) {
<a name="l00223"></a>00223         prev = curr;
<a name="l00224"></a>00224         curr = curr-&gt;next;
<a name="l00225"></a>00225         <a class="code" href="classDependencyGraph.html#a3872e5bf089b4615d62a04b097795a6e">nodesTraversed</a>++;
<a name="l00226"></a>00226 
<a name="l00227"></a>00227         assert(curr != <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>);
<a name="l00228"></a>00228     }
<a name="l00229"></a>00229 
<a name="l00230"></a>00230     <span class="comment">// Now remove this instruction from the list.</span>
<a name="l00231"></a>00231     prev-&gt;next = curr-&gt;next;
<a name="l00232"></a>00232 
<a name="l00233"></a>00233     --<a class="code" href="classDependencyGraph.html#a3cfe22df7cc4db63a7704ae43ef789aa">memAllocCounter</a>;
<a name="l00234"></a>00234 
<a name="l00235"></a>00235     <span class="comment">// Could push this off to the destructor of DependencyEntry</span>
<a name="l00236"></a>00236     curr-&gt;inst = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00237"></a>00237 
<a name="l00238"></a>00238     <span class="keyword">delete</span> curr;
<a name="l00239"></a>00239 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad20897c5c8bd47f5d4005989bead0e55"></a><!-- doxytag: member="DependencyGraph::reset" ref="ad20897c5c8bd47f5d4005989bead0e55" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reset </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Clears all of the linked lists. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00157"></a>00157 {
<a name="l00158"></a>00158     <span class="comment">// Clear the dependency graph</span>
<a name="l00159"></a>00159     <a class="code" href="classDependencyGraph.html#ab740e4c6c7a7c521e28f61fc991417f8">DepEntry</a> *curr;
<a name="l00160"></a>00160     <a class="code" href="classDependencyGraph.html#ab740e4c6c7a7c521e28f61fc991417f8">DepEntry</a> *prev;
<a name="l00161"></a>00161 
<a name="l00162"></a>00162     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classDependencyGraph.html#a75b15f0e26b4ccf3195772b134b660ec">numEntries</a>; ++<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>) {
<a name="l00163"></a>00163         curr = <a class="code" href="classDependencyGraph.html#a6f79afe06f613dc0de42e79175c6e776">dependGraph</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>].<a class="code" href="classDependencyEntry.html#a8e52e096475018c4b11a52dc63a23a02">next</a>;
<a name="l00164"></a>00164 
<a name="l00165"></a>00165         <span class="keywordflow">while</span> (curr) {
<a name="l00166"></a>00166             <a class="code" href="classDependencyGraph.html#a3cfe22df7cc4db63a7704ae43ef789aa">memAllocCounter</a>--;
<a name="l00167"></a>00167 
<a name="l00168"></a>00168             prev = curr;
<a name="l00169"></a>00169             curr = prev-&gt;next;
<a name="l00170"></a>00170             prev-&gt;inst = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00171"></a>00171 
<a name="l00172"></a>00172             <span class="keyword">delete</span> prev;
<a name="l00173"></a>00173         }
<a name="l00174"></a>00174 
<a name="l00175"></a>00175         <span class="keywordflow">if</span> (<a class="code" href="classDependencyGraph.html#a6f79afe06f613dc0de42e79175c6e776">dependGraph</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>].inst) {
<a name="l00176"></a>00176             <a class="code" href="classDependencyGraph.html#a6f79afe06f613dc0de42e79175c6e776">dependGraph</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>].<a class="code" href="classDependencyEntry.html#af5d4fb974eeb4507d4c837d365d0cefc">inst</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00177"></a>00177         }
<a name="l00178"></a>00178 
<a name="l00179"></a>00179         <a class="code" href="classDependencyGraph.html#a6f79afe06f613dc0de42e79175c6e776">dependGraph</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>].<a class="code" href="classDependencyEntry.html#a8e52e096475018c4b11a52dc63a23a02">next</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00180"></a>00180     }
<a name="l00181"></a>00181 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3780426d320e4d44a0bc9f44ce6c2175"></a><!-- doxytag: member="DependencyGraph::resize" ref="a3780426d320e4d44a0bc9f44ce6c2175" args="(int num_entries)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void resize </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_entries</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Resize the dependency graph to have num_entries registers. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00149"></a>00149 {
<a name="l00150"></a>00150     <a class="code" href="classDependencyGraph.html#a75b15f0e26b4ccf3195772b134b660ec">numEntries</a> = num_entries;
<a name="l00151"></a>00151     <a class="code" href="classDependencyGraph.html#a6f79afe06f613dc0de42e79175c6e776">dependGraph</a> = <span class="keyword">new</span> <a class="code" href="classDependencyGraph.html#ab740e4c6c7a7c521e28f61fc991417f8">DepEntry</a>[<a class="code" href="classDependencyGraph.html#a75b15f0e26b4ccf3195772b134b660ec">numEntries</a>];
<a name="l00152"></a>00152 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ade8120ce15ebff1cb55df7995a51d237"></a><!-- doxytag: member="DependencyGraph::setInst" ref="ade8120ce15ebff1cb55df7995a51d237" args="(PhysRegIndex idx, DynInstPtr &amp;new_inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setInst </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="o3_2comm_8hh.html#a5ec29599c4bc29a3054c451674969e7b">PhysRegIndex</a>&nbsp;</td>
          <td class="paramname"> <em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DynInstPtr &amp;&nbsp;</td>
          <td class="paramname"> <em>new_inst</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the producing instruction of a given register. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00096"></a>00096     { <a class="code" href="classDependencyGraph.html#a6f79afe06f613dc0de42e79175c6e776">dependGraph</a>[idx].<a class="code" href="classDependencyEntry.html#af5d4fb974eeb4507d4c837d365d0cefc">inst</a> = new_inst; }
</pre></div></p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="a6f79afe06f613dc0de42e79175c6e776"></a><!-- doxytag: member="DependencyGraph::dependGraph" ref="a6f79afe06f613dc0de42e79175c6e776" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDependencyEntry.html">DepEntry</a>* <a class="el" href="classDependencyGraph.html#a6f79afe06f613dc0de42e79175c6e776">dependGraph</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Array of linked lists. Each linked list is a list of all the instructions that depend upon a given register. The actual register's index is used to index into the graph; ie all instructions in flight that are dependent upon r34 will be in the linked list of dependGraph[34]. </p>

</div>
</div>
<a class="anchor" id="a3cfe22df7cc4db63a7704ae43ef789aa"></a><!-- doxytag: member="DependencyGraph::memAllocCounter" ref="a3cfe22df7cc4db63a7704ae43ef789aa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classDependencyGraph.html#a3cfe22df7cc4db63a7704ae43ef789aa">memAllocCounter</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad997769c2f059584b9ffb4a2e118207b"></a><!-- doxytag: member="DependencyGraph::nodesRemoved" ref="ad997769c2f059584b9ffb4a2e118207b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="classDependencyGraph.html#ad997769c2f059584b9ffb4a2e118207b">nodesRemoved</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3872e5bf089b4615d62a04b097795a6e"></a><!-- doxytag: member="DependencyGraph::nodesTraversed" ref="a3872e5bf089b4615d62a04b097795a6e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="classDependencyGraph.html#a3872e5bf089b4615d62a04b097795a6e">nodesTraversed</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a75b15f0e26b4ccf3195772b134b660ec"></a><!-- doxytag: member="DependencyGraph::numEntries" ref="a75b15f0e26b4ccf3195772b134b660ec" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classDependencyGraph.html#a75b15f0e26b4ccf3195772b134b660ec">numEntries</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of linked lists; identical to the number of registers. </p>

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>cpu/o3/<a class="el" href="dep__graph_8hh_source.html">dep_graph.hh</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
