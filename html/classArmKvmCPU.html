<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス ArmKvmCPU</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>クラス ArmKvmCPU</h1><!-- doxytag: class="ArmKvmCPU" --><!-- doxytag: inherits="BaseKvmCPU" -->
<p><code>#include &lt;<a class="el" href="arm__cpu_8hh_source.html">arm_cpu.hh</a>&gt;</code></p>
<div class="dynheader">
ArmKvmCPUに対する継承グラフ</div>
<div class="dynsection">
 <div class="center">
  <img src="classArmKvmCPU.gif" usemap="#ArmKvmCPU_map" alt=""/>
  <map id="ArmKvmCPU_map" name="ArmKvmCPU_map">
<area href="classBaseKvmCPU.html" alt="BaseKvmCPU" shape="rect" coords="0,56,89,80"/>
<area href="classBaseCPU.html" alt="BaseCPU" shape="rect" coords="0,0,89,24"/>
</map>
 </div>
</div>

<p><a href="classArmKvmCPU-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>構成</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU_1_1ArmKvmCPU.html">ArmKvmCPU</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structArmKvmCPU_1_1KvmCoreMiscRegInfo.html">KvmCoreMiscRegInfo</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structArmKvmCPU_1_1KvmIntRegInfo.html">KvmIntRegInfo</a></td></tr>
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#ab1eb352efa2b1da33f37cf592ffb2b00">ArmKvmCPU</a> (ArmKvmCPUParams *params)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#a5a7b2abd8e0f6124ff58343a788dfc1d">~ArmKvmCPU</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#aecc7d8debf54990ffeaaed5bac7d7d81">startup</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#accd2600060dbaee3a3b41aed4034c63c">dump</a> ()</td></tr>
<tr><td colspan="2"><h2>Protected 型</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classstd_1_1vector.html">std::vector</a>&lt; uint64_t &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#acba61563c19ad813c8026d8746e8bded">RegIndexVector</a></td></tr>
<tr><td colspan="2"><h2>Protected メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#aed3dbd0c0bf26d82ee56367a3f350506">kvmRun</a> (<a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> ticks)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#a93c6e8c82dfb63c7039f0cbf064fae5d">updateKvmState</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#adbd5e38eae7c8c3021f2c4f430b399fd">updateThreadContext</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#ac0b773030a2340b7bdac78ccc7227449">onKvmExitHypercall</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classstd_1_1vector.html">RegIndexVector</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#ae852422eea452a5cdcf96e300ec91cc7">getRegList</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#a2b5088861eb66dc69fc8dc2f39f6174e">kvmArmVCpuInit</a> (<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> target)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#a019059b30bdbbd0e5b4a2e41794f5e57">kvmArmVCpuInit</a> (const struct kvm_vcpu_init &amp;init)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67">ArmISA::MiscRegIndex</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#a9b185ea78411f18604ed826462d010d7">decodeCoProcReg</a> (uint64_t id) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67">ArmISA::MiscRegIndex</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#acf6fe05c1274f3c7d8d6b452f193522b">decodeVFPCtrlReg</a> (uint64_t id) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#a901923fcf22651d3f67b8c4e0874868f">isInvariantReg</a> (uint64_t id)</td></tr>
<tr><td colspan="2"><h2>Static Protected 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structArmKvmCPU_1_1KvmIntRegInfo.html">KvmIntRegInfo</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#a610b9b2e17374a59cb14ab6e1b7c3dd0">kvmIntRegs</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structArmKvmCPU_1_1KvmCoreMiscRegInfo.html">KvmCoreMiscRegInfo</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#a7f2a34be5f2a6e8b6812657f935461cf">kvmCoreMiscRegs</a> []</td></tr>
<tr><td colspan="2"><h2>Private メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#a8a90fa6e1883cd37fc5cd411a56331a7">getRegList</a> (struct kvm_reg_list &amp;regs) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#a54d58f77f2887428772599f7ddd8652e">dumpKvmStateCore</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#a7e82213fbf8527640f993114c92f97eb">dumpKvmStateMisc</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#a07eee5a82f9b81c1959175281ed1e12e">dumpKvmStateCoProc</a> (uint64_t id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#a3d102e15d4e84df462b8c31ec2f7ee0c">dumpKvmStateVFP</a> (uint64_t id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#ad705a24136d19a3497a77e57888e2111">updateKvmStateCore</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#a322cf85c38b68e9d2b62700eb61797f9">updateKvmStateMisc</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#a2647fd1f3839c4716dcec7ccfb567c33">updateKvmStateCoProc</a> (uint64_t id, bool show_warnings)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#ad423a1f901d535a33ee19130f1892350">updateKvmStateVFP</a> (uint64_t id, bool show_warnings)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#a72bbd13b32502607c6297268cace4868">updateTCStateCore</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#aa29d443c292712c817d1464fba8943d7">updateTCStateMisc</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#a398ea9eff7b6848bc2c92fe43999011d">updateTCStateCoProc</a> (uint64_t id, bool show_warnings)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#a94714d5528a5c80d1e0f9fe250514a07">updateTCStateVFP</a> (uint64_t id, bool show_warnings)</td></tr>
<tr><td colspan="2"><h2>Private 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#af61d21c5b06aff9f758f797b2c8d422f">irqAsserted</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#a980f87872f421bd8c54c0f347ad8bfcc">fiqAsserted</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1vector.html">RegIndexVector</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#ada25a9ee0667e58ed655eec2be09b133">_regIndexList</a></td></tr>
<tr><td colspan="2"><h2>Static Private 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const std::set&lt; uint64_t &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmKvmCPU.html#a0183ebe7a406948461e8b808c5a3677d">invariant_regs</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>説明</h2>
<p>ARM implementation of a KVM-based hardware virtualized CPU. Architecture specific limitations: * LPAE is currently not supported by gem5. We therefore panic if LPAE is enabled when returning to gem5. * The co-processor based interface to the architected timer is unsupported. We can't support this due to limitations in the KVM API on ARM. * M5 ops are currently not supported. This requires either a kernel hack or a memory mapped device that handles the guest&lt;-&gt;<a class="el" href="namespacem5.html">m5</a> interface. </p>
<hr/><h2>型定義</h2>
<a class="anchor" id="acba61563c19ad813c8026d8746e8bded"></a><!-- doxytag: member="ArmKvmCPU::RegIndexVector" ref="acba61563c19ad813c8026d8746e8bded" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classstd_1_1vector.html">std::vector</a>&lt;uint64_t&gt; <a class="el" href="classstd_1_1vector.html">RegIndexVector</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="ab1eb352efa2b1da33f37cf592ffb2b00"></a><!-- doxytag: member="ArmKvmCPU::ArmKvmCPU" ref="ab1eb352efa2b1da33f37cf592ffb2b00" args="(ArmKvmCPUParams *params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classArmKvmCPU_1_1ArmKvmCPU.html">ArmKvmCPU</a> </td>
          <td>(</td>
          <td class="paramtype">ArmKvmCPUParams *&nbsp;</td>
          <td class="paramname"> <em>params</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00245"></a>00245     : <a class="code" href="classBaseKvmCPU.html#a9eb0b030bd0367a335c97b465d98f01c">BaseKvmCPU</a>(params),
<a name="l00246"></a>00246       <a class="code" href="classArmKvmCPU.html#af61d21c5b06aff9f758f797b2c8d422f">irqAsserted</a>(<span class="keyword">false</span>), <a class="code" href="classArmKvmCPU.html#a980f87872f421bd8c54c0f347ad8bfcc">fiqAsserted</a>(<span class="keyword">false</span>)
<a name="l00247"></a>00247 {
<a name="l00248"></a>00248 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5a7b2abd8e0f6124ff58343a788dfc1d"></a><!-- doxytag: member="ArmKvmCPU::~ArmKvmCPU" ref="a5a7b2abd8e0f6124ff58343a788dfc1d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classArmKvmCPU_1_1ArmKvmCPU.html">ArmKvmCPU</a> </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00251"></a>00251 {
<a name="l00252"></a>00252 }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="a9b185ea78411f18604ed826462d010d7"></a><!-- doxytag: member="ArmKvmCPU::decodeCoProcReg" ref="a9b185ea78411f18604ed826462d010d7" args="(uint64_t id) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67">MiscRegIndex</a> decodeCoProcReg </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>id</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00376"></a>00376 {
<a name="l00377"></a>00377     <span class="keyword">const</span> <span class="keywordtype">unsigned</span> cp(<a class="code" href="arm__cpu_8cc.html#ab7db84b63493d5c92fcc91122d06c34c">REG_CP</a>(<span class="keywordtype">id</span>));
<a name="l00378"></a>00378     <span class="keyword">const</span> <span class="keywordtype">bool</span> is_reg32(<a class="code" href="arm__cpu_8cc.html#a3e0331d7bf1a744b32d3191075254941">REG_IS_32BIT</a>(<span class="keywordtype">id</span>));
<a name="l00379"></a>00379     <span class="keyword">const</span> <span class="keywordtype">bool</span> is_reg64(<a class="code" href="arm__cpu_8cc.html#a1097c18e780d75ac054db8c1e53a2657">REG_IS_64BIT</a>(<span class="keywordtype">id</span>));
<a name="l00380"></a>00380 
<a name="l00381"></a>00381     <span class="comment">// CP numbers larger than 15 are reserved for KVM extensions</span>
<a name="l00382"></a>00382     <span class="keywordflow">if</span> (cp &gt; 15)
<a name="l00383"></a>00383         <span class="keywordflow">return</span> <a class="code" href="namespaceAlphaISA.html#a1e522017e015d4c7efd6b2360143aa67a7d1d86545746c83e719e24556985648a">NUM_MISCREGS</a>;
<a name="l00384"></a>00384 
<a name="l00385"></a>00385     <span class="keyword">const</span> <span class="keywordtype">unsigned</span> crm(<a class="code" href="arm__cpu_8cc.html#a99640ed19db5d6085479a4e89d3080f9">REG_CRM</a>(<span class="keywordtype">id</span>));
<a name="l00386"></a>00386     <span class="keyword">const</span> <span class="keywordtype">unsigned</span> crn(<a class="code" href="arm__cpu_8cc.html#a22e520b9dc551177ebb8e775c09973f7">REG_CRN</a>(<span class="keywordtype">id</span>));
<a name="l00387"></a>00387     <span class="keyword">const</span> <span class="keywordtype">unsigned</span> opc1(<a class="code" href="arm__cpu_8cc.html#a7e86f0389e3f4d6f4bd368453c99504e">REG_OPC1</a>(<span class="keywordtype">id</span>));
<a name="l00388"></a>00388     <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="namespaceArmISA.html#a157f37a4869ffa3f5bbfef48efe5cded">opc2</a>(<a class="code" href="arm__cpu_8cc.html#add2f600d92539677b81e95eb878799c2">REG_OPC2</a>(<span class="keywordtype">id</span>));
<a name="l00389"></a>00389 
<a name="l00390"></a>00390     <span class="keywordflow">if</span> (is_reg32) {
<a name="l00391"></a>00391         <span class="keywordflow">switch</span> (cp) {
<a name="l00392"></a>00392           <span class="keywordflow">case</span> 14:
<a name="l00393"></a>00393             <span class="keywordflow">return</span> <a class="code" href="namespaceArmISA.html#a1ba78f25d3c295dcaf5f0303b884d6ca">decodeCP14Reg</a>(crn, opc1, crm, <a class="code" href="namespaceArmISA.html#a157f37a4869ffa3f5bbfef48efe5cded">opc2</a>);
<a name="l00394"></a>00394 
<a name="l00395"></a>00395           <span class="keywordflow">case</span> 15:
<a name="l00396"></a>00396             <span class="keywordflow">return</span> <a class="code" href="namespaceArmISA.html#a8b643abe8290a2784ae985b22abfd308">decodeCP15Reg</a>(crn, opc1, crm, <a class="code" href="namespaceArmISA.html#a157f37a4869ffa3f5bbfef48efe5cded">opc2</a>);
<a name="l00397"></a>00397 
<a name="l00398"></a>00398           <span class="keywordflow">default</span>:
<a name="l00399"></a>00399             <span class="keywordflow">return</span> <a class="code" href="namespaceAlphaISA.html#a1e522017e015d4c7efd6b2360143aa67a7d1d86545746c83e719e24556985648a">NUM_MISCREGS</a>;
<a name="l00400"></a>00400         }
<a name="l00401"></a>00401     } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(is_reg64) {
<a name="l00402"></a>00402         <span class="keywordflow">return</span> <a class="code" href="namespaceAlphaISA.html#a1e522017e015d4c7efd6b2360143aa67a7d1d86545746c83e719e24556985648a">NUM_MISCREGS</a>;
<a name="l00403"></a>00403     } <span class="keywordflow">else</span> {
<a name="l00404"></a>00404         <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;Unhandled register length, register (0x%x) ignored.\n&quot;</span>);
<a name="l00405"></a>00405         <span class="keywordflow">return</span> <a class="code" href="namespaceAlphaISA.html#a1e522017e015d4c7efd6b2360143aa67a7d1d86545746c83e719e24556985648a">NUM_MISCREGS</a>;
<a name="l00406"></a>00406     }
<a name="l00407"></a>00407 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acf6fe05c1274f3c7d8d6b452f193522b"></a><!-- doxytag: member="ArmKvmCPU::decodeVFPCtrlReg" ref="acf6fe05c1274f3c7d8d6b452f193522b" args="(uint64_t id) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67">ArmISA::MiscRegIndex</a> decodeVFPCtrlReg </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>id</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00411"></a>00411 {
<a name="l00412"></a>00412     <span class="keywordflow">if</span> (!<a class="code" href="arm__cpu_8cc.html#a08258a20944d79f2fb268bf6f7beeb95">REG_IS_ARM</a>(<span class="keywordtype">id</span>) || !<a class="code" href="arm__cpu_8cc.html#ad490fb85e238f89a54598782cd4bf50b">REG_IS_VFP</a>(<span class="keywordtype">id</span>) || !<a class="code" href="arm__cpu_8cc.html#a7cda932ae135eadc13a1c81c511b0822">REG_IS_VFP_CTRL</a>(<span class="keywordtype">id</span>))
<a name="l00413"></a>00413         <span class="keywordflow">return</span> <a class="code" href="namespaceAlphaISA.html#a1e522017e015d4c7efd6b2360143aa67a7d1d86545746c83e719e24556985648a">NUM_MISCREGS</a>;
<a name="l00414"></a>00414 
<a name="l00415"></a>00415     <span class="keyword">const</span> <span class="keywordtype">unsigned</span> vfp_reg(<a class="code" href="arm__cpu_8cc.html#ade126f32c8fb662a0d3e2c7bdac569af">REG_VFP_REG</a>(<span class="keywordtype">id</span>));
<a name="l00416"></a>00416     <span class="keywordflow">switch</span> (vfp_reg) {
<a name="l00417"></a>00417       <span class="keywordflow">case</span> KVM_REG_ARM_VFP_FPSID: <span class="keywordflow">return</span> <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a98cf48281e0f816f86237ccbb8bd524a">MISCREG_FPSID</a>;
<a name="l00418"></a>00418       <span class="keywordflow">case</span> KVM_REG_ARM_VFP_FPSCR: <span class="keywordflow">return</span> <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a1254aa2ff6ca5dd334351a1ccff3d125">MISCREG_FPSCR</a>;
<a name="l00419"></a>00419       <span class="keywordflow">case</span> KVM_REG_ARM_VFP_MVFR0: <span class="keywordflow">return</span> <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67aa3b9fd09f344f59bd693e04e9912ff49">MISCREG_MVFR0</a>;
<a name="l00420"></a>00420       <span class="keywordflow">case</span> KVM_REG_ARM_VFP_MVFR1: <span class="keywordflow">return</span> <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67ae23272c98d822ab241aa6e182d364893">MISCREG_MVFR1</a>;
<a name="l00421"></a>00421       <span class="keywordflow">case</span> KVM_REG_ARM_VFP_FPEXC: <span class="keywordflow">return</span> <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a0bbcce3c837c5ba3b54d35fc01fcaae4">MISCREG_FPEXC</a>;
<a name="l00422"></a>00422 
<a name="l00423"></a>00423       <span class="keywordflow">case</span> KVM_REG_ARM_VFP_FPINST:
<a name="l00424"></a>00424       <span class="keywordflow">case</span> KVM_REG_ARM_VFP_FPINST2:
<a name="l00425"></a>00425         <a class="code" href="base_2misc_8hh.html#abb243c15dfbeedf4ae64aa213f4f18c7">warn_once</a>(<span class="stringliteral">&quot;KVM: FPINST not implemented.\n&quot;</span>);
<a name="l00426"></a>00426         <span class="keywordflow">return</span> <a class="code" href="namespaceAlphaISA.html#a1e522017e015d4c7efd6b2360143aa67a7d1d86545746c83e719e24556985648a">NUM_MISCREGS</a>;
<a name="l00427"></a>00427 
<a name="l00428"></a>00428       <span class="keywordflow">default</span>:
<a name="l00429"></a>00429         <span class="keywordflow">return</span> <a class="code" href="namespaceAlphaISA.html#a1e522017e015d4c7efd6b2360143aa67a7d1d86545746c83e719e24556985648a">NUM_MISCREGS</a>;
<a name="l00430"></a>00430     }
<a name="l00431"></a>00431 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="accd2600060dbaee3a3b41aed4034c63c"></a><!-- doxytag: member="ArmKvmCPU::dump" ref="accd2600060dbaee3a3b41aed4034c63c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dump </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Dump the internal state to the terminal. </p>

<p><a class="el" href="classBaseKvmCPU.html#accd2600060dbaee3a3b41aed4034c63c">BaseKvmCPU</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00291"></a>00291 {
<a name="l00292"></a>00292     <a class="code" href="classArmKvmCPU.html#a54d58f77f2887428772599f7ddd8652e">dumpKvmStateCore</a>();
<a name="l00293"></a>00293     <a class="code" href="classArmKvmCPU.html#a7e82213fbf8527640f993114c92f97eb">dumpKvmStateMisc</a>();
<a name="l00294"></a>00294 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a07eee5a82f9b81c1959175281ed1e12e"></a><!-- doxytag: member="ArmKvmCPU::dumpKvmStateCoProc" ref="a07eee5a82f9b81c1959175281ed1e12e" args="(uint64_t id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dumpKvmStateCoProc </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>id</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00523"></a>00523 {
<a name="l00524"></a>00524     assert(<a class="code" href="arm__cpu_8cc.html#a08258a20944d79f2fb268bf6f7beeb95">REG_IS_ARM</a>(<span class="keywordtype">id</span>));
<a name="l00525"></a>00525     assert(<a class="code" href="arm__cpu_8cc.html#ab7db84b63493d5c92fcc91122d06c34c">REG_CP</a>(<span class="keywordtype">id</span>) &lt;= 15);
<a name="l00526"></a>00526 
<a name="l00527"></a>00527     <span class="keywordflow">if</span> (<a class="code" href="arm__cpu_8cc.html#a3e0331d7bf1a744b32d3191075254941">REG_IS_32BIT</a>(<span class="keywordtype">id</span>)) {
<a name="l00528"></a>00528         <span class="comment">// 32-bit co-proc registers</span>
<a name="l00529"></a>00529         <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67">MiscRegIndex</a> idx(<a class="code" href="classArmKvmCPU.html#a9b185ea78411f18604ed826462d010d7">decodeCoProcReg</a>(<span class="keywordtype">id</span>));
<a name="l00530"></a>00530         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a>(<a class="code" href="classBaseKvmCPU.html#abb51d3ccd07e153be4d5982c324a95bc">getOneRegU32</a>(<span class="keywordtype">id</span>));
<a name="l00531"></a>00531 
<a name="l00532"></a>00532         <span class="keywordflow">if</span> (idx != <a class="code" href="namespaceAlphaISA.html#a1e522017e015d4c7efd6b2360143aa67a7d1d86545746c83e719e24556985648a">NUM_MISCREGS</a> &amp;&amp;
<a name="l00533"></a>00533             !(idx &gt;= MISCREG_CP15_UNIMP_START &amp;&amp; idx &lt; MISCREG_CP15_END)) {
<a name="l00534"></a>00534             <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="trace_8hh.html#a166fa10b86d8faa127fb7c78191e3e60">name</a>(<a class="code" href="namespaceArmISA.html#a04c005fb6a06cbd3e27052b373f4dcfc">miscRegName</a>[idx]);
<a name="l00535"></a>00535             <span class="keyword">const</span> <span class="keywordtype">unsigned</span> m5_ne(<a class="code" href="classBaseKvmCPU.html#a4455a4759e69e5ebe68ae7298cbcc37d">tc</a>-&gt;<a class="code" href="classThreadContext.html#a93c9c97261cb7289d5976b8222f70c4c">readMiscRegNoEffect</a>(idx));
<a name="l00536"></a>00536             <span class="keyword">const</span> <span class="keywordtype">unsigned</span> m5_e(<a class="code" href="classBaseKvmCPU.html#a4455a4759e69e5ebe68ae7298cbcc37d">tc</a>-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(idx));
<a name="l00537"></a>00537             <a class="code" href="base_2misc_8hh.html#ae7d790080fa18103d7582effff570b9e">inform</a>(<span class="stringliteral">&quot;CP%i: [CRn: c%i opc1: %.2i CRm: c%i opc2: %i inv: %i]: &quot;</span>
<a name="l00538"></a>00538                    <span class="stringliteral">&quot;[%s]: 0x%x/0x%x\n&quot;</span>,
<a name="l00539"></a>00539                    <a class="code" href="arm__cpu_8cc.html#ab7db84b63493d5c92fcc91122d06c34c">REG_CP</a>(<span class="keywordtype">id</span>), <a class="code" href="arm__cpu_8cc.html#a22e520b9dc551177ebb8e775c09973f7">REG_CRN</a>(<span class="keywordtype">id</span>), <a class="code" href="arm__cpu_8cc.html#a7e86f0389e3f4d6f4bd368453c99504e">REG_OPC1</a>(<span class="keywordtype">id</span>), <a class="code" href="arm__cpu_8cc.html#a99640ed19db5d6085479a4e89d3080f9">REG_CRM</a>(<span class="keywordtype">id</span>),
<a name="l00540"></a>00540                    <a class="code" href="arm__cpu_8cc.html#add2f600d92539677b81e95eb878799c2">REG_OPC2</a>(<span class="keywordtype">id</span>), <a class="code" href="classArmKvmCPU.html#a901923fcf22651d3f67b8c4e0874868f">isInvariantReg</a>(<span class="keywordtype">id</span>),
<a name="l00541"></a>00541                    <a class="code" href="trace_8hh.html#a166fa10b86d8faa127fb7c78191e3e60">name</a>, <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a>, m5_e);
<a name="l00542"></a>00542             <span class="keywordflow">if</span> (m5_e != m5_ne) {
<a name="l00543"></a>00543                 <a class="code" href="base_2misc_8hh.html#ae7d790080fa18103d7582effff570b9e">inform</a>(<span class="stringliteral">&quot;readMiscReg: %x, readMiscRegNoEffect: %x\n&quot;</span>,
<a name="l00544"></a>00544                        m5_e, m5_ne);
<a name="l00545"></a>00545             }
<a name="l00546"></a>00546         } <span class="keywordflow">else</span> {
<a name="l00547"></a>00547             <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="trace_8hh.html#a166fa10b86d8faa127fb7c78191e3e60">name</a>(idx != <a class="code" href="namespaceAlphaISA.html#a1e522017e015d4c7efd6b2360143aa67a7d1d86545746c83e719e24556985648a">NUM_MISCREGS</a> ? <a class="code" href="namespaceArmISA.html#a04c005fb6a06cbd3e27052b373f4dcfc">miscRegName</a>[idx] : <span class="stringliteral">&quot;-&quot;</span>);
<a name="l00548"></a>00548             <a class="code" href="base_2misc_8hh.html#ae7d790080fa18103d7582effff570b9e">inform</a>(<span class="stringliteral">&quot;CP%i: [CRn: c%i opc1: %.2i CRm: c%i opc2: %i inv: %i]: [%s]: &quot;</span>
<a name="l00549"></a>00549                    <span class="stringliteral">&quot;0x%x\n&quot;</span>,
<a name="l00550"></a>00550                    <a class="code" href="arm__cpu_8cc.html#ab7db84b63493d5c92fcc91122d06c34c">REG_CP</a>(<span class="keywordtype">id</span>), <a class="code" href="arm__cpu_8cc.html#a22e520b9dc551177ebb8e775c09973f7">REG_CRN</a>(<span class="keywordtype">id</span>), <a class="code" href="arm__cpu_8cc.html#a7e86f0389e3f4d6f4bd368453c99504e">REG_OPC1</a>(<span class="keywordtype">id</span>), <a class="code" href="arm__cpu_8cc.html#a99640ed19db5d6085479a4e89d3080f9">REG_CRM</a>(<span class="keywordtype">id</span>),
<a name="l00551"></a>00551                    <a class="code" href="arm__cpu_8cc.html#add2f600d92539677b81e95eb878799c2">REG_OPC2</a>(<span class="keywordtype">id</span>), <a class="code" href="classArmKvmCPU.html#a901923fcf22651d3f67b8c4e0874868f">isInvariantReg</a>(<span class="keywordtype">id</span>), <a class="code" href="trace_8hh.html#a166fa10b86d8faa127fb7c78191e3e60">name</a>, <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a>);
<a name="l00552"></a>00552         }
<a name="l00553"></a>00553     } <span class="keywordflow">else</span> {
<a name="l00554"></a>00554         <a class="code" href="base_2misc_8hh.html#ae7d790080fa18103d7582effff570b9e">inform</a>(<span class="stringliteral">&quot;CP%i: [CRn: c%i opc1: %.2i CRm: c%i opc2: %i inv: %i &quot;</span>
<a name="l00555"></a>00555                <span class="stringliteral">&quot;len: 0x%x]: %s\n&quot;</span>,
<a name="l00556"></a>00556                <a class="code" href="arm__cpu_8cc.html#ab7db84b63493d5c92fcc91122d06c34c">REG_CP</a>(<span class="keywordtype">id</span>), <a class="code" href="arm__cpu_8cc.html#a22e520b9dc551177ebb8e775c09973f7">REG_CRN</a>(<span class="keywordtype">id</span>), <a class="code" href="arm__cpu_8cc.html#a7e86f0389e3f4d6f4bd368453c99504e">REG_OPC1</a>(<span class="keywordtype">id</span>), <a class="code" href="arm__cpu_8cc.html#a99640ed19db5d6085479a4e89d3080f9">REG_CRM</a>(<span class="keywordtype">id</span>),
<a name="l00557"></a>00557                <a class="code" href="arm__cpu_8cc.html#add2f600d92539677b81e95eb878799c2">REG_OPC2</a>(<span class="keywordtype">id</span>), <a class="code" href="classArmKvmCPU.html#a901923fcf22651d3f67b8c4e0874868f">isInvariantReg</a>(<span class="keywordtype">id</span>),
<a name="l00558"></a>00558                <a class="code" href="arm__cpu_8cc.html#a4acf47805b45442b26e8b6e79d605c15">EXTRACT_FIELD</a>(<span class="keywordtype">id</span>, KVM_REG_SIZE_MASK, KVM_REG_SIZE_SHIFT),
<a name="l00559"></a>00559                <a class="code" href="classBaseKvmCPU.html#af080be5963a74cfafcfc1db16f294f1a">getAndFormatOneReg</a>(<span class="keywordtype">id</span>));
<a name="l00560"></a>00560     }
<a name="l00561"></a>00561 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a54d58f77f2887428772599f7ddd8652e"></a><!-- doxytag: member="ArmKvmCPU::dumpKvmStateCore" ref="a54d58f77f2887428772599f7ddd8652e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dumpKvmStateCore </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00462"></a>00462 {
<a name="l00463"></a>00463     <span class="comment">/* Print core registers */</span>
<a name="l00464"></a>00464     <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="inorder__dyn__inst_8cc.html#a0c864f905330c0fe3ecc683b7bf8b793">pc</a>(<a class="code" href="classBaseKvmCPU.html#abb51d3ccd07e153be4d5982c324a95bc">getOneRegU32</a>(<a class="code" href="arm__cpu_8cc.html#a8282a39ad86cc69038c3962b8ddbeaf1">REG_CORE32</a>(usr_regs.ARM_pc)));
<a name="l00465"></a>00465     <a class="code" href="base_2misc_8hh.html#ae7d790080fa18103d7582effff570b9e">inform</a>(<span class="stringliteral">&quot;PC: 0x%x\n&quot;</span>, <a class="code" href="inorder__dyn__inst_8cc.html#a0c864f905330c0fe3ecc683b7bf8b793">pc</a>);
<a name="l00466"></a>00466 
<a name="l00467"></a>00467     <span class="keywordflow">for</span> (<span class="keyword">const</span> KvmIntRegInfo *ri(<a class="code" href="classArmKvmCPU.html#a610b9b2e17374a59cb14ab6e1b7c3dd0">kvmIntRegs</a>);
<a name="l00468"></a>00468          ri-&gt;idx != <a class="code" href="namespaceArmISA.html#ae64680ba9fb526106829d6bf92fc791baae068f35aef4de2a5673ad98a5dbcb49">NUM_INTREGS</a>; ++ri) {
<a name="l00469"></a>00469 
<a name="l00470"></a>00470         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a>(<a class="code" href="classBaseKvmCPU.html#abb51d3ccd07e153be4d5982c324a95bc">getOneRegU32</a>(ri-&gt;id));
<a name="l00471"></a>00471         <a class="code" href="base_2misc_8hh.html#ae7d790080fa18103d7582effff570b9e">inform</a>(<span class="stringliteral">&quot;%s: 0x%x\n&quot;</span>, ri-&gt;name, <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a>);
<a name="l00472"></a>00472     }
<a name="l00473"></a>00473 
<a name="l00474"></a>00474     <span class="keywordflow">for</span> (<span class="keyword">const</span> KvmCoreMiscRegInfo *ri(<a class="code" href="classArmKvmCPU.html#a7f2a34be5f2a6e8b6812657f935461cf">kvmCoreMiscRegs</a>);
<a name="l00475"></a>00475          ri-&gt;idx != <a class="code" href="namespaceAlphaISA.html#a1e522017e015d4c7efd6b2360143aa67a7d1d86545746c83e719e24556985648a">NUM_MISCREGS</a>; ++ri) {
<a name="l00476"></a>00476 
<a name="l00477"></a>00477         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a>(<a class="code" href="classBaseKvmCPU.html#abb51d3ccd07e153be4d5982c324a95bc">getOneRegU32</a>(ri-&gt;id));
<a name="l00478"></a>00478         <a class="code" href="base_2misc_8hh.html#ae7d790080fa18103d7582effff570b9e">inform</a>(<span class="stringliteral">&quot;%s: 0x%x\n&quot;</span>, <a class="code" href="namespaceArmISA.html#a04c005fb6a06cbd3e27052b373f4dcfc">miscRegName</a>[ri-&gt;idx], <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a>);
<a name="l00479"></a>00479     }
<a name="l00480"></a>00480 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7e82213fbf8527640f993114c92f97eb"></a><!-- doxytag: member="ArmKvmCPU::dumpKvmStateMisc" ref="a7e82213fbf8527640f993114c92f97eb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dumpKvmStateMisc </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00484"></a>00484 {
<a name="l00485"></a>00485     <span class="comment">/* Print co-processor registers */</span>
<a name="l00486"></a>00486     <span class="keyword">const</span> <a class="code" href="classArmKvmCPU.html#acba61563c19ad813c8026d8746e8bded">RegIndexVector</a> &amp;reg_ids(<a class="code" href="classArmKvmCPU.html#ae852422eea452a5cdcf96e300ec91cc7">getRegList</a>());;
<a name="l00487"></a>00487     <span class="keywordflow">for</span> (RegIndexVector::const_iterator it(reg_ids.begin());
<a name="l00488"></a>00488          it != reg_ids.end(); ++it) {
<a name="l00489"></a>00489         uint64_t <a class="code" href="namespaceSparcISA.html#a2b4cf644f5af9ebaec502fb09986f302">id</a>(*it);
<a name="l00490"></a>00490 
<a name="l00491"></a>00491         <span class="keywordflow">if</span> (<a class="code" href="arm__cpu_8cc.html#a08258a20944d79f2fb268bf6f7beeb95">REG_IS_ARM</a>(<span class="keywordtype">id</span>) &amp;&amp; <a class="code" href="arm__cpu_8cc.html#ab7db84b63493d5c92fcc91122d06c34c">REG_CP</a>(<span class="keywordtype">id</span>) &lt;= 15) {
<a name="l00492"></a>00492             <a class="code" href="classArmKvmCPU.html#a07eee5a82f9b81c1959175281ed1e12e">dumpKvmStateCoProc</a>(<span class="keywordtype">id</span>);
<a name="l00493"></a>00493         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="arm__cpu_8cc.html#a08258a20944d79f2fb268bf6f7beeb95">REG_IS_ARM</a>(<span class="keywordtype">id</span>) &amp;&amp; <a class="code" href="arm__cpu_8cc.html#ad490fb85e238f89a54598782cd4bf50b">REG_IS_VFP</a>(<span class="keywordtype">id</span>)) {
<a name="l00494"></a>00494             <a class="code" href="classArmKvmCPU.html#a3d102e15d4e84df462b8c31ec2f7ee0c">dumpKvmStateVFP</a>(<span class="keywordtype">id</span>);
<a name="l00495"></a>00495         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="arm__cpu_8cc.html#a08258a20944d79f2fb268bf6f7beeb95">REG_IS_ARM</a>(<span class="keywordtype">id</span>) &amp;&amp; <a class="code" href="arm__cpu_8cc.html#a0b799263d3f1d2edd5f83db512267cfe">REG_IS_DEMUX</a>(<span class="keywordtype">id</span>)) {
<a name="l00496"></a>00496             <span class="keywordflow">switch</span> (<span class="keywordtype">id</span> &amp; KVM_REG_ARM_DEMUX_ID_MASK) {
<a name="l00497"></a>00497               <span class="keywordflow">case</span> KVM_REG_ARM_DEMUX_ID_CCSIDR:
<a name="l00498"></a>00498                 <a class="code" href="base_2misc_8hh.html#ae7d790080fa18103d7582effff570b9e">inform</a>(<span class="stringliteral">&quot;CCSIDR [0x%x]: %s\n&quot;</span>,
<a name="l00499"></a>00499                        <a class="code" href="arm__cpu_8cc.html#a4acf47805b45442b26e8b6e79d605c15">EXTRACT_FIELD</a>(<span class="keywordtype">id</span>,
<a name="l00500"></a>00500                                      KVM_REG_ARM_DEMUX_VAL_MASK,
<a name="l00501"></a>00501                                      KVM_REG_ARM_DEMUX_VAL_SHIFT),
<a name="l00502"></a>00502                        <a class="code" href="classBaseKvmCPU.html#af080be5963a74cfafcfc1db16f294f1a">getAndFormatOneReg</a>(<span class="keywordtype">id</span>));
<a name="l00503"></a>00503                 <span class="keywordflow">break</span>;
<a name="l00504"></a>00504               <span class="keywordflow">default</span>:
<a name="l00505"></a>00505                 <a class="code" href="base_2misc_8hh.html#ae7d790080fa18103d7582effff570b9e">inform</a>(<span class="stringliteral">&quot;DEMUX [0x%x, 0x%x]: %s\n&quot;</span>,
<a name="l00506"></a>00506                        <a class="code" href="arm__cpu_8cc.html#a4acf47805b45442b26e8b6e79d605c15">EXTRACT_FIELD</a>(<span class="keywordtype">id</span>,
<a name="l00507"></a>00507                                      KVM_REG_ARM_DEMUX_ID_MASK,
<a name="l00508"></a>00508                                      KVM_REG_ARM_DEMUX_ID_SHIFT),
<a name="l00509"></a>00509                        <a class="code" href="arm__cpu_8cc.html#a4acf47805b45442b26e8b6e79d605c15">EXTRACT_FIELD</a>(<span class="keywordtype">id</span>,
<a name="l00510"></a>00510                                      KVM_REG_ARM_DEMUX_VAL_MASK,
<a name="l00511"></a>00511                                      KVM_REG_ARM_DEMUX_VAL_SHIFT),
<a name="l00512"></a>00512                        <a class="code" href="classBaseKvmCPU.html#af080be5963a74cfafcfc1db16f294f1a">getAndFormatOneReg</a>(<span class="keywordtype">id</span>));
<a name="l00513"></a>00513                 <span class="keywordflow">break</span>;
<a name="l00514"></a>00514             }
<a name="l00515"></a>00515         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="arm__cpu_8cc.html#aa7e91b5148acf5a351d7815e16fa0bf8">REG_IS_CORE</a>(<span class="keywordtype">id</span>)) {
<a name="l00516"></a>00516             <a class="code" href="base_2misc_8hh.html#ae7d790080fa18103d7582effff570b9e">inform</a>(<span class="stringliteral">&quot;0x%x: %s\n&quot;</span>, <span class="keywordtype">id</span>, <a class="code" href="classBaseKvmCPU.html#af080be5963a74cfafcfc1db16f294f1a">getAndFormatOneReg</a>(<span class="keywordtype">id</span>));
<a name="l00517"></a>00517         }
<a name="l00518"></a>00518     }
<a name="l00519"></a>00519 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3d102e15d4e84df462b8c31ec2f7ee0c"></a><!-- doxytag: member="ArmKvmCPU::dumpKvmStateVFP" ref="a3d102e15d4e84df462b8c31ec2f7ee0c" args="(uint64_t id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dumpKvmStateVFP </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>id</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00565"></a>00565 {
<a name="l00566"></a>00566     assert(<a class="code" href="arm__cpu_8cc.html#a08258a20944d79f2fb268bf6f7beeb95">REG_IS_ARM</a>(<span class="keywordtype">id</span>));
<a name="l00567"></a>00567     assert(<a class="code" href="arm__cpu_8cc.html#ad490fb85e238f89a54598782cd4bf50b">REG_IS_VFP</a>(<span class="keywordtype">id</span>));
<a name="l00568"></a>00568 
<a name="l00569"></a>00569     <span class="keywordflow">if</span> (<a class="code" href="arm__cpu_8cc.html#ad051e025a8bffa78ab27e6b465abeaac">REG_IS_VFP_REG</a>(<span class="keywordtype">id</span>)) {
<a name="l00570"></a>00570         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> idx(<span class="keywordtype">id</span> &amp; KVM_REG_ARM_VFP_MASK);
<a name="l00571"></a>00571         <a class="code" href="base_2misc_8hh.html#ae7d790080fa18103d7582effff570b9e">inform</a>(<span class="stringliteral">&quot;VFP reg %i: %s&quot;</span>, idx, <a class="code" href="classBaseKvmCPU.html#af080be5963a74cfafcfc1db16f294f1a">getAndFormatOneReg</a>(<span class="keywordtype">id</span>));
<a name="l00572"></a>00572     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="arm__cpu_8cc.html#a7cda932ae135eadc13a1c81c511b0822">REG_IS_VFP_CTRL</a>(<span class="keywordtype">id</span>)) {
<a name="l00573"></a>00573         <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67">MiscRegIndex</a> idx(<a class="code" href="classArmKvmCPU.html#acf6fe05c1274f3c7d8d6b452f193522b">decodeVFPCtrlReg</a>(<span class="keywordtype">id</span>));
<a name="l00574"></a>00574         <span class="keywordflow">if</span> (idx != <a class="code" href="namespaceAlphaISA.html#a1e522017e015d4c7efd6b2360143aa67a7d1d86545746c83e719e24556985648a">NUM_MISCREGS</a>) {
<a name="l00575"></a>00575             <a class="code" href="base_2misc_8hh.html#ae7d790080fa18103d7582effff570b9e">inform</a>(<span class="stringliteral">&quot;VFP [%s]: %s&quot;</span>, <a class="code" href="namespaceArmISA.html#a04c005fb6a06cbd3e27052b373f4dcfc">miscRegName</a>[idx], <a class="code" href="classBaseKvmCPU.html#af080be5963a74cfafcfc1db16f294f1a">getAndFormatOneReg</a>(<span class="keywordtype">id</span>));
<a name="l00576"></a>00576         } <span class="keywordflow">else</span> {
<a name="l00577"></a>00577             <a class="code" href="base_2misc_8hh.html#ae7d790080fa18103d7582effff570b9e">inform</a>(<span class="stringliteral">&quot;VFP [0x%x]: %s&quot;</span>, <span class="keywordtype">id</span>, <a class="code" href="classBaseKvmCPU.html#af080be5963a74cfafcfc1db16f294f1a">getAndFormatOneReg</a>(<span class="keywordtype">id</span>));
<a name="l00578"></a>00578         }
<a name="l00579"></a>00579     } <span class="keywordflow">else</span> {
<a name="l00580"></a>00580         <a class="code" href="base_2misc_8hh.html#ae7d790080fa18103d7582effff570b9e">inform</a>(<span class="stringliteral">&quot;VFP [0x%x]: %s&quot;</span>, <span class="keywordtype">id</span>, <a class="code" href="classBaseKvmCPU.html#af080be5963a74cfafcfc1db16f294f1a">getAndFormatOneReg</a>(<span class="keywordtype">id</span>));
<a name="l00581"></a>00581     }
<a name="l00582"></a>00582 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8a90fa6e1883cd37fc5cd411a56331a7"></a><!-- doxytag: member="ArmKvmCPU::getRegList" ref="a8a90fa6e1883cd37fc5cd411a56331a7" args="(struct kvm_reg_list &amp;regs) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool getRegList </td>
          <td>(</td>
          <td class="paramtype">struct kvm_reg_list &amp;&nbsp;</td>
          <td class="paramname"> <em>regs</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get a list of registers supported by <a class="el" href="classBaseKvmCPU.html#ab5a47c64ebf5a4de2539c6f71f7acc51">getOneReg()</a> and <a class="el" href="classBaseKvmCPU.html#ad96695f9596f808056054f3c2026b818">setOneReg()</a>.</p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>False if the number of elements allocated in the list is too small to hold the complete register list (the required value is written into n in this case). True on success. </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00447"></a>00447 {
<a name="l00448"></a>00448     <span class="keywordflow">if</span> (<a class="code" href="group__KvmIoctl.html#ga106fe09b5e87d6c14884f8ffff7b338a">ioctl</a>(KVM_GET_REG_LIST, (<span class="keywordtype">void</span> *)&amp;regs) == -1) {
<a name="l00449"></a>00449         <span class="keywordflow">if</span> (errno == E2BIG) {
<a name="l00450"></a>00450             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00451"></a>00451         } <span class="keywordflow">else</span> {
<a name="l00452"></a>00452             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;KVM: Failed to get vCPU register list (errno: %i)\n&quot;</span>,
<a name="l00453"></a>00453                   errno);
<a name="l00454"></a>00454         }
<a name="l00455"></a>00455     } <span class="keywordflow">else</span> {
<a name="l00456"></a>00456         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00457"></a>00457     }
<a name="l00458"></a>00458 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae852422eea452a5cdcf96e300ec91cc7"></a><!-- doxytag: member="ArmKvmCPU::getRegList" ref="ae852422eea452a5cdcf96e300ec91cc7" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classstd_1_1vector.html">ArmKvmCPU::RegIndexVector</a> &amp; getRegList </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get a list of registers supported by <a class="el" href="classBaseKvmCPU.html#ab5a47c64ebf5a4de2539c6f71f7acc51">getOneReg()</a> and <a class="el" href="classBaseKvmCPU.html#ad96695f9596f808056054f3c2026b818">setOneReg()</a>. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00336"></a>00336 {
<a name="l00337"></a>00337     <span class="keywordflow">if</span> (<a class="code" href="classArmKvmCPU.html#ada25a9ee0667e58ed655eec2be09b133">_regIndexList</a>.size() == 0) {
<a name="l00338"></a>00338         std::unique_ptr&lt;struct kvm_reg_list&gt; regs;
<a name="l00339"></a>00339         uint64_t <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>(1);
<a name="l00340"></a>00340 
<a name="l00341"></a>00341         <span class="keywordflow">do</span> {
<a name="l00342"></a>00342             <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt;&lt;= 1;
<a name="l00343"></a>00343             regs.reset((<span class="keyword">struct</span> kvm_reg_list *)
<a name="l00344"></a>00344                        <span class="keyword">operator</span> <span class="keyword">new</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> kvm_reg_list) +
<a name="l00345"></a>00345                                     <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> * <span class="keyword">sizeof</span>(uint64_t)));
<a name="l00346"></a>00346             regs-&gt;n = <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>;
<a name="l00347"></a>00347         } <span class="keywordflow">while</span> (!<a class="code" href="classArmKvmCPU.html#ae852422eea452a5cdcf96e300ec91cc7">getRegList</a>(*regs));
<a name="l00348"></a>00348         <a class="code" href="classArmKvmCPU.html#ada25a9ee0667e58ed655eec2be09b133">_regIndexList</a>.assign(regs-&gt;reg,
<a name="l00349"></a>00349                              regs-&gt;reg + regs-&gt;n);
<a name="l00350"></a>00350     }
<a name="l00351"></a>00351 
<a name="l00352"></a>00352     <span class="keywordflow">return</span> <a class="code" href="classArmKvmCPU.html#ada25a9ee0667e58ed655eec2be09b133">_regIndexList</a>;
<a name="l00353"></a>00353 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a901923fcf22651d3f67b8c4e0874868f"></a><!-- doxytag: member="ArmKvmCPU::isInvariantReg" ref="a901923fcf22651d3f67b8c4e0874868f" args="(uint64_t id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool isInvariantReg </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>id</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Determine if a register is invariant.</p>
<p>Some registers must have the same value in both the host and the guest. Such registers are referred to as "invariant" registers in KVM. This is a restriction imposed by KVM as having different values in ID registers (e.g., the cache identification registers) would confuse the guest kernel. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00435"></a>00435 {
<a name="l00436"></a>00436     <span class="comment">/* Mask away the value field from multiplexed registers, we assume</span>
<a name="l00437"></a>00437 <span class="comment">     * that entire groups of multiplexed registers can be treated as</span>
<a name="l00438"></a>00438 <span class="comment">     * invariant. */</span>
<a name="l00439"></a>00439     <span class="keywordflow">if</span> (<a class="code" href="arm__cpu_8cc.html#a08258a20944d79f2fb268bf6f7beeb95">REG_IS_ARM</a>(<span class="keywordtype">id</span>) &amp;&amp; <a class="code" href="arm__cpu_8cc.html#a0b799263d3f1d2edd5f83db512267cfe">REG_IS_DEMUX</a>(<span class="keywordtype">id</span>))
<a name="l00440"></a>00440         <span class="keywordtype">id</span> &amp;= ~KVM_REG_ARM_DEMUX_VAL_MASK;
<a name="l00441"></a>00441 
<a name="l00442"></a>00442     <span class="keywordflow">return</span> <a class="code" href="classArmKvmCPU.html#a0183ebe7a406948461e8b808c5a3677d">invariant_regs</a>.find(<span class="keywordtype">id</span>) != <a class="code" href="classArmKvmCPU.html#a0183ebe7a406948461e8b808c5a3677d">invariant_regs</a>.end();
<a name="l00443"></a>00443 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a019059b30bdbbd0e5b4a2e41794f5e57"></a><!-- doxytag: member="ArmKvmCPU::kvmArmVCpuInit" ref="a019059b30bdbbd0e5b4a2e41794f5e57" args="(const struct kvm_vcpu_init &amp;init)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvmArmVCpuInit </td>
          <td>(</td>
          <td class="paramtype">const struct kvm_vcpu_init &amp;&nbsp;</td>
          <td class="paramname"> <em>init</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00369"></a>00369 {
<a name="l00370"></a>00370     <span class="keywordflow">if</span> (<a class="code" href="group__KvmIoctl.html#ga106fe09b5e87d6c14884f8ffff7b338a">ioctl</a>(KVM_ARM_VCPU_INIT, (<span class="keywordtype">void</span> *)&amp;<a class="code" href="classBaseKvmCPU.html#a02fd73d861ef2e4aabb38c0c9ff82947">init</a>) == -1)
<a name="l00371"></a>00371         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;KVM: Failed to initialize vCPU\n&quot;</span>);
<a name="l00372"></a>00372 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2b5088861eb66dc69fc8dc2f39f6174e"></a><!-- doxytag: member="ArmKvmCPU::kvmArmVCpuInit" ref="a2b5088861eb66dc69fc8dc2f39f6174e" args="(uint32_t target)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvmArmVCpuInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>target</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00357"></a>00357 {
<a name="l00358"></a>00358     <span class="keyword">struct </span>kvm_vcpu_init <a class="code" href="classBaseKvmCPU.html#a02fd73d861ef2e4aabb38c0c9ff82947">init</a>;
<a name="l00359"></a>00359 
<a name="l00360"></a>00360     memset(&amp;<a class="code" href="classBaseKvmCPU.html#a02fd73d861ef2e4aabb38c0c9ff82947">init</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="classBaseKvmCPU.html#a02fd73d861ef2e4aabb38c0c9ff82947">init</a>));
<a name="l00361"></a>00361 
<a name="l00362"></a>00362     <a class="code" href="classBaseKvmCPU.html#a02fd73d861ef2e4aabb38c0c9ff82947">init</a>.target = target;
<a name="l00363"></a>00363 
<a name="l00364"></a>00364     <a class="code" href="classArmKvmCPU.html#a2b5088861eb66dc69fc8dc2f39f6174e">kvmArmVCpuInit</a>(<a class="code" href="classBaseKvmCPU.html#a02fd73d861ef2e4aabb38c0c9ff82947">init</a>);
<a name="l00365"></a>00365 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aed3dbd0c0bf26d82ee56367a3f350506"></a><!-- doxytag: member="ArmKvmCPU::kvmRun" ref="aed3dbd0c0bf26d82ee56367a3f350506" args="(Tick ticks)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> kvmRun </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td>
          <td class="paramname"> <em>ticks</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classRequest.html">Request</a> KVM to run the guest for a given number of ticks. The method returns the approximate number of ticks executed.</p>
<dl class="note"><dt><b>覚え書き:</b></dt><dd>The returned number of ticks can be both larger or smaller than the requested number of ticks. A smaller number can, for example, occur when the guest executes MMIO. A larger number is typically due to performance counter inaccuracies.</dd>
<dd>
This method is virtual in order to allow implementations to check for architecture specific events (e.g., interrupts) before entering the VM.</dd>
<dd>
It is the response of the caller (normally <a class="el" href="classBaseKvmCPU.html#a873dd91783f9efb4a590aded1f70d6b0">tick()</a>) to make sure that the KVM state is synchronized and that the TC is invalidated after entering KVM.</dd>
<dd>
This method does not normally cause any state transitions. However, if it may suspend the CPU by suspending the thread, which leads to a transition to the Idle state. In such a case, kvm <em>must not</em> be entered.</dd></dl>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ticks</em>&nbsp;</td><td>Number of ticks to execute, set to 0 to exit immediately after finishing pending operations. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>戻り値:</b></dt><dd>Number of ticks executed (see note) </dd></dl>

<p><a class="el" href="classBaseKvmCPU.html#aed3dbd0c0bf26d82ee56367a3f350506">BaseKvmCPU</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00271"></a>00271 {
<a name="l00272"></a>00272     <span class="keywordtype">bool</span> simFIQ(<a class="code" href="classBaseCPU.html#abb9c3a7eae9af33c74d2c7da98a171bd">interrupts</a>-&gt;checkRaw(<a class="code" href="namespaceArmISA.html#acdad6d81b9a94402ce3979d531ae4f40a1658cced312e183e2e203cf8763187cb">INT_FIQ</a>));
<a name="l00273"></a>00273     <span class="keywordtype">bool</span> simIRQ(<a class="code" href="classBaseCPU.html#abb9c3a7eae9af33c74d2c7da98a171bd">interrupts</a>-&gt;checkRaw(<a class="code" href="namespaceArmISA.html#acdad6d81b9a94402ce3979d531ae4f40add353561660da2611ad8b75f3b07d6fa">INT_IRQ</a>));
<a name="l00274"></a>00274 
<a name="l00275"></a>00275     <span class="keywordflow">if</span> (<a class="code" href="classArmKvmCPU.html#a980f87872f421bd8c54c0f347ad8bfcc">fiqAsserted</a> != simFIQ) {
<a name="l00276"></a>00276         <a class="code" href="classArmKvmCPU.html#a980f87872f421bd8c54c0f347ad8bfcc">fiqAsserted</a> = simFIQ;
<a name="l00277"></a>00277         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(KvmInt, <span class="stringliteral">&quot;KVM: Update FIQ state: %i\n&quot;</span>, simFIQ);
<a name="l00278"></a>00278         <a class="code" href="classBaseKvmCPU.html#a6b8ecd9ec419f0cbe3c1047be643fe08">vm</a>.<a class="code" href="group__KvmInterrupts.html#ga5037b917c47fff611ecdd5b547655284">setIRQLine</a>(<a class="code" href="arm__cpu_8cc.html#a6f3141c5d3bd5102d152524db35d1ff1">INTERRUPT_VCPU_FIQ</a>(<a class="code" href="classBaseKvmCPU.html#ac52bdf6886dcfd53068633de9ed83184">vcpuID</a>), simFIQ);
<a name="l00279"></a>00279     }
<a name="l00280"></a>00280     <span class="keywordflow">if</span> (<a class="code" href="classArmKvmCPU.html#af61d21c5b06aff9f758f797b2c8d422f">irqAsserted</a> != simIRQ) {
<a name="l00281"></a>00281         <a class="code" href="classArmKvmCPU.html#af61d21c5b06aff9f758f797b2c8d422f">irqAsserted</a> = simIRQ;
<a name="l00282"></a>00282         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(KvmInt, <span class="stringliteral">&quot;KVM: Update IRQ state: %i\n&quot;</span>, simIRQ);
<a name="l00283"></a>00283         <a class="code" href="classBaseKvmCPU.html#a6b8ecd9ec419f0cbe3c1047be643fe08">vm</a>.<a class="code" href="group__KvmInterrupts.html#ga5037b917c47fff611ecdd5b547655284">setIRQLine</a>(<a class="code" href="arm__cpu_8cc.html#a4ba9838d143c2908d0df30aee7538146">INTERRUPT_VCPU_IRQ</a>(<a class="code" href="classBaseKvmCPU.html#ac52bdf6886dcfd53068633de9ed83184">vcpuID</a>), simIRQ);
<a name="l00284"></a>00284     }
<a name="l00285"></a>00285 
<a name="l00286"></a>00286     <span class="keywordflow">return</span> <a class="code" href="classArmKvmCPU.html#aed3dbd0c0bf26d82ee56367a3f350506">BaseKvmCPU::kvmRun</a>(ticks);
<a name="l00287"></a>00287 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac0b773030a2340b7bdac78ccc7227449"></a><!-- doxytag: member="ArmKvmCPU::onKvmExitHypercall" ref="ac0b773030a2340b7bdac78ccc7227449" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> onKvmExitHypercall </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00316"></a>00316 {
<a name="l00317"></a>00317     <a class="code" href="classThreadContext.html">ThreadContext</a> *<a class="code" href="classBaseKvmCPU.html#a4455a4759e69e5ebe68ae7298cbcc37d">tc</a>(<a class="code" href="classBaseKvmCPU.html#a2199ea70043ddde97c86e49a656b7ba9">getContext</a>(0));
<a name="l00318"></a>00318     <span class="keyword">const</span> <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> reg_ip(<a class="code" href="classBaseKvmCPU.html#a4455a4759e69e5ebe68ae7298cbcc37d">tc</a>-&gt;<a class="code" href="classThreadContext.html#aebc14d23082a9095e0f641a6c5c8b083">readIntRegFlat</a>(<a class="code" href="namespaceArmISA.html#ae64680ba9fb526106829d6bf92fc791ba3f5e7c969c847f91714c4f59511ec1c2">INTREG_R12</a>));
<a name="l00319"></a>00319     <span class="keyword">const</span> uint8_t func((reg_ip &gt;&gt; 8) &amp; 0xFF);
<a name="l00320"></a>00320     <span class="keyword">const</span> uint8_t subfunc(reg_ip &amp; 0xFF);
<a name="l00321"></a>00321 
<a name="l00322"></a>00322     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classKvm.html">Kvm</a>, <span class="stringliteral">&quot;KVM Hypercall: 0x%x/0x%x\n&quot;</span>, func, subfunc);
<a name="l00323"></a>00323     <span class="keyword">const</span> uint64_t ret(<a class="code" href="namespacePseudoInst.html#a469ba8e314952a0076e086dee22ea6de">PseudoInst::pseudoInst</a>(<a class="code" href="classBaseKvmCPU.html#a2199ea70043ddde97c86e49a656b7ba9">getContext</a>(0), func, subfunc));
<a name="l00324"></a>00324 
<a name="l00325"></a>00325     <span class="comment">// Just set the return value using the KVM API instead of messing</span>
<a name="l00326"></a>00326     <span class="comment">// with the context. We could have used the context, but that</span>
<a name="l00327"></a>00327     <span class="comment">// would have required us to request a full context sync.</span>
<a name="l00328"></a>00328     <a class="code" href="classBaseKvmCPU.html#ad96695f9596f808056054f3c2026b818">setOneReg</a>(<a class="code" href="arm__cpu_8cc.html#a8282a39ad86cc69038c3962b8ddbeaf1">REG_CORE32</a>(usr_regs.ARM_r0), ret &amp; 0xFFFFFFFF);
<a name="l00329"></a>00329     <a class="code" href="classBaseKvmCPU.html#ad96695f9596f808056054f3c2026b818">setOneReg</a>(<a class="code" href="arm__cpu_8cc.html#a8282a39ad86cc69038c3962b8ddbeaf1">REG_CORE32</a>(usr_regs.ARM_r1), (ret &gt;&gt; 32) &amp; 0xFFFFFFFF);
<a name="l00330"></a>00330 
<a name="l00331"></a>00331     <span class="keywordflow">return</span> 0;
<a name="l00332"></a>00332 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aecc7d8debf54990ffeaaed5bac7d7d81"></a><!-- doxytag: member="ArmKvmCPU::startup" ref="aecc7d8debf54990ffeaaed5bac7d7d81" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void startup </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classBaseKvmCPU.html#aecc7d8debf54990ffeaaed5bac7d7d81">BaseKvmCPU</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00256"></a>00256 {
<a name="l00257"></a>00257     <a class="code" href="classArmKvmCPU.html#aecc7d8debf54990ffeaaed5bac7d7d81">BaseKvmCPU::startup</a>();
<a name="l00258"></a>00258 
<a name="l00259"></a>00259     <span class="comment">/* TODO: This needs to be moved when we start to support VMs with</span>
<a name="l00260"></a>00260 <span class="comment">     * multiple threads since kvmArmVCpuInit requires that all CPUs in</span>
<a name="l00261"></a>00261 <span class="comment">     * the VM have been created.</span>
<a name="l00262"></a>00262 <span class="comment">     */</span>
<a name="l00263"></a>00263     <span class="comment">/* TODO: The CPU type needs to be configurable once KVM on ARM</span>
<a name="l00264"></a>00264 <span class="comment">     * starts to support more CPUs.</span>
<a name="l00265"></a>00265 <span class="comment">     */</span>
<a name="l00266"></a>00266     <a class="code" href="classArmKvmCPU.html#a2b5088861eb66dc69fc8dc2f39f6174e">kvmArmVCpuInit</a>(KVM_ARM_TARGET_CORTEX_A15);
<a name="l00267"></a>00267 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a93c6e8c82dfb63c7039f0cbf064fae5d"></a><!-- doxytag: member="ArmKvmCPU::updateKvmState" ref="a93c6e8c82dfb63c7039f0cbf064fae5d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateKvmState </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Update the KVM state from the current thread context</p>
<p>The base CPU calls this method before starting the guest CPU when the contextDirty flag is set. The architecture dependent CPU implementation is expected to update all guest state (registers, special registers, and FPU state). </p>

<p><a class="el" href="classBaseKvmCPU.html#a48817be7bf03ef44cc5114ecf4df9b27">BaseKvmCPU</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00298"></a>00298 {
<a name="l00299"></a>00299     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(KvmContext, <span class="stringliteral">&quot;Updating KVM state...\n&quot;</span>);
<a name="l00300"></a>00300 
<a name="l00301"></a>00301     <a class="code" href="classArmKvmCPU.html#ad705a24136d19a3497a77e57888e2111">updateKvmStateCore</a>();
<a name="l00302"></a>00302     <a class="code" href="classArmKvmCPU.html#a322cf85c38b68e9d2b62700eb61797f9">updateKvmStateMisc</a>();
<a name="l00303"></a>00303 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2647fd1f3839c4716dcec7ccfb567c33"></a><!-- doxytag: member="ArmKvmCPU::updateKvmStateCoProc" ref="a2647fd1f3839c4716dcec7ccfb567c33" args="(uint64_t id, bool show_warnings)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateKvmStateCoProc </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>show_warnings</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00650"></a>00650 {
<a name="l00651"></a>00651     <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67">MiscRegIndex</a> <a class="code" href="namespaceX86ISA.html#aeeb02ad833ab76f3430553ef93213a6b">reg</a>(<a class="code" href="classArmKvmCPU.html#a9b185ea78411f18604ed826462d010d7">decodeCoProcReg</a>(<span class="keywordtype">id</span>));
<a name="l00652"></a>00652 
<a name="l00653"></a>00653     assert(<a class="code" href="arm__cpu_8cc.html#a08258a20944d79f2fb268bf6f7beeb95">REG_IS_ARM</a>(<span class="keywordtype">id</span>));
<a name="l00654"></a>00654     assert(<a class="code" href="arm__cpu_8cc.html#ab7db84b63493d5c92fcc91122d06c34c">REG_CP</a>(<span class="keywordtype">id</span>) &lt;= 15);
<a name="l00655"></a>00655 
<a name="l00656"></a>00656     <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="arm__cpu_8cc.html#add9a7764c265a8eb64db9707d7fe52e3">KVM_REG64_TTBR0</a> || <span class="keywordtype">id</span> == <a class="code" href="arm__cpu_8cc.html#aca634800fd8c8189f4cb5577c3f59f6e">KVM_REG64_TTBR1</a>) {
<a name="l00657"></a>00657         <span class="comment">// HACK HACK HACK: Workaround for 64-bit TTBRx</span>
<a name="l00658"></a>00658         <a class="code" href="namespaceX86ISA.html#aeeb02ad833ab76f3430553ef93213a6b">reg</a> = (<span class="keywordtype">id</span> == <a class="code" href="arm__cpu_8cc.html#add9a7764c265a8eb64db9707d7fe52e3">KVM_REG64_TTBR0</a> ? <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67af04fed84f7396af659248bb67d59cf57">MISCREG_TTBR0</a> : <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a8fcade2139fd8facbbeefb69cc2ad774">MISCREG_TTBR1</a>);
<a name="l00659"></a>00659         <span class="keywordflow">if</span> (show_warnings)
<a name="l00660"></a>00660             <a class="code" href="base_2misc_8hh.html#a3ac67e8755a9cc9c3bf9e84e0f221458">hack</a>(<span class="stringliteral">&quot;KVM: 64-bit TTBBRx workaround\n&quot;</span>);
<a name="l00661"></a>00661     }
<a name="l00662"></a>00662 
<a name="l00663"></a>00663     <span class="keywordflow">if</span> (<a class="code" href="namespaceX86ISA.html#aeeb02ad833ab76f3430553ef93213a6b">reg</a> == <a class="code" href="namespaceAlphaISA.html#a1e522017e015d4c7efd6b2360143aa67a7d1d86545746c83e719e24556985648a">NUM_MISCREGS</a>) {
<a name="l00664"></a>00664         <span class="keywordflow">if</span> (show_warnings) {
<a name="l00665"></a>00665             <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;KVM: Ignoring unknown KVM co-processor register (0x%.8x):\n&quot;</span>,
<a name="l00666"></a>00666                  <span class="keywordtype">id</span>);
<a name="l00667"></a>00667             <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;\t0x%x: [CP: %i 64: %i CRn: c%i opc1: %.2i CRm: c%i&quot;</span>
<a name="l00668"></a>00668                  <span class="stringliteral">&quot; opc2: %i]\n&quot;</span>,
<a name="l00669"></a>00669                  <span class="keywordtype">id</span>, <a class="code" href="arm__cpu_8cc.html#ab7db84b63493d5c92fcc91122d06c34c">REG_CP</a>(<span class="keywordtype">id</span>), <a class="code" href="arm__cpu_8cc.html#a1097c18e780d75ac054db8c1e53a2657">REG_IS_64BIT</a>(<span class="keywordtype">id</span>), <a class="code" href="arm__cpu_8cc.html#a22e520b9dc551177ebb8e775c09973f7">REG_CRN</a>(<span class="keywordtype">id</span>),
<a name="l00670"></a>00670                  <a class="code" href="arm__cpu_8cc.html#a7e86f0389e3f4d6f4bd368453c99504e">REG_OPC1</a>(<span class="keywordtype">id</span>), <a class="code" href="arm__cpu_8cc.html#a99640ed19db5d6085479a4e89d3080f9">REG_CRM</a>(<span class="keywordtype">id</span>), <a class="code" href="arm__cpu_8cc.html#add2f600d92539677b81e95eb878799c2">REG_OPC2</a>(<span class="keywordtype">id</span>));
<a name="l00671"></a>00671         }
<a name="l00672"></a>00672     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespaceX86ISA.html#aeeb02ad833ab76f3430553ef93213a6b">reg</a> &gt;= MISCREG_CP15_UNIMP_START &amp;&amp; <a class="code" href="namespaceX86ISA.html#aeeb02ad833ab76f3430553ef93213a6b">reg</a> &lt; MISCREG_CP15_END) {
<a name="l00673"></a>00673         <span class="keywordflow">if</span> (show_warnings)
<a name="l00674"></a>00674             <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;KVM: Co-processor reg. %s not implemented by gem5.\n&quot;</span>,
<a name="l00675"></a>00675                  <a class="code" href="namespaceArmISA.html#a04c005fb6a06cbd3e27052b373f4dcfc">miscRegName</a>[<a class="code" href="namespaceX86ISA.html#aeeb02ad833ab76f3430553ef93213a6b">reg</a>]);
<a name="l00676"></a>00676     } <span class="keywordflow">else</span> {
<a name="l00677"></a>00677         <a class="code" href="classBaseKvmCPU.html#ad96695f9596f808056054f3c2026b818">setOneReg</a>(<span class="keywordtype">id</span>, <a class="code" href="classBaseKvmCPU.html#a4455a4759e69e5ebe68ae7298cbcc37d">tc</a>-&gt;<a class="code" href="classThreadContext.html#a93c9c97261cb7289d5976b8222f70c4c">readMiscRegNoEffect</a>(<a class="code" href="namespaceX86ISA.html#aeeb02ad833ab76f3430553ef93213a6b">reg</a>));
<a name="l00678"></a>00678     }
<a name="l00679"></a>00679 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad705a24136d19a3497a77e57888e2111"></a><!-- doxytag: member="ArmKvmCPU::updateKvmStateCore" ref="ad705a24136d19a3497a77e57888e2111" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateKvmStateCore </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00586"></a>00586 {
<a name="l00587"></a>00587     <span class="keywordflow">for</span> (<span class="keyword">const</span> KvmIntRegInfo *ri(<a class="code" href="classArmKvmCPU.html#a610b9b2e17374a59cb14ab6e1b7c3dd0">kvmIntRegs</a>);
<a name="l00588"></a>00588          ri-&gt;idx != <a class="code" href="namespaceArmISA.html#ae64680ba9fb526106829d6bf92fc791baae068f35aef4de2a5673ad98a5dbcb49">NUM_INTREGS</a>; ++ri) {
<a name="l00589"></a>00589 
<a name="l00590"></a>00590         uint64_t <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a>(<a class="code" href="classBaseKvmCPU.html#a4455a4759e69e5ebe68ae7298cbcc37d">tc</a>-&gt;<a class="code" href="classThreadContext.html#aebc14d23082a9095e0f641a6c5c8b083">readIntRegFlat</a>(ri-&gt;idx));
<a name="l00591"></a>00591         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(KvmContext, <span class="stringliteral">&quot;kvm(%s) := 0x%x\n&quot;</span>, ri-&gt;name, <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a>);
<a name="l00592"></a>00592         <a class="code" href="classBaseKvmCPU.html#ad96695f9596f808056054f3c2026b818">setOneReg</a>(ri-&gt;id, <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a>);
<a name="l00593"></a>00593     }
<a name="l00594"></a>00594 
<a name="l00595"></a>00595     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(KvmContext, <span class="stringliteral">&quot;kvm(PC) := 0x%x\n&quot;</span>, <a class="code" href="classBaseKvmCPU.html#a4455a4759e69e5ebe68ae7298cbcc37d">tc</a>-&gt;<a class="code" href="classThreadContext.html#a899644592f5027a7951cfd87b1c548a2">instAddr</a>());
<a name="l00596"></a>00596     <a class="code" href="classBaseKvmCPU.html#ad96695f9596f808056054f3c2026b818">setOneReg</a>(<a class="code" href="arm__cpu_8cc.html#a8282a39ad86cc69038c3962b8ddbeaf1">REG_CORE32</a>(usr_regs.ARM_pc), <a class="code" href="classBaseKvmCPU.html#a4455a4759e69e5ebe68ae7298cbcc37d">tc</a>-&gt;<a class="code" href="classThreadContext.html#a899644592f5027a7951cfd87b1c548a2">instAddr</a>());
<a name="l00597"></a>00597 
<a name="l00598"></a>00598     <span class="keywordflow">for</span> (<span class="keyword">const</span> KvmCoreMiscRegInfo *ri(<a class="code" href="classArmKvmCPU.html#a7f2a34be5f2a6e8b6812657f935461cf">kvmCoreMiscRegs</a>);
<a name="l00599"></a>00599          ri-&gt;idx != <a class="code" href="namespaceAlphaISA.html#a1e522017e015d4c7efd6b2360143aa67a7d1d86545746c83e719e24556985648a">NUM_MISCREGS</a>; ++ri) {
<a name="l00600"></a>00600 
<a name="l00601"></a>00601         uint64_t <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a>(<a class="code" href="classBaseKvmCPU.html#a4455a4759e69e5ebe68ae7298cbcc37d">tc</a>-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(ri-&gt;idx));
<a name="l00602"></a>00602         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(KvmContext, <span class="stringliteral">&quot;kvm(%s) := 0x%x\n&quot;</span>, ri-&gt;name, <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a>);
<a name="l00603"></a>00603         <a class="code" href="classBaseKvmCPU.html#ad96695f9596f808056054f3c2026b818">setOneReg</a>(ri-&gt;id, <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a>);
<a name="l00604"></a>00604     }
<a name="l00605"></a>00605 
<a name="l00606"></a>00606     <span class="keywordflow">if</span> (<a class="code" href="trace_8hh.html#af76c9f7776aade1bf9d7dfa8a0c6b341">DTRACE</a>(KvmContext))
<a name="l00607"></a>00607         <a class="code" href="classArmKvmCPU.html#a54d58f77f2887428772599f7ddd8652e">dumpKvmStateCore</a>();
<a name="l00608"></a>00608 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a322cf85c38b68e9d2b62700eb61797f9"></a><!-- doxytag: member="ArmKvmCPU::updateKvmStateMisc" ref="a322cf85c38b68e9d2b62700eb61797f9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateKvmStateMisc </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00612"></a>00612 {
<a name="l00613"></a>00613     <span class="keyword">static</span> <span class="keywordtype">bool</span> warned(<span class="keyword">false</span>); <span class="comment">// We can&apos;t use warn_once since we want</span>
<a name="l00614"></a>00614                                <span class="comment">// to show /all/ registers</span>
<a name="l00615"></a>00615 
<a name="l00616"></a>00616     <span class="keyword">const</span> <a class="code" href="classArmKvmCPU.html#acba61563c19ad813c8026d8746e8bded">RegIndexVector</a> &amp;regs(<a class="code" href="classArmKvmCPU.html#ae852422eea452a5cdcf96e300ec91cc7">getRegList</a>());
<a name="l00617"></a>00617 
<a name="l00618"></a>00618     <span class="keywordflow">for</span> (RegIndexVector::const_iterator it(regs.begin());
<a name="l00619"></a>00619          it != regs.end();
<a name="l00620"></a>00620          ++it) {
<a name="l00621"></a>00621 
<a name="l00622"></a>00622         <span class="keywordflow">if</span> (!<a class="code" href="arm__cpu_8cc.html#a08258a20944d79f2fb268bf6f7beeb95">REG_IS_ARM</a>(*it)) {
<a name="l00623"></a>00623             <span class="keywordflow">if</span> (!warned)
<a name="l00624"></a>00624                 <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;Skipping non-ARM register: 0x%x\n&quot;</span>, *it);
<a name="l00625"></a>00625         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classArmKvmCPU.html#a901923fcf22651d3f67b8c4e0874868f">isInvariantReg</a>(*it)) {
<a name="l00626"></a>00626             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classKvm.html">Kvm</a>, <span class="stringliteral">&quot;Skipping invariant register: 0x%x\n&quot;</span>, *it);
<a name="l00627"></a>00627         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="arm__cpu_8cc.html#aa7e91b5148acf5a351d7815e16fa0bf8">REG_IS_CORE</a>(*it)) {
<a name="l00628"></a>00628             <span class="comment">// Core registers are handled in updateKvmStateCore</span>
<a name="l00629"></a>00629             <span class="keywordflow">continue</span>;
<a name="l00630"></a>00630         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="arm__cpu_8cc.html#ab7db84b63493d5c92fcc91122d06c34c">REG_CP</a>(*it) &lt;= 15) {
<a name="l00631"></a>00631             <a class="code" href="classArmKvmCPU.html#a2647fd1f3839c4716dcec7ccfb567c33">updateKvmStateCoProc</a>(*it, !warned);
<a name="l00632"></a>00632         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="arm__cpu_8cc.html#ad490fb85e238f89a54598782cd4bf50b">REG_IS_VFP</a>(*it)) {
<a name="l00633"></a>00633             <a class="code" href="classArmKvmCPU.html#ad423a1f901d535a33ee19130f1892350">updateKvmStateVFP</a>(*it, !warned);
<a name="l00634"></a>00634         } <span class="keywordflow">else</span> {
<a name="l00635"></a>00635             <span class="keywordflow">if</span> (!warned) {
<a name="l00636"></a>00636                 <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;Skipping register with unknown CP (%i) id: 0x%x\n&quot;</span>,
<a name="l00637"></a>00637                      <a class="code" href="arm__cpu_8cc.html#ab7db84b63493d5c92fcc91122d06c34c">REG_CP</a>(*it), *it);
<a name="l00638"></a>00638             }
<a name="l00639"></a>00639         }
<a name="l00640"></a>00640 
<a name="l00641"></a>00641     }
<a name="l00642"></a>00642 
<a name="l00643"></a>00643     warned = <span class="keyword">true</span>;
<a name="l00644"></a>00644     <span class="keywordflow">if</span> (<a class="code" href="trace_8hh.html#af76c9f7776aade1bf9d7dfa8a0c6b341">DTRACE</a>(KvmContext))
<a name="l00645"></a>00645         <a class="code" href="classArmKvmCPU.html#a7e82213fbf8527640f993114c92f97eb">dumpKvmStateMisc</a>();
<a name="l00646"></a>00646 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad423a1f901d535a33ee19130f1892350"></a><!-- doxytag: member="ArmKvmCPU::updateKvmStateVFP" ref="ad423a1f901d535a33ee19130f1892350" args="(uint64_t id, bool show_warnings)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateKvmStateVFP </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>show_warnings</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00684"></a>00684 {
<a name="l00685"></a>00685     assert(<a class="code" href="arm__cpu_8cc.html#a08258a20944d79f2fb268bf6f7beeb95">REG_IS_ARM</a>(<span class="keywordtype">id</span>));
<a name="l00686"></a>00686     assert(<a class="code" href="arm__cpu_8cc.html#ad490fb85e238f89a54598782cd4bf50b">REG_IS_VFP</a>(<span class="keywordtype">id</span>));
<a name="l00687"></a>00687 
<a name="l00688"></a>00688     <span class="keywordflow">if</span> (<a class="code" href="arm__cpu_8cc.html#ad051e025a8bffa78ab27e6b465abeaac">REG_IS_VFP_REG</a>(<span class="keywordtype">id</span>)) {
<a name="l00689"></a>00689         <span class="keywordflow">if</span> (!<a class="code" href="arm__cpu_8cc.html#a1097c18e780d75ac054db8c1e53a2657">REG_IS_64BIT</a>(<span class="keywordtype">id</span>)) {
<a name="l00690"></a>00690             <span class="keywordflow">if</span> (show_warnings)
<a name="l00691"></a>00691                 <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;Unexpected VFP register length (reg: 0x%x).\n&quot;</span>, <span class="keywordtype">id</span>);
<a name="l00692"></a>00692             <span class="keywordflow">return</span>;
<a name="l00693"></a>00693         }
<a name="l00694"></a>00694         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> idx(<span class="keywordtype">id</span> &amp; KVM_REG_ARM_VFP_MASK);
<a name="l00695"></a>00695         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> idx_base(idx &lt;&lt; 1);
<a name="l00696"></a>00696         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> idx_hi(idx_base + 1);
<a name="l00697"></a>00697         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> idx_lo(idx_base + 0);
<a name="l00698"></a>00698         uint64_t <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a>(
<a name="l00699"></a>00699             ((uint64_t)<a class="code" href="classBaseKvmCPU.html#a4455a4759e69e5ebe68ae7298cbcc37d">tc</a>-&gt;<a class="code" href="classThreadContext.html#a3715f0deff5e4aeb64a8cf3ca293068b">readFloatRegBitsFlat</a>(idx_hi) &lt;&lt; 32) |
<a name="l00700"></a>00700             <a class="code" href="classBaseKvmCPU.html#a4455a4759e69e5ebe68ae7298cbcc37d">tc</a>-&gt;<a class="code" href="classThreadContext.html#a3715f0deff5e4aeb64a8cf3ca293068b">readFloatRegBitsFlat</a>(idx_lo));
<a name="l00701"></a>00701 
<a name="l00702"></a>00702         <a class="code" href="classBaseKvmCPU.html#ad96695f9596f808056054f3c2026b818">setOneReg</a>(<span class="keywordtype">id</span>, <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a>);
<a name="l00703"></a>00703     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="arm__cpu_8cc.html#a7cda932ae135eadc13a1c81c511b0822">REG_IS_VFP_CTRL</a>(<span class="keywordtype">id</span>)) {
<a name="l00704"></a>00704         <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67">MiscRegIndex</a> idx(<a class="code" href="classArmKvmCPU.html#acf6fe05c1274f3c7d8d6b452f193522b">decodeVFPCtrlReg</a>(<span class="keywordtype">id</span>));
<a name="l00705"></a>00705         <span class="keywordflow">if</span> (idx == <a class="code" href="namespaceAlphaISA.html#a1e522017e015d4c7efd6b2360143aa67a7d1d86545746c83e719e24556985648a">NUM_MISCREGS</a>) {
<a name="l00706"></a>00706             <span class="keywordflow">if</span> (show_warnings)
<a name="l00707"></a>00707                 <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;Unhandled VFP control register: 0x%x\n&quot;</span>, <span class="keywordtype">id</span>);
<a name="l00708"></a>00708             <span class="keywordflow">return</span>;
<a name="l00709"></a>00709         }
<a name="l00710"></a>00710         <span class="keywordflow">if</span> (!<a class="code" href="arm__cpu_8cc.html#a3e0331d7bf1a744b32d3191075254941">REG_IS_32BIT</a>(<span class="keywordtype">id</span>)) {
<a name="l00711"></a>00711             <span class="keywordflow">if</span> (show_warnings)
<a name="l00712"></a>00712                 <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;Ignoring VFP control register (%s) with &quot;</span>
<a name="l00713"></a>00713                      <span class="stringliteral">&quot;unexpected size.\n&quot;</span>,
<a name="l00714"></a>00714                      <a class="code" href="namespaceArmISA.html#a04c005fb6a06cbd3e27052b373f4dcfc">miscRegName</a>[idx]);
<a name="l00715"></a>00715             <span class="keywordflow">return</span>;
<a name="l00716"></a>00716         }
<a name="l00717"></a>00717         <a class="code" href="classBaseKvmCPU.html#ad96695f9596f808056054f3c2026b818">setOneReg</a>(<span class="keywordtype">id</span>, (<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)<a class="code" href="classBaseKvmCPU.html#a4455a4759e69e5ebe68ae7298cbcc37d">tc</a>-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(idx));
<a name="l00718"></a>00718     } <span class="keywordflow">else</span> {
<a name="l00719"></a>00719         <span class="keywordflow">if</span> (show_warnings)
<a name="l00720"></a>00720             <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;Unhandled VFP register: 0x%x\n&quot;</span>, <span class="keywordtype">id</span>);
<a name="l00721"></a>00721     }
<a name="l00722"></a>00722 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a398ea9eff7b6848bc2c92fe43999011d"></a><!-- doxytag: member="ArmKvmCPU::updateTCStateCoProc" ref="a398ea9eff7b6848bc2c92fe43999011d" args="(uint64_t id, bool show_warnings)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateTCStateCoProc </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>show_warnings</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00789"></a>00789 {
<a name="l00790"></a>00790     <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67">MiscRegIndex</a> <a class="code" href="namespaceX86ISA.html#aeeb02ad833ab76f3430553ef93213a6b">reg</a>(<a class="code" href="classArmKvmCPU.html#a9b185ea78411f18604ed826462d010d7">decodeCoProcReg</a>(<span class="keywordtype">id</span>));
<a name="l00791"></a>00791 
<a name="l00792"></a>00792     assert(<a class="code" href="arm__cpu_8cc.html#a08258a20944d79f2fb268bf6f7beeb95">REG_IS_ARM</a>(<span class="keywordtype">id</span>));
<a name="l00793"></a>00793     assert(<a class="code" href="arm__cpu_8cc.html#ab7db84b63493d5c92fcc91122d06c34c">REG_CP</a>(<span class="keywordtype">id</span>) &lt;= 15);
<a name="l00794"></a>00794 
<a name="l00795"></a>00795     <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="arm__cpu_8cc.html#add9a7764c265a8eb64db9707d7fe52e3">KVM_REG64_TTBR0</a> || <span class="keywordtype">id</span> == <a class="code" href="arm__cpu_8cc.html#aca634800fd8c8189f4cb5577c3f59f6e">KVM_REG64_TTBR1</a>) {
<a name="l00796"></a>00796         <span class="comment">// HACK HACK HACK: We don&apos;t currently support 64-bit TTBR0/TTBR1</span>
<a name="l00797"></a>00797         <a class="code" href="base_2misc_8hh.html#ae2881bab26c1d2bf4a411f8b1fb7e574">hack_once</a>(<span class="stringliteral">&quot;KVM: 64-bit TTBRx workaround\n&quot;</span>);
<a name="l00798"></a>00798         <a class="code" href="classBaseKvmCPU.html#a4455a4759e69e5ebe68ae7298cbcc37d">tc</a>-&gt;<a class="code" href="classThreadContext.html#a2987c1ff22ebdf6cdf354a31462bdbfb">setMiscRegNoEffect</a>(
<a name="l00799"></a>00799             <span class="keywordtype">id</span> == <a class="code" href="arm__cpu_8cc.html#add9a7764c265a8eb64db9707d7fe52e3">KVM_REG64_TTBR0</a> ? <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67af04fed84f7396af659248bb67d59cf57">MISCREG_TTBR0</a> : <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a8fcade2139fd8facbbeefb69cc2ad774">MISCREG_TTBR1</a>,
<a name="l00800"></a>00800             (<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)(<a class="code" href="classBaseKvmCPU.html#a803c633f6b9fc380a376a5a6d2ca17ee">getOneRegU64</a>(<span class="keywordtype">id</span>) &amp; 0xFFFFFFFF));
<a name="l00801"></a>00801     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespaceX86ISA.html#aeeb02ad833ab76f3430553ef93213a6b">reg</a> == <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a713784be56a50e1dd69613088bb6af38">MISCREG_TTBCR</a>) {
<a name="l00802"></a>00802         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a>(<a class="code" href="classBaseKvmCPU.html#a803c633f6b9fc380a376a5a6d2ca17ee">getOneRegU64</a>(<span class="keywordtype">id</span>));
<a name="l00803"></a>00803         <span class="keywordflow">if</span> (<a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a> &amp; 0x80000000)
<a name="l00804"></a>00804             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;KVM: Guest tried to enable LPAE.\n&quot;</span>);
<a name="l00805"></a>00805         <a class="code" href="classBaseKvmCPU.html#a4455a4759e69e5ebe68ae7298cbcc37d">tc</a>-&gt;<a class="code" href="classThreadContext.html#a2987c1ff22ebdf6cdf354a31462bdbfb">setMiscRegNoEffect</a>(<a class="code" href="namespaceX86ISA.html#aeeb02ad833ab76f3430553ef93213a6b">reg</a>, <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a>);
<a name="l00806"></a>00806     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespaceX86ISA.html#aeeb02ad833ab76f3430553ef93213a6b">reg</a> == <a class="code" href="namespaceAlphaISA.html#a1e522017e015d4c7efd6b2360143aa67a7d1d86545746c83e719e24556985648a">NUM_MISCREGS</a>) {
<a name="l00807"></a>00807         <span class="keywordflow">if</span> (show_warnings) {
<a name="l00808"></a>00808             <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;KVM: Ignoring unknown KVM co-processor register:\n&quot;</span>, <span class="keywordtype">id</span>);
<a name="l00809"></a>00809             <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;\t0x%x: [CP: %i 64: %i CRn: c%i opc1: %.2i CRm: c%i&quot;</span>
<a name="l00810"></a>00810                  <span class="stringliteral">&quot; opc2: %i]\n&quot;</span>,
<a name="l00811"></a>00811                  <span class="keywordtype">id</span>, <a class="code" href="arm__cpu_8cc.html#ab7db84b63493d5c92fcc91122d06c34c">REG_CP</a>(<span class="keywordtype">id</span>), <a class="code" href="arm__cpu_8cc.html#a1097c18e780d75ac054db8c1e53a2657">REG_IS_64BIT</a>(<span class="keywordtype">id</span>), <a class="code" href="arm__cpu_8cc.html#a22e520b9dc551177ebb8e775c09973f7">REG_CRN</a>(<span class="keywordtype">id</span>),
<a name="l00812"></a>00812                  <a class="code" href="arm__cpu_8cc.html#a7e86f0389e3f4d6f4bd368453c99504e">REG_OPC1</a>(<span class="keywordtype">id</span>), <a class="code" href="arm__cpu_8cc.html#a99640ed19db5d6085479a4e89d3080f9">REG_CRM</a>(<span class="keywordtype">id</span>), <a class="code" href="arm__cpu_8cc.html#add2f600d92539677b81e95eb878799c2">REG_OPC2</a>(<span class="keywordtype">id</span>));
<a name="l00813"></a>00813         }
<a name="l00814"></a>00814     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespaceX86ISA.html#aeeb02ad833ab76f3430553ef93213a6b">reg</a> &gt;= MISCREG_CP15_UNIMP_START &amp;&amp; <a class="code" href="namespaceX86ISA.html#aeeb02ad833ab76f3430553ef93213a6b">reg</a> &lt; MISCREG_CP15_END) {
<a name="l00815"></a>00815         <span class="keywordflow">if</span> (show_warnings)
<a name="l00816"></a>00816             <a class="code" href="base_2misc_8hh.html#abb243c15dfbeedf4ae64aa213f4f18c7">warn_once</a>(<span class="stringliteral">&quot;KVM: Co-processor reg. %s not implemented by gem5.\n&quot;</span>,
<a name="l00817"></a>00817                       <a class="code" href="namespaceArmISA.html#a04c005fb6a06cbd3e27052b373f4dcfc">miscRegName</a>[<a class="code" href="namespaceX86ISA.html#aeeb02ad833ab76f3430553ef93213a6b">reg</a>]);
<a name="l00818"></a>00818     } <span class="keywordflow">else</span> {
<a name="l00819"></a>00819         <a class="code" href="classBaseKvmCPU.html#a4455a4759e69e5ebe68ae7298cbcc37d">tc</a>-&gt;<a class="code" href="classThreadContext.html#a2987c1ff22ebdf6cdf354a31462bdbfb">setMiscRegNoEffect</a>(<a class="code" href="namespaceX86ISA.html#aeeb02ad833ab76f3430553ef93213a6b">reg</a>, <a class="code" href="classBaseKvmCPU.html#abb51d3ccd07e153be4d5982c324a95bc">getOneRegU32</a>(<span class="keywordtype">id</span>));
<a name="l00820"></a>00820     }
<a name="l00821"></a>00821 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a72bbd13b32502607c6297268cace4868"></a><!-- doxytag: member="ArmKvmCPU::updateTCStateCore" ref="a72bbd13b32502607c6297268cace4868" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateTCStateCore </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00726"></a>00726 {
<a name="l00727"></a>00727     <span class="keywordflow">for</span> (<span class="keyword">const</span> KvmIntRegInfo *ri(<a class="code" href="classArmKvmCPU.html#a610b9b2e17374a59cb14ab6e1b7c3dd0">kvmIntRegs</a>);
<a name="l00728"></a>00728          ri-&gt;idx != <a class="code" href="namespaceArmISA.html#ae64680ba9fb526106829d6bf92fc791baae068f35aef4de2a5673ad98a5dbcb49">NUM_INTREGS</a>; ++ri) {
<a name="l00729"></a>00729 
<a name="l00730"></a>00730         <a class="code" href="classBaseKvmCPU.html#a4455a4759e69e5ebe68ae7298cbcc37d">tc</a>-&gt;<a class="code" href="classThreadContext.html#a017c099cd6087484b0eb1892809b0572">setIntRegFlat</a>(ri-&gt;idx, <a class="code" href="classBaseKvmCPU.html#abb51d3ccd07e153be4d5982c324a95bc">getOneRegU32</a>(ri-&gt;id));
<a name="l00731"></a>00731     }
<a name="l00732"></a>00732 
<a name="l00733"></a>00733     <span class="keywordflow">for</span> (<span class="keyword">const</span> KvmCoreMiscRegInfo *ri(<a class="code" href="classArmKvmCPU.html#a7f2a34be5f2a6e8b6812657f935461cf">kvmCoreMiscRegs</a>);
<a name="l00734"></a>00734          ri-&gt;idx != <a class="code" href="namespaceAlphaISA.html#a1e522017e015d4c7efd6b2360143aa67a7d1d86545746c83e719e24556985648a">NUM_MISCREGS</a>; ++ri) {
<a name="l00735"></a>00735 
<a name="l00736"></a>00736         <a class="code" href="classBaseKvmCPU.html#a4455a4759e69e5ebe68ae7298cbcc37d">tc</a>-&gt;<a class="code" href="classThreadContext.html#a2987c1ff22ebdf6cdf354a31462bdbfb">setMiscRegNoEffect</a>(ri-&gt;idx, <a class="code" href="classBaseKvmCPU.html#abb51d3ccd07e153be4d5982c324a95bc">getOneRegU32</a>(ri-&gt;id));
<a name="l00737"></a>00737     }
<a name="l00738"></a>00738 
<a name="l00739"></a>00739     <span class="comment">/* We want the simulator to execute all side-effects of the CPSR</span>
<a name="l00740"></a>00740 <span class="comment">     * update since this updates PC state and register maps.</span>
<a name="l00741"></a>00741 <span class="comment">     */</span>
<a name="l00742"></a>00742     <a class="code" href="classBaseKvmCPU.html#a4455a4759e69e5ebe68ae7298cbcc37d">tc</a>-&gt;<a class="code" href="classThreadContext.html#a074166dc2fe3c4aea3ad588ed9883c51">setMiscReg</a>(<a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a6221718f6b42d5072eb2beec580c7f69">MISCREG_CPSR</a>, <a class="code" href="classBaseKvmCPU.html#a4455a4759e69e5ebe68ae7298cbcc37d">tc</a>-&gt;<a class="code" href="classThreadContext.html#a93c9c97261cb7289d5976b8222f70c4c">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a6221718f6b42d5072eb2beec580c7f69">MISCREG_CPSR</a>));
<a name="l00743"></a>00743 
<a name="l00744"></a>00744     <span class="comment">// We update the PC state after we have updated the CPSR the</span>
<a name="l00745"></a>00745     <span class="comment">// contents of the CPSR affects how the npc is updated.</span>
<a name="l00746"></a>00746     <a class="code" href="namespaceAlphaISA.html#af780de49982ecf691215cac9b9dfc615">PCState</a> <a class="code" href="inorder__dyn__inst_8cc.html#a0c864f905330c0fe3ecc683b7bf8b793">pc</a>(<a class="code" href="classBaseKvmCPU.html#a4455a4759e69e5ebe68ae7298cbcc37d">tc</a>-&gt;<a class="code" href="classThreadContext.html#a1aaca26c0732d2191edbde1477d7ec13">pcState</a>());
<a name="l00747"></a>00747     <a class="code" href="inorder__dyn__inst_8cc.html#a0c864f905330c0fe3ecc683b7bf8b793">pc</a>.set(<a class="code" href="classBaseKvmCPU.html#abb51d3ccd07e153be4d5982c324a95bc">getOneRegU32</a>(<a class="code" href="arm__cpu_8cc.html#a8282a39ad86cc69038c3962b8ddbeaf1">REG_CORE32</a>(usr_regs.ARM_pc)));
<a name="l00748"></a>00748     <a class="code" href="classBaseKvmCPU.html#a4455a4759e69e5ebe68ae7298cbcc37d">tc</a>-&gt;<a class="code" href="classThreadContext.html#a1aaca26c0732d2191edbde1477d7ec13">pcState</a>(<a class="code" href="inorder__dyn__inst_8cc.html#a0c864f905330c0fe3ecc683b7bf8b793">pc</a>);
<a name="l00749"></a>00749 
<a name="l00750"></a>00750     <span class="keywordflow">if</span> (<a class="code" href="trace_8hh.html#af76c9f7776aade1bf9d7dfa8a0c6b341">DTRACE</a>(KvmContext))
<a name="l00751"></a>00751         <a class="code" href="classArmKvmCPU.html#a54d58f77f2887428772599f7ddd8652e">dumpKvmStateCore</a>();
<a name="l00752"></a>00752 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa29d443c292712c817d1464fba8943d7"></a><!-- doxytag: member="ArmKvmCPU::updateTCStateMisc" ref="aa29d443c292712c817d1464fba8943d7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateTCStateMisc </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00756"></a>00756 {
<a name="l00757"></a>00757     <span class="keyword">static</span> <span class="keywordtype">bool</span> warned(<span class="keyword">false</span>); <span class="comment">// We can&apos;t use warn_once since we want</span>
<a name="l00758"></a>00758                                <span class="comment">// to show /all/ registers</span>
<a name="l00759"></a>00759 
<a name="l00760"></a>00760     <span class="keyword">const</span> <a class="code" href="classArmKvmCPU.html#acba61563c19ad813c8026d8746e8bded">RegIndexVector</a> &amp;reg_ids(<a class="code" href="classArmKvmCPU.html#ae852422eea452a5cdcf96e300ec91cc7">getRegList</a>());;
<a name="l00761"></a>00761     <span class="keywordflow">for</span> (RegIndexVector::const_iterator it(reg_ids.begin());
<a name="l00762"></a>00762          it != reg_ids.end(); ++it) {
<a name="l00763"></a>00763 
<a name="l00764"></a>00764         <span class="keywordflow">if</span> (!<a class="code" href="arm__cpu_8cc.html#a08258a20944d79f2fb268bf6f7beeb95">REG_IS_ARM</a>(*it)) {
<a name="l00765"></a>00765             <span class="keywordflow">if</span> (!warned)
<a name="l00766"></a>00766                 <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;Skipping non-ARM register: 0x%x\n&quot;</span>, *it);
<a name="l00767"></a>00767         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="arm__cpu_8cc.html#aa7e91b5148acf5a351d7815e16fa0bf8">REG_IS_CORE</a>(*it)) {
<a name="l00768"></a>00768             <span class="comment">// Core registers are handled in updateKvmStateCore</span>
<a name="l00769"></a>00769         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="arm__cpu_8cc.html#ab7db84b63493d5c92fcc91122d06c34c">REG_CP</a>(*it) &lt;= 15) {
<a name="l00770"></a>00770             <a class="code" href="classArmKvmCPU.html#a398ea9eff7b6848bc2c92fe43999011d">updateTCStateCoProc</a>(*it, !warned);
<a name="l00771"></a>00771         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="arm__cpu_8cc.html#ad490fb85e238f89a54598782cd4bf50b">REG_IS_VFP</a>(*it)) {
<a name="l00772"></a>00772             <a class="code" href="classArmKvmCPU.html#a94714d5528a5c80d1e0f9fe250514a07">updateTCStateVFP</a>(*it, !warned);
<a name="l00773"></a>00773         } <span class="keywordflow">else</span> {
<a name="l00774"></a>00774             <span class="keywordflow">if</span> (!warned) {
<a name="l00775"></a>00775                 <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;Skipping register with unknown CP (%i) id: 0x%x\n&quot;</span>,
<a name="l00776"></a>00776                      <a class="code" href="arm__cpu_8cc.html#ab7db84b63493d5c92fcc91122d06c34c">REG_CP</a>(*it), *it);
<a name="l00777"></a>00777             }
<a name="l00778"></a>00778         }
<a name="l00779"></a>00779     }
<a name="l00780"></a>00780 
<a name="l00781"></a>00781     warned = <span class="keyword">true</span>;
<a name="l00782"></a>00782 
<a name="l00783"></a>00783     <span class="keywordflow">if</span> (<a class="code" href="trace_8hh.html#af76c9f7776aade1bf9d7dfa8a0c6b341">DTRACE</a>(KvmContext))
<a name="l00784"></a>00784         <a class="code" href="classArmKvmCPU.html#a7e82213fbf8527640f993114c92f97eb">dumpKvmStateMisc</a>();
<a name="l00785"></a>00785 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a94714d5528a5c80d1e0f9fe250514a07"></a><!-- doxytag: member="ArmKvmCPU::updateTCStateVFP" ref="a94714d5528a5c80d1e0f9fe250514a07" args="(uint64_t id, bool show_warnings)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateTCStateVFP </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>show_warnings</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00825"></a>00825 {
<a name="l00826"></a>00826     assert(<a class="code" href="arm__cpu_8cc.html#a08258a20944d79f2fb268bf6f7beeb95">REG_IS_ARM</a>(<span class="keywordtype">id</span>));
<a name="l00827"></a>00827     assert(<a class="code" href="arm__cpu_8cc.html#ad490fb85e238f89a54598782cd4bf50b">REG_IS_VFP</a>(<span class="keywordtype">id</span>));
<a name="l00828"></a>00828 
<a name="l00829"></a>00829     <span class="keywordflow">if</span> (<a class="code" href="arm__cpu_8cc.html#ad051e025a8bffa78ab27e6b465abeaac">REG_IS_VFP_REG</a>(<span class="keywordtype">id</span>)) {
<a name="l00830"></a>00830         <span class="keywordflow">if</span> (!<a class="code" href="arm__cpu_8cc.html#a1097c18e780d75ac054db8c1e53a2657">REG_IS_64BIT</a>(<span class="keywordtype">id</span>)) {
<a name="l00831"></a>00831             <span class="keywordflow">if</span> (show_warnings)
<a name="l00832"></a>00832                 <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;Unexpected VFP register length (reg: 0x%x).\n&quot;</span>, <span class="keywordtype">id</span>);
<a name="l00833"></a>00833             <span class="keywordflow">return</span>;
<a name="l00834"></a>00834         }
<a name="l00835"></a>00835         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> idx(<span class="keywordtype">id</span> &amp; KVM_REG_ARM_VFP_MASK);
<a name="l00836"></a>00836         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> idx_base(idx &lt;&lt; 1);
<a name="l00837"></a>00837         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> idx_hi(idx_base + 1);
<a name="l00838"></a>00838         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> idx_lo(idx_base + 0);
<a name="l00839"></a>00839         uint64_t <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a>(<a class="code" href="classBaseKvmCPU.html#a803c633f6b9fc380a376a5a6d2ca17ee">getOneRegU64</a>(<span class="keywordtype">id</span>));
<a name="l00840"></a>00840 
<a name="l00841"></a>00841         <a class="code" href="classBaseKvmCPU.html#a4455a4759e69e5ebe68ae7298cbcc37d">tc</a>-&gt;<a class="code" href="classThreadContext.html#a2964ca7e974bf80017ee30d832b32a35">setFloatRegBitsFlat</a>(idx_hi, (<a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a> &gt;&gt; 32) &amp; 0xFFFFFFFF);
<a name="l00842"></a>00842         <a class="code" href="classBaseKvmCPU.html#a4455a4759e69e5ebe68ae7298cbcc37d">tc</a>-&gt;<a class="code" href="classThreadContext.html#a2964ca7e974bf80017ee30d832b32a35">setFloatRegBitsFlat</a>(idx_lo, <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a> &amp; 0xFFFFFFFF);
<a name="l00843"></a>00843     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="arm__cpu_8cc.html#a7cda932ae135eadc13a1c81c511b0822">REG_IS_VFP_CTRL</a>(<span class="keywordtype">id</span>)) {
<a name="l00844"></a>00844         <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67">MiscRegIndex</a> idx(<a class="code" href="classArmKvmCPU.html#acf6fe05c1274f3c7d8d6b452f193522b">decodeVFPCtrlReg</a>(<span class="keywordtype">id</span>));
<a name="l00845"></a>00845         <span class="keywordflow">if</span> (idx == <a class="code" href="namespaceAlphaISA.html#a1e522017e015d4c7efd6b2360143aa67a7d1d86545746c83e719e24556985648a">NUM_MISCREGS</a>) {
<a name="l00846"></a>00846             <span class="keywordflow">if</span> (show_warnings)
<a name="l00847"></a>00847                 <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;Unhandled VFP control register: 0x%x\n&quot;</span>, <span class="keywordtype">id</span>);
<a name="l00848"></a>00848             <span class="keywordflow">return</span>;
<a name="l00849"></a>00849         }
<a name="l00850"></a>00850         <span class="keywordflow">if</span> (!<a class="code" href="arm__cpu_8cc.html#a3e0331d7bf1a744b32d3191075254941">REG_IS_32BIT</a>(<span class="keywordtype">id</span>)) {
<a name="l00851"></a>00851             <span class="keywordflow">if</span> (show_warnings)
<a name="l00852"></a>00852                 <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;Ignoring VFP control register (%s) with &quot;</span>
<a name="l00853"></a>00853                      <span class="stringliteral">&quot;unexpected size.\n&quot;</span>,
<a name="l00854"></a>00854                      <a class="code" href="namespaceArmISA.html#a04c005fb6a06cbd3e27052b373f4dcfc">miscRegName</a>[idx]);
<a name="l00855"></a>00855             <span class="keywordflow">return</span>;
<a name="l00856"></a>00856         }
<a name="l00857"></a>00857         <a class="code" href="classBaseKvmCPU.html#a4455a4759e69e5ebe68ae7298cbcc37d">tc</a>-&gt;<a class="code" href="classThreadContext.html#a074166dc2fe3c4aea3ad588ed9883c51">setMiscReg</a>(idx, <a class="code" href="classBaseKvmCPU.html#a803c633f6b9fc380a376a5a6d2ca17ee">getOneRegU64</a>(<span class="keywordtype">id</span>));
<a name="l00858"></a>00858     } <span class="keywordflow">else</span> {
<a name="l00859"></a>00859         <span class="keywordflow">if</span> (show_warnings)
<a name="l00860"></a>00860             <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;Unhandled VFP register: 0x%x\n&quot;</span>, <span class="keywordtype">id</span>);
<a name="l00861"></a>00861     }
<a name="l00862"></a>00862 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="adbd5e38eae7c8c3021f2c4f430b399fd"></a><!-- doxytag: member="ArmKvmCPU::updateThreadContext" ref="adbd5e38eae7c8c3021f2c4f430b399fd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateThreadContext </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Update the current thread context with the KVM state</p>
<p>The base CPU after the guest updates any of the KVM state. In practice, this happens after kvmRun is called. The architecture dependent code is expected to read the state of the guest CPU and update gem5's thread state. </p>

<p><a class="el" href="classBaseKvmCPU.html#ac47bfb587580ca76050e0c9bc753c10d">BaseKvmCPU</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00307"></a>00307 {
<a name="l00308"></a>00308     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(KvmContext, <span class="stringliteral">&quot;Updating gem5 state...\n&quot;</span>);
<a name="l00309"></a>00309 
<a name="l00310"></a>00310     <a class="code" href="classArmKvmCPU.html#a72bbd13b32502607c6297268cace4868">updateTCStateCore</a>();
<a name="l00311"></a>00311     <a class="code" href="classArmKvmCPU.html#aa29d443c292712c817d1464fba8943d7">updateTCStateMisc</a>();
<a name="l00312"></a>00312 }
</pre></div></p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="ada25a9ee0667e58ed655eec2be09b133"></a><!-- doxytag: member="ArmKvmCPU::_regIndexList" ref="ada25a9ee0667e58ed655eec2be09b133" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1vector.html">RegIndexVector</a> <a class="el" href="classArmKvmCPU.html#ada25a9ee0667e58ed655eec2be09b133">_regIndexList</a><code> [mutable, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Cached copy of the list of co-processor registers supported by KVM </p>

</div>
</div>
<a class="anchor" id="a980f87872f421bd8c54c0f347ad8bfcc"></a><!-- doxytag: member="ArmKvmCPU::fiqAsserted" ref="a980f87872f421bd8c54c0f347ad8bfcc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classArmKvmCPU.html#a980f87872f421bd8c54c0f347ad8bfcc">fiqAsserted</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Cached state of the FIQ line </p>

</div>
</div>
<a class="anchor" id="a0183ebe7a406948461e8b808c5a3677d"></a><!-- doxytag: member="ArmKvmCPU::invariant_regs" ref="a0183ebe7a406948461e8b808c5a3677d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::set&lt; uint64_t &gt; <a class="el" href="classArmKvmCPU.html#a0183ebe7a406948461e8b808c5a3677d">invariant_regs</a><code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>List of co-processor registers that KVM requires to be identical on both the host and the guest. KVM does not allow writes to these registers. </p>

</div>
</div>
<a class="anchor" id="af61d21c5b06aff9f758f797b2c8d422f"></a><!-- doxytag: member="ArmKvmCPU::irqAsserted" ref="af61d21c5b06aff9f758f797b2c8d422f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classArmKvmCPU.html#af61d21c5b06aff9f758f797b2c8d422f">irqAsserted</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Cached state of the IRQ line </p>

</div>
</div>
<a class="anchor" id="a7f2a34be5f2a6e8b6812657f935461cf"></a><!-- doxytag: member="ArmKvmCPU::kvmCoreMiscRegs" ref="a7f2a34be5f2a6e8b6812657f935461cf" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structArmKvmCPU_1_1KvmCoreMiscRegInfo.html">ArmKvmCPU::KvmCoreMiscRegInfo</a> <a class="el" href="classArmKvmCPU.html#a7f2a34be5f2a6e8b6812657f935461cf">kvmCoreMiscRegs</a><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>初期値:</b><div class="fragment"><pre class="fragment"> {
    { <a class="code" href="arm__cpu_8cc.html#a8282a39ad86cc69038c3962b8ddbeaf1">REG_CORE32</a>(usr_regs.ARM_cpsr), <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a6221718f6b42d5072eb2beec580c7f69">MISCREG_CPSR</a>, <span class="stringliteral">&quot;CPSR&quot;</span> },
    { <a class="code" href="arm__cpu_8cc.html#a8282a39ad86cc69038c3962b8ddbeaf1">REG_CORE32</a>(svc_regs[2]), <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67aa5cb7601fc0523e5008d1ae6281f9532">MISCREG_SPSR_SVC</a>, <span class="stringliteral">&quot;SPSR(SVC)&quot;</span> },
    { <a class="code" href="arm__cpu_8cc.html#a8282a39ad86cc69038c3962b8ddbeaf1">REG_CORE32</a>(abt_regs[2]), <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a0d23b2f8aebae3e9ee5661cd3321aa57">MISCREG_SPSR_ABT</a>, <span class="stringliteral">&quot;SPSR(ABT)&quot;</span> },
    { <a class="code" href="arm__cpu_8cc.html#a8282a39ad86cc69038c3962b8ddbeaf1">REG_CORE32</a>(und_regs[2]), <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a626b4f56b35837f6c8fae47207289fc9">MISCREG_SPSR_UND</a>, <span class="stringliteral">&quot;SPSR(UND)&quot;</span> },
    { <a class="code" href="arm__cpu_8cc.html#a8282a39ad86cc69038c3962b8ddbeaf1">REG_CORE32</a>(irq_regs[2]), <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a9918210657418df6330236a64b2e1747">MISCREG_SPSR_IRQ</a>, <span class="stringliteral">&quot;SPSR(IRQ)&quot;</span> },
    { <a class="code" href="arm__cpu_8cc.html#a8282a39ad86cc69038c3962b8ddbeaf1">REG_CORE32</a>(fiq_regs[2]), <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a9ed8f88f6e4afcc267376d36760b2ca3">MISCREG_SPSR_FIQ</a>, <span class="stringliteral">&quot;SPSR(FIQ)&quot;</span> },
    { 0, <a class="code" href="namespaceAlphaISA.html#a1e522017e015d4c7efd6b2360143aa67a7d1d86545746c83e719e24556985648a">NUM_MISCREGS</a> }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a610b9b2e17374a59cb14ab6e1b7c3dd0"></a><!-- doxytag: member="ArmKvmCPU::kvmIntRegs" ref="a610b9b2e17374a59cb14ab6e1b7c3dd0" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structArmKvmCPU_1_1KvmIntRegInfo.html">ArmKvmCPU::KvmIntRegInfo</a> <a class="el" href="classArmKvmCPU.html#a610b9b2e17374a59cb14ab6e1b7c3dd0">kvmIntRegs</a><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>cpu/kvm/<a class="el" href="arm__cpu_8hh_source.html">arm_cpu.hh</a></li>
<li>cpu/kvm/<a class="el" href="arm__cpu_8cc.html">arm_cpu.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
