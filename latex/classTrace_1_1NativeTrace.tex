\hypertarget{classTrace_1_1NativeTrace}{
\section{クラス NativeTrace}
\label{classTrace_1_1NativeTrace}\index{Trace::NativeTrace@{Trace::NativeTrace}}
}


{\ttfamily \#include $<$nativetrace.hh$>$}NativeTraceに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=6cm]{classTrace_1_1NativeTrace}
\end{center}
\end{figure}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classTrace_1_1NativeTrace_a73d1a7e24b851b9d944e0074e73d71ff}{NativeTrace} (const \hyperlink{classTrace_1_1ExeTracer_a6680098765037131737b022c9fa9252e}{Params} $\ast$p)
\item 
virtual \hyperlink{classTrace_1_1NativeTrace_ab5703d1f8d7d995360c983a67a9af032}{$\sim$NativeTrace} ()
\item 
\hyperlink{classTrace_1_1NativeTraceRecord}{NativeTraceRecord} $\ast$ \hyperlink{classTrace_1_1NativeTrace_ad520c1272aab137c3e207f526088843c}{getInstRecord} (\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} when, \hyperlink{classThreadContext}{ThreadContext} $\ast$tc, const \hyperlink{classRefCountingPtr}{StaticInstPtr} staticInst, TheISA::PCState pc, const \hyperlink{classRefCountingPtr}{StaticInstPtr} macroStaticInst=NULL)
\item 
{\footnotesize template$<$class T $>$ }\\bool \hyperlink{classTrace_1_1NativeTrace_a1d9546c7840deae793284f3dcafeb684}{checkReg} (const char $\ast$regName, T \&val, T \&realVal)
\item 
void \hyperlink{classTrace_1_1NativeTrace_aebb629d36b64e2ff7e3351ca99614b12}{read} (void $\ast$ptr, size\_\-t size)
\item 
virtual void \hyperlink{classTrace_1_1NativeTrace_adb484644aa43b4370d31b6a7286b0dd1}{check} (\hyperlink{classTrace_1_1NativeTraceRecord}{NativeTraceRecord} $\ast$record)=0
\end{DoxyCompactItemize}
\subsection*{Protected 変数}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{classTrace_1_1NativeTrace_a6f8059414f0228f0256115e024eeed4b}{fd}
\item 
\hyperlink{classListenSocket}{ListenSocket} \hyperlink{classTrace_1_1NativeTrace_a4957ac3d974f1eb7680753acb7741ff5}{native\_\-listener}
\end{DoxyCompactItemize}


\subsection{コンストラクタとデストラクタ}
\hypertarget{classTrace_1_1NativeTrace_a73d1a7e24b851b9d944e0074e73d71ff}{
\index{Trace::NativeTrace@{Trace::NativeTrace}!NativeTrace@{NativeTrace}}
\index{NativeTrace@{NativeTrace}!Trace::NativeTrace@{Trace::NativeTrace}}
\subsubsection[{NativeTrace}]{\setlength{\rightskip}{0pt plus 5cm}{\bf NativeTrace} (const {\bf Params} $\ast$ {\em p})}}
\label{classTrace_1_1NativeTrace_a73d1a7e24b851b9d944e0074e73d71ff}



\begin{DoxyCode}
42     : ExeTracer(p)
43 {
44     if (ListenSocket::allDisabled())
45         fatal("All listeners are disabled!");
46 
47     int port = 8000;
48     while(!native_listener.listen(port, true))
49     {
50         DPRINTF(GDBMisc, "Can't bind port %d\n", port);
51         port++;
52     }
53     ccprintf(cerr, "Listening for native process on port %d\n", port);
54     fd = native_listener.accept();
55 }
\end{DoxyCode}
\hypertarget{classTrace_1_1NativeTrace_ab5703d1f8d7d995360c983a67a9af032}{
\index{Trace::NativeTrace@{Trace::NativeTrace}!$\sim$NativeTrace@{$\sim$NativeTrace}}
\index{$\sim$NativeTrace@{$\sim$NativeTrace}!Trace::NativeTrace@{Trace::NativeTrace}}
\subsubsection[{$\sim$NativeTrace}]{\setlength{\rightskip}{0pt plus 5cm}virtual $\sim${\bf NativeTrace} ()\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}
\label{classTrace_1_1NativeTrace_ab5703d1f8d7d995360c983a67a9af032}



\begin{DoxyCode}
79 {}
\end{DoxyCode}


\subsection{関数}
\hypertarget{classTrace_1_1NativeTrace_adb484644aa43b4370d31b6a7286b0dd1}{
\index{Trace::NativeTrace@{Trace::NativeTrace}!check@{check}}
\index{check@{check}!Trace::NativeTrace@{Trace::NativeTrace}}
\subsubsection[{check}]{\setlength{\rightskip}{0pt plus 5cm}virtual void check ({\bf NativeTraceRecord} $\ast$ {\em record})\hspace{0.3cm}{\ttfamily  \mbox{[}pure virtual\mbox{]}}}}
\label{classTrace_1_1NativeTrace_adb484644aa43b4370d31b6a7286b0dd1}


\hyperlink{classTrace_1_1ArmNativeTrace_a826e1279dfa7dd9ce6760a2e6efe4116}{ArmNativeTrace}, \hyperlink{classTrace_1_1SparcNativeTrace_a826e1279dfa7dd9ce6760a2e6efe4116}{SparcNativeTrace}, と \hyperlink{classTrace_1_1X86NativeTrace_a826e1279dfa7dd9ce6760a2e6efe4116}{X86NativeTrace}で実装されています。\hypertarget{classTrace_1_1NativeTrace_a1d9546c7840deae793284f3dcafeb684}{
\index{Trace::NativeTrace@{Trace::NativeTrace}!checkReg@{checkReg}}
\index{checkReg@{checkReg}!Trace::NativeTrace@{Trace::NativeTrace}}
\subsubsection[{checkReg}]{\setlength{\rightskip}{0pt plus 5cm}bool checkReg (const char $\ast$ {\em regName}, \/  T \& {\em val}, \/  T \& {\em realVal})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classTrace_1_1NativeTrace_a1d9546c7840deae793284f3dcafeb684}



\begin{DoxyCode}
96     {
97         if(val != realVal)
98         {
99             DPRINTFN("Register %s should be %#x but is %#x.\n",
100                     regName, realVal, val);
101             return false;
102         }
103         return true;
104     }
\end{DoxyCode}
\hypertarget{classTrace_1_1NativeTrace_ad520c1272aab137c3e207f526088843c}{
\index{Trace::NativeTrace@{Trace::NativeTrace}!getInstRecord@{getInstRecord}}
\index{getInstRecord@{getInstRecord}!Trace::NativeTrace@{Trace::NativeTrace}}
\subsubsection[{getInstRecord}]{\setlength{\rightskip}{0pt plus 5cm}{\bf NativeTraceRecord}$\ast$ getInstRecord ({\bf Tick} {\em when}, \/  {\bf ThreadContext} $\ast$ {\em tc}, \/  const {\bf StaticInstPtr} {\em staticInst}, \/  TheISA::PCState {\em pc}, \/  const {\bf StaticInstPtr} {\em macroStaticInst} = {\ttfamily NULL})\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}
\label{classTrace_1_1NativeTrace_ad520c1272aab137c3e207f526088843c}


\hyperlink{classTrace_1_1ExeTracer_a89ee504d255c652e5d54b73319d4d3dc}{ExeTracer}を再定義しています。


\begin{DoxyCode}
85     {
86         if (tc->misspeculating())
87             return NULL;
88 
89         return new NativeTraceRecord(this, when, tc,
90                 staticInst, pc, tc->misspeculating(), macroStaticInst);
91     }
\end{DoxyCode}
\hypertarget{classTrace_1_1NativeTrace_aebb629d36b64e2ff7e3351ca99614b12}{
\index{Trace::NativeTrace@{Trace::NativeTrace}!read@{read}}
\index{read@{read}!Trace::NativeTrace@{Trace::NativeTrace}}
\subsubsection[{read}]{\setlength{\rightskip}{0pt plus 5cm}void read (void $\ast$ {\em ptr}, \/  size\_\-t {\em size})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classTrace_1_1NativeTrace_aebb629d36b64e2ff7e3351ca99614b12}



\begin{DoxyCode}
108     {
109         size_t soFar = 0;
110         while (soFar < size) {
111             ssize_t res = ::read(fd, (uint8_t *)ptr + soFar, size - soFar);
112             if (res < 0)
113                 panic("Read call failed! %s\n", strerror(errno));
114             else
115                 soFar += res;
116         }
117     }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classTrace_1_1NativeTrace_a6f8059414f0228f0256115e024eeed4b}{
\index{Trace::NativeTrace@{Trace::NativeTrace}!fd@{fd}}
\index{fd@{fd}!Trace::NativeTrace@{Trace::NativeTrace}}
\subsubsection[{fd}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf fd}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classTrace_1_1NativeTrace_a6f8059414f0228f0256115e024eeed4b}
\hypertarget{classTrace_1_1NativeTrace_a4957ac3d974f1eb7680753acb7741ff5}{
\index{Trace::NativeTrace@{Trace::NativeTrace}!native\_\-listener@{native\_\-listener}}
\index{native\_\-listener@{native\_\-listener}!Trace::NativeTrace@{Trace::NativeTrace}}
\subsubsection[{native\_\-listener}]{\setlength{\rightskip}{0pt plus 5cm}{\bf ListenSocket} {\bf native\_\-listener}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classTrace_1_1NativeTrace_a4957ac3d974f1eb7680753acb7741ff5}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
cpu/\hyperlink{cpu_2nativetrace_8hh}{nativetrace.hh}\item 
cpu/\hyperlink{cpu_2nativetrace_8cc}{nativetrace.cc}\end{DoxyCompactItemize}
