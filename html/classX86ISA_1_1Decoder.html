<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス Decoder</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespaceX86ISA.html">X86ISA</a>::<a class="el" href="classX86ISA_1_1Decoder.html">Decoder</a>
  </div>
</div>
<div class="contents">
<h1>クラス Decoder</h1><!-- doxytag: class="X86ISA::Decoder" -->
<p><code>#include &lt;<a class="el" href="x86_2decoder_8hh_source.html">decoder.hh</a>&gt;</code></p>

<p><a href="classX86ISA_1_1Decoder-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>構成</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structX86ISA_1_1Decoder_1_1InstBytes.html">InstBytes</a></td></tr>
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#aedfa2b7d97ed17b14903ed75d6214c78">Decoder</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a9b8f4112d3bbb779584ef8aaee237b25">setM5Reg</a> (HandyM5Reg m5Reg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a83393f90e7cbd98eda9721ba6022d0e0">takeOverFrom</a> (<a class="el" href="classX86ISA_1_1Decoder.html">Decoder</a> *old)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#ad20897c5c8bd47f5d4005989bead0e55">reset</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a2e9c5136d19b1a95fc427e0852deab5c">process</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a1345d078b309b7d115c57be1ed13ae38">moreBytes</a> (const <a class="el" href="classX86ISA_1_1PCState.html">PCState</a> &amp;<a class="el" href="namespaceX86ISA.html#aecb63c74e066ecd98e04d057e39028c9">pc</a>, <a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> fetchPC, <a class="el" href="namespaceX86ISA.html#a7ceadb544bf9b4a10579b7466b0ac008">MachInst</a> data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a35631c47fc45b69ca30e6551f9f5d1d1">needMoreBytes</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a9f6a0bc8946ca58d5d59a5dbc6a3181f">instReady</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#aab3a5fb7c37867f52f6fa72cc56ceb5e">updateNPC</a> (<a class="el" href="classX86ISA_1_1PCState.html">X86ISA::PCState</a> &amp;nextPC)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">StaticInstPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a148768e0e9062eb41f604040d0ea86e6">decodeInst</a> (<a class="el" href="structX86ISA_1_1ExtMachInst.html">ExtMachInst</a> mach_inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">StaticInstPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a4ed948f8d08575cc2916fe32154ea69d">decode</a> (<a class="el" href="structX86ISA_1_1ExtMachInst.html">ExtMachInst</a> mach_inst, <a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="el" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">StaticInstPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a2aa7b25617e9f15447ee6e934f4a3529">decode</a> (<a class="el" href="classX86ISA_1_1PCState.html">X86ISA::PCState</a> &amp;nextPC)</td></tr>
<tr><td colspan="2"><h2>Protected 型</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">State</a> { <br/>
&nbsp;&nbsp;<a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8aff67699080f325de2a7ddc37e246c9a8">ResetState</a>, 
<a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8abfa48baddbd48c27b1459423efa4bdd8">FromCacheState</a>, 
<a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8a2991411af91f1d4a5045fff0a9a3be9f">PrefixState</a>, 
<a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8a5dafe6854fcb6b0807bea9ce23744e64">OpcodeState</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8a1b1909a7067c96c6fa9205417b64bb29">ModRMState</a>, 
<a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8add2ba2a6d04fb8829afac6fcb5a57283">SIBState</a>, 
<a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8a6914e5c19cf114014f9ab8d94169c880">DisplacementState</a>, 
<a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8ae16af2d7c02e47eb62cd45a6fe42f48f">ImmediateState</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8ade97a2665a1361faea090134062c17b4">ErrorState</a>
<br/>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="namespaceX86ISA.html#aa16539aa6584fd12f7d6fa868f75b4de">MiscReg</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#af5cdf239a38ca71d83ddcf2b9a657cbe">CacheKey</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Caching for decoded instruction objects.  <a href="#af5cdf239a38ca71d83ddcf2b9a657cbe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classDecodeCache_1_1AddrMap.html">DecodeCache::AddrMap</a><br class="typebreak"/>
&lt; <a class="el" href="structX86ISA_1_1Decoder_1_1InstBytes.html">Decoder::InstBytes</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#aaeb98acb07222e8d393baae60333dd32">DecodePages</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef m5::hash_map&lt; <a class="el" href="classX86ISA_1_1Decoder.html#af5cdf239a38ca71d83ddcf2b9a657cbe">CacheKey</a>, <br class="typebreak"/>
<a class="el" href="classDecodeCache_1_1AddrMap.html">DecodePages</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a17e66c491b538e223da13acf9d77d5f2">AddrCacheMap</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef m5::hash_map&lt; <a class="el" href="classX86ISA_1_1Decoder.html#af5cdf239a38ca71d83ddcf2b9a657cbe">CacheKey</a>, <br class="typebreak"/>
<a class="el" href="namespaceDecodeCache.html#ac4aa7140c72815d25936c8dcf04191f1">DecodeCache::InstMap</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#accbfac5b46e737fd6326272fba1a8bb2">InstCacheMap</a></td></tr>
<tr><td colspan="2"><h2>Protected メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a8f47335339a66b8928a59b6e450ba23e">getNextByte</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#aca8cee2ca4f61924adea583f466e5c27">getImmediate</a> (int &amp;collected, uint64_t &amp;current, int size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a9b25276214b33147c8d3bf84e1aa778c">updateOffsetState</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#ac0b7514336823f27e26271bcad4563a8">consumeByte</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a34f1e4d13220afca8ec5c23596daba7e">consumeBytes</a> (int numBytes)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">State</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a3e359a01a10d324b1a5f5931b6aafb41">doResetState</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">State</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a8db8642a115e086e090c7aabf61b8b8d">doFromCacheState</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">State</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a34e20e41a8a8172e08cbf7f09ef390a1">doPrefixState</a> (uint8_t)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">State</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#af4ad421adb9b081935801bf19bf0d563">doOpcodeState</a> (uint8_t)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">State</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#af92cd28d02e33555be9f257fa37e988b">doModRMState</a> (uint8_t)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">State</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a429d36cbff305b40608c013c0c6a15b1">doSIBState</a> (uint8_t)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">State</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a159a4726e8800be2876f6d3100193d4d">doDisplacementState</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">State</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#ad402df3f8c4d1f4fb2b7a29d72ba00ec">doImmediateState</a> ()</td></tr>
<tr><td colspan="2"><h2>Protected 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceX86ISA.html#a7ceadb544bf9b4a10579b7466b0ac008">MachInst</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a273336b914b5b7edc5433d52385d932e">fetchChunk</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structX86ISA_1_1Decoder_1_1InstBytes.html">InstBytes</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a37ce03861bdaf0bdc992ddd28a8a08e0">chunkIdx</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a54317b5e28be49c4013e535159defb35">basePC</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#ad199f4799f06d6be603a02e3a05ea918">origPC</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#aed7ea92f45bd273dde380a45ddced592">offset</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structX86ISA_1_1ExtMachInst.html">ExtMachInst</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">X86Mode&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#ab3eab3edfcd7cfbe98f3d00c7e75048b">mode</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceX86ISA.html#a88701044b173f3a3f9c0d8b09e63eb1b">X86SubMode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a476c8dbd8e30b9067e6c2f0b7274be73">submode</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#ae1027509430cd109ced841df18ec4790">altOp</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#adf82151c683017bc9ab9fb7b70ff72fb">defOp</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a3f6baec3f8d9a651a37a3c5f9bfba2a4">altAddr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a63bbec903362b7e01fbf028a0afbfeb1">defAddr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#aef01e995775f4a7ba2367414f311dc73">stack</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a281c9bc4944bdbf837d5432478d43273">outOfBytes</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a37c5d55785204b8fd00a8ebf62e1fc33">instDone</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a494ae21b1676198853f989b5003e0c06">displacementSize</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a61f77f04393db6b7fe844adc3f78b644">immediateSize</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a9923210a91a1b233397e87d09325cfac">immediateCollected</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">State</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a876b486d3a5241a126bd5751c5f70f79">state</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDecodeCache_1_1AddrMap.html">DecodePages</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a259ba942ab7ed4dcb7661396959966be">decodePages</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classX86ISA_1_1Decoder.html#a17e66c491b538e223da13acf9d77d5f2">AddrCacheMap</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#aa5687d2256dc3674692589549cd833da">addrCacheMap</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceDecodeCache.html#ac4aa7140c72815d25936c8dcf04191f1">DecodeCache::InstMap</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a4c63c65e342dd96985ba874deb29db03">instMap</a></td></tr>
<tr><td colspan="2"><h2>Static Protected 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structX86ISA_1_1Decoder_1_1InstBytes.html">InstBytes</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#ab36b2d3338c466d225603823b5e4f9a4">dummy</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classX86ISA_1_1Decoder.html#accbfac5b46e737fd6326272fba1a8bb2">InstCacheMap</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a2f55fd436a83562102f84954df9f5ed0">instCacheMap</a></td></tr>
<tr><td colspan="2"><h2>Static Private 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a4790fc37f276d111825695679818d082">Prefixes</a> [256]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a6e9f1359a8e815c5bdd0efc306f5bf32">UsesModRM</a> [2][256]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a3f9cce9eaf915705c0fd4d90d9bcf8f8">ImmediateType</a> [2][256]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classX86ISA_1_1Decoder.html#a30eeeb2cd279f8cfcbafbd9873691d2f">SizeTypeToSize</a> [3][10]</td></tr>
</table>
<hr/><h2>型定義</h2>
<a class="anchor" id="a17e66c491b538e223da13acf9d77d5f2"></a><!-- doxytag: member="X86ISA::Decoder::AddrCacheMap" ref="a17e66c491b538e223da13acf9d77d5f2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef m5::hash_map&lt;<a class="el" href="classX86ISA_1_1Decoder.html#af5cdf239a38ca71d83ddcf2b9a657cbe">CacheKey</a>, <a class="el" href="classDecodeCache_1_1AddrMap.html">DecodePages</a> *&gt; <a class="el" href="classX86ISA_1_1Decoder.html#a17e66c491b538e223da13acf9d77d5f2">AddrCacheMap</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="af5cdf239a38ca71d83ddcf2b9a657cbe"></a><!-- doxytag: member="X86ISA::Decoder::CacheKey" ref="af5cdf239a38ca71d83ddcf2b9a657cbe" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="namespaceX86ISA.html#aa16539aa6584fd12f7d6fa868f75b4de">MiscReg</a> <a class="el" href="classX86ISA_1_1Decoder.html#af5cdf239a38ca71d83ddcf2b9a657cbe">CacheKey</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Caching for decoded instruction objects. </p>

</div>
</div>
<a class="anchor" id="aaeb98acb07222e8d393baae60333dd32"></a><!-- doxytag: member="X86ISA::Decoder::DecodePages" ref="aaeb98acb07222e8d393baae60333dd32" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classDecodeCache_1_1AddrMap.html">DecodeCache::AddrMap</a>&lt;<a class="el" href="structX86ISA_1_1Decoder_1_1InstBytes.html">Decoder::InstBytes</a>&gt; <a class="el" href="classDecodeCache_1_1AddrMap.html">DecodePages</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="accbfac5b46e737fd6326272fba1a8bb2"></a><!-- doxytag: member="X86ISA::Decoder::InstCacheMap" ref="accbfac5b46e737fd6326272fba1a8bb2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef m5::hash_map&lt;<a class="el" href="classX86ISA_1_1Decoder.html#af5cdf239a38ca71d83ddcf2b9a657cbe">CacheKey</a>, <a class="el" href="namespaceDecodeCache.html#ac4aa7140c72815d25936c8dcf04191f1">DecodeCache::InstMap</a> *&gt; <a class="el" href="classX86ISA_1_1Decoder.html#accbfac5b46e737fd6326272fba1a8bb2">InstCacheMap</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>列挙型</h2>
<a class="anchor" id="a5d74787dedbc4e11c1ab15bf487e61f8"></a><!-- doxytag: member="X86ISA::Decoder::State" ref="a5d74787dedbc4e11c1ab15bf487e61f8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">State</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>列挙型の値: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a5d74787dedbc4e11c1ab15bf487e61f8aff67699080f325de2a7ddc37e246c9a8"></a><!-- doxytag: member="ResetState" ref="a5d74787dedbc4e11c1ab15bf487e61f8aff67699080f325de2a7ddc37e246c9a8" args="" -->ResetState</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a5d74787dedbc4e11c1ab15bf487e61f8abfa48baddbd48c27b1459423efa4bdd8"></a><!-- doxytag: member="FromCacheState" ref="a5d74787dedbc4e11c1ab15bf487e61f8abfa48baddbd48c27b1459423efa4bdd8" args="" -->FromCacheState</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a5d74787dedbc4e11c1ab15bf487e61f8a2991411af91f1d4a5045fff0a9a3be9f"></a><!-- doxytag: member="PrefixState" ref="a5d74787dedbc4e11c1ab15bf487e61f8a2991411af91f1d4a5045fff0a9a3be9f" args="" -->PrefixState</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a5d74787dedbc4e11c1ab15bf487e61f8a5dafe6854fcb6b0807bea9ce23744e64"></a><!-- doxytag: member="OpcodeState" ref="a5d74787dedbc4e11c1ab15bf487e61f8a5dafe6854fcb6b0807bea9ce23744e64" args="" -->OpcodeState</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a5d74787dedbc4e11c1ab15bf487e61f8a1b1909a7067c96c6fa9205417b64bb29"></a><!-- doxytag: member="ModRMState" ref="a5d74787dedbc4e11c1ab15bf487e61f8a1b1909a7067c96c6fa9205417b64bb29" args="" -->ModRMState</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a5d74787dedbc4e11c1ab15bf487e61f8add2ba2a6d04fb8829afac6fcb5a57283"></a><!-- doxytag: member="SIBState" ref="a5d74787dedbc4e11c1ab15bf487e61f8add2ba2a6d04fb8829afac6fcb5a57283" args="" -->SIBState</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a5d74787dedbc4e11c1ab15bf487e61f8a6914e5c19cf114014f9ab8d94169c880"></a><!-- doxytag: member="DisplacementState" ref="a5d74787dedbc4e11c1ab15bf487e61f8a6914e5c19cf114014f9ab8d94169c880" args="" -->DisplacementState</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a5d74787dedbc4e11c1ab15bf487e61f8ae16af2d7c02e47eb62cd45a6fe42f48f"></a><!-- doxytag: member="ImmediateState" ref="a5d74787dedbc4e11c1ab15bf487e61f8ae16af2d7c02e47eb62cd45a6fe42f48f" args="" -->ImmediateState</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a5d74787dedbc4e11c1ab15bf487e61f8ade97a2665a1361faea090134062c17b4"></a><!-- doxytag: member="ErrorState" ref="a5d74787dedbc4e11c1ab15bf487e61f8ade97a2665a1361faea090134062c17b4" args="" -->ErrorState</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00165"></a>00165                {
<a name="l00166"></a>00166         <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8aff67699080f325de2a7ddc37e246c9a8">ResetState</a>,
<a name="l00167"></a>00167         <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8abfa48baddbd48c27b1459423efa4bdd8">FromCacheState</a>,
<a name="l00168"></a>00168         <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8a2991411af91f1d4a5045fff0a9a3be9f">PrefixState</a>,
<a name="l00169"></a>00169         <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8a5dafe6854fcb6b0807bea9ce23744e64">OpcodeState</a>,
<a name="l00170"></a>00170         <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8a1b1909a7067c96c6fa9205417b64bb29">ModRMState</a>,
<a name="l00171"></a>00171         <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8add2ba2a6d04fb8829afac6fcb5a57283">SIBState</a>,
<a name="l00172"></a>00172         <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8a6914e5c19cf114014f9ab8d94169c880">DisplacementState</a>,
<a name="l00173"></a>00173         <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8ae16af2d7c02e47eb62cd45a6fe42f48f">ImmediateState</a>,
<a name="l00174"></a>00174         <span class="comment">//We should never get to this state. Getting here is an error.</span>
<a name="l00175"></a>00175         <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8ade97a2665a1361faea090134062c17b4">ErrorState</a>
<a name="l00176"></a>00176     };
</pre></div></p>

</div>
</div>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="aedfa2b7d97ed17b14903ed75d6214c78"></a><!-- doxytag: member="X86ISA::Decoder::Decoder" ref="aedfa2b7d97ed17b14903ed75d6214c78" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classX86ISA_1_1Decoder.html">Decoder</a> </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00205"></a>00205               : <a class="code" href="classX86ISA_1_1Decoder.html#a54317b5e28be49c4013e535159defb35">basePC</a>(0), <a class="code" href="classX86ISA_1_1Decoder.html#ad199f4799f06d6be603a02e3a05ea918">origPC</a>(0), <a class="code" href="classX86ISA_1_1Decoder.html#aed7ea92f45bd273dde380a45ddced592">offset</a>(0),
<a name="l00206"></a>00206         <a class="code" href="classX86ISA_1_1Decoder.html#a281c9bc4944bdbf837d5432478d43273">outOfBytes</a>(<span class="keyword">true</span>), <a class="code" href="classX86ISA_1_1Decoder.html#a37c5d55785204b8fd00a8ebf62e1fc33">instDone</a>(<span class="keyword">false</span>),
<a name="l00207"></a>00207         <a class="code" href="classX86ISA_1_1Decoder.html#a876b486d3a5241a126bd5751c5f70f79">state</a>(<a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8aff67699080f325de2a7ddc37e246c9a8">ResetState</a>)
<a name="l00208"></a>00208     {
<a name="l00209"></a>00209         memset(&amp;<a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>));
<a name="l00210"></a>00210         <a class="code" href="classX86ISA_1_1Decoder.html#ab3eab3edfcd7cfbe98f3d00c7e75048b">mode</a> = LongMode;
<a name="l00211"></a>00211         <a class="code" href="classX86ISA_1_1Decoder.html#a476c8dbd8e30b9067e6c2f0b7274be73">submode</a> = <a class="code" href="namespaceX86ISA.html#a88701044b173f3a3f9c0d8b09e63eb1baf4b5a2e57762ba0a4b89a8f5dacbbf5b">SixtyFourBitMode</a>;
<a name="l00212"></a>00212         <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.mode.mode = <a class="code" href="classX86ISA_1_1Decoder.html#ab3eab3edfcd7cfbe98f3d00c7e75048b">mode</a>;
<a name="l00213"></a>00213         <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.mode.submode = <a class="code" href="classX86ISA_1_1Decoder.html#a476c8dbd8e30b9067e6c2f0b7274be73">submode</a>;
<a name="l00214"></a>00214         <a class="code" href="classX86ISA_1_1Decoder.html#ae1027509430cd109ced841df18ec4790">altOp</a> = 0;
<a name="l00215"></a>00215         <a class="code" href="classX86ISA_1_1Decoder.html#adf82151c683017bc9ab9fb7b70ff72fb">defOp</a> = 0;
<a name="l00216"></a>00216         <a class="code" href="classX86ISA_1_1Decoder.html#a3f6baec3f8d9a651a37a3c5f9bfba2a4">altAddr</a> = 0;
<a name="l00217"></a>00217         <a class="code" href="classX86ISA_1_1Decoder.html#a63bbec903362b7e01fbf028a0afbfeb1">defAddr</a> = 0;
<a name="l00218"></a>00218         <a class="code" href="classX86ISA_1_1Decoder.html#aef01e995775f4a7ba2367414f311dc73">stack</a> = 0;
<a name="l00219"></a>00219         <a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a> = &amp;<a class="code" href="classX86ISA_1_1Decoder.html#ab36b2d3338c466d225603823b5e4f9a4">dummy</a>;
<a name="l00220"></a>00220         <a class="code" href="classX86ISA_1_1Decoder.html#a259ba942ab7ed4dcb7661396959966be">decodePages</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00221"></a>00221         <a class="code" href="classX86ISA_1_1Decoder.html#a4c63c65e342dd96985ba874deb29db03">instMap</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00222"></a>00222     }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="ac0b7514336823f27e26271bcad4563a8"></a><!-- doxytag: member="X86ISA::Decoder::consumeByte" ref="ac0b7514336823f27e26271bcad4563a8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void consumeByte </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00140"></a>00140     {
<a name="l00141"></a>00141         <a class="code" href="classX86ISA_1_1Decoder.html#aed7ea92f45bd273dde380a45ddced592">offset</a>++;
<a name="l00142"></a>00142         <a class="code" href="classX86ISA_1_1Decoder.html#a9b25276214b33147c8d3bf84e1aa778c">updateOffsetState</a>();
<a name="l00143"></a>00143     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a34f1e4d13220afca8ec5c23596daba7e"></a><!-- doxytag: member="X86ISA::Decoder::consumeBytes" ref="a34f1e4d13220afca8ec5c23596daba7e" args="(int numBytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void consumeBytes </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numBytes</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00146"></a>00146     {
<a name="l00147"></a>00147         <a class="code" href="classX86ISA_1_1Decoder.html#aed7ea92f45bd273dde380a45ddced592">offset</a> += numBytes;
<a name="l00148"></a>00148         <a class="code" href="classX86ISA_1_1Decoder.html#a9b25276214b33147c8d3bf84e1aa778c">updateOffsetState</a>();
<a name="l00149"></a>00149     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2aa7b25617e9f15447ee6e934f4a3529"></a><!-- doxytag: member="X86ISA::Decoder::decode" ref="a2aa7b25617e9f15447ee6e934f4a3529" args="(X86ISA::PCState &amp;nextPC)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">StaticInstPtr</a> decode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classX86ISA_1_1PCState.html">X86ISA::PCState</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>nextPC</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00478"></a>00478 {
<a name="l00479"></a>00479     <span class="keywordflow">if</span> (!<a class="code" href="classX86ISA_1_1Decoder.html#a37c5d55785204b8fd00a8ebf62e1fc33">instDone</a>)
<a name="l00480"></a>00480         <span class="keywordflow">return</span> <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00481"></a>00481     <a class="code" href="classX86ISA_1_1Decoder.html#a37c5d55785204b8fd00a8ebf62e1fc33">instDone</a> = <span class="keyword">false</span>;
<a name="l00482"></a>00482     <a class="code" href="classX86ISA_1_1Decoder.html#aab3a5fb7c37867f52f6fa72cc56ceb5e">updateNPC</a>(nextPC);
<a name="l00483"></a>00483 
<a name="l00484"></a>00484     <a class="code" href="classRefCountingPtr.html">StaticInstPtr</a> &amp;<a class="code" href="namespaceX86ISA.html#ab6397ccc8be859399c8226d4c33f6038">si</a> = <a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a>-&gt;<a class="code" href="structX86ISA_1_1Decoder_1_1InstBytes.html#ab06cd255e6bbc9122ae8010deb227fcb">si</a>;
<a name="l00485"></a>00485     <span class="keywordflow">if</span> (si)
<a name="l00486"></a>00486         <span class="keywordflow">return</span> si;
<a name="l00487"></a>00487 
<a name="l00488"></a>00488     <span class="comment">// We didn&apos;t match in the AddrMap, but we still populated an entry. Fix</span>
<a name="l00489"></a>00489     <span class="comment">// up its byte masks.</span>
<a name="l00490"></a>00490     <span class="keyword">const</span> <span class="keywordtype">int</span> chunkSize = <span class="keyword">sizeof</span>(<a class="code" href="namespaceX86ISA.html#a7ceadb544bf9b4a10579b7466b0ac008">MachInst</a>);
<a name="l00491"></a>00491 
<a name="l00492"></a>00492     <a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a>-&gt;<a class="code" href="structX86ISA_1_1Decoder_1_1InstBytes.html#a50e2e39cbf969a7838e50a0dc8ddf88d">lastOffset</a> = <a class="code" href="classX86ISA_1_1Decoder.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l00493"></a>00493 
<a name="l00494"></a>00494     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> firstBasePC = <a class="code" href="classX86ISA_1_1Decoder.html#a54317b5e28be49c4013e535159defb35">basePC</a> - (<a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a>-&gt;<a class="code" href="structX86ISA_1_1Decoder_1_1InstBytes.html#af7aeb5f9436fa23d13dae1008bace5bd">chunks</a>.size() - 1) * chunkSize;
<a name="l00495"></a>00495     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> firstOffset = <a class="code" href="classX86ISA_1_1Decoder.html#ad199f4799f06d6be603a02e3a05ea918">origPC</a> - firstBasePC;
<a name="l00496"></a>00496     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="code" href="inorder__dyn__inst_8cc.html#ae5c44a5a69acb93dfc5b93718b5c98ab">totalSize</a> = <a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a>-&gt;<a class="code" href="structX86ISA_1_1Decoder_1_1InstBytes.html#a50e2e39cbf969a7838e50a0dc8ddf88d">lastOffset</a> - firstOffset +
<a name="l00497"></a>00497         (<a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a>-&gt;<a class="code" href="structX86ISA_1_1Decoder_1_1InstBytes.html#af7aeb5f9436fa23d13dae1008bace5bd">chunks</a>.size() - 1) * chunkSize;
<a name="l00498"></a>00498     <span class="keywordtype">int</span> start = firstOffset;
<a name="l00499"></a>00499     <a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a>-&gt;<a class="code" href="structX86ISA_1_1Decoder_1_1InstBytes.html#ab2cdbb4c6963b40aa0924277bea8f8bf">masks</a>.clear();
<a name="l00500"></a>00500 
<a name="l00501"></a>00501     <span class="keywordflow">while</span> (totalSize) {
<a name="l00502"></a>00502         <span class="keywordtype">int</span> end = start + totalSize;
<a name="l00503"></a>00503         end = (chunkSize &lt; end) ? chunkSize : end;
<a name="l00504"></a>00504         <span class="keywordtype">int</span> size = end - start;
<a name="l00505"></a>00505         <span class="keywordtype">int</span> idx = <a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a>-&gt;<a class="code" href="structX86ISA_1_1Decoder_1_1InstBytes.html#ab2cdbb4c6963b40aa0924277bea8f8bf">masks</a>.size();
<a name="l00506"></a>00506 
<a name="l00507"></a>00507         <a class="code" href="namespaceX86ISA.html#a7ceadb544bf9b4a10579b7466b0ac008">MachInst</a> maskVal = <a class="code" href="namespaceX86ISA.html#a5d76cc2129e79ba1941d2cc2f53b9e8e">mask</a>(size * 8) &lt;&lt; (start * 8);
<a name="l00508"></a>00508         assert(maskVal);
<a name="l00509"></a>00509 
<a name="l00510"></a>00510         <a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a>-&gt;<a class="code" href="structX86ISA_1_1Decoder_1_1InstBytes.html#ab2cdbb4c6963b40aa0924277bea8f8bf">masks</a>.push_back(maskVal);
<a name="l00511"></a>00511         <a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a>-&gt;<a class="code" href="structX86ISA_1_1Decoder_1_1InstBytes.html#af7aeb5f9436fa23d13dae1008bace5bd">chunks</a>[idx] &amp;= <a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a>-&gt;<a class="code" href="structX86ISA_1_1Decoder_1_1InstBytes.html#ab2cdbb4c6963b40aa0924277bea8f8bf">masks</a>[idx];
<a name="l00512"></a>00512         totalSize -= size;
<a name="l00513"></a>00513         start = 0;
<a name="l00514"></a>00514     }
<a name="l00515"></a>00515 
<a name="l00516"></a>00516     si = <a class="code" href="classX86ISA_1_1Decoder.html#a4ed948f8d08575cc2916fe32154ea69d">decode</a>(<a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>, <a class="code" href="classX86ISA_1_1Decoder.html#ad199f4799f06d6be603a02e3a05ea918">origPC</a>);
<a name="l00517"></a>00517     <span class="keywordflow">return</span> si;
<a name="l00518"></a>00518 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4ed948f8d08575cc2916fe32154ea69d"></a><!-- doxytag: member="X86ISA::Decoder::decode" ref="a4ed948f8d08575cc2916fe32154ea69d" args="(ExtMachInst mach_inst, Addr addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">StaticInstPtr</a> decode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structX86ISA_1_1ExtMachInst.html">ExtMachInst</a>&nbsp;</td>
          <td class="paramname"> <em>mach_inst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>addr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Decode a machine instruction. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mach_inst</em>&nbsp;</td><td>The binary instruction to decode. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>戻り値:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>A</em>&nbsp;</td><td>pointer to the corresponding <a class="el" href="classStaticInst.html">StaticInst</a> object. </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00466"></a>00466 {
<a name="l00467"></a>00467     DecodeCache::InstMap::iterator iter = <a class="code" href="classX86ISA_1_1Decoder.html#a4c63c65e342dd96985ba874deb29db03">instMap</a>-&gt;find(mach_inst);
<a name="l00468"></a>00468     <span class="keywordflow">if</span> (iter != <a class="code" href="classX86ISA_1_1Decoder.html#a4c63c65e342dd96985ba874deb29db03">instMap</a>-&gt;end())
<a name="l00469"></a>00469         <span class="keywordflow">return</span> iter-&gt;second;
<a name="l00470"></a>00470 
<a name="l00471"></a>00471     <a class="code" href="classRefCountingPtr.html">StaticInstPtr</a> <a class="code" href="namespaceX86ISA.html#ab6397ccc8be859399c8226d4c33f6038">si</a> = <a class="code" href="classX86ISA_1_1Decoder.html#a148768e0e9062eb41f604040d0ea86e6">decodeInst</a>(mach_inst);
<a name="l00472"></a>00472     (*instMap)[mach_inst] = <a class="code" href="namespaceX86ISA.html#ab6397ccc8be859399c8226d4c33f6038">si</a>;
<a name="l00473"></a>00473     <span class="keywordflow">return</span> <a class="code" href="namespaceX86ISA.html#ab6397ccc8be859399c8226d4c33f6038">si</a>;
<a name="l00474"></a>00474 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a148768e0e9062eb41f604040d0ea86e6"></a><!-- doxytag: member="X86ISA::Decoder::decodeInst" ref="a148768e0e9062eb41f604040d0ea86e6" args="(ExtMachInst mach_inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">StaticInstPtr</a> decodeInst </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structX86ISA_1_1ExtMachInst.html">ExtMachInst</a>&nbsp;</td>
          <td class="paramname"> <em>mach_inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a159a4726e8800be2876f6d3100193d4d"></a><!-- doxytag: member="X86ISA::Decoder::doDisplacementState" ref="a159a4726e8800be2876f6d3100193d4d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">Decoder::State</a> doDisplacementState </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00371"></a>00371 {
<a name="l00372"></a>00372     <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">State</a> nextState = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8ade97a2665a1361faea090134062c17b4">ErrorState</a>;
<a name="l00373"></a>00373 
<a name="l00374"></a>00374     <a class="code" href="classX86ISA_1_1Decoder.html#aca8cee2ca4f61924adea583f466e5c27">getImmediate</a>(<a class="code" href="classX86ISA_1_1Decoder.html#a9923210a91a1b233397e87d09325cfac">immediateCollected</a>,
<a name="l00375"></a>00375             <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.displacement,
<a name="l00376"></a>00376             <a class="code" href="classX86ISA_1_1Decoder.html#a494ae21b1676198853f989b5003e0c06">displacementSize</a>);
<a name="l00377"></a>00377 
<a name="l00378"></a>00378     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classX86ISA_1_1Decoder.html#aedfa2b7d97ed17b14903ed75d6214c78">Decoder</a>, <span class="stringliteral">&quot;Collecting %d byte displacement, got %d bytes.\n&quot;</span>,
<a name="l00379"></a>00379             <a class="code" href="classX86ISA_1_1Decoder.html#a494ae21b1676198853f989b5003e0c06">displacementSize</a>, <a class="code" href="classX86ISA_1_1Decoder.html#a9923210a91a1b233397e87d09325cfac">immediateCollected</a>);
<a name="l00380"></a>00380 
<a name="l00381"></a>00381     <span class="keywordflow">if</span>(<a class="code" href="classX86ISA_1_1Decoder.html#a494ae21b1676198853f989b5003e0c06">displacementSize</a> == <a class="code" href="classX86ISA_1_1Decoder.html#a9923210a91a1b233397e87d09325cfac">immediateCollected</a>) {
<a name="l00382"></a>00382         <span class="comment">//Reset this for other immediates.</span>
<a name="l00383"></a>00383         <a class="code" href="classX86ISA_1_1Decoder.html#a9923210a91a1b233397e87d09325cfac">immediateCollected</a> = 0;
<a name="l00384"></a>00384         <span class="comment">//Sign extend the displacement</span>
<a name="l00385"></a>00385         <span class="keywordflow">switch</span>(<a class="code" href="classX86ISA_1_1Decoder.html#a494ae21b1676198853f989b5003e0c06">displacementSize</a>)
<a name="l00386"></a>00386         {
<a name="l00387"></a>00387           <span class="keywordflow">case</span> 1:
<a name="l00388"></a>00388             <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.displacement = sext&lt;8&gt;(<a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.displacement);
<a name="l00389"></a>00389             <span class="keywordflow">break</span>;
<a name="l00390"></a>00390           <span class="keywordflow">case</span> 2:
<a name="l00391"></a>00391             <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.displacement = sext&lt;16&gt;(<a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.displacement);
<a name="l00392"></a>00392             <span class="keywordflow">break</span>;
<a name="l00393"></a>00393           <span class="keywordflow">case</span> 4:
<a name="l00394"></a>00394             <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.displacement = sext&lt;32&gt;(<a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.displacement);
<a name="l00395"></a>00395             <span class="keywordflow">break</span>;
<a name="l00396"></a>00396           <span class="keywordflow">default</span>:
<a name="l00397"></a>00397             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Undefined displacement size!\n&quot;</span>);
<a name="l00398"></a>00398         }
<a name="l00399"></a>00399         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classX86ISA_1_1Decoder.html#aedfa2b7d97ed17b14903ed75d6214c78">Decoder</a>, <span class="stringliteral">&quot;Collected displacement %#x.\n&quot;</span>,
<a name="l00400"></a>00400                 <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.displacement);
<a name="l00401"></a>00401         <span class="keywordflow">if</span>(<a class="code" href="classX86ISA_1_1Decoder.html#a61f77f04393db6b7fe844adc3f78b644">immediateSize</a>) {
<a name="l00402"></a>00402             nextState = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8ae16af2d7c02e47eb62cd45a6fe42f48f">ImmediateState</a>;
<a name="l00403"></a>00403         } <span class="keywordflow">else</span> {
<a name="l00404"></a>00404             <a class="code" href="classX86ISA_1_1Decoder.html#a37c5d55785204b8fd00a8ebf62e1fc33">instDone</a> = <span class="keyword">true</span>;
<a name="l00405"></a>00405             nextState = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8aff67699080f325de2a7ddc37e246c9a8">ResetState</a>;
<a name="l00406"></a>00406         }
<a name="l00407"></a>00407 
<a name="l00408"></a>00408         <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.dispSize = <a class="code" href="classX86ISA_1_1Decoder.html#a494ae21b1676198853f989b5003e0c06">displacementSize</a>;
<a name="l00409"></a>00409     }
<a name="l00410"></a>00410     <span class="keywordflow">else</span>
<a name="l00411"></a>00411         nextState = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8a6914e5c19cf114014f9ab8d94169c880">DisplacementState</a>;
<a name="l00412"></a>00412     <span class="keywordflow">return</span> nextState;
<a name="l00413"></a>00413 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8db8642a115e086e090c7aabf61b8b8d"></a><!-- doxytag: member="X86ISA::Decoder::doFromCacheState" ref="a8db8642a115e086e090c7aabf61b8b8d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">Decoder::State</a> doFromCacheState </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00122"></a>00122 {
<a name="l00123"></a>00123     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classX86ISA_1_1Decoder.html#aedfa2b7d97ed17b14903ed75d6214c78">Decoder</a>, <span class="stringliteral">&quot;Looking at cache state.\n&quot;</span>);
<a name="l00124"></a>00124     <span class="keywordflow">if</span> ((<a class="code" href="classX86ISA_1_1Decoder.html#a273336b914b5b7edc5433d52385d932e">fetchChunk</a> &amp; <a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a>-&gt;<a class="code" href="structX86ISA_1_1Decoder_1_1InstBytes.html#ab2cdbb4c6963b40aa0924277bea8f8bf">masks</a>[<a class="code" href="classX86ISA_1_1Decoder.html#a37ce03861bdaf0bdc992ddd28a8a08e0">chunkIdx</a>]) !=
<a name="l00125"></a>00125             <a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a>-&gt;<a class="code" href="structX86ISA_1_1Decoder_1_1InstBytes.html#af7aeb5f9436fa23d13dae1008bace5bd">chunks</a>[chunkIdx]) {
<a name="l00126"></a>00126         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classX86ISA_1_1Decoder.html#aedfa2b7d97ed17b14903ed75d6214c78">Decoder</a>, <span class="stringliteral">&quot;Decode cache miss.\n&quot;</span>);
<a name="l00127"></a>00127         <span class="comment">// The chached chunks didn&apos;t match what was fetched. Fall back to the</span>
<a name="l00128"></a>00128         <span class="comment">// predecoder.</span>
<a name="l00129"></a>00129         <a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a>-&gt;<a class="code" href="structX86ISA_1_1Decoder_1_1InstBytes.html#af7aeb5f9436fa23d13dae1008bace5bd">chunks</a>[chunkIdx] = <a class="code" href="classX86ISA_1_1Decoder.html#a273336b914b5b7edc5433d52385d932e">fetchChunk</a>;
<a name="l00130"></a>00130         <a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a>-&gt;<a class="code" href="structX86ISA_1_1Decoder_1_1InstBytes.html#af7aeb5f9436fa23d13dae1008bace5bd">chunks</a>.resize(chunkIdx + 1);
<a name="l00131"></a>00131         <a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a>-&gt;<a class="code" href="structX86ISA_1_1Decoder_1_1InstBytes.html#ab06cd255e6bbc9122ae8010deb227fcb">si</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00132"></a>00132         chunkIdx = 0;
<a name="l00133"></a>00133         <a class="code" href="classX86ISA_1_1Decoder.html#a273336b914b5b7edc5433d52385d932e">fetchChunk</a> = <a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a>-&gt;<a class="code" href="structX86ISA_1_1Decoder_1_1InstBytes.html#af7aeb5f9436fa23d13dae1008bace5bd">chunks</a>[0];
<a name="l00134"></a>00134         <a class="code" href="classX86ISA_1_1Decoder.html#aed7ea92f45bd273dde380a45ddced592">offset</a> = <a class="code" href="classX86ISA_1_1Decoder.html#ad199f4799f06d6be603a02e3a05ea918">origPC</a> % <span class="keyword">sizeof</span>(<a class="code" href="namespaceX86ISA.html#a7ceadb544bf9b4a10579b7466b0ac008">MachInst</a>);
<a name="l00135"></a>00135         <a class="code" href="classX86ISA_1_1Decoder.html#a54317b5e28be49c4013e535159defb35">basePC</a> = <a class="code" href="classX86ISA_1_1Decoder.html#ad199f4799f06d6be603a02e3a05ea918">origPC</a> - <a class="code" href="classX86ISA_1_1Decoder.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l00136"></a>00136         <span class="keywordflow">return</span> <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8a2991411af91f1d4a5045fff0a9a3be9f">PrefixState</a>;
<a name="l00137"></a>00137     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (chunkIdx == <a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a>-&gt;<a class="code" href="structX86ISA_1_1Decoder_1_1InstBytes.html#af7aeb5f9436fa23d13dae1008bace5bd">chunks</a>.size() - 1) {
<a name="l00138"></a>00138         <span class="comment">// We matched the cache, so use its value.</span>
<a name="l00139"></a>00139         <a class="code" href="classX86ISA_1_1Decoder.html#a37c5d55785204b8fd00a8ebf62e1fc33">instDone</a> = <span class="keyword">true</span>;
<a name="l00140"></a>00140         <a class="code" href="classX86ISA_1_1Decoder.html#aed7ea92f45bd273dde380a45ddced592">offset</a> = <a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a>-&gt;<a class="code" href="structX86ISA_1_1Decoder_1_1InstBytes.html#a50e2e39cbf969a7838e50a0dc8ddf88d">lastOffset</a>;
<a name="l00141"></a>00141         <span class="keywordflow">if</span> (<a class="code" href="classX86ISA_1_1Decoder.html#aed7ea92f45bd273dde380a45ddced592">offset</a> == <span class="keyword">sizeof</span>(<a class="code" href="namespaceX86ISA.html#a7ceadb544bf9b4a10579b7466b0ac008">MachInst</a>))
<a name="l00142"></a>00142             <a class="code" href="classX86ISA_1_1Decoder.html#a281c9bc4944bdbf837d5432478d43273">outOfBytes</a> = <span class="keyword">true</span>;
<a name="l00143"></a>00143         <span class="keywordflow">return</span> <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8aff67699080f325de2a7ddc37e246c9a8">ResetState</a>;
<a name="l00144"></a>00144     } <span class="keywordflow">else</span> {
<a name="l00145"></a>00145         <span class="comment">// We matched so far, but need to check more chunks.</span>
<a name="l00146"></a>00146         chunkIdx++;
<a name="l00147"></a>00147         <a class="code" href="classX86ISA_1_1Decoder.html#a281c9bc4944bdbf837d5432478d43273">outOfBytes</a> = <span class="keyword">true</span>;
<a name="l00148"></a>00148         <span class="keywordflow">return</span> <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8abfa48baddbd48c27b1459423efa4bdd8">FromCacheState</a>;
<a name="l00149"></a>00149     }
<a name="l00150"></a>00150 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad402df3f8c4d1f4fb2b7a29d72ba00ec"></a><!-- doxytag: member="X86ISA::Decoder::doImmediateState" ref="ad402df3f8c4d1f4fb2b7a29d72ba00ec" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">Decoder::State</a> doImmediateState </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00419"></a>00419 {
<a name="l00420"></a>00420     <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">State</a> nextState = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8ade97a2665a1361faea090134062c17b4">ErrorState</a>;
<a name="l00421"></a>00421 
<a name="l00422"></a>00422     <a class="code" href="classX86ISA_1_1Decoder.html#aca8cee2ca4f61924adea583f466e5c27">getImmediate</a>(<a class="code" href="classX86ISA_1_1Decoder.html#a9923210a91a1b233397e87d09325cfac">immediateCollected</a>,
<a name="l00423"></a>00423             <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.immediate,
<a name="l00424"></a>00424             <a class="code" href="classX86ISA_1_1Decoder.html#a61f77f04393db6b7fe844adc3f78b644">immediateSize</a>);
<a name="l00425"></a>00425 
<a name="l00426"></a>00426     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classX86ISA_1_1Decoder.html#aedfa2b7d97ed17b14903ed75d6214c78">Decoder</a>, <span class="stringliteral">&quot;Collecting %d byte immediate, got %d bytes.\n&quot;</span>,
<a name="l00427"></a>00427             <a class="code" href="classX86ISA_1_1Decoder.html#a61f77f04393db6b7fe844adc3f78b644">immediateSize</a>, <a class="code" href="classX86ISA_1_1Decoder.html#a9923210a91a1b233397e87d09325cfac">immediateCollected</a>);
<a name="l00428"></a>00428 
<a name="l00429"></a>00429     <span class="keywordflow">if</span>(<a class="code" href="classX86ISA_1_1Decoder.html#a61f77f04393db6b7fe844adc3f78b644">immediateSize</a> == <a class="code" href="classX86ISA_1_1Decoder.html#a9923210a91a1b233397e87d09325cfac">immediateCollected</a>)
<a name="l00430"></a>00430     {
<a name="l00431"></a>00431         <span class="comment">//Reset this for other immediates.</span>
<a name="l00432"></a>00432         <a class="code" href="classX86ISA_1_1Decoder.html#a9923210a91a1b233397e87d09325cfac">immediateCollected</a> = 0;
<a name="l00433"></a>00433 
<a name="l00434"></a>00434         <span class="comment">//XXX Warning! The following is an observed pattern and might</span>
<a name="l00435"></a>00435         <span class="comment">//not always be true!</span>
<a name="l00436"></a>00436 
<a name="l00437"></a>00437         <span class="comment">//Instructions which use 64 bit operands but 32 bit immediates</span>
<a name="l00438"></a>00438         <span class="comment">//need to have the immediate sign extended to 64 bits.</span>
<a name="l00439"></a>00439         <span class="comment">//Instructions which use true 64 bit immediates won&apos;t be</span>
<a name="l00440"></a>00440         <span class="comment">//affected, and instructions that use true 32 bit immediates</span>
<a name="l00441"></a>00441         <span class="comment">//won&apos;t notice.</span>
<a name="l00442"></a>00442         <span class="keywordflow">switch</span>(<a class="code" href="classX86ISA_1_1Decoder.html#a61f77f04393db6b7fe844adc3f78b644">immediateSize</a>)
<a name="l00443"></a>00443         {
<a name="l00444"></a>00444           <span class="keywordflow">case</span> 4:
<a name="l00445"></a>00445             <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.immediate = sext&lt;32&gt;(<a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.immediate);
<a name="l00446"></a>00446             <span class="keywordflow">break</span>;
<a name="l00447"></a>00447           <span class="keywordflow">case</span> 1:
<a name="l00448"></a>00448             <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.immediate = sext&lt;8&gt;(<a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.immediate);
<a name="l00449"></a>00449         }
<a name="l00450"></a>00450 
<a name="l00451"></a>00451         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classX86ISA_1_1Decoder.html#aedfa2b7d97ed17b14903ed75d6214c78">Decoder</a>, <span class="stringliteral">&quot;Collected immediate %#x.\n&quot;</span>,
<a name="l00452"></a>00452                 <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.immediate);
<a name="l00453"></a>00453         <a class="code" href="classX86ISA_1_1Decoder.html#a37c5d55785204b8fd00a8ebf62e1fc33">instDone</a> = <span class="keyword">true</span>;
<a name="l00454"></a>00454         nextState = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8aff67699080f325de2a7ddc37e246c9a8">ResetState</a>;
<a name="l00455"></a>00455     }
<a name="l00456"></a>00456     <span class="keywordflow">else</span>
<a name="l00457"></a>00457         nextState = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8ae16af2d7c02e47eb62cd45a6fe42f48f">ImmediateState</a>;
<a name="l00458"></a>00458     <span class="keywordflow">return</span> nextState;
<a name="l00459"></a>00459 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af92cd28d02e33555be9f257fa37e988b"></a><!-- doxytag: member="X86ISA::Decoder::doModRMState" ref="af92cd28d02e33555be9f257fa37e988b" args="(uint8_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">Decoder::State</a> doModRMState </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>nextByte</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00293"></a>00293 {
<a name="l00294"></a>00294     <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">State</a> nextState = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8ade97a2665a1361faea090134062c17b4">ErrorState</a>;
<a name="l00295"></a>00295     ModRM modRM;
<a name="l00296"></a>00296     modRM = nextByte;
<a name="l00297"></a>00297     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classX86ISA_1_1Decoder.html#aedfa2b7d97ed17b14903ed75d6214c78">Decoder</a>, <span class="stringliteral">&quot;Found modrm byte %#x.\n&quot;</span>, nextByte);
<a name="l00298"></a>00298     <span class="keywordflow">if</span> (<a class="code" href="classX86ISA_1_1Decoder.html#adf82151c683017bc9ab9fb7b70ff72fb">defOp</a> == 1) {
<a name="l00299"></a>00299         <span class="comment">//figure out 16 bit displacement size</span>
<a name="l00300"></a>00300         <span class="keywordflow">if</span> ((modRM.mod == 0 &amp;&amp; modRM.rm == 6) || modRM.mod == 2)
<a name="l00301"></a>00301             <a class="code" href="classX86ISA_1_1Decoder.html#a494ae21b1676198853f989b5003e0c06">displacementSize</a> = 2;
<a name="l00302"></a>00302         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (modRM.mod == 1)
<a name="l00303"></a>00303             <a class="code" href="classX86ISA_1_1Decoder.html#a494ae21b1676198853f989b5003e0c06">displacementSize</a> = 1;
<a name="l00304"></a>00304         <span class="keywordflow">else</span>
<a name="l00305"></a>00305             <a class="code" href="classX86ISA_1_1Decoder.html#a494ae21b1676198853f989b5003e0c06">displacementSize</a> = 0;
<a name="l00306"></a>00306     } <span class="keywordflow">else</span> {
<a name="l00307"></a>00307         <span class="comment">//figure out 32/64 bit displacement size</span>
<a name="l00308"></a>00308         <span class="keywordflow">if</span> ((modRM.mod == 0 &amp;&amp; modRM.rm == 5) || modRM.mod == 2)
<a name="l00309"></a>00309             <a class="code" href="classX86ISA_1_1Decoder.html#a494ae21b1676198853f989b5003e0c06">displacementSize</a> = 4;
<a name="l00310"></a>00310         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (modRM.mod == 1)
<a name="l00311"></a>00311             <a class="code" href="classX86ISA_1_1Decoder.html#a494ae21b1676198853f989b5003e0c06">displacementSize</a> = 1;
<a name="l00312"></a>00312         <span class="keywordflow">else</span>
<a name="l00313"></a>00313             <a class="code" href="classX86ISA_1_1Decoder.html#a494ae21b1676198853f989b5003e0c06">displacementSize</a> = 0;
<a name="l00314"></a>00314     }
<a name="l00315"></a>00315 
<a name="l00316"></a>00316     <span class="comment">// The &quot;test&quot; instruction in group 3 needs an immediate, even though</span>
<a name="l00317"></a>00317     <span class="comment">// the other instructions with the same actual opcode don&apos;t.</span>
<a name="l00318"></a>00318     <span class="keywordflow">if</span> (<a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.opcode.num == 1 &amp;&amp; (modRM.reg &amp; 0x6) == 0) {
<a name="l00319"></a>00319        <span class="keywordflow">if</span> (<a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.opcode.op == 0xF6)
<a name="l00320"></a>00320            <a class="code" href="classX86ISA_1_1Decoder.html#a61f77f04393db6b7fe844adc3f78b644">immediateSize</a> = 1;
<a name="l00321"></a>00321        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.opcode.op == 0xF7)
<a name="l00322"></a>00322            <a class="code" href="classX86ISA_1_1Decoder.html#a61f77f04393db6b7fe844adc3f78b644">immediateSize</a> = (<a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.opSize == 8) ? 4 : <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.opSize;
<a name="l00323"></a>00323     }
<a name="l00324"></a>00324 
<a name="l00325"></a>00325     <span class="comment">//If there&apos;s an SIB, get that next.</span>
<a name="l00326"></a>00326     <span class="comment">//There is no SIB in 16 bit mode.</span>
<a name="l00327"></a>00327     <span class="keywordflow">if</span> (modRM.rm == 4 &amp;&amp; modRM.mod != 3) {
<a name="l00328"></a>00328             <span class="comment">// &amp;&amp; in 32/64 bit mode)</span>
<a name="l00329"></a>00329         nextState = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8add2ba2a6d04fb8829afac6fcb5a57283">SIBState</a>;
<a name="l00330"></a>00330     } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classX86ISA_1_1Decoder.html#a494ae21b1676198853f989b5003e0c06">displacementSize</a>) {
<a name="l00331"></a>00331         nextState = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8a6914e5c19cf114014f9ab8d94169c880">DisplacementState</a>;
<a name="l00332"></a>00332     } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classX86ISA_1_1Decoder.html#a61f77f04393db6b7fe844adc3f78b644">immediateSize</a>) {
<a name="l00333"></a>00333         nextState = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8ae16af2d7c02e47eb62cd45a6fe42f48f">ImmediateState</a>;
<a name="l00334"></a>00334     } <span class="keywordflow">else</span> {
<a name="l00335"></a>00335         <a class="code" href="classX86ISA_1_1Decoder.html#a37c5d55785204b8fd00a8ebf62e1fc33">instDone</a> = <span class="keyword">true</span>;
<a name="l00336"></a>00336         nextState = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8aff67699080f325de2a7ddc37e246c9a8">ResetState</a>;
<a name="l00337"></a>00337     }
<a name="l00338"></a>00338     <span class="comment">//The ModRM byte is consumed no matter what</span>
<a name="l00339"></a>00339     <a class="code" href="classX86ISA_1_1Decoder.html#ac0b7514336823f27e26271bcad4563a8">consumeByte</a>();
<a name="l00340"></a>00340     <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.modRM = modRM;
<a name="l00341"></a>00341     <span class="keywordflow">return</span> nextState;
<a name="l00342"></a>00342 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af4ad421adb9b081935801bf19bf0d563"></a><!-- doxytag: member="X86ISA::Decoder::doOpcodeState" ref="af4ad421adb9b081935801bf19bf0d563" args="(uint8_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">Decoder::State</a> doOpcodeState </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>nextByte</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00214"></a>00214 {
<a name="l00215"></a>00215     <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">State</a> nextState = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8ade97a2665a1361faea090134062c17b4">ErrorState</a>;
<a name="l00216"></a>00216     <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.opcode.num++;
<a name="l00217"></a>00217     <span class="comment">//We can&apos;t handle 3+ byte opcodes right now</span>
<a name="l00218"></a>00218     assert(<a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.opcode.num &lt; 4);
<a name="l00219"></a>00219     <a class="code" href="classX86ISA_1_1Decoder.html#ac0b7514336823f27e26271bcad4563a8">consumeByte</a>();
<a name="l00220"></a>00220     <span class="keywordflow">if</span>(<a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.opcode.num == 1 &amp;&amp; nextByte == 0x0f)
<a name="l00221"></a>00221     {
<a name="l00222"></a>00222         nextState = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8a5dafe6854fcb6b0807bea9ce23744e64">OpcodeState</a>;
<a name="l00223"></a>00223         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classX86ISA_1_1Decoder.html#aedfa2b7d97ed17b14903ed75d6214c78">Decoder</a>, <span class="stringliteral">&quot;Found two byte opcode.\n&quot;</span>);
<a name="l00224"></a>00224         <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.opcode.prefixA = nextByte;
<a name="l00225"></a>00225     }
<a name="l00226"></a>00226     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.opcode.num == 2 &amp;&amp; (nextByte == 0x38 || nextByte == 0x3A))
<a name="l00227"></a>00227     {
<a name="l00228"></a>00228         nextState = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8a5dafe6854fcb6b0807bea9ce23744e64">OpcodeState</a>;
<a name="l00229"></a>00229         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classX86ISA_1_1Decoder.html#aedfa2b7d97ed17b14903ed75d6214c78">Decoder</a>, <span class="stringliteral">&quot;Found three byte opcode.\n&quot;</span>);
<a name="l00230"></a>00230         <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.opcode.prefixB = nextByte;
<a name="l00231"></a>00231     }
<a name="l00232"></a>00232     <span class="keywordflow">else</span>
<a name="l00233"></a>00233     {
<a name="l00234"></a>00234         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classX86ISA_1_1Decoder.html#aedfa2b7d97ed17b14903ed75d6214c78">Decoder</a>, <span class="stringliteral">&quot;Found opcode %#x.\n&quot;</span>, nextByte);
<a name="l00235"></a>00235         <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.opcode.op = nextByte;
<a name="l00236"></a>00236 
<a name="l00237"></a>00237         <span class="comment">//Figure out the effective operand size. This can be overriden to</span>
<a name="l00238"></a>00238         <span class="comment">//a fixed value at the decoder level.</span>
<a name="l00239"></a>00239         <span class="keywordtype">int</span> logOpSize;
<a name="l00240"></a>00240         <span class="keywordflow">if</span> (<a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.rex.w)
<a name="l00241"></a>00241             logOpSize = 3; <span class="comment">// 64 bit operand size</span>
<a name="l00242"></a>00242         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.legacy.op)
<a name="l00243"></a>00243             logOpSize = <a class="code" href="classX86ISA_1_1Decoder.html#ae1027509430cd109ced841df18ec4790">altOp</a>;
<a name="l00244"></a>00244         <span class="keywordflow">else</span>
<a name="l00245"></a>00245             logOpSize = <a class="code" href="classX86ISA_1_1Decoder.html#adf82151c683017bc9ab9fb7b70ff72fb">defOp</a>;
<a name="l00246"></a>00246 
<a name="l00247"></a>00247         <span class="comment">//Set the actual op size</span>
<a name="l00248"></a>00248         <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.opSize = 1 &lt;&lt; logOpSize;
<a name="l00249"></a>00249 
<a name="l00250"></a>00250         <span class="comment">//Figure out the effective address size. This can be overriden to</span>
<a name="l00251"></a>00251         <span class="comment">//a fixed value at the decoder level.</span>
<a name="l00252"></a>00252         <span class="keywordtype">int</span> logAddrSize;
<a name="l00253"></a>00253         <span class="keywordflow">if</span>(<a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.legacy.addr)
<a name="l00254"></a>00254             logAddrSize = <a class="code" href="classX86ISA_1_1Decoder.html#a3f6baec3f8d9a651a37a3c5f9bfba2a4">altAddr</a>;
<a name="l00255"></a>00255         <span class="keywordflow">else</span>
<a name="l00256"></a>00256             logAddrSize = <a class="code" href="classX86ISA_1_1Decoder.html#a63bbec903362b7e01fbf028a0afbfeb1">defAddr</a>;
<a name="l00257"></a>00257 
<a name="l00258"></a>00258         <span class="comment">//Set the actual address size</span>
<a name="l00259"></a>00259         <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.addrSize = 1 &lt;&lt; logAddrSize;
<a name="l00260"></a>00260 
<a name="l00261"></a>00261         <span class="comment">//Figure out the effective stack width. This can be overriden to</span>
<a name="l00262"></a>00262         <span class="comment">//a fixed value at the decoder level.</span>
<a name="l00263"></a>00263         <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.stackSize = 1 &lt;&lt; <a class="code" href="classX86ISA_1_1Decoder.html#aef01e995775f4a7ba2367414f311dc73">stack</a>;
<a name="l00264"></a>00264 
<a name="l00265"></a>00265         <span class="comment">//Figure out how big of an immediate we&apos;ll retreive based</span>
<a name="l00266"></a>00266         <span class="comment">//on the opcode.</span>
<a name="l00267"></a>00267         <span class="keywordtype">int</span> immType = <a class="code" href="classX86ISA_1_1Decoder.html#a3f9cce9eaf915705c0fd4d90d9bcf8f8">ImmediateType</a>[<a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.opcode.num - 1][nextByte];
<a name="l00268"></a>00268         <span class="keywordflow">if</span> (<a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.opcode.num == 1 &amp;&amp; nextByte &gt;= 0xA0 &amp;&amp; nextByte &lt;= 0xA3)
<a name="l00269"></a>00269             <a class="code" href="classX86ISA_1_1Decoder.html#a61f77f04393db6b7fe844adc3f78b644">immediateSize</a> = <a class="code" href="classX86ISA_1_1Decoder.html#a30eeeb2cd279f8cfcbafbd9873691d2f">SizeTypeToSize</a>[logAddrSize - 1][immType];
<a name="l00270"></a>00270         <span class="keywordflow">else</span>
<a name="l00271"></a>00271             <a class="code" href="classX86ISA_1_1Decoder.html#a61f77f04393db6b7fe844adc3f78b644">immediateSize</a> = <a class="code" href="classX86ISA_1_1Decoder.html#a30eeeb2cd279f8cfcbafbd9873691d2f">SizeTypeToSize</a>[logOpSize - 1][immType];
<a name="l00272"></a>00272 
<a name="l00273"></a>00273         <span class="comment">//Determine what to expect next</span>
<a name="l00274"></a>00274         <span class="keywordflow">if</span> (<a class="code" href="classX86ISA_1_1Decoder.html#a6e9f1359a8e815c5bdd0efc306f5bf32">UsesModRM</a>[<a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.opcode.num - 1][nextByte]) {
<a name="l00275"></a>00275             nextState = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8a1b1909a7067c96c6fa9205417b64bb29">ModRMState</a>;
<a name="l00276"></a>00276         } <span class="keywordflow">else</span> {
<a name="l00277"></a>00277             <span class="keywordflow">if</span>(<a class="code" href="classX86ISA_1_1Decoder.html#a61f77f04393db6b7fe844adc3f78b644">immediateSize</a>) {
<a name="l00278"></a>00278                 nextState = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8ae16af2d7c02e47eb62cd45a6fe42f48f">ImmediateState</a>;
<a name="l00279"></a>00279             } <span class="keywordflow">else</span> {
<a name="l00280"></a>00280                 <a class="code" href="classX86ISA_1_1Decoder.html#a37c5d55785204b8fd00a8ebf62e1fc33">instDone</a> = <span class="keyword">true</span>;
<a name="l00281"></a>00281                 nextState = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8aff67699080f325de2a7ddc37e246c9a8">ResetState</a>;
<a name="l00282"></a>00282             }
<a name="l00283"></a>00283         }
<a name="l00284"></a>00284     }
<a name="l00285"></a>00285     <span class="keywordflow">return</span> nextState;
<a name="l00286"></a>00286 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a34e20e41a8a8172e08cbf7f09ef390a1"></a><!-- doxytag: member="X86ISA::Decoder::doPrefixState" ref="a34e20e41a8a8172e08cbf7f09ef390a1" args="(uint8_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">Decoder::State</a> doPrefixState </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>nextByte</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00156"></a>00156 {
<a name="l00157"></a>00157     uint8_t prefix = <a class="code" href="classX86ISA_1_1Decoder.html#a4790fc37f276d111825695679818d082">Prefixes</a>[nextByte];
<a name="l00158"></a>00158     <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">State</a> nextState = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8a2991411af91f1d4a5045fff0a9a3be9f">PrefixState</a>;
<a name="l00159"></a>00159     <span class="comment">// REX prefixes are only recognized in 64 bit mode.</span>
<a name="l00160"></a>00160     <span class="keywordflow">if</span> (prefix == <a class="code" href="namespaceX86ISA.html#a9177933bdde69fdb102a2316ae38b2a3aa7a35144e4b4c598335e0f7402de72ce">RexPrefix</a> &amp;&amp; <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.mode.submode != <a class="code" href="namespaceX86ISA.html#a88701044b173f3a3f9c0d8b09e63eb1baf4b5a2e57762ba0a4b89a8f5dacbbf5b">SixtyFourBitMode</a>)
<a name="l00161"></a>00161         prefix = 0;
<a name="l00162"></a>00162     <span class="keywordflow">if</span> (prefix)
<a name="l00163"></a>00163         <a class="code" href="classX86ISA_1_1Decoder.html#ac0b7514336823f27e26271bcad4563a8">consumeByte</a>();
<a name="l00164"></a>00164     <span class="keywordflow">switch</span>(prefix)
<a name="l00165"></a>00165     {
<a name="l00166"></a>00166         <span class="comment">//Operand size override prefixes</span>
<a name="l00167"></a>00167       <span class="keywordflow">case</span> <a class="code" href="namespaceX86ISA.html#a9177933bdde69fdb102a2316ae38b2a3a4e92c23a3b508ce9328542e9fae4173c">OperandSizeOverride</a>:
<a name="l00168"></a>00168         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classX86ISA_1_1Decoder.html#aedfa2b7d97ed17b14903ed75d6214c78">Decoder</a>, <span class="stringliteral">&quot;Found operand size override prefix.\n&quot;</span>);
<a name="l00169"></a>00169         <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.legacy.op = <span class="keyword">true</span>;
<a name="l00170"></a>00170         <span class="keywordflow">break</span>;
<a name="l00171"></a>00171       <span class="keywordflow">case</span> <a class="code" href="namespaceX86ISA.html#a9177933bdde69fdb102a2316ae38b2a3a3579abb9a5dc8f35b695f066644a6dc9">AddressSizeOverride</a>:
<a name="l00172"></a>00172         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classX86ISA_1_1Decoder.html#aedfa2b7d97ed17b14903ed75d6214c78">Decoder</a>, <span class="stringliteral">&quot;Found address size override prefix.\n&quot;</span>);
<a name="l00173"></a>00173         <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.legacy.addr = <span class="keyword">true</span>;
<a name="l00174"></a>00174         <span class="keywordflow">break</span>;
<a name="l00175"></a>00175         <span class="comment">//Segment override prefixes</span>
<a name="l00176"></a>00176       <span class="keywordflow">case</span> <a class="code" href="namespaceX86ISA.html#a9177933bdde69fdb102a2316ae38b2a3af92ca81d3fb5a7a5f54434b0e9123681">CSOverride</a>:
<a name="l00177"></a>00177       <span class="keywordflow">case</span> <a class="code" href="namespaceX86ISA.html#a9177933bdde69fdb102a2316ae38b2a3a1448f195560880a9871ab76bf82d9b3c">DSOverride</a>:
<a name="l00178"></a>00178       <span class="keywordflow">case</span> <a class="code" href="namespaceX86ISA.html#a9177933bdde69fdb102a2316ae38b2a3ae0124c17eb50a05dc56fed5e45ef749b">ESOverride</a>:
<a name="l00179"></a>00179       <span class="keywordflow">case</span> <a class="code" href="namespaceX86ISA.html#a9177933bdde69fdb102a2316ae38b2a3a21c2d3faff93fc0b2e2298d4692be27e">FSOverride</a>:
<a name="l00180"></a>00180       <span class="keywordflow">case</span> <a class="code" href="namespaceX86ISA.html#a9177933bdde69fdb102a2316ae38b2a3a5d7923c8d53cd9bc464f0d8f576e0265">GSOverride</a>:
<a name="l00181"></a>00181       <span class="keywordflow">case</span> <a class="code" href="namespaceX86ISA.html#a9177933bdde69fdb102a2316ae38b2a3a391a6565a850313cbb7566b6d9f1d551">SSOverride</a>:
<a name="l00182"></a>00182         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classX86ISA_1_1Decoder.html#aedfa2b7d97ed17b14903ed75d6214c78">Decoder</a>, <span class="stringliteral">&quot;Found segment override.\n&quot;</span>);
<a name="l00183"></a>00183         <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.legacy.seg = prefix;
<a name="l00184"></a>00184         <span class="keywordflow">break</span>;
<a name="l00185"></a>00185       <span class="keywordflow">case</span> <a class="code" href="namespaceX86ISA.html#a9177933bdde69fdb102a2316ae38b2a3a2d2c1d495d2836c20c94c46758ddb504">Lock</a>:
<a name="l00186"></a>00186         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classX86ISA_1_1Decoder.html#aedfa2b7d97ed17b14903ed75d6214c78">Decoder</a>, <span class="stringliteral">&quot;Found lock prefix.\n&quot;</span>);
<a name="l00187"></a>00187         <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.legacy.lock = <span class="keyword">true</span>;
<a name="l00188"></a>00188         <span class="keywordflow">break</span>;
<a name="l00189"></a>00189       <span class="keywordflow">case</span> <a class="code" href="namespaceX86ISA.html#a9177933bdde69fdb102a2316ae38b2a3a22190dd5b4be7579433dde57c66255fb">Rep</a>:
<a name="l00190"></a>00190         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classX86ISA_1_1Decoder.html#aedfa2b7d97ed17b14903ed75d6214c78">Decoder</a>, <span class="stringliteral">&quot;Found rep prefix.\n&quot;</span>);
<a name="l00191"></a>00191         <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.legacy.rep = <span class="keyword">true</span>;
<a name="l00192"></a>00192         <span class="keywordflow">break</span>;
<a name="l00193"></a>00193       <span class="keywordflow">case</span> <a class="code" href="namespaceX86ISA.html#a9177933bdde69fdb102a2316ae38b2a3af518a987ca2bc3daad03f1a8bd579ae7">Repne</a>:
<a name="l00194"></a>00194         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classX86ISA_1_1Decoder.html#aedfa2b7d97ed17b14903ed75d6214c78">Decoder</a>, <span class="stringliteral">&quot;Found repne prefix.\n&quot;</span>);
<a name="l00195"></a>00195         <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.legacy.repne = <span class="keyword">true</span>;
<a name="l00196"></a>00196         <span class="keywordflow">break</span>;
<a name="l00197"></a>00197       <span class="keywordflow">case</span> <a class="code" href="namespaceX86ISA.html#a9177933bdde69fdb102a2316ae38b2a3aa7a35144e4b4c598335e0f7402de72ce">RexPrefix</a>:
<a name="l00198"></a>00198         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classX86ISA_1_1Decoder.html#aedfa2b7d97ed17b14903ed75d6214c78">Decoder</a>, <span class="stringliteral">&quot;Found Rex prefix %#x.\n&quot;</span>, nextByte);
<a name="l00199"></a>00199         <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.rex = nextByte;
<a name="l00200"></a>00200         <span class="keywordflow">break</span>;
<a name="l00201"></a>00201       <span class="keywordflow">case</span> 0:
<a name="l00202"></a>00202         nextState = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8a5dafe6854fcb6b0807bea9ce23744e64">OpcodeState</a>;
<a name="l00203"></a>00203         <span class="keywordflow">break</span>;
<a name="l00204"></a>00204       <span class="keywordflow">default</span>:
<a name="l00205"></a>00205         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Unrecognized prefix %#x\n&quot;</span>, nextByte);
<a name="l00206"></a>00206     }
<a name="l00207"></a>00207     <span class="keywordflow">return</span> nextState;
<a name="l00208"></a>00208 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3e359a01a10d324b1a5f5931b6aafb41"></a><!-- doxytag: member="X86ISA::Decoder::doResetState" ref="a3e359a01a10d324b1a5f5931b6aafb41" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">Decoder::State</a> doResetState </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00043"></a>00043 {
<a name="l00044"></a>00044     <a class="code" href="classX86ISA_1_1Decoder.html#ad199f4799f06d6be603a02e3a05ea918">origPC</a> = <a class="code" href="classX86ISA_1_1Decoder.html#a54317b5e28be49c4013e535159defb35">basePC</a> + <a class="code" href="classX86ISA_1_1Decoder.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l00045"></a>00045     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classX86ISA_1_1Decoder.html#aedfa2b7d97ed17b14903ed75d6214c78">Decoder</a>, <span class="stringliteral">&quot;Setting origPC to %#x\n&quot;</span>, <a class="code" href="classX86ISA_1_1Decoder.html#ad199f4799f06d6be603a02e3a05ea918">origPC</a>);
<a name="l00046"></a>00046     <a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a> = &amp;<a class="code" href="classX86ISA_1_1Decoder.html#a259ba942ab7ed4dcb7661396959966be">decodePages</a>-&gt;<a class="code" href="classDecodeCache_1_1AddrMap.html#a758c7479d2ee5aa3d4f1e7584d30379a">lookup</a>(<a class="code" href="classX86ISA_1_1Decoder.html#ad199f4799f06d6be603a02e3a05ea918">origPC</a>);
<a name="l00047"></a>00047     <a class="code" href="classX86ISA_1_1Decoder.html#a37ce03861bdaf0bdc992ddd28a8a08e0">chunkIdx</a> = 0;
<a name="l00048"></a>00048 
<a name="l00049"></a>00049     <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.rex = 0;
<a name="l00050"></a>00050     <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.legacy = 0;
<a name="l00051"></a>00051     <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.opcode.num = 0;
<a name="l00052"></a>00052     <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.opcode.op = 0;
<a name="l00053"></a>00053     <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.opcode.prefixA = <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.opcode.prefixB = 0;
<a name="l00054"></a>00054 
<a name="l00055"></a>00055     <a class="code" href="classX86ISA_1_1Decoder.html#a9923210a91a1b233397e87d09325cfac">immediateCollected</a> = 0;
<a name="l00056"></a>00056     <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.immediate = 0;
<a name="l00057"></a>00057     <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.displacement = 0;
<a name="l00058"></a>00058     <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.dispSize = 0;
<a name="l00059"></a>00059 
<a name="l00060"></a>00060     <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.modRM = 0;
<a name="l00061"></a>00061     <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.sib = 0;
<a name="l00062"></a>00062 
<a name="l00063"></a>00063     <span class="keywordflow">if</span> (<a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a>-&gt;<a class="code" href="structX86ISA_1_1Decoder_1_1InstBytes.html#ab06cd255e6bbc9122ae8010deb227fcb">si</a>) {
<a name="l00064"></a>00064         <span class="keywordflow">return</span> <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8abfa48baddbd48c27b1459423efa4bdd8">FromCacheState</a>;
<a name="l00065"></a>00065     } <span class="keywordflow">else</span> {
<a name="l00066"></a>00066         <a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a>-&gt;<a class="code" href="structX86ISA_1_1Decoder_1_1InstBytes.html#af7aeb5f9436fa23d13dae1008bace5bd">chunks</a>.clear();
<a name="l00067"></a>00067         <span class="keywordflow">return</span> <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8a2991411af91f1d4a5045fff0a9a3be9f">PrefixState</a>;
<a name="l00068"></a>00068     }
<a name="l00069"></a>00069 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a429d36cbff305b40608c013c0c6a15b1"></a><!-- doxytag: member="X86ISA::Decoder::doSIBState" ref="a429d36cbff305b40608c013c0c6a15b1" args="(uint8_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">Decoder::State</a> doSIBState </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>nextByte</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00349"></a>00349 {
<a name="l00350"></a>00350     <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">State</a> nextState = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8ade97a2665a1361faea090134062c17b4">ErrorState</a>;
<a name="l00351"></a>00351     <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.sib = nextByte;
<a name="l00352"></a>00352     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classX86ISA_1_1Decoder.html#aedfa2b7d97ed17b14903ed75d6214c78">Decoder</a>, <span class="stringliteral">&quot;Found SIB byte %#x.\n&quot;</span>, nextByte);
<a name="l00353"></a>00353     <a class="code" href="classX86ISA_1_1Decoder.html#ac0b7514336823f27e26271bcad4563a8">consumeByte</a>();
<a name="l00354"></a>00354     <span class="keywordflow">if</span> (<a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.modRM.mod == 0 &amp;&amp; <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.sib.base == 5)
<a name="l00355"></a>00355         <a class="code" href="classX86ISA_1_1Decoder.html#a494ae21b1676198853f989b5003e0c06">displacementSize</a> = 4;
<a name="l00356"></a>00356     <span class="keywordflow">if</span> (<a class="code" href="classX86ISA_1_1Decoder.html#a494ae21b1676198853f989b5003e0c06">displacementSize</a>) {
<a name="l00357"></a>00357         nextState = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8a6914e5c19cf114014f9ab8d94169c880">DisplacementState</a>;
<a name="l00358"></a>00358     } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classX86ISA_1_1Decoder.html#a61f77f04393db6b7fe844adc3f78b644">immediateSize</a>) {
<a name="l00359"></a>00359         nextState = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8ae16af2d7c02e47eb62cd45a6fe42f48f">ImmediateState</a>;
<a name="l00360"></a>00360     } <span class="keywordflow">else</span> {
<a name="l00361"></a>00361         <a class="code" href="classX86ISA_1_1Decoder.html#a37c5d55785204b8fd00a8ebf62e1fc33">instDone</a> = <span class="keyword">true</span>;
<a name="l00362"></a>00362         nextState = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8aff67699080f325de2a7ddc37e246c9a8">ResetState</a>;
<a name="l00363"></a>00363     }
<a name="l00364"></a>00364     <span class="keywordflow">return</span> nextState;
<a name="l00365"></a>00365 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aca8cee2ca4f61924adea583f466e5c27"></a><!-- doxytag: member="X86ISA::Decoder::getImmediate" ref="aca8cee2ca4f61924adea583f466e5c27" args="(int &amp;collected, uint64_t &amp;current, int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getImmediate </td>
          <td>(</td>
          <td class="paramtype">int &amp;&nbsp;</td>
          <td class="paramname"> <em>collected</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t &amp;&nbsp;</td>
          <td class="paramname"> <em>current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00100"></a>00100     {
<a name="l00101"></a>00101         <span class="comment">//Figure out how many bytes we still need to get for the</span>
<a name="l00102"></a>00102         <span class="comment">//immediate.</span>
<a name="l00103"></a>00103         <span class="keywordtype">int</span> toGet = size - collected;
<a name="l00104"></a>00104         <span class="comment">//Figure out how many bytes are left in our &quot;buffer&quot;</span>
<a name="l00105"></a>00105         <span class="keywordtype">int</span> remaining = <span class="keyword">sizeof</span>(<a class="code" href="namespaceX86ISA.html#a7ceadb544bf9b4a10579b7466b0ac008">MachInst</a>) - <a class="code" href="classX86ISA_1_1Decoder.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l00106"></a>00106         <span class="comment">//Get as much as we need, up to the amount available.</span>
<a name="l00107"></a>00107         toGet = toGet &gt; remaining ? remaining : toGet;
<a name="l00108"></a>00108 
<a name="l00109"></a>00109         <span class="comment">//Shift the bytes we want to be all the way to the right</span>
<a name="l00110"></a>00110         uint64_t partialImm = <a class="code" href="classX86ISA_1_1Decoder.html#a273336b914b5b7edc5433d52385d932e">fetchChunk</a> &gt;&gt; (<a class="code" href="classX86ISA_1_1Decoder.html#aed7ea92f45bd273dde380a45ddced592">offset</a> * 8);
<a name="l00111"></a>00111         <span class="comment">//Mask off what we don&apos;t want</span>
<a name="l00112"></a>00112         partialImm &amp;= <a class="code" href="namespaceX86ISA.html#a5d76cc2129e79ba1941d2cc2f53b9e8e">mask</a>(toGet * 8);
<a name="l00113"></a>00113         <span class="comment">//Shift it over to overlay with our displacement.</span>
<a name="l00114"></a>00114         partialImm &lt;&lt;= (<a class="code" href="classX86ISA_1_1Decoder.html#a9923210a91a1b233397e87d09325cfac">immediateCollected</a> * 8);
<a name="l00115"></a>00115         <span class="comment">//Put it into our displacement</span>
<a name="l00116"></a>00116         current |= partialImm;
<a name="l00117"></a>00117         <span class="comment">//Update how many bytes we&apos;ve collected.</span>
<a name="l00118"></a>00118         collected += toGet;
<a name="l00119"></a>00119         <a class="code" href="classX86ISA_1_1Decoder.html#a34f1e4d13220afca8ec5c23596daba7e">consumeBytes</a>(toGet);
<a name="l00120"></a>00120     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8f47335339a66b8928a59b6e450ba23e"></a><!-- doxytag: member="X86ISA::Decoder::getNextByte" ref="a8f47335339a66b8928a59b6e450ba23e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t getNextByte </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00095"></a>00095     {
<a name="l00096"></a>00096         <span class="keywordflow">return</span> ((uint8_t *)&amp;<a class="code" href="classX86ISA_1_1Decoder.html#a273336b914b5b7edc5433d52385d932e">fetchChunk</a>)[<a class="code" href="classX86ISA_1_1Decoder.html#aed7ea92f45bd273dde380a45ddced592">offset</a>];
<a name="l00097"></a>00097     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9f6a0bc8946ca58d5d59a5dbc6a3181f"></a><!-- doxytag: member="X86ISA::Decoder::instReady" ref="a9f6a0bc8946ca58d5d59a5dbc6a3181f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool instReady </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00291"></a>00291     {
<a name="l00292"></a>00292         <span class="keywordflow">return</span> <a class="code" href="classX86ISA_1_1Decoder.html#a37c5d55785204b8fd00a8ebf62e1fc33">instDone</a>;
<a name="l00293"></a>00293     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1345d078b309b7d115c57be1ed13ae38"></a><!-- doxytag: member="X86ISA::Decoder::moreBytes" ref="a1345d078b309b7d115c57be1ed13ae38" args="(const PCState &amp;pc, Addr fetchPC, MachInst data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void moreBytes </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classX86ISA_1_1PCState.html">PCState</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>pc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>fetchPC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceX86ISA.html#a7ceadb544bf9b4a10579b7466b0ac008">MachInst</a>&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00276"></a>00276     {
<a name="l00277"></a>00277         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classX86ISA_1_1Decoder.html#aedfa2b7d97ed17b14903ed75d6214c78">Decoder</a>, <span class="stringliteral">&quot;Getting more bytes.\n&quot;</span>);
<a name="l00278"></a>00278         <a class="code" href="classX86ISA_1_1Decoder.html#a54317b5e28be49c4013e535159defb35">basePC</a> = fetchPC;
<a name="l00279"></a>00279         <a class="code" href="classX86ISA_1_1Decoder.html#aed7ea92f45bd273dde380a45ddced592">offset</a> = (fetchPC &gt;= <a class="code" href="namespaceX86ISA.html#aecb63c74e066ecd98e04d057e39028c9">pc</a>.instAddr()) ? 0 : <a class="code" href="namespaceX86ISA.html#aecb63c74e066ecd98e04d057e39028c9">pc</a>.instAddr() - fetchPC;
<a name="l00280"></a>00280         <a class="code" href="classX86ISA_1_1Decoder.html#a273336b914b5b7edc5433d52385d932e">fetchChunk</a> = data;
<a name="l00281"></a>00281         <a class="code" href="classX86ISA_1_1Decoder.html#a281c9bc4944bdbf837d5432478d43273">outOfBytes</a> = <span class="keyword">false</span>;
<a name="l00282"></a>00282         <a class="code" href="classX86ISA_1_1Decoder.html#a2e9c5136d19b1a95fc427e0852deab5c">process</a>();
<a name="l00283"></a>00283     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a35631c47fc45b69ca30e6551f9f5d1d1"></a><!-- doxytag: member="X86ISA::Decoder::needMoreBytes" ref="a35631c47fc45b69ca30e6551f9f5d1d1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool needMoreBytes </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00286"></a>00286     {
<a name="l00287"></a>00287         <span class="keywordflow">return</span> <a class="code" href="classX86ISA_1_1Decoder.html#a281c9bc4944bdbf837d5432478d43273">outOfBytes</a>;
<a name="l00288"></a>00288     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2e9c5136d19b1a95fc427e0852deab5c"></a><!-- doxytag: member="X86ISA::Decoder::process" ref="a2e9c5136d19b1a95fc427e0852deab5c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void process </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00073"></a>00073 {
<a name="l00074"></a>00074     <span class="comment">//This function drives the decoder state machine.</span>
<a name="l00075"></a>00075 
<a name="l00076"></a>00076     <span class="comment">//Some sanity checks. You shouldn&apos;t try to process more bytes if</span>
<a name="l00077"></a>00077     <span class="comment">//there aren&apos;t any, and you shouldn&apos;t overwrite an already</span>
<a name="l00078"></a>00078     <span class="comment">//decoder ExtMachInst.</span>
<a name="l00079"></a>00079     assert(!<a class="code" href="classX86ISA_1_1Decoder.html#a281c9bc4944bdbf837d5432478d43273">outOfBytes</a>);
<a name="l00080"></a>00080     assert(!<a class="code" href="classX86ISA_1_1Decoder.html#a37c5d55785204b8fd00a8ebf62e1fc33">instDone</a>);
<a name="l00081"></a>00081 
<a name="l00082"></a>00082     <span class="keywordflow">if</span> (<a class="code" href="classX86ISA_1_1Decoder.html#a876b486d3a5241a126bd5751c5f70f79">state</a> == <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8aff67699080f325de2a7ddc37e246c9a8">ResetState</a>)
<a name="l00083"></a>00083         <a class="code" href="classX86ISA_1_1Decoder.html#a876b486d3a5241a126bd5751c5f70f79">state</a> = <a class="code" href="classX86ISA_1_1Decoder.html#a3e359a01a10d324b1a5f5931b6aafb41">doResetState</a>();
<a name="l00084"></a>00084     <span class="keywordflow">if</span> (<a class="code" href="classX86ISA_1_1Decoder.html#a876b486d3a5241a126bd5751c5f70f79">state</a> == <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8abfa48baddbd48c27b1459423efa4bdd8">FromCacheState</a>) {
<a name="l00085"></a>00085         <a class="code" href="classX86ISA_1_1Decoder.html#a876b486d3a5241a126bd5751c5f70f79">state</a> = <a class="code" href="classX86ISA_1_1Decoder.html#a8db8642a115e086e090c7aabf61b8b8d">doFromCacheState</a>();
<a name="l00086"></a>00086     } <span class="keywordflow">else</span> {
<a name="l00087"></a>00087         <a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a>-&gt;<a class="code" href="structX86ISA_1_1Decoder_1_1InstBytes.html#af7aeb5f9436fa23d13dae1008bace5bd">chunks</a>.push_back(<a class="code" href="classX86ISA_1_1Decoder.html#a273336b914b5b7edc5433d52385d932e">fetchChunk</a>);
<a name="l00088"></a>00088     }
<a name="l00089"></a>00089 
<a name="l00090"></a>00090     <span class="comment">//While there&apos;s still something to do...</span>
<a name="l00091"></a>00091     <span class="keywordflow">while</span> (!<a class="code" href="classX86ISA_1_1Decoder.html#a37c5d55785204b8fd00a8ebf62e1fc33">instDone</a> &amp;&amp; !<a class="code" href="classX86ISA_1_1Decoder.html#a281c9bc4944bdbf837d5432478d43273">outOfBytes</a>) {
<a name="l00092"></a>00092         uint8_t nextByte = <a class="code" href="classX86ISA_1_1Decoder.html#a8f47335339a66b8928a59b6e450ba23e">getNextByte</a>();
<a name="l00093"></a>00093         <span class="keywordflow">switch</span> (<a class="code" href="classX86ISA_1_1Decoder.html#a876b486d3a5241a126bd5751c5f70f79">state</a>) {
<a name="l00094"></a>00094           <span class="keywordflow">case</span> <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8a2991411af91f1d4a5045fff0a9a3be9f">PrefixState</a>:
<a name="l00095"></a>00095             <a class="code" href="classX86ISA_1_1Decoder.html#a876b486d3a5241a126bd5751c5f70f79">state</a> = <a class="code" href="classX86ISA_1_1Decoder.html#a34e20e41a8a8172e08cbf7f09ef390a1">doPrefixState</a>(nextByte);
<a name="l00096"></a>00096             <span class="keywordflow">break</span>;
<a name="l00097"></a>00097           <span class="keywordflow">case</span> <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8a5dafe6854fcb6b0807bea9ce23744e64">OpcodeState</a>:
<a name="l00098"></a>00098             <a class="code" href="classX86ISA_1_1Decoder.html#a876b486d3a5241a126bd5751c5f70f79">state</a> = <a class="code" href="classX86ISA_1_1Decoder.html#af4ad421adb9b081935801bf19bf0d563">doOpcodeState</a>(nextByte);
<a name="l00099"></a>00099             <span class="keywordflow">break</span>;
<a name="l00100"></a>00100           <span class="keywordflow">case</span> <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8a1b1909a7067c96c6fa9205417b64bb29">ModRMState</a>:
<a name="l00101"></a>00101             <a class="code" href="classX86ISA_1_1Decoder.html#a876b486d3a5241a126bd5751c5f70f79">state</a> = <a class="code" href="classX86ISA_1_1Decoder.html#af92cd28d02e33555be9f257fa37e988b">doModRMState</a>(nextByte);
<a name="l00102"></a>00102             <span class="keywordflow">break</span>;
<a name="l00103"></a>00103           <span class="keywordflow">case</span> <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8add2ba2a6d04fb8829afac6fcb5a57283">SIBState</a>:
<a name="l00104"></a>00104             <a class="code" href="classX86ISA_1_1Decoder.html#a876b486d3a5241a126bd5751c5f70f79">state</a> = <a class="code" href="classX86ISA_1_1Decoder.html#a429d36cbff305b40608c013c0c6a15b1">doSIBState</a>(nextByte);
<a name="l00105"></a>00105             <span class="keywordflow">break</span>;
<a name="l00106"></a>00106           <span class="keywordflow">case</span> <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8a6914e5c19cf114014f9ab8d94169c880">DisplacementState</a>:
<a name="l00107"></a>00107             <a class="code" href="classX86ISA_1_1Decoder.html#a876b486d3a5241a126bd5751c5f70f79">state</a> = <a class="code" href="classX86ISA_1_1Decoder.html#a159a4726e8800be2876f6d3100193d4d">doDisplacementState</a>();
<a name="l00108"></a>00108             <span class="keywordflow">break</span>;
<a name="l00109"></a>00109           <span class="keywordflow">case</span> <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8ae16af2d7c02e47eb62cd45a6fe42f48f">ImmediateState</a>:
<a name="l00110"></a>00110             <a class="code" href="classX86ISA_1_1Decoder.html#a876b486d3a5241a126bd5751c5f70f79">state</a> = <a class="code" href="classX86ISA_1_1Decoder.html#ad402df3f8c4d1f4fb2b7a29d72ba00ec">doImmediateState</a>();
<a name="l00111"></a>00111             <span class="keywordflow">break</span>;
<a name="l00112"></a>00112           <span class="keywordflow">case</span> <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8ade97a2665a1361faea090134062c17b4">ErrorState</a>:
<a name="l00113"></a>00113             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Went to the error state in the decoder.\n&quot;</span>);
<a name="l00114"></a>00114           <span class="keywordflow">default</span>:
<a name="l00115"></a>00115             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Unrecognized state! %d\n&quot;</span>, <a class="code" href="classX86ISA_1_1Decoder.html#a876b486d3a5241a126bd5751c5f70f79">state</a>);
<a name="l00116"></a>00116         }
<a name="l00117"></a>00117     }
<a name="l00118"></a>00118 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad20897c5c8bd47f5d4005989bead0e55"></a><!-- doxytag: member="X86ISA::Decoder::reset" ref="ad20897c5c8bd47f5d4005989bead0e55" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reset </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00267"></a>00267     {
<a name="l00268"></a>00268         <a class="code" href="classX86ISA_1_1Decoder.html#a876b486d3a5241a126bd5751c5f70f79">state</a> = <a class="code" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8aff67699080f325de2a7ddc37e246c9a8">ResetState</a>;
<a name="l00269"></a>00269     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9b8f4112d3bbb779584ef8aaee237b25"></a><!-- doxytag: member="X86ISA::Decoder::setM5Reg" ref="a9b8f4112d3bbb779584ef8aaee237b25" args="(HandyM5Reg m5Reg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setM5Reg </td>
          <td>(</td>
          <td class="paramtype">HandyM5Reg&nbsp;</td>
          <td class="paramname"> <em>m5Reg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00225"></a>00225     {
<a name="l00226"></a>00226         <a class="code" href="classX86ISA_1_1Decoder.html#ab3eab3edfcd7cfbe98f3d00c7e75048b">mode</a> = (X86Mode)(uint64_t)m5Reg.mode;
<a name="l00227"></a>00227         <a class="code" href="classX86ISA_1_1Decoder.html#a476c8dbd8e30b9067e6c2f0b7274be73">submode</a> = (<a class="code" href="namespaceX86ISA.html#a88701044b173f3a3f9c0d8b09e63eb1b">X86SubMode</a>)(uint64_t)m5Reg.submode;
<a name="l00228"></a>00228         <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.mode.mode = <a class="code" href="classX86ISA_1_1Decoder.html#ab3eab3edfcd7cfbe98f3d00c7e75048b">mode</a>;
<a name="l00229"></a>00229         <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.mode.submode = <a class="code" href="classX86ISA_1_1Decoder.html#a476c8dbd8e30b9067e6c2f0b7274be73">submode</a>;
<a name="l00230"></a>00230         <a class="code" href="classX86ISA_1_1Decoder.html#ae1027509430cd109ced841df18ec4790">altOp</a> = m5Reg.altOp;
<a name="l00231"></a>00231         <a class="code" href="classX86ISA_1_1Decoder.html#adf82151c683017bc9ab9fb7b70ff72fb">defOp</a> = m5Reg.defOp;
<a name="l00232"></a>00232         <a class="code" href="classX86ISA_1_1Decoder.html#a3f6baec3f8d9a651a37a3c5f9bfba2a4">altAddr</a> = m5Reg.altAddr;
<a name="l00233"></a>00233         <a class="code" href="classX86ISA_1_1Decoder.html#a63bbec903362b7e01fbf028a0afbfeb1">defAddr</a> = m5Reg.defAddr;
<a name="l00234"></a>00234         <a class="code" href="classX86ISA_1_1Decoder.html#aef01e995775f4a7ba2367414f311dc73">stack</a> = m5Reg.stack;
<a name="l00235"></a>00235 
<a name="l00236"></a>00236         AddrCacheMap::iterator amIter = <a class="code" href="classX86ISA_1_1Decoder.html#aa5687d2256dc3674692589549cd833da">addrCacheMap</a>.find(m5Reg);
<a name="l00237"></a>00237         <span class="keywordflow">if</span> (amIter != <a class="code" href="classX86ISA_1_1Decoder.html#aa5687d2256dc3674692589549cd833da">addrCacheMap</a>.end()) {
<a name="l00238"></a>00238             <a class="code" href="classX86ISA_1_1Decoder.html#a259ba942ab7ed4dcb7661396959966be">decodePages</a> = amIter-&gt;second;
<a name="l00239"></a>00239         } <span class="keywordflow">else</span> {
<a name="l00240"></a>00240             <a class="code" href="classX86ISA_1_1Decoder.html#a259ba942ab7ed4dcb7661396959966be">decodePages</a> = <span class="keyword">new</span> <a class="code" href="classX86ISA_1_1Decoder.html#aaeb98acb07222e8d393baae60333dd32">DecodePages</a>;
<a name="l00241"></a>00241             <a class="code" href="classX86ISA_1_1Decoder.html#aa5687d2256dc3674692589549cd833da">addrCacheMap</a>[m5Reg] = <a class="code" href="classX86ISA_1_1Decoder.html#a259ba942ab7ed4dcb7661396959966be">decodePages</a>;
<a name="l00242"></a>00242         }
<a name="l00243"></a>00243 
<a name="l00244"></a>00244         InstCacheMap::iterator imIter = <a class="code" href="classX86ISA_1_1Decoder.html#a2f55fd436a83562102f84954df9f5ed0">instCacheMap</a>.find(m5Reg);
<a name="l00245"></a>00245         <span class="keywordflow">if</span> (imIter != <a class="code" href="classX86ISA_1_1Decoder.html#a2f55fd436a83562102f84954df9f5ed0">instCacheMap</a>.end()) {
<a name="l00246"></a>00246             <a class="code" href="classX86ISA_1_1Decoder.html#a4c63c65e342dd96985ba874deb29db03">instMap</a> = imIter-&gt;second;
<a name="l00247"></a>00247         } <span class="keywordflow">else</span> {
<a name="l00248"></a>00248             <a class="code" href="classX86ISA_1_1Decoder.html#a4c63c65e342dd96985ba874deb29db03">instMap</a> = <span class="keyword">new</span> <a class="code" href="namespaceDecodeCache.html#ac4aa7140c72815d25936c8dcf04191f1" title="Hash for decoded instructions.">DecodeCache::InstMap</a>;
<a name="l00249"></a>00249             <a class="code" href="classX86ISA_1_1Decoder.html#a2f55fd436a83562102f84954df9f5ed0">instCacheMap</a>[m5Reg] = <a class="code" href="classX86ISA_1_1Decoder.html#a4c63c65e342dd96985ba874deb29db03">instMap</a>;
<a name="l00250"></a>00250         }
<a name="l00251"></a>00251     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a83393f90e7cbd98eda9721ba6022d0e0"></a><!-- doxytag: member="X86ISA::Decoder::takeOverFrom" ref="a83393f90e7cbd98eda9721ba6022d0e0" args="(Decoder *old)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void takeOverFrom </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classX86ISA_1_1Decoder.html">Decoder</a> *&nbsp;</td>
          <td class="paramname"> <em>old</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00254"></a>00254     {
<a name="l00255"></a>00255         <a class="code" href="classX86ISA_1_1Decoder.html#ab3eab3edfcd7cfbe98f3d00c7e75048b">mode</a> = old-&gt;mode;
<a name="l00256"></a>00256         <a class="code" href="classX86ISA_1_1Decoder.html#a476c8dbd8e30b9067e6c2f0b7274be73">submode</a> = old-&gt;submode;
<a name="l00257"></a>00257         <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.mode.mode = <a class="code" href="classX86ISA_1_1Decoder.html#ab3eab3edfcd7cfbe98f3d00c7e75048b">mode</a>;
<a name="l00258"></a>00258         <a class="code" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a>.mode.submode = <a class="code" href="classX86ISA_1_1Decoder.html#a476c8dbd8e30b9067e6c2f0b7274be73">submode</a>;
<a name="l00259"></a>00259         <a class="code" href="classX86ISA_1_1Decoder.html#ae1027509430cd109ced841df18ec4790">altOp</a> = old-&gt;altOp;
<a name="l00260"></a>00260         <a class="code" href="classX86ISA_1_1Decoder.html#adf82151c683017bc9ab9fb7b70ff72fb">defOp</a> = old-&gt;defOp;
<a name="l00261"></a>00261         <a class="code" href="classX86ISA_1_1Decoder.html#a3f6baec3f8d9a651a37a3c5f9bfba2a4">altAddr</a> = old-&gt;altAddr;
<a name="l00262"></a>00262         <a class="code" href="classX86ISA_1_1Decoder.html#a63bbec903362b7e01fbf028a0afbfeb1">defAddr</a> = old-&gt;defAddr;
<a name="l00263"></a>00263         <a class="code" href="classX86ISA_1_1Decoder.html#aef01e995775f4a7ba2367414f311dc73">stack</a> = old-&gt;stack;
<a name="l00264"></a>00264     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aab3a5fb7c37867f52f6fa72cc56ceb5e"></a><!-- doxytag: member="X86ISA::Decoder::updateNPC" ref="aab3a5fb7c37867f52f6fa72cc56ceb5e" args="(X86ISA::PCState &amp;nextPC)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateNPC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classX86ISA_1_1PCState.html">X86ISA::PCState</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>nextPC</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00297"></a>00297     {
<a name="l00298"></a>00298         <span class="keywordflow">if</span> (!nextPC.<a class="code" href="classX86ISA_1_1PCState.html#a9a3afed8ccfa04ad21f51926ad1dae6a">size</a>()) {
<a name="l00299"></a>00299             <span class="keywordtype">int</span> size = <a class="code" href="classX86ISA_1_1Decoder.html#a54317b5e28be49c4013e535159defb35">basePC</a> + <a class="code" href="classX86ISA_1_1Decoder.html#aed7ea92f45bd273dde380a45ddced592">offset</a> - <a class="code" href="classX86ISA_1_1Decoder.html#ad199f4799f06d6be603a02e3a05ea918">origPC</a>;
<a name="l00300"></a>00300             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classX86ISA_1_1Decoder.html#aedfa2b7d97ed17b14903ed75d6214c78">Decoder</a>,
<a name="l00301"></a>00301                     <span class="stringliteral">&quot;Calculating the instruction size: &quot;</span>
<a name="l00302"></a>00302                     <span class="stringliteral">&quot;basePC: %#x offset: %#x origPC: %#x size: %d\n&quot;</span>,
<a name="l00303"></a>00303                     <a class="code" href="classX86ISA_1_1Decoder.html#a54317b5e28be49c4013e535159defb35">basePC</a>, <a class="code" href="classX86ISA_1_1Decoder.html#aed7ea92f45bd273dde380a45ddced592">offset</a>, origPC, size);
<a name="l00304"></a>00304             nextPC.<a class="code" href="classX86ISA_1_1PCState.html#a9a3afed8ccfa04ad21f51926ad1dae6a">size</a>(size);
<a name="l00305"></a>00305             nextPC.<a class="code" href="classGenericISA_1_1SimplePCState.html#ae606c6164a927e305006d93c7fe0b0bd">npc</a>(nextPC.<a class="code" href="classGenericISA_1_1SimplePCState.html#a4012b666ba851e747ea4229c7cf55c5b">pc</a>() + size);
<a name="l00306"></a>00306         }
<a name="l00307"></a>00307     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9b25276214b33147c8d3bf84e1aa778c"></a><!-- doxytag: member="X86ISA::Decoder::updateOffsetState" ref="a9b25276214b33147c8d3bf84e1aa778c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateOffsetState </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00123"></a>00123     {
<a name="l00124"></a>00124         assert(<a class="code" href="classX86ISA_1_1Decoder.html#aed7ea92f45bd273dde380a45ddced592">offset</a> &lt;= <span class="keyword">sizeof</span>(<a class="code" href="namespaceX86ISA.html#a7ceadb544bf9b4a10579b7466b0ac008">MachInst</a>));
<a name="l00125"></a>00125         <span class="keywordflow">if</span> (<a class="code" href="classX86ISA_1_1Decoder.html#aed7ea92f45bd273dde380a45ddced592">offset</a> == <span class="keyword">sizeof</span>(<a class="code" href="namespaceX86ISA.html#a7ceadb544bf9b4a10579b7466b0ac008">MachInst</a>)) {
<a name="l00126"></a>00126             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classX86ISA_1_1Decoder.html#aedfa2b7d97ed17b14903ed75d6214c78">Decoder</a>, <span class="stringliteral">&quot;At the end of a chunk, idx = %d, chunks = %d.\n&quot;</span>,
<a name="l00127"></a>00127                     <a class="code" href="classX86ISA_1_1Decoder.html#a37ce03861bdaf0bdc992ddd28a8a08e0">chunkIdx</a>, <a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a>-&gt;<a class="code" href="structX86ISA_1_1Decoder_1_1InstBytes.html#af7aeb5f9436fa23d13dae1008bace5bd">chunks</a>.size());
<a name="l00128"></a>00128             <a class="code" href="classX86ISA_1_1Decoder.html#a37ce03861bdaf0bdc992ddd28a8a08e0">chunkIdx</a>++;
<a name="l00129"></a>00129             <span class="keywordflow">if</span> (chunkIdx == <a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a>-&gt;<a class="code" href="structX86ISA_1_1Decoder_1_1InstBytes.html#af7aeb5f9436fa23d13dae1008bace5bd">chunks</a>.size()) {
<a name="l00130"></a>00130                 <a class="code" href="classX86ISA_1_1Decoder.html#a281c9bc4944bdbf837d5432478d43273">outOfBytes</a> = <span class="keyword">true</span>;
<a name="l00131"></a>00131             } <span class="keywordflow">else</span> {
<a name="l00132"></a>00132                 <a class="code" href="classX86ISA_1_1Decoder.html#aed7ea92f45bd273dde380a45ddced592">offset</a> = 0;
<a name="l00133"></a>00133                 <a class="code" href="classX86ISA_1_1Decoder.html#a273336b914b5b7edc5433d52385d932e">fetchChunk</a> = <a class="code" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a>-&gt;<a class="code" href="structX86ISA_1_1Decoder_1_1InstBytes.html#af7aeb5f9436fa23d13dae1008bace5bd">chunks</a>[chunkIdx];
<a name="l00134"></a>00134                 <a class="code" href="classX86ISA_1_1Decoder.html#a54317b5e28be49c4013e535159defb35">basePC</a> += <span class="keyword">sizeof</span>(<a class="code" href="namespaceX86ISA.html#a7ceadb544bf9b4a10579b7466b0ac008">MachInst</a>);
<a name="l00135"></a>00135             }
<a name="l00136"></a>00136         }
<a name="l00137"></a>00137     }
</pre></div></p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="aa5687d2256dc3674692589549cd833da"></a><!-- doxytag: member="X86ISA::Decoder::addrCacheMap" ref="aa5687d2256dc3674692589549cd833da" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classX86ISA_1_1Decoder.html#a17e66c491b538e223da13acf9d77d5f2">AddrCacheMap</a> <a class="el" href="classX86ISA_1_1Decoder.html#aa5687d2256dc3674692589549cd833da">addrCacheMap</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3f6baec3f8d9a651a37a3c5f9bfba2a4"></a><!-- doxytag: member="X86ISA::Decoder::altAddr" ref="a3f6baec3f8d9a651a37a3c5f9bfba2a4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="classX86ISA_1_1Decoder.html#a3f6baec3f8d9a651a37a3c5f9bfba2a4">altAddr</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae1027509430cd109ced841df18ec4790"></a><!-- doxytag: member="X86ISA::Decoder::altOp" ref="ae1027509430cd109ced841df18ec4790" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="classX86ISA_1_1Decoder.html#ae1027509430cd109ced841df18ec4790">altOp</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a54317b5e28be49c4013e535159defb35"></a><!-- doxytag: member="X86ISA::Decoder::basePC" ref="a54317b5e28be49c4013e535159defb35" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="el" href="classX86ISA_1_1Decoder.html#a54317b5e28be49c4013e535159defb35">basePC</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a37ce03861bdaf0bdc992ddd28a8a08e0"></a><!-- doxytag: member="X86ISA::Decoder::chunkIdx" ref="a37ce03861bdaf0bdc992ddd28a8a08e0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classX86ISA_1_1Decoder.html#a37ce03861bdaf0bdc992ddd28a8a08e0">chunkIdx</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a259ba942ab7ed4dcb7661396959966be"></a><!-- doxytag: member="X86ISA::Decoder::decodePages" ref="a259ba942ab7ed4dcb7661396959966be" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDecodeCache_1_1AddrMap.html">DecodePages</a>* <a class="el" href="classX86ISA_1_1Decoder.html#a259ba942ab7ed4dcb7661396959966be">decodePages</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a63bbec903362b7e01fbf028a0afbfeb1"></a><!-- doxytag: member="X86ISA::Decoder::defAddr" ref="a63bbec903362b7e01fbf028a0afbfeb1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="classX86ISA_1_1Decoder.html#a63bbec903362b7e01fbf028a0afbfeb1">defAddr</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="adf82151c683017bc9ab9fb7b70ff72fb"></a><!-- doxytag: member="X86ISA::Decoder::defOp" ref="adf82151c683017bc9ab9fb7b70ff72fb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="classX86ISA_1_1Decoder.html#adf82151c683017bc9ab9fb7b70ff72fb">defOp</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a494ae21b1676198853f989b5003e0c06"></a><!-- doxytag: member="X86ISA::Decoder::displacementSize" ref="a494ae21b1676198853f989b5003e0c06" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classX86ISA_1_1Decoder.html#a494ae21b1676198853f989b5003e0c06">displacementSize</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab36b2d3338c466d225603823b5e4f9a4"></a><!-- doxytag: member="X86ISA::Decoder::dummy" ref="ab36b2d3338c466d225603823b5e4f9a4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structX86ISA_1_1Decoder_1_1InstBytes.html">Decoder::InstBytes</a> <a class="el" href="classX86ISA_1_1Decoder.html#ab36b2d3338c466d225603823b5e4f9a4">dummy</a><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="abf211faf305b89c9093b00b6b82b0bd1"></a><!-- doxytag: member="X86ISA::Decoder::emi" ref="abf211faf305b89c9093b00b6b82b0bd1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structX86ISA_1_1ExtMachInst.html">ExtMachInst</a> <a class="el" href="classX86ISA_1_1Decoder.html#abf211faf305b89c9093b00b6b82b0bd1">emi</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a273336b914b5b7edc5433d52385d932e"></a><!-- doxytag: member="X86ISA::Decoder::fetchChunk" ref="a273336b914b5b7edc5433d52385d932e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceX86ISA.html#a7ceadb544bf9b4a10579b7466b0ac008">MachInst</a> <a class="el" href="classX86ISA_1_1Decoder.html#a273336b914b5b7edc5433d52385d932e">fetchChunk</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9923210a91a1b233397e87d09325cfac"></a><!-- doxytag: member="X86ISA::Decoder::immediateCollected" ref="a9923210a91a1b233397e87d09325cfac" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classX86ISA_1_1Decoder.html#a9923210a91a1b233397e87d09325cfac">immediateCollected</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a61f77f04393db6b7fe844adc3f78b644"></a><!-- doxytag: member="X86ISA::Decoder::immediateSize" ref="a61f77f04393db6b7fe844adc3f78b644" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classX86ISA_1_1Decoder.html#a61f77f04393db6b7fe844adc3f78b644">immediateSize</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3f9cce9eaf915705c0fd4d90d9bcf8f8"></a><!-- doxytag: member="X86ISA::Decoder::ImmediateType" ref="a3f9cce9eaf915705c0fd4d90d9bcf8f8" args="[2][256]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t <a class="el" href="classX86ISA_1_1Decoder.html#a3f9cce9eaf915705c0fd4d90d9bcf8f8">ImmediateType</a><code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a393f7387727acc3ec0188fe976c52ff3"></a><!-- doxytag: member="X86ISA::Decoder::instBytes" ref="a393f7387727acc3ec0188fe976c52ff3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structX86ISA_1_1Decoder_1_1InstBytes.html">InstBytes</a>* <a class="el" href="classX86ISA_1_1Decoder.html#a393f7387727acc3ec0188fe976c52ff3">instBytes</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2f55fd436a83562102f84954df9f5ed0"></a><!-- doxytag: member="X86ISA::Decoder::instCacheMap" ref="a2f55fd436a83562102f84954df9f5ed0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classX86ISA_1_1Decoder.html#accbfac5b46e737fd6326272fba1a8bb2">Decoder::InstCacheMap</a> <a class="el" href="classX86ISA_1_1Decoder.html#a2f55fd436a83562102f84954df9f5ed0">instCacheMap</a><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a37c5d55785204b8fd00a8ebf62e1fc33"></a><!-- doxytag: member="X86ISA::Decoder::instDone" ref="a37c5d55785204b8fd00a8ebf62e1fc33" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classX86ISA_1_1Decoder.html#a37c5d55785204b8fd00a8ebf62e1fc33">instDone</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4c63c65e342dd96985ba874deb29db03"></a><!-- doxytag: member="X86ISA::Decoder::instMap" ref="a4c63c65e342dd96985ba874deb29db03" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceDecodeCache.html#ac4aa7140c72815d25936c8dcf04191f1">DecodeCache::InstMap</a>* <a class="el" href="classX86ISA_1_1Decoder.html#a4c63c65e342dd96985ba874deb29db03">instMap</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab3eab3edfcd7cfbe98f3d00c7e75048b"></a><!-- doxytag: member="X86ISA::Decoder::mode" ref="ab3eab3edfcd7cfbe98f3d00c7e75048b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">X86Mode <a class="el" href="classX86ISA_1_1Decoder.html#ab3eab3edfcd7cfbe98f3d00c7e75048b">mode</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aed7ea92f45bd273dde380a45ddced592"></a><!-- doxytag: member="X86ISA::Decoder::offset" ref="aed7ea92f45bd273dde380a45ddced592" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classX86ISA_1_1Decoder.html#aed7ea92f45bd273dde380a45ddced592">offset</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad199f4799f06d6be603a02e3a05ea918"></a><!-- doxytag: member="X86ISA::Decoder::origPC" ref="ad199f4799f06d6be603a02e3a05ea918" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="el" href="classX86ISA_1_1Decoder.html#ad199f4799f06d6be603a02e3a05ea918">origPC</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a281c9bc4944bdbf837d5432478d43273"></a><!-- doxytag: member="X86ISA::Decoder::outOfBytes" ref="a281c9bc4944bdbf837d5432478d43273" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classX86ISA_1_1Decoder.html#a281c9bc4944bdbf837d5432478d43273">outOfBytes</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4790fc37f276d111825695679818d082"></a><!-- doxytag: member="X86ISA::Decoder::Prefixes" ref="a4790fc37f276d111825695679818d082" args="[256]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t <a class="el" href="namespaceX86ISA.html#a9177933bdde69fdb102a2316ae38b2a3">Prefixes</a><code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>初期値:</b><div class="fragment"><pre class="fragment">
    {    

 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0,
 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0,
 0 , 0 , 0 , 0 , 0 , 0 , <a class="code" href="namespaceX86ISA.html#ace9ea93d6ebfe71c30257d08302a61a0">ES</a>, 0 , 0 , 0 , 0 , 0 , 0 , 0 , <a class="code" href="namespaceX86ISA.html#a72f9d36f4775bd1aedeea21730333e07">CS</a>, 0,
 0 , 0 , 0 , 0 , 0 , 0 , <a class="code" href="namespaceX86ISA.html#acbe8412158c492ec8a596b58ad73b5d7">SS</a>, 0 , 0 , 0 , 0 , 0 , 0 , 0 , <a class="code" href="namespaceX86ISA.html#ae9333134a9641c88d32b14331583b8ab">DS</a>, 0,
 <a class="code" href="namespaceX86ISA.html#a58d754bc1e9db1b928a4aa7bb958abf1">RX</a>, RX, RX, RX, RX, RX, RX, RX, RX, RX, RX, RX, RX, RX, RX, RX,
 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0,
 0 , 0 , 0 , 0 , <a class="code" href="namespaceX86ISA.html#ad3fc35c4d63ba411ff46fd89a495a229">FS</a>, <a class="code" href="namespaceX86ISA.html#a200aa1433f4177e2f2be519cf50eb30c">GS</a>, <a class="code" href="namespaceX86ISA.html#aedb1e3f2b58889f97bb533d5c82981da">OO</a>, <a class="code" href="namespaceX86ISA.html#a50db8efe7d4acc2cae436f1ecea8a664">AO</a>, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0,
 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0,
 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0,
 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0,
 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0,
 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0,
 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0,
 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0,
 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0,
 <a class="code" href="namespaceX86ISA.html#ac5a063d34932f7efd0fbd3c864b2511e">LO</a>, 0 , <a class="code" href="namespaceX86ISA.html#a66e737c817580b498d2ad105c801a744">RN</a>, <a class="code" href="namespaceX86ISA.html#a769b71b7ccb5f20709e7d3cf42f71463">RE</a>, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a30eeeb2cd279f8cfcbafbd9873691d2f"></a><!-- doxytag: member="X86ISA::Decoder::SizeTypeToSize" ref="a30eeeb2cd279f8cfcbafbd9873691d2f" args="[3][10]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t <a class="el" href="classX86ISA_1_1Decoder.html#a30eeeb2cd279f8cfcbafbd9873691d2f">SizeTypeToSize</a><code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>初期値:</b><div class="fragment"><pre class="fragment">
    {

        {0,    1,   2,   4,    8,    16,   2,    2,    3,    4      }, 
        {0,    1,   2,   4,    8,    16,   4,    4,    3,    6      }, 
        {0,    1,   2,   4,    8,    16,   8,    4,    3,    0      }  
    }
</pre></div>
</div>
</div>
<a class="anchor" id="aef01e995775f4a7ba2367414f311dc73"></a><!-- doxytag: member="X86ISA::Decoder::stack" ref="aef01e995775f4a7ba2367414f311dc73" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="classX86ISA_1_1Decoder.html#aef01e995775f4a7ba2367414f311dc73">stack</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a876b486d3a5241a126bd5751c5f70f79"></a><!-- doxytag: member="X86ISA::Decoder::state" ref="a876b486d3a5241a126bd5751c5f70f79" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classX86ISA_1_1Decoder.html#a5d74787dedbc4e11c1ab15bf487e61f8">State</a> <a class="el" href="classX86ISA_1_1Decoder.html#a876b486d3a5241a126bd5751c5f70f79">state</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a476c8dbd8e30b9067e6c2f0b7274be73"></a><!-- doxytag: member="X86ISA::Decoder::submode" ref="a476c8dbd8e30b9067e6c2f0b7274be73" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceX86ISA.html#a88701044b173f3a3f9c0d8b09e63eb1b">X86SubMode</a> <a class="el" href="classX86ISA_1_1Decoder.html#a476c8dbd8e30b9067e6c2f0b7274be73">submode</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a6e9f1359a8e815c5bdd0efc306f5bf32"></a><!-- doxytag: member="X86ISA::Decoder::UsesModRM" ref="a6e9f1359a8e815c5bdd0efc306f5bf32" args="[2][256]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t <a class="el" href="classX86ISA_1_1Decoder.html#a6e9f1359a8e815c5bdd0efc306f5bf32">UsesModRM</a><code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>arch/x86/<a class="el" href="x86_2decoder_8hh_source.html">decoder.hh</a></li>
<li>arch/x86/<a class="el" href="x86_2decoder_8cc.html">decoder.cc</a></li>
<li>arch/x86/<a class="el" href="decoder__tables_8cc.html">decoder_tables.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
