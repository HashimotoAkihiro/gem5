\hypertarget{classStats_1_1BinaryNode}{
\section{クラス テンプレート BinaryNode$<$ Op $>$}
\label{classStats_1_1BinaryNode}\index{Stats::BinaryNode@{Stats::BinaryNode}}
}


{\ttfamily \#include $<$statistics.hh$>$}BinaryNode$<$ Op $>$に対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3cm]{classStats_1_1BinaryNode}
\end{center}
\end{figure}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classStats_1_1BinaryNode_ac16f666cd797937f986fa7ed3530dc69}{BinaryNode} (\hyperlink{classRefCountingPtr}{NodePtr} \&a, \hyperlink{classRefCountingPtr}{NodePtr} \&b)
\item 
const \hyperlink{classstd_1_1vector}{VResult} \& \hyperlink{classStats_1_1BinaryNode_aba312f9e3431b1652f8b3ddf3fe105dc}{result} () const 
\item 
\hyperlink{namespaceStats_ad874d2cfd4b4a29ebd480bb2e67f20ae}{Result} \hyperlink{classStats_1_1BinaryNode_a35c6e2ed3fc81b40d69052a062113ead}{total} () const 
\item 
\hyperlink{namespaceStats_ada51e68d31936547d3729c82daf6b7c6}{size\_\-type} \hyperlink{classStats_1_1BinaryNode_a503ab01f6c0142145d3434f6924714e7}{size} () const 
\item 
std::string \hyperlink{classStats_1_1BinaryNode_a1b9b8885b0880fc4ddf9a2c7d1ca3dc4}{str} () const 
\end{DoxyCompactItemize}
\subsection*{Public 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classRefCountingPtr}{NodePtr} \hyperlink{classStats_1_1BinaryNode_a6ad7f056f60bd5cfec2caa5d5f4e363f}{l}
\item 
\hyperlink{classRefCountingPtr}{NodePtr} \hyperlink{classStats_1_1BinaryNode_aa3722e7d196563badabbb861eda68230}{r}
\item 
\hyperlink{classstd_1_1vector}{VResult} \hyperlink{classStats_1_1BinaryNode_a8f41af856442757ec68f3391333d3eb2}{vresult}
\end{DoxyCompactItemize}
\subsubsection*{template$<$class Op$>$ class Stats::BinaryNode$<$ Op $>$}



\subsection{コンストラクタとデストラクタ}
\hypertarget{classStats_1_1BinaryNode_ac16f666cd797937f986fa7ed3530dc69}{
\index{Stats::BinaryNode@{Stats::BinaryNode}!BinaryNode@{BinaryNode}}
\index{BinaryNode@{BinaryNode}!Stats::BinaryNode@{Stats::BinaryNode}}
\subsubsection[{BinaryNode}]{\setlength{\rightskip}{0pt plus 5cm}{\bf BinaryNode} ({\bf NodePtr} \& {\em a}, \/  {\bf NodePtr} \& {\em b})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classStats_1_1BinaryNode_ac16f666cd797937f986fa7ed3530dc69}



\begin{DoxyCode}
2302 : l(a), r(b) {}
\end{DoxyCode}


\subsection{関数}
\hypertarget{classStats_1_1BinaryNode_aba312f9e3431b1652f8b3ddf3fe105dc}{
\index{Stats::BinaryNode@{Stats::BinaryNode}!result@{result}}
\index{result@{result}!Stats::BinaryNode@{Stats::BinaryNode}}
\subsubsection[{result}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf VResult}\& result () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}
\label{classStats_1_1BinaryNode_aba312f9e3431b1652f8b3ddf3fe105dc}
Return the result vector of this subtree. \begin{DoxyReturn}{戻り値}
The result vector of this subtree. 
\end{DoxyReturn}


\hyperlink{classStats_1_1Node_a7fcf57115122663db42f39cc18ca0f62}{Node}を実装しています。


\begin{DoxyCode}
2306     {
2307         Op op;
2308         const VResult &lvec = l->result();
2309         const VResult &rvec = r->result();
2310 
2311         assert(lvec.size() > 0 && rvec.size() > 0);
2312 
2313         if (lvec.size() == 1 && rvec.size() == 1) {
2314             vresult.resize(1);
2315             vresult[0] = op(lvec[0], rvec[0]);
2316         } else if (lvec.size() == 1) {
2317             size_type size = rvec.size();
2318             vresult.resize(size);
2319             for (off_type i = 0; i < size; ++i)
2320                 vresult[i] = op(lvec[0], rvec[i]);
2321         } else if (rvec.size() == 1) {
2322             size_type size = lvec.size();
2323             vresult.resize(size);
2324             for (off_type i = 0; i < size; ++i)
2325                 vresult[i] = op(lvec[i], rvec[0]);
2326         } else if (rvec.size() == lvec.size()) {
2327             size_type size = rvec.size();
2328             vresult.resize(size);
2329             for (off_type i = 0; i < size; ++i)
2330                 vresult[i] = op(lvec[i], rvec[i]);
2331         }
2332 
2333         return vresult;
2334     }
\end{DoxyCode}
\hypertarget{classStats_1_1BinaryNode_a503ab01f6c0142145d3434f6924714e7}{
\index{Stats::BinaryNode@{Stats::BinaryNode}!size@{size}}
\index{size@{size}!Stats::BinaryNode@{Stats::BinaryNode}}
\subsubsection[{size}]{\setlength{\rightskip}{0pt plus 5cm}{\bf size\_\-type} size () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}
\label{classStats_1_1BinaryNode_a503ab01f6c0142145d3434f6924714e7}
Return the number of nodes in the subtree starting at this node. \begin{DoxyReturn}{戻り値}
the number of nodes in this subtree. 
\end{DoxyReturn}


\hyperlink{classStats_1_1Node_a4051d143efd31726fa13df03ae4e1bce}{Node}を実装しています。


\begin{DoxyCode}
2370     {
2371         size_type ls = l->size();
2372         size_type rs = r->size();
2373         if (ls == 1) {
2374             return rs;
2375         } else if (rs == 1) {
2376             return ls;
2377         } else {
2378             assert(ls == rs && "Node vector sizes are not equal");
2379             return ls;
2380         }
2381     }
\end{DoxyCode}
\hypertarget{classStats_1_1BinaryNode_a1b9b8885b0880fc4ddf9a2c7d1ca3dc4}{
\index{Stats::BinaryNode@{Stats::BinaryNode}!str@{str}}
\index{str@{str}!Stats::BinaryNode@{Stats::BinaryNode}}
\subsubsection[{str}]{\setlength{\rightskip}{0pt plus 5cm}std::string str () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}
\label{classStats_1_1BinaryNode_a1b9b8885b0880fc4ddf9a2c7d1ca3dc4}


\hyperlink{classStats_1_1Node_a6522bc65bd97a6b1ef6cdfe78462a919}{Node}を実装しています。


\begin{DoxyCode}
2385     {
2386         return csprintf("(%s %s %s)", l->str(), OpString<Op>::str(), r->str());
2387     }
\end{DoxyCode}
\hypertarget{classStats_1_1BinaryNode_a35c6e2ed3fc81b40d69052a062113ead}{
\index{Stats::BinaryNode@{Stats::BinaryNode}!total@{total}}
\index{total@{total}!Stats::BinaryNode@{Stats::BinaryNode}}
\subsubsection[{total}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Result} total () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}
\label{classStats_1_1BinaryNode_a35c6e2ed3fc81b40d69052a062113ead}
Return the total of the result vector. \begin{DoxyReturn}{戻り値}
The total of the result vector. 
\end{DoxyReturn}


If vectors are the same divide their sums (x0+x1)/(y0+y1)

Otherwise divide each item by the divisor 

\hyperlink{classStats_1_1Node_ab152b7e89b37a7db03b04d500ceb8349}{Node}を実装しています。


\begin{DoxyCode}
2338     {
2339         const VResult &vec = this->result();
2340         const VResult &lvec = l->result();
2341         const VResult &rvec = r->result();
2342         Result total = 0.0;
2343         Result lsum = 0.0;
2344         Result rsum = 0.0;
2345         Op op;
2346 
2347         assert(lvec.size() > 0 && rvec.size() > 0);
2348         assert(lvec.size() == rvec.size() ||
2349                lvec.size() == 1 || rvec.size() == 1);
2350 
2352         if (lvec.size() == rvec.size() && lvec.size() > 1) {
2353             for (off_type i = 0; i < size(); ++i) {
2354                 lsum += lvec[i];
2355                 rsum += rvec[i];
2356             }
2357             return op(lsum, rsum);
2358         }
2359 
2361         for (off_type i = 0; i < size(); ++i) {
2362             total += vec[i];
2363         }
2364 
2365         return total;
2366     }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classStats_1_1BinaryNode_a6ad7f056f60bd5cfec2caa5d5f4e363f}{
\index{Stats::BinaryNode@{Stats::BinaryNode}!l@{l}}
\index{l@{l}!Stats::BinaryNode@{Stats::BinaryNode}}
\subsubsection[{l}]{\setlength{\rightskip}{0pt plus 5cm}{\bf NodePtr} {\bf l}}}
\label{classStats_1_1BinaryNode_a6ad7f056f60bd5cfec2caa5d5f4e363f}
\hypertarget{classStats_1_1BinaryNode_aa3722e7d196563badabbb861eda68230}{
\index{Stats::BinaryNode@{Stats::BinaryNode}!r@{r}}
\index{r@{r}!Stats::BinaryNode@{Stats::BinaryNode}}
\subsubsection[{r}]{\setlength{\rightskip}{0pt plus 5cm}{\bf NodePtr} {\bf r}}}
\label{classStats_1_1BinaryNode_aa3722e7d196563badabbb861eda68230}
\hypertarget{classStats_1_1BinaryNode_a8f41af856442757ec68f3391333d3eb2}{
\index{Stats::BinaryNode@{Stats::BinaryNode}!vresult@{vresult}}
\index{vresult@{vresult}!Stats::BinaryNode@{Stats::BinaryNode}}
\subsubsection[{vresult}]{\setlength{\rightskip}{0pt plus 5cm}{\bf VResult} {\bf vresult}\hspace{0.3cm}{\ttfamily  \mbox{[}mutable\mbox{]}}}}
\label{classStats_1_1BinaryNode_a8f41af856442757ec68f3391333d3eb2}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
base/\hyperlink{statistics_8hh}{statistics.hh}\end{DoxyCompactItemize}
