\hypertarget{classMultreeCrossbar}{
\section{クラス MultreeCrossbar}
\label{classMultreeCrossbar}\index{MultreeCrossbar@{MultreeCrossbar}}
}


{\ttfamily \#include $<$MultreeCrossbar.hh$>$}MultreeCrossbarに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2cm]{classMultreeCrossbar}
\end{center}
\end{figure}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classMultreeCrossbar_a3c72c228bf72e9815ff90b3ad1fe74fb}{MultreeCrossbar} (const string \&conn\_\-type\_\-str\_\-, const string \&trans\_\-type\_\-str\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-in\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-out\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} data\_\-width\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} degree\_\-, const \hyperlink{classTechParameter}{TechParameter} $\ast$tech\_\-param\_\-ptr\_\-)
\item 
\hyperlink{classMultreeCrossbar_a2f3440d960819851a8c2bd0599eb5bde}{$\sim$MultreeCrossbar} ()
\item 
double \hyperlink{classMultreeCrossbar_a912bfef03e3ce71b4bbc0b5136b087f5}{get\_\-dynamic\_\-energy} (bool is\_\-max\_\-) const 
\end{DoxyCompactItemize}
\subsection*{Private メソッド}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classMultreeCrossbar_a02fd73d861ef2e4aabb38c0c9ff82947}{init} ()
\item 
double \hyperlink{classMultreeCrossbar_a0027807356ac4ca07fe2e593234eb884}{calc\_\-i\_\-static} ()
\end{DoxyCompactItemize}
\subsection*{Private 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} \hyperlink{classMultreeCrossbar_ad2e5a4e92c8ac5d402e25cc729040a8b}{m\_\-depth}
\end{DoxyCompactItemize}


\subsection{コンストラクタとデストラクタ}
\hypertarget{classMultreeCrossbar_a3c72c228bf72e9815ff90b3ad1fe74fb}{
\index{MultreeCrossbar@{MultreeCrossbar}!MultreeCrossbar@{MultreeCrossbar}}
\index{MultreeCrossbar@{MultreeCrossbar}!MultreeCrossbar@{MultreeCrossbar}}
\subsubsection[{MultreeCrossbar}]{\setlength{\rightskip}{0pt plus 5cm}{\bf MultreeCrossbar} (const string \& {\em conn\_\-type\_\-str\_\-}, \/  const string \& {\em trans\_\-type\_\-str\_\-}, \/  {\bf uint32\_\-t} {\em num\_\-in\_\-}, \/  {\bf uint32\_\-t} {\em num\_\-out\_\-}, \/  {\bf uint32\_\-t} {\em data\_\-width\_\-}, \/  {\bf uint32\_\-t} {\em degree\_\-}, \/  const {\bf TechParameter} $\ast$ {\em tech\_\-param\_\-ptr\_\-})}}
\label{classMultreeCrossbar_a3c72c228bf72e9815ff90b3ad1fe74fb}



\begin{DoxyCode}
52           : Crossbar(
53             MULTREE_CROSSBAR, conn_type_str_, trans_type_str_,
54             num_in_, num_out_, data_width_, 0, 0, degree_, tech_param_ptr_)
55 {
56     m_len_req_wire = 0;
57     init();
58 }
\end{DoxyCode}
\hypertarget{classMultreeCrossbar_a2f3440d960819851a8c2bd0599eb5bde}{
\index{MultreeCrossbar@{MultreeCrossbar}!$\sim$MultreeCrossbar@{$\sim$MultreeCrossbar}}
\index{$\sim$MultreeCrossbar@{$\sim$MultreeCrossbar}!MultreeCrossbar@{MultreeCrossbar}}
\subsubsection[{$\sim$MultreeCrossbar}]{\setlength{\rightskip}{0pt plus 5cm}$\sim${\bf MultreeCrossbar} ()}}
\label{classMultreeCrossbar_a2f3440d960819851a8c2bd0599eb5bde}



\begin{DoxyCode}
61 {}
\end{DoxyCode}


\subsection{関数}
\hypertarget{classMultreeCrossbar_a0027807356ac4ca07fe2e593234eb884}{
\index{MultreeCrossbar@{MultreeCrossbar}!calc\_\-i\_\-static@{calc\_\-i\_\-static}}
\index{calc\_\-i\_\-static@{calc\_\-i\_\-static}!MultreeCrossbar@{MultreeCrossbar}}
\subsubsection[{calc\_\-i\_\-static}]{\setlength{\rightskip}{0pt plus 5cm}double calc\_\-i\_\-static ()\hspace{0.3cm}{\ttfamily  \mbox{[}private, virtual\mbox{]}}}}
\label{classMultreeCrossbar_a0027807356ac4ca07fe2e593234eb884}


\hyperlink{classCrossbar_a231bfef1332fc2583c9120c237648492}{Crossbar}を実装しています。


\begin{DoxyCode}
134 {
135     double Wdecinvn = m_tech_param_ptr->get_Wdecinvn();
136     double Wdecinvp = m_tech_param_ptr->get_Wdecinvp();
137     double Woutdrivern = m_tech_param_ptr->get_Woutdrivern();
138     double Woutdriverp = m_tech_param_ptr->get_Woutdriverp();
139     double WdecNORn = m_tech_param_ptr->get_WdecNORn();
140     double WdecNORp = m_tech_param_ptr->get_WdecNORp();
141     double NOR2_TAB_0 = m_tech_param_ptr->get_NOR2_TAB(0);
142     double NOR2_TAB_1 = m_tech_param_ptr->get_NOR2_TAB(1);
143     double NOR2_TAB_2 = m_tech_param_ptr->get_NOR2_TAB(2);
144     double NOR2_TAB_3 = m_tech_param_ptr->get_NOR2_TAB(3);
145     double NMOS_TAB_0 = m_tech_param_ptr->get_NMOS_TAB(0);
146     double PMOS_TAB_0 = m_tech_param_ptr->get_PMOS_TAB(0);
147 
148     double i_static = 0;
149 
150     // input driver
151     i_static += (Wdecinvn*NMOS_TAB_0+Wdecinvp*PMOS_TAB_0)*m_num_in*m_data_width;
152 
153     // output driver
154     i_static += (Woutdrivern*NMOS_TAB_0+Woutdriverp*PMOS_TAB_0)*m_num_out*
      m_data_width;
155 
156     // mux
157     i_static += (WdecNORp*NOR2_TAB_0+WdecNORn*(NOR2_TAB_1+NOR2_TAB_2+NOR2_TAB_3))
      /4*(2*m_num_in-1)*m_num_out*m_data_width;
158 
159     // control signal inverter
160     i_static += (Wdecinvn*NMOS_TAB_0+Wdecinvp*PMOS_TAB_0)*m_num_in*m_num_out;
161     return i_static;
162 }
\end{DoxyCode}
\hypertarget{classMultreeCrossbar_a912bfef03e3ce71b4bbc0b5136b087f5}{
\index{MultreeCrossbar@{MultreeCrossbar}!get\_\-dynamic\_\-energy@{get\_\-dynamic\_\-energy}}
\index{get\_\-dynamic\_\-energy@{get\_\-dynamic\_\-energy}!MultreeCrossbar@{MultreeCrossbar}}
\subsubsection[{get\_\-dynamic\_\-energy}]{\setlength{\rightskip}{0pt plus 5cm}double get\_\-dynamic\_\-energy (bool {\em is\_\-max\_\-}) const\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classMultreeCrossbar_a912bfef03e3ce71b4bbc0b5136b087f5}


\hyperlink{classCrossbar_ac2104354778bb800a8854b9386a66fbe}{Crossbar}を実装しています。


\begin{DoxyCode}
64 {
65     double e_atomic;
66     double e_access = 0;
67 
68     e_atomic = m_e_chg_in*m_data_width*(is_max_? 1:0.5);
69     e_access += e_atomic;
70 
71     e_atomic = m_e_chg_out*m_data_width*(is_max_? 1:0.5);
72     e_access += e_atomic;
73 
74     e_atomic = m_e_chg_ctr;
75     e_access += e_atomic;
76 
77     if (m_depth > 1)
78     {
79         e_atomic = m_e_chg_int*m_data_width*(m_depth-1)*(is_max_? 1:0.5);
80         e_access += e_atomic;
81     }
82 
83     return e_access;
84 }
\end{DoxyCode}
\hypertarget{classMultreeCrossbar_a02fd73d861ef2e4aabb38c0c9ff82947}{
\index{MultreeCrossbar@{MultreeCrossbar}!init@{init}}
\index{init@{init}!MultreeCrossbar@{MultreeCrossbar}}
\subsubsection[{init}]{\setlength{\rightskip}{0pt plus 5cm}void init ()\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classMultreeCrossbar_a02fd73d861ef2e4aabb38c0c9ff82947}



\begin{DoxyCode}
87 {
88     double CrsbarCellWidth = m_tech_param_ptr->get_CrsbarCellWidth();
89     double CCmetal = m_tech_param_ptr->get_CCmetal();
90     double Lamda = m_tech_param_ptr->get_Lamda();
91     double CC3metal = m_tech_param_ptr->get_CC3metal();
92 
93     double len_in_wire;
94     // input wire horizontal segment length
95     len_in_wire = m_num_in*m_data_width*CrsbarCellWidth*(m_num_out/2);
96     m_cap_in_wire = len_in_wire*CCmetal;
97     // input wire vertical segment length
98     len_in_wire = m_num_in*m_data_width*(5*Lamda)*(m_num_out/2);
99     m_cap_in_wire += len_in_wire*CC3metal;
100     m_cap_out_wire = 0;
101 
102     double Cmetal = m_tech_param_ptr->get_Cmetal();
103     double len_ctr_wire = m_num_in*m_data_width*CrsbarCellWidth*(m_num_out/2)/2;
104     m_cap_ctr_wire = Cmetal*len_ctr_wire;
105 
106     double e_factor = m_tech_param_ptr->get_EnergyFactor();
107     m_e_chg_in = calc_in_cap()*e_factor;
108     m_e_chg_out = calc_out_cap(m_degree)*e_factor;
109     m_e_chg_int = calc_int_cap()*e_factor;
110 
111     m_depth = (uint32_t)ceil(log((double)m_num_in)/log((double)m_degree));
112 
113     // control signal should reset after transmission is done
114     if (m_depth == 1)
115     {
116         // only one level of control sigal
117         m_e_chg_ctr = calc_ctr_cap(m_cap_ctr_wire, 0, 0)*e_factor;
118     }
119     else
120     {
121         // first level and last level control signals
122         m_e_chg_ctr = calc_ctr_cap(m_cap_ctr_wire, 0, 1)*e_factor + calc_ctr_cap(
      0, 1, 0)*e_factor;
123         // intermediate control signals
124         if (m_depth > 2)
125         {
126             m_e_chg_ctr += (m_depth-2)*calc_ctr_cap(0, 1, 1)*e_factor;
127         }
128     }
129 
130     m_i_static = calc_i_static();
131 }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classMultreeCrossbar_ad2e5a4e92c8ac5d402e25cc729040a8b}{
\index{MultreeCrossbar@{MultreeCrossbar}!m\_\-depth@{m\_\-depth}}
\index{m\_\-depth@{m\_\-depth}!MultreeCrossbar@{MultreeCrossbar}}
\subsubsection[{m\_\-depth}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t} {\bf m\_\-depth}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classMultreeCrossbar_ad2e5a4e92c8ac5d402e25cc729040a8b}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
mem/ruby/network/orion/Crossbar/\hyperlink{MultreeCrossbar_8hh}{MultreeCrossbar.hh}\item 
mem/ruby/network/orion/Crossbar/\hyperlink{MultreeCrossbar_8cc}{MultreeCrossbar.cc}\end{DoxyCompactItemize}
