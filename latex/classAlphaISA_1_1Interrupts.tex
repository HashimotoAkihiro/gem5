\hypertarget{classAlphaISA_1_1Interrupts}{
\section{クラス Interrupts}
\label{classAlphaISA_1_1Interrupts}\index{AlphaISA::Interrupts@{AlphaISA::Interrupts}}
}


{\ttfamily \#include $<$interrupts.hh$>$}Interruptsに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2cm]{classAlphaISA_1_1Interrupts}
\end{center}
\end{figure}
\subsection*{Public 型}
\begin{DoxyCompactItemize}
\item 
typedef AlphaInterruptsParams \hyperlink{classAlphaISA_1_1Interrupts_acac734c7c124173e3940e672404775c6}{Params}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
const \hyperlink{classAlphaISA_1_1Interrupts_acac734c7c124173e3940e672404775c6}{Params} $\ast$ \hyperlink{classAlphaISA_1_1Interrupts_acd3c3feb78ae7a8f88fe0f110a718dff}{params} () const 
\item 
\hyperlink{classAlphaISA_1_1Interrupts_a3d148759405b99148e0c34750966edb1}{Interrupts} (\hyperlink{classAlphaISA_1_1Interrupts_acac734c7c124173e3940e672404775c6}{Params} $\ast$p)
\item 
void \hyperlink{classAlphaISA_1_1Interrupts_a2ab8c6aed9969bc58d6aa2427d442cc4}{setCPU} (\hyperlink{classBaseCPU}{BaseCPU} $\ast$\_\-cpu)
\item 
void \hyperlink{classAlphaISA_1_1Interrupts_a24c6c4fbdc0605bcd015ce06f194e4b4}{post} (int int\_\-num, int index)
\item 
void \hyperlink{classAlphaISA_1_1Interrupts_af60c3484087379d0330467d77f6cbaae}{clear} (int int\_\-num, int index)
\item 
void \hyperlink{classAlphaISA_1_1Interrupts_a798729dca95209ecdc609807a653a2bf}{clearAll} ()
\item 
void \hyperlink{classAlphaISA_1_1Interrupts_a53e036786d17361be4c7320d39c99b84}{serialize} (std::ostream \&os)
\item 
void \hyperlink{classAlphaISA_1_1Interrupts_af22e5d6d660b97db37003ac61ac4ee49}{unserialize} (\hyperlink{classCheckpoint}{Checkpoint} $\ast$cp, const std::string \&section)
\item 
bool \hyperlink{classAlphaISA_1_1Interrupts_af3c66fb49fec598cf78aaec29d764952}{checkInterrupts} (\hyperlink{classThreadContext}{ThreadContext} $\ast$tc) const 
\item 
\hyperlink{classRefCountingPtr}{Fault} \hyperlink{classAlphaISA_1_1Interrupts_ae603c88d759977611d3bcc6e2deb61ae}{getInterrupt} (\hyperlink{classThreadContext}{ThreadContext} $\ast$tc)
\item 
void \hyperlink{classAlphaISA_1_1Interrupts_a00892e9b06edcba6c3c27454d6235100}{updateIntrInfo} (\hyperlink{classThreadContext}{ThreadContext} $\ast$tc)
\end{DoxyCompactItemize}
\subsection*{Protected 変数}
\begin{DoxyCompactItemize}
\item 
uint64\_\-t \hyperlink{classAlphaISA_1_1Interrupts_a5249af68a95b99c6e35ebbc71821efdf}{interrupts} \mbox{[}NumInterruptLevels\mbox{]}
\item 
uint64\_\-t \hyperlink{classAlphaISA_1_1Interrupts_a199d36cc1b0d5fb621a4f57b90ac2972}{intstatus}
\end{DoxyCompactItemize}
\subsection*{Private 変数}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classAlphaISA_1_1Interrupts_af2d03360eddc7a37308f528ec004d1aa}{newInfoSet}
\item 
int \hyperlink{classAlphaISA_1_1Interrupts_a1de149de9a59d4b8291c2aa655119825}{newIpl}
\item 
int \hyperlink{classAlphaISA_1_1Interrupts_ad13b7544dc5de8549f52b32df52e0d72}{newSummary}
\item 
\hyperlink{classBaseCPU}{BaseCPU} $\ast$ \hyperlink{classAlphaISA_1_1Interrupts_a7a31ca9fefb2fe821f29a270678912db}{cpu}
\end{DoxyCompactItemize}


\subsection{型定義}
\hypertarget{classAlphaISA_1_1Interrupts_acac734c7c124173e3940e672404775c6}{
\index{AlphaISA::Interrupts@{AlphaISA::Interrupts}!Params@{Params}}
\index{Params@{Params}!AlphaISA::Interrupts@{AlphaISA::Interrupts}}
\subsubsection[{Params}]{\setlength{\rightskip}{0pt plus 5cm}typedef AlphaInterruptsParams {\bf Params}}}
\label{classAlphaISA_1_1Interrupts_acac734c7c124173e3940e672404775c6}


\subsection{コンストラクタとデストラクタ}
\hypertarget{classAlphaISA_1_1Interrupts_a3d148759405b99148e0c34750966edb1}{
\index{AlphaISA::Interrupts@{AlphaISA::Interrupts}!Interrupts@{Interrupts}}
\index{Interrupts@{Interrupts}!AlphaISA::Interrupts@{AlphaISA::Interrupts}}
\subsubsection[{Interrupts}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Interrupts} ({\bf Params} $\ast$ {\em p})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classAlphaISA_1_1Interrupts_a3d148759405b99148e0c34750966edb1}



\begin{DoxyCode}
68                            : SimObject(p), cpu(NULL)
69     {
70         memset(interrupts, 0, sizeof(interrupts));
71         intstatus = 0;
72         newInfoSet = false;
73     }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classAlphaISA_1_1Interrupts_af3c66fb49fec598cf78aaec29d764952}{
\index{AlphaISA::Interrupts@{AlphaISA::Interrupts}!checkInterrupts@{checkInterrupts}}
\index{checkInterrupts@{checkInterrupts}!AlphaISA::Interrupts@{AlphaISA::Interrupts}}
\subsubsection[{checkInterrupts}]{\setlength{\rightskip}{0pt plus 5cm}bool checkInterrupts ({\bf ThreadContext} $\ast$ {\em tc}) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classAlphaISA_1_1Interrupts_af3c66fb49fec598cf78aaec29d764952}



\begin{DoxyCode}
137     {
138         return (intstatus != 0) && !(tc->pcState().pc() & 0x3);
139     }
\end{DoxyCode}
\hypertarget{classAlphaISA_1_1Interrupts_af60c3484087379d0330467d77f6cbaae}{
\index{AlphaISA::Interrupts@{AlphaISA::Interrupts}!clear@{clear}}
\index{clear@{clear}!AlphaISA::Interrupts@{AlphaISA::Interrupts}}
\subsubsection[{clear}]{\setlength{\rightskip}{0pt plus 5cm}void clear (int {\em int\_\-num}, \/  int {\em index})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classAlphaISA_1_1Interrupts_af60c3484087379d0330467d77f6cbaae}



\begin{DoxyCode}
98     {
99         DPRINTF(Interrupt, "Interrupt %d:%d cleared\n", int_num, index);
100 
101         if (int_num < 0 || int_num >= NumInterruptLevels)
102             panic("int_num out of bounds\n");
103 
104         if (index < 0 || index >= (int)sizeof(uint64_t) * 8)
105             panic("int_num out of bounds\n");
106 
107         interrupts[int_num] &= ~(1 << index);
108         if (interrupts[int_num] == 0)
109             intstatus &= ~(ULL(1) << int_num);
110     }
\end{DoxyCode}
\hypertarget{classAlphaISA_1_1Interrupts_a798729dca95209ecdc609807a653a2bf}{
\index{AlphaISA::Interrupts@{AlphaISA::Interrupts}!clearAll@{clearAll}}
\index{clearAll@{clearAll}!AlphaISA::Interrupts@{AlphaISA::Interrupts}}
\subsubsection[{clearAll}]{\setlength{\rightskip}{0pt plus 5cm}void clearAll ()\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classAlphaISA_1_1Interrupts_a798729dca95209ecdc609807a653a2bf}



\begin{DoxyCode}
114     {
115         DPRINTF(Interrupt, "Interrupts all cleared\n");
116 
117         memset(interrupts, 0, sizeof(interrupts));
118         intstatus = 0;
119     }
\end{DoxyCode}
\hypertarget{classAlphaISA_1_1Interrupts_ae603c88d759977611d3bcc6e2deb61ae}{
\index{AlphaISA::Interrupts@{AlphaISA::Interrupts}!getInterrupt@{getInterrupt}}
\index{getInterrupt@{getInterrupt}!AlphaISA::Interrupts@{AlphaISA::Interrupts}}
\subsubsection[{getInterrupt}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Fault} getInterrupt ({\bf ThreadContext} $\ast$ {\em tc})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classAlphaISA_1_1Interrupts_ae603c88d759977611d3bcc6e2deb61ae}



\begin{DoxyCode}
143     {
144         uint64_t ipl = 0;
145         uint64_t summary = 0;
146 
147         if (tc->readMiscRegNoEffect(IPR_ASTRR))
148             panic("asynchronous traps not implemented\n");
149 
150         if (tc->readMiscRegNoEffect(IPR_SIRR)) {
151             for (uint64_t i = INTLEVEL_SOFTWARE_MIN;
152                  i < INTLEVEL_SOFTWARE_MAX; i++) {
153                 if (tc->readMiscRegNoEffect(IPR_SIRR) & (ULL(1) << i)) {
154                     // See table 4-19 of 21164 hardware reference
155                     ipl = (i - INTLEVEL_SOFTWARE_MIN) + 1;
156                     summary |= (ULL(1) << i);
157                 }
158             }
159         }
160 
161         if (intstatus) {
162             for (uint64_t i = INTLEVEL_EXTERNAL_MIN;
163                  i < INTLEVEL_EXTERNAL_MAX; i++) {
164                 if (intstatus & (ULL(1) << i)) {
165                     // See table 4-19 of 21164 hardware reference
166                     ipl = i;
167                     summary |= (ULL(1) << i);
168                 }
169             }
170         }
171 
172         if (ipl && ipl > tc->readMiscRegNoEffect(IPR_IPLR)) {
173             newIpl = ipl;
174             newSummary = summary;
175             newInfoSet = true;
176             DPRINTF(Flow, "Interrupt! IPLR=%d ipl=%d summary=%x\n",
177                     tc->readMiscRegNoEffect(IPR_IPLR), ipl, summary);
178 
179             return new InterruptFault;
180         } else {
181             return NoFault;
182         }
183     }
\end{DoxyCode}
\hypertarget{classAlphaISA_1_1Interrupts_acd3c3feb78ae7a8f88fe0f110a718dff}{
\index{AlphaISA::Interrupts@{AlphaISA::Interrupts}!params@{params}}
\index{params@{params}!AlphaISA::Interrupts@{AlphaISA::Interrupts}}
\subsubsection[{params}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Params}$\ast$ params () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classAlphaISA_1_1Interrupts_acd3c3feb78ae7a8f88fe0f110a718dff}



\begin{DoxyCode}
64     {
65         return dynamic_cast<const Params *>(_params);
66     }
\end{DoxyCode}
\hypertarget{classAlphaISA_1_1Interrupts_a24c6c4fbdc0605bcd015ce06f194e4b4}{
\index{AlphaISA::Interrupts@{AlphaISA::Interrupts}!post@{post}}
\index{post@{post}!AlphaISA::Interrupts@{AlphaISA::Interrupts}}
\subsubsection[{post}]{\setlength{\rightskip}{0pt plus 5cm}void post (int {\em int\_\-num}, \/  int {\em index})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classAlphaISA_1_1Interrupts_a24c6c4fbdc0605bcd015ce06f194e4b4}



\begin{DoxyCode}
83     {
84         DPRINTF(Interrupt, "Interrupt %d:%d posted\n", int_num, index);
85 
86         if (int_num < 0 || int_num >= NumInterruptLevels)
87             panic("int_num out of bounds\n");
88 
89         if (index < 0 || index >= (int)sizeof(uint64_t) * 8)
90             panic("int_num out of bounds\n");
91 
92         interrupts[int_num] |= 1 << index;
93         intstatus |= (ULL(1) << int_num);
94     }
\end{DoxyCode}
\hypertarget{classAlphaISA_1_1Interrupts_a53e036786d17361be4c7320d39c99b84}{
\index{AlphaISA::Interrupts@{AlphaISA::Interrupts}!serialize@{serialize}}
\index{serialize@{serialize}!AlphaISA::Interrupts@{AlphaISA::Interrupts}}
\subsubsection[{serialize}]{\setlength{\rightskip}{0pt plus 5cm}void serialize (std::ostream \& {\em os})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classAlphaISA_1_1Interrupts_a53e036786d17361be4c7320d39c99b84}



\begin{DoxyCode}
123     {
124         SERIALIZE_ARRAY(interrupts, NumInterruptLevels);
125         SERIALIZE_SCALAR(intstatus);
126     }
\end{DoxyCode}
\hypertarget{classAlphaISA_1_1Interrupts_a2ab8c6aed9969bc58d6aa2427d442cc4}{
\index{AlphaISA::Interrupts@{AlphaISA::Interrupts}!setCPU@{setCPU}}
\index{setCPU@{setCPU}!AlphaISA::Interrupts@{AlphaISA::Interrupts}}
\subsubsection[{setCPU}]{\setlength{\rightskip}{0pt plus 5cm}void setCPU ({\bf BaseCPU} $\ast$ {\em \_\-cpu})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classAlphaISA_1_1Interrupts_a2ab8c6aed9969bc58d6aa2427d442cc4}



\begin{DoxyCode}
77     {
78         cpu = _cpu;
79     }
\end{DoxyCode}
\hypertarget{classAlphaISA_1_1Interrupts_af22e5d6d660b97db37003ac61ac4ee49}{
\index{AlphaISA::Interrupts@{AlphaISA::Interrupts}!unserialize@{unserialize}}
\index{unserialize@{unserialize}!AlphaISA::Interrupts@{AlphaISA::Interrupts}}
\subsubsection[{unserialize}]{\setlength{\rightskip}{0pt plus 5cm}void unserialize ({\bf Checkpoint} $\ast$ {\em cp}, \/  const std::string \& {\em section})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classAlphaISA_1_1Interrupts_af22e5d6d660b97db37003ac61ac4ee49}



\begin{DoxyCode}
130     {
131         UNSERIALIZE_ARRAY(interrupts, NumInterruptLevels);
132         UNSERIALIZE_SCALAR(intstatus);
133     }
\end{DoxyCode}
\hypertarget{classAlphaISA_1_1Interrupts_a00892e9b06edcba6c3c27454d6235100}{
\index{AlphaISA::Interrupts@{AlphaISA::Interrupts}!updateIntrInfo@{updateIntrInfo}}
\index{updateIntrInfo@{updateIntrInfo}!AlphaISA::Interrupts@{AlphaISA::Interrupts}}
\subsubsection[{updateIntrInfo}]{\setlength{\rightskip}{0pt plus 5cm}void updateIntrInfo ({\bf ThreadContext} $\ast$ {\em tc})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classAlphaISA_1_1Interrupts_a00892e9b06edcba6c3c27454d6235100}



\begin{DoxyCode}
187     {
188         assert(newInfoSet);
189         tc->setMiscRegNoEffect(IPR_ISR, newSummary);
190         tc->setMiscRegNoEffect(IPR_INTID, newIpl);
191         newInfoSet = false;
192     }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classAlphaISA_1_1Interrupts_a7a31ca9fefb2fe821f29a270678912db}{
\index{AlphaISA::Interrupts@{AlphaISA::Interrupts}!cpu@{cpu}}
\index{cpu@{cpu}!AlphaISA::Interrupts@{AlphaISA::Interrupts}}
\subsubsection[{cpu}]{\setlength{\rightskip}{0pt plus 5cm}{\bf BaseCPU}$\ast$ {\bf cpu}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classAlphaISA_1_1Interrupts_a7a31ca9fefb2fe821f29a270678912db}
\hypertarget{classAlphaISA_1_1Interrupts_a5249af68a95b99c6e35ebbc71821efdf}{
\index{AlphaISA::Interrupts@{AlphaISA::Interrupts}!interrupts@{interrupts}}
\index{interrupts@{interrupts}!AlphaISA::Interrupts@{AlphaISA::Interrupts}}
\subsubsection[{interrupts}]{\setlength{\rightskip}{0pt plus 5cm}uint64\_\-t {\bf interrupts}\mbox{[}NumInterruptLevels\mbox{]}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classAlphaISA_1_1Interrupts_a5249af68a95b99c6e35ebbc71821efdf}
\hypertarget{classAlphaISA_1_1Interrupts_a199d36cc1b0d5fb621a4f57b90ac2972}{
\index{AlphaISA::Interrupts@{AlphaISA::Interrupts}!intstatus@{intstatus}}
\index{intstatus@{intstatus}!AlphaISA::Interrupts@{AlphaISA::Interrupts}}
\subsubsection[{intstatus}]{\setlength{\rightskip}{0pt plus 5cm}uint64\_\-t {\bf intstatus}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classAlphaISA_1_1Interrupts_a199d36cc1b0d5fb621a4f57b90ac2972}
\hypertarget{classAlphaISA_1_1Interrupts_af2d03360eddc7a37308f528ec004d1aa}{
\index{AlphaISA::Interrupts@{AlphaISA::Interrupts}!newInfoSet@{newInfoSet}}
\index{newInfoSet@{newInfoSet}!AlphaISA::Interrupts@{AlphaISA::Interrupts}}
\subsubsection[{newInfoSet}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf newInfoSet}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classAlphaISA_1_1Interrupts_af2d03360eddc7a37308f528ec004d1aa}
\hypertarget{classAlphaISA_1_1Interrupts_a1de149de9a59d4b8291c2aa655119825}{
\index{AlphaISA::Interrupts@{AlphaISA::Interrupts}!newIpl@{newIpl}}
\index{newIpl@{newIpl}!AlphaISA::Interrupts@{AlphaISA::Interrupts}}
\subsubsection[{newIpl}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf newIpl}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classAlphaISA_1_1Interrupts_a1de149de9a59d4b8291c2aa655119825}
\hypertarget{classAlphaISA_1_1Interrupts_ad13b7544dc5de8549f52b32df52e0d72}{
\index{AlphaISA::Interrupts@{AlphaISA::Interrupts}!newSummary@{newSummary}}
\index{newSummary@{newSummary}!AlphaISA::Interrupts@{AlphaISA::Interrupts}}
\subsubsection[{newSummary}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf newSummary}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classAlphaISA_1_1Interrupts_ad13b7544dc5de8549f52b32df52e0d72}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
arch/alpha/\hyperlink{alpha_2interrupts_8hh}{interrupts.hh}\end{DoxyCompactItemize}
