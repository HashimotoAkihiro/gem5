<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス TLB</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespaceArmISA.html">ArmISA</a>::<a class="el" href="classArmISA_1_1TLB.html">TLB</a>
  </div>
</div>
<div class="contents">
<h1>クラス TLB</h1><!-- doxytag: class="ArmISA::TLB" --><!-- doxytag: inherits="BaseTLB" -->
<p><code>#include &lt;<a class="el" href="arch_2arm_2tlb_8hh_source.html">tlb.hh</a>&gt;</code></p>
<div class="dynheader">
TLBに対する継承グラフ</div>
<div class="dynsection">
 <div class="center">
  <img src="classArmISA_1_1TLB.gif" usemap="#TLB_map" alt=""/>
  <map id="TLB_map" name="TLB_map">
<area href="classBaseTLB.html" alt="BaseTLB" shape="rect" coords="105,112,200,136"/>
<area href="classSimObject.html" alt="SimObject" shape="rect" coords="105,56,200,80"/>
<area href="classEventManager.html" alt="EventManager" shape="rect" coords="0,0,95,24"/>
<area href="classSerializable.html" alt="Serializable" shape="rect" coords="105,0,200,24"/>
<area href="classDrainable.html" alt="Drainable" shape="rect" coords="210,0,305,24"/>
</map>
 </div>
</div>

<p><a href="classArmISA_1_1TLB-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public 型</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0d">ArmFlags</a> { <br/>
&nbsp;&nbsp;<a class="el" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0da811bb3ddcc5035211e497b863db3abd0">AlignmentMask</a> =  0x7, 
<a class="el" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0da46a23507e5cc78facbca4f0aadb6106d">AlignByte</a> =  0x0, 
<a class="el" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0da78d8dffe4cfc46c93a011f6c18eb342f">AlignHalfWord</a> =  0x1, 
<a class="el" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0da7aed72b8cf399f281ad8558187fe6941">AlignWord</a> =  0x2, 
<br/>
&nbsp;&nbsp;<a class="el" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0dad6e82eb48377344b7d9f32c3a488dc0e">AlignDoubleWord</a> =  0x3, 
<a class="el" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0da9323e858587f025242511a85b969b287">AlignQuadWord</a> =  0x4, 
<a class="el" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0da9adcd9ee14d498ddb978852cae60d840">AlignOctWord</a> =  0x5, 
<a class="el" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0dac6aa9917fe5880558d8ee22e2fbcbe58">AllowUnaligned</a> =  0x8, 
<br/>
&nbsp;&nbsp;<a class="el" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0dadcfc57d389e8e2bb30dc32135b6a92d0">UserMode</a> =  0x10, 
<a class="el" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0daf6e40c9fd5825f3b3a4f2d45d4a64c68">MustBeOne</a> =  0x40
<br/>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08">ArmTranslationType</a> { <a class="el" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08af17d21db71fd885f6cc71fb2d0e896ec">NormalTran</a> =  0, 
<a class="el" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08a4ed07d4f5bb408945e5f4e9c7333b2d3">S1CTran</a> =  0x1, 
<a class="el" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08ae447e872ded0e6da22f91d2ccaf66afd">HypMode</a> =  0x2, 
<a class="el" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08ab8e7d202ad511f74c201e2bca94e83d6">S1S2NsTran</a> =  0x4
 }</td></tr>
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a072a0e1c517c70f5baf23c7bf1aae5c6">TLB</a> (const ArmTLBParams *p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a5bc074f4c969287561515e7906f422b5">TLB</a> (const <a class="el" href="classSimObject.html#a0f0761d2db586a23bb2a2880b8f387bb">Params</a> *p, int _size, <a class="el" href="classArmISA_1_1TableWalker.html">TableWalker</a> *_walker)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a16c4d359f56a027d2e6afe6af85c81e4">lookup</a> (<a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a> vpn, uint16_t asn, uint8_t <a class="el" href="classArmISA_1_1TLB.html#add293169f7f2ac526b3fa14f950cf0bb">vmid</a>, bool hyp, bool secure, bool functional, bool ignore_asn, uint8_t target_el)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a18a1722ab7889997b15fd7b9fc33c7ff">~TLB</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a15b6c15c1be2ca4de3e65772a02aa29f">takeOverFrom</a> (<a class="el" href="classBaseTLB.html">BaseTLB</a> *otlb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a02fd73d861ef2e4aabb38c0c9ff82947">init</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">setup all the back pointers  <a href="#a02fd73d861ef2e4aabb38c0c9ff82947"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#ae888fc9d1a9bad8784469601dcf8d436">setMMU</a> (<a class="el" href="classArmISA_1_1Stage2MMU.html">Stage2MMU</a> *<a class="el" href="namespaceArmISA.html#afb747b54d0c5e3e4e1763be19ca9373b">m</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#ae121404a6cfcf714e05fe2231ce4c7fc">getsize</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a0a32b96ef1142ca48fa347d06b5d2436">insert</a> (<a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a> vaddr, <a class="el" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> &amp;pte)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#acdb1ef6fa70ed231ff084dced51b91eb">getTE</a> (<a class="el" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> **te, <a class="el" href="classRequest.html">RequestPtr</a> req, <a class="el" href="classThreadContext.html">ThreadContext</a> *<a class="el" href="namespaceArmISA.html#a5aff829af55e65b802d83dfcef4e9dd0">tc</a>, <a class="el" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a> <a class="el" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, <a class="el" href="classBaseTLB_1_1Translation.html">Translation</a> *translation, bool timing, bool functional, bool is_secure, <a class="el" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08">ArmTranslationType</a> tranType)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a0743624c3e13c3dd3108be8847f8e488">getResultTe</a> (<a class="el" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> **te, <a class="el" href="classRequest.html">RequestPtr</a> req, <a class="el" href="classThreadContext.html">ThreadContext</a> *<a class="el" href="namespaceArmISA.html#a5aff829af55e65b802d83dfcef4e9dd0">tc</a>, <a class="el" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a> <a class="el" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, <a class="el" href="classBaseTLB_1_1Translation.html">Translation</a> *translation, bool timing, bool functional, <a class="el" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> *mergeTe)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a5a4e92c7787e92910f8ad62cb4f1bf5f">checkPermissions</a> (<a class="el" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> *te, <a class="el" href="classRequest.html">RequestPtr</a> req, <a class="el" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a> <a class="el" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a1ba70376d3c5636e94c5fd6312f7b63e">checkPermissions64</a> (<a class="el" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> *te, <a class="el" href="classRequest.html">RequestPtr</a> req, <a class="el" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a> <a class="el" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, <a class="el" href="classThreadContext.html">ThreadContext</a> *<a class="el" href="namespaceArmISA.html#a5aff829af55e65b802d83dfcef4e9dd0">tc</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a5ef6c06c7267c792fec8972aef272b4e">flushAllSecurity</a> (bool secure_lookup, uint8_t target_el, bool ignore_el=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a7cd235aa813c35e4cb1b4efcdd1a407f">flushAllNs</a> (bool hyp, uint8_t target_el, bool ignore_el=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#aca1483a67aee5a91e442f7131d66bcbd">flushAll</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#afe44c2f5e54b8288d36b04cd77d18d54">flushMvaAsid</a> (<a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a> mva, uint64_t asn, bool secure_lookup, uint8_t target_el)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#ac8076054324beee773a8f801c3e6dfed">flushAsid</a> (uint64_t asn, bool secure_lookup, uint8_t target_el)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a9ea15078537697a5208dea8e912d7a08">flushMva</a> (<a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a> mva, bool secure_lookup, bool hyp, uint8_t target_el)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#aa14d4829f5c7bce966547df0babb7487">trickBoxCheck</a> (<a class="el" href="classRequest.html">RequestPtr</a> req, <a class="el" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a> <a class="el" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, <a class="el" href="structArmISA_1_1TlbEntry.html#a0595b41cfb7d03f18438f9c355a3469d">TlbEntry::DomainType</a> <a class="el" href="namespaceArmISA.html#ad0cc3566b56b49851f0996cbbe5000cf">domain</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a19bf31f32ec6125d85acc1feeee28e47">walkTrickBoxCheck</a> (<a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a> <a class="el" href="namespaceArmISA.html#aec59a1cc2e7438586cdc39f4b30b0061">pa</a>, bool is_secure, <a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a> <a class="el" href="namespaceArmISA.html#a441099e13f407fadb6bcb0447107de87">va</a>, <a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a> sz, bool is_exec, bool is_write, <a class="el" href="structArmISA_1_1TlbEntry.html#a0595b41cfb7d03f18438f9c355a3469d">TlbEntry::DomainType</a> <a class="el" href="namespaceArmISA.html#ad0cc3566b56b49851f0996cbbe5000cf">domain</a>, <a class="el" href="namespaceArmISA.html#aefa4213b348e38ee69f2a6109563a7bd">LookupLevel</a> lookup_level)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a48b5486ebf7c83e7c81025a032312ca6">printTlb</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a5fd1cb3fb8887f4bd6c1f982a23cc026">allCpusCaching</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a2d698ff909513b48a1263f8a5440e067">demapPage</a> (<a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a> vaddr, uint64_t asn)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a4871909ce80dc11f7ddffcd28214262e">translateFunctional</a> (<a class="el" href="classThreadContext.html">ThreadContext</a> *<a class="el" href="namespaceArmISA.html#a5aff829af55e65b802d83dfcef4e9dd0">tc</a>, <a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a> vaddr, <a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a> &amp;paddr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#ab1be1538ff47c6977f901f22ba6150a0">translateFunctional</a> (<a class="el" href="classRequest.html">RequestPtr</a> req, <a class="el" href="classThreadContext.html">ThreadContext</a> *<a class="el" href="namespaceArmISA.html#a5aff829af55e65b802d83dfcef4e9dd0">tc</a>, <a class="el" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a> <a class="el" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, <a class="el" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08">ArmTranslationType</a> tranType=NormalTran)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#af863223c2fa90b0bbb305626dc3bc604">setAttr</a> (uint64_t <a class="el" href="namespaceArmISA.html#a710acfac10f0042826d2d6d9c213ae7b">attr</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#abe784aff035154580e3b0fc0f5af8bd5">getAttr</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a3d876e306a41e194bda2747ea51982f8">translateFs</a> (<a class="el" href="classRequest.html">RequestPtr</a> req, <a class="el" href="classThreadContext.html">ThreadContext</a> *<a class="el" href="namespaceArmISA.html#a5aff829af55e65b802d83dfcef4e9dd0">tc</a>, <a class="el" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a> <a class="el" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, <a class="el" href="classBaseTLB_1_1Translation.html">Translation</a> *translation, bool &amp;delay, bool timing, <a class="el" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08">ArmTranslationType</a> tranType, bool functional=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a6ada13dabe05b90fee0464345cf0f654">translateSe</a> (<a class="el" href="classRequest.html">RequestPtr</a> req, <a class="el" href="classThreadContext.html">ThreadContext</a> *<a class="el" href="namespaceArmISA.html#a5aff829af55e65b802d83dfcef4e9dd0">tc</a>, <a class="el" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a> <a class="el" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, <a class="el" href="classBaseTLB_1_1Translation.html">Translation</a> *translation, bool &amp;delay, bool timing)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#ad9813aa5a0ed9ba84b634d9960006ed2">translateAtomic</a> (<a class="el" href="classRequest.html">RequestPtr</a> req, <a class="el" href="classThreadContext.html">ThreadContext</a> *<a class="el" href="namespaceArmISA.html#a5aff829af55e65b802d83dfcef4e9dd0">tc</a>, <a class="el" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a> <a class="el" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, <a class="el" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08">ArmTranslationType</a> tranType=NormalTran)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#aece4eb62debdc9703b211d68ce771521">translateTiming</a> (<a class="el" href="classRequest.html">RequestPtr</a> req, <a class="el" href="classThreadContext.html">ThreadContext</a> *<a class="el" href="namespaceArmISA.html#a5aff829af55e65b802d83dfcef4e9dd0">tc</a>, <a class="el" href="classBaseTLB_1_1Translation.html">Translation</a> *translation, <a class="el" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a> <a class="el" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, <a class="el" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08">ArmTranslationType</a> tranType=NormalTran)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#adc8f6be2e370d6ce03ae8044ff6f8709">translateComplete</a> (<a class="el" href="classRequest.html">RequestPtr</a> req, <a class="el" href="classThreadContext.html">ThreadContext</a> *<a class="el" href="namespaceArmISA.html#a5aff829af55e65b802d83dfcef4e9dd0">tc</a>, <a class="el" href="classBaseTLB_1_1Translation.html">Translation</a> *translation, <a class="el" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a> <a class="el" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, <a class="el" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08">ArmTranslationType</a> tranType, bool callFromS2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#ae199d95c42e036851a8a0543c6d6d2e3">finalizePhysical</a> (<a class="el" href="classRequest.html">RequestPtr</a> req, <a class="el" href="classThreadContext.html">ThreadContext</a> *<a class="el" href="namespaceArmISA.html#a5aff829af55e65b802d83dfcef4e9dd0">tc</a>, <a class="el" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a> <a class="el" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a8f020d3237536fe007fc488c4125c5d8">drainResume</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a53e036786d17361be4c7320d39c99b84">serialize</a> (std::ostream &amp;os)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#af22e5d6d660b97db37003ac61ac4ee49">unserialize</a> (<a class="el" href="classCheckpoint.html">Checkpoint</a> *cp, const std::string &amp;section)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a4dc637449366fcdfc4e764cdf12d9b11">regStats</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classBaseMasterPort.html">BaseMasterPort</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a2ea87b216b1f58953a679590672be258">getMasterPort</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDmaPort.html">DmaPort</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a3eca666205fdb5a79565d7520a5c97b9">getWalkerPort</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classSimObject.html#a0f0761d2db586a23bb2a2880b8f387bb">Params</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a97b2a677e1ca5219c876aa978a853c15">invalidateMiscReg</a> ()</td></tr>
<tr><td colspan="2"><h2>Static Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a3e576c3e0d39dfca708baea44ebf0617">validVirtualAddress</a> (<a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a> vaddr)</td></tr>
<tr><td colspan="2"><h2>Protected メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a7eb66b75612ed7e8b075cd89dfd2b157">updateMiscReg</a> (<a class="el" href="classThreadContext.html">ThreadContext</a> *<a class="el" href="namespaceArmISA.html#a5aff829af55e65b802d83dfcef4e9dd0">tc</a>, <a class="el" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08">ArmTranslationType</a> tranType=NormalTran)</td></tr>
<tr><td colspan="2"><h2>Protected 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a52120124577a3b7c28a4e8876cd36a8b">stage2Req</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a89972e483f89fb3a1694154f97ce2d9d">_attr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a16c6c6799c68307c82bc6304cf0b27b4">directToStage2</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classArmISA_1_1TableWalker.html">TableWalker</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#ae4dec2d4d5730361d51d9f4b24dee89c">tableWalker</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classArmISA_1_1TLB.html">TLB</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a2188cef93e9eb4ac6383c0ca4f44dc36">stage2Tlb</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classArmISA_1_1Stage2MMU.html">Stage2MMU</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a21ea64a0a6d9600fb09fff0854fd55d7">stage2Mmu</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a6f516f4695aa8bb85a9a52e395689e1a">instHits</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#ae63ad13cb56fbd34a91d2093deaafad2">instMisses</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a36a79efeb718e4de41970178013dac63">readHits</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a262cd06e148f8dd362b73ee2a8c87ce0">readMisses</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a1d93d3754ee97de787330f7620867026">writeHits</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a607353d27be8640c6f48a295794322d6">writeMisses</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a98ccf1b183bddae403b637838f23fa49">inserts</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a14429a278d32a87d27c0d9df47269a12">flushTlb</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#af504265daaa5a177333d30804fba83a8">flushTlbMva</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a94bc002df9a21796ac29c74bc3ef8240">flushTlbMvaAsid</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a678e74ffba8318815627ae109f96b17e">flushTlbAsid</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#ad4c80b0aa999ae0403e2ffbc9a217aaa">flushedEntries</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#aaafbdf0bc49ea504814d314b5f51d47e">alignFaults</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a8d76399ea2182eaf505e54da078f5202">prefetchFaults</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a718b0dd709705b2b6cbf1c5e33c387fd">domainFaults</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a95307396029ef99d258ca5284cd8b284">permsFaults</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Formula.html">Stats::Formula</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a1ebd2c58048a00cc55442a58e6782f35">readAccesses</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Formula.html">Stats::Formula</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#aaf48f6b8c76d54c75a6156c32ac6405f">writeAccesses</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Formula.html">Stats::Formula</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a7268909f031909e2eab6994aa6406ae4">instAccesses</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Formula.html">Stats::Formula</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a224eed77bfb7a27359c9c3c1acbdbfaa">hits</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Formula.html">Stats::Formula</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a4b8b96257f1e97cd5730673f38f9571c">misses</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Formula.html">Stats::Formula</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a1929e1032289676f78e07e4c6bc55369">accesses</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a7450c3dc2cffd22401a23ddc29b0c036">rangeMRU</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a2ebef8e3741ddc1169a0a05e6a48052e">bootUncacheability</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a52c06c8a54293998f3e1f71cdbd916f7">aarch64</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceArmISA.html#a16588a7a92eb985c3341b7f706c81dd5">ExceptionLevel</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a658ce290954a428d8c5df11b8b5bd81b">aarch64EL</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">SCTLR&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">SCR&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#ace0bf26677706ecff809bd4c76d33c8c">scr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#ae5a4adef864b3b2b23001750a8a89499">isPriv</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a104c09577173edc4f8ce6814cc33f0ae">isHyp</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">TTBCR&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#ad6762be565087b4bfb87f5bcb42673e7">ttbcr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a984a2dcfd9509ab586bee117bb2a7cfb">asid</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#add293169f7f2ac526b3fa14f950cf0bb">vmid</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">PRRR&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a06fc88abc8a8aa441c512ebb7531b3d7">prrr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">NMRR&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a763ad3cda6c2782d46835a3b2c4b5515">nmrr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HCR&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#ad0d8df2e2be956266458221c23763b4c">hcr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a9d6f500564b7a3bf1ded6bc18b3d47db">dacr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#ab11476fda4a6785ee0b6096e2e50f30c">miscRegValid</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08">ArmTranslationType</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a23a689868acc5917efd41d7477757059">curTranType</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a8e8469d916956ca8b9052ebd6f155e0b">haveLPAE</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a48e6871d9ab14ff31b50307f0c617f95">haveVirtualization</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a3aea18414c83c86fa366401cb767e7ab">haveLargeAsid64</a></td></tr>
<tr><td colspan="2"><h2>Private メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#ab44854fd690d81090e18a5a7ba3850be">_flushMva</a> (<a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a> mva, uint64_t asn, bool secure_lookup, bool hyp, bool ignore_asn, uint8_t target_el)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1TLB.html#a58d5b81b2c0a67f5780f391dfea47e3a">checkELMatch</a> (uint8_t target_el, uint8_t tentry_el, bool ignore_el)</td></tr>
</table>
<hr/><h2>列挙型</h2>
<a class="anchor" id="a1e31c6b4a233c7e98a3e85eba0c84f0d"></a><!-- doxytag: member="ArmISA::TLB::ArmFlags" ref="a1e31c6b4a233c7e98a3e85eba0c84f0d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0d">ArmFlags</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>列挙型の値: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a1e31c6b4a233c7e98a3e85eba0c84f0da811bb3ddcc5035211e497b863db3abd0"></a><!-- doxytag: member="AlignmentMask" ref="a1e31c6b4a233c7e98a3e85eba0c84f0da811bb3ddcc5035211e497b863db3abd0" args="" -->AlignmentMask</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a1e31c6b4a233c7e98a3e85eba0c84f0da46a23507e5cc78facbca4f0aadb6106d"></a><!-- doxytag: member="AlignByte" ref="a1e31c6b4a233c7e98a3e85eba0c84f0da46a23507e5cc78facbca4f0aadb6106d" args="" -->AlignByte</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a1e31c6b4a233c7e98a3e85eba0c84f0da78d8dffe4cfc46c93a011f6c18eb342f"></a><!-- doxytag: member="AlignHalfWord" ref="a1e31c6b4a233c7e98a3e85eba0c84f0da78d8dffe4cfc46c93a011f6c18eb342f" args="" -->AlignHalfWord</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a1e31c6b4a233c7e98a3e85eba0c84f0da7aed72b8cf399f281ad8558187fe6941"></a><!-- doxytag: member="AlignWord" ref="a1e31c6b4a233c7e98a3e85eba0c84f0da7aed72b8cf399f281ad8558187fe6941" args="" -->AlignWord</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a1e31c6b4a233c7e98a3e85eba0c84f0dad6e82eb48377344b7d9f32c3a488dc0e"></a><!-- doxytag: member="AlignDoubleWord" ref="a1e31c6b4a233c7e98a3e85eba0c84f0dad6e82eb48377344b7d9f32c3a488dc0e" args="" -->AlignDoubleWord</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a1e31c6b4a233c7e98a3e85eba0c84f0da9323e858587f025242511a85b969b287"></a><!-- doxytag: member="AlignQuadWord" ref="a1e31c6b4a233c7e98a3e85eba0c84f0da9323e858587f025242511a85b969b287" args="" -->AlignQuadWord</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a1e31c6b4a233c7e98a3e85eba0c84f0da9adcd9ee14d498ddb978852cae60d840"></a><!-- doxytag: member="AlignOctWord" ref="a1e31c6b4a233c7e98a3e85eba0c84f0da9adcd9ee14d498ddb978852cae60d840" args="" -->AlignOctWord</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a1e31c6b4a233c7e98a3e85eba0c84f0dac6aa9917fe5880558d8ee22e2fbcbe58"></a><!-- doxytag: member="AllowUnaligned" ref="a1e31c6b4a233c7e98a3e85eba0c84f0dac6aa9917fe5880558d8ee22e2fbcbe58" args="" -->AllowUnaligned</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a1e31c6b4a233c7e98a3e85eba0c84f0dadcfc57d389e8e2bb30dc32135b6a92d0"></a><!-- doxytag: member="UserMode" ref="a1e31c6b4a233c7e98a3e85eba0c84f0dadcfc57d389e8e2bb30dc32135b6a92d0" args="" -->UserMode</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a1e31c6b4a233c7e98a3e85eba0c84f0daf6e40c9fd5825f3b3a4f2d45d4a64c68"></a><!-- doxytag: member="MustBeOne" ref="a1e31c6b4a233c7e98a3e85eba0c84f0daf6e40c9fd5825f3b3a4f2d45d4a64c68" args="" -->MustBeOne</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00069"></a>00069                   {
<a name="l00070"></a>00070         <a class="code" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0da811bb3ddcc5035211e497b863db3abd0">AlignmentMask</a> = 0x7,
<a name="l00071"></a>00071 
<a name="l00072"></a>00072         <a class="code" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0da46a23507e5cc78facbca4f0aadb6106d">AlignByte</a> = 0x0,
<a name="l00073"></a>00073         <a class="code" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0da78d8dffe4cfc46c93a011f6c18eb342f">AlignHalfWord</a> = 0x1,
<a name="l00074"></a>00074         <a class="code" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0da7aed72b8cf399f281ad8558187fe6941">AlignWord</a> = 0x2,
<a name="l00075"></a>00075         <a class="code" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0dad6e82eb48377344b7d9f32c3a488dc0e">AlignDoubleWord</a> = 0x3,
<a name="l00076"></a>00076         <a class="code" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0da9323e858587f025242511a85b969b287">AlignQuadWord</a> = 0x4,
<a name="l00077"></a>00077         <a class="code" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0da9adcd9ee14d498ddb978852cae60d840">AlignOctWord</a> = 0x5,
<a name="l00078"></a>00078 
<a name="l00079"></a>00079         <a class="code" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0dac6aa9917fe5880558d8ee22e2fbcbe58">AllowUnaligned</a> = 0x8,
<a name="l00080"></a>00080         <span class="comment">// Priv code operating as if it wasn&apos;t</span>
<a name="l00081"></a>00081         <a class="code" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0dadcfc57d389e8e2bb30dc32135b6a92d0">UserMode</a> = 0x10,
<a name="l00082"></a>00082         <span class="comment">// Because zero otherwise looks like a valid setting and may be used</span>
<a name="l00083"></a>00083         <span class="comment">// accidentally, this bit must be non-zero to show it was used on</span>
<a name="l00084"></a>00084         <span class="comment">// purpose.</span>
<a name="l00085"></a>00085         <a class="code" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0daf6e40c9fd5825f3b3a4f2d45d4a64c68">MustBeOne</a> = 0x40
<a name="l00086"></a>00086     };
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad6f5d480df151d5bddeefc6271793f08"></a><!-- doxytag: member="ArmISA::TLB::ArmTranslationType" ref="ad6f5d480df151d5bddeefc6271793f08" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08">ArmTranslationType</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>列挙型の値: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ad6f5d480df151d5bddeefc6271793f08af17d21db71fd885f6cc71fb2d0e896ec"></a><!-- doxytag: member="NormalTran" ref="ad6f5d480df151d5bddeefc6271793f08af17d21db71fd885f6cc71fb2d0e896ec" args="" -->NormalTran</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad6f5d480df151d5bddeefc6271793f08a4ed07d4f5bb408945e5f4e9c7333b2d3"></a><!-- doxytag: member="S1CTran" ref="ad6f5d480df151d5bddeefc6271793f08a4ed07d4f5bb408945e5f4e9c7333b2d3" args="" -->S1CTran</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad6f5d480df151d5bddeefc6271793f08ae447e872ded0e6da22f91d2ccaf66afd"></a><!-- doxytag: member="HypMode" ref="ad6f5d480df151d5bddeefc6271793f08ae447e872ded0e6da22f91d2ccaf66afd" args="" -->HypMode</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad6f5d480df151d5bddeefc6271793f08ab8e7d202ad511f74c201e2bca94e83d6"></a><!-- doxytag: member="S1S2NsTran" ref="ad6f5d480df151d5bddeefc6271793f08ab8e7d202ad511f74c201e2bca94e83d6" args="" -->S1S2NsTran</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00088"></a>00088                             {
<a name="l00089"></a>00089         <a class="code" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08af17d21db71fd885f6cc71fb2d0e896ec">NormalTran</a> = 0,
<a name="l00090"></a>00090         <a class="code" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08a4ed07d4f5bb408945e5f4e9c7333b2d3">S1CTran</a> = 0x1,
<a name="l00091"></a>00091         <a class="code" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08ae447e872ded0e6da22f91d2ccaf66afd">HypMode</a> = 0x2,
<a name="l00092"></a>00092         <span class="comment">// Secure code operating as if it wasn&apos;t (required by some Address</span>
<a name="l00093"></a>00093         <span class="comment">// Translate operations)</span>
<a name="l00094"></a>00094         <a class="code" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08ab8e7d202ad511f74c201e2bca94e83d6">S1S2NsTran</a> = 0x4
<a name="l00095"></a>00095     };
</pre></div></p>

</div>
</div>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="a072a0e1c517c70f5baf23c7bf1aae5c6"></a><!-- doxytag: member="ArmISA::TLB::TLB" ref="a072a0e1c517c70f5baf23c7bf1aae5c6" args="(const ArmTLBParams *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classArmISA_1_1TLB.html">TLB</a> </td>
          <td>(</td>
          <td class="paramtype">const ArmTLBParams *&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00073"></a>00073     : <a class="code" href="classBaseTLB.html#ac8e9bca1fe09b54b17069200cac8c9d3">BaseTLB</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>), <a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>(<span class="keyword">new</span> <a class="code" href="structArmISA_1_1TlbEntry.html">TlbEntry</a>[<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;size]), <a class="code" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;size),
<a name="l00074"></a>00074     <a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;is_stage2), <a class="code" href="classArmISA_1_1TLB.html#ae4dec2d4d5730361d51d9f4b24dee89c">tableWalker</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;walker), <a class="code" href="classArmISA_1_1TLB.html#a2188cef93e9eb4ac6383c0ca4f44dc36">stage2Tlb</a>(<a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>),
<a name="l00075"></a>00075     <a class="code" href="classArmISA_1_1TLB.html#a21ea64a0a6d9600fb09fff0854fd55d7">stage2Mmu</a>(<a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>), <a class="code" href="classArmISA_1_1TLB.html#a7450c3dc2cffd22401a23ddc29b0c036">rangeMRU</a>(1), <a class="code" href="classArmISA_1_1TLB.html#a2ebef8e3741ddc1169a0a05e6a48052e">bootUncacheability</a>(<span class="keyword">false</span>),
<a name="l00076"></a>00076     <a class="code" href="classArmISA_1_1TLB.html#ab11476fda4a6785ee0b6096e2e50f30c">miscRegValid</a>(<span class="keyword">false</span>), <a class="code" href="classArmISA_1_1TLB.html#a23a689868acc5917efd41d7477757059">curTranType</a>(<a class="code" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08af17d21db71fd885f6cc71fb2d0e896ec">NormalTran</a>)
<a name="l00077"></a>00077 {
<a name="l00078"></a>00078     <a class="code" href="classArmISA_1_1TLB.html#ae4dec2d4d5730361d51d9f4b24dee89c">tableWalker</a>-&gt;<a class="code" href="classArmISA_1_1TableWalker.html#a0a70f006e7adf20d47920ac6286a2bcb">setTlb</a>(<span class="keyword">this</span>);
<a name="l00079"></a>00079 
<a name="l00080"></a>00080     <span class="comment">// Cache system-level properties</span>
<a name="l00081"></a>00081     <a class="code" href="classArmISA_1_1TLB.html#a8e8469d916956ca8b9052ebd6f155e0b">haveLPAE</a> = <a class="code" href="classArmISA_1_1TLB.html#ae4dec2d4d5730361d51d9f4b24dee89c">tableWalker</a>-&gt;<a class="code" href="classArmISA_1_1TableWalker.html#a39b5e5d6cff3c8f5a248143a702d8f1a">haveLPAE</a>();
<a name="l00082"></a>00082     <a class="code" href="classArmISA_1_1TLB.html#a48e6871d9ab14ff31b50307f0c617f95">haveVirtualization</a> = <a class="code" href="classArmISA_1_1TLB.html#ae4dec2d4d5730361d51d9f4b24dee89c">tableWalker</a>-&gt;<a class="code" href="classArmISA_1_1TableWalker.html#afef641e959fe33dee8702b9bb5e1b9e4">haveVirtualization</a>();
<a name="l00083"></a>00083     <a class="code" href="classArmISA_1_1TLB.html#a3aea18414c83c86fa366401cb767e7ab">haveLargeAsid64</a> = <a class="code" href="classArmISA_1_1TLB.html#ae4dec2d4d5730361d51d9f4b24dee89c">tableWalker</a>-&gt;<a class="code" href="classArmISA_1_1TableWalker.html#a47958664a46869f3fb4f9b043da32be5">haveLargeAsid64</a>();
<a name="l00084"></a>00084 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5bc074f4c969287561515e7906f422b5"></a><!-- doxytag: member="ArmISA::TLB::TLB" ref="a5bc074f4c969287561515e7906f422b5" args="(const Params *p, int _size, TableWalker *_walker)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classArmISA_1_1TLB.html">TLB</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classSimObject.html#a0f0761d2db586a23bb2a2880b8f387bb">Params</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classArmISA_1_1TableWalker.html">TableWalker</a> *&nbsp;</td>
          <td class="paramname"> <em>_walker</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a18a1722ab7889997b15fd7b9fc33c7ff"></a><!-- doxytag: member="ArmISA::TLB::~TLB" ref="a18a1722ab7889997b15fd7b9fc33c7ff" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classArmISA_1_1TLB.html">TLB</a> </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00087"></a>00087 {
<a name="l00088"></a>00088     <span class="keyword">delete</span>[] <a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>;
<a name="l00089"></a>00089 }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="ab44854fd690d81090e18a5a7ba3850be"></a><!-- doxytag: member="ArmISA::TLB::_flushMva" ref="ab44854fd690d81090e18a5a7ba3850be" args="(Addr mva, uint64_t asn, bool secure_lookup, bool hyp, bool ignore_asn, uint8_t target_el)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _flushMva </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>mva</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>asn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>secure_lookup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>hyp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>ignore_asn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>target_el</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Remove any entries that match both a va and asn </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mva</em>&nbsp;</td><td>virtual address to flush </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>asn</em>&nbsp;</td><td>contextid/asn to flush on match </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>secure_lookup</em>&nbsp;</td><td>if the operation affects the secure world </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hyp</em>&nbsp;</td><td>if the operation affects hyp mode </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ignore_asn</em>&nbsp;</td><td>if the flush should ignore the asn </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00317"></a>00317 {
<a name="l00318"></a>00318     <a class="code" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> *<a class="code" href="namespaceMipsISA.html#a49c5c4308a3fe2af210c807bd186b780">te</a>;
<a name="l00319"></a>00319     <span class="comment">// D5.7.2: Sign-extend address to 64 bits</span>
<a name="l00320"></a>00320     mva = sext&lt;56&gt;(mva);
<a name="l00321"></a>00321     te = <a class="code" href="classArmISA_1_1TLB.html#a16c4d359f56a027d2e6afe6af85c81e4">lookup</a>(mva, asn, <a class="code" href="classArmISA_1_1TLB.html#add293169f7f2ac526b3fa14f950cf0bb">vmid</a>, hyp, secure_lookup, <span class="keyword">false</span>, ignore_asn,
<a name="l00322"></a>00322                 target_el);
<a name="l00323"></a>00323     <span class="keywordflow">while</span> (te != <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>) {
<a name="l00324"></a>00324         <span class="keywordflow">if</span> (secure_lookup == !te-&gt;nstid) {
<a name="l00325"></a>00325             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classArmISA_1_1TLB.html">TLB</a>, <span class="stringliteral">&quot; -  %s\n&quot;</span>, te-&gt;print());
<a name="l00326"></a>00326             te-&gt;valid = <span class="keyword">false</span>;
<a name="l00327"></a>00327             <a class="code" href="classArmISA_1_1TLB.html#ad4c80b0aa999ae0403e2ffbc9a217aaa">flushedEntries</a>++;
<a name="l00328"></a>00328         }
<a name="l00329"></a>00329         te = <a class="code" href="classArmISA_1_1TLB.html#a16c4d359f56a027d2e6afe6af85c81e4">lookup</a>(mva, asn, <a class="code" href="classArmISA_1_1TLB.html#add293169f7f2ac526b3fa14f950cf0bb">vmid</a>, hyp, secure_lookup, <span class="keyword">false</span>, ignore_asn,
<a name="l00330"></a>00330                     target_el);
<a name="l00331"></a>00331     }
<a name="l00332"></a>00332 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5fd1cb3fb8887f4bd6c1f982a23cc026"></a><!-- doxytag: member="ArmISA::TLB::allCpusCaching" ref="a5fd1cb3fb8887f4bd6c1f982a23cc026" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void allCpusCaching </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00231"></a>00231 { <a class="code" href="classArmISA_1_1TLB.html#a2ebef8e3741ddc1169a0a05e6a48052e">bootUncacheability</a> = <span class="keyword">true</span>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a58d5b81b2c0a67f5780f391dfea47e3a"></a><!-- doxytag: member="ArmISA::TLB::checkELMatch" ref="a58d5b81b2c0a67f5780f391dfea47e3a" args="(uint8_t target_el, uint8_t tentry_el, bool ignore_el)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool checkELMatch </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>target_el</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>tentry_el</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>ignore_el</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00336"></a>00336 {
<a name="l00337"></a>00337     <span class="keywordtype">bool</span> elMatch = <span class="keyword">true</span>;
<a name="l00338"></a>00338     <span class="keywordflow">if</span> (!ignore_el) {
<a name="l00339"></a>00339         <span class="keywordflow">if</span> (target_el == 2 || target_el == 3) {
<a name="l00340"></a>00340             elMatch = (tentry_el  == target_el);
<a name="l00341"></a>00341         } <span class="keywordflow">else</span> {
<a name="l00342"></a>00342             elMatch = (tentry_el == 0) || (tentry_el  == 1);
<a name="l00343"></a>00343         }
<a name="l00344"></a>00344     }
<a name="l00345"></a>00345     <span class="keywordflow">return</span> elMatch;
<a name="l00346"></a>00346 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5a4e92c7787e92910f8ad62cb4f1bf5f"></a><!-- doxytag: member="ArmISA::TLB::checkPermissions" ref="a5a4e92c7787e92910f8ad62cb4f1bf5f" args="(TlbEntry *te, RequestPtr req, Mode mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">Fault</a> checkPermissions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> *&nbsp;</td>
          <td class="paramname"> <em>te</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classRequest.html">RequestPtr</a>&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00587"></a>00587 {
<a name="l00588"></a>00588     <a class="code" href="classm5_1_1params_1_1Addr.html">Addr</a> <a class="code" href="namespaceMipsISA.html#ac78d9788b3f9a366df64485c9afaf1b1">vaddr</a> = req-&gt;<a class="code" href="classRequest.html#a68d2230b37b30d25462093fefdd813ac">getVaddr</a>(); <span class="comment">// 32-bit don&apos;t have to purify</span>
<a name="l00589"></a>00589     <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="namespacem5_1_1debug.html#a9ceb38153d5c0f156fbeada6dc00ff4f">flags</a> = req-&gt;<a class="code" href="classRequest.html#a8552aa8d45c9ba10449d51ac08e7d490">getFlags</a>();
<a name="l00590"></a>00590     <span class="keywordtype">bool</span> is_fetch  = (<a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a> == <a class="code" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911a31b7313c05d32519f3869a3de8be95e6">Execute</a>);
<a name="l00591"></a>00591     <span class="keywordtype">bool</span> is_write  = (<a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a> == <a class="code" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911aa56670174817e3fed92bfd8182d7c0d1">Write</a>);
<a name="l00592"></a>00592     <span class="keywordtype">bool</span> is_priv   = <a class="code" href="classArmISA_1_1TLB.html#ae5a4adef864b3b2b23001750a8a89499">isPriv</a> &amp;&amp; !(flags &amp; <a class="code" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0dadcfc57d389e8e2bb30dc32135b6a92d0">UserMode</a>);
<a name="l00593"></a>00593 
<a name="l00594"></a>00594     <span class="comment">// Get the translation type from the actuall table entry</span>
<a name="l00595"></a>00595     <a class="code" href="classArmISA_1_1ArmFault.html#ad78237d6390becbe8bdf9e73979c56ae">ArmFault::TranMethod</a> tranMethod = te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a4e71e701ab0aa7cfed27f93c7b4646f3">longDescFormat</a> ? <a class="code" href="classArmISA_1_1ArmFault.html#ad78237d6390becbe8bdf9e73979c56aea307d48bbc198c224e04bf57415c05dcd">ArmFault::LpaeTran</a>
<a name="l00596"></a>00596                                                          : <a class="code" href="classArmISA_1_1ArmFault.html#ad78237d6390becbe8bdf9e73979c56aeabfef4fbb52d72e0c89f660f2d501a488">ArmFault::VmsaTran</a>;
<a name="l00597"></a>00597 
<a name="l00598"></a>00598     <span class="comment">// If this is the second stage of translation and the request is for a</span>
<a name="l00599"></a>00599     <span class="comment">// stage 1 page table walk then we need to check the HCR.PTW bit. This</span>
<a name="l00600"></a>00600     <span class="comment">// allows us to generate a fault if the request targets an area marked</span>
<a name="l00601"></a>00601     <span class="comment">// as a device or strongly ordered.</span>
<a name="l00602"></a>00602     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a> &amp;&amp; req-&gt;<a class="code" href="classRequest.html#ad381099a042382bff9eadb1ea6f1a2e1">isPTWalk</a>() &amp;&amp; <a class="code" href="classArmISA_1_1TLB.html#ad0d8df2e2be956266458221c23763b4c">hcr</a>.ptw &amp;&amp;
<a name="l00603"></a>00603         (te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#adf9797b2466c7c1b82e0b738b75d8fab">mtype</a> != TlbEntry::MemoryType::Normal)) {
<a name="l00604"></a>00604         <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classArmISA_1_1DataAbort.html">DataAbort</a>(vaddr, te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#accddad3ef7d0db5aa7c34d730fc03a33">domain</a>, is_write,
<a name="l00605"></a>00605                              <a class="code" href="classArmISA_1_1ArmFault.html#a8771a605c5b916759188c3a191bb6202ac0886edcd2e7ae9ce6ce4161ca336205">ArmFault::PermissionLL</a> + te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a88477771eb7d27741455a8035678c67a">lookupLevel</a>,
<a name="l00606"></a>00606                              <a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>, tranMethod);
<a name="l00607"></a>00607     }
<a name="l00608"></a>00608 
<a name="l00609"></a>00609     <span class="comment">// Generate an alignment fault for unaligned data accesses to device or</span>
<a name="l00610"></a>00610     <span class="comment">// strongly ordered memory</span>
<a name="l00611"></a>00611     <span class="keywordflow">if</span> (!is_fetch) {
<a name="l00612"></a>00612         <span class="keywordflow">if</span> (te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#adf9797b2466c7c1b82e0b738b75d8fab">mtype</a> != TlbEntry::MemoryType::Normal) {
<a name="l00613"></a>00613             <span class="keywordflow">if</span> (vaddr &amp; <a class="code" href="namespaceArmISA.html#a9534dbda5e7db9881c7955c6e08cfdc0">mask</a>(flags &amp; <a class="code" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0da811bb3ddcc5035211e497b863db3abd0">AlignmentMask</a>)) {
<a name="l00614"></a>00614                 <a class="code" href="classArmISA_1_1TLB.html#aaafbdf0bc49ea504814d314b5f51d47e">alignFaults</a>++;
<a name="l00615"></a>00615                 <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classArmISA_1_1DataAbort.html">DataAbort</a>(vaddr, TlbEntry::DomainType::NoAccess, is_write,
<a name="l00616"></a>00616                                      <a class="code" href="classArmISA_1_1ArmFault.html#a8771a605c5b916759188c3a191bb6202a25751bcd8ec8d06a081be3218e856cc6">ArmFault::AlignmentFault</a>, <a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>,
<a name="l00617"></a>00617                                      tranMethod);
<a name="l00618"></a>00618             }
<a name="l00619"></a>00619         }
<a name="l00620"></a>00620     }
<a name="l00621"></a>00621 
<a name="l00622"></a>00622     <span class="keywordflow">if</span> (te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a4f3ea4eb06b83de0e16cc771374db506">nonCacheable</a>) {
<a name="l00623"></a>00623         <span class="comment">// Prevent prefetching from I/O devices.</span>
<a name="l00624"></a>00624         <span class="keywordflow">if</span> (req-&gt;<a class="code" href="classRequest.html#a1eef1bb814a1f77346aba1648fb6d1c9">isPrefetch</a>()) {
<a name="l00625"></a>00625             <span class="comment">// Here we can safely use the fault status for the short</span>
<a name="l00626"></a>00626             <span class="comment">// desc. format in all cases</span>
<a name="l00627"></a>00627             <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classArmISA_1_1PrefetchAbort.html">PrefetchAbort</a>(vaddr, <a class="code" href="classArmISA_1_1ArmFault.html#a8771a605c5b916759188c3a191bb6202a85b18a63875108da23e40b72d28ebcdb">ArmFault::PrefetchUncacheable</a>,
<a name="l00628"></a>00628                                      <a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>, tranMethod);
<a name="l00629"></a>00629         }
<a name="l00630"></a>00630     }
<a name="l00631"></a>00631 
<a name="l00632"></a>00632     <span class="keywordflow">if</span> (!te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a4e71e701ab0aa7cfed27f93c7b4646f3">longDescFormat</a>) {
<a name="l00633"></a>00633         <span class="keywordflow">switch</span> ((<a class="code" href="classArmISA_1_1TLB.html#a9d6f500564b7a3bf1ded6bc18b3d47db">dacr</a> &gt;&gt; (static_cast&lt;uint8_t&gt;(te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#accddad3ef7d0db5aa7c34d730fc03a33">domain</a>) * 2)) &amp; 0x3) {
<a name="l00634"></a>00634           <span class="keywordflow">case</span> 0:
<a name="l00635"></a>00635             <a class="code" href="classArmISA_1_1TLB.html#a718b0dd709705b2b6cbf1c5e33c387fd">domainFaults</a>++;
<a name="l00636"></a>00636             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classArmISA_1_1TLB.html">TLB</a>, <span class="stringliteral">&quot;TLB Fault: Data abort on domain. DACR: %#x&quot;</span>
<a name="l00637"></a>00637                     <span class="stringliteral">&quot; domain: %#x write:%d\n&quot;</span>, <a class="code" href="classArmISA_1_1TLB.html#a9d6f500564b7a3bf1ded6bc18b3d47db">dacr</a>,
<a name="l00638"></a>00638                     static_cast&lt;uint8_t&gt;(te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#accddad3ef7d0db5aa7c34d730fc03a33">domain</a>), is_write);
<a name="l00639"></a>00639             <span class="keywordflow">if</span> (is_fetch)
<a name="l00640"></a>00640                 <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classArmISA_1_1PrefetchAbort.html">PrefetchAbort</a>(vaddr,
<a name="l00641"></a>00641                                          <a class="code" href="classArmISA_1_1ArmFault.html#a8771a605c5b916759188c3a191bb6202a1b3eba46a3fdb576e660783538300d71">ArmFault::DomainLL</a> + te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a88477771eb7d27741455a8035678c67a">lookupLevel</a>,
<a name="l00642"></a>00642                                          <a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>, tranMethod);
<a name="l00643"></a>00643             <span class="keywordflow">else</span>
<a name="l00644"></a>00644                 <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classArmISA_1_1DataAbort.html">DataAbort</a>(vaddr, te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#accddad3ef7d0db5aa7c34d730fc03a33">domain</a>, is_write,
<a name="l00645"></a>00645                                      <a class="code" href="classArmISA_1_1ArmFault.html#a8771a605c5b916759188c3a191bb6202a1b3eba46a3fdb576e660783538300d71">ArmFault::DomainLL</a> + te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a88477771eb7d27741455a8035678c67a">lookupLevel</a>,
<a name="l00646"></a>00646                                      <a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>, tranMethod);
<a name="l00647"></a>00647           <span class="keywordflow">case</span> 1:
<a name="l00648"></a>00648             <span class="comment">// Continue with permissions check</span>
<a name="l00649"></a>00649             <span class="keywordflow">break</span>;
<a name="l00650"></a>00650           <span class="keywordflow">case</span> 2:
<a name="l00651"></a>00651             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;UNPRED domain\n&quot;</span>);
<a name="l00652"></a>00652           <span class="keywordflow">case</span> 3:
<a name="l00653"></a>00653             <span class="keywordflow">return</span> <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00654"></a>00654         }
<a name="l00655"></a>00655     }
<a name="l00656"></a>00656 
<a name="l00657"></a>00657     <span class="comment">// The &apos;ap&apos; variable is AP[2:0] or {AP[2,1],1b&apos;0}, i.e. always three bits</span>
<a name="l00658"></a>00658     uint8_t ap  = te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a4e71e701ab0aa7cfed27f93c7b4646f3">longDescFormat</a> ? te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#af0965a83f15ef1c7fae65446c4b6b86d">ap</a> &lt;&lt; 1 : te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#af0965a83f15ef1c7fae65446c4b6b86d">ap</a>;
<a name="l00659"></a>00659     uint8_t hap = te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a8652932397f601905aff0b8327951acc">hap</a>;
<a name="l00660"></a>00660 
<a name="l00661"></a>00661     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a>.afe == 1 || te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a4e71e701ab0aa7cfed27f93c7b4646f3">longDescFormat</a>)
<a name="l00662"></a>00662         ap |= 1;
<a name="l00663"></a>00663 
<a name="l00664"></a>00664     <span class="keywordtype">bool</span> abt;
<a name="l00665"></a>00665     <span class="keywordtype">bool</span> isWritable = <span class="keyword">true</span>;
<a name="l00666"></a>00666     <span class="comment">// If this is a stage 2 access (eg for reading stage 1 page table entries)</span>
<a name="l00667"></a>00667     <span class="comment">// then don&apos;t perform the AP permissions check, we stil do the HAP check</span>
<a name="l00668"></a>00668     <span class="comment">// below.</span>
<a name="l00669"></a>00669     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>) {
<a name="l00670"></a>00670         abt = <span class="keyword">false</span>;
<a name="l00671"></a>00671     } <span class="keywordflow">else</span> {
<a name="l00672"></a>00672         <span class="keywordflow">switch</span> (ap) {
<a name="l00673"></a>00673           <span class="keywordflow">case</span> 0:
<a name="l00674"></a>00674             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classArmISA_1_1TLB.html">TLB</a>, <span class="stringliteral">&quot;Access permissions 0, checking rs:%#x\n&quot;</span>,
<a name="l00675"></a>00675                     (<span class="keywordtype">int</span>)<a class="code" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a>.rs);
<a name="l00676"></a>00676             <span class="keywordflow">if</span> (!<a class="code" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a>.xp) {
<a name="l00677"></a>00677                 <span class="keywordflow">switch</span> ((<span class="keywordtype">int</span>)<a class="code" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a>.rs) {
<a name="l00678"></a>00678                   <span class="keywordflow">case</span> 2:
<a name="l00679"></a>00679                     abt = is_write;
<a name="l00680"></a>00680                     <span class="keywordflow">break</span>;
<a name="l00681"></a>00681                   <span class="keywordflow">case</span> 1:
<a name="l00682"></a>00682                     abt = is_write || !is_priv;
<a name="l00683"></a>00683                     <span class="keywordflow">break</span>;
<a name="l00684"></a>00684                   <span class="keywordflow">case</span> 0:
<a name="l00685"></a>00685                   <span class="keywordflow">case</span> 3:
<a name="l00686"></a>00686                   <span class="keywordflow">default</span>:
<a name="l00687"></a>00687                     abt = <span class="keyword">true</span>;
<a name="l00688"></a>00688                     <span class="keywordflow">break</span>;
<a name="l00689"></a>00689                 }
<a name="l00690"></a>00690             } <span class="keywordflow">else</span> {
<a name="l00691"></a>00691                 abt = <span class="keyword">true</span>;
<a name="l00692"></a>00692             }
<a name="l00693"></a>00693             <span class="keywordflow">break</span>;
<a name="l00694"></a>00694           <span class="keywordflow">case</span> 1:
<a name="l00695"></a>00695             abt = !is_priv;
<a name="l00696"></a>00696             <span class="keywordflow">break</span>;
<a name="l00697"></a>00697           <span class="keywordflow">case</span> 2:
<a name="l00698"></a>00698             abt = !is_priv &amp;&amp; is_write;
<a name="l00699"></a>00699             isWritable = is_priv;
<a name="l00700"></a>00700             <span class="keywordflow">break</span>;
<a name="l00701"></a>00701           <span class="keywordflow">case</span> 3:
<a name="l00702"></a>00702             abt = <span class="keyword">false</span>;
<a name="l00703"></a>00703             <span class="keywordflow">break</span>;
<a name="l00704"></a>00704           <span class="keywordflow">case</span> 4:
<a name="l00705"></a>00705             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;UNPRED premissions\n&quot;</span>);
<a name="l00706"></a>00706           <span class="keywordflow">case</span> 5:
<a name="l00707"></a>00707             abt = !is_priv || is_write;
<a name="l00708"></a>00708             isWritable = <span class="keyword">false</span>;
<a name="l00709"></a>00709             <span class="keywordflow">break</span>;
<a name="l00710"></a>00710           <span class="keywordflow">case</span> 6:
<a name="l00711"></a>00711           <span class="keywordflow">case</span> 7:
<a name="l00712"></a>00712             abt        = is_write;
<a name="l00713"></a>00713             isWritable = <span class="keyword">false</span>;
<a name="l00714"></a>00714             <span class="keywordflow">break</span>;
<a name="l00715"></a>00715           <span class="keywordflow">default</span>:
<a name="l00716"></a>00716             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Unknown permissions %#x\n&quot;</span>, ap);
<a name="l00717"></a>00717         }
<a name="l00718"></a>00718     }
<a name="l00719"></a>00719 
<a name="l00720"></a>00720     <span class="keywordtype">bool</span> hapAbt = is_write ? !(hap &amp; 2) : !(hap &amp; 1);
<a name="l00721"></a>00721     <span class="keywordtype">bool</span> xn     = te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#aa0cd1c167e9b1ae45c71739eaf0460a6">xn</a> || (isWritable &amp;&amp; <a class="code" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a>.wxn) ||
<a name="l00722"></a>00722                             (ap == 3    &amp;&amp; <a class="code" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a>.uwxn &amp;&amp; is_priv);
<a name="l00723"></a>00723     <span class="keywordflow">if</span> (is_fetch &amp;&amp; (abt || xn ||
<a name="l00724"></a>00724                      (te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a4e71e701ab0aa7cfed27f93c7b4646f3">longDescFormat</a> &amp;&amp; te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a565f62bb51651c298732bb3e9f1fabcd">pxn</a> &amp;&amp; !is_priv) ||
<a name="l00725"></a>00725                      (<a class="code" href="classArmISA_1_1TLB.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a> &amp;&amp; te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#aa3ca0c504f321d3657985faf35740bbe">ns</a> &amp;&amp; <a class="code" href="classArmISA_1_1TLB.html#ace0bf26677706ecff809bd4c76d33c8c">scr</a>.sif))) {
<a name="l00726"></a>00726         <a class="code" href="classArmISA_1_1TLB.html#a95307396029ef99d258ca5284cd8b284">permsFaults</a>++;
<a name="l00727"></a>00727         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classArmISA_1_1TLB.html">TLB</a>, <span class="stringliteral">&quot;TLB Fault: Prefetch abort on permission check. AP:%d &quot;</span>
<a name="l00728"></a>00728                      <span class="stringliteral">&quot;priv:%d write:%d ns:%d sif:%d sctlr.afe: %d \n&quot;</span>,
<a name="l00729"></a>00729                      ap, is_priv, is_write, te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#aa3ca0c504f321d3657985faf35740bbe">ns</a>, <a class="code" href="classArmISA_1_1TLB.html#ace0bf26677706ecff809bd4c76d33c8c">scr</a>.sif,<a class="code" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a>.afe);
<a name="l00730"></a>00730         <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classArmISA_1_1PrefetchAbort.html">PrefetchAbort</a>(vaddr,
<a name="l00731"></a>00731                                  <a class="code" href="classArmISA_1_1ArmFault.html#a8771a605c5b916759188c3a191bb6202ac0886edcd2e7ae9ce6ce4161ca336205">ArmFault::PermissionLL</a> + te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a88477771eb7d27741455a8035678c67a">lookupLevel</a>,
<a name="l00732"></a>00732                                  <a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>, tranMethod);
<a name="l00733"></a>00733     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (abt | hapAbt) {
<a name="l00734"></a>00734         <a class="code" href="classArmISA_1_1TLB.html#a95307396029ef99d258ca5284cd8b284">permsFaults</a>++;
<a name="l00735"></a>00735         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classArmISA_1_1TLB.html">TLB</a>, <span class="stringliteral">&quot;TLB Fault: Data abort on permission check. AP:%d priv:%d&quot;</span>
<a name="l00736"></a>00736                <span class="stringliteral">&quot; write:%d\n&quot;</span>, ap, is_priv, is_write);
<a name="l00737"></a>00737         <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classArmISA_1_1DataAbort.html">DataAbort</a>(vaddr, te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#accddad3ef7d0db5aa7c34d730fc03a33">domain</a>, is_write,
<a name="l00738"></a>00738                              <a class="code" href="classArmISA_1_1ArmFault.html#a8771a605c5b916759188c3a191bb6202ac0886edcd2e7ae9ce6ce4161ca336205">ArmFault::PermissionLL</a> + te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a88477771eb7d27741455a8035678c67a">lookupLevel</a>,
<a name="l00739"></a>00739                              <a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a> | !abt, tranMethod);
<a name="l00740"></a>00740     }
<a name="l00741"></a>00741     <span class="keywordflow">return</span> <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00742"></a>00742 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1ba70376d3c5636e94c5fd6312f7b63e"></a><!-- doxytag: member="ArmISA::TLB::checkPermissions64" ref="a1ba70376d3c5636e94c5fd6312f7b63e" args="(TlbEntry *te, RequestPtr req, Mode mode, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">Fault</a> checkPermissions64 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> *&nbsp;</td>
          <td class="paramname"> <em>te</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classRequest.html">RequestPtr</a>&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00748"></a>00748 {
<a name="l00749"></a>00749     assert(<a class="code" href="classArmISA_1_1TLB.html#a52c06c8a54293998f3e1f71cdbd916f7">aarch64</a>);
<a name="l00750"></a>00750 
<a name="l00751"></a>00751     <a class="code" href="classm5_1_1params_1_1Addr.html">Addr</a> vaddr_tainted = req-&gt;<a class="code" href="classRequest.html#a68d2230b37b30d25462093fefdd813ac">getVaddr</a>();
<a name="l00752"></a>00752     <a class="code" href="classm5_1_1params_1_1Addr.html">Addr</a> <a class="code" href="namespaceMipsISA.html#ac78d9788b3f9a366df64485c9afaf1b1">vaddr</a> = <a class="code" href="namespaceArmISA.html#a52481fc8af3df3627260833f83bd5a83">purifyTaggedAddr</a>(vaddr_tainted, tc, <a class="code" href="classArmISA_1_1TLB.html#a658ce290954a428d8c5df11b8b5bd81b">aarch64EL</a>);
<a name="l00753"></a>00753 
<a name="l00754"></a>00754     <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="namespacem5_1_1debug.html#a9ceb38153d5c0f156fbeada6dc00ff4f">flags</a> = req-&gt;<a class="code" href="classRequest.html#a8552aa8d45c9ba10449d51ac08e7d490">getFlags</a>();
<a name="l00755"></a>00755     <span class="keywordtype">bool</span> is_fetch  = (<a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a> == <a class="code" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911a31b7313c05d32519f3869a3de8be95e6">Execute</a>);
<a name="l00756"></a>00756     <span class="keywordtype">bool</span> is_write  = (<a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a> == <a class="code" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911aa56670174817e3fed92bfd8182d7c0d1">Write</a>);
<a name="l00757"></a>00757     <span class="keywordtype">bool</span> is_priv M5_VAR_USED  = <a class="code" href="classArmISA_1_1TLB.html#ae5a4adef864b3b2b23001750a8a89499">isPriv</a> &amp;&amp; !(flags &amp; <a class="code" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0dadcfc57d389e8e2bb30dc32135b6a92d0">UserMode</a>);
<a name="l00758"></a>00758 
<a name="l00759"></a>00759     <a class="code" href="classArmISA_1_1TLB.html#a7eb66b75612ed7e8b075cd89dfd2b157">updateMiscReg</a>(tc, <a class="code" href="classArmISA_1_1TLB.html#a23a689868acc5917efd41d7477757059">curTranType</a>);
<a name="l00760"></a>00760 
<a name="l00761"></a>00761     <span class="comment">// If this is the second stage of translation and the request is for a</span>
<a name="l00762"></a>00762     <span class="comment">// stage 1 page table walk then we need to check the HCR.PTW bit. This</span>
<a name="l00763"></a>00763     <span class="comment">// allows us to generate a fault if the request targets an area marked</span>
<a name="l00764"></a>00764     <span class="comment">// as a device or strongly ordered.</span>
<a name="l00765"></a>00765     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a> &amp;&amp; req-&gt;<a class="code" href="classRequest.html#ad381099a042382bff9eadb1ea6f1a2e1">isPTWalk</a>() &amp;&amp; <a class="code" href="classArmISA_1_1TLB.html#ad0d8df2e2be956266458221c23763b4c">hcr</a>.ptw &amp;&amp;
<a name="l00766"></a>00766         (te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#adf9797b2466c7c1b82e0b738b75d8fab">mtype</a> != TlbEntry::MemoryType::Normal)) {
<a name="l00767"></a>00767         <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classArmISA_1_1DataAbort.html">DataAbort</a>(vaddr_tainted, te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#accddad3ef7d0db5aa7c34d730fc03a33">domain</a>, is_write,
<a name="l00768"></a>00768                              <a class="code" href="classArmISA_1_1ArmFault.html#a8771a605c5b916759188c3a191bb6202ac0886edcd2e7ae9ce6ce4161ca336205">ArmFault::PermissionLL</a> + te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a88477771eb7d27741455a8035678c67a">lookupLevel</a>,
<a name="l00769"></a>00769                              <a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>, <a class="code" href="classArmISA_1_1ArmFault.html#ad78237d6390becbe8bdf9e73979c56aea307d48bbc198c224e04bf57415c05dcd">ArmFault::LpaeTran</a>);
<a name="l00770"></a>00770     }
<a name="l00771"></a>00771 
<a name="l00772"></a>00772     <span class="comment">// Generate an alignment fault for unaligned accesses to device or</span>
<a name="l00773"></a>00773     <span class="comment">// strongly ordered memory</span>
<a name="l00774"></a>00774     <span class="keywordflow">if</span> (!is_fetch) {
<a name="l00775"></a>00775         <span class="keywordflow">if</span> (te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#adf9797b2466c7c1b82e0b738b75d8fab">mtype</a> != TlbEntry::MemoryType::Normal) {
<a name="l00776"></a>00776             <span class="keywordflow">if</span> (vaddr &amp; <a class="code" href="namespaceArmISA.html#a9534dbda5e7db9881c7955c6e08cfdc0">mask</a>(flags &amp; <a class="code" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0da811bb3ddcc5035211e497b863db3abd0">AlignmentMask</a>)) {
<a name="l00777"></a>00777                 <a class="code" href="classArmISA_1_1TLB.html#aaafbdf0bc49ea504814d314b5f51d47e">alignFaults</a>++;
<a name="l00778"></a>00778                 <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classArmISA_1_1DataAbort.html">DataAbort</a>(vaddr_tainted,
<a name="l00779"></a>00779                                      TlbEntry::DomainType::NoAccess, is_write,
<a name="l00780"></a>00780                                      <a class="code" href="classArmISA_1_1ArmFault.html#a8771a605c5b916759188c3a191bb6202a25751bcd8ec8d06a081be3218e856cc6">ArmFault::AlignmentFault</a>, <a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>,
<a name="l00781"></a>00781                                      <a class="code" href="classArmISA_1_1ArmFault.html#ad78237d6390becbe8bdf9e73979c56aea307d48bbc198c224e04bf57415c05dcd">ArmFault::LpaeTran</a>);
<a name="l00782"></a>00782             }
<a name="l00783"></a>00783         }
<a name="l00784"></a>00784     }
<a name="l00785"></a>00785 
<a name="l00786"></a>00786     <span class="keywordflow">if</span> (te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a4f3ea4eb06b83de0e16cc771374db506">nonCacheable</a>) {
<a name="l00787"></a>00787         <span class="comment">// Prevent prefetching from I/O devices.</span>
<a name="l00788"></a>00788         <span class="keywordflow">if</span> (req-&gt;<a class="code" href="classRequest.html#a1eef1bb814a1f77346aba1648fb6d1c9">isPrefetch</a>()) {
<a name="l00789"></a>00789             <span class="comment">// Here we can safely use the fault status for the short</span>
<a name="l00790"></a>00790             <span class="comment">// desc. format in all cases</span>
<a name="l00791"></a>00791             <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classArmISA_1_1PrefetchAbort.html">PrefetchAbort</a>(vaddr_tainted,
<a name="l00792"></a>00792                                      <a class="code" href="classArmISA_1_1ArmFault.html#a8771a605c5b916759188c3a191bb6202a85b18a63875108da23e40b72d28ebcdb">ArmFault::PrefetchUncacheable</a>,
<a name="l00793"></a>00793                                      <a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>, <a class="code" href="classArmISA_1_1ArmFault.html#ad78237d6390becbe8bdf9e73979c56aea307d48bbc198c224e04bf57415c05dcd">ArmFault::LpaeTran</a>);
<a name="l00794"></a>00794         }
<a name="l00795"></a>00795     }
<a name="l00796"></a>00796 
<a name="l00797"></a>00797     uint8_t ap  = 0x3 &amp; (te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#af0965a83f15ef1c7fae65446c4b6b86d">ap</a>);  <span class="comment">// 2-bit access protection field</span>
<a name="l00798"></a>00798     <span class="keywordtype">bool</span> grant = <span class="keyword">false</span>;
<a name="l00799"></a>00799 
<a name="l00800"></a>00800     uint8_t xn =  te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#aa0cd1c167e9b1ae45c71739eaf0460a6">xn</a>;
<a name="l00801"></a>00801     uint8_t pxn = te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a565f62bb51651c298732bb3e9f1fabcd">pxn</a>;
<a name="l00802"></a>00802     <span class="keywordtype">bool</span> <a class="code" href="namespaceMipsISA.html#a7de4997f814ef7d6392df74a7a1c5e0d">r</a> = !is_write &amp;&amp; !is_fetch;
<a name="l00803"></a>00803     <span class="keywordtype">bool</span> <a class="code" href="namespaceMipsISA.html#a3c9d192cc8aebe4b3d22912a4604e08d">w</a> = is_write;
<a name="l00804"></a>00804     <span class="keywordtype">bool</span> <a class="code" href="namespaceX86ISA.html#ab5f9a01fc40e47853ae9551b008afcbd">x</a> = is_fetch;
<a name="l00805"></a>00805     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(TLBVerbose, <span class="stringliteral">&quot;Checking permissions: ap:%d, xn:%d, pxn:%d, r:%d, &quot;</span>
<a name="l00806"></a>00806                         <span class="stringliteral">&quot;w:%d, x:%d\n&quot;</span>, ap, xn, pxn, r, w, x);
<a name="l00807"></a>00807 
<a name="l00808"></a>00808     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>) {
<a name="l00809"></a>00809         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Virtualization in AArch64 state is not supported yet&quot;</span>);
<a name="l00810"></a>00810     } <span class="keywordflow">else</span> {
<a name="l00811"></a>00811         <span class="keywordflow">switch</span> (<a class="code" href="classArmISA_1_1TLB.html#a658ce290954a428d8c5df11b8b5bd81b">aarch64EL</a>) {
<a name="l00812"></a>00812           <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a16588a7a92eb985c3341b7f706c81dd5a1808d294e1d965cd8d1a3060e2f411ef">EL0</a>:
<a name="l00813"></a>00813             {
<a name="l00814"></a>00814                 uint8_t perm = (ap &lt;&lt; 2)  | (xn &lt;&lt; 1) | pxn;
<a name="l00815"></a>00815                 <span class="keywordflow">switch</span> (perm) {
<a name="l00816"></a>00816                   <span class="keywordflow">case</span> 0:
<a name="l00817"></a>00817                   <span class="keywordflow">case</span> 1:
<a name="l00818"></a>00818                   <span class="keywordflow">case</span> 8:
<a name="l00819"></a>00819                   <span class="keywordflow">case</span> 9:
<a name="l00820"></a>00820                     grant = x;
<a name="l00821"></a>00821                     <span class="keywordflow">break</span>;
<a name="l00822"></a>00822                   <span class="keywordflow">case</span> 4:
<a name="l00823"></a>00823                   <span class="keywordflow">case</span> 5:
<a name="l00824"></a>00824                     grant = r || w || (x &amp;&amp; !<a class="code" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a>.wxn);
<a name="l00825"></a>00825                     <span class="keywordflow">break</span>;
<a name="l00826"></a>00826                   <span class="keywordflow">case</span> 6:
<a name="l00827"></a>00827                   <span class="keywordflow">case</span> 7:
<a name="l00828"></a>00828                     grant = r || w;
<a name="l00829"></a>00829                     <span class="keywordflow">break</span>;
<a name="l00830"></a>00830                   <span class="keywordflow">case</span> 12:
<a name="l00831"></a>00831                   <span class="keywordflow">case</span> 13:
<a name="l00832"></a>00832                     grant = r || x;
<a name="l00833"></a>00833                     <span class="keywordflow">break</span>;
<a name="l00834"></a>00834                   <span class="keywordflow">case</span> 14:
<a name="l00835"></a>00835                   <span class="keywordflow">case</span> 15:
<a name="l00836"></a>00836                     grant = r;
<a name="l00837"></a>00837                     <span class="keywordflow">break</span>;
<a name="l00838"></a>00838                   <span class="keywordflow">default</span>:
<a name="l00839"></a>00839                     grant = <span class="keyword">false</span>;
<a name="l00840"></a>00840                 }
<a name="l00841"></a>00841             }
<a name="l00842"></a>00842             <span class="keywordflow">break</span>;
<a name="l00843"></a>00843           <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a16588a7a92eb985c3341b7f706c81dd5ab5e42aaf40f117fdce042d02976bf090">EL1</a>:
<a name="l00844"></a>00844             {
<a name="l00845"></a>00845                 uint8_t perm = (ap &lt;&lt; 2)  | (xn &lt;&lt; 1) | pxn;
<a name="l00846"></a>00846                 <span class="keywordflow">switch</span> (perm) {
<a name="l00847"></a>00847                   <span class="keywordflow">case</span> 0:
<a name="l00848"></a>00848                   <span class="keywordflow">case</span> 2:
<a name="l00849"></a>00849                     grant = r || w || (x &amp;&amp; !<a class="code" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a>.wxn);
<a name="l00850"></a>00850                     <span class="keywordflow">break</span>;
<a name="l00851"></a>00851                   <span class="keywordflow">case</span> 1:
<a name="l00852"></a>00852                   <span class="keywordflow">case</span> 3:
<a name="l00853"></a>00853                   <span class="keywordflow">case</span> 4:
<a name="l00854"></a>00854                   <span class="keywordflow">case</span> 5:
<a name="l00855"></a>00855                   <span class="keywordflow">case</span> 6:
<a name="l00856"></a>00856                   <span class="keywordflow">case</span> 7:
<a name="l00857"></a>00857                     <span class="comment">// regions that are writeable at EL0 should not be</span>
<a name="l00858"></a>00858                     <span class="comment">// executable at EL1</span>
<a name="l00859"></a>00859                     grant = r || w;
<a name="l00860"></a>00860                     <span class="keywordflow">break</span>;
<a name="l00861"></a>00861                   <span class="keywordflow">case</span> 8:
<a name="l00862"></a>00862                   <span class="keywordflow">case</span> 10:
<a name="l00863"></a>00863                   <span class="keywordflow">case</span> 12:
<a name="l00864"></a>00864                   <span class="keywordflow">case</span> 14:
<a name="l00865"></a>00865                     grant = r || x;
<a name="l00866"></a>00866                     <span class="keywordflow">break</span>;
<a name="l00867"></a>00867                   <span class="keywordflow">case</span> 9:
<a name="l00868"></a>00868                   <span class="keywordflow">case</span> 11:
<a name="l00869"></a>00869                   <span class="keywordflow">case</span> 13:
<a name="l00870"></a>00870                   <span class="keywordflow">case</span> 15:
<a name="l00871"></a>00871                     grant = r;
<a name="l00872"></a>00872                     <span class="keywordflow">break</span>;
<a name="l00873"></a>00873                   <span class="keywordflow">default</span>:
<a name="l00874"></a>00874                     grant = <span class="keyword">false</span>;
<a name="l00875"></a>00875                 }
<a name="l00876"></a>00876             }
<a name="l00877"></a>00877             <span class="keywordflow">break</span>;
<a name="l00878"></a>00878           <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a16588a7a92eb985c3341b7f706c81dd5a5f6f6ced63893d592951c91f7489857f">EL2</a>:
<a name="l00879"></a>00879           <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a16588a7a92eb985c3341b7f706c81dd5a44bf3e9d5387a706bdc96b1ec9a2fc15">EL3</a>:
<a name="l00880"></a>00880             {
<a name="l00881"></a>00881                 uint8_t perm = (ap &amp; 0x2) | xn;
<a name="l00882"></a>00882                 <span class="keywordflow">switch</span> (perm) {
<a name="l00883"></a>00883                   <span class="keywordflow">case</span> 0:
<a name="l00884"></a>00884                     grant = r || w || (x &amp;&amp; !<a class="code" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a>.wxn) ;
<a name="l00885"></a>00885                     <span class="keywordflow">break</span>;
<a name="l00886"></a>00886                   <span class="keywordflow">case</span> 1:
<a name="l00887"></a>00887                     grant = r || w;
<a name="l00888"></a>00888                     <span class="keywordflow">break</span>;
<a name="l00889"></a>00889                   <span class="keywordflow">case</span> 2:
<a name="l00890"></a>00890                     grant = r || x;
<a name="l00891"></a>00891                     <span class="keywordflow">break</span>;
<a name="l00892"></a>00892                   <span class="keywordflow">case</span> 3:
<a name="l00893"></a>00893                     grant = r;
<a name="l00894"></a>00894                     <span class="keywordflow">break</span>;
<a name="l00895"></a>00895                   <span class="keywordflow">default</span>:
<a name="l00896"></a>00896                     grant = <span class="keyword">false</span>;
<a name="l00897"></a>00897                 }
<a name="l00898"></a>00898             }
<a name="l00899"></a>00899             <span class="keywordflow">break</span>;
<a name="l00900"></a>00900         }
<a name="l00901"></a>00901     }
<a name="l00902"></a>00902 
<a name="l00903"></a>00903     <span class="keywordflow">if</span> (!grant) {
<a name="l00904"></a>00904         <span class="keywordflow">if</span> (is_fetch) {
<a name="l00905"></a>00905             <a class="code" href="classArmISA_1_1TLB.html#a95307396029ef99d258ca5284cd8b284">permsFaults</a>++;
<a name="l00906"></a>00906             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classArmISA_1_1TLB.html">TLB</a>, <span class="stringliteral">&quot;TLB Fault: Prefetch abort on permission check. &quot;</span>
<a name="l00907"></a>00907                     <span class="stringliteral">&quot;AP:%d priv:%d write:%d ns:%d sif:%d &quot;</span>
<a name="l00908"></a>00908                     <span class="stringliteral">&quot;sctlr.afe: %d\n&quot;</span>,
<a name="l00909"></a>00909                     ap, is_priv, is_write, te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#aa3ca0c504f321d3657985faf35740bbe">ns</a>, <a class="code" href="classArmISA_1_1TLB.html#ace0bf26677706ecff809bd4c76d33c8c">scr</a>.sif, <a class="code" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a>.afe);
<a name="l00910"></a>00910             <span class="comment">// Use PC value instead of vaddr because vaddr might be aligned to</span>
<a name="l00911"></a>00911             <span class="comment">// cache line and should not be the address reported in FAR</span>
<a name="l00912"></a>00912             <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classArmISA_1_1PrefetchAbort.html">PrefetchAbort</a>(req-&gt;<a class="code" href="classRequest.html#ab651e5db13fd546a5d4f88d3a4a04428">getPC</a>(),
<a name="l00913"></a>00913                                      <a class="code" href="classArmISA_1_1ArmFault.html#a8771a605c5b916759188c3a191bb6202ac0886edcd2e7ae9ce6ce4161ca336205">ArmFault::PermissionLL</a> + te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a88477771eb7d27741455a8035678c67a">lookupLevel</a>,
<a name="l00914"></a>00914                                      <a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>, <a class="code" href="classArmISA_1_1ArmFault.html#ad78237d6390becbe8bdf9e73979c56aea307d48bbc198c224e04bf57415c05dcd">ArmFault::LpaeTran</a>);
<a name="l00915"></a>00915         } <span class="keywordflow">else</span> {
<a name="l00916"></a>00916             <a class="code" href="classArmISA_1_1TLB.html#a95307396029ef99d258ca5284cd8b284">permsFaults</a>++;
<a name="l00917"></a>00917             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classArmISA_1_1TLB.html">TLB</a>, <span class="stringliteral">&quot;TLB Fault: Data abort on permission check. AP:%d &quot;</span>
<a name="l00918"></a>00918                     <span class="stringliteral">&quot;priv:%d write:%d\n&quot;</span>, ap, is_priv, is_write);
<a name="l00919"></a>00919             <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classArmISA_1_1DataAbort.html">DataAbort</a>(vaddr_tainted, te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#accddad3ef7d0db5aa7c34d730fc03a33">domain</a>, is_write,
<a name="l00920"></a>00920                                  <a class="code" href="classArmISA_1_1ArmFault.html#a8771a605c5b916759188c3a191bb6202ac0886edcd2e7ae9ce6ce4161ca336205">ArmFault::PermissionLL</a> + te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a88477771eb7d27741455a8035678c67a">lookupLevel</a>,
<a name="l00921"></a>00921                                  <a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>, <a class="code" href="classArmISA_1_1ArmFault.html#ad78237d6390becbe8bdf9e73979c56aea307d48bbc198c224e04bf57415c05dcd">ArmFault::LpaeTran</a>);
<a name="l00922"></a>00922         }
<a name="l00923"></a>00923     }
<a name="l00924"></a>00924 
<a name="l00925"></a>00925     <span class="keywordflow">return</span> <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00926"></a>00926 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2d698ff909513b48a1263f8a5440e067"></a><!-- doxytag: member="ArmISA::TLB::demapPage" ref="a2d698ff909513b48a1263f8a5440e067" args="(Addr vaddr, uint64_t asn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void demapPage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>vaddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>asn</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00233"></a>00233     {
<a name="l00234"></a>00234         <span class="comment">// needed for x86 only</span>
<a name="l00235"></a>00235         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;demapPage() is not implemented.\n&quot;</span>);
<a name="l00236"></a>00236     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8f020d3237536fe007fc488c4125c5d8"></a><!-- doxytag: member="ArmISA::TLB::drainResume" ref="a8f020d3237536fe007fc488c4125c5d8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void drainResume </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Resume execution after a successful drain.</p>
<dl class="note"><dt><b>覚え書き:</b></dt><dd>This method is normally only called from the simulation scripts. </dd></dl>

<p><a class="el" href="classDrainable.html#a8f020d3237536fe007fc488c4125c5d8">Drainable</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00350"></a>00350 {
<a name="l00351"></a>00351     <span class="comment">// We might have unserialized something or switched CPUs, so make</span>
<a name="l00352"></a>00352     <span class="comment">// sure to re-read the misc regs.</span>
<a name="l00353"></a>00353     <a class="code" href="classArmISA_1_1TLB.html#ab11476fda4a6785ee0b6096e2e50f30c">miscRegValid</a> = <span class="keyword">false</span>;
<a name="l00354"></a>00354 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae199d95c42e036851a8a0543c6d6d2e3"></a><!-- doxytag: member="ArmISA::TLB::finalizePhysical" ref="ae199d95c42e036851a8a0543c6d6d2e3" args="(RequestPtr req, ThreadContext *tc, Mode mode) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">Fault</a> finalizePhysical </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRequest.html">RequestPtr</a>&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00125"></a>00125 {
<a name="l00126"></a>00126     <span class="keywordflow">return</span> <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00127"></a>00127 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aca1483a67aee5a91e442f7131d66bcbd"></a><!-- doxytag: member="ArmISA::TLB::flushAll" ref="aca1483a67aee5a91e442f7131d66bcbd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void flushAll </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classArmISA_1_1Reset.html">Reset</a> the entire <a class="el" href="classArmISA_1_1TLB.html">TLB</a>. Used for CPU switching to prevent stale translations after multiple switches </p>

<p><a class="el" href="classBaseTLB.html#a5958bc92949a47d1be1088468abdc006">BaseTLB</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00199"></a>00199     {
<a name="l00200"></a>00200         <a class="code" href="classArmISA_1_1TLB.html#a5ef6c06c7267c792fec8972aef272b4e">flushAllSecurity</a>(<span class="keyword">false</span>, 0, <span class="keyword">true</span>);
<a name="l00201"></a>00201         <a class="code" href="classArmISA_1_1TLB.html#a5ef6c06c7267c792fec8972aef272b4e">flushAllSecurity</a>(<span class="keyword">true</span>, 0, <span class="keyword">true</span>);
<a name="l00202"></a>00202     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7cd235aa813c35e4cb1b4efcdd1a407f"></a><!-- doxytag: member="ArmISA::TLB::flushAllNs" ref="a7cd235aa813c35e4cb1b4efcdd1a407f" args="(bool hyp, uint8_t target_el, bool ignore_el=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void flushAllNs </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>hyp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>target_el</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>ignore_el</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Remove all entries in the non secure world, depending on whether they were allocated in hyp mode or not </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hyp</em>&nbsp;</td><td>if the opperation affects hyp mode </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00246"></a>00246 {
<a name="l00247"></a>00247     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classArmISA_1_1TLB.html">TLB</a>, <span class="stringliteral">&quot;Flushing all NS TLB entries (%s lookup)\n&quot;</span>,
<a name="l00248"></a>00248             (hyp ? <span class="stringliteral">&quot;hyp&quot;</span> : <span class="stringliteral">&quot;non-hyp&quot;</span>));
<a name="l00249"></a>00249     <span class="keywordtype">int</span> <a class="code" href="namespaceX86ISA.html#ab5f9a01fc40e47853ae9551b008afcbd">x</a> = 0;
<a name="l00250"></a>00250     <a class="code" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> *<a class="code" href="namespaceMipsISA.html#a49c5c4308a3fe2af210c807bd186b780">te</a>;
<a name="l00251"></a>00251     <span class="keywordflow">while</span> (x &lt; <a class="code" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a>) {
<a name="l00252"></a>00252         te = &amp;<a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[x];
<a name="l00253"></a>00253         <span class="keywordflow">if</span> (te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a28e3c179a86f337095088b3ca02a2b2a">valid</a> &amp;&amp; te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#ac54510c3105727d94588b3fdb109ab42">nstid</a> &amp;&amp; te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a104c09577173edc4f8ce6814cc33f0ae">isHyp</a> == hyp &amp;&amp;
<a name="l00254"></a>00254             <a class="code" href="classArmISA_1_1TLB.html#a58d5b81b2c0a67f5780f391dfea47e3a">checkELMatch</a>(target_el, te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a3755c7b1c4844077396e8156639f0709">el</a>, ignore_el)) {
<a name="l00255"></a>00255 
<a name="l00256"></a>00256             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classArmISA_1_1TLB.html">TLB</a>, <span class="stringliteral">&quot; -  %s\n&quot;</span>, te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#ae8a5b5e9e0e6be3b115ee77fa7b4d0c8">print</a>());
<a name="l00257"></a>00257             <a class="code" href="classArmISA_1_1TLB.html#ad4c80b0aa999ae0403e2ffbc9a217aaa">flushedEntries</a>++;
<a name="l00258"></a>00258             te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a28e3c179a86f337095088b3ca02a2b2a">valid</a> = <span class="keyword">false</span>;
<a name="l00259"></a>00259         }
<a name="l00260"></a>00260         ++x;
<a name="l00261"></a>00261     }
<a name="l00262"></a>00262 
<a name="l00263"></a>00263     <a class="code" href="classArmISA_1_1TLB.html#a14429a278d32a87d27c0d9df47269a12">flushTlb</a>++;
<a name="l00264"></a>00264 
<a name="l00265"></a>00265     <span class="comment">// If there&apos;s a second stage TLB (and we&apos;re not it) then flush it as well</span>
<a name="l00266"></a>00266     <span class="keywordflow">if</span> (!<a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a> &amp;&amp; !hyp) {
<a name="l00267"></a>00267         <a class="code" href="classArmISA_1_1TLB.html#a2188cef93e9eb4ac6383c0ca4f44dc36">stage2Tlb</a>-&gt;<a class="code" href="classArmISA_1_1TLB.html#a7cd235aa813c35e4cb1b4efcdd1a407f">flushAllNs</a>(<span class="keyword">false</span>, <span class="keyword">true</span>);
<a name="l00268"></a>00268     }
<a name="l00269"></a>00269 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5ef6c06c7267c792fec8972aef272b4e"></a><!-- doxytag: member="ArmISA::TLB::flushAllSecurity" ref="a5ef6c06c7267c792fec8972aef272b4e" args="(bool secure_lookup, uint8_t target_el, bool ignore_el=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void flushAllSecurity </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>secure_lookup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>target_el</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>ignore_el</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classArmISA_1_1Reset.html">Reset</a> the entire <a class="el" href="classArmISA_1_1TLB.html">TLB</a> </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>secure_lookup</em>&nbsp;</td><td>if the operation affects the secure world </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00217"></a>00217 {
<a name="l00218"></a>00218     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classArmISA_1_1TLB.html">TLB</a>, <span class="stringliteral">&quot;Flushing all TLB entries (%s lookup)\n&quot;</span>,
<a name="l00219"></a>00219             (secure_lookup ? <span class="stringliteral">&quot;secure&quot;</span> : <span class="stringliteral">&quot;non-secure&quot;</span>));
<a name="l00220"></a>00220     <span class="keywordtype">int</span> <a class="code" href="namespaceX86ISA.html#ab5f9a01fc40e47853ae9551b008afcbd">x</a> = 0;
<a name="l00221"></a>00221     <a class="code" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> *<a class="code" href="namespaceMipsISA.html#a49c5c4308a3fe2af210c807bd186b780">te</a>;
<a name="l00222"></a>00222     <span class="keywordflow">while</span> (x &lt; <a class="code" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a>) {
<a name="l00223"></a>00223         te = &amp;<a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[x];
<a name="l00224"></a>00224         <span class="keywordflow">if</span> (te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a28e3c179a86f337095088b3ca02a2b2a">valid</a> &amp;&amp; secure_lookup == !te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#ac54510c3105727d94588b3fdb109ab42">nstid</a> &amp;&amp;
<a name="l00225"></a>00225             (te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#add293169f7f2ac526b3fa14f950cf0bb">vmid</a> == <a class="code" href="classArmISA_1_1TLB.html#add293169f7f2ac526b3fa14f950cf0bb">vmid</a> || secure_lookup) &amp;&amp;
<a name="l00226"></a>00226             <a class="code" href="classArmISA_1_1TLB.html#a58d5b81b2c0a67f5780f391dfea47e3a">checkELMatch</a>(target_el, te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a3755c7b1c4844077396e8156639f0709">el</a>, ignore_el)) {
<a name="l00227"></a>00227 
<a name="l00228"></a>00228             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classArmISA_1_1TLB.html">TLB</a>, <span class="stringliteral">&quot; -  %s\n&quot;</span>, te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#ae8a5b5e9e0e6be3b115ee77fa7b4d0c8">print</a>());
<a name="l00229"></a>00229             te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a28e3c179a86f337095088b3ca02a2b2a">valid</a> = <span class="keyword">false</span>;
<a name="l00230"></a>00230             <a class="code" href="classArmISA_1_1TLB.html#ad4c80b0aa999ae0403e2ffbc9a217aaa">flushedEntries</a>++;
<a name="l00231"></a>00231         }
<a name="l00232"></a>00232         ++x;
<a name="l00233"></a>00233     }
<a name="l00234"></a>00234 
<a name="l00235"></a>00235     <a class="code" href="classArmISA_1_1TLB.html#a14429a278d32a87d27c0d9df47269a12">flushTlb</a>++;
<a name="l00236"></a>00236 
<a name="l00237"></a>00237     <span class="comment">// If there&apos;s a second stage TLB (and we&apos;re not it) then flush it as well</span>
<a name="l00238"></a>00238     <span class="comment">// if we&apos;re currently in hyp mode</span>
<a name="l00239"></a>00239     <span class="keywordflow">if</span> (!<a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a> &amp;&amp; <a class="code" href="classArmISA_1_1TLB.html#a104c09577173edc4f8ce6814cc33f0ae">isHyp</a>) {
<a name="l00240"></a>00240         <a class="code" href="classArmISA_1_1TLB.html#a2188cef93e9eb4ac6383c0ca4f44dc36">stage2Tlb</a>-&gt;<a class="code" href="classArmISA_1_1TLB.html#a5ef6c06c7267c792fec8972aef272b4e">flushAllSecurity</a>(secure_lookup, <span class="keyword">true</span>);
<a name="l00241"></a>00241     }
<a name="l00242"></a>00242 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac8076054324beee773a8f801c3e6dfed"></a><!-- doxytag: member="ArmISA::TLB::flushAsid" ref="ac8076054324beee773a8f801c3e6dfed" args="(uint64_t asn, bool secure_lookup, uint8_t target_el)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void flushAsid </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>asn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>secure_lookup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>target_el</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Remove any entries that match the asn </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>asn</em>&nbsp;</td><td>contextid/asn to flush on match </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>secure_lookup</em>&nbsp;</td><td>if the operation affects the secure world </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00283"></a>00283 {
<a name="l00284"></a>00284     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classArmISA_1_1TLB.html">TLB</a>, <span class="stringliteral">&quot;Flushing TLB entries with asid: %#x (%s lookup)\n&quot;</span>, asn,
<a name="l00285"></a>00285             (secure_lookup ? <span class="stringliteral">&quot;secure&quot;</span> : <span class="stringliteral">&quot;non-secure&quot;</span>));
<a name="l00286"></a>00286 
<a name="l00287"></a>00287     <span class="keywordtype">int</span> <a class="code" href="namespaceX86ISA.html#ab5f9a01fc40e47853ae9551b008afcbd">x</a> = 0 ;
<a name="l00288"></a>00288     <a class="code" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> *<a class="code" href="namespaceMipsISA.html#a49c5c4308a3fe2af210c807bd186b780">te</a>;
<a name="l00289"></a>00289 
<a name="l00290"></a>00290     <span class="keywordflow">while</span> (x &lt; <a class="code" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a>) {
<a name="l00291"></a>00291         te = &amp;<a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[x];
<a name="l00292"></a>00292         <span class="keywordflow">if</span> (te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a28e3c179a86f337095088b3ca02a2b2a">valid</a> &amp;&amp; te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a984a2dcfd9509ab586bee117bb2a7cfb">asid</a> == asn &amp;&amp; secure_lookup == !te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#ac54510c3105727d94588b3fdb109ab42">nstid</a> &amp;&amp;
<a name="l00293"></a>00293             (te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#add293169f7f2ac526b3fa14f950cf0bb">vmid</a> == <a class="code" href="classArmISA_1_1TLB.html#add293169f7f2ac526b3fa14f950cf0bb">vmid</a> || secure_lookup) &amp;&amp;
<a name="l00294"></a>00294             <a class="code" href="classArmISA_1_1TLB.html#a58d5b81b2c0a67f5780f391dfea47e3a">checkELMatch</a>(target_el, te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a3755c7b1c4844077396e8156639f0709">el</a>, <span class="keyword">false</span>)) {
<a name="l00295"></a>00295 
<a name="l00296"></a>00296             te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a28e3c179a86f337095088b3ca02a2b2a">valid</a> = <span class="keyword">false</span>;
<a name="l00297"></a>00297             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classArmISA_1_1TLB.html">TLB</a>, <span class="stringliteral">&quot; -  %s\n&quot;</span>, te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#ae8a5b5e9e0e6be3b115ee77fa7b4d0c8">print</a>());
<a name="l00298"></a>00298             <a class="code" href="classArmISA_1_1TLB.html#ad4c80b0aa999ae0403e2ffbc9a217aaa">flushedEntries</a>++;
<a name="l00299"></a>00299         }
<a name="l00300"></a>00300         ++x;
<a name="l00301"></a>00301     }
<a name="l00302"></a>00302     <a class="code" href="classArmISA_1_1TLB.html#a678e74ffba8318815627ae109f96b17e">flushTlbAsid</a>++;
<a name="l00303"></a>00303 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9ea15078537697a5208dea8e912d7a08"></a><!-- doxytag: member="ArmISA::TLB::flushMva" ref="a9ea15078537697a5208dea8e912d7a08" args="(Addr mva, bool secure_lookup, bool hyp, uint8_t target_el)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void flushMva </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>mva</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>secure_lookup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>hyp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>target_el</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Remove all entries that match the va regardless of asn </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mva</em>&nbsp;</td><td>address to flush from cache </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>secure_lookup</em>&nbsp;</td><td>if the operation affects the secure world </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hyp</em>&nbsp;</td><td>if the operation affects hyp mode </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00307"></a>00307 {
<a name="l00308"></a>00308     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classArmISA_1_1TLB.html">TLB</a>, <span class="stringliteral">&quot;Flushing TLB entries with mva: %#x (%s lookup)\n&quot;</span>, mva,
<a name="l00309"></a>00309             (secure_lookup ? <span class="stringliteral">&quot;secure&quot;</span> : <span class="stringliteral">&quot;non-secure&quot;</span>));
<a name="l00310"></a>00310     <a class="code" href="classArmISA_1_1TLB.html#ab44854fd690d81090e18a5a7ba3850be">_flushMva</a>(mva, 0xbeef, secure_lookup, hyp, <span class="keyword">true</span>, target_el);
<a name="l00311"></a>00311     <a class="code" href="classArmISA_1_1TLB.html#af504265daaa5a177333d30804fba83a8">flushTlbMva</a>++;
<a name="l00312"></a>00312 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="afe44c2f5e54b8288d36b04cd77d18d54"></a><!-- doxytag: member="ArmISA::TLB::flushMvaAsid" ref="afe44c2f5e54b8288d36b04cd77d18d54" args="(Addr mva, uint64_t asn, bool secure_lookup, uint8_t target_el)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void flushMvaAsid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>mva</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>asn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>secure_lookup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>target_el</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Remove any entries that match both a va and asn </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mva</em>&nbsp;</td><td>virtual address to flush </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>asn</em>&nbsp;</td><td>contextid/asn to flush on match </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>secure_lookup</em>&nbsp;</td><td>if the operation affects the secure world </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00273"></a>00273 {
<a name="l00274"></a>00274     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classArmISA_1_1TLB.html">TLB</a>, <span class="stringliteral">&quot;Flushing TLB entries with mva: %#x, asid: %#x &quot;</span>
<a name="l00275"></a>00275             <span class="stringliteral">&quot;(%s lookup)\n&quot;</span>, mva, asn, (secure_lookup ?
<a name="l00276"></a>00276             <span class="stringliteral">&quot;secure&quot;</span> : <span class="stringliteral">&quot;non-secure&quot;</span>));
<a name="l00277"></a>00277     <a class="code" href="classArmISA_1_1TLB.html#ab44854fd690d81090e18a5a7ba3850be">_flushMva</a>(mva, asn, secure_lookup, <span class="keyword">false</span>, <span class="keyword">false</span>, target_el);
<a name="l00278"></a>00278     <a class="code" href="classArmISA_1_1TLB.html#a94bc002df9a21796ac29c74bc3ef8240">flushTlbMvaAsid</a>++;
<a name="l00279"></a>00279 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="abe784aff035154580e3b0fc0f5af8bd5"></a><!-- doxytag: member="ArmISA::TLB::getAttr" ref="abe784aff035154580e3b0fc0f5af8bd5" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t getAttr </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00267"></a>00267     {
<a name="l00268"></a>00268         <span class="keywordflow">return</span> <a class="code" href="classArmISA_1_1TLB.html#a89972e483f89fb3a1694154f97ce2d9d">_attr</a>;
<a name="l00269"></a>00269     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2ea87b216b1f58953a679590672be258"></a><!-- doxytag: member="ArmISA::TLB::getMasterPort" ref="a2ea87b216b1f58953a679590672be258" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBaseMasterPort.html">BaseMasterPort</a> * getMasterPort </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the table walker master port. This is used for migrating port connections during a CPU <a class="el" href="classArmISA_1_1TLB.html#a15b6c15c1be2ca4de3e65772a02aa29f">takeOverFrom()</a> call. For architectures that do not have a table walker, NULL is returned, hence the use of a pointer rather than a reference. For ARM this method will always return a valid port pointer.</p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>A pointer to the walker master port </dd></dl>

<p><a class="el" href="classBaseTLB.html#a5125451589673cb85c7cab06c2ac5434">BaseTLB</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l01189"></a>01189 {
<a name="l01190"></a>01190     <span class="keywordflow">return</span> &amp;<a class="code" href="classArmISA_1_1TLB.html#ae4dec2d4d5730361d51d9f4b24dee89c">tableWalker</a>-&gt;<a class="code" href="classArmISA_1_1TableWalker.html#adc4e675e51defbdd1e354dac729d0703">getMasterPort</a>(<span class="stringliteral">&quot;port&quot;</span>);
<a name="l01191"></a>01191 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0743624c3e13c3dd3108be8847f8e488"></a><!-- doxytag: member="ArmISA::TLB::getResultTe" ref="a0743624c3e13c3dd3108be8847f8e488" args="(TlbEntry **te, RequestPtr req, ThreadContext *tc, Mode mode, Translation *translation, bool timing, bool functional, TlbEntry *mergeTe)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">Fault</a> getResultTe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> **&nbsp;</td>
          <td class="paramname"> <em>te</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classRequest.html">RequestPtr</a>&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseTLB_1_1Translation.html">Translation</a> *&nbsp;</td>
          <td class="paramname"> <em>translation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>timing</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>functional</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> *&nbsp;</td>
          <td class="paramname"> <em>mergeTe</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l01369"></a>01369 {
<a name="l01370"></a>01370     <a class="code" href="classRefCountingPtr.html">Fault</a> fault;
<a name="l01371"></a>01371     <a class="code" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> *s1Te = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l01372"></a>01372 
<a name="l01373"></a>01373     <a class="code" href="classm5_1_1params_1_1Addr.html">Addr</a> vaddr_tainted = req-&gt;<a class="code" href="classRequest.html#a68d2230b37b30d25462093fefdd813ac">getVaddr</a>();
<a name="l01374"></a>01374 
<a name="l01375"></a>01375     <span class="comment">// Get the stage 1 table entry</span>
<a name="l01376"></a>01376     fault = <a class="code" href="classArmISA_1_1TLB.html#acdb1ef6fa70ed231ff084dced51b91eb">getTE</a>(&amp;s1Te, req, tc, <a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, translation, timing, functional,
<a name="l01377"></a>01377                   <a class="code" href="classArmISA_1_1TLB.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a>, <a class="code" href="classArmISA_1_1TLB.html#a23a689868acc5917efd41d7477757059">curTranType</a>);
<a name="l01378"></a>01378     <span class="comment">// only proceed if we have a valid table entry</span>
<a name="l01379"></a>01379     <span class="keywordflow">if</span> ((s1Te != <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>) &amp;&amp; (fault == <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>)) {
<a name="l01380"></a>01380         <span class="comment">// Check stage 1 permissions before checking stage 2</span>
<a name="l01381"></a>01381         <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a52c06c8a54293998f3e1f71cdbd916f7">aarch64</a>)
<a name="l01382"></a>01382             fault = <a class="code" href="classArmISA_1_1TLB.html#a1ba70376d3c5636e94c5fd6312f7b63e">checkPermissions64</a>(s1Te, req, <a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, tc);
<a name="l01383"></a>01383         <span class="keywordflow">else</span>
<a name="l01384"></a>01384             fault = <a class="code" href="classArmISA_1_1TLB.html#a5a4e92c7787e92910f8ad62cb4f1bf5f">checkPermissions</a>(s1Te, req, <a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>);
<a name="l01385"></a>01385         <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a52120124577a3b7c28a4e8876cd36a8b">stage2Req</a> &amp; (fault == <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>)) {
<a name="l01386"></a>01386             <a class="code" href="classArmISA_1_1Stage2LookUp.html">Stage2LookUp</a> *s2Lookup = <span class="keyword">new</span> <a class="code" href="classArmISA_1_1Stage2LookUp.html">Stage2LookUp</a>(<span class="keyword">this</span>, <a class="code" href="classArmISA_1_1TLB.html#a2188cef93e9eb4ac6383c0ca4f44dc36">stage2Tlb</a>, *s1Te,
<a name="l01387"></a>01387                 req, translation, <a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, timing, functional, <a class="code" href="classArmISA_1_1TLB.html#a23a689868acc5917efd41d7477757059">curTranType</a>);
<a name="l01388"></a>01388             fault = s2Lookup-&gt;<a class="code" href="classArmISA_1_1Stage2LookUp.html#acc13008b8a9b54bb9ce96f72a86078cd">getTe</a>(tc, mergeTe);
<a name="l01389"></a>01389             <span class="keywordflow">if</span> (s2Lookup-&gt;<a class="code" href="classArmISA_1_1Stage2LookUp.html#a8f31086c831baedbaa74038c8434fb7f">isComplete</a>()) {
<a name="l01390"></a>01390                 *te = mergeTe;
<a name="l01391"></a>01391                 <span class="comment">// We&apos;ve finished with the lookup so delete it</span>
<a name="l01392"></a>01392                 <span class="keyword">delete</span> s2Lookup;
<a name="l01393"></a>01393             } <span class="keywordflow">else</span> {
<a name="l01394"></a>01394                 <span class="comment">// The lookup hasn&apos;t completed, so we can&apos;t delete it now. We</span>
<a name="l01395"></a>01395                 <span class="comment">// get round this by asking the object to self delete when the</span>
<a name="l01396"></a>01396                 <span class="comment">// translation is complete.</span>
<a name="l01397"></a>01397                 s2Lookup-&gt;<a class="code" href="classArmISA_1_1Stage2LookUp.html#afc49b5786125a229938153fa655c23f1">setSelfDelete</a>();
<a name="l01398"></a>01398             }
<a name="l01399"></a>01399         } <span class="keywordflow">else</span> {
<a name="l01400"></a>01400             <span class="comment">// This case deals with an S1 hit (or bypass), followed by</span>
<a name="l01401"></a>01401             <span class="comment">// an S2 hit-but-perms issue</span>
<a name="l01402"></a>01402             <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>) {
<a name="l01403"></a>01403                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(TLBVerbose, <span class="stringliteral">&quot;s2TLB: reqVa %#x, reqPa %#x, fault %p\n&quot;</span>,
<a name="l01404"></a>01404                         vaddr_tainted, req-&gt;<a class="code" href="classRequest.html#af9673cab591724dc74122a8e663389ce">hasPaddr</a>() ? req-&gt;<a class="code" href="classRequest.html#a744ef11a5afe9d3651ce5f954259cb43">getPaddr</a>() : ~0, fault);
<a name="l01405"></a>01405                 <span class="keywordflow">if</span> (fault != <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>) {
<a name="l01406"></a>01406                     <a class="code" href="classArmISA_1_1ArmFault.html">ArmFault</a> *armFault = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classArmISA_1_1ArmFault.html">ArmFault</a> *<span class="keyword">&gt;</span>(fault.<a class="code" href="classRefCountingPtr.html#a07f851191ad3a7c5c1598ef14f710f96" title="Directly access the pointer itself without taking a reference.">get</a>());
<a name="l01407"></a>01407                     armFault-&gt;<a class="code" href="classArmISA_1_1ArmFault.html#a1711e0fd9d5fa3eaa8e62cc821ef850d">annotate</a>(<a class="code" href="classArmISA_1_1ArmFault.html#a955305710181a260a9ee0b419a6027fbacb00f3857a36a02714ddb93ed59761cc">ArmFault::S1PTW</a>, <span class="keyword">false</span>);
<a name="l01408"></a>01408                     armFault-&gt;<a class="code" href="classArmISA_1_1ArmFault.html#a1711e0fd9d5fa3eaa8e62cc821ef850d">annotate</a>(<a class="code" href="classArmISA_1_1ArmFault.html#a955305710181a260a9ee0b419a6027fba5968d80312a62d0fbd34222451882770">ArmFault::OVA</a>, vaddr_tainted);
<a name="l01409"></a>01409                 }
<a name="l01410"></a>01410             }
<a name="l01411"></a>01411             *te = s1Te;
<a name="l01412"></a>01412         }
<a name="l01413"></a>01413     }
<a name="l01414"></a>01414     <span class="keywordflow">return</span> fault;
<a name="l01415"></a>01415 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae121404a6cfcf714e05fe2231ce4c7fc"></a><!-- doxytag: member="ArmISA::TLB::getsize" ref="ae121404a6cfcf714e05fe2231ce4c7fc" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getsize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00165"></a>00165 { <span class="keywordflow">return</span> <a class="code" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acdb1ef6fa70ed231ff084dced51b91eb"></a><!-- doxytag: member="ArmISA::TLB::getTE" ref="acdb1ef6fa70ed231ff084dced51b91eb" args="(TlbEntry **te, RequestPtr req, ThreadContext *tc, Mode mode, Translation *translation, bool timing, bool functional, bool is_secure, ArmTranslationType tranType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">Fault</a> getTE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> **&nbsp;</td>
          <td class="paramname"> <em>te</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classRequest.html">RequestPtr</a>&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseTLB_1_1Translation.html">Translation</a> *&nbsp;</td>
          <td class="paramname"> <em>translation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>timing</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>functional</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>is_secure</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08">TLB::ArmTranslationType</a>&nbsp;</td>
          <td class="paramname"> <em>tranType</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l01308"></a>01308 {
<a name="l01309"></a>01309     <span class="keywordtype">bool</span> is_fetch = (<a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a> == <a class="code" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911a31b7313c05d32519f3869a3de8be95e6">Execute</a>);
<a name="l01310"></a>01310     <span class="keywordtype">bool</span> is_write = (<a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a> == <a class="code" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911aa56670174817e3fed92bfd8182d7c0d1">Write</a>);
<a name="l01311"></a>01311 
<a name="l01312"></a>01312     <a class="code" href="classm5_1_1params_1_1Addr.html">Addr</a> vaddr_tainted = req-&gt;<a class="code" href="classRequest.html#a68d2230b37b30d25462093fefdd813ac">getVaddr</a>();
<a name="l01313"></a>01313     <a class="code" href="classm5_1_1params_1_1Addr.html">Addr</a> <a class="code" href="namespaceMipsISA.html#ac78d9788b3f9a366df64485c9afaf1b1">vaddr</a> = 0;
<a name="l01314"></a>01314     <a class="code" href="namespaceArmISA.html#a16588a7a92eb985c3341b7f706c81dd5">ExceptionLevel</a> target_el = <a class="code" href="classArmISA_1_1TLB.html#a52c06c8a54293998f3e1f71cdbd916f7">aarch64</a> ? <a class="code" href="classArmISA_1_1TLB.html#a658ce290954a428d8c5df11b8b5bd81b">aarch64EL</a> : <a class="code" href="namespaceArmISA.html#a16588a7a92eb985c3341b7f706c81dd5ab5e42aaf40f117fdce042d02976bf090">EL1</a>;
<a name="l01315"></a>01315     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a52c06c8a54293998f3e1f71cdbd916f7">aarch64</a>) {
<a name="l01316"></a>01316         vaddr = <a class="code" href="namespaceArmISA.html#a52481fc8af3df3627260833f83bd5a83">purifyTaggedAddr</a>(vaddr_tainted, tc, target_el);
<a name="l01317"></a>01317     } <span class="keywordflow">else</span> {
<a name="l01318"></a>01318         vaddr = vaddr_tainted;
<a name="l01319"></a>01319     }
<a name="l01320"></a>01320     *te = <a class="code" href="classArmISA_1_1TLB.html#a16c4d359f56a027d2e6afe6af85c81e4">lookup</a>(vaddr, <a class="code" href="classArmISA_1_1TLB.html#a984a2dcfd9509ab586bee117bb2a7cfb">asid</a>, <a class="code" href="classArmISA_1_1TLB.html#add293169f7f2ac526b3fa14f950cf0bb">vmid</a>, <a class="code" href="classArmISA_1_1TLB.html#a104c09577173edc4f8ce6814cc33f0ae">isHyp</a>, is_secure, <span class="keyword">false</span>, <span class="keyword">false</span>, target_el);
<a name="l01321"></a>01321     <span class="keywordflow">if</span> (*te == <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>) {
<a name="l01322"></a>01322         <span class="keywordflow">if</span> (req-&gt;<a class="code" href="classRequest.html#a1eef1bb814a1f77346aba1648fb6d1c9">isPrefetch</a>()) {
<a name="l01323"></a>01323             <span class="comment">// if the request is a prefetch don&apos;t attempt to fill the TLB or go</span>
<a name="l01324"></a>01324             <span class="comment">// any further with the memory access (here we can safely use the</span>
<a name="l01325"></a>01325             <span class="comment">// fault status for the short desc. format in all cases)</span>
<a name="l01326"></a>01326            <a class="code" href="classArmISA_1_1TLB.html#a8d76399ea2182eaf505e54da078f5202">prefetchFaults</a>++;
<a name="l01327"></a>01327            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classArmISA_1_1PrefetchAbort.html">PrefetchAbort</a>(vaddr_tainted, <a class="code" href="classArmISA_1_1ArmFault.html#a8771a605c5b916759188c3a191bb6202a8fb140b2bbd4a06aff962a234cab140a">ArmFault::PrefetchTLBMiss</a>, <a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>);
<a name="l01328"></a>01328         }
<a name="l01329"></a>01329 
<a name="l01330"></a>01330         <span class="keywordflow">if</span> (is_fetch)
<a name="l01331"></a>01331             <a class="code" href="classArmISA_1_1TLB.html#ae63ad13cb56fbd34a91d2093deaafad2">instMisses</a>++;
<a name="l01332"></a>01332         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (is_write)
<a name="l01333"></a>01333             <a class="code" href="classArmISA_1_1TLB.html#a607353d27be8640c6f48a295794322d6">writeMisses</a>++;
<a name="l01334"></a>01334         <span class="keywordflow">else</span>
<a name="l01335"></a>01335             <a class="code" href="classArmISA_1_1TLB.html#a262cd06e148f8dd362b73ee2a8c87ce0">readMisses</a>++;
<a name="l01336"></a>01336 
<a name="l01337"></a>01337         <span class="comment">// start translation table walk, pass variables rather than</span>
<a name="l01338"></a>01338         <span class="comment">// re-retreaving in table walker for speed</span>
<a name="l01339"></a>01339         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classArmISA_1_1TLB.html">TLB</a>, <span class="stringliteral">&quot;TLB Miss: Starting hardware table walker for %#x(%d:%d)\n&quot;</span>,
<a name="l01340"></a>01340                 vaddr_tainted, <a class="code" href="classArmISA_1_1TLB.html#a984a2dcfd9509ab586bee117bb2a7cfb">asid</a>, <a class="code" href="classArmISA_1_1TLB.html#add293169f7f2ac526b3fa14f950cf0bb">vmid</a>);
<a name="l01341"></a>01341         <a class="code" href="classRefCountingPtr.html">Fault</a> fault;
<a name="l01342"></a>01342         fault = <a class="code" href="classArmISA_1_1TLB.html#ae4dec2d4d5730361d51d9f4b24dee89c">tableWalker</a>-&gt;<a class="code" href="classArmISA_1_1TableWalker.html#ae5ef435aac9ac661f33937b2254718b1">walk</a>(req, tc, <a class="code" href="classArmISA_1_1TLB.html#a984a2dcfd9509ab586bee117bb2a7cfb">asid</a>, <a class="code" href="classArmISA_1_1TLB.html#add293169f7f2ac526b3fa14f950cf0bb">vmid</a>, <a class="code" href="classArmISA_1_1TLB.html#a104c09577173edc4f8ce6814cc33f0ae">isHyp</a>, <a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>,
<a name="l01343"></a>01343                                   translation, timing, functional, is_secure,
<a name="l01344"></a>01344                                   tranType);
<a name="l01345"></a>01345         <span class="comment">// for timing mode, return and wait for table walk,</span>
<a name="l01346"></a>01346         <span class="keywordflow">if</span> (timing || fault != <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>) {
<a name="l01347"></a>01347             <span class="keywordflow">return</span> fault;
<a name="l01348"></a>01348         }
<a name="l01349"></a>01349 
<a name="l01350"></a>01350         *te = <a class="code" href="classArmISA_1_1TLB.html#a16c4d359f56a027d2e6afe6af85c81e4">lookup</a>(vaddr, <a class="code" href="classArmISA_1_1TLB.html#a984a2dcfd9509ab586bee117bb2a7cfb">asid</a>, <a class="code" href="classArmISA_1_1TLB.html#add293169f7f2ac526b3fa14f950cf0bb">vmid</a>, <a class="code" href="classArmISA_1_1TLB.html#a104c09577173edc4f8ce6814cc33f0ae">isHyp</a>, is_secure, <span class="keyword">false</span>, <span class="keyword">false</span>, target_el);
<a name="l01351"></a>01351         <span class="keywordflow">if</span> (!*te)
<a name="l01352"></a>01352             <a class="code" href="classArmISA_1_1TLB.html#a48b5486ebf7c83e7c81025a032312ca6">printTlb</a>();
<a name="l01353"></a>01353         assert(*te);
<a name="l01354"></a>01354     } <span class="keywordflow">else</span> {
<a name="l01355"></a>01355         <span class="keywordflow">if</span> (is_fetch)
<a name="l01356"></a>01356             <a class="code" href="classArmISA_1_1TLB.html#a6f516f4695aa8bb85a9a52e395689e1a">instHits</a>++;
<a name="l01357"></a>01357         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (is_write)
<a name="l01358"></a>01358             <a class="code" href="classArmISA_1_1TLB.html#a1d93d3754ee97de787330f7620867026">writeHits</a>++;
<a name="l01359"></a>01359         <span class="keywordflow">else</span>
<a name="l01360"></a>01360             <a class="code" href="classArmISA_1_1TLB.html#a36a79efeb718e4de41970178013dac63">readHits</a>++;
<a name="l01361"></a>01361     }
<a name="l01362"></a>01362     <span class="keywordflow">return</span> <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l01363"></a>01363 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3eca666205fdb5a79565d7520a5c97b9"></a><!-- doxytag: member="ArmISA::TLB::getWalkerPort" ref="a3eca666205fdb5a79565d7520a5c97b9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDmaPort.html">DmaPort</a> &amp; getWalkerPort </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Allow the MMU (overseeing both stage 1 and stage 2 TLBs) to access the table walker port of this <a class="el" href="classArmISA_1_1TLB.html">TLB</a> so that it can orchestrate staged translations.</p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>The table walker DMA port </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l01195"></a>01195 {
<a name="l01196"></a>01196     <span class="keywordflow">return</span> <a class="code" href="classArmISA_1_1TLB.html#ae4dec2d4d5730361d51d9f4b24dee89c">tableWalker</a>-&gt;<a class="code" href="classArmISA_1_1TableWalker.html#aab28913130b30d21077d9a054c46b81f">getWalkerPort</a>();
<a name="l01197"></a>01197 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a02fd73d861ef2e4aabb38c0c9ff82947"></a><!-- doxytag: member="ArmISA::TLB::init" ref="a02fd73d861ef2e4aabb38c0c9ff82947" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>setup all the back pointers </p>

<p><a class="el" href="classSimObject.html#a02fd73d861ef2e4aabb38c0c9ff82947">SimObject</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00093"></a>00093 {
<a name="l00094"></a>00094     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a21ea64a0a6d9600fb09fff0854fd55d7">stage2Mmu</a> &amp;&amp; !<a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>)
<a name="l00095"></a>00095         <a class="code" href="classArmISA_1_1TLB.html#a2188cef93e9eb4ac6383c0ca4f44dc36">stage2Tlb</a> = <a class="code" href="classArmISA_1_1TLB.html#a21ea64a0a6d9600fb09fff0854fd55d7">stage2Mmu</a>-&gt;<a class="code" href="classArmISA_1_1Stage2MMU.html#a17482b0222f72379826534d4b65e9195">stage2Tlb</a>();
<a name="l00096"></a>00096 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0a32b96ef1142ca48fa347d06b5d2436"></a><!-- doxytag: member="ArmISA::TLB::insert" ref="a0a32b96ef1142ca48fa347d06b5d2436" args="(Addr vaddr, TlbEntry &amp;pte)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>vaddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>pte</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00174"></a>00174 {
<a name="l00175"></a>00175     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classArmISA_1_1TLB.html">TLB</a>, <span class="stringliteral">&quot;Inserting entry into TLB with pfn:%#x size:%#x vpn: %#x&quot;</span>
<a name="l00176"></a>00176             <span class="stringliteral">&quot; asid:%d vmid:%d N:%d global:%d valid:%d nc:%d xn:%d&quot;</span>
<a name="l00177"></a>00177             <span class="stringliteral">&quot; ap:%#x domain:%#x ns:%d nstid:%d isHyp:%d\n&quot;</span>, entry.pfn,
<a name="l00178"></a>00178             entry.size, entry.vpn, entry.asid, entry.vmid, entry.N,
<a name="l00179"></a>00179             entry.global, entry.valid, entry.nonCacheable, entry.xn,
<a name="l00180"></a>00180             entry.ap, static_cast&lt;uint8_t&gt;(entry.domain), entry.ns, entry.nstid,
<a name="l00181"></a>00181             entry.isHyp);
<a name="l00182"></a>00182 
<a name="l00183"></a>00183     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[<a class="code" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a> - 1].valid)
<a name="l00184"></a>00184         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classArmISA_1_1TLB.html">TLB</a>, <span class="stringliteral">&quot; - Replacing Valid entry %#x, asn %d vmn %d ppn %#x &quot;</span>
<a name="l00185"></a>00185                 <span class="stringliteral">&quot;size: %#x ap:%d ns:%d nstid:%d g:%d isHyp:%d el: %d\n&quot;</span>,
<a name="l00186"></a>00186                 <a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[<a class="code" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a>-1].vpn &lt;&lt; <a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[<a class="code" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a>-1].N, <a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[<a class="code" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a>-1].<a class="code" href="classArmISA_1_1TLB.html#a984a2dcfd9509ab586bee117bb2a7cfb">asid</a>,
<a name="l00187"></a>00187                 <a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[<a class="code" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a>-1].<a class="code" href="classArmISA_1_1TLB.html#add293169f7f2ac526b3fa14f950cf0bb">vmid</a>, <a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[<a class="code" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a>-1].<a class="code" href="namespaceMipsISA.html#a2c862acc14629b827b48b1b59da7f12a">pfn</a> &lt;&lt; <a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[<a class="code" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a>-1].N,
<a name="l00188"></a>00188                 <a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[<a class="code" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a>-1].<a class="code" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a>, <a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[<a class="code" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a>-1].ap, <a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[<a class="code" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a>-1].<a class="code" href="namespaceArmISA.html#a4036e5d9d61eba835b609e8298312a22">ns</a>,
<a name="l00189"></a>00189                 <a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[<a class="code" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a>-1].nstid, <a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[<a class="code" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a>-1].global, <a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[<a class="code" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a>-1].<a class="code" href="classArmISA_1_1TLB.html#a104c09577173edc4f8ce6814cc33f0ae">isHyp</a>,
<a name="l00190"></a>00190                 <a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[<a class="code" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a>-1].<a class="code" href="namespaceArmISA.html#a88b4b47e4e77eea4a56009ee93e31855">el</a>);
<a name="l00191"></a>00191 
<a name="l00192"></a>00192     <span class="comment">//inserting to MRU position and evicting the LRU one</span>
<a name="l00193"></a>00193 
<a name="l00194"></a>00194     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = <a class="code" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a> - 1; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &gt; 0; --<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>)
<a name="l00195"></a>00195         <a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>] = <a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>-1];
<a name="l00196"></a>00196     <a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[0] = entry;
<a name="l00197"></a>00197 
<a name="l00198"></a>00198     <a class="code" href="classArmISA_1_1TLB.html#a98ccf1b183bddae403b637838f23fa49">inserts</a>++;
<a name="l00199"></a>00199 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a97b2a677e1ca5219c876aa978a853c15"></a><!-- doxytag: member="ArmISA::TLB::invalidateMiscReg" ref="a97b2a677e1ca5219c876aa978a853c15" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void invalidateMiscReg </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00351"></a>00351 { <a class="code" href="classArmISA_1_1TLB.html#ab11476fda4a6785ee0b6096e2e50f30c">miscRegValid</a> = <span class="keyword">false</span>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a16c4d359f56a027d2e6afe6af85c81e4"></a><!-- doxytag: member="ArmISA::TLB::lookup" ref="a16c4d359f56a027d2e6afe6af85c81e4" args="(Addr vpn, uint16_t asn, uint8_t vmid, bool hyp, bool secure, bool functional, bool ignore_asn, uint8_t target_el)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> * lookup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>vpn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>asn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>vmid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>hyp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>secure</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>functional</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>ignore_asn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>target_el</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Lookup an entry in the <a class="el" href="classArmISA_1_1TLB.html">TLB</a> </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>vpn</em>&nbsp;</td><td>virtual address </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>asn</em>&nbsp;</td><td>context id/address space id to use </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>vmid</em>&nbsp;</td><td>The virtual machine ID used for stage 2 translation </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>secure</em>&nbsp;</td><td>if the lookup is secure </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hyp</em>&nbsp;</td><td>if the lookup is done from hyp mode </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>functional</em>&nbsp;</td><td>if the lookup should modify state </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ignore_asn</em>&nbsp;</td><td>if on lookup asn should be ignored </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>戻り値:</b></dt><dd>pointer to <a class="el" href="classArmISA_1_1TLB.html">TLB</a> entry if it exists </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00132"></a>00132 {
<a name="l00133"></a>00133 
<a name="l00134"></a>00134     <a class="code" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> *retval = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00135"></a>00135 
<a name="l00136"></a>00136     <span class="comment">// Maintaining LRU array</span>
<a name="l00137"></a>00137     <span class="keywordtype">int</span> <a class="code" href="namespaceX86ISA.html#ab5f9a01fc40e47853ae9551b008afcbd">x</a> = 0;
<a name="l00138"></a>00138     <span class="keywordflow">while</span> (retval == <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a> &amp;&amp; x &lt; <a class="code" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a>) {
<a name="l00139"></a>00139         <span class="keywordflow">if</span> ((!ignore_asn &amp;&amp; <a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[x].match(<a class="code" href="namespaceArmISA.html#a441099e13f407fadb6bcb0447107de87">va</a>, asn, <a class="code" href="classArmISA_1_1TLB.html#add293169f7f2ac526b3fa14f950cf0bb">vmid</a>, hyp, secure, <span class="keyword">false</span>,
<a name="l00140"></a>00140              target_el)) ||
<a name="l00141"></a>00141             (ignore_asn &amp;&amp; <a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[x].match(<a class="code" href="namespaceArmISA.html#a441099e13f407fadb6bcb0447107de87">va</a>, <a class="code" href="classArmISA_1_1TLB.html#add293169f7f2ac526b3fa14f950cf0bb">vmid</a>, hyp, secure, target_el))) {
<a name="l00142"></a>00142             <span class="comment">// We only move the hit entry ahead when the position is higher</span>
<a name="l00143"></a>00143             <span class="comment">// than rangeMRU</span>
<a name="l00144"></a>00144             <span class="keywordflow">if</span> (x &gt; <a class="code" href="classArmISA_1_1TLB.html#a7450c3dc2cffd22401a23ddc29b0c036">rangeMRU</a> &amp;&amp; !functional) {
<a name="l00145"></a>00145                 <a class="code" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> tmp_entry = <a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[x];
<a name="l00146"></a>00146                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = x; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &gt; 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>--)
<a name="l00147"></a>00147                     <a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>] = <a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> - 1];
<a name="l00148"></a>00148                 <a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[0] = tmp_entry;
<a name="l00149"></a>00149                 retval = &amp;<a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[0];
<a name="l00150"></a>00150             } <span class="keywordflow">else</span> {
<a name="l00151"></a>00151                 retval = &amp;<a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[x];
<a name="l00152"></a>00152             }
<a name="l00153"></a>00153             <span class="keywordflow">break</span>;
<a name="l00154"></a>00154         }
<a name="l00155"></a>00155         ++x;
<a name="l00156"></a>00156     }
<a name="l00157"></a>00157 
<a name="l00158"></a>00158     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(TLBVerbose, <span class="stringliteral">&quot;Lookup %#x, asn %#x -&gt; %s vmn 0x%x hyp %d secure %d &quot;</span>
<a name="l00159"></a>00159             <span class="stringliteral">&quot;ppn %#x size: %#x pa: %#x ap:%d ns:%d nstid:%d g:%d asid: %d &quot;</span>
<a name="l00160"></a>00160             <span class="stringliteral">&quot;el: %d\n&quot;</span>,
<a name="l00161"></a>00161             <a class="code" href="namespaceArmISA.html#a441099e13f407fadb6bcb0447107de87">va</a>, asn, retval ? <span class="stringliteral">&quot;hit&quot;</span> : <span class="stringliteral">&quot;miss&quot;</span>, <a class="code" href="classArmISA_1_1TLB.html#add293169f7f2ac526b3fa14f950cf0bb">vmid</a>, hyp, secure,
<a name="l00162"></a>00162             retval ? retval-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a66f77e20f7d5ff3157c4ee9eaf72adfc">pfn</a>       : 0, retval ? retval-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a8ce507144b5ef53350af753eafb669f0">size</a>  : 0,
<a name="l00163"></a>00163             retval ? retval-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#ad851ad4bd44e8c1ce61ad96498197de8">pAddr</a>(<a class="code" href="namespaceArmISA.html#a441099e13f407fadb6bcb0447107de87">va</a>) : 0, retval ? retval-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#af0965a83f15ef1c7fae65446c4b6b86d">ap</a>    : 0,
<a name="l00164"></a>00164             retval ? retval-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#aa3ca0c504f321d3657985faf35740bbe">ns</a>        : 0, retval ? retval-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#ac54510c3105727d94588b3fdb109ab42">nstid</a> : 0,
<a name="l00165"></a>00165             retval ? retval-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a86004534684821212245555e66ec1d09">global</a>    : 0, retval ? retval-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a984a2dcfd9509ab586bee117bb2a7cfb">asid</a>  : 0,
<a name="l00166"></a>00166             retval ? retval-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a3755c7b1c4844077396e8156639f0709">el</a>        : 0, retval ? retval-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a3755c7b1c4844077396e8156639f0709">el</a>    : 0);
<a name="l00167"></a>00167 
<a name="l00168"></a>00168     <span class="keywordflow">return</span> retval;
<a name="l00169"></a>00169 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acd3c3feb78ae7a8f88fe0f110a718dff"></a><!-- doxytag: member="ArmISA::TLB::params" ref="acd3c3feb78ae7a8f88fe0f110a718dff" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classSimObject.html#a0f0761d2db586a23bb2a2880b8f387bb">Params</a>* params </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classSimObject.html#acd3c3feb78ae7a8f88fe0f110a718dff">SimObject</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00348"></a>00348     {
<a name="l00349"></a>00349         <span class="keywordflow">return</span> <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classSimObject.html#a0f0761d2db586a23bb2a2880b8f387bb">Params</a> *<span class="keyword">&gt;</span>(<a class="code" href="classSimObject.html#acaf6024ae9dda44bfb1c67e05ad70aef">_params</a>);
<a name="l00350"></a>00350     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a48b5486ebf7c83e7c81025a032312ca6"></a><!-- doxytag: member="ArmISA::TLB::printTlb" ref="a48b5486ebf7c83e7c81025a032312ca6" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void printTlb </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00203"></a>00203 {
<a name="l00204"></a>00204     <span class="keywordtype">int</span> <a class="code" href="namespaceX86ISA.html#ab5f9a01fc40e47853ae9551b008afcbd">x</a> = 0;
<a name="l00205"></a>00205     <a class="code" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> *<a class="code" href="namespaceMipsISA.html#a49c5c4308a3fe2af210c807bd186b780">te</a>;
<a name="l00206"></a>00206     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classArmISA_1_1TLB.html">TLB</a>, <span class="stringliteral">&quot;Current TLB contents:\n&quot;</span>);
<a name="l00207"></a>00207     <span class="keywordflow">while</span> (x &lt; <a class="code" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a>) {
<a name="l00208"></a>00208         te = &amp;<a class="code" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a>[x];
<a name="l00209"></a>00209         <span class="keywordflow">if</span> (te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a28e3c179a86f337095088b3ca02a2b2a">valid</a>)
<a name="l00210"></a>00210             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classArmISA_1_1TLB.html">TLB</a>, <span class="stringliteral">&quot; *  %s\n&quot;</span>, te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#ae8a5b5e9e0e6be3b115ee77fa7b4d0c8">print</a>());
<a name="l00211"></a>00211         ++x;
<a name="l00212"></a>00212     }
<a name="l00213"></a>00213 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4dc637449366fcdfc4e764cdf12d9b11"></a><!-- doxytag: member="ArmISA::TLB::regStats" ref="a4dc637449366fcdfc4e764cdf12d9b11" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void regStats </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classRegister.html">Register</a> statistics for this object. </p>

<p><a class="el" href="classSimObject.html#a4dc637449366fcdfc4e764cdf12d9b11">SimObject</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00419"></a>00419 {
<a name="l00420"></a>00420     <a class="code" href="classArmISA_1_1TLB.html#a6f516f4695aa8bb85a9a52e395689e1a">instHits</a>
<a name="l00421"></a>00421         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.inst_hits&quot;</span>)
<a name="l00422"></a>00422         .desc(<span class="stringliteral">&quot;ITB inst hits&quot;</span>)
<a name="l00423"></a>00423         ;
<a name="l00424"></a>00424 
<a name="l00425"></a>00425     <a class="code" href="classArmISA_1_1TLB.html#ae63ad13cb56fbd34a91d2093deaafad2">instMisses</a>
<a name="l00426"></a>00426         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.inst_misses&quot;</span>)
<a name="l00427"></a>00427         .desc(<span class="stringliteral">&quot;ITB inst misses&quot;</span>)
<a name="l00428"></a>00428         ;
<a name="l00429"></a>00429 
<a name="l00430"></a>00430     <a class="code" href="classArmISA_1_1TLB.html#a7268909f031909e2eab6994aa6406ae4">instAccesses</a>
<a name="l00431"></a>00431         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.inst_accesses&quot;</span>)
<a name="l00432"></a>00432         .desc(<span class="stringliteral">&quot;ITB inst accesses&quot;</span>)
<a name="l00433"></a>00433         ;
<a name="l00434"></a>00434 
<a name="l00435"></a>00435     <a class="code" href="classArmISA_1_1TLB.html#a36a79efeb718e4de41970178013dac63">readHits</a>
<a name="l00436"></a>00436         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.read_hits&quot;</span>)
<a name="l00437"></a>00437         .desc(<span class="stringliteral">&quot;DTB read hits&quot;</span>)
<a name="l00438"></a>00438         ;
<a name="l00439"></a>00439 
<a name="l00440"></a>00440     <a class="code" href="classArmISA_1_1TLB.html#a262cd06e148f8dd362b73ee2a8c87ce0">readMisses</a>
<a name="l00441"></a>00441         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.read_misses&quot;</span>)
<a name="l00442"></a>00442         .desc(<span class="stringliteral">&quot;DTB read misses&quot;</span>)
<a name="l00443"></a>00443         ;
<a name="l00444"></a>00444 
<a name="l00445"></a>00445     <a class="code" href="classArmISA_1_1TLB.html#a1ebd2c58048a00cc55442a58e6782f35">readAccesses</a>
<a name="l00446"></a>00446         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.read_accesses&quot;</span>)
<a name="l00447"></a>00447         .desc(<span class="stringliteral">&quot;DTB read accesses&quot;</span>)
<a name="l00448"></a>00448         ;
<a name="l00449"></a>00449 
<a name="l00450"></a>00450     <a class="code" href="classArmISA_1_1TLB.html#a1d93d3754ee97de787330f7620867026">writeHits</a>
<a name="l00451"></a>00451         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.write_hits&quot;</span>)
<a name="l00452"></a>00452         .desc(<span class="stringliteral">&quot;DTB write hits&quot;</span>)
<a name="l00453"></a>00453         ;
<a name="l00454"></a>00454 
<a name="l00455"></a>00455     <a class="code" href="classArmISA_1_1TLB.html#a607353d27be8640c6f48a295794322d6">writeMisses</a>
<a name="l00456"></a>00456         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.write_misses&quot;</span>)
<a name="l00457"></a>00457         .desc(<span class="stringliteral">&quot;DTB write misses&quot;</span>)
<a name="l00458"></a>00458         ;
<a name="l00459"></a>00459 
<a name="l00460"></a>00460     <a class="code" href="classArmISA_1_1TLB.html#aaf48f6b8c76d54c75a6156c32ac6405f">writeAccesses</a>
<a name="l00461"></a>00461         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.write_accesses&quot;</span>)
<a name="l00462"></a>00462         .desc(<span class="stringliteral">&quot;DTB write accesses&quot;</span>)
<a name="l00463"></a>00463         ;
<a name="l00464"></a>00464 
<a name="l00465"></a>00465     <a class="code" href="classArmISA_1_1TLB.html#a224eed77bfb7a27359c9c3c1acbdbfaa">hits</a>
<a name="l00466"></a>00466         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.hits&quot;</span>)
<a name="l00467"></a>00467         .desc(<span class="stringliteral">&quot;DTB hits&quot;</span>)
<a name="l00468"></a>00468         ;
<a name="l00469"></a>00469 
<a name="l00470"></a>00470     <a class="code" href="classArmISA_1_1TLB.html#a4b8b96257f1e97cd5730673f38f9571c">misses</a>
<a name="l00471"></a>00471         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.misses&quot;</span>)
<a name="l00472"></a>00472         .desc(<span class="stringliteral">&quot;DTB misses&quot;</span>)
<a name="l00473"></a>00473         ;
<a name="l00474"></a>00474 
<a name="l00475"></a>00475     <a class="code" href="classArmISA_1_1TLB.html#a1929e1032289676f78e07e4c6bc55369">accesses</a>
<a name="l00476"></a>00476         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.accesses&quot;</span>)
<a name="l00477"></a>00477         .desc(<span class="stringliteral">&quot;DTB accesses&quot;</span>)
<a name="l00478"></a>00478         ;
<a name="l00479"></a>00479 
<a name="l00480"></a>00480     <a class="code" href="classArmISA_1_1TLB.html#a14429a278d32a87d27c0d9df47269a12">flushTlb</a>
<a name="l00481"></a>00481         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.flush_tlb&quot;</span>)
<a name="l00482"></a>00482         .desc(<span class="stringliteral">&quot;Number of times complete TLB was flushed&quot;</span>)
<a name="l00483"></a>00483         ;
<a name="l00484"></a>00484 
<a name="l00485"></a>00485     <a class="code" href="classArmISA_1_1TLB.html#af504265daaa5a177333d30804fba83a8">flushTlbMva</a>
<a name="l00486"></a>00486         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.flush_tlb_mva&quot;</span>)
<a name="l00487"></a>00487         .desc(<span class="stringliteral">&quot;Number of times TLB was flushed by MVA&quot;</span>)
<a name="l00488"></a>00488         ;
<a name="l00489"></a>00489 
<a name="l00490"></a>00490     <a class="code" href="classArmISA_1_1TLB.html#a94bc002df9a21796ac29c74bc3ef8240">flushTlbMvaAsid</a>
<a name="l00491"></a>00491         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.flush_tlb_mva_asid&quot;</span>)
<a name="l00492"></a>00492         .desc(<span class="stringliteral">&quot;Number of times TLB was flushed by MVA &amp; ASID&quot;</span>)
<a name="l00493"></a>00493         ;
<a name="l00494"></a>00494 
<a name="l00495"></a>00495     <a class="code" href="classArmISA_1_1TLB.html#a678e74ffba8318815627ae109f96b17e">flushTlbAsid</a>
<a name="l00496"></a>00496         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.flush_tlb_asid&quot;</span>)
<a name="l00497"></a>00497         .desc(<span class="stringliteral">&quot;Number of times TLB was flushed by ASID&quot;</span>)
<a name="l00498"></a>00498         ;
<a name="l00499"></a>00499 
<a name="l00500"></a>00500     <a class="code" href="classArmISA_1_1TLB.html#ad4c80b0aa999ae0403e2ffbc9a217aaa">flushedEntries</a>
<a name="l00501"></a>00501         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.flush_entries&quot;</span>)
<a name="l00502"></a>00502         .desc(<span class="stringliteral">&quot;Number of entries that have been flushed from TLB&quot;</span>)
<a name="l00503"></a>00503         ;
<a name="l00504"></a>00504 
<a name="l00505"></a>00505     <a class="code" href="classArmISA_1_1TLB.html#aaafbdf0bc49ea504814d314b5f51d47e">alignFaults</a>
<a name="l00506"></a>00506         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.align_faults&quot;</span>)
<a name="l00507"></a>00507         .desc(<span class="stringliteral">&quot;Number of TLB faults due to alignment restrictions&quot;</span>)
<a name="l00508"></a>00508         ;
<a name="l00509"></a>00509 
<a name="l00510"></a>00510     <a class="code" href="classArmISA_1_1TLB.html#a8d76399ea2182eaf505e54da078f5202">prefetchFaults</a>
<a name="l00511"></a>00511         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.prefetch_faults&quot;</span>)
<a name="l00512"></a>00512         .desc(<span class="stringliteral">&quot;Number of TLB faults due to prefetch&quot;</span>)
<a name="l00513"></a>00513         ;
<a name="l00514"></a>00514 
<a name="l00515"></a>00515     <a class="code" href="classArmISA_1_1TLB.html#a718b0dd709705b2b6cbf1c5e33c387fd">domainFaults</a>
<a name="l00516"></a>00516         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.domain_faults&quot;</span>)
<a name="l00517"></a>00517         .desc(<span class="stringliteral">&quot;Number of TLB faults due to domain restrictions&quot;</span>)
<a name="l00518"></a>00518         ;
<a name="l00519"></a>00519 
<a name="l00520"></a>00520     <a class="code" href="classArmISA_1_1TLB.html#a95307396029ef99d258ca5284cd8b284">permsFaults</a>
<a name="l00521"></a>00521         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.perms_faults&quot;</span>)
<a name="l00522"></a>00522         .desc(<span class="stringliteral">&quot;Number of TLB faults due to permissions restrictions&quot;</span>)
<a name="l00523"></a>00523         ;
<a name="l00524"></a>00524 
<a name="l00525"></a>00525     <a class="code" href="classArmISA_1_1TLB.html#a7268909f031909e2eab6994aa6406ae4">instAccesses</a> = <a class="code" href="classArmISA_1_1TLB.html#a6f516f4695aa8bb85a9a52e395689e1a">instHits</a> + <a class="code" href="classArmISA_1_1TLB.html#ae63ad13cb56fbd34a91d2093deaafad2">instMisses</a>;
<a name="l00526"></a>00526     <a class="code" href="classArmISA_1_1TLB.html#a1ebd2c58048a00cc55442a58e6782f35">readAccesses</a> = <a class="code" href="classArmISA_1_1TLB.html#a36a79efeb718e4de41970178013dac63">readHits</a> + <a class="code" href="classArmISA_1_1TLB.html#a262cd06e148f8dd362b73ee2a8c87ce0">readMisses</a>;
<a name="l00527"></a>00527     <a class="code" href="classArmISA_1_1TLB.html#aaf48f6b8c76d54c75a6156c32ac6405f">writeAccesses</a> = <a class="code" href="classArmISA_1_1TLB.html#a1d93d3754ee97de787330f7620867026">writeHits</a> + <a class="code" href="classArmISA_1_1TLB.html#a607353d27be8640c6f48a295794322d6">writeMisses</a>;
<a name="l00528"></a>00528     <a class="code" href="classArmISA_1_1TLB.html#a224eed77bfb7a27359c9c3c1acbdbfaa">hits</a> = <a class="code" href="classArmISA_1_1TLB.html#a36a79efeb718e4de41970178013dac63">readHits</a> + <a class="code" href="classArmISA_1_1TLB.html#a1d93d3754ee97de787330f7620867026">writeHits</a> + <a class="code" href="classArmISA_1_1TLB.html#a6f516f4695aa8bb85a9a52e395689e1a">instHits</a>;
<a name="l00529"></a>00529     <a class="code" href="classArmISA_1_1TLB.html#a4b8b96257f1e97cd5730673f38f9571c">misses</a> = readMisses + writeMisses + instMisses;
<a name="l00530"></a>00530     <a class="code" href="classArmISA_1_1TLB.html#a1929e1032289676f78e07e4c6bc55369">accesses</a> = <a class="code" href="classArmISA_1_1TLB.html#a1ebd2c58048a00cc55442a58e6782f35">readAccesses</a> + <a class="code" href="classArmISA_1_1TLB.html#aaf48f6b8c76d54c75a6156c32ac6405f">writeAccesses</a> + <a class="code" href="classArmISA_1_1TLB.html#a7268909f031909e2eab6994aa6406ae4">instAccesses</a>;
<a name="l00531"></a>00531 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a53e036786d17361be4c7320d39c99b84"></a><!-- doxytag: member="ArmISA::TLB::serialize" ref="a53e036786d17361be4c7320d39c99b84" args="(std::ostream &amp;os)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void serialize </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>os</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classSerializable.html#ad6272f80ae37e8331e3969b3f072a801">Serializable</a>を再定義しています。</p>

</div>
</div>
<a class="anchor" id="af863223c2fa90b0bbb305626dc3bc604"></a><!-- doxytag: member="ArmISA::TLB::setAttr" ref="af863223c2fa90b0bbb305626dc3bc604" args="(uint64_t attr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setAttr </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>attr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Accessor functions for memory attributes for last accessed <a class="el" href="classArmISA_1_1TLB.html">TLB</a> entry </p>

<p><div class="fragment"><pre class="fragment"><a name="l00261"></a>00261     {
<a name="l00262"></a>00262         <a class="code" href="classArmISA_1_1TLB.html#a89972e483f89fb3a1694154f97ce2d9d">_attr</a> = <a class="code" href="namespaceArmISA.html#a710acfac10f0042826d2d6d9c213ae7b">attr</a>;
<a name="l00263"></a>00263     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae888fc9d1a9bad8784469601dcf8d436"></a><!-- doxytag: member="ArmISA::TLB::setMMU" ref="ae888fc9d1a9bad8784469601dcf8d436" args="(Stage2MMU *m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setMMU </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classArmISA_1_1Stage2MMU.html">Stage2MMU</a> *&nbsp;</td>
          <td class="paramname"> <em>m</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00100"></a>00100 {
<a name="l00101"></a>00101     <a class="code" href="classArmISA_1_1TLB.html#a21ea64a0a6d9600fb09fff0854fd55d7">stage2Mmu</a> = m;
<a name="l00102"></a>00102     <a class="code" href="classArmISA_1_1TLB.html#ae4dec2d4d5730361d51d9f4b24dee89c">tableWalker</a>-&gt;<a class="code" href="classArmISA_1_1TableWalker.html#ae888fc9d1a9bad8784469601dcf8d436">setMMU</a>(m);
<a name="l00103"></a>00103 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a15b6c15c1be2ca4de3e65772a02aa29f"></a><!-- doxytag: member="ArmISA::TLB::takeOverFrom" ref="a15b6c15c1be2ca4de3e65772a02aa29f" args="(BaseTLB *otlb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void takeOverFrom </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseTLB.html">BaseTLB</a> *&nbsp;</td>
          <td class="paramname"> <em>otlb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00358"></a>00358 {
<a name="l00359"></a>00359     <a class="code" href="classArmISA_1_1TLB.html">TLB</a> *otlb = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classArmISA_1_1TLB.html">TLB</a>*<span class="keyword">&gt;</span>(_otlb);
<a name="l00360"></a>00360     <span class="comment">/* Make sure we actually have a valid type */</span>
<a name="l00361"></a>00361     <span class="keywordflow">if</span> (otlb) {
<a name="l00362"></a>00362         <a class="code" href="classArmISA_1_1TLB.html#a89972e483f89fb3a1694154f97ce2d9d">_attr</a> = otlb-&gt;<a class="code" href="classArmISA_1_1TLB.html#a89972e483f89fb3a1694154f97ce2d9d">_attr</a>;
<a name="l00363"></a>00363         <a class="code" href="classArmISA_1_1TLB.html#a8e8469d916956ca8b9052ebd6f155e0b">haveLPAE</a> = otlb-&gt;<a class="code" href="classArmISA_1_1TLB.html#a8e8469d916956ca8b9052ebd6f155e0b">haveLPAE</a>;
<a name="l00364"></a>00364         <a class="code" href="classArmISA_1_1TLB.html#a16c6c6799c68307c82bc6304cf0b27b4">directToStage2</a> = otlb-&gt;<a class="code" href="classArmISA_1_1TLB.html#a16c6c6799c68307c82bc6304cf0b27b4">directToStage2</a>;
<a name="l00365"></a>00365         <a class="code" href="classArmISA_1_1TLB.html#a52120124577a3b7c28a4e8876cd36a8b">stage2Req</a> = otlb-&gt;<a class="code" href="classArmISA_1_1TLB.html#a52120124577a3b7c28a4e8876cd36a8b">stage2Req</a>;
<a name="l00366"></a>00366         <a class="code" href="classArmISA_1_1TLB.html#a2ebef8e3741ddc1169a0a05e6a48052e">bootUncacheability</a> = otlb-&gt;<a class="code" href="classArmISA_1_1TLB.html#a2ebef8e3741ddc1169a0a05e6a48052e">bootUncacheability</a>;
<a name="l00367"></a>00367 
<a name="l00368"></a>00368         <span class="comment">/* Sync the stage2 MMU if they exist in both</span>
<a name="l00369"></a>00369 <span class="comment">         * the old CPU and the new</span>
<a name="l00370"></a>00370 <span class="comment">         */</span>
<a name="l00371"></a>00371         <span class="keywordflow">if</span> (!<a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a> &amp;&amp;
<a name="l00372"></a>00372             <a class="code" href="classArmISA_1_1TLB.html#a2188cef93e9eb4ac6383c0ca4f44dc36">stage2Tlb</a> &amp;&amp; otlb-&gt;<a class="code" href="classArmISA_1_1TLB.html#a2188cef93e9eb4ac6383c0ca4f44dc36">stage2Tlb</a>) {
<a name="l00373"></a>00373             <a class="code" href="classArmISA_1_1TLB.html#a2188cef93e9eb4ac6383c0ca4f44dc36">stage2Tlb</a>-&gt;<a class="code" href="classArmISA_1_1TLB.html#a15b6c15c1be2ca4de3e65772a02aa29f">takeOverFrom</a>(otlb-&gt;<a class="code" href="classArmISA_1_1TLB.html#a2188cef93e9eb4ac6383c0ca4f44dc36">stage2Tlb</a>);
<a name="l00374"></a>00374         }
<a name="l00375"></a>00375     } <span class="keywordflow">else</span> {
<a name="l00376"></a>00376         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Incompatible TLB type!&quot;</span>);
<a name="l00377"></a>00377     }
<a name="l00378"></a>00378 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad9813aa5a0ed9ba84b634d9960006ed2"></a><!-- doxytag: member="ArmISA::TLB::translateAtomic" ref="ad9813aa5a0ed9ba84b634d9960006ed2" args="(RequestPtr req, ThreadContext *tc, Mode mode, ArmTranslationType tranType=NormalTran)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">Fault</a> translateAtomic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRequest.html">RequestPtr</a>&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08">TLB::ArmTranslationType</a>&nbsp;</td>
          <td class="paramname"> <em>tranType</em> = <code>NormalTran</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l01104"></a>01104 {
<a name="l01105"></a>01105     <a class="code" href="classArmISA_1_1TLB.html#a7eb66b75612ed7e8b075cd89dfd2b157">updateMiscReg</a>(tc, tranType);
<a name="l01106"></a>01106 
<a name="l01107"></a>01107     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a16c6c6799c68307c82bc6304cf0b27b4">directToStage2</a>) {
<a name="l01108"></a>01108         assert(<a class="code" href="classArmISA_1_1TLB.html#a2188cef93e9eb4ac6383c0ca4f44dc36">stage2Tlb</a>);
<a name="l01109"></a>01109         <span class="keywordflow">return</span> <a class="code" href="classArmISA_1_1TLB.html#a2188cef93e9eb4ac6383c0ca4f44dc36">stage2Tlb</a>-&gt;<a class="code" href="classArmISA_1_1TLB.html#ad9813aa5a0ed9ba84b634d9960006ed2">translateAtomic</a>(req, tc, <a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, tranType);
<a name="l01110"></a>01110     }
<a name="l01111"></a>01111 
<a name="l01112"></a>01112     <span class="keywordtype">bool</span> delay = <span class="keyword">false</span>;
<a name="l01113"></a>01113     <a class="code" href="classRefCountingPtr.html">Fault</a> fault;
<a name="l01114"></a>01114     <span class="keywordflow">if</span> (<a class="code" href="full__system_8hh.html#af929576af6f85c8849704b66d04b8370">FullSystem</a>)
<a name="l01115"></a>01115         fault = <a class="code" href="classArmISA_1_1TLB.html#a3d876e306a41e194bda2747ea51982f8">translateFs</a>(req, tc, <a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>, delay, <span class="keyword">false</span>, tranType);
<a name="l01116"></a>01116     <span class="keywordflow">else</span>
<a name="l01117"></a>01117         fault = <a class="code" href="classArmISA_1_1TLB.html#a6ada13dabe05b90fee0464345cf0f654">translateSe</a>(req, tc, <a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>, delay, <span class="keyword">false</span>);
<a name="l01118"></a>01118     assert(!delay);
<a name="l01119"></a>01119     <span class="keywordflow">return</span> fault;
<a name="l01120"></a>01120 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="adc8f6be2e370d6ce03ae8044ff6f8709"></a><!-- doxytag: member="ArmISA::TLB::translateComplete" ref="adc8f6be2e370d6ce03ae8044ff6f8709" args="(RequestPtr req, ThreadContext *tc, Translation *translation, Mode mode, ArmTranslationType tranType, bool callFromS2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">Fault</a> translateComplete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRequest.html">RequestPtr</a>&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseTLB_1_1Translation.html">Translation</a> *&nbsp;</td>
          <td class="paramname"> <em>translation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08">TLB::ArmTranslationType</a>&nbsp;</td>
          <td class="paramname"> <em>tranType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>callFromS2</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l01163"></a>01163 {
<a name="l01164"></a>01164     <span class="keywordtype">bool</span> delay = <span class="keyword">false</span>;
<a name="l01165"></a>01165     <a class="code" href="classRefCountingPtr.html">Fault</a> fault;
<a name="l01166"></a>01166     <span class="keywordflow">if</span> (<a class="code" href="full__system_8hh.html#af929576af6f85c8849704b66d04b8370">FullSystem</a>)
<a name="l01167"></a>01167         fault = <a class="code" href="classArmISA_1_1TLB.html#a3d876e306a41e194bda2747ea51982f8">translateFs</a>(req, tc, <a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, translation, delay, <span class="keyword">true</span>, tranType);
<a name="l01168"></a>01168     <span class="keywordflow">else</span>
<a name="l01169"></a>01169         fault = <a class="code" href="classArmISA_1_1TLB.html#a6ada13dabe05b90fee0464345cf0f654">translateSe</a>(req, tc, <a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, translation, delay, <span class="keyword">true</span>);
<a name="l01170"></a>01170     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(TLBVerbose, <span class="stringliteral">&quot;Translation returning delay=%d fault=%d\n&quot;</span>, delay, fault !=
<a name="l01171"></a>01171             <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>);
<a name="l01172"></a>01172     <span class="comment">// If we have a translation, and we&apos;re not in the middle of doing a stage</span>
<a name="l01173"></a>01173     <span class="comment">// 2 translation tell the translation that we&apos;ve either finished or its</span>
<a name="l01174"></a>01174     <span class="comment">// going to take a while. By not doing this when we&apos;re in the middle of a</span>
<a name="l01175"></a>01175     <span class="comment">// stage 2 translation we prevent marking the translation as delayed twice,</span>
<a name="l01176"></a>01176     <span class="comment">// one when the translation starts and again when the stage 1 translation</span>
<a name="l01177"></a>01177     <span class="comment">// completes.</span>
<a name="l01178"></a>01178     <span class="keywordflow">if</span> (translation &amp;&amp; (callFromS2 || !<a class="code" href="classArmISA_1_1TLB.html#a52120124577a3b7c28a4e8876cd36a8b">stage2Req</a> || req-&gt;<a class="code" href="classRequest.html#af9673cab591724dc74122a8e663389ce">hasPaddr</a>() || fault != <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>)) {
<a name="l01179"></a>01179         <span class="keywordflow">if</span> (!delay)
<a name="l01180"></a>01180             translation-&gt;finish(fault, req, tc, <a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>);
<a name="l01181"></a>01181         <span class="keywordflow">else</span>
<a name="l01182"></a>01182             translation-&gt;markDelayed();
<a name="l01183"></a>01183     }
<a name="l01184"></a>01184     <span class="keywordflow">return</span> fault;
<a name="l01185"></a>01185 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3d876e306a41e194bda2747ea51982f8"></a><!-- doxytag: member="ArmISA::TLB::translateFs" ref="a3d876e306a41e194bda2747ea51982f8" args="(RequestPtr req, ThreadContext *tc, Mode mode, Translation *translation, bool &amp;delay, bool timing, ArmTranslationType tranType, bool functional=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">Fault</a> translateFs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRequest.html">RequestPtr</a>&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseTLB_1_1Translation.html">Translation</a> *&nbsp;</td>
          <td class="paramname"> <em>translation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&nbsp;</td>
          <td class="paramname"> <em>delay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>timing</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08">TLB::ArmTranslationType</a>&nbsp;</td>
          <td class="paramname"> <em>tranType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>functional</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00932"></a>00932 {
<a name="l00933"></a>00933     <span class="comment">// No such thing as a functional timing access</span>
<a name="l00934"></a>00934     assert(!(timing &amp;&amp; functional));
<a name="l00935"></a>00935 
<a name="l00936"></a>00936     <a class="code" href="classArmISA_1_1TLB.html#a7eb66b75612ed7e8b075cd89dfd2b157">updateMiscReg</a>(tc, tranType);
<a name="l00937"></a>00937 
<a name="l00938"></a>00938     <a class="code" href="classm5_1_1params_1_1Addr.html">Addr</a> vaddr_tainted = req-&gt;<a class="code" href="classRequest.html#a68d2230b37b30d25462093fefdd813ac">getVaddr</a>();
<a name="l00939"></a>00939     <a class="code" href="classm5_1_1params_1_1Addr.html">Addr</a> <a class="code" href="namespaceMipsISA.html#ac78d9788b3f9a366df64485c9afaf1b1">vaddr</a> = 0;
<a name="l00940"></a>00940     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a52c06c8a54293998f3e1f71cdbd916f7">aarch64</a>)
<a name="l00941"></a>00941         vaddr = <a class="code" href="namespaceArmISA.html#a52481fc8af3df3627260833f83bd5a83">purifyTaggedAddr</a>(vaddr_tainted, tc, <a class="code" href="classArmISA_1_1TLB.html#a658ce290954a428d8c5df11b8b5bd81b">aarch64EL</a>);
<a name="l00942"></a>00942     <span class="keywordflow">else</span>
<a name="l00943"></a>00943         vaddr = vaddr_tainted;
<a name="l00944"></a>00944     <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="namespacem5_1_1debug.html#a9ceb38153d5c0f156fbeada6dc00ff4f">flags</a> = req-&gt;<a class="code" href="classRequest.html#a8552aa8d45c9ba10449d51ac08e7d490">getFlags</a>();
<a name="l00945"></a>00945 
<a name="l00946"></a>00946     <span class="keywordtype">bool</span> is_fetch  = (<a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a> == <a class="code" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911a31b7313c05d32519f3869a3de8be95e6">Execute</a>);
<a name="l00947"></a>00947     <span class="keywordtype">bool</span> is_write  = (<a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a> == <a class="code" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911aa56670174817e3fed92bfd8182d7c0d1">Write</a>);
<a name="l00948"></a>00948     <span class="keywordtype">bool</span> long_desc_format = <a class="code" href="classArmISA_1_1TLB.html#a52c06c8a54293998f3e1f71cdbd916f7">aarch64</a> || (<a class="code" href="classArmISA_1_1TLB.html#a8e8469d916956ca8b9052ebd6f155e0b">haveLPAE</a> &amp;&amp; <a class="code" href="classArmISA_1_1TLB.html#ad6762be565087b4bfb87f5bcb42673e7">ttbcr</a>.eae);
<a name="l00949"></a>00949     <a class="code" href="classArmISA_1_1ArmFault.html#ad78237d6390becbe8bdf9e73979c56ae">ArmFault::TranMethod</a> tranMethod = long_desc_format ? <a class="code" href="classArmISA_1_1ArmFault.html#ad78237d6390becbe8bdf9e73979c56aea307d48bbc198c224e04bf57415c05dcd">ArmFault::LpaeTran</a>
<a name="l00950"></a>00950                                                        : <a class="code" href="classArmISA_1_1ArmFault.html#ad78237d6390becbe8bdf9e73979c56aeabfef4fbb52d72e0c89f660f2d501a488">ArmFault::VmsaTran</a>;
<a name="l00951"></a>00951 
<a name="l00952"></a>00952     req-&gt;<a class="code" href="classRequest.html#aef60755a55f22e515c1772adcc208919">setAsid</a>(<a class="code" href="classArmISA_1_1TLB.html#a984a2dcfd9509ab586bee117bb2a7cfb">asid</a>);
<a name="l00953"></a>00953 
<a name="l00954"></a>00954     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(TLBVerbose, <span class="stringliteral">&quot;CPSR is priv:%d UserMode:%d secure:%d S1S2NsTran:%d\n&quot;</span>,
<a name="l00955"></a>00955             <a class="code" href="classArmISA_1_1TLB.html#ae5a4adef864b3b2b23001750a8a89499">isPriv</a>, flags &amp; <a class="code" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0dadcfc57d389e8e2bb30dc32135b6a92d0">UserMode</a>, <a class="code" href="classArmISA_1_1TLB.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a>, tranType &amp; <a class="code" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08ab8e7d202ad511f74c201e2bca94e83d6">S1S2NsTran</a>);
<a name="l00956"></a>00956 
<a name="l00957"></a>00957     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classArmISA_1_1TLB.html">TLB</a>, <span class="stringliteral">&quot;translateFs addr %#x, mode %d, st2 %d, scr %#x sctlr %#x &quot;</span>
<a name="l00958"></a>00958                  <span class="stringliteral">&quot;flags %#x tranType 0x%x\n&quot;</span>, vaddr_tainted, <a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, <a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>,
<a name="l00959"></a>00959                  <a class="code" href="classArmISA_1_1TLB.html#ace0bf26677706ecff809bd4c76d33c8c">scr</a>, <a class="code" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a>, flags, tranType);
<a name="l00960"></a>00960 
<a name="l00961"></a>00961     <span class="comment">// Generate an alignment fault for unaligned PC</span>
<a name="l00962"></a>00962     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a52c06c8a54293998f3e1f71cdbd916f7">aarch64</a> &amp;&amp; is_fetch &amp;&amp; (req-&gt;<a class="code" href="classRequest.html#ab651e5db13fd546a5d4f88d3a4a04428">getPC</a>() &amp; <a class="code" href="namespaceArmISA.html#a9534dbda5e7db9881c7955c6e08cfdc0">mask</a>(2))) {
<a name="l00963"></a>00963         <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classArmISA_1_1PCAlignmentFault.html" title="PC alignment fault (AArch64 only).">PCAlignmentFault</a>(req-&gt;<a class="code" href="classRequest.html#ab651e5db13fd546a5d4f88d3a4a04428">getPC</a>());
<a name="l00964"></a>00964     }
<a name="l00965"></a>00965 
<a name="l00966"></a>00966     <span class="comment">// If this is a clrex instruction, provide a PA of 0 with no fault</span>
<a name="l00967"></a>00967     <span class="comment">// This will force the monitor to set the tracked address to 0</span>
<a name="l00968"></a>00968     <span class="comment">// a bit of a hack but this effectively clrears this processors monitor</span>
<a name="l00969"></a>00969     <span class="keywordflow">if</span> (flags &amp; <a class="code" href="classRequest.html#ad3bec0fb1cf156170b4f9b3df49b22a6">Request::CLEAR_LL</a>){
<a name="l00970"></a>00970         <span class="comment">// @todo: check implications of security extensions</span>
<a name="l00971"></a>00971        req-&gt;<a class="code" href="classRequest.html#a688b841276b48f5c420569e62a090130">setPaddr</a>(0);
<a name="l00972"></a>00972        req-&gt;<a class="code" href="classRequest.html#a33971d22712c9c80177e4362dffd5580">setFlags</a>(<a class="code" href="classRequest.html#a0fc1d6bc92a0567b05130468e04f05f8">Request::UNCACHEABLE</a>);
<a name="l00973"></a>00973        req-&gt;<a class="code" href="classRequest.html#a33971d22712c9c80177e4362dffd5580">setFlags</a>(Request::CLEAR_LL);
<a name="l00974"></a>00974        <span class="keywordflow">return</span> <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00975"></a>00975     }
<a name="l00976"></a>00976     <span class="keywordflow">if</span> ((req-&gt;<a class="code" href="classRequest.html#ae742b8e8aaa2e18506dc64c7b7f3fc0a">isInstFetch</a>() &amp;&amp; (!<a class="code" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a>.i)) ||
<a name="l00977"></a>00977         ((!req-&gt;<a class="code" href="classRequest.html#ae742b8e8aaa2e18506dc64c7b7f3fc0a">isInstFetch</a>()) &amp;&amp; (!<a class="code" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a>.c))){
<a name="l00978"></a>00978        req-&gt;<a class="code" href="classRequest.html#a33971d22712c9c80177e4362dffd5580">setFlags</a>(<a class="code" href="classRequest.html#a0fc1d6bc92a0567b05130468e04f05f8">Request::UNCACHEABLE</a>);
<a name="l00979"></a>00979     }
<a name="l00980"></a>00980     <span class="keywordflow">if</span> (!is_fetch) {
<a name="l00981"></a>00981         assert(flags &amp; <a class="code" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0daf6e40c9fd5825f3b3a4f2d45d4a64c68">MustBeOne</a>);
<a name="l00982"></a>00982         <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a>.a || !(flags &amp; <a class="code" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0dac6aa9917fe5880558d8ee22e2fbcbe58">AllowUnaligned</a>)) {
<a name="l00983"></a>00983             <span class="keywordflow">if</span> (vaddr &amp; <a class="code" href="namespaceArmISA.html#a9534dbda5e7db9881c7955c6e08cfdc0">mask</a>(flags &amp; <a class="code" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0da811bb3ddcc5035211e497b863db3abd0">AlignmentMask</a>)) {
<a name="l00984"></a>00984                 <a class="code" href="classArmISA_1_1TLB.html#aaafbdf0bc49ea504814d314b5f51d47e">alignFaults</a>++;
<a name="l00985"></a>00985                 <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classArmISA_1_1DataAbort.html">DataAbort</a>(vaddr_tainted,
<a name="l00986"></a>00986                                      TlbEntry::DomainType::NoAccess, is_write,
<a name="l00987"></a>00987                                      <a class="code" href="classArmISA_1_1ArmFault.html#a8771a605c5b916759188c3a191bb6202a25751bcd8ec8d06a081be3218e856cc6">ArmFault::AlignmentFault</a>, <a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>,
<a name="l00988"></a>00988                                      tranMethod);
<a name="l00989"></a>00989             }
<a name="l00990"></a>00990         }
<a name="l00991"></a>00991     }
<a name="l00992"></a>00992 
<a name="l00993"></a>00993     <span class="comment">// If guest MMU is off or hcr.vm=0 go straight to stage2</span>
<a name="l00994"></a>00994     <span class="keywordflow">if</span> ((<a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a> &amp;&amp; !<a class="code" href="classArmISA_1_1TLB.html#ad0d8df2e2be956266458221c23763b4c">hcr</a>.vm) || (!<a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a> &amp;&amp; !<a class="code" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a>.m)) {
<a name="l00995"></a>00995 
<a name="l00996"></a>00996         req-&gt;<a class="code" href="classRequest.html#a688b841276b48f5c420569e62a090130">setPaddr</a>(vaddr);
<a name="l00997"></a>00997         <span class="comment">// When the MMU is off the security attribute corresponds to the</span>
<a name="l00998"></a>00998         <span class="comment">// security state of the processor</span>
<a name="l00999"></a>00999         <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a>)
<a name="l01000"></a>01000             req-&gt;<a class="code" href="classRequest.html#a33971d22712c9c80177e4362dffd5580">setFlags</a>(<a class="code" href="classRequest.html#a096bc7521755b6680d9a1988a6c9b109">Request::SECURE</a>);
<a name="l01001"></a>01001 
<a name="l01002"></a>01002         <span class="comment">// @todo: double check this (ARM ARM issue C B3.2.1)</span>
<a name="l01003"></a>01003         <span class="keywordflow">if</span> (long_desc_format || <a class="code" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a>.tre == 0) {
<a name="l01004"></a>01004             req-&gt;<a class="code" href="classRequest.html#a33971d22712c9c80177e4362dffd5580">setFlags</a>(<a class="code" href="classRequest.html#a0fc1d6bc92a0567b05130468e04f05f8">Request::UNCACHEABLE</a>);
<a name="l01005"></a>01005         } <span class="keywordflow">else</span> {
<a name="l01006"></a>01006             <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a763ad3cda6c2782d46835a3b2c4b5515">nmrr</a>.ir0 == 0 || <a class="code" href="classArmISA_1_1TLB.html#a763ad3cda6c2782d46835a3b2c4b5515">nmrr</a>.or0 == 0 || <a class="code" href="classArmISA_1_1TLB.html#a06fc88abc8a8aa441c512ebb7531b3d7">prrr</a>.tr0 != 0x2)
<a name="l01007"></a>01007                 req-&gt;<a class="code" href="classRequest.html#a33971d22712c9c80177e4362dffd5580">setFlags</a>(<a class="code" href="classRequest.html#a0fc1d6bc92a0567b05130468e04f05f8">Request::UNCACHEABLE</a>);
<a name="l01008"></a>01008         }
<a name="l01009"></a>01009 
<a name="l01010"></a>01010         <span class="comment">// Set memory attributes</span>
<a name="l01011"></a>01011         <a class="code" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> temp_te;
<a name="l01012"></a>01012         temp_te.<a class="code" href="structArmISA_1_1TlbEntry.html#aa3ca0c504f321d3657985faf35740bbe">ns</a> = !<a class="code" href="classArmISA_1_1TLB.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a>;
<a name="l01013"></a>01013         <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a> || <a class="code" href="classArmISA_1_1TLB.html#ad0d8df2e2be956266458221c23763b4c">hcr</a>.dc == 0 || <a class="code" href="classArmISA_1_1TLB.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a> ||
<a name="l01014"></a>01014            (<a class="code" href="classArmISA_1_1TLB.html#a104c09577173edc4f8ce6814cc33f0ae">isHyp</a> &amp;&amp; !(tranType &amp; <a class="code" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08a4ed07d4f5bb408945e5f4e9c7333b2d3">S1CTran</a>))) {
<a name="l01015"></a>01015 
<a name="l01016"></a>01016             temp_te.<a class="code" href="structArmISA_1_1TlbEntry.html#adf9797b2466c7c1b82e0b738b75d8fab">mtype</a>      = is_fetch ? TlbEntry::MemoryType::Normal
<a name="l01017"></a>01017                                           : TlbEntry::MemoryType::StronglyOrdered;
<a name="l01018"></a>01018             temp_te.<a class="code" href="structArmISA_1_1TlbEntry.html#acf1e099a3b1f79dcf9db2007bdfd4c51">innerAttrs</a> = 0x0;
<a name="l01019"></a>01019             temp_te.<a class="code" href="structArmISA_1_1TlbEntry.html#a8f3ab6c1b3ebb9db965b8cc788b0dab4">outerAttrs</a> = 0x0;
<a name="l01020"></a>01020             temp_te.<a class="code" href="structArmISA_1_1TlbEntry.html#a8595b2218cf2d99d0987a204f511f3f2">shareable</a>  = <span class="keyword">true</span>;
<a name="l01021"></a>01021             temp_te.<a class="code" href="structArmISA_1_1TlbEntry.html#a6ad80a1d32b73f10c744decc24ca7cd5">outerShareable</a> = <span class="keyword">true</span>;
<a name="l01022"></a>01022         } <span class="keywordflow">else</span> {
<a name="l01023"></a>01023             temp_te.<a class="code" href="structArmISA_1_1TlbEntry.html#adf9797b2466c7c1b82e0b738b75d8fab">mtype</a>      = TlbEntry::MemoryType::Normal;
<a name="l01024"></a>01024             temp_te.<a class="code" href="structArmISA_1_1TlbEntry.html#acf1e099a3b1f79dcf9db2007bdfd4c51">innerAttrs</a> = 0x3;
<a name="l01025"></a>01025             temp_te.<a class="code" href="structArmISA_1_1TlbEntry.html#a8f3ab6c1b3ebb9db965b8cc788b0dab4">outerAttrs</a> = 0x3;
<a name="l01026"></a>01026             temp_te.<a class="code" href="structArmISA_1_1TlbEntry.html#a8595b2218cf2d99d0987a204f511f3f2">shareable</a>  = <span class="keyword">false</span>;
<a name="l01027"></a>01027             temp_te.<a class="code" href="structArmISA_1_1TlbEntry.html#a6ad80a1d32b73f10c744decc24ca7cd5">outerShareable</a> = <span class="keyword">false</span>;
<a name="l01028"></a>01028         }
<a name="l01029"></a>01029         temp_te.<a class="code" href="structArmISA_1_1TlbEntry.html#ad4a13c759d4108dc9d0914a81b8d6703">setAttributes</a>(long_desc_format);
<a name="l01030"></a>01030         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(TLBVerbose, <span class="stringliteral">&quot;(No MMU) setting memory attributes: shareable:\</span>
<a name="l01031"></a>01031 <span class="stringliteral">                %d, innerAttrs: %d, outerAttrs: %d, isStage2: %d\n&quot;</span>,
<a name="l01032"></a>01032                 temp_te.<a class="code" href="structArmISA_1_1TlbEntry.html#a8595b2218cf2d99d0987a204f511f3f2">shareable</a>, temp_te.<a class="code" href="structArmISA_1_1TlbEntry.html#acf1e099a3b1f79dcf9db2007bdfd4c51">innerAttrs</a>, temp_te.<a class="code" href="structArmISA_1_1TlbEntry.html#a8f3ab6c1b3ebb9db965b8cc788b0dab4">outerAttrs</a>,
<a name="l01033"></a>01033                 <a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>);
<a name="l01034"></a>01034         <a class="code" href="classArmISA_1_1TLB.html#af863223c2fa90b0bbb305626dc3bc604">setAttr</a>(temp_te.<a class="code" href="structArmISA_1_1TlbEntry.html#af2477a97f3d64421167ca09818993a8d">attributes</a>);
<a name="l01035"></a>01035 
<a name="l01036"></a>01036         <span class="keywordflow">return</span> <a class="code" href="classArmISA_1_1TLB.html#aa14d4829f5c7bce966547df0babb7487">trickBoxCheck</a>(req, <a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, TlbEntry::DomainType::NoAccess);
<a name="l01037"></a>01037     }
<a name="l01038"></a>01038 
<a name="l01039"></a>01039     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(TLBVerbose, <span class="stringliteral">&quot;Translating %s=%#x context=%d\n&quot;</span>,
<a name="l01040"></a>01040             <a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a> ? <span class="stringliteral">&quot;IPA&quot;</span> : <span class="stringliteral">&quot;VA&quot;</span>, vaddr_tainted, <a class="code" href="classArmISA_1_1TLB.html#a984a2dcfd9509ab586bee117bb2a7cfb">asid</a>);
<a name="l01041"></a>01041     <span class="comment">// Translation enabled</span>
<a name="l01042"></a>01042 
<a name="l01043"></a>01043     <a class="code" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> *<a class="code" href="namespaceMipsISA.html#a49c5c4308a3fe2af210c807bd186b780">te</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l01044"></a>01044     <a class="code" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> mergeTe;
<a name="l01045"></a>01045     <a class="code" href="classRefCountingPtr.html">Fault</a> fault = <a class="code" href="classArmISA_1_1TLB.html#a0743624c3e13c3dd3108be8847f8e488">getResultTe</a>(&amp;te, req, tc, <a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, translation, timing,
<a name="l01046"></a>01046                               functional, &amp;mergeTe);
<a name="l01047"></a>01047     <span class="comment">// only proceed if we have a valid table entry</span>
<a name="l01048"></a>01048     <span class="keywordflow">if</span> ((te == <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>) &amp;&amp; (fault == <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>)) delay = <span class="keyword">true</span>;
<a name="l01049"></a>01049 
<a name="l01050"></a>01050     <span class="comment">// If we have the table entry transfer some of the attributes to the</span>
<a name="l01051"></a>01051     <span class="comment">// request that triggered the translation</span>
<a name="l01052"></a>01052     <span class="keywordflow">if</span> (te != <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>) {
<a name="l01053"></a>01053         <span class="comment">// Set memory attributes</span>
<a name="l01054"></a>01054         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(TLBVerbose,
<a name="l01055"></a>01055                 <span class="stringliteral">&quot;Setting memory attributes: shareable: %d, innerAttrs: %d, \</span>
<a name="l01056"></a>01056 <span class="stringliteral">                outerAttrs: %d, mtype: %d, isStage2: %d\n&quot;</span>,
<a name="l01057"></a>01057                 te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a8595b2218cf2d99d0987a204f511f3f2">shareable</a>, te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#acf1e099a3b1f79dcf9db2007bdfd4c51">innerAttrs</a>, te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a8f3ab6c1b3ebb9db965b8cc788b0dab4">outerAttrs</a>,
<a name="l01058"></a>01058                 static_cast&lt;uint8_t&gt;(te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#adf9797b2466c7c1b82e0b738b75d8fab">mtype</a>), <a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>);
<a name="l01059"></a>01059         <a class="code" href="classArmISA_1_1TLB.html#af863223c2fa90b0bbb305626dc3bc604">setAttr</a>(te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#af2477a97f3d64421167ca09818993a8d">attributes</a>);
<a name="l01060"></a>01060         <span class="keywordflow">if</span> (te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#a4f3ea4eb06b83de0e16cc771374db506">nonCacheable</a>) {
<a name="l01061"></a>01061             req-&gt;<a class="code" href="classRequest.html#a33971d22712c9c80177e4362dffd5580">setFlags</a>(<a class="code" href="classRequest.html#a0fc1d6bc92a0567b05130468e04f05f8">Request::UNCACHEABLE</a>);
<a name="l01062"></a>01062         }
<a name="l01063"></a>01063 
<a name="l01064"></a>01064         <span class="keywordflow">if</span> (!<a class="code" href="classArmISA_1_1TLB.html#a2ebef8e3741ddc1169a0a05e6a48052e">bootUncacheability</a> &amp;&amp;
<a name="l01065"></a>01065             ((<a class="code" href="classArmSystem.html">ArmSystem</a>*)tc-&gt;<a class="code" href="classThreadContext.html#a4585cb7174e215741001b70fafe6662e">getSystemPtr</a>())-&gt;adderBootUncacheable(vaddr)) {
<a name="l01066"></a>01066             req-&gt;<a class="code" href="classRequest.html#a33971d22712c9c80177e4362dffd5580">setFlags</a>(<a class="code" href="classRequest.html#a0fc1d6bc92a0567b05130468e04f05f8">Request::UNCACHEABLE</a>);
<a name="l01067"></a>01067         }
<a name="l01068"></a>01068 
<a name="l01069"></a>01069         req-&gt;<a class="code" href="classRequest.html#a688b841276b48f5c420569e62a090130">setPaddr</a>(te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#ad851ad4bd44e8c1ce61ad96498197de8">pAddr</a>(vaddr));
<a name="l01070"></a>01070         <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a> &amp;&amp; !te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#aa3ca0c504f321d3657985faf35740bbe">ns</a>) {
<a name="l01071"></a>01071             req-&gt;<a class="code" href="classRequest.html#a33971d22712c9c80177e4362dffd5580">setFlags</a>(<a class="code" href="classRequest.html#a096bc7521755b6680d9a1988a6c9b109">Request::SECURE</a>);
<a name="l01072"></a>01072         }
<a name="l01073"></a>01073         <span class="keywordflow">if</span> ((!is_fetch) &amp;&amp; (vaddr &amp; <a class="code" href="namespaceArmISA.html#a9534dbda5e7db9881c7955c6e08cfdc0">mask</a>(flags &amp; <a class="code" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0da811bb3ddcc5035211e497b863db3abd0">AlignmentMask</a>)) &amp;&amp;
<a name="l01074"></a>01074             (te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#adf9797b2466c7c1b82e0b738b75d8fab">mtype</a> != TlbEntry::MemoryType::Normal)) {
<a name="l01075"></a>01075                 <span class="comment">// Unaligned accesses to Device memory should always cause an</span>
<a name="l01076"></a>01076                 <span class="comment">// abort regardless of sctlr.a</span>
<a name="l01077"></a>01077                 <a class="code" href="classArmISA_1_1TLB.html#aaafbdf0bc49ea504814d314b5f51d47e">alignFaults</a>++;
<a name="l01078"></a>01078                 <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classArmISA_1_1DataAbort.html">DataAbort</a>(vaddr_tainted,
<a name="l01079"></a>01079                                      TlbEntry::DomainType::NoAccess, is_write,
<a name="l01080"></a>01080                                      <a class="code" href="classArmISA_1_1ArmFault.html#a8771a605c5b916759188c3a191bb6202a25751bcd8ec8d06a081be3218e856cc6">ArmFault::AlignmentFault</a>, <a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>,
<a name="l01081"></a>01081                                      tranMethod);
<a name="l01082"></a>01082         }
<a name="l01083"></a>01083 
<a name="l01084"></a>01084         <span class="comment">// Check for a trickbox generated address fault</span>
<a name="l01085"></a>01085         <span class="keywordflow">if</span> (fault == <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>) {
<a name="l01086"></a>01086             fault = <a class="code" href="classArmISA_1_1TLB.html#aa14d4829f5c7bce966547df0babb7487">trickBoxCheck</a>(req, <a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, te-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#accddad3ef7d0db5aa7c34d730fc03a33">domain</a>);
<a name="l01087"></a>01087         }
<a name="l01088"></a>01088     }
<a name="l01089"></a>01089 
<a name="l01090"></a>01090     <span class="comment">// Generate Illegal Inst Set State fault if IL bit is set in CPSR</span>
<a name="l01091"></a>01091     <span class="keywordflow">if</span> (fault == <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>) {
<a name="l01092"></a>01092         CPSR <a class="code" href="namespaceArmISA.html#ad377bf9b9c48f8cf3e8e918e0847b1fe">cpsr</a> = tc-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a6221718f6b42d5072eb2beec580c7f69">MISCREG_CPSR</a>);
<a name="l01093"></a>01093         <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a52c06c8a54293998f3e1f71cdbd916f7">aarch64</a> &amp;&amp; is_fetch &amp;&amp; cpsr.il == 1) {
<a name="l01094"></a>01094             <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classArmISA_1_1IllegalInstSetStateFault.html" title="Illegal Instruction Set State fault (AArch64 only).">IllegalInstSetStateFault</a>();
<a name="l01095"></a>01095         }
<a name="l01096"></a>01096     }
<a name="l01097"></a>01097 
<a name="l01098"></a>01098     <span class="keywordflow">return</span> fault;
<a name="l01099"></a>01099 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab1be1538ff47c6977f901f22ba6150a0"></a><!-- doxytag: member="ArmISA::TLB::translateFunctional" ref="ab1be1538ff47c6977f901f22ba6150a0" args="(RequestPtr req, ThreadContext *tc, Mode mode, ArmTranslationType tranType=NormalTran)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">Fault</a> translateFunctional </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRequest.html">RequestPtr</a>&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08">TLB::ArmTranslationType</a>&nbsp;</td>
          <td class="paramname"> <em>tranType</em> = <code>NormalTran</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Do a functional lookup on the <a class="el" href="classArmISA_1_1TLB.html">TLB</a> (for checker cpu) that behaves like a normal lookup without modifying any page table state. </p>

<p><div class="fragment"><pre class="fragment"><a name="l01125"></a>01125 {
<a name="l01126"></a>01126     <a class="code" href="classArmISA_1_1TLB.html#a7eb66b75612ed7e8b075cd89dfd2b157">updateMiscReg</a>(tc, tranType);
<a name="l01127"></a>01127 
<a name="l01128"></a>01128     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a16c6c6799c68307c82bc6304cf0b27b4">directToStage2</a>) {
<a name="l01129"></a>01129         assert(<a class="code" href="classArmISA_1_1TLB.html#a2188cef93e9eb4ac6383c0ca4f44dc36">stage2Tlb</a>);
<a name="l01130"></a>01130         <span class="keywordflow">return</span> <a class="code" href="classArmISA_1_1TLB.html#a2188cef93e9eb4ac6383c0ca4f44dc36">stage2Tlb</a>-&gt;<a class="code" href="classArmISA_1_1TLB.html#a4871909ce80dc11f7ddffcd28214262e">translateFunctional</a>(req, tc, <a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, tranType);
<a name="l01131"></a>01131     }
<a name="l01132"></a>01132 
<a name="l01133"></a>01133     <span class="keywordtype">bool</span> delay = <span class="keyword">false</span>;
<a name="l01134"></a>01134     <a class="code" href="classRefCountingPtr.html">Fault</a> fault;
<a name="l01135"></a>01135     <span class="keywordflow">if</span> (<a class="code" href="full__system_8hh.html#af929576af6f85c8849704b66d04b8370">FullSystem</a>)
<a name="l01136"></a>01136         fault = <a class="code" href="classArmISA_1_1TLB.html#a3d876e306a41e194bda2747ea51982f8">translateFs</a>(req, tc, <a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>, delay, <span class="keyword">false</span>, tranType, <span class="keyword">true</span>);
<a name="l01137"></a>01137    <span class="keywordflow">else</span>
<a name="l01138"></a>01138         fault = <a class="code" href="classArmISA_1_1TLB.html#a6ada13dabe05b90fee0464345cf0f654">translateSe</a>(req, tc, <a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>, delay, <span class="keyword">false</span>);
<a name="l01139"></a>01139     assert(!delay);
<a name="l01140"></a>01140     <span class="keywordflow">return</span> fault;
<a name="l01141"></a>01141 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4871909ce80dc11f7ddffcd28214262e"></a><!-- doxytag: member="ArmISA::TLB::translateFunctional" ref="a4871909ce80dc11f7ddffcd28214262e" args="(ThreadContext *tc, Addr vaddr, Addr &amp;paddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool translateFunctional </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>vaddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>paddr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Do a functional lookup on the <a class="el" href="classArmISA_1_1TLB.html">TLB</a> (for debugging) and don't modify any internal state </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tc</em>&nbsp;</td><td>thread context to get the context id from </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>vaddr</em>&nbsp;</td><td>virtual address to translate </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pa</em>&nbsp;</td><td>returned physical address </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>戻り値:</b></dt><dd>if the translation was successful </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00107"></a>00107 {
<a name="l00108"></a>00108     <a class="code" href="classArmISA_1_1TLB.html#a7eb66b75612ed7e8b075cd89dfd2b157">updateMiscReg</a>(tc);
<a name="l00109"></a>00109 
<a name="l00110"></a>00110     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a16c6c6799c68307c82bc6304cf0b27b4">directToStage2</a>) {
<a name="l00111"></a>00111         assert(<a class="code" href="classArmISA_1_1TLB.html#a2188cef93e9eb4ac6383c0ca4f44dc36">stage2Tlb</a>);
<a name="l00112"></a>00112         <span class="keywordflow">return</span> <a class="code" href="classArmISA_1_1TLB.html#a2188cef93e9eb4ac6383c0ca4f44dc36">stage2Tlb</a>-&gt;<a class="code" href="classArmISA_1_1TLB.html#a4871909ce80dc11f7ddffcd28214262e">translateFunctional</a>(tc, <a class="code" href="namespaceArmISA.html#a441099e13f407fadb6bcb0447107de87">va</a>, <a class="code" href="namespaceArmISA.html#aec59a1cc2e7438586cdc39f4b30b0061">pa</a>);
<a name="l00113"></a>00113     }
<a name="l00114"></a>00114 
<a name="l00115"></a>00115     <a class="code" href="structArmISA_1_1TlbEntry.html">TlbEntry</a> *<a class="code" href="namespaceArmISA.html#a55520507919005a961edbe8b177f3bba">e</a> = <a class="code" href="classArmISA_1_1TLB.html#a16c4d359f56a027d2e6afe6af85c81e4">lookup</a>(<a class="code" href="namespaceArmISA.html#a441099e13f407fadb6bcb0447107de87">va</a>, <a class="code" href="classArmISA_1_1TLB.html#a984a2dcfd9509ab586bee117bb2a7cfb">asid</a>, <a class="code" href="classArmISA_1_1TLB.html#add293169f7f2ac526b3fa14f950cf0bb">vmid</a>, <a class="code" href="classArmISA_1_1TLB.html#a104c09577173edc4f8ce6814cc33f0ae">isHyp</a>, <a class="code" href="classArmISA_1_1TLB.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a>, <span class="keyword">true</span>, <span class="keyword">false</span>,
<a name="l00116"></a>00116                          <a class="code" href="classArmISA_1_1TLB.html#a52c06c8a54293998f3e1f71cdbd916f7">aarch64</a> ? <a class="code" href="classArmISA_1_1TLB.html#a658ce290954a428d8c5df11b8b5bd81b">aarch64EL</a> : <a class="code" href="namespaceArmISA.html#a16588a7a92eb985c3341b7f706c81dd5ab5e42aaf40f117fdce042d02976bf090">EL1</a>);
<a name="l00117"></a>00117     <span class="keywordflow">if</span> (!e)
<a name="l00118"></a>00118         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00119"></a>00119     <a class="code" href="namespaceArmISA.html#aec59a1cc2e7438586cdc39f4b30b0061">pa</a> = e-&gt;<a class="code" href="structArmISA_1_1TlbEntry.html#ad851ad4bd44e8c1ce61ad96498197de8">pAddr</a>(<a class="code" href="namespaceArmISA.html#a441099e13f407fadb6bcb0447107de87">va</a>);
<a name="l00120"></a>00120     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00121"></a>00121 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6ada13dabe05b90fee0464345cf0f654"></a><!-- doxytag: member="ArmISA::TLB::translateSe" ref="a6ada13dabe05b90fee0464345cf0f654" args="(RequestPtr req, ThreadContext *tc, Mode mode, Translation *translation, bool &amp;delay, bool timing)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">Fault</a> translateSe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRequest.html">RequestPtr</a>&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseTLB_1_1Translation.html">Translation</a> *&nbsp;</td>
          <td class="paramname"> <em>translation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&nbsp;</td>
          <td class="paramname"> <em>delay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>timing</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00536"></a>00536 {
<a name="l00537"></a>00537     <a class="code" href="classArmISA_1_1TLB.html#a7eb66b75612ed7e8b075cd89dfd2b157">updateMiscReg</a>(tc);
<a name="l00538"></a>00538     <a class="code" href="classm5_1_1params_1_1Addr.html">Addr</a> vaddr_tainted = req-&gt;<a class="code" href="classRequest.html#a68d2230b37b30d25462093fefdd813ac">getVaddr</a>();
<a name="l00539"></a>00539     <a class="code" href="classm5_1_1params_1_1Addr.html">Addr</a> <a class="code" href="namespaceMipsISA.html#ac78d9788b3f9a366df64485c9afaf1b1">vaddr</a> = 0;
<a name="l00540"></a>00540     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a52c06c8a54293998f3e1f71cdbd916f7">aarch64</a>)
<a name="l00541"></a>00541         vaddr = <a class="code" href="namespaceArmISA.html#a52481fc8af3df3627260833f83bd5a83">purifyTaggedAddr</a>(vaddr_tainted, tc, <a class="code" href="classArmISA_1_1TLB.html#a658ce290954a428d8c5df11b8b5bd81b">aarch64EL</a>);
<a name="l00542"></a>00542     <span class="keywordflow">else</span>
<a name="l00543"></a>00543         vaddr = vaddr_tainted;
<a name="l00544"></a>00544     <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="namespacem5_1_1debug.html#a9ceb38153d5c0f156fbeada6dc00ff4f">flags</a> = req-&gt;<a class="code" href="classRequest.html#a8552aa8d45c9ba10449d51ac08e7d490">getFlags</a>();
<a name="l00545"></a>00545 
<a name="l00546"></a>00546     <span class="keywordtype">bool</span> is_fetch = (<a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a> == <a class="code" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911a31b7313c05d32519f3869a3de8be95e6">Execute</a>);
<a name="l00547"></a>00547     <span class="keywordtype">bool</span> is_write = (<a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a> == <a class="code" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911aa56670174817e3fed92bfd8182d7c0d1">Write</a>);
<a name="l00548"></a>00548 
<a name="l00549"></a>00549     <span class="keywordflow">if</span> (!is_fetch) {
<a name="l00550"></a>00550         assert(flags &amp; <a class="code" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0daf6e40c9fd5825f3b3a4f2d45d4a64c68">MustBeOne</a>);
<a name="l00551"></a>00551         <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a>.a || !(flags &amp; <a class="code" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0dac6aa9917fe5880558d8ee22e2fbcbe58">AllowUnaligned</a>)) {
<a name="l00552"></a>00552             <span class="keywordflow">if</span> (vaddr &amp; <a class="code" href="namespaceArmISA.html#a9534dbda5e7db9881c7955c6e08cfdc0">mask</a>(flags &amp; <a class="code" href="classArmISA_1_1TLB.html#a1e31c6b4a233c7e98a3e85eba0c84f0da811bb3ddcc5035211e497b863db3abd0">AlignmentMask</a>)) {
<a name="l00553"></a>00553                 <span class="comment">// LPAE is always disabled in SE mode</span>
<a name="l00554"></a>00554                 <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classArmISA_1_1DataAbort.html">DataAbort</a>(vaddr_tainted,
<a name="l00555"></a>00555                         TlbEntry::DomainType::NoAccess, is_write,
<a name="l00556"></a>00556                                      <a class="code" href="classArmISA_1_1ArmFault.html#a8771a605c5b916759188c3a191bb6202a25751bcd8ec8d06a081be3218e856cc6">ArmFault::AlignmentFault</a>, <a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>,
<a name="l00557"></a>00557                                      <a class="code" href="classArmISA_1_1ArmFault.html#ad78237d6390becbe8bdf9e73979c56aeabfef4fbb52d72e0c89f660f2d501a488">ArmFault::VmsaTran</a>);
<a name="l00558"></a>00558             }
<a name="l00559"></a>00559         }
<a name="l00560"></a>00560     }
<a name="l00561"></a>00561 
<a name="l00562"></a>00562     <a class="code" href="classm5_1_1params_1_1Addr.html">Addr</a> paddr;
<a name="l00563"></a>00563     <a class="code" href="classProcess.html">Process</a> *<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a> = tc-&gt;<a class="code" href="classThreadContext.html#a8725d0e5dce89a4a086c7de4bb9d4454">getProcessPtr</a>();
<a name="l00564"></a>00564 
<a name="l00565"></a>00565     <span class="keywordflow">if</span> (!p-&gt;<a class="code" href="classProcess.html#ad14ffa23ad731f6003755b643f999049">pTable</a>-&gt;<a class="code" href="classPageTable.html#a1fa58423b982a3454aadc9b5e932e9ed">translate</a>(vaddr, paddr))
<a name="l00566"></a>00566         <span class="keywordflow">return</span> <a class="code" href="base_2types_8hh.html#a79b31ca450eaa665c335a928cb98b834">Fault</a>(<span class="keyword">new</span> <a class="code" href="classGenericPageTableFault.html">GenericPageTableFault</a>(vaddr_tainted));
<a name="l00567"></a>00567     req-&gt;<a class="code" href="classRequest.html#a688b841276b48f5c420569e62a090130">setPaddr</a>(paddr);
<a name="l00568"></a>00568 
<a name="l00569"></a>00569     <span class="keywordflow">return</span> <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00570"></a>00570 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aece4eb62debdc9703b211d68ce771521"></a><!-- doxytag: member="ArmISA::TLB::translateTiming" ref="aece4eb62debdc9703b211d68ce771521" args="(RequestPtr req, ThreadContext *tc, Translation *translation, Mode mode, ArmTranslationType tranType=NormalTran)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">Fault</a> translateTiming </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRequest.html">RequestPtr</a>&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseTLB_1_1Translation.html">Translation</a> *&nbsp;</td>
          <td class="paramname"> <em>translation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08">TLB::ArmTranslationType</a>&nbsp;</td>
          <td class="paramname"> <em>tranType</em> = <code>NormalTran</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l01146"></a>01146 {
<a name="l01147"></a>01147     <a class="code" href="classArmISA_1_1TLB.html#a7eb66b75612ed7e8b075cd89dfd2b157">updateMiscReg</a>(tc, tranType);
<a name="l01148"></a>01148 
<a name="l01149"></a>01149     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a16c6c6799c68307c82bc6304cf0b27b4">directToStage2</a>) {
<a name="l01150"></a>01150         assert(<a class="code" href="classArmISA_1_1TLB.html#a2188cef93e9eb4ac6383c0ca4f44dc36">stage2Tlb</a>);
<a name="l01151"></a>01151         <span class="keywordflow">return</span> <a class="code" href="classArmISA_1_1TLB.html#a2188cef93e9eb4ac6383c0ca4f44dc36">stage2Tlb</a>-&gt;<a class="code" href="classArmISA_1_1TLB.html#aece4eb62debdc9703b211d68ce771521">translateTiming</a>(req, tc, translation, <a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, tranType);
<a name="l01152"></a>01152     }
<a name="l01153"></a>01153 
<a name="l01154"></a>01154     assert(translation);
<a name="l01155"></a>01155 
<a name="l01156"></a>01156     <span class="keywordflow">return</span> <a class="code" href="classArmISA_1_1TLB.html#adc8f6be2e370d6ce03ae8044ff6f8709">translateComplete</a>(req, tc, translation, <a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a>, tranType, <a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>);
<a name="l01157"></a>01157 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa14d4829f5c7bce966547df0babb7487"></a><!-- doxytag: member="ArmISA::TLB::trickBoxCheck" ref="aa14d4829f5c7bce966547df0babb7487" args="(RequestPtr req, Mode mode, TlbEntry::DomainType domain)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">Fault</a> trickBoxCheck </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRequest.html">RequestPtr</a>&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseTLB.html#a46c8a310cf4c094f8c80e1cb8dc1f911">Mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structArmISA_1_1TlbEntry.html#a0595b41cfb7d03f18438f9c355a3469d">TlbEntry::DomainType</a>&nbsp;</td>
          <td class="paramname"> <em>domain</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00574"></a>00574 {
<a name="l00575"></a>00575     <span class="keywordflow">return</span> <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00576"></a>00576 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af22e5d6d660b97db37003ac61ac4ee49"></a><!-- doxytag: member="ArmISA::TLB::unserialize" ref="af22e5d6d660b97db37003ac61ac4ee49" args="(Checkpoint *cp, const std::string &amp;section)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void unserialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCheckpoint.html">Checkpoint</a> *&nbsp;</td>
          <td class="paramname"> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>section</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classSerializable.html#af100c4e9feabf3cd918619c88c718387">Serializable</a>を再定義しています。</p>

</div>
</div>
<a class="anchor" id="a7eb66b75612ed7e8b075cd89dfd2b157"></a><!-- doxytag: member="ArmISA::TLB::updateMiscReg" ref="a7eb66b75612ed7e8b075cd89dfd2b157" args="(ThreadContext *tc, ArmTranslationType tranType=NormalTran)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateMiscReg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08">ArmTranslationType</a>&nbsp;</td>
          <td class="paramname"> <em>tranType</em> = <code>NormalTran</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l01201"></a>01201 {
<a name="l01202"></a>01202     <span class="comment">// check if the regs have changed, or the translation mode is different.</span>
<a name="l01203"></a>01203     <span class="comment">// NOTE: the tran type doesn&apos;t affect stage 2 TLB&apos;s as they only handle</span>
<a name="l01204"></a>01204     <span class="comment">// one type of translation anyway</span>
<a name="l01205"></a>01205     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#ab11476fda4a6785ee0b6096e2e50f30c">miscRegValid</a> &amp;&amp; ((tranType == <a class="code" href="classArmISA_1_1TLB.html#a23a689868acc5917efd41d7477757059">curTranType</a>) || <a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a>)) {
<a name="l01206"></a>01206         <span class="keywordflow">return</span>;
<a name="l01207"></a>01207     }
<a name="l01208"></a>01208 
<a name="l01209"></a>01209     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(TLBVerbose, <span class="stringliteral">&quot;TLB variables changed!\n&quot;</span>);
<a name="l01210"></a>01210     CPSR <a class="code" href="namespaceArmISA.html#ad377bf9b9c48f8cf3e8e918e0847b1fe">cpsr</a> = tc-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a6221718f6b42d5072eb2beec580c7f69">MISCREG_CPSR</a>);
<a name="l01211"></a>01211     <span class="comment">// Dependencies: SCR/SCR_EL3, CPSR</span>
<a name="l01212"></a>01212     <a class="code" href="classArmISA_1_1TLB.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a>  = <a class="code" href="namespaceArmISA.html#abed19d0288e553ad67d221ac6a16a801">inSecureState</a>(tc);
<a name="l01213"></a>01213     <a class="code" href="classArmISA_1_1TLB.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a> &amp;= (tranType &amp; <a class="code" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08ae447e872ded0e6da22f91d2ccaf66afd">HypMode</a>)    == 0;
<a name="l01214"></a>01214     <a class="code" href="classArmISA_1_1TLB.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a> &amp;= (tranType &amp; <a class="code" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08ab8e7d202ad511f74c201e2bca94e83d6">S1S2NsTran</a>) == 0;
<a name="l01215"></a>01215     <a class="code" href="classArmISA_1_1TLB.html#a52c06c8a54293998f3e1f71cdbd916f7">aarch64</a> = !cpsr.width;
<a name="l01216"></a>01216     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a52c06c8a54293998f3e1f71cdbd916f7">aarch64</a>) {  <span class="comment">// AArch64</span>
<a name="l01217"></a>01217         <a class="code" href="classArmISA_1_1TLB.html#a658ce290954a428d8c5df11b8b5bd81b">aarch64EL</a> = (<a class="code" href="namespaceArmISA.html#a16588a7a92eb985c3341b7f706c81dd5">ExceptionLevel</a>) (uint8_t) cpsr.el;
<a name="l01218"></a>01218         <span class="keywordflow">switch</span> (<a class="code" href="classArmISA_1_1TLB.html#a658ce290954a428d8c5df11b8b5bd81b">aarch64EL</a>) {
<a name="l01219"></a>01219           <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a16588a7a92eb985c3341b7f706c81dd5a1808d294e1d965cd8d1a3060e2f411ef">EL0</a>:
<a name="l01220"></a>01220           <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a16588a7a92eb985c3341b7f706c81dd5ab5e42aaf40f117fdce042d02976bf090">EL1</a>:
<a name="l01221"></a>01221             {
<a name="l01222"></a>01222                 <a class="code" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a> = tc-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a1a506d32b88375eba1e5b6441a03deee">MISCREG_SCTLR_EL1</a>);
<a name="l01223"></a>01223                 <a class="code" href="classArmISA_1_1TLB.html#ad6762be565087b4bfb87f5bcb42673e7">ttbcr</a> = tc-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67aeab19dfbe4749ed1d0ef5e502fcdece3">MISCREG_TCR_EL1</a>);
<a name="l01224"></a>01224                 uint64_t ttbr_asid = <a class="code" href="classArmISA_1_1TLB.html#ad6762be565087b4bfb87f5bcb42673e7">ttbcr</a>.a1 ?
<a name="l01225"></a>01225                     tc-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67ab1e490523d083a21f2b740b450a650d6">MISCREG_TTBR1_EL1</a>) :
<a name="l01226"></a>01226                     tc-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67ab061e5a58c89419b5e5e4044bac12532">MISCREG_TTBR0_EL1</a>);
<a name="l01227"></a>01227                 <a class="code" href="classArmISA_1_1TLB.html#a984a2dcfd9509ab586bee117bb2a7cfb">asid</a> = <a class="code" href="bitfield_8hh.html#a4ee0dc0723e11679c52429d5f8e05123">bits</a>(ttbr_asid,
<a name="l01228"></a>01228                             (<a class="code" href="classArmISA_1_1TLB.html#a3aea18414c83c86fa366401cb767e7ab">haveLargeAsid64</a> &amp;&amp; <a class="code" href="classArmISA_1_1TLB.html#ad6762be565087b4bfb87f5bcb42673e7">ttbcr</a>.as) ? 63 : 55, 48);
<a name="l01229"></a>01229             }
<a name="l01230"></a>01230             <span class="keywordflow">break</span>;
<a name="l01231"></a>01231           <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a16588a7a92eb985c3341b7f706c81dd5a5f6f6ced63893d592951c91f7489857f">EL2</a>:
<a name="l01232"></a>01232             <a class="code" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a> = tc-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67ac30002b3b9977e6534748b61a91ede10">MISCREG_SCTLR_EL2</a>);
<a name="l01233"></a>01233             <a class="code" href="classArmISA_1_1TLB.html#ad6762be565087b4bfb87f5bcb42673e7">ttbcr</a> = tc-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a5fadadb14cafd82fdbb1e6a06a96876a">MISCREG_TCR_EL2</a>);
<a name="l01234"></a>01234             <a class="code" href="classArmISA_1_1TLB.html#a984a2dcfd9509ab586bee117bb2a7cfb">asid</a> = -1;
<a name="l01235"></a>01235             <span class="keywordflow">break</span>;
<a name="l01236"></a>01236           <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a16588a7a92eb985c3341b7f706c81dd5a44bf3e9d5387a706bdc96b1ec9a2fc15">EL3</a>:
<a name="l01237"></a>01237             <a class="code" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a> = tc-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67ada649d9bf9edebc6d6987cd11e43312c">MISCREG_SCTLR_EL3</a>);
<a name="l01238"></a>01238             <a class="code" href="classArmISA_1_1TLB.html#ad6762be565087b4bfb87f5bcb42673e7">ttbcr</a> = tc-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a2f6ba1cbb6b8d7df1e2cad05d59605d4">MISCREG_TCR_EL3</a>);
<a name="l01239"></a>01239             <a class="code" href="classArmISA_1_1TLB.html#a984a2dcfd9509ab586bee117bb2a7cfb">asid</a> = -1;
<a name="l01240"></a>01240             <span class="keywordflow">break</span>;
<a name="l01241"></a>01241         }
<a name="l01242"></a>01242         <a class="code" href="classArmISA_1_1TLB.html#ace0bf26677706ecff809bd4c76d33c8c">scr</a> = tc-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a959fccb90767dd79eb8a7240b84aceae">MISCREG_SCR_EL3</a>);
<a name="l01243"></a>01243         <a class="code" href="classArmISA_1_1TLB.html#ae5a4adef864b3b2b23001750a8a89499">isPriv</a> = <a class="code" href="classArmISA_1_1TLB.html#a658ce290954a428d8c5df11b8b5bd81b">aarch64EL</a> != <a class="code" href="namespaceArmISA.html#a16588a7a92eb985c3341b7f706c81dd5a1808d294e1d965cd8d1a3060e2f411ef">EL0</a>;
<a name="l01244"></a>01244         <span class="comment">// @todo: modify this behaviour to support Virtualization in</span>
<a name="l01245"></a>01245         <span class="comment">// AArch64</span>
<a name="l01246"></a>01246         <a class="code" href="classArmISA_1_1TLB.html#add293169f7f2ac526b3fa14f950cf0bb">vmid</a>           = 0;
<a name="l01247"></a>01247         <a class="code" href="classArmISA_1_1TLB.html#a104c09577173edc4f8ce6814cc33f0ae">isHyp</a>          = <span class="keyword">false</span>;
<a name="l01248"></a>01248         <a class="code" href="classArmISA_1_1TLB.html#a16c6c6799c68307c82bc6304cf0b27b4">directToStage2</a> = <span class="keyword">false</span>;
<a name="l01249"></a>01249         <a class="code" href="classArmISA_1_1TLB.html#a52120124577a3b7c28a4e8876cd36a8b">stage2Req</a>      = <span class="keyword">false</span>;
<a name="l01250"></a>01250     } <span class="keywordflow">else</span> {  <span class="comment">// AArch32</span>
<a name="l01251"></a>01251         <a class="code" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a>  = tc-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a939d9e820fe2a05cb16413fe88dc1887">flattenMiscRegNsBanked</a>(<a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a6ccaca13fd4f971f5d736c2abab6bb2e">MISCREG_SCTLR</a>, tc,
<a name="l01252"></a>01252                                  !<a class="code" href="classArmISA_1_1TLB.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a>));
<a name="l01253"></a>01253         <a class="code" href="classArmISA_1_1TLB.html#ad6762be565087b4bfb87f5bcb42673e7">ttbcr</a>  = tc-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a939d9e820fe2a05cb16413fe88dc1887">flattenMiscRegNsBanked</a>(<a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a713784be56a50e1dd69613088bb6af38">MISCREG_TTBCR</a>, tc,
<a name="l01254"></a>01254                                  !<a class="code" href="classArmISA_1_1TLB.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a>));
<a name="l01255"></a>01255         <a class="code" href="classArmISA_1_1TLB.html#ace0bf26677706ecff809bd4c76d33c8c">scr</a>    = tc-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67ab3096cc264b16a71ae70d458b5cd041d">MISCREG_SCR</a>);
<a name="l01256"></a>01256         <a class="code" href="classArmISA_1_1TLB.html#ae5a4adef864b3b2b23001750a8a89499">isPriv</a> = cpsr.mode != <a class="code" href="namespaceArmISA.html#ae306b3353ed3d62bb2e6de130b3c9eaaa06c431ef2d3daa0430be10958afb75da">MODE_USER</a>;
<a name="l01257"></a>01257         <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a8e8469d916956ca8b9052ebd6f155e0b">haveLPAE</a> &amp;&amp; <a class="code" href="classArmISA_1_1TLB.html#ad6762be565087b4bfb87f5bcb42673e7">ttbcr</a>.eae) {
<a name="l01258"></a>01258             <span class="comment">// Long-descriptor translation table format in use</span>
<a name="l01259"></a>01259             uint64_t ttbr_asid = tc-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(
<a name="l01260"></a>01260                 <a class="code" href="namespaceArmISA.html#a939d9e820fe2a05cb16413fe88dc1887">flattenMiscRegNsBanked</a>(<a class="code" href="classArmISA_1_1TLB.html#ad6762be565087b4bfb87f5bcb42673e7">ttbcr</a>.a1 ? <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a8fcade2139fd8facbbeefb69cc2ad774">MISCREG_TTBR1</a>
<a name="l01261"></a>01261                                                 : <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67af04fed84f7396af659248bb67d59cf57">MISCREG_TTBR0</a>,
<a name="l01262"></a>01262                                        tc, !<a class="code" href="classArmISA_1_1TLB.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a>));
<a name="l01263"></a>01263             <a class="code" href="classArmISA_1_1TLB.html#a984a2dcfd9509ab586bee117bb2a7cfb">asid</a> = <a class="code" href="bitfield_8hh.html#a4ee0dc0723e11679c52429d5f8e05123">bits</a>(ttbr_asid, 55, 48);
<a name="l01264"></a>01264         } <span class="keywordflow">else</span> {
<a name="l01265"></a>01265             <span class="comment">// Short-descriptor translation table format in use</span>
<a name="l01266"></a>01266             CONTEXTIDR context_id = tc-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a939d9e820fe2a05cb16413fe88dc1887">flattenMiscRegNsBanked</a>(
<a name="l01267"></a>01267                 <a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67ad2bf83e3a715dbd9e341d6bb4bbffbc4">MISCREG_CONTEXTIDR</a>, tc,!<a class="code" href="classArmISA_1_1TLB.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a>));
<a name="l01268"></a>01268             <a class="code" href="classArmISA_1_1TLB.html#a984a2dcfd9509ab586bee117bb2a7cfb">asid</a> = context_id.asid;
<a name="l01269"></a>01269         }
<a name="l01270"></a>01270         <a class="code" href="classArmISA_1_1TLB.html#a06fc88abc8a8aa441c512ebb7531b3d7">prrr</a> = tc-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a939d9e820fe2a05cb16413fe88dc1887">flattenMiscRegNsBanked</a>(<a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a2dd4330c32e639766e4084a25bed61fd">MISCREG_PRRR</a>, tc,
<a name="l01271"></a>01271                                !<a class="code" href="classArmISA_1_1TLB.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a>));
<a name="l01272"></a>01272         <a class="code" href="classArmISA_1_1TLB.html#a763ad3cda6c2782d46835a3b2c4b5515">nmrr</a> = tc-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a939d9e820fe2a05cb16413fe88dc1887">flattenMiscRegNsBanked</a>(<a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a6fb4be4fd646a683f615c3bb4925fc01">MISCREG_NMRR</a>, tc,
<a name="l01273"></a>01273                                !<a class="code" href="classArmISA_1_1TLB.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a>));
<a name="l01274"></a>01274         <a class="code" href="classArmISA_1_1TLB.html#a9d6f500564b7a3bf1ded6bc18b3d47db">dacr</a> = tc-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a939d9e820fe2a05cb16413fe88dc1887">flattenMiscRegNsBanked</a>(<a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a7d640adce7082fc893e6336620055d17">MISCREG_DACR</a>, tc,
<a name="l01275"></a>01275                                !<a class="code" href="classArmISA_1_1TLB.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a>));
<a name="l01276"></a>01276         <a class="code" href="classArmISA_1_1TLB.html#ad0d8df2e2be956266458221c23763b4c">hcr</a>  = tc-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a0ace8ce99b1d3c9ac0a0046e0d3db777">MISCREG_HCR</a>);
<a name="l01277"></a>01277 
<a name="l01278"></a>01278         <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1TLB.html#a48e6871d9ab14ff31b50307f0c617f95">haveVirtualization</a>) {
<a name="l01279"></a>01279             <a class="code" href="classArmISA_1_1TLB.html#add293169f7f2ac526b3fa14f950cf0bb">vmid</a>   = <a class="code" href="bitfield_8hh.html#a4ee0dc0723e11679c52429d5f8e05123">bits</a>(tc-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67ac9524cc0611872d06658233eba2df7a4">MISCREG_VTTBR</a>), 55, 48);
<a name="l01280"></a>01280             <a class="code" href="classArmISA_1_1TLB.html#a104c09577173edc4f8ce6814cc33f0ae">isHyp</a>  = cpsr.mode == <a class="code" href="namespaceArmISA.html#ae306b3353ed3d62bb2e6de130b3c9eaaa1978fe9b066f3cfc8ad44f06e8a0e199">MODE_HYP</a>;
<a name="l01281"></a>01281             isHyp |=  tranType &amp; <a class="code" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08ae447e872ded0e6da22f91d2ccaf66afd">HypMode</a>;
<a name="l01282"></a>01282             isHyp &amp;= (tranType &amp; <a class="code" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08ab8e7d202ad511f74c201e2bca94e83d6">S1S2NsTran</a>) == 0;
<a name="l01283"></a>01283             isHyp &amp;= (tranType &amp; <a class="code" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08a4ed07d4f5bb408945e5f4e9c7333b2d3">S1CTran</a>)    == 0;
<a name="l01284"></a>01284             <span class="keywordflow">if</span> (isHyp) {
<a name="l01285"></a>01285                 <a class="code" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a> = tc-&gt;<a class="code" href="classThreadContext.html#a6888f4bff21e34892e59654ea80073b2">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a1e522017e015d4c7efd6b2360143aa67a1547cf304321d67fede66b1d567f2d83">MISCREG_HSCTLR</a>);
<a name="l01286"></a>01286             }
<a name="l01287"></a>01287             <span class="comment">// Work out if we should skip the first stage of translation and go</span>
<a name="l01288"></a>01288             <span class="comment">// directly to stage 2. This value is cached so we don&apos;t have to</span>
<a name="l01289"></a>01289             <span class="comment">// compute it for every translation.</span>
<a name="l01290"></a>01290             <a class="code" href="classArmISA_1_1TLB.html#a52120124577a3b7c28a4e8876cd36a8b">stage2Req</a>      = <a class="code" href="classArmISA_1_1TLB.html#ad0d8df2e2be956266458221c23763b4c">hcr</a>.vm &amp;&amp; !<a class="code" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a> &amp;&amp; !isHyp &amp;&amp; !<a class="code" href="classArmISA_1_1TLB.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a> &amp;&amp;
<a name="l01291"></a>01291                              !(tranType &amp; <a class="code" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08a4ed07d4f5bb408945e5f4e9c7333b2d3">S1CTran</a>);
<a name="l01292"></a>01292             <a class="code" href="classArmISA_1_1TLB.html#a16c6c6799c68307c82bc6304cf0b27b4">directToStage2</a> = <a class="code" href="classArmISA_1_1TLB.html#a52120124577a3b7c28a4e8876cd36a8b">stage2Req</a> &amp;&amp; !<a class="code" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a>.m;
<a name="l01293"></a>01293         } <span class="keywordflow">else</span> {
<a name="l01294"></a>01294             <a class="code" href="classArmISA_1_1TLB.html#add293169f7f2ac526b3fa14f950cf0bb">vmid</a>           = 0;
<a name="l01295"></a>01295             <a class="code" href="classArmISA_1_1TLB.html#a52120124577a3b7c28a4e8876cd36a8b">stage2Req</a>      = <span class="keyword">false</span>;
<a name="l01296"></a>01296             isHyp          = <span class="keyword">false</span>;
<a name="l01297"></a>01297             <a class="code" href="classArmISA_1_1TLB.html#a16c6c6799c68307c82bc6304cf0b27b4">directToStage2</a> = <span class="keyword">false</span>;
<a name="l01298"></a>01298         }
<a name="l01299"></a>01299     }
<a name="l01300"></a>01300     <a class="code" href="classArmISA_1_1TLB.html#ab11476fda4a6785ee0b6096e2e50f30c">miscRegValid</a> = <span class="keyword">true</span>;
<a name="l01301"></a>01301     <a class="code" href="classArmISA_1_1TLB.html#a23a689868acc5917efd41d7477757059">curTranType</a>  = tranType;
<a name="l01302"></a>01302 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3e576c3e0d39dfca708baea44ebf0617"></a><!-- doxytag: member="ArmISA::TLB::validVirtualAddress" ref="a3e576c3e0d39dfca708baea44ebf0617" args="(Addr vaddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool validVirtualAddress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>vaddr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a19bf31f32ec6125d85acc1feeee28e47"></a><!-- doxytag: member="ArmISA::TLB::walkTrickBoxCheck" ref="a19bf31f32ec6125d85acc1feeee28e47" args="(Addr pa, bool is_secure, Addr va, Addr sz, bool is_exec, bool is_write, TlbEntry::DomainType domain, LookupLevel lookup_level)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">Fault</a> walkTrickBoxCheck </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>pa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>is_secure</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>va</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classm5_1_1params_1_1Addr.html">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>sz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>is_exec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>is_write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structArmISA_1_1TlbEntry.html#a0595b41cfb7d03f18438f9c355a3469d">TlbEntry::DomainType</a>&nbsp;</td>
          <td class="paramname"> <em>domain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceArmISA.html#aefa4213b348e38ee69f2a6109563a7bd">LookupLevel</a>&nbsp;</td>
          <td class="paramname"> <em>lookup_level</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00581"></a>00581 {
<a name="l00582"></a>00582     <span class="keywordflow">return</span> <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00583"></a>00583 }
</pre></div></p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="a89972e483f89fb3a1694154f97ce2d9d"></a><!-- doxytag: member="ArmISA::TLB::_attr" ref="a89972e483f89fb3a1694154f97ce2d9d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="classArmISA_1_1TLB.html#a89972e483f89fb3a1694154f97ce2d9d">_attr</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a52c06c8a54293998f3e1f71cdbd916f7"></a><!-- doxytag: member="ArmISA::TLB::aarch64" ref="a52c06c8a54293998f3e1f71cdbd916f7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classArmISA_1_1TLB.html#a52c06c8a54293998f3e1f71cdbd916f7">aarch64</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a658ce290954a428d8c5df11b8b5bd81b"></a><!-- doxytag: member="ArmISA::TLB::aarch64EL" ref="a658ce290954a428d8c5df11b8b5bd81b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceArmISA.html#a16588a7a92eb985c3341b7f706c81dd5">ExceptionLevel</a> <a class="el" href="classArmISA_1_1TLB.html#a658ce290954a428d8c5df11b8b5bd81b">aarch64EL</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1929e1032289676f78e07e4c6bc55369"></a><!-- doxytag: member="ArmISA::TLB::accesses" ref="a1929e1032289676f78e07e4c6bc55369" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Formula.html">Stats::Formula</a> <a class="el" href="classArmISA_1_1TLB.html#a1929e1032289676f78e07e4c6bc55369">accesses</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aaafbdf0bc49ea504814d314b5f51d47e"></a><!-- doxytag: member="ArmISA::TLB::alignFaults" ref="aaafbdf0bc49ea504814d314b5f51d47e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classArmISA_1_1TLB.html#aaafbdf0bc49ea504814d314b5f51d47e">alignFaults</a><code> [mutable, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a984a2dcfd9509ab586bee117bb2a7cfb"></a><!-- doxytag: member="ArmISA::TLB::asid" ref="a984a2dcfd9509ab586bee117bb2a7cfb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t <a class="el" href="classArmISA_1_1TLB.html#a984a2dcfd9509ab586bee117bb2a7cfb">asid</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2ebef8e3741ddc1169a0a05e6a48052e"></a><!-- doxytag: member="ArmISA::TLB::bootUncacheability" ref="a2ebef8e3741ddc1169a0a05e6a48052e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classArmISA_1_1TLB.html#a2ebef8e3741ddc1169a0a05e6a48052e">bootUncacheability</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a23a689868acc5917efd41d7477757059"></a><!-- doxytag: member="ArmISA::TLB::curTranType" ref="a23a689868acc5917efd41d7477757059" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classArmISA_1_1TLB.html#ad6f5d480df151d5bddeefc6271793f08">ArmTranslationType</a> <a class="el" href="classArmISA_1_1TLB.html#a23a689868acc5917efd41d7477757059">curTranType</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9d6f500564b7a3bf1ded6bc18b3d47db"></a><!-- doxytag: member="ArmISA::TLB::dacr" ref="a9d6f500564b7a3bf1ded6bc18b3d47db" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="classArmISA_1_1TLB.html#a9d6f500564b7a3bf1ded6bc18b3d47db">dacr</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a16c6c6799c68307c82bc6304cf0b27b4"></a><!-- doxytag: member="ArmISA::TLB::directToStage2" ref="a16c6c6799c68307c82bc6304cf0b27b4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classArmISA_1_1TLB.html#a16c6c6799c68307c82bc6304cf0b27b4">directToStage2</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a718b0dd709705b2b6cbf1c5e33c387fd"></a><!-- doxytag: member="ArmISA::TLB::domainFaults" ref="a718b0dd709705b2b6cbf1c5e33c387fd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classArmISA_1_1TLB.html#a718b0dd709705b2b6cbf1c5e33c387fd">domainFaults</a><code> [mutable, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad4c80b0aa999ae0403e2ffbc9a217aaa"></a><!-- doxytag: member="ArmISA::TLB::flushedEntries" ref="ad4c80b0aa999ae0403e2ffbc9a217aaa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classArmISA_1_1TLB.html#ad4c80b0aa999ae0403e2ffbc9a217aaa">flushedEntries</a><code> [mutable, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a14429a278d32a87d27c0d9df47269a12"></a><!-- doxytag: member="ArmISA::TLB::flushTlb" ref="a14429a278d32a87d27c0d9df47269a12" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classArmISA_1_1TLB.html#a14429a278d32a87d27c0d9df47269a12">flushTlb</a><code> [mutable, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a678e74ffba8318815627ae109f96b17e"></a><!-- doxytag: member="ArmISA::TLB::flushTlbAsid" ref="a678e74ffba8318815627ae109f96b17e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classArmISA_1_1TLB.html#a678e74ffba8318815627ae109f96b17e">flushTlbAsid</a><code> [mutable, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="af504265daaa5a177333d30804fba83a8"></a><!-- doxytag: member="ArmISA::TLB::flushTlbMva" ref="af504265daaa5a177333d30804fba83a8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classArmISA_1_1TLB.html#af504265daaa5a177333d30804fba83a8">flushTlbMva</a><code> [mutable, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a94bc002df9a21796ac29c74bc3ef8240"></a><!-- doxytag: member="ArmISA::TLB::flushTlbMvaAsid" ref="a94bc002df9a21796ac29c74bc3ef8240" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classArmISA_1_1TLB.html#a94bc002df9a21796ac29c74bc3ef8240">flushTlbMvaAsid</a><code> [mutable, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3aea18414c83c86fa366401cb767e7ab"></a><!-- doxytag: member="ArmISA::TLB::haveLargeAsid64" ref="a3aea18414c83c86fa366401cb767e7ab" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classArmISA_1_1TLB.html#a3aea18414c83c86fa366401cb767e7ab">haveLargeAsid64</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8e8469d916956ca8b9052ebd6f155e0b"></a><!-- doxytag: member="ArmISA::TLB::haveLPAE" ref="a8e8469d916956ca8b9052ebd6f155e0b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classArmISA_1_1TLB.html#a8e8469d916956ca8b9052ebd6f155e0b">haveLPAE</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a48e6871d9ab14ff31b50307f0c617f95"></a><!-- doxytag: member="ArmISA::TLB::haveVirtualization" ref="a48e6871d9ab14ff31b50307f0c617f95" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classArmISA_1_1TLB.html#a48e6871d9ab14ff31b50307f0c617f95">haveVirtualization</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad0d8df2e2be956266458221c23763b4c"></a><!-- doxytag: member="ArmISA::TLB::hcr" ref="ad0d8df2e2be956266458221c23763b4c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HCR <a class="el" href="classArmISA_1_1TLB.html#ad0d8df2e2be956266458221c23763b4c">hcr</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a224eed77bfb7a27359c9c3c1acbdbfaa"></a><!-- doxytag: member="ArmISA::TLB::hits" ref="a224eed77bfb7a27359c9c3c1acbdbfaa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Formula.html">Stats::Formula</a> <a class="el" href="classArmISA_1_1TLB.html#a224eed77bfb7a27359c9c3c1acbdbfaa">hits</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a98ccf1b183bddae403b637838f23fa49"></a><!-- doxytag: member="ArmISA::TLB::inserts" ref="a98ccf1b183bddae403b637838f23fa49" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classArmISA_1_1TLB.html#a98ccf1b183bddae403b637838f23fa49">inserts</a><code> [mutable, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a7268909f031909e2eab6994aa6406ae4"></a><!-- doxytag: member="ArmISA::TLB::instAccesses" ref="a7268909f031909e2eab6994aa6406ae4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Formula.html">Stats::Formula</a> <a class="el" href="classArmISA_1_1TLB.html#a7268909f031909e2eab6994aa6406ae4">instAccesses</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a6f516f4695aa8bb85a9a52e395689e1a"></a><!-- doxytag: member="ArmISA::TLB::instHits" ref="a6f516f4695aa8bb85a9a52e395689e1a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classArmISA_1_1TLB.html#a6f516f4695aa8bb85a9a52e395689e1a">instHits</a><code> [mutable, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae63ad13cb56fbd34a91d2093deaafad2"></a><!-- doxytag: member="ArmISA::TLB::instMisses" ref="ae63ad13cb56fbd34a91d2093deaafad2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classArmISA_1_1TLB.html#ae63ad13cb56fbd34a91d2093deaafad2">instMisses</a><code> [mutable, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a104c09577173edc4f8ce6814cc33f0ae"></a><!-- doxytag: member="ArmISA::TLB::isHyp" ref="a104c09577173edc4f8ce6814cc33f0ae" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classArmISA_1_1TLB.html#a104c09577173edc4f8ce6814cc33f0ae">isHyp</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae5a4adef864b3b2b23001750a8a89499"></a><!-- doxytag: member="ArmISA::TLB::isPriv" ref="ae5a4adef864b3b2b23001750a8a89499" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classArmISA_1_1TLB.html#ae5a4adef864b3b2b23001750a8a89499">isPriv</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a62bc84f4251f16cf0cfa0f8d96e00c37"></a><!-- doxytag: member="ArmISA::TLB::isSecure" ref="a62bc84f4251f16cf0cfa0f8d96e00c37" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classArmISA_1_1TLB.html#a62bc84f4251f16cf0cfa0f8d96e00c37">isSecure</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a07545f2ccf0498cfe71558779680f062"></a><!-- doxytag: member="ArmISA::TLB::isStage2" ref="a07545f2ccf0498cfe71558779680f062" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classArmISA_1_1TLB.html#a07545f2ccf0498cfe71558779680f062">isStage2</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab11476fda4a6785ee0b6096e2e50f30c"></a><!-- doxytag: member="ArmISA::TLB::miscRegValid" ref="ab11476fda4a6785ee0b6096e2e50f30c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classArmISA_1_1TLB.html#ab11476fda4a6785ee0b6096e2e50f30c">miscRegValid</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4b8b96257f1e97cd5730673f38f9571c"></a><!-- doxytag: member="ArmISA::TLB::misses" ref="a4b8b96257f1e97cd5730673f38f9571c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Formula.html">Stats::Formula</a> <a class="el" href="classArmISA_1_1TLB.html#a4b8b96257f1e97cd5730673f38f9571c">misses</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a763ad3cda6c2782d46835a3b2c4b5515"></a><!-- doxytag: member="ArmISA::TLB::nmrr" ref="a763ad3cda6c2782d46835a3b2c4b5515" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NMRR <a class="el" href="classArmISA_1_1TLB.html#a763ad3cda6c2782d46835a3b2c4b5515">nmrr</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a95307396029ef99d258ca5284cd8b284"></a><!-- doxytag: member="ArmISA::TLB::permsFaults" ref="a95307396029ef99d258ca5284cd8b284" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classArmISA_1_1TLB.html#a95307396029ef99d258ca5284cd8b284">permsFaults</a><code> [mutable, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8d76399ea2182eaf505e54da078f5202"></a><!-- doxytag: member="ArmISA::TLB::prefetchFaults" ref="a8d76399ea2182eaf505e54da078f5202" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classArmISA_1_1TLB.html#a8d76399ea2182eaf505e54da078f5202">prefetchFaults</a><code> [mutable, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a06fc88abc8a8aa441c512ebb7531b3d7"></a><!-- doxytag: member="ArmISA::TLB::prrr" ref="a06fc88abc8a8aa441c512ebb7531b3d7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PRRR <a class="el" href="classArmISA_1_1TLB.html#a06fc88abc8a8aa441c512ebb7531b3d7">prrr</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a7450c3dc2cffd22401a23ddc29b0c036"></a><!-- doxytag: member="ArmISA::TLB::rangeMRU" ref="a7450c3dc2cffd22401a23ddc29b0c036" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classArmISA_1_1TLB.html#a7450c3dc2cffd22401a23ddc29b0c036">rangeMRU</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1ebd2c58048a00cc55442a58e6782f35"></a><!-- doxytag: member="ArmISA::TLB::readAccesses" ref="a1ebd2c58048a00cc55442a58e6782f35" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Formula.html">Stats::Formula</a> <a class="el" href="classArmISA_1_1TLB.html#a1ebd2c58048a00cc55442a58e6782f35">readAccesses</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a36a79efeb718e4de41970178013dac63"></a><!-- doxytag: member="ArmISA::TLB::readHits" ref="a36a79efeb718e4de41970178013dac63" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classArmISA_1_1TLB.html#a36a79efeb718e4de41970178013dac63">readHits</a><code> [mutable, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a262cd06e148f8dd362b73ee2a8c87ce0"></a><!-- doxytag: member="ArmISA::TLB::readMisses" ref="a262cd06e148f8dd362b73ee2a8c87ce0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classArmISA_1_1TLB.html#a262cd06e148f8dd362b73ee2a8c87ce0">readMisses</a><code> [mutable, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ace0bf26677706ecff809bd4c76d33c8c"></a><!-- doxytag: member="ArmISA::TLB::scr" ref="ace0bf26677706ecff809bd4c76d33c8c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SCR <a class="el" href="classArmISA_1_1TLB.html#ace0bf26677706ecff809bd4c76d33c8c">scr</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a43c4d132ca97c6cc5358f7be3c2b5a69"></a><!-- doxytag: member="ArmISA::TLB::sctlr" ref="a43c4d132ca97c6cc5358f7be3c2b5a69" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SCTLR <a class="el" href="classArmISA_1_1TLB.html#a43c4d132ca97c6cc5358f7be3c2b5a69">sctlr</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a439227feff9d7f55384e8780cfc2eb82"></a><!-- doxytag: member="ArmISA::TLB::size" ref="a439227feff9d7f55384e8780cfc2eb82" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classArmISA_1_1TLB.html#a439227feff9d7f55384e8780cfc2eb82">size</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a21ea64a0a6d9600fb09fff0854fd55d7"></a><!-- doxytag: member="ArmISA::TLB::stage2Mmu" ref="a21ea64a0a6d9600fb09fff0854fd55d7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classArmISA_1_1Stage2MMU.html">Stage2MMU</a>* <a class="el" href="classArmISA_1_1TLB.html#a21ea64a0a6d9600fb09fff0854fd55d7">stage2Mmu</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a52120124577a3b7c28a4e8876cd36a8b"></a><!-- doxytag: member="ArmISA::TLB::stage2Req" ref="a52120124577a3b7c28a4e8876cd36a8b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classArmISA_1_1TLB.html#a52120124577a3b7c28a4e8876cd36a8b">stage2Req</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2188cef93e9eb4ac6383c0ca4f44dc36"></a><!-- doxytag: member="ArmISA::TLB::stage2Tlb" ref="a2188cef93e9eb4ac6383c0ca4f44dc36" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classArmISA_1_1TLB.html">TLB</a>* <a class="el" href="classArmISA_1_1TLB.html#a2188cef93e9eb4ac6383c0ca4f44dc36">stage2Tlb</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a434ae74dec9e8168e4f338aeb18d5931"></a><!-- doxytag: member="ArmISA::TLB::table" ref="a434ae74dec9e8168e4f338aeb18d5931" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structArmISA_1_1TlbEntry.html">TlbEntry</a>* <a class="el" href="classArmISA_1_1TLB.html#a434ae74dec9e8168e4f338aeb18d5931">table</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae4dec2d4d5730361d51d9f4b24dee89c"></a><!-- doxytag: member="ArmISA::TLB::tableWalker" ref="ae4dec2d4d5730361d51d9f4b24dee89c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classArmISA_1_1TableWalker.html">TableWalker</a>* <a class="el" href="classArmISA_1_1TLB.html#ae4dec2d4d5730361d51d9f4b24dee89c">tableWalker</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad6762be565087b4bfb87f5bcb42673e7"></a><!-- doxytag: member="ArmISA::TLB::ttbcr" ref="ad6762be565087b4bfb87f5bcb42673e7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TTBCR <a class="el" href="classArmISA_1_1TLB.html#ad6762be565087b4bfb87f5bcb42673e7">ttbcr</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="add293169f7f2ac526b3fa14f950cf0bb"></a><!-- doxytag: member="ArmISA::TLB::vmid" ref="add293169f7f2ac526b3fa14f950cf0bb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="classArmISA_1_1TLB.html#add293169f7f2ac526b3fa14f950cf0bb">vmid</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aaf48f6b8c76d54c75a6156c32ac6405f"></a><!-- doxytag: member="ArmISA::TLB::writeAccesses" ref="aaf48f6b8c76d54c75a6156c32ac6405f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Formula.html">Stats::Formula</a> <a class="el" href="classArmISA_1_1TLB.html#aaf48f6b8c76d54c75a6156c32ac6405f">writeAccesses</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1d93d3754ee97de787330f7620867026"></a><!-- doxytag: member="ArmISA::TLB::writeHits" ref="a1d93d3754ee97de787330f7620867026" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classArmISA_1_1TLB.html#a1d93d3754ee97de787330f7620867026">writeHits</a><code> [mutable, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a607353d27be8640c6f48a295794322d6"></a><!-- doxytag: member="ArmISA::TLB::writeMisses" ref="a607353d27be8640c6f48a295794322d6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classArmISA_1_1TLB.html#a607353d27be8640c6f48a295794322d6">writeMisses</a><code> [mutable, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>arch/arm/<a class="el" href="arch_2arm_2tlb_8hh_source.html">tlb.hh</a></li>
<li>arch/arm/<a class="el" href="arch_2arm_2tlb_8cc.html">tlb.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
