<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス RxDescCache</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="classIGbE.html">IGbE</a>::<a class="el" href="classIGbE_1_1RxDescCache.html">RxDescCache</a>
  </div>
</div>
<div class="contents">
<h1>クラス RxDescCache</h1><!-- doxytag: class="IGbE::RxDescCache" --><!-- doxytag: inherits="DescCache&lt; iGbReg::RxDesc &gt;" --><div class="dynheader">
RxDescCacheに対する継承グラフ</div>
<div class="dynsection">
 <div class="center">
  <img src="classIGbE_1_1RxDescCache.gif" usemap="#RxDescCache_map" alt=""/>
  <map id="RxDescCache_map" name="RxDescCache_map">
<area href="classIGbE_1_1DescCache.html" alt="DescCache&lt; iGbReg::RxDesc &gt;" shape="rect" coords="0,0,192,24"/>
</map>
 </div>
</div>

<p><a href="classIGbE_1_1RxDescCache-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1RxDescCache.html#aa0df94c8316951374e466ed453451b26">RxDescCache</a> (<a class="el" href="classIGbE.html">IGbE</a> *i, std::string n, int s)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1RxDescCache.html#a3e213f353f926628fed12519b96f1b47">writePacket</a> (<a class="el" href="classRefCountingPtr.html">EthPacketPtr</a> packet, int pkt_offset)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1RxDescCache.html#a4f0881be8aa8698e16dcf52a89085100">pktComplete</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1RxDescCache.html#a430d1dfdf7dcec48b02f69d6769acab6">packetDone</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1RxDescCache.html#a05f4f640320394e21432a2d1c2ce8edc">pktSplitDone</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1RxDescCache.html#a2587421ae644a9474416e5a5b63ccbca">hasOutstandingEvents</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1RxDescCache.html#a53e036786d17361be4c7320d39c99b84">serialize</a> (std::ostream &amp;os)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1RxDescCache.html#af22e5d6d660b97db37003ac61ac4ee49">unserialize</a> (<a class="el" href="classCheckpoint.html">Checkpoint</a> *cp, const std::string &amp;section)</td></tr>
<tr><td colspan="2"><h2>Public 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt; <a class="el" href="classIGbE_1_1RxDescCache.html">RxDescCache</a>,&amp;RxDescCache::pktComplete &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1RxDescCache.html#a28964c300d774b0dc1d7cabcff1cdc7b">pktEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt; <a class="el" href="classIGbE_1_1RxDescCache.html">RxDescCache</a>,&amp;RxDescCache::pktSplitDone &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1RxDescCache.html#aa1e4265fed174c3f3f46281e329a45de">pktHdrEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt; <a class="el" href="classIGbE_1_1RxDescCache.html">RxDescCache</a>,&amp;RxDescCache::pktSplitDone &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1RxDescCache.html#a80533f1573c797ab5f5333d376e899c7">pktDataEvent</a></td></tr>
<tr><td colspan="2"><h2>Protected メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1RxDescCache.html#ae5a77c90557026fdf4fd78883f92bef9">descBase</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1RxDescCache.html#af3d1877b6f30bdf98b95351c38d400f3">descHead</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1RxDescCache.html#a465e4e31be3a89db3d7f9cd1ecc40064">descLen</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1RxDescCache.html#a4b6b769be62592fc43518ba480bbd1f7">descTail</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1RxDescCache.html#a4f8dbb4f64167626cac110753708c55c">updateHead</a> (long h)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1RxDescCache.html#aec7fdcc540223076999e0f8f07f854bc">enableSm</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1RxDescCache.html#abb8070fbcfa38a9697d92bbc4a0b6505">fetchAfterWb</a> ()</td></tr>
<tr><td colspan="2"><h2>Protected 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1RxDescCache.html#a0807bda2e863c4492ab0165135bf396c">pktDone</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1RxDescCache.html#acdf18a76e0bed7bae532a2708fc559da">splitCount</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1RxDescCache.html#ac3c1fb8dcc0c6c83f6a85ef03c5047db">bytesCopied</a></td></tr>
</table>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="aa0df94c8316951374e466ed453451b26"></a><!-- doxytag: member="IGbE::RxDescCache::RxDescCache" ref="aa0df94c8316951374e466ed453451b26" args="(IGbE *i, std::string n, int s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classIGbE_1_1RxDescCache.html">RxDescCache</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classIGbE.html">IGbE</a> *&nbsp;</td>
          <td class="paramname"> <em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>s</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l01195"></a>01195     : DescCache&lt;RxDesc&gt;(i, <a class="code" href="namespaceArmISA.html#aeab71244afb687f16d8c4f5ee9d6ef0e">n</a>, <a class="code" href="namespaceArmISA.html#afaeb18e17f862d8fcb76dfb68a18854f">s</a>), <a class="code" href="classIGbE_1_1RxDescCache.html#a0807bda2e863c4492ab0165135bf396c">pktDone</a>(<span class="keyword">false</span>), <a class="code" href="classIGbE_1_1RxDescCache.html#acdf18a76e0bed7bae532a2708fc559da">splitCount</a>(0), 
<a name="l01196"></a>01196       <a class="code" href="classIGbE_1_1RxDescCache.html#a28964c300d774b0dc1d7cabcff1cdc7b">pktEvent</a>(<span class="keyword">this</span>), <a class="code" href="classIGbE_1_1RxDescCache.html#aa1e4265fed174c3f3f46281e329a45de">pktHdrEvent</a>(<span class="keyword">this</span>), <a class="code" href="classIGbE_1_1RxDescCache.html#a80533f1573c797ab5f5333d376e899c7">pktDataEvent</a>(<span class="keyword">this</span>)
<a name="l01197"></a>01197 
<a name="l01198"></a>01198 {
<a name="l01199"></a>01199     <a class="code" href="classIGbE_1_1DescCache.html#afa0b0aa4b6539cf61d33c27e35c809a1">annSmFetch</a> = <span class="stringliteral">&quot;RX Desc Fetch&quot;</span>;
<a name="l01200"></a>01200     <a class="code" href="classIGbE_1_1DescCache.html#af0c632f8282132e3abbbe879fcdea126">annSmWb</a> = <span class="stringliteral">&quot;RX Desc Writeback&quot;</span>;
<a name="l01201"></a>01201     <a class="code" href="classIGbE_1_1DescCache.html#a7cc80d85ecc41b9f0e262b9ad332fc76">annUnusedDescQ</a> = <span class="stringliteral">&quot;RX Unused Descriptors&quot;</span>;
<a name="l01202"></a>01202     <a class="code" href="classIGbE_1_1DescCache.html#aa1b65175b7b2bc6609744ebc8657ac7d">annUnusedCacheQ</a> = <span class="stringliteral">&quot;RX Unused Descriptor Cache&quot;</span>;
<a name="l01203"></a>01203     <a class="code" href="classIGbE_1_1DescCache.html#a6ee5c97cfcef9e794d9691f2d11454aa">annUsedCacheQ</a> = <span class="stringliteral">&quot;RX Used Descriptor Cache&quot;</span>;
<a name="l01204"></a>01204     <a class="code" href="classIGbE_1_1DescCache.html#a7fe6b65fb10d40a843ce4e8925062aa6">annUsedDescQ</a> = <span class="stringliteral">&quot;RX Used Descriptors&quot;</span>;
<a name="l01205"></a>01205     <a class="code" href="classIGbE_1_1DescCache.html#a710b789ff37ebd40141ea5d4239cb50d">annDescQ</a> = <span class="stringliteral">&quot;RX Descriptors&quot;</span>;
<a name="l01206"></a>01206 }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="ae5a77c90557026fdf4fd78883f92bef9"></a><!-- doxytag: member="IGbE::RxDescCache::descBase" ref="ae5a77c90557026fdf4fd78883f92bef9" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> descBase </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classIGbE_1_1DescCache.html#aa8bdc83aee2be5e0eaa7a1f7f1f284e2">DescCache&lt; iGbReg::RxDesc &gt;</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00340"></a>00340 { <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a688fc8a72222faa75cd03f727b684adc">rdba</a>(); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af3d1877b6f30bdf98b95351c38d400f3"></a><!-- doxytag: member="IGbE::RxDescCache::descHead" ref="af3d1877b6f30bdf98b95351c38d400f3" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual long descHead </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classIGbE_1_1DescCache.html#af413050780b6b8b2fe0793fff12037e3">DescCache&lt; iGbReg::RxDesc &gt;</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00341"></a>00341 { <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a6b6133f358acecf01c1b8f5df50bca79">rdh</a>(); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a465e4e31be3a89db3d7f9cd1ecc40064"></a><!-- doxytag: member="IGbE::RxDescCache::descLen" ref="a465e4e31be3a89db3d7f9cd1ecc40064" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual long descLen </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classIGbE_1_1DescCache.html#a8eb35163568b01fa17aa47b23a80f90c">DescCache&lt; iGbReg::RxDesc &gt;</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00342"></a>00342 { <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa4a69b303cfc97591de35a8aa05f472f">rdlen</a>() &gt;&gt; 4; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4b6b769be62592fc43518ba480bbd1f7"></a><!-- doxytag: member="IGbE::RxDescCache::descTail" ref="a4b6b769be62592fc43518ba480bbd1f7" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual long descTail </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classIGbE_1_1DescCache.html#a88ebc5d9eb88ca9148465557e9a66c1c">DescCache&lt; iGbReg::RxDesc &gt;</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00343"></a>00343 { <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7518b9a796cfdbb12e4ad473349ffb80">rdt</a>(); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aec7fdcc540223076999e0f8f07f854bc"></a><!-- doxytag: member="IGbE::RxDescCache::enableSm" ref="aec7fdcc540223076999e0f8f07f854bc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enableSm </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classIGbE_1_1DescCache.html#a9b931707aadb26e13262c50e0dd87006">DescCache&lt; iGbReg::RxDesc &gt;</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l01494"></a>01494 {
<a name="l01495"></a>01495     <span class="keywordflow">if</span> (!<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a329b71fb934a93312ca0aacbf5a3f982">drainManager</a>) {
<a name="l01496"></a>01496         <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">rxTick</a> = <span class="keyword">true</span>;
<a name="l01497"></a>01497         <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a9506deecc41eb6290f9b9b8662cc33c2">restartClock</a>();
<a name="l01498"></a>01498     }
<a name="l01499"></a>01499 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="abb8070fbcfa38a9697d92bbc4a0b6505"></a><!-- doxytag: member="IGbE::RxDescCache::fetchAfterWb" ref="abb8070fbcfa38a9697d92bbc4a0b6505" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void fetchAfterWb </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classIGbE_1_1DescCache.html#abe568c102619a35d2aa1a37c64dff086">DescCache&lt; iGbReg::RxDesc &gt;</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00346"></a>00346                                     {
<a name="l00347"></a>00347             <span class="keywordflow">if</span> (!<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a3dd1ff20ea750ba74f718ba7e7c210fe">rxTick</a> &amp;&amp; <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classDrainable.html#a5c95358f0e9355bcc3979baf3fb7307f">getDrainState</a>() == <a class="code" href="classDrainable.html#a5d74787dedbc4e11c1ab15bf487e61f8a2f5f2c4a8c4f4f0519d503dcdfbf55cb">Drainable::Running</a>)
<a name="l00348"></a>00348                 <a class="code" href="classIGbE_1_1DescCache.html#a69c2eb368f23448d28ccb10dfa67c250">fetchDescriptors</a>();
<a name="l00349"></a>00349         }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2587421ae644a9474416e5a5b63ccbca"></a><!-- doxytag: member="IGbE::RxDescCache::hasOutstandingEvents" ref="a2587421ae644a9474416e5a5b63ccbca" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool hasOutstandingEvents </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classIGbE_1_1DescCache.html#a09989bc9720a200c8164dc1ef109d70b">DescCache&lt; iGbReg::RxDesc &gt;</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l01513"></a>01513 {
<a name="l01514"></a>01514     <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1RxDescCache.html#a28964c300d774b0dc1d7cabcff1cdc7b">pktEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>() || <a class="code" href="classIGbE_1_1DescCache.html#ae9ac7c384feda84fd885f523f0ce5f73">wbEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>() ||
<a name="l01515"></a>01515         <a class="code" href="classIGbE_1_1DescCache.html#a663aeb25d4224f8d4cbe8d4e1fe3d7d3">fetchEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>() || <a class="code" href="classIGbE_1_1RxDescCache.html#aa1e4265fed174c3f3f46281e329a45de">pktHdrEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>() ||
<a name="l01516"></a>01516         <a class="code" href="classIGbE_1_1RxDescCache.html#a80533f1573c797ab5f5333d376e899c7">pktDataEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>();
<a name="l01517"></a>01517          
<a name="l01518"></a>01518 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a430d1dfdf7dcec48b02f69d6769acab6"></a><!-- doxytag: member="IGbE::RxDescCache::packetDone" ref="a430d1dfdf7dcec48b02f69d6769acab6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool packetDone </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classCheck.html">Check</a> if the dma on the packet has completed and RX state machine can continue </p>

<p><div class="fragment"><pre class="fragment"><a name="l01503"></a>01503 {
<a name="l01504"></a>01504     <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1RxDescCache.html#a0807bda2e863c4492ab0165135bf396c">pktDone</a>) {
<a name="l01505"></a>01505         <a class="code" href="classIGbE_1_1RxDescCache.html#a0807bda2e863c4492ab0165135bf396c">pktDone</a> = <span class="keyword">false</span>;
<a name="l01506"></a>01506         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01507"></a>01507     }
<a name="l01508"></a>01508     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01509"></a>01509 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4f0881be8aa8698e16dcf52a89085100"></a><!-- doxytag: member="IGbE::RxDescCache::pktComplete" ref="a4f0881be8aa8698e16dcf52a89085100" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pktComplete </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Called by event when dma to write packet is completed </p>

<p><div class="fragment"><pre class="fragment"><a name="l01333"></a>01333 {
<a name="l01334"></a>01334     assert(<a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.size());
<a name="l01335"></a>01335     <a class="code" href="structiGbReg_1_1RxDesc.html">RxDesc</a> *desc;
<a name="l01336"></a>01336     desc = <a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.front();
<a name="l01337"></a>01337 
<a name="l01338"></a>01338     <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(<span class="stringliteral">&quot;RXS&quot;</span>, <span class="stringliteral">&quot;Update Desc&quot;</span>);
<a name="l01339"></a>01339 
<a name="l01340"></a>01340     uint16_t crcfixup = <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa8414401e91184e89c0bdc90778de02a">rctl</a>.secrc() ? 0 : 4 ;
<a name="l01341"></a>01341     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;pktPtr-&gt;length: %d bytesCopied: %d &quot;</span>
<a name="l01342"></a>01342             <span class="stringliteral">&quot;stripcrc offset: %d value written: %d %d\n&quot;</span>,
<a name="l01343"></a>01343             <a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a>-&gt;length, <a class="code" href="classIGbE_1_1RxDescCache.html#ac3c1fb8dcc0c6c83f6a85ef03c5047db">bytesCopied</a>, crcfixup,
<a name="l01344"></a>01344             <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>((uint16_t)(<a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a>-&gt;length + crcfixup)),
<a name="l01345"></a>01345             (uint16_t)(<a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a>-&gt;length + crcfixup));
<a name="l01346"></a>01346 
<a name="l01347"></a>01347     <span class="comment">// no support for anything but starting at 0</span>
<a name="l01348"></a>01348     assert(<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a66c393d9c38b0a6666d993ad7462a6ba">rxcsum</a>.pcss() == 0);
<a name="l01349"></a>01349 
<a name="l01350"></a>01350     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Packet written to memory updating Descriptor\n&quot;</span>);
<a name="l01351"></a>01351 
<a name="l01352"></a>01352     uint16_t <a class="code" href="namespaceArmISA.html#a566327436c4c7e7a63ab9ac137e9d50e">status</a> = <a class="code" href="namespaceiGbReg.html#ad96ccac73daaa7c0f55a9f2ef4c3d1fd">RXDS_DD</a>;
<a name="l01353"></a>01353     uint8_t err = 0;
<a name="l01354"></a>01354     uint16_t ext_err = 0;
<a name="l01355"></a>01355     uint16_t csum = 0;
<a name="l01356"></a>01356     uint16_t ptype = 0;
<a name="l01357"></a>01357     uint16_t ip_id = 0;
<a name="l01358"></a>01358 
<a name="l01359"></a>01359     assert(bytesCopied &lt;= pktPtr-&gt;length);
<a name="l01360"></a>01360     <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1RxDescCache.html#ac3c1fb8dcc0c6c83f6a85ef03c5047db">bytesCopied</a> == <a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a>-&gt;length)
<a name="l01361"></a>01361         status |= <a class="code" href="namespaceiGbReg.html#a4bf1dbf21e11b2b4709870ea28923795">RXDS_EOP</a>;
<a name="l01362"></a>01362 
<a name="l01363"></a>01363     <a class="code" href="classNet_1_1IpPtr.html">IpPtr</a> <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>(<a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a>);
<a name="l01364"></a>01364 
<a name="l01365"></a>01365     <span class="keywordflow">if</span> (<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>) {
<a name="l01366"></a>01366         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Proccesing Ip packet with Id=%d\n&quot;</span>, <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>-&gt;id());
<a name="l01367"></a>01367         ptype |= <a class="code" href="namespaceiGbReg.html#a38d1a85169979c3aa9b416e264fc61cc">RXDP_IPV4</a>;
<a name="l01368"></a>01368         ip_id = <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>-&gt;id();
<a name="l01369"></a>01369 
<a name="l01370"></a>01370         <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a66c393d9c38b0a6666d993ad7462a6ba">rxcsum</a>.ipofld()) {
<a name="l01371"></a>01371             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Checking IP checksum\n&quot;</span>);
<a name="l01372"></a>01372             status |= <a class="code" href="namespaceiGbReg.html#a9b0cee9a8ec0a27995db39860d0ce4e1">RXDS_IPCS</a>;
<a name="l01373"></a>01373             csum = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>(<a class="code" href="namespaceNet.html#a7c7758a7af16c9b808dcb8ddf7aa1a34">cksum</a>(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>));
<a name="l01374"></a>01374             <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classEtherDevice.html#a8ef538bf2e629f31a94678016ee92ddf">rxIpChecksums</a>++;
<a name="l01375"></a>01375             <span class="keywordflow">if</span> (<a class="code" href="namespaceNet.html#a7c7758a7af16c9b808dcb8ddf7aa1a34">cksum</a>(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>) != 0) {
<a name="l01376"></a>01376                 err |= <a class="code" href="namespaceiGbReg.html#a0e09666185341c08fbc3e424f552eabf">RXDE_IPE</a>;
<a name="l01377"></a>01377                 ext_err |= <a class="code" href="namespaceiGbReg.html#a7c6e9391f043fae210dac66022ccb0db">RXDEE_IPE</a>;
<a name="l01378"></a>01378                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Checksum is bad!!\n&quot;</span>);
<a name="l01379"></a>01379             }
<a name="l01380"></a>01380         }
<a name="l01381"></a>01381         <a class="code" href="classNet_1_1TcpPtr.html">TcpPtr</a> <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>);
<a name="l01382"></a>01382         <span class="keywordflow">if</span> (<a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a> &amp;&amp; <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a66c393d9c38b0a6666d993ad7462a6ba">rxcsum</a>.tuofld()) {
<a name="l01383"></a>01383             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Checking TCP checksum\n&quot;</span>);
<a name="l01384"></a>01384             status |= <a class="code" href="namespaceiGbReg.html#aae99bf9f9557cc9d2719664210d34678">RXDS_TCPCS</a>;
<a name="l01385"></a>01385             ptype |= <a class="code" href="namespaceiGbReg.html#a3194c61cd3bbfba3e0c2002e3bc370f5">RXDP_TCP</a>;
<a name="l01386"></a>01386             csum = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>(<a class="code" href="namespaceNet.html#a7c7758a7af16c9b808dcb8ddf7aa1a34">cksum</a>(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>));
<a name="l01387"></a>01387             <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classEtherDevice.html#a6e12a524415fd313cc9a396fa1f4addb">rxTcpChecksums</a>++;
<a name="l01388"></a>01388             <span class="keywordflow">if</span> (<a class="code" href="namespaceNet.html#a7c7758a7af16c9b808dcb8ddf7aa1a34">cksum</a>(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>) != 0) {
<a name="l01389"></a>01389                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Checksum is bad!!\n&quot;</span>);
<a name="l01390"></a>01390                 err |= <a class="code" href="namespaceiGbReg.html#a620a2faa51faca3544031f54ced87ca3">RXDE_TCPE</a>;
<a name="l01391"></a>01391                 ext_err |= <a class="code" href="namespaceiGbReg.html#a4ddfc8191736dc4c822f86ff1b073ea4">RXDEE_TCPE</a>;
<a name="l01392"></a>01392             }
<a name="l01393"></a>01393         }
<a name="l01394"></a>01394 
<a name="l01395"></a>01395         <a class="code" href="classNet_1_1UdpPtr.html">UdpPtr</a> udp(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>);
<a name="l01396"></a>01396         <span class="keywordflow">if</span> (udp &amp;&amp; <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a66c393d9c38b0a6666d993ad7462a6ba">rxcsum</a>.tuofld()) {
<a name="l01397"></a>01397             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Checking UDP checksum\n&quot;</span>);
<a name="l01398"></a>01398             status |= <a class="code" href="namespaceiGbReg.html#a390b7297c53140bdea8b79e91d128150">RXDS_UDPCS</a>;
<a name="l01399"></a>01399             ptype |= <a class="code" href="namespaceiGbReg.html#a8bb50a93437adde2602f7501247099d0">RXDP_UDP</a>;
<a name="l01400"></a>01400             csum = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>(<a class="code" href="namespaceNet.html#a7c7758a7af16c9b808dcb8ddf7aa1a34">cksum</a>(udp));
<a name="l01401"></a>01401             <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classEtherDevice.html#a17a288e255ab7c2ef29580d9aa1ddfe5">rxUdpChecksums</a>++;
<a name="l01402"></a>01402             <span class="keywordflow">if</span> (<a class="code" href="namespaceNet.html#a7c7758a7af16c9b808dcb8ddf7aa1a34">cksum</a>(udp) != 0) {
<a name="l01403"></a>01403                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Checksum is bad!!\n&quot;</span>);
<a name="l01404"></a>01404                 ext_err |= <a class="code" href="namespaceiGbReg.html#a4ddfc8191736dc4c822f86ff1b073ea4">RXDEE_TCPE</a>;
<a name="l01405"></a>01405                 err |= <a class="code" href="namespaceiGbReg.html#a620a2faa51faca3544031f54ced87ca3">RXDE_TCPE</a>;
<a name="l01406"></a>01406             }
<a name="l01407"></a>01407         }
<a name="l01408"></a>01408     } <span class="keywordflow">else</span> { <span class="comment">// if ip</span>
<a name="l01409"></a>01409         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;Proccesing Non-Ip packet\n&quot;</span>);
<a name="l01410"></a>01410     }
<a name="l01411"></a>01411 
<a name="l01412"></a>01412     <span class="keywordflow">switch</span> (<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7fbb07c843893919943594329481935d">srrctl</a>.desctype()) {
<a name="l01413"></a>01413       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a6497536d5f701baf5ec692cd5f543c7b">RXDT_LEGACY</a>:
<a name="l01414"></a>01414         desc-&gt;legacy.len = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>((uint16_t)(<a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a>-&gt;length + crcfixup));
<a name="l01415"></a>01415         desc-&gt;legacy.status = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>(status);
<a name="l01416"></a>01416         desc-&gt;legacy.errors = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>(err);
<a name="l01417"></a>01417         <span class="comment">// No vlan support at this point... just set it to 0</span>
<a name="l01418"></a>01418         desc-&gt;legacy.vlan = 0;
<a name="l01419"></a>01419         <span class="keywordflow">break</span>;
<a name="l01420"></a>01420       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a86ad221aa778dcbb0f9c59fbdd29b652">RXDT_ADV_SPLIT_A</a>:
<a name="l01421"></a>01421       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ad3aad4627ec1e57dbc49e8ddf0e8c10b">RXDT_ADV_ONEBUF</a>:
<a name="l01422"></a>01422         desc-&gt;adv_wb.rss_type = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>(0);
<a name="l01423"></a>01423         desc-&gt;adv_wb.pkt_type = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>(ptype);
<a name="l01424"></a>01424         <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a66c393d9c38b0a6666d993ad7462a6ba">rxcsum</a>.pcsd()) {
<a name="l01425"></a>01425             <span class="comment">// no rss support right now</span>
<a name="l01426"></a>01426             desc-&gt;adv_wb.rss_hash = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>(0);
<a name="l01427"></a>01427         } <span class="keywordflow">else</span> {
<a name="l01428"></a>01428             desc-&gt;adv_wb.id = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>(ip_id);
<a name="l01429"></a>01429             desc-&gt;adv_wb.csum = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>(csum);
<a name="l01430"></a>01430         }
<a name="l01431"></a>01431         desc-&gt;adv_wb.status = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>(status);
<a name="l01432"></a>01432         desc-&gt;adv_wb.errors = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>(ext_err);
<a name="l01433"></a>01433         <span class="comment">// no vlan support</span>
<a name="l01434"></a>01434         desc-&gt;adv_wb.vlan_tag = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>(0); 
<a name="l01435"></a>01435         <span class="keywordflow">break</span>;
<a name="l01436"></a>01436       <span class="keywordflow">default</span>:
<a name="l01437"></a>01437         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Unimplemnted RX receive buffer type %d\n&quot;</span>,
<a name="l01438"></a>01438               <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7fbb07c843893919943594329481935d">srrctl</a>.desctype());
<a name="l01439"></a>01439     }
<a name="l01440"></a>01440 
<a name="l01441"></a>01441     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Descriptor complete w0: %#x w1: %#x\n&quot;</span>,
<a name="l01442"></a>01442             desc-&gt;adv_read.pkt, desc-&gt;adv_read.hdr);
<a name="l01443"></a>01443 
<a name="l01444"></a>01444     <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1RxDescCache.html#ac3c1fb8dcc0c6c83f6a85ef03c5047db">bytesCopied</a> == <a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a>-&gt;length) {
<a name="l01445"></a>01445         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc,
<a name="l01446"></a>01446                 <span class="stringliteral">&quot;Packet completely written to descriptor buffers\n&quot;</span>);
<a name="l01447"></a>01447         <span class="comment">// Deal with the rx timer interrupts</span>
<a name="l01448"></a>01448         <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a0229a0715b90bc69aeb553c6cdbd05ab">rdtr</a>.delay()) {
<a name="l01449"></a>01449             <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> delay = <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a0229a0715b90bc69aeb553c6cdbd05ab">rdtr</a>.delay() * <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#ad4b9fb8ece2ddee6cda2b12e4f77b3d1">intClock</a>();
<a name="l01450"></a>01450             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;RXS: Scheduling DTR for %d\n&quot;</span>, delay);
<a name="l01451"></a>01451             <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classEventManager.html#a83fe8e2d06cd7c6e36743e5beb07298f">reschedule</a>(<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a72b4c60f46bdb4b88427dec167aaca80">rdtrEvent</a>, <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>() + delay);
<a name="l01452"></a>01452         }
<a name="l01453"></a>01453 
<a name="l01454"></a>01454         <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a3eaefd7f09f27c136a3a225f7645ec65">radv</a>.idv()) {
<a name="l01455"></a>01455             <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> delay = <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a3eaefd7f09f27c136a3a225f7645ec65">radv</a>.idv() * <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#ad4b9fb8ece2ddee6cda2b12e4f77b3d1">intClock</a>();
<a name="l01456"></a>01456             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;RXS: Scheduling ADV for %d\n&quot;</span>, delay);
<a name="l01457"></a>01457             <span class="keywordflow">if</span> (!<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a30a3a2a8194ad851683c915beca8a172">radvEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>()) {
<a name="l01458"></a>01458                 <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classEventManager.html#a4ddebbfe9a12b95be6fb993ce892dcd3">schedule</a>(<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a30a3a2a8194ad851683c915beca8a172">radvEvent</a>, <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>() + delay);
<a name="l01459"></a>01459             }
<a name="l01460"></a>01460         }
<a name="l01461"></a>01461 
<a name="l01462"></a>01462         <span class="comment">// if neither radv or rdtr, maybe itr is set...</span>
<a name="l01463"></a>01463         <span class="keywordflow">if</span> (!<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a0229a0715b90bc69aeb553c6cdbd05ab">rdtr</a>.delay() &amp;&amp; !<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a3eaefd7f09f27c136a3a225f7645ec65">radv</a>.idv()) {
<a name="l01464"></a>01464             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM,
<a name="l01465"></a>01465                     <span class="stringliteral">&quot;RXS: Receive interrupt delay disabled, posting IT_RXT\n&quot;</span>);
<a name="l01466"></a>01466             <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a5421bafb8503ffca04cac20d616ae4cc">postInterrupt</a>(<a class="code" href="namespaceiGbReg.html#ab881f740bd3545d8eb42b05253752e9ca5de08c161325e1127c2727a0b234f9b3">IT_RXT</a>);
<a name="l01467"></a>01467         }
<a name="l01468"></a>01468 
<a name="l01469"></a>01469         <span class="comment">// If the packet is small enough, interrupt appropriately</span>
<a name="l01470"></a>01470         <span class="comment">// I wonder if this is delayed or not?!</span>
<a name="l01471"></a>01471         <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a>-&gt;length &lt;= <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#ad3deaeb0af2306b53f786f80160e0225">rsrpd</a>.idv()) {
<a name="l01472"></a>01472             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM,
<a name="l01473"></a>01473                     <span class="stringliteral">&quot;RXS: Posting IT_SRPD beacuse small packet received\n&quot;</span>);
<a name="l01474"></a>01474             <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a5421bafb8503ffca04cac20d616ae4cc">postInterrupt</a>(<a class="code" href="namespaceiGbReg.html#ab881f740bd3545d8eb42b05253752e9ca72e21e36635d99d0b77bd21cd52a4815">IT_SRPD</a>);
<a name="l01475"></a>01475         }
<a name="l01476"></a>01476         <a class="code" href="classIGbE_1_1RxDescCache.html#ac3c1fb8dcc0c6c83f6a85ef03c5047db">bytesCopied</a> = 0;
<a name="l01477"></a>01477     }
<a name="l01478"></a>01478 
<a name="l01479"></a>01479     <a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l01480"></a>01480     <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a97cbf86aeda5390deb20b1d39396d111">checkDrain</a>();
<a name="l01481"></a>01481     <a class="code" href="classIGbE_1_1RxDescCache.html#aec7fdcc540223076999e0f8f07f854bc">enableSm</a>();
<a name="l01482"></a>01482     <a class="code" href="classIGbE_1_1RxDescCache.html#a0807bda2e863c4492ab0165135bf396c">pktDone</a> = <span class="keyword">true</span>;
<a name="l01483"></a>01483 
<a name="l01484"></a>01484     <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(<span class="stringliteral">&quot;RXS&quot;</span>, <span class="stringliteral">&quot;Done Updating Desc&quot;</span>);
<a name="l01485"></a>01485     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Processing of this descriptor complete\n&quot;</span>);
<a name="l01486"></a>01486     <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a4d59c58fec3355c64488974a9110bb70">anDq</a>(<span class="stringliteral">&quot;RXS&quot;</span>, <a class="code" href="classIGbE_1_1DescCache.html#aa1b65175b7b2bc6609744ebc8657ac7d">annUnusedCacheQ</a>);
<a name="l01487"></a>01487     <a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.pop_front();
<a name="l01488"></a>01488     <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#ad5560d7f7671ea0c96250beacf187ac8">anQ</a>(<span class="stringliteral">&quot;RXS&quot;</span>, <a class="code" href="classIGbE_1_1DescCache.html#a6ee5c97cfcef9e794d9691f2d11454aa">annUsedCacheQ</a>);
<a name="l01489"></a>01489     <a class="code" href="classIGbE_1_1DescCache.html#a99982ada48f129fedf0ee5d8871f5df8">usedCache</a>.push_back(desc);
<a name="l01490"></a>01490 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a05f4f640320394e21432a2d1c2ce8edc"></a><!-- doxytag: member="IGbE::RxDescCache::pktSplitDone" ref="a05f4f640320394e21432a2d1c2ce8edc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pktSplitDone </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l01210"></a>01210 {
<a name="l01211"></a>01211     <a class="code" href="classIGbE_1_1RxDescCache.html#acdf18a76e0bed7bae532a2708fc559da">splitCount</a>++;
<a name="l01212"></a>01212     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc,
<a name="l01213"></a>01213             <span class="stringliteral">&quot;Part of split packet done: splitcount now %d\n&quot;</span>, <a class="code" href="classIGbE_1_1RxDescCache.html#acdf18a76e0bed7bae532a2708fc559da">splitCount</a>);
<a name="l01214"></a>01214     assert(<a class="code" href="classIGbE_1_1RxDescCache.html#acdf18a76e0bed7bae532a2708fc559da">splitCount</a> &lt;= 2);
<a name="l01215"></a>01215     <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1RxDescCache.html#acdf18a76e0bed7bae532a2708fc559da">splitCount</a> != 2)
<a name="l01216"></a>01216         <span class="keywordflow">return</span>;
<a name="l01217"></a>01217     <a class="code" href="classIGbE_1_1RxDescCache.html#acdf18a76e0bed7bae532a2708fc559da">splitCount</a> = 0;
<a name="l01218"></a>01218     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc,
<a name="l01219"></a>01219             <span class="stringliteral">&quot;Part of split packet done: calling pktComplete()\n&quot;</span>);
<a name="l01220"></a>01220     <a class="code" href="classIGbE_1_1RxDescCache.html#a4f0881be8aa8698e16dcf52a89085100">pktComplete</a>();
<a name="l01221"></a>01221 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a53e036786d17361be4c7320d39c99b84"></a><!-- doxytag: member="IGbE::RxDescCache::serialize" ref="a53e036786d17361be4c7320d39c99b84" args="(std::ostream &amp;os)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void serialize </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>os</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classIGbE_1_1DescCache.html#a53e036786d17361be4c7320d39c99b84">DescCache&lt; iGbReg::RxDesc &gt;</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l01522"></a>01522 {
<a name="l01523"></a>01523     <a class="code" href="classIGbE_1_1RxDescCache.html#a53e036786d17361be4c7320d39c99b84">DescCache&lt;RxDesc&gt;::serialize</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>);
<a name="l01524"></a>01524     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1RxDescCache.html#a0807bda2e863c4492ab0165135bf396c">pktDone</a>);
<a name="l01525"></a>01525     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1RxDescCache.html#acdf18a76e0bed7bae532a2708fc559da">splitCount</a>);
<a name="l01526"></a>01526     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1RxDescCache.html#ac3c1fb8dcc0c6c83f6a85ef03c5047db">bytesCopied</a>);
<a name="l01527"></a>01527 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af22e5d6d660b97db37003ac61ac4ee49"></a><!-- doxytag: member="IGbE::RxDescCache::unserialize" ref="af22e5d6d660b97db37003ac61ac4ee49" args="(Checkpoint *cp, const std::string &amp;section)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void unserialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCheckpoint.html">Checkpoint</a> *&nbsp;</td>
          <td class="paramname"> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>section</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classIGbE_1_1DescCache.html#af22e5d6d660b97db37003ac61ac4ee49">DescCache&lt; iGbReg::RxDesc &gt;</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l01531"></a>01531 {
<a name="l01532"></a>01532     <a class="code" href="classIGbE_1_1RxDescCache.html#af22e5d6d660b97db37003ac61ac4ee49">DescCache&lt;RxDesc&gt;::unserialize</a>(cp, section);
<a name="l01533"></a>01533     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1RxDescCache.html#a0807bda2e863c4492ab0165135bf396c">pktDone</a>);
<a name="l01534"></a>01534     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1RxDescCache.html#acdf18a76e0bed7bae532a2708fc559da">splitCount</a>);
<a name="l01535"></a>01535     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1RxDescCache.html#ac3c1fb8dcc0c6c83f6a85ef03c5047db">bytesCopied</a>);
<a name="l01536"></a>01536 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4f8dbb4f64167626cac110753708c55c"></a><!-- doxytag: member="IGbE::RxDescCache::updateHead" ref="a4f8dbb4f64167626cac110753708c55c" args="(long h)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void updateHead </td>
          <td>(</td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>h</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classIGbE_1_1DescCache.html#af48912789332a0283480cd85c7197f15">DescCache&lt; iGbReg::RxDesc &gt;</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00344"></a>00344 { <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a6b6133f358acecf01c1b8f5df50bca79">rdh</a>(h); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3e213f353f926628fed12519b96f1b47"></a><!-- doxytag: member="IGbE::RxDescCache::writePacket" ref="a3e213f353f926628fed12519b96f1b47" args="(EthPacketPtr packet, int pkt_offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int writePacket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRefCountingPtr.html">EthPacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>pkt_offset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Write the given packet into the buffer(s) pointed to by the descriptor and update the book keeping. Should only be called when there are no dma's pending. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>packet</em>&nbsp;</td><td>ethernet packet to write </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pkt_offset</em>&nbsp;</td><td>bytes already copied from the packet to memory </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>戻り値:</b></dt><dd>pkt_offset + number of bytes copied during this call </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l01225"></a>01225 {
<a name="l01226"></a>01226     assert(<a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.size());
<a name="l01227"></a>01227     <span class="comment">//if (!unusedCache.size())</span>
<a name="l01228"></a>01228     <span class="comment">//    return false;</span>
<a name="l01229"></a>01229 
<a name="l01230"></a>01230     <a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a> = packet;
<a name="l01231"></a>01231     <a class="code" href="classIGbE_1_1RxDescCache.html#a0807bda2e863c4492ab0165135bf396c">pktDone</a> = <span class="keyword">false</span>;
<a name="l01232"></a>01232     <span class="keywordtype">unsigned</span> buf_len, hdr_len;
<a name="l01233"></a>01233 
<a name="l01234"></a>01234     <a class="code" href="structiGbReg_1_1RxDesc.html">RxDesc</a> *desc = <a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.front();
<a name="l01235"></a>01235     <span class="keywordflow">switch</span> (<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7fbb07c843893919943594329481935d">srrctl</a>.desctype()) {
<a name="l01236"></a>01236       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a6497536d5f701baf5ec692cd5f543c7b">RXDT_LEGACY</a>:
<a name="l01237"></a>01237         assert(pkt_offset == 0);
<a name="l01238"></a>01238         <a class="code" href="classIGbE_1_1RxDescCache.html#ac3c1fb8dcc0c6c83f6a85ef03c5047db">bytesCopied</a> = packet-&gt;length;
<a name="l01239"></a>01239         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Packet Length: %d Desc Size: %d\n&quot;</span>,
<a name="l01240"></a>01240                 packet-&gt;length, <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa8414401e91184e89c0bdc90778de02a">rctl</a>.descSize());
<a name="l01241"></a>01241         assert(packet-&gt;length &lt; <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa8414401e91184e89c0bdc90778de02a">rctl</a>.descSize());
<a name="l01242"></a>01242         <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classDmaDevice.html#a4a2db8a9eb52a00a9a2e19c2eb3753dc">dmaWrite</a>(<a class="code" href="classIGbE_1_1DescCache.html#aaeea87c73c95205c88d11e03fe8f48b9">pciToDma</a>(desc-&gt;<a class="code" href="structiGbReg_1_1RxDesc.html#ab6262d7534baaa85f137d2a8c4acd25a">legacy</a>.buf),
<a name="l01243"></a>01243                        packet-&gt;length, &amp;<a class="code" href="classIGbE_1_1RxDescCache.html#a28964c300d774b0dc1d7cabcff1cdc7b">pktEvent</a>, packet-&gt;<a class="code" href="classRefCountingPtr.html#ac88dceffbecaed1137b0e27783adbcc5">data</a>,
<a name="l01244"></a>01244                        <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a94231b5b6ec824655f1e33a2481009fb">rxWriteDelay</a>);
<a name="l01245"></a>01245         <span class="keywordflow">break</span>;
<a name="l01246"></a>01246       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#ad3aad4627ec1e57dbc49e8ddf0e8c10b">RXDT_ADV_ONEBUF</a>:
<a name="l01247"></a>01247         assert(pkt_offset == 0);
<a name="l01248"></a>01248         <a class="code" href="classIGbE_1_1RxDescCache.html#ac3c1fb8dcc0c6c83f6a85ef03c5047db">bytesCopied</a> = packet-&gt;length;
<a name="l01249"></a>01249         buf_len = <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa8414401e91184e89c0bdc90778de02a">rctl</a>.lpe() ? <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7fbb07c843893919943594329481935d">srrctl</a>.bufLen() :
<a name="l01250"></a>01250             <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa8414401e91184e89c0bdc90778de02a">rctl</a>.descSize();
<a name="l01251"></a>01251         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Packet Length: %d srrctl: %#x Desc Size: %d\n&quot;</span>,
<a name="l01252"></a>01252                 packet-&gt;length, <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7fbb07c843893919943594329481935d">srrctl</a>(), buf_len);
<a name="l01253"></a>01253         assert(packet-&gt;length &lt; buf_len);
<a name="l01254"></a>01254         <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classDmaDevice.html#a4a2db8a9eb52a00a9a2e19c2eb3753dc">dmaWrite</a>(<a class="code" href="classIGbE_1_1DescCache.html#aaeea87c73c95205c88d11e03fe8f48b9">pciToDma</a>(desc-&gt;<a class="code" href="structiGbReg_1_1RxDesc.html#adebf1737d6ac553e722db58b3cb5e966">adv_read</a>.pkt),
<a name="l01255"></a>01255                        packet-&gt;length, &amp;<a class="code" href="classIGbE_1_1RxDescCache.html#a28964c300d774b0dc1d7cabcff1cdc7b">pktEvent</a>, packet-&gt;<a class="code" href="classRefCountingPtr.html#ac88dceffbecaed1137b0e27783adbcc5">data</a>,
<a name="l01256"></a>01256                        <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a94231b5b6ec824655f1e33a2481009fb">rxWriteDelay</a>);
<a name="l01257"></a>01257         desc-&gt;<a class="code" href="structiGbReg_1_1RxDesc.html#a8d465bd7ed44847910c561b1e4f16de4">adv_wb</a>.header_len = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>(0);
<a name="l01258"></a>01258         desc-&gt;<a class="code" href="structiGbReg_1_1RxDesc.html#a8d465bd7ed44847910c561b1e4f16de4">adv_wb</a>.sph = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>(0);
<a name="l01259"></a>01259         desc-&gt;<a class="code" href="structiGbReg_1_1RxDesc.html#a8d465bd7ed44847910c561b1e4f16de4">adv_wb</a>.pkt_len = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>((uint16_t)(pktPtr-&gt;length));
<a name="l01260"></a>01260         <span class="keywordflow">break</span>;
<a name="l01261"></a>01261       <span class="keywordflow">case</span> <a class="code" href="namespaceiGbReg.html#a86ad221aa778dcbb0f9c59fbdd29b652">RXDT_ADV_SPLIT_A</a>:
<a name="l01262"></a>01262         <span class="keywordtype">int</span> split_point;
<a name="l01263"></a>01263         
<a name="l01264"></a>01264         buf_len = <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa8414401e91184e89c0bdc90778de02a">rctl</a>.lpe() ? <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7fbb07c843893919943594329481935d">srrctl</a>.bufLen() :
<a name="l01265"></a>01265             <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa8414401e91184e89c0bdc90778de02a">rctl</a>.descSize();
<a name="l01266"></a>01266         hdr_len = <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa8414401e91184e89c0bdc90778de02a">rctl</a>.lpe() ? <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7fbb07c843893919943594329481935d">srrctl</a>.hdrLen() : 0; 
<a name="l01267"></a>01267         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc,
<a name="l01268"></a>01268                 <span class="stringliteral">&quot;lpe: %d Packet Length: %d offset: %d srrctl: %#x &quot;</span>
<a name="l01269"></a>01269                 <span class="stringliteral">&quot;hdr addr: %#x Hdr Size: %d desc addr: %#x Desc Size: %d\n&quot;</span>,
<a name="l01270"></a>01270                 <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#aa8414401e91184e89c0bdc90778de02a">rctl</a>.lpe(), packet-&gt;length, pkt_offset,
<a name="l01271"></a>01271                 <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7fbb07c843893919943594329481935d">srrctl</a>(), desc-&gt;<a class="code" href="structiGbReg_1_1RxDesc.html#adebf1737d6ac553e722db58b3cb5e966">adv_read</a>.hdr, hdr_len,
<a name="l01272"></a>01272                 desc-&gt;<a class="code" href="structiGbReg_1_1RxDesc.html#adebf1737d6ac553e722db58b3cb5e966">adv_read</a>.pkt, buf_len);
<a name="l01273"></a>01273 
<a name="l01274"></a>01274         split_point = <a class="code" href="namespaceNet.html#a7e50a230aeed27f50f5dd05a5768c74c">hsplit</a>(pktPtr);
<a name="l01275"></a>01275 
<a name="l01276"></a>01276         <span class="keywordflow">if</span> (packet-&gt;length &lt;= hdr_len) {
<a name="l01277"></a>01277             <a class="code" href="classIGbE_1_1RxDescCache.html#ac3c1fb8dcc0c6c83f6a85ef03c5047db">bytesCopied</a> = packet-&gt;length;
<a name="l01278"></a>01278             assert(pkt_offset == 0);
<a name="l01279"></a>01279             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Hdr split: Entire packet in header\n&quot;</span>);
<a name="l01280"></a>01280             <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classDmaDevice.html#a4a2db8a9eb52a00a9a2e19c2eb3753dc">dmaWrite</a>(<a class="code" href="classIGbE_1_1DescCache.html#aaeea87c73c95205c88d11e03fe8f48b9">pciToDma</a>(desc-&gt;<a class="code" href="structiGbReg_1_1RxDesc.html#adebf1737d6ac553e722db58b3cb5e966">adv_read</a>.hdr),
<a name="l01281"></a>01281                            packet-&gt;length, &amp;<a class="code" href="classIGbE_1_1RxDescCache.html#a28964c300d774b0dc1d7cabcff1cdc7b">pktEvent</a>, packet-&gt;<a class="code" href="classRefCountingPtr.html#ac88dceffbecaed1137b0e27783adbcc5">data</a>,
<a name="l01282"></a>01282                            <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a94231b5b6ec824655f1e33a2481009fb">rxWriteDelay</a>);
<a name="l01283"></a>01283             desc-&gt;<a class="code" href="structiGbReg_1_1RxDesc.html#a8d465bd7ed44847910c561b1e4f16de4">adv_wb</a>.header_len = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>((uint16_t)packet-&gt;length);
<a name="l01284"></a>01284             desc-&gt;<a class="code" href="structiGbReg_1_1RxDesc.html#a8d465bd7ed44847910c561b1e4f16de4">adv_wb</a>.sph = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>(0);
<a name="l01285"></a>01285             desc-&gt;<a class="code" href="structiGbReg_1_1RxDesc.html#a8d465bd7ed44847910c561b1e4f16de4">adv_wb</a>.pkt_len = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>(0);
<a name="l01286"></a>01286         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (split_point) {
<a name="l01287"></a>01287             <span class="keywordflow">if</span> (pkt_offset) {
<a name="l01288"></a>01288                 <span class="comment">// we are only copying some data, header/data has already been</span>
<a name="l01289"></a>01289                 <span class="comment">// copied</span>
<a name="l01290"></a>01290                 <span class="keywordtype">int</span> max_to_copy =
<a name="l01291"></a>01291                     std::min(packet-&gt;length - pkt_offset, buf_len);
<a name="l01292"></a>01292                 <a class="code" href="classIGbE_1_1RxDescCache.html#ac3c1fb8dcc0c6c83f6a85ef03c5047db">bytesCopied</a> += max_to_copy;
<a name="l01293"></a>01293                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc,
<a name="l01294"></a>01294                         <span class="stringliteral">&quot;Hdr split: Continuing data buffer copy\n&quot;</span>);
<a name="l01295"></a>01295                 <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classDmaDevice.html#a4a2db8a9eb52a00a9a2e19c2eb3753dc">dmaWrite</a>(<a class="code" href="classIGbE_1_1DescCache.html#aaeea87c73c95205c88d11e03fe8f48b9">pciToDma</a>(desc-&gt;<a class="code" href="structiGbReg_1_1RxDesc.html#adebf1737d6ac553e722db58b3cb5e966">adv_read</a>.pkt),
<a name="l01296"></a>01296                                max_to_copy, &amp;<a class="code" href="classIGbE_1_1RxDescCache.html#a28964c300d774b0dc1d7cabcff1cdc7b">pktEvent</a>,
<a name="l01297"></a>01297                                packet-&gt;<a class="code" href="classRefCountingPtr.html#ac88dceffbecaed1137b0e27783adbcc5">data</a> + pkt_offset, <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a94231b5b6ec824655f1e33a2481009fb">rxWriteDelay</a>);
<a name="l01298"></a>01298                 desc-&gt;<a class="code" href="structiGbReg_1_1RxDesc.html#a8d465bd7ed44847910c561b1e4f16de4">adv_wb</a>.header_len = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>(0);
<a name="l01299"></a>01299                 desc-&gt;<a class="code" href="structiGbReg_1_1RxDesc.html#a8d465bd7ed44847910c561b1e4f16de4">adv_wb</a>.pkt_len = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>((uint16_t)max_to_copy);
<a name="l01300"></a>01300                 desc-&gt;<a class="code" href="structiGbReg_1_1RxDesc.html#a8d465bd7ed44847910c561b1e4f16de4">adv_wb</a>.sph = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>(0);
<a name="l01301"></a>01301             } <span class="keywordflow">else</span> {
<a name="l01302"></a>01302                 <span class="keywordtype">int</span> max_to_copy =
<a name="l01303"></a>01303                     std::min(packet-&gt;length - split_point, buf_len);
<a name="l01304"></a>01304                 <a class="code" href="classIGbE_1_1RxDescCache.html#ac3c1fb8dcc0c6c83f6a85ef03c5047db">bytesCopied</a> += max_to_copy + split_point;
<a name="l01305"></a>01305                 
<a name="l01306"></a>01306                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Hdr split: splitting at %d\n&quot;</span>,
<a name="l01307"></a>01307                         split_point);
<a name="l01308"></a>01308                 <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classDmaDevice.html#a4a2db8a9eb52a00a9a2e19c2eb3753dc">dmaWrite</a>(<a class="code" href="classIGbE_1_1DescCache.html#aaeea87c73c95205c88d11e03fe8f48b9">pciToDma</a>(desc-&gt;<a class="code" href="structiGbReg_1_1RxDesc.html#adebf1737d6ac553e722db58b3cb5e966">adv_read</a>.hdr),
<a name="l01309"></a>01309                                split_point, &amp;<a class="code" href="classIGbE_1_1RxDescCache.html#aa1e4265fed174c3f3f46281e329a45de">pktHdrEvent</a>,
<a name="l01310"></a>01310                                packet-&gt;<a class="code" href="classRefCountingPtr.html#ac88dceffbecaed1137b0e27783adbcc5">data</a>, <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a94231b5b6ec824655f1e33a2481009fb">rxWriteDelay</a>);
<a name="l01311"></a>01311                 <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classDmaDevice.html#a4a2db8a9eb52a00a9a2e19c2eb3753dc">dmaWrite</a>(<a class="code" href="classIGbE_1_1DescCache.html#aaeea87c73c95205c88d11e03fe8f48b9">pciToDma</a>(desc-&gt;<a class="code" href="structiGbReg_1_1RxDesc.html#adebf1737d6ac553e722db58b3cb5e966">adv_read</a>.pkt),
<a name="l01312"></a>01312                                max_to_copy, &amp;<a class="code" href="classIGbE_1_1RxDescCache.html#a80533f1573c797ab5f5333d376e899c7">pktDataEvent</a>,
<a name="l01313"></a>01313                                packet-&gt;<a class="code" href="classRefCountingPtr.html#ac88dceffbecaed1137b0e27783adbcc5">data</a> + split_point, <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a94231b5b6ec824655f1e33a2481009fb">rxWriteDelay</a>);
<a name="l01314"></a>01314                 desc-&gt;<a class="code" href="structiGbReg_1_1RxDesc.html#a8d465bd7ed44847910c561b1e4f16de4">adv_wb</a>.header_len = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>(split_point);
<a name="l01315"></a>01315                 desc-&gt;<a class="code" href="structiGbReg_1_1RxDesc.html#a8d465bd7ed44847910c561b1e4f16de4">adv_wb</a>.sph = 1;
<a name="l01316"></a>01316                 desc-&gt;<a class="code" href="structiGbReg_1_1RxDesc.html#a8d465bd7ed44847910c561b1e4f16de4">adv_wb</a>.pkt_len = <a class="code" href="byteswap_8hh.html#ac65420460fe8f6fd2a34e80843fc514a">htole</a>((uint16_t)(max_to_copy));
<a name="l01317"></a>01317             }
<a name="l01318"></a>01318         } <span class="keywordflow">else</span> {
<a name="l01319"></a>01319             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Header split not fitting within header buffer or &quot;</span>
<a name="l01320"></a>01320                   <span class="stringliteral">&quot;undecodable packet not fitting in header unsupported\n&quot;</span>);
<a name="l01321"></a>01321         }
<a name="l01322"></a>01322         <span class="keywordflow">break</span>;
<a name="l01323"></a>01323       <span class="keywordflow">default</span>:
<a name="l01324"></a>01324         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Unimplemnted RX receive buffer type: %d\n&quot;</span>,
<a name="l01325"></a>01325               <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7fbb07c843893919943594329481935d">srrctl</a>.desctype());
<a name="l01326"></a>01326     }
<a name="l01327"></a>01327     <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1RxDescCache.html#ac3c1fb8dcc0c6c83f6a85ef03c5047db">bytesCopied</a>;
<a name="l01328"></a>01328 
<a name="l01329"></a>01329 }
</pre></div></p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="ac3c1fb8dcc0c6c83f6a85ef03c5047db"></a><!-- doxytag: member="IGbE::RxDescCache::bytesCopied" ref="ac3c1fb8dcc0c6c83f6a85ef03c5047db" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classIGbE_1_1RxDescCache.html#ac3c1fb8dcc0c6c83f6a85ef03c5047db">bytesCopied</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Bytes of packet that have been copied, so we know when to set EOP </p>

</div>
</div>
<a class="anchor" id="a80533f1573c797ab5f5333d376e899c7"></a><!-- doxytag: member="IGbE::RxDescCache::pktDataEvent" ref="a80533f1573c797ab5f5333d376e899c7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt;<a class="el" href="classIGbE_1_1RxDescCache.html">RxDescCache</a>, &amp;RxDescCache::pktSplitDone&gt; <a class="el" href="classIGbE_1_1RxDescCache.html#a80533f1573c797ab5f5333d376e899c7">pktDataEvent</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0807bda2e863c4492ab0165135bf396c"></a><!-- doxytag: member="IGbE::RxDescCache::pktDone" ref="a0807bda2e863c4492ab0165135bf396c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classIGbE_1_1RxDescCache.html#a0807bda2e863c4492ab0165135bf396c">pktDone</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a28964c300d774b0dc1d7cabcff1cdc7b"></a><!-- doxytag: member="IGbE::RxDescCache::pktEvent" ref="a28964c300d774b0dc1d7cabcff1cdc7b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt;<a class="el" href="classIGbE_1_1RxDescCache.html">RxDescCache</a>, &amp;RxDescCache::pktComplete&gt; <a class="el" href="classIGbE_1_1RxDescCache.html#a28964c300d774b0dc1d7cabcff1cdc7b">pktEvent</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa1e4265fed174c3f3f46281e329a45de"></a><!-- doxytag: member="IGbE::RxDescCache::pktHdrEvent" ref="aa1e4265fed174c3f3f46281e329a45de" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt;<a class="el" href="classIGbE_1_1RxDescCache.html">RxDescCache</a>, &amp;RxDescCache::pktSplitDone&gt; <a class="el" href="classIGbE_1_1RxDescCache.html#aa1e4265fed174c3f3f46281e329a45de">pktHdrEvent</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="acdf18a76e0bed7bae532a2708fc559da"></a><!-- doxytag: member="IGbE::RxDescCache::splitCount" ref="acdf18a76e0bed7bae532a2708fc559da" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classIGbE_1_1RxDescCache.html#acdf18a76e0bed7bae532a2708fc559da">splitCount</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Variable to head with header/data completion events </p>

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>dev/<a class="el" href="i8254xGBe_8hh_source.html">i8254xGBe.hh</a></li>
<li>dev/<a class="el" href="i8254xGBe_8cc.html">i8254xGBe.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
