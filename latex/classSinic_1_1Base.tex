\hypertarget{classSinic_1_1Base}{
\section{クラス Base}
\label{classSinic_1_1Base}\index{Sinic::Base@{Sinic::Base}}
}


{\ttfamily \#include $<$sinic.hh$>$}Baseに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=11cm]{classSinic_1_1Base}
\end{center}
\end{figure}
\subsection*{Public 型}
\begin{DoxyCompactItemize}
\item 
typedef SinicParams \hyperlink{classSinic_1_1Base_ae32fbee6dea75ffbb01b7d869c7bedad}{Params}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classSinic_1_1Base_a53e036786d17361be4c7320d39c99b84}{serialize} (std::ostream \&os)
\item 
virtual void \hyperlink{classSinic_1_1Base_af22e5d6d660b97db37003ac61ac4ee49}{unserialize} (\hyperlink{classCheckpoint}{Checkpoint} $\ast$cp, const std::string \&section)
\item 
const \hyperlink{classSinic_1_1Base_ae32fbee6dea75ffbb01b7d869c7bedad}{Params} $\ast$ \hyperlink{classSinic_1_1Base_acd3c3feb78ae7a8f88fe0f110a718dff}{params} () const 
\item 
\hyperlink{classSinic_1_1Base_ae02136eda3d063396056b352cc26f7e6}{Base} (const \hyperlink{classSinic_1_1Base_ae32fbee6dea75ffbb01b7d869c7bedad}{Params} $\ast$p)
\end{DoxyCompactItemize}
\subsection*{Protected 型}
\begin{DoxyCompactItemize}
\item 
typedef \hyperlink{classEventWrapper}{EventWrapper}$<$ \hyperlink{classSinic_1_1Base}{Base},\&Base::cpuInterrupt $>$ \hyperlink{classSinic_1_1Base_a09f9d93e16b939356647836884f8f47f}{IntrEvent}
\end{DoxyCompactItemize}
\subsection*{Protected メソッド}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classSinic_1_1Base_af1fc872917f4ac5efa0d55c5c139bc9a}{cpuIntrPost} (\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} when)
\item 
void \hyperlink{classSinic_1_1Base_a6191ac616bb71f81aeb9a72898f5207f}{cpuInterrupt} ()
\item 
void \hyperlink{classSinic_1_1Base_ab1873826f52c78bed89f2ee53382a4c2}{cpuIntrClear} ()
\item 
bool \hyperlink{classSinic_1_1Base_a8f53e358ba260670dbc7296b35482316}{cpuIntrPending} () const 
\item 
void \hyperlink{classSinic_1_1Base_aa1dc801f063bc87ddb1cf8c618ec692e}{cpuIntrAck} ()
\end{DoxyCompactItemize}
\subsection*{Protected 変数}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classSinic_1_1Base_a62cd12a758780749d1ed0ec4d4cfbe71}{rxEnable}
\item 
bool \hyperlink{classSinic_1_1Base_a950ab5d638f497b596eacdbf60bcb3f0}{txEnable}
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classSinic_1_1Base_a2c0cc3d9993d1f77cdb0902bc5e257a9}{intrDelay}
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classSinic_1_1Base_ad967cc729c22843df7961315b2fdab72}{intrTick}
\item 
bool \hyperlink{classSinic_1_1Base_a8bac804ce4074a5297817a10e2a11110}{cpuIntrEnable}
\item 
bool \hyperlink{classSinic_1_1Base_aa3e6b7b45f86d3fcd5565d6c960dbfa7}{cpuPendingIntr}
\item 
\hyperlink{classEventWrapper}{IntrEvent} $\ast$ \hyperlink{classSinic_1_1Base_a3839fcc574c7379ba7ec297aba0396e2}{intrEvent}
\item 
\hyperlink{classSinic_1_1Interface}{Interface} $\ast$ \hyperlink{classSinic_1_1Base_a98d75f7466a1c032c9ba46044c3ad05e}{interface}
\end{DoxyCompactItemize}
\subsection*{フレンド}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classSinic_1_1Base_ae03991571cb7e9ffd0046e10275338fb}{IntrEvent::process} ()
\end{DoxyCompactItemize}


\subsection{型定義}
\hypertarget{classSinic_1_1Base_a09f9d93e16b939356647836884f8f47f}{
\index{Sinic::Base@{Sinic::Base}!IntrEvent@{IntrEvent}}
\index{IntrEvent@{IntrEvent}!Sinic::Base@{Sinic::Base}}
\subsubsection[{IntrEvent}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf EventWrapper}$<${\bf Base}, \&Base::cpuInterrupt$>$ {\bf IntrEvent}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSinic_1_1Base_a09f9d93e16b939356647836884f8f47f}
\hypertarget{classSinic_1_1Base_ae32fbee6dea75ffbb01b7d869c7bedad}{
\index{Sinic::Base@{Sinic::Base}!Params@{Params}}
\index{Params@{Params}!Sinic::Base@{Sinic::Base}}
\subsubsection[{Params}]{\setlength{\rightskip}{0pt plus 5cm}typedef SinicParams {\bf Params}}}
\label{classSinic_1_1Base_ae32fbee6dea75ffbb01b7d869c7bedad}
Construction/Destruction/Parameters 

\hyperlink{classEtherDevice_afcf43c7944288000e850f783bdd66b9d}{EtherDevice}を再定義しています。

\subsection{コンストラクタとデストラクタ}
\hypertarget{classSinic_1_1Base_ae02136eda3d063396056b352cc26f7e6}{
\index{Sinic::Base@{Sinic::Base}!Base@{Base}}
\index{Base@{Base}!Sinic::Base@{Sinic::Base}}
\subsubsection[{Base}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Base} (const {\bf Params} $\ast$ {\em p})}}
\label{classSinic_1_1Base_ae02136eda3d063396056b352cc26f7e6}



\begin{DoxyCode}
81     : EtherDevBase(p), rxEnable(false), txEnable(false),
82       intrDelay(p->intr_delay), intrTick(0), cpuIntrEnable(false),
83       cpuPendingIntr(false), intrEvent(0), interface(NULL)
84 {
85 }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classSinic_1_1Base_a6191ac616bb71f81aeb9a72898f5207f}{
\index{Sinic::Base@{Sinic::Base}!cpuInterrupt@{cpuInterrupt}}
\index{cpuInterrupt@{cpuInterrupt}!Sinic::Base@{Sinic::Base}}
\subsubsection[{cpuInterrupt}]{\setlength{\rightskip}{0pt plus 5cm}void cpuInterrupt ()\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSinic_1_1Base_a6191ac616bb71f81aeb9a72898f5207f}



\begin{DoxyCode}
545 {
546     assert(intrTick == curTick());
547 
548     // Whether or not there's a pending interrupt, we don't care about
549     // it anymore
550     intrEvent = 0;
551     intrTick = 0;
552 
553     // Don't send an interrupt if there's already one
554     if (cpuPendingIntr) {
555         DPRINTF(EthernetIntr,
556                 "would send an interrupt now, but there's already pending\n");
557     } else {
558         // Send interrupt
559         cpuPendingIntr = true;
560 
561         DPRINTF(EthernetIntr, "posting interrupt\n");
562         intrPost();
563     }
564 }
\end{DoxyCode}
\hypertarget{classSinic_1_1Base_aa1dc801f063bc87ddb1cf8c618ec692e}{
\index{Sinic::Base@{Sinic::Base}!cpuIntrAck@{cpuIntrAck}}
\index{cpuIntrAck@{cpuIntrAck}!Sinic::Base@{Sinic::Base}}
\subsubsection[{cpuIntrAck}]{\setlength{\rightskip}{0pt plus 5cm}void cpuIntrAck ()\hspace{0.3cm}{\ttfamily  \mbox{[}inline, protected\mbox{]}}}}
\label{classSinic_1_1Base_aa1dc801f063bc87ddb1cf8c618ec692e}



\begin{DoxyCode}
70 { cpuIntrClear(); }
\end{DoxyCode}
\hypertarget{classSinic_1_1Base_ab1873826f52c78bed89f2ee53382a4c2}{
\index{Sinic::Base@{Sinic::Base}!cpuIntrClear@{cpuIntrClear}}
\index{cpuIntrClear@{cpuIntrClear}!Sinic::Base@{Sinic::Base}}
\subsubsection[{cpuIntrClear}]{\setlength{\rightskip}{0pt plus 5cm}void cpuIntrClear ()\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSinic_1_1Base_ab1873826f52c78bed89f2ee53382a4c2}



\begin{DoxyCode}
568 {
569     if (!cpuPendingIntr)
570         return;
571 
572     if (intrEvent) {
573         intrEvent->squash();
574         intrEvent = 0;
575     }
576 
577     intrTick = 0;
578 
579     cpuPendingIntr = false;
580 
581     DPRINTF(EthernetIntr, "clearing cchip interrupt\n");
582     intrClear();
583 }
\end{DoxyCode}
\hypertarget{classSinic_1_1Base_a8f53e358ba260670dbc7296b35482316}{
\index{Sinic::Base@{Sinic::Base}!cpuIntrPending@{cpuIntrPending}}
\index{cpuIntrPending@{cpuIntrPending}!Sinic::Base@{Sinic::Base}}
\subsubsection[{cpuIntrPending}]{\setlength{\rightskip}{0pt plus 5cm}bool cpuIntrPending () const\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSinic_1_1Base_a8f53e358ba260670dbc7296b35482316}



\begin{DoxyCode}
587 { return cpuPendingIntr; }
\end{DoxyCode}
\hypertarget{classSinic_1_1Base_af1fc872917f4ac5efa0d55c5c139bc9a}{
\index{Sinic::Base@{Sinic::Base}!cpuIntrPost@{cpuIntrPost}}
\index{cpuIntrPost@{cpuIntrPost}!Sinic::Base@{Sinic::Base}}
\subsubsection[{cpuIntrPost}]{\setlength{\rightskip}{0pt plus 5cm}void cpuIntrPost ({\bf Tick} {\em when})\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSinic_1_1Base_af1fc872917f4ac5efa0d55c5c139bc9a}


\begin{Desc}
\item[\hyperlink{todo__todo000070}{TODO}]this warning should be removed and the intrTick code should be fixed. \end{Desc}



\begin{DoxyCode}
504 {
505     // If the interrupt you want to post is later than an interrupt
506     // already scheduled, just let it post in the coming one and don't
507     // schedule another.
508     // HOWEVER, must be sure that the scheduled intrTick is in the
509     // future (this was formerly the source of a bug)
514     assert(when >= curTick());
515     assert(intrTick >= curTick() || intrTick == 0);
516     if (!cpuIntrEnable) {
517         DPRINTF(EthernetIntr, "interrupts not enabled.\n",
518                 intrTick);
519         return;
520     }
521 
522     if (when > intrTick && intrTick != 0) {
523         DPRINTF(EthernetIntr, "don't need to schedule event...intrTick=%d\n",
524                 intrTick);
525         return;
526     }
527 
528     intrTick = when;
529     if (intrTick < curTick()) {
530         Debug::breakpoint();
531         intrTick = curTick();
532     }
533 
534     DPRINTF(EthernetIntr, "going to schedule an interrupt for intrTick=%d\n",
535             intrTick);
536 
537     if (intrEvent)
538         intrEvent->squash();
539     intrEvent = new IntrEvent(this, true);
540     schedule(intrEvent, intrTick);
541 }
\end{DoxyCode}
\hypertarget{classSinic_1_1Base_acd3c3feb78ae7a8f88fe0f110a718dff}{
\index{Sinic::Base@{Sinic::Base}!params@{params}}
\index{params@{params}!Sinic::Base@{Sinic::Base}}
\subsubsection[{params}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Params}$\ast$ params () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classSinic_1_1Base_acd3c3feb78ae7a8f88fe0f110a718dff}


\hyperlink{classEtherDevBase_a24c177ef5d1124c3ff3e68a7e53532cf}{EtherDevBase}を再定義しています。


\begin{DoxyCode}
84 { return (const Params *)_params; }
\end{DoxyCode}
\hypertarget{classSinic_1_1Base_a53e036786d17361be4c7320d39c99b84}{
\index{Sinic::Base@{Sinic::Base}!serialize@{serialize}}
\index{serialize@{serialize}!Sinic::Base@{Sinic::Base}}
\subsubsection[{serialize}]{\setlength{\rightskip}{0pt plus 5cm}void serialize (std::ostream \& {\em os})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classSinic_1_1Base_a53e036786d17361be4c7320d39c99b84}
Serialization stuff 

\hyperlink{classPciDevice_a53e036786d17361be4c7320d39c99b84}{PciDevice}を再定義しています。

\hyperlink{classSinic_1_1Device_a53e036786d17361be4c7320d39c99b84}{Device}で再定義されています。


\begin{DoxyCode}
1265 {
1266     // Serialize the PciDevice base class
1267     PciDevice::serialize(os);
1268 
1269     SERIALIZE_SCALAR(rxEnable);
1270     SERIALIZE_SCALAR(txEnable);
1271     SERIALIZE_SCALAR(cpuIntrEnable);
1272 
1273     /*
1274      * Keep track of pending interrupt status.
1275      */
1276     SERIALIZE_SCALAR(intrTick);
1277     SERIALIZE_SCALAR(cpuPendingIntr);
1278     Tick intrEventTick = 0;
1279     if (intrEvent)
1280         intrEventTick = intrEvent->when();
1281     SERIALIZE_SCALAR(intrEventTick);
1282 }
\end{DoxyCode}
\hypertarget{classSinic_1_1Base_af22e5d6d660b97db37003ac61ac4ee49}{
\index{Sinic::Base@{Sinic::Base}!unserialize@{unserialize}}
\index{unserialize@{unserialize}!Sinic::Base@{Sinic::Base}}
\subsubsection[{unserialize}]{\setlength{\rightskip}{0pt plus 5cm}void unserialize ({\bf Checkpoint} $\ast$ {\em cp}, \/  const std::string \& {\em section})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classSinic_1_1Base_af22e5d6d660b97db37003ac61ac4ee49}
Reconstruct the state of this object from a checkpoint. 
\begin{DoxyParams}{引数}
\item[{\em \hyperlink{namespacecp}{cp}}]The checkpoint use. \item[{\em section}]The section name of this object \end{DoxyParams}


\hyperlink{classPciDevice_af22e5d6d660b97db37003ac61ac4ee49}{PciDevice}を再定義しています。

\hyperlink{classSinic_1_1Device_af22e5d6d660b97db37003ac61ac4ee49}{Device}で再定義されています。


\begin{DoxyCode}
1286 {
1287     // Unserialize the PciDevice base class
1288     PciDevice::unserialize(cp, section);
1289 
1290     UNSERIALIZE_SCALAR(rxEnable);
1291     UNSERIALIZE_SCALAR(txEnable);
1292     UNSERIALIZE_SCALAR(cpuIntrEnable);
1293 
1294     /*
1295      * Keep track of pending interrupt status.
1296      */
1297     UNSERIALIZE_SCALAR(intrTick);
1298     UNSERIALIZE_SCALAR(cpuPendingIntr);
1299     Tick intrEventTick;
1300     UNSERIALIZE_SCALAR(intrEventTick);
1301     if (intrEventTick) {
1302         intrEvent = new IntrEvent(this, true);
1303         schedule(intrEvent, intrEventTick);
1304     }
1305 }
\end{DoxyCode}


\subsection{フレンドと関連する関数}
\hypertarget{classSinic_1_1Base_ae03991571cb7e9ffd0046e10275338fb}{
\index{Sinic::Base@{Sinic::Base}!IntrEvent::process@{IntrEvent::process}}
\index{IntrEvent::process@{IntrEvent::process}!Sinic::Base@{Sinic::Base}}
\subsubsection[{IntrEvent::process}]{\setlength{\rightskip}{0pt plus 5cm}void IntrEvent::process ()\hspace{0.3cm}{\ttfamily  \mbox{[}friend\mbox{]}}}}
\label{classSinic_1_1Base_ae03991571cb7e9ffd0046e10275338fb}


\subsection{変数}
\hypertarget{classSinic_1_1Base_a8bac804ce4074a5297817a10e2a11110}{
\index{Sinic::Base@{Sinic::Base}!cpuIntrEnable@{cpuIntrEnable}}
\index{cpuIntrEnable@{cpuIntrEnable}!Sinic::Base@{Sinic::Base}}
\subsubsection[{cpuIntrEnable}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf cpuIntrEnable}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSinic_1_1Base_a8bac804ce4074a5297817a10e2a11110}
\hypertarget{classSinic_1_1Base_aa3e6b7b45f86d3fcd5565d6c960dbfa7}{
\index{Sinic::Base@{Sinic::Base}!cpuPendingIntr@{cpuPendingIntr}}
\index{cpuPendingIntr@{cpuPendingIntr}!Sinic::Base@{Sinic::Base}}
\subsubsection[{cpuPendingIntr}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf cpuPendingIntr}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSinic_1_1Base_aa3e6b7b45f86d3fcd5565d6c960dbfa7}
\hypertarget{classSinic_1_1Base_a98d75f7466a1c032c9ba46044c3ad05e}{
\index{Sinic::Base@{Sinic::Base}!interface@{interface}}
\index{interface@{interface}!Sinic::Base@{Sinic::Base}}
\subsubsection[{interface}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Interface}$\ast$ {\bf interface}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSinic_1_1Base_a98d75f7466a1c032c9ba46044c3ad05e}
\hypertarget{classSinic_1_1Base_a2c0cc3d9993d1f77cdb0902bc5e257a9}{
\index{Sinic::Base@{Sinic::Base}!intrDelay@{intrDelay}}
\index{intrDelay@{intrDelay}!Sinic::Base@{Sinic::Base}}
\subsubsection[{intrDelay}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} {\bf intrDelay}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSinic_1_1Base_a2c0cc3d9993d1f77cdb0902bc5e257a9}
\hypertarget{classSinic_1_1Base_a3839fcc574c7379ba7ec297aba0396e2}{
\index{Sinic::Base@{Sinic::Base}!intrEvent@{intrEvent}}
\index{intrEvent@{intrEvent}!Sinic::Base@{Sinic::Base}}
\subsubsection[{intrEvent}]{\setlength{\rightskip}{0pt plus 5cm}{\bf IntrEvent}$\ast$ {\bf intrEvent}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSinic_1_1Base_a3839fcc574c7379ba7ec297aba0396e2}
\hypertarget{classSinic_1_1Base_ad967cc729c22843df7961315b2fdab72}{
\index{Sinic::Base@{Sinic::Base}!intrTick@{intrTick}}
\index{intrTick@{intrTick}!Sinic::Base@{Sinic::Base}}
\subsubsection[{intrTick}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} {\bf intrTick}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSinic_1_1Base_ad967cc729c22843df7961315b2fdab72}
\hypertarget{classSinic_1_1Base_a62cd12a758780749d1ed0ec4d4cfbe71}{
\index{Sinic::Base@{Sinic::Base}!rxEnable@{rxEnable}}
\index{rxEnable@{rxEnable}!Sinic::Base@{Sinic::Base}}
\subsubsection[{rxEnable}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf rxEnable}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSinic_1_1Base_a62cd12a758780749d1ed0ec4d4cfbe71}
\hypertarget{classSinic_1_1Base_a950ab5d638f497b596eacdbf60bcb3f0}{
\index{Sinic::Base@{Sinic::Base}!txEnable@{txEnable}}
\index{txEnable@{txEnable}!Sinic::Base@{Sinic::Base}}
\subsubsection[{txEnable}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf txEnable}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSinic_1_1Base_a950ab5d638f497b596eacdbf60bcb3f0}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
dev/\hyperlink{sinic_8hh}{sinic.hh}\item 
dev/\hyperlink{sinic_8cc}{sinic.cc}\end{DoxyCompactItemize}
