<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス UDelayEvent</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespaceLinux.html">Linux</a>::<a class="el" href="classLinux_1_1UDelayEvent.html">UDelayEvent</a>
  </div>
</div>
<div class="contents">
<h1>クラス UDelayEvent</h1><!-- doxytag: class="Linux::UDelayEvent" --><!-- doxytag: inherits="SkipFuncEvent" -->
<p><code>#include &lt;<a class="el" href="events_8hh_source.html">events.hh</a>&gt;</code></p>
<div class="dynheader">
UDelayEventに対する継承グラフ</div>
<div class="dynsection">
 <div class="center">
  <img src="classLinux_1_1UDelayEvent.gif" usemap="#UDelayEvent_map" alt=""/>
  <map id="UDelayEvent_map" name="UDelayEvent_map">
<area href="classSkipFuncEvent.html" alt="SkipFuncEvent" shape="rect" coords="0,56,97,80"/>
<area href="classPCEvent.html" alt="PCEvent" shape="rect" coords="0,0,97,24"/>
</map>
 </div>
</div>

<p><a href="classLinux_1_1UDelayEvent-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinux_1_1UDelayEvent.html#a0b3c05abde3a4fc6b3ee00842bc8cd19">UDelayEvent</a> (<a class="el" href="classPCEventQueue.html">PCEventQueue</a> *q, const std::string &amp;desc, <a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> addr, uint64_t mult, uint64_t div)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinux_1_1UDelayEvent.html#a7f346b2e15a406283e587b1123735488">process</a> (<a class="el" href="classThreadContext.html">ThreadContext</a> *xc)</td></tr>
<tr><td colspan="2"><h2>Private 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinux_1_1UDelayEvent.html#a53a99750094ff662ba0e0ce44b16879d">argDivToNs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLinux_1_1UDelayEvent.html#a5a6e4a5afa3827ac67897e3e2ca27291">argMultToNs</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>説明</h2>
<p>A class to skip udelay() and related calls in the kernel. This class has two additional parameters that take the argument to udelay and manipulated it to come up with ns and eventually ticks to quiesce for. See descriptions of argDivToNs and argMultToNs below. </p>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="a0b3c05abde3a4fc6b3ee00842bc8cd19"></a><!-- doxytag: member="Linux::UDelayEvent::UDelayEvent" ref="a0b3c05abde3a4fc6b3ee00842bc8cd19" args="(PCEventQueue *q, const std::string &amp;desc, Addr addr, uint64_t mult, uint64_t div)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classLinux_1_1UDelayEvent.html">UDelayEvent</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPCEventQueue.html">PCEventQueue</a> *&nbsp;</td>
          <td class="paramname"> <em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>mult</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>div</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00069"></a>00069         : <a class="code" href="classSkipFuncEvent.html">SkipFuncEvent</a>(q, desc, <a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a>), <a class="code" href="classLinux_1_1UDelayEvent.html#a53a99750094ff662ba0e0ce44b16879d">argDivToNs</a>(div), <a class="code" href="classLinux_1_1UDelayEvent.html#a5a6e4a5afa3827ac67897e3e2ca27291">argMultToNs</a>(mult) {}
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="a7f346b2e15a406283e587b1123735488"></a><!-- doxytag: member="Linux::UDelayEvent::process" ref="a7f346b2e15a406283e587b1123735488" args="(ThreadContext *xc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void process </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>xc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classSkipFuncEvent.html#ad66a9d5ec7cfe597b848a17c0df5cc28">SkipFuncEvent</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00074"></a>00074 {
<a name="l00075"></a>00075     <span class="keywordtype">int</span> arg_num  = 0;
<a name="l00076"></a>00076 
<a name="l00077"></a>00077     <span class="comment">// Get the time in native size</span>
<a name="l00078"></a>00078     uint64_t time = <a class="code" href="namespaceAlphaISA.html#a3f9560369e934be05b1dd8f23fbd6104">TheISA::getArgument</a>(<a class="code" href="namespaceArmISA.html#a5aff829af55e65b802d83dfcef4e9dd0">tc</a>, arg_num,  (uint16_t)-1, <span class="keyword">false</span>);
<a name="l00079"></a>00079 
<a name="l00080"></a>00080     <span class="comment">// convert parameter to ns</span>
<a name="l00081"></a>00081     <span class="keywordflow">if</span> (argDivToNs)
<a name="l00082"></a>00082         time /= <a class="code" href="classLinux_1_1UDelayEvent.html#a53a99750094ff662ba0e0ce44b16879d">argDivToNs</a>;
<a name="l00083"></a>00083 
<a name="l00084"></a>00084     time *= <a class="code" href="classLinux_1_1UDelayEvent.html#a5a6e4a5afa3827ac67897e3e2ca27291">argMultToNs</a>;
<a name="l00085"></a>00085 
<a name="l00086"></a>00086     <a class="code" href="classSkipFuncEvent.html#ad66a9d5ec7cfe597b848a17c0df5cc28">SkipFuncEvent::process</a>(<a class="code" href="namespaceArmISA.html#a5aff829af55e65b802d83dfcef4e9dd0">tc</a>);
<a name="l00087"></a>00087 
<a name="l00088"></a>00088     <a class="code" href="namespacePseudoInst.html#a1783da8f7e3427cb3656ae88329c9106">PseudoInst::quiesceNs</a>(<a class="code" href="namespaceArmISA.html#a5aff829af55e65b802d83dfcef4e9dd0">tc</a>, time);
<a name="l00089"></a>00089 }
</pre></div></p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="a53a99750094ff662ba0e0ce44b16879d"></a><!-- doxytag: member="Linux::UDelayEvent::argDivToNs" ref="a53a99750094ff662ba0e0ce44b16879d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t argDivToNs<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>value to divide arg by to create ns. This is present beacues the linux kernel code sometime precomputes the first multiply that is done in udelay() if the parameter is a constant. We need to undo it so here is how. </p>

</div>
</div>
<a class="anchor" id="a5a6e4a5afa3827ac67897e3e2ca27291"></a><!-- doxytag: member="Linux::UDelayEvent::argMultToNs" ref="a5a6e4a5afa3827ac67897e3e2ca27291" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t argMultToNs<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>value to multiple arg by to create ns. Nominally, this is 1000 to convert us to ns, but since linux can do some preprocessing of constant values something else might be required. </p>

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>kern/linux/<a class="el" href="events_8hh_source.html">events.hh</a></li>
<li>kern/linux/<a class="el" href="events_8cc.html">events.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
