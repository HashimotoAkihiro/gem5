\hypertarget{classPowerISA_1_1TLB}{
\section{クラス TLB}
\label{classPowerISA_1_1TLB}\index{PowerISA::TLB@{PowerISA::TLB}}
}


{\ttfamily \#include $<$tlb.hh$>$}TLBに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=4cm]{classPowerISA_1_1TLB}
\end{center}
\end{figure}
\subsection*{Public 型}
\begin{DoxyCompactItemize}
\item 
typedef PowerTLBParams \hyperlink{classPowerISA_1_1TLB_a483872f6d75119b1124c758297acc6da}{Params}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classPowerISA_1_1TLB_acb886bd3c59f00c21be9ceaaf25dab97}{TLB} (const \hyperlink{classPowerISA_1_1TLB_a483872f6d75119b1124c758297acc6da}{Params} $\ast$p)
\item 
virtual \hyperlink{classPowerISA_1_1TLB_a18a1722ab7889997b15fd7b9fc33c7ff}{$\sim$TLB} ()
\item 
void \hyperlink{classPowerISA_1_1TLB_a15b6c15c1be2ca4de3e65772a02aa29f}{takeOverFrom} (\hyperlink{classBaseTLB}{BaseTLB} $\ast$otlb)
\item 
int \hyperlink{classPowerISA_1_1TLB_a4dd1511c095e58173f0f7b78eeded1fe}{probeEntry} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} vpn, uint8\_\-t) const 
\item 
\hyperlink{structPowerISA_1_1PTE}{PowerISA::PTE} $\ast$ \hyperlink{classPowerISA_1_1TLB_a3558ac34fa4e174033d1938edef03e4e}{getEntry} (unsigned) const 
\item 
int \hyperlink{classPowerISA_1_1TLB_ae121404a6cfcf714e05fe2231ce4c7fc}{getsize} () const 
\item 
\hyperlink{structPowerISA_1_1PTE}{PowerISA::PTE} \& \hyperlink{classPowerISA_1_1TLB_a966acb0c92e034836f2ee489cb83ddd3}{index} (bool advance=true)
\item 
void \hyperlink{classPowerISA_1_1TLB_a347b46782c03effd910740f90bd915b4}{insert} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} vaddr, \hyperlink{structPowerISA_1_1PTE}{PowerISA::PTE} \&pte)
\item 
void \hyperlink{classPowerISA_1_1TLB_a79de97f3cd3b55bcd2fbf31c5d3b8a12}{insertAt} (\hyperlink{structPowerISA_1_1PTE}{PowerISA::PTE} \&pte, unsigned \hyperlink{TypeDefines_8hh_a39642de41f3574937f399f4fab25ba18}{Index}, int \_\-smallPages)
\item 
void \hyperlink{classPowerISA_1_1TLB_aca1483a67aee5a91e442f7131d66bcbd}{flushAll} ()
\item 
void \hyperlink{classPowerISA_1_1TLB_a2d698ff909513b48a1263f8a5440e067}{demapPage} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} vaddr, uint64\_\-t asn)
\item 
\hyperlink{classRefCountingPtr}{Fault} \hyperlink{classPowerISA_1_1TLB_a072afd8ed455dade4c25a85510e5a4da}{translateInst} (\hyperlink{classRequest}{RequestPtr} req, \hyperlink{classThreadContext}{ThreadContext} $\ast$tc)
\item 
\hyperlink{classRefCountingPtr}{Fault} \hyperlink{classPowerISA_1_1TLB_ad54aef66412f77e2a15a621a126dfb52}{translateData} (\hyperlink{classRequest}{RequestPtr} req, \hyperlink{classThreadContext}{ThreadContext} $\ast$tc, bool write)
\item 
\hyperlink{classRefCountingPtr}{Fault} \hyperlink{classPowerISA_1_1TLB_ad54e01e3c0a1613098a76b7f92e5be93}{translateAtomic} (\hyperlink{classRequest}{RequestPtr} req, \hyperlink{classThreadContext}{ThreadContext} $\ast$tc, \hyperlink{classBaseTLB_a46c8a310cf4c094f8c80e1cb8dc1f911}{Mode} mode)
\item 
void \hyperlink{classPowerISA_1_1TLB_ae52f7e465748883695d2b4f432a13652}{translateTiming} (\hyperlink{classRequest}{RequestPtr} req, \hyperlink{classThreadContext}{ThreadContext} $\ast$tc, \hyperlink{classBaseTLB_1_1Translation}{Translation} $\ast$translation, \hyperlink{classBaseTLB_a46c8a310cf4c094f8c80e1cb8dc1f911}{Mode} mode)
\item 
\hyperlink{classRefCountingPtr}{Fault} \hyperlink{classPowerISA_1_1TLB_a26658814c6c9034665aae19cf25545bb}{translateFunctional} (\hyperlink{classRequest}{RequestPtr} req, \hyperlink{classThreadContext}{ThreadContext} $\ast$tc, \hyperlink{classBaseTLB_a46c8a310cf4c094f8c80e1cb8dc1f911}{Mode} mode)
\item 
\hyperlink{classRefCountingPtr}{Fault} \hyperlink{classPowerISA_1_1TLB_ae199d95c42e036851a8a0543c6d6d2e3}{finalizePhysical} (\hyperlink{classRequest}{RequestPtr} req, \hyperlink{classThreadContext}{ThreadContext} $\ast$tc, \hyperlink{classBaseTLB_a46c8a310cf4c094f8c80e1cb8dc1f911}{Mode} mode) const 
\item 
void \hyperlink{classPowerISA_1_1TLB_a53e036786d17361be4c7320d39c99b84}{serialize} (std::ostream \&os)
\item 
void \hyperlink{classPowerISA_1_1TLB_af22e5d6d660b97db37003ac61ac4ee49}{unserialize} (\hyperlink{classCheckpoint}{Checkpoint} $\ast$cp, const std::string \&section)
\item 
void \hyperlink{classPowerISA_1_1TLB_a4dc637449366fcdfc4e764cdf12d9b11}{regStats} ()
\end{DoxyCompactItemize}
\subsection*{Static Public メソッド}
\begin{DoxyCompactItemize}
\item 
static bool \hyperlink{classPowerISA_1_1TLB_a3e576c3e0d39dfca708baea44ebf0617}{validVirtualAddress} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} vaddr)
\item 
static \hyperlink{classRefCountingPtr}{Fault} \hyperlink{classPowerISA_1_1TLB_a40ebca6d00905ad6f0ea93be1621a1bd}{checkCacheability} (\hyperlink{classRequest}{RequestPtr} \&req)
\end{DoxyCompactItemize}
\subsection*{Public 変数}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{classPowerISA_1_1TLB_a005f53c9e1a19cb4bb0b792e490416b9}{smallPages}
\end{DoxyCompactItemize}
\subsection*{Protected 型}
\begin{DoxyCompactItemize}
\item 
typedef std::multimap$<$ \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr}, int $>$ \hyperlink{classPowerISA_1_1TLB_a18f97eb978c56b976c0eadbf9212d206}{PageTable}
\end{DoxyCompactItemize}
\subsection*{Protected メソッド}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classPowerISA_1_1TLB_aeb5ba263cf2621ed26767046ab78a1dc}{nextnlu} ()
\item 
\hyperlink{structPowerISA_1_1PTE}{PowerISA::PTE} $\ast$ \hyperlink{classPowerISA_1_1TLB_aa6743f978416251dd93c6dc9ff1d5e82}{lookup} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} vpn, uint8\_\-t asn) const 
\end{DoxyCompactItemize}
\subsection*{Protected 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classPageTable}{PageTable} \hyperlink{classPowerISA_1_1TLB_a4d5c35d797dc31aad758dee75916238f}{lookupTable}
\item 
\hyperlink{structPowerISA_1_1PTE}{PowerISA::PTE} $\ast$ \hyperlink{classPowerISA_1_1TLB_aaa2455839f9586ce25fefa06fdc4e952}{table}
\item 
int \hyperlink{classPowerISA_1_1TLB_a439227feff9d7f55384e8780cfc2eb82}{size}
\item 
int \hyperlink{classPowerISA_1_1TLB_a4a3ee7780f871ead437ece349ddc2147}{nlu}
\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classPowerISA_1_1TLB_a766fdbd2ab7d588c3c9fa426ce395ed6}{read\_\-hits}
\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classPowerISA_1_1TLB_a6fb393c9489d735739552c2a351f07f4}{read\_\-misses}
\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classPowerISA_1_1TLB_af50813bd757bd59aa3618aa99377760a}{read\_\-acv}
\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classPowerISA_1_1TLB_a2c9dc5a6baf7fbd1ae7fc00b0a57fe56}{read\_\-accesses}
\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classPowerISA_1_1TLB_ab3172bfd014e75dcad1b0a2a91de59dd}{write\_\-hits}
\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classPowerISA_1_1TLB_af8519a07f8f1f76c8fff9c9a1aaa4638}{write\_\-misses}
\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classPowerISA_1_1TLB_a764f5ef97bfcb1ba3ad05704de5a3a32}{write\_\-acv}
\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classPowerISA_1_1TLB_af3301e9dd0bb91de161b7bafefade7f3}{write\_\-accesses}
\item 
\hyperlink{classStats_1_1Formula}{Stats::Formula} \hyperlink{classPowerISA_1_1TLB_a224eed77bfb7a27359c9c3c1acbdbfaa}{hits}
\item 
\hyperlink{classStats_1_1Formula}{Stats::Formula} \hyperlink{classPowerISA_1_1TLB_a4b8b96257f1e97cd5730673f38f9571c}{misses}
\item 
\hyperlink{classStats_1_1Formula}{Stats::Formula} \hyperlink{classPowerISA_1_1TLB_a1929e1032289676f78e07e4c6bc55369}{accesses}
\end{DoxyCompactItemize}


\subsection{型定義}
\hypertarget{classPowerISA_1_1TLB_a18f97eb978c56b976c0eadbf9212d206}{
\index{PowerISA::TLB@{PowerISA::TLB}!PageTable@{PageTable}}
\index{PageTable@{PageTable}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{PageTable}]{\setlength{\rightskip}{0pt plus 5cm}typedef std::multimap$<${\bf Addr}, int$>$ {\bf PageTable}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classPowerISA_1_1TLB_a18f97eb978c56b976c0eadbf9212d206}
\hypertarget{classPowerISA_1_1TLB_a483872f6d75119b1124c758297acc6da}{
\index{PowerISA::TLB@{PowerISA::TLB}!Params@{Params}}
\index{Params@{Params}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{Params}]{\setlength{\rightskip}{0pt plus 5cm}typedef PowerTLBParams {\bf Params}}}
\label{classPowerISA_1_1TLB_a483872f6d75119b1124c758297acc6da}


\hyperlink{classSimObject_a0f0761d2db586a23bb2a2880b8f387bb}{SimObject}を再定義しています。

\subsection{コンストラクタとデストラクタ}
\hypertarget{classPowerISA_1_1TLB_acb886bd3c59f00c21be9ceaaf25dab97}{
\index{PowerISA::TLB@{PowerISA::TLB}!TLB@{TLB}}
\index{TLB@{TLB}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{TLB}]{\setlength{\rightskip}{0pt plus 5cm}{\bf TLB} (const {\bf Params} $\ast$ {\em p})}}
\label{classPowerISA_1_1TLB_acb886bd3c59f00c21be9ceaaf25dab97}



\begin{DoxyCode}
67     : BaseTLB(p), size(p->size), nlu(0)
68 {
69     table = new PowerISA::PTE[size];
70     memset(table, 0, sizeof(PowerISA::PTE[size]));
71     smallPages = 0;
72 }
\end{DoxyCode}
\hypertarget{classPowerISA_1_1TLB_a18a1722ab7889997b15fd7b9fc33c7ff}{
\index{PowerISA::TLB@{PowerISA::TLB}!$\sim$TLB@{$\sim$TLB}}
\index{$\sim$TLB@{$\sim$TLB}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{$\sim$TLB}]{\setlength{\rightskip}{0pt plus 5cm}$\sim${\bf TLB} ()\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classPowerISA_1_1TLB_a18a1722ab7889997b15fd7b9fc33c7ff}



\begin{DoxyCode}
75 {
76     if (table)
77         delete [] table;
78 }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classPowerISA_1_1TLB_a40ebca6d00905ad6f0ea93be1621a1bd}{
\index{PowerISA::TLB@{PowerISA::TLB}!checkCacheability@{checkCacheability}}
\index{checkCacheability@{checkCacheability}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{checkCacheability}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Fault} checkCacheability ({\bf RequestPtr} \& {\em req})\hspace{0.3cm}{\ttfamily  \mbox{[}inline, static\mbox{]}}}}
\label{classPowerISA_1_1TLB_a40ebca6d00905ad6f0ea93be1621a1bd}



\begin{DoxyCode}
148 {
149     Addr VAddrUncacheable = 0xA0000000;
150     if ((req->getVaddr() & VAddrUncacheable) == VAddrUncacheable) {
151 
152         // mark request as uncacheable
153         req->setFlags(Request::UNCACHEABLE);
154     }
155     return NoFault;
156 }
\end{DoxyCode}
\hypertarget{classPowerISA_1_1TLB_a2d698ff909513b48a1263f8a5440e067}{
\index{PowerISA::TLB@{PowerISA::TLB}!demapPage@{demapPage}}
\index{demapPage@{demapPage}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{demapPage}]{\setlength{\rightskip}{0pt plus 5cm}void demapPage ({\bf Addr} {\em vaddr}, \/  uint64\_\-t {\em asn})\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}
\label{classPowerISA_1_1TLB_a2d698ff909513b48a1263f8a5440e067}


\hyperlink{classBaseTLB_aff4b9d01b9a4712c699cfb2dd9b3b8cd}{BaseTLB}を実装しています。


\begin{DoxyCode}
153     {
154         panic("demapPage unimplemented.\n");
155     }
\end{DoxyCode}
\hypertarget{classPowerISA_1_1TLB_ae199d95c42e036851a8a0543c6d6d2e3}{
\index{PowerISA::TLB@{PowerISA::TLB}!finalizePhysical@{finalizePhysical}}
\index{finalizePhysical@{finalizePhysical}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{finalizePhysical}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Fault} finalizePhysical ({\bf RequestPtr} {\em req}, \/  {\bf ThreadContext} $\ast$ {\em tc}, \/  {\bf Mode} {\em mode}) const}}
\label{classPowerISA_1_1TLB_ae199d95c42e036851a8a0543c6d6d2e3}



\begin{DoxyCode}
338 {
339     return NoFault;
340 }
\end{DoxyCode}
\hypertarget{classPowerISA_1_1TLB_aca1483a67aee5a91e442f7131d66bcbd}{
\index{PowerISA::TLB@{PowerISA::TLB}!flushAll@{flushAll}}
\index{flushAll@{flushAll}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{flushAll}]{\setlength{\rightskip}{0pt plus 5cm}void flushAll ()\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classPowerISA_1_1TLB_aca1483a67aee5a91e442f7131d66bcbd}
Remove all entries from the \hyperlink{classPowerISA_1_1TLB}{TLB} 

\hyperlink{classBaseTLB_a5958bc92949a47d1be1088468abdc006}{BaseTLB}を実装しています。


\begin{DoxyCode}
190 {
191     DPRINTF(TLB, "flushAll\n");
192     memset(table, 0, sizeof(PowerISA::PTE[size]));
193     lookupTable.clear();
194     nlu = 0;
195 }
\end{DoxyCode}
\hypertarget{classPowerISA_1_1TLB_a3558ac34fa4e174033d1938edef03e4e}{
\index{PowerISA::TLB@{PowerISA::TLB}!getEntry@{getEntry}}
\index{getEntry@{getEntry}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{getEntry}]{\setlength{\rightskip}{0pt plus 5cm}{\bf PowerISA::PTE} $\ast$ getEntry (unsigned {\em Index}) const}}
\label{classPowerISA_1_1TLB_a3558ac34fa4e174033d1938edef03e4e}



\begin{DoxyCode}
112 {
113     // Make sure that Index is valid
114     assert(Index<size);
115     return &table[Index];
116 }
\end{DoxyCode}
\hypertarget{classPowerISA_1_1TLB_ae121404a6cfcf714e05fe2231ce4c7fc}{
\index{PowerISA::TLB@{PowerISA::TLB}!getsize@{getsize}}
\index{getsize@{getsize}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{getsize}]{\setlength{\rightskip}{0pt plus 5cm}int getsize () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classPowerISA_1_1TLB_ae121404a6cfcf714e05fe2231ce4c7fc}



\begin{DoxyCode}
142     {
143         return size;
144     }
\end{DoxyCode}
\hypertarget{classPowerISA_1_1TLB_a966acb0c92e034836f2ee489cb83ddd3}{
\index{PowerISA::TLB@{PowerISA::TLB}!index@{index}}
\index{index@{index}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{index}]{\setlength{\rightskip}{0pt plus 5cm}{\bf PowerISA::PTE} \& index (bool {\em advance} = {\ttfamily true})}}
\label{classPowerISA_1_1TLB_a966acb0c92e034836f2ee489cb83ddd3}



\begin{DoxyCode}
344 {
345     PowerISA::PTE *pte = &table[nlu];
346 
347     if (advance)
348         nextnlu();
349 
350     return *pte;
351 }
\end{DoxyCode}
\hypertarget{classPowerISA_1_1TLB_a347b46782c03effd910740f90bd915b4}{
\index{PowerISA::TLB@{PowerISA::TLB}!insert@{insert}}
\index{insert@{insert}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{insert}]{\setlength{\rightskip}{0pt plus 5cm}void insert ({\bf Addr} {\em vaddr}, \/  {\bf PowerISA::PTE} \& {\em pte})}}
\label{classPowerISA_1_1TLB_a347b46782c03effd910740f90bd915b4}



\begin{DoxyCode}
184 {
185     fatal("TLB Insert not yet implemented\n");
186 }
\end{DoxyCode}
\hypertarget{classPowerISA_1_1TLB_a79de97f3cd3b55bcd2fbf31c5d3b8a12}{
\index{PowerISA::TLB@{PowerISA::TLB}!insertAt@{insertAt}}
\index{insertAt@{insertAt}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{insertAt}]{\setlength{\rightskip}{0pt plus 5cm}void insertAt ({\bf PowerISA::PTE} \& {\em pte}, \/  unsigned {\em Index}, \/  int {\em \_\-smallPages})}}
\label{classPowerISA_1_1TLB_a79de97f3cd3b55bcd2fbf31c5d3b8a12}



\begin{DoxyCode}
160 {
161     smallPages=_smallPages;
162     if (Index > size){
163         warn("Attempted to write at index (%d) beyond TLB size (%d)",
164              Index, size);
165     } else {
166 
167         // Update TLB
168         if (table[Index].V0 || table[Index].V1) {
169 
170             // Previous entry is valid
171             PageTable::iterator i = lookupTable.find(table[Index].VPN);
172             lookupTable.erase(i);
173         }
174         table[Index]=pte;
175 
176         // Update fast lookup table
177         lookupTable.insert(make_pair(table[Index].VPN, Index));
178     }
179 }
\end{DoxyCode}
\hypertarget{classPowerISA_1_1TLB_aa6743f978416251dd93c6dc9ff1d5e82}{
\index{PowerISA::TLB@{PowerISA::TLB}!lookup@{lookup}}
\index{lookup@{lookup}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{lookup}]{\setlength{\rightskip}{0pt plus 5cm}{\bf PowerISA::PTE} $\ast$ lookup ({\bf Addr} {\em vpn}, \/  uint8\_\-t {\em asn}) const\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classPowerISA_1_1TLB_aa6743f978416251dd93c6dc9ff1d5e82}



\begin{DoxyCode}
83 {
84     // assume not found...
85     PowerISA::PTE *retval = NULL;
86     PageTable::const_iterator i = lookupTable.find(vpn);
87     if (i != lookupTable.end()) {
88         while (i->first == vpn) {
89             int index = i->second;
90             PowerISA::PTE *pte = &table[index];
91             Addr Mask = pte->Mask;
92             Addr InvMask = ~Mask;
93             Addr VPN  = pte->VPN;
94             if (((vpn & InvMask) == (VPN & InvMask))
95                && (pte->G  || (asn == pte->asid))) {
96 
97                 // We have a VPN + ASID Match
98                 retval = pte;
99                 break;
100             }
101             ++i;
102         }
103     }
104 
105     DPRINTF(TLB, "lookup %#x, asn %#x -> %s ppn %#x\n", vpn, (int)asn,
106             retval ? "hit" : "miss", retval ? retval->PFN1 : 0);
107     return retval;
108 }
\end{DoxyCode}
\hypertarget{classPowerISA_1_1TLB_aeb5ba263cf2621ed26767046ab78a1dc}{
\index{PowerISA::TLB@{PowerISA::TLB}!nextnlu@{nextnlu}}
\index{nextnlu@{nextnlu}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{nextnlu}]{\setlength{\rightskip}{0pt plus 5cm}void nextnlu ()\hspace{0.3cm}{\ttfamily  \mbox{[}inline, protected\mbox{]}}}}
\label{classPowerISA_1_1TLB_aeb5ba263cf2621ed26767046ab78a1dc}



\begin{DoxyCode}
108     {
109         if (++nlu >= size) {
110             nlu = 0;
111         }
112     }
\end{DoxyCode}
\hypertarget{classPowerISA_1_1TLB_a4dd1511c095e58173f0f7b78eeded1fe}{
\index{PowerISA::TLB@{PowerISA::TLB}!probeEntry@{probeEntry}}
\index{probeEntry@{probeEntry}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{probeEntry}]{\setlength{\rightskip}{0pt plus 5cm}int probeEntry ({\bf Addr} {\em vpn}, \/  uint8\_\-t {\em asn}) const}}
\label{classPowerISA_1_1TLB_a4dd1511c095e58173f0f7b78eeded1fe}



\begin{DoxyCode}
120 {
121     // assume not found...
122     int Ind = -1;
123     PageTable::const_iterator i = lookupTable.find(vpn);
124     if (i != lookupTable.end()) {
125         while (i->first == vpn) {
126             int index = i->second;
127             PowerISA::PTE *pte = &table[index];
128             Addr Mask = pte->Mask;
129             Addr InvMask = ~Mask;
130             Addr VPN  = pte->VPN;
131             if (((vpn & InvMask) == (VPN & InvMask))
132                 && (pte->G  || (asn == pte->asid))) {
133 
134                 // We have a VPN + ASID Match
135                 Ind = index;
136                 break;
137             }
138             ++i;
139         }
140     }
141 
142     DPRINTF(Power, "VPN: %x, asid: %d, Result of TLBP: %d\n", vpn, asn, Ind);
143     return Ind;
144 }
\end{DoxyCode}
\hypertarget{classPowerISA_1_1TLB_a4dc637449366fcdfc4e764cdf12d9b11}{
\index{PowerISA::TLB@{PowerISA::TLB}!regStats@{regStats}}
\index{regStats@{regStats}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{regStats}]{\setlength{\rightskip}{0pt plus 5cm}void regStats ()\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classPowerISA_1_1TLB_a4dc637449366fcdfc4e764cdf12d9b11}
\hyperlink{classRegister}{Register} statistics for this object. 

\hyperlink{classSimObject_a4dc637449366fcdfc4e764cdf12d9b11}{SimObject}を再定義しています。


\begin{DoxyCode}
225 {
226     read_hits
227         .name(name() + ".read_hits")
228         .desc("DTB read hits")
229         ;
230 
231     read_misses
232         .name(name() + ".read_misses")
233         .desc("DTB read misses")
234         ;
235 
236 
237     read_accesses
238         .name(name() + ".read_accesses")
239         .desc("DTB read accesses")
240         ;
241 
242     write_hits
243         .name(name() + ".write_hits")
244         .desc("DTB write hits")
245         ;
246 
247     write_misses
248         .name(name() + ".write_misses")
249         .desc("DTB write misses")
250         ;
251 
252 
253     write_accesses
254         .name(name() + ".write_accesses")
255         .desc("DTB write accesses")
256         ;
257 
258     hits
259         .name(name() + ".hits")
260         .desc("DTB hits")
261         ;
262 
263     misses
264         .name(name() + ".misses")
265         .desc("DTB misses")
266         ;
267 
268     accesses
269         .name(name() + ".accesses")
270         .desc("DTB accesses")
271         ;
272 
273     hits = read_hits + write_hits;
274     misses = read_misses + write_misses;
275     accesses = read_accesses + write_accesses;
276 }
\end{DoxyCode}
\hypertarget{classPowerISA_1_1TLB_a53e036786d17361be4c7320d39c99b84}{
\index{PowerISA::TLB@{PowerISA::TLB}!serialize@{serialize}}
\index{serialize@{serialize}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{serialize}]{\setlength{\rightskip}{0pt plus 5cm}void serialize (std::ostream \& {\em os})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classPowerISA_1_1TLB_a53e036786d17361be4c7320d39c99b84}


\hyperlink{classSerializable_ad6272f80ae37e8331e3969b3f072a801}{Serializable}を再定義しています。\hypertarget{classPowerISA_1_1TLB_a15b6c15c1be2ca4de3e65772a02aa29f}{
\index{PowerISA::TLB@{PowerISA::TLB}!takeOverFrom@{takeOverFrom}}
\index{takeOverFrom@{takeOverFrom}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{takeOverFrom}]{\setlength{\rightskip}{0pt plus 5cm}void takeOverFrom ({\bf BaseTLB} $\ast$ {\em otlb})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classPowerISA_1_1TLB_a15b6c15c1be2ca4de3e65772a02aa29f}



\begin{DoxyCode}
133 {}
\end{DoxyCode}
\hypertarget{classPowerISA_1_1TLB_ad54e01e3c0a1613098a76b7f92e5be93}{
\index{PowerISA::TLB@{PowerISA::TLB}!translateAtomic@{translateAtomic}}
\index{translateAtomic@{translateAtomic}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{translateAtomic}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Fault} translateAtomic ({\bf RequestPtr} {\em req}, \/  {\bf ThreadContext} $\ast$ {\em tc}, \/  {\bf Mode} {\em mode})}}
\label{classPowerISA_1_1TLB_ad54e01e3c0a1613098a76b7f92e5be93}



\begin{DoxyCode}
311 {
312     if (FullSystem)
313         fatal("translate atomic not yet implemented in full system mode.\n");
314 
315     if (mode == Execute)
316         return translateInst(req, tc);
317     else
318         return translateData(req, tc, mode == Write);
319 }
\end{DoxyCode}
\hypertarget{classPowerISA_1_1TLB_ad54aef66412f77e2a15a621a126dfb52}{
\index{PowerISA::TLB@{PowerISA::TLB}!translateData@{translateData}}
\index{translateData@{translateData}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{translateData}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Fault} translateData ({\bf RequestPtr} {\em req}, \/  {\bf ThreadContext} $\ast$ {\em tc}, \/  bool {\em write})}}
\label{classPowerISA_1_1TLB_ad54aef66412f77e2a15a621a126dfb52}



\begin{DoxyCode}
299 {
300     Process * p = tc->getProcessPtr();
301 
302     Fault fault = p->pTable->translate(req);
303     if (fault != NoFault)
304         return fault;
305 
306     return NoFault;
307 }
\end{DoxyCode}
\hypertarget{classPowerISA_1_1TLB_a26658814c6c9034665aae19cf25545bb}{
\index{PowerISA::TLB@{PowerISA::TLB}!translateFunctional@{translateFunctional}}
\index{translateFunctional@{translateFunctional}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{translateFunctional}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Fault} translateFunctional ({\bf RequestPtr} {\em req}, \/  {\bf ThreadContext} $\ast$ {\em tc}, \/  {\bf Mode} {\em mode})}}
\label{classPowerISA_1_1TLB_a26658814c6c9034665aae19cf25545bb}
Stub function for \hyperlink{classCheckerCPU}{CheckerCPU} compilation support. Power \hyperlink{classPowerISA_1_1ISA}{ISA} not supported by \hyperlink{classChecker}{Checker} at the moment 


\begin{DoxyCode}
331 {
332     panic("Not implemented\n");
333     return NoFault;
334 }
\end{DoxyCode}
\hypertarget{classPowerISA_1_1TLB_a072afd8ed455dade4c25a85510e5a4da}{
\index{PowerISA::TLB@{PowerISA::TLB}!translateInst@{translateInst}}
\index{translateInst@{translateInst}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{translateInst}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Fault} translateInst ({\bf RequestPtr} {\em req}, \/  {\bf ThreadContext} $\ast$ {\em tc})}}
\label{classPowerISA_1_1TLB_a072afd8ed455dade4c25a85510e5a4da}



\begin{DoxyCode}
280 {
281     // Instruction accesses must be word-aligned
282     if (req->getVaddr() & 0x3) {
283         DPRINTF(TLB, "Alignment Fault on %#x, size = %d\n", req->getVaddr(),
284                 req->getSize());
285         return new AlignmentFault();
286     }
287 
288      Process * p = tc->getProcessPtr();
289 
290      Fault fault = p->pTable->translate(req);
291     if (fault != NoFault)
292         return fault;
293 
294     return NoFault;
295 }
\end{DoxyCode}
\hypertarget{classPowerISA_1_1TLB_ae52f7e465748883695d2b4f432a13652}{
\index{PowerISA::TLB@{PowerISA::TLB}!translateTiming@{translateTiming}}
\index{translateTiming@{translateTiming}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{translateTiming}]{\setlength{\rightskip}{0pt plus 5cm}void translateTiming ({\bf RequestPtr} {\em req}, \/  {\bf ThreadContext} $\ast$ {\em tc}, \/  {\bf Translation} $\ast$ {\em translation}, \/  {\bf Mode} {\em mode})}}
\label{classPowerISA_1_1TLB_ae52f7e465748883695d2b4f432a13652}



\begin{DoxyCode}
324 {
325     assert(translation);
326     translation->finish(translateAtomic(req, tc, mode), req, tc, mode);
327 }
\end{DoxyCode}
\hypertarget{classPowerISA_1_1TLB_af22e5d6d660b97db37003ac61ac4ee49}{
\index{PowerISA::TLB@{PowerISA::TLB}!unserialize@{unserialize}}
\index{unserialize@{unserialize}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{unserialize}]{\setlength{\rightskip}{0pt plus 5cm}void unserialize ({\bf Checkpoint} $\ast$ {\em cp}, \/  const std::string \& {\em section})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classPowerISA_1_1TLB_af22e5d6d660b97db37003ac61ac4ee49}


\hyperlink{classSerializable_af100c4e9feabf3cd918619c88c718387}{Serializable}を再定義しています。\hypertarget{classPowerISA_1_1TLB_a3e576c3e0d39dfca708baea44ebf0617}{
\index{PowerISA::TLB@{PowerISA::TLB}!validVirtualAddress@{validVirtualAddress}}
\index{validVirtualAddress@{validVirtualAddress}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{validVirtualAddress}]{\setlength{\rightskip}{0pt plus 5cm}static bool validVirtualAddress ({\bf Addr} {\em vaddr})\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classPowerISA_1_1TLB_a3e576c3e0d39dfca708baea44ebf0617}


\subsection{変数}
\hypertarget{classPowerISA_1_1TLB_a1929e1032289676f78e07e4c6bc55369}{
\index{PowerISA::TLB@{PowerISA::TLB}!accesses@{accesses}}
\index{accesses@{accesses}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{accesses}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Formula} {\bf accesses}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classPowerISA_1_1TLB_a1929e1032289676f78e07e4c6bc55369}
\hypertarget{classPowerISA_1_1TLB_a224eed77bfb7a27359c9c3c1acbdbfaa}{
\index{PowerISA::TLB@{PowerISA::TLB}!hits@{hits}}
\index{hits@{hits}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{hits}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Formula} {\bf hits}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classPowerISA_1_1TLB_a224eed77bfb7a27359c9c3c1acbdbfaa}
\hypertarget{classPowerISA_1_1TLB_a4d5c35d797dc31aad758dee75916238f}{
\index{PowerISA::TLB@{PowerISA::TLB}!lookupTable@{lookupTable}}
\index{lookupTable@{lookupTable}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{lookupTable}]{\setlength{\rightskip}{0pt plus 5cm}{\bf PageTable} {\bf lookupTable}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classPowerISA_1_1TLB_a4d5c35d797dc31aad758dee75916238f}
\hypertarget{classPowerISA_1_1TLB_a4b8b96257f1e97cd5730673f38f9571c}{
\index{PowerISA::TLB@{PowerISA::TLB}!misses@{misses}}
\index{misses@{misses}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{misses}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Formula} {\bf misses}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classPowerISA_1_1TLB_a4b8b96257f1e97cd5730673f38f9571c}
\hypertarget{classPowerISA_1_1TLB_a4a3ee7780f871ead437ece349ddc2147}{
\index{PowerISA::TLB@{PowerISA::TLB}!nlu@{nlu}}
\index{nlu@{nlu}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{nlu}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf nlu}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classPowerISA_1_1TLB_a4a3ee7780f871ead437ece349ddc2147}
\hypertarget{classPowerISA_1_1TLB_a2c9dc5a6baf7fbd1ae7fc00b0a57fe56}{
\index{PowerISA::TLB@{PowerISA::TLB}!read\_\-accesses@{read\_\-accesses}}
\index{read\_\-accesses@{read\_\-accesses}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{read\_\-accesses}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf read\_\-accesses}\hspace{0.3cm}{\ttfamily  \mbox{[}mutable, protected\mbox{]}}}}
\label{classPowerISA_1_1TLB_a2c9dc5a6baf7fbd1ae7fc00b0a57fe56}
\hypertarget{classPowerISA_1_1TLB_af50813bd757bd59aa3618aa99377760a}{
\index{PowerISA::TLB@{PowerISA::TLB}!read\_\-acv@{read\_\-acv}}
\index{read\_\-acv@{read\_\-acv}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{read\_\-acv}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf read\_\-acv}\hspace{0.3cm}{\ttfamily  \mbox{[}mutable, protected\mbox{]}}}}
\label{classPowerISA_1_1TLB_af50813bd757bd59aa3618aa99377760a}
\hypertarget{classPowerISA_1_1TLB_a766fdbd2ab7d588c3c9fa426ce395ed6}{
\index{PowerISA::TLB@{PowerISA::TLB}!read\_\-hits@{read\_\-hits}}
\index{read\_\-hits@{read\_\-hits}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{read\_\-hits}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf read\_\-hits}\hspace{0.3cm}{\ttfamily  \mbox{[}mutable, protected\mbox{]}}}}
\label{classPowerISA_1_1TLB_a766fdbd2ab7d588c3c9fa426ce395ed6}
\hypertarget{classPowerISA_1_1TLB_a6fb393c9489d735739552c2a351f07f4}{
\index{PowerISA::TLB@{PowerISA::TLB}!read\_\-misses@{read\_\-misses}}
\index{read\_\-misses@{read\_\-misses}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{read\_\-misses}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf read\_\-misses}\hspace{0.3cm}{\ttfamily  \mbox{[}mutable, protected\mbox{]}}}}
\label{classPowerISA_1_1TLB_a6fb393c9489d735739552c2a351f07f4}
\hypertarget{classPowerISA_1_1TLB_a439227feff9d7f55384e8780cfc2eb82}{
\index{PowerISA::TLB@{PowerISA::TLB}!size@{size}}
\index{size@{size}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{size}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf size}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classPowerISA_1_1TLB_a439227feff9d7f55384e8780cfc2eb82}
\hypertarget{classPowerISA_1_1TLB_a005f53c9e1a19cb4bb0b792e490416b9}{
\index{PowerISA::TLB@{PowerISA::TLB}!smallPages@{smallPages}}
\index{smallPages@{smallPages}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{smallPages}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf smallPages}}}
\label{classPowerISA_1_1TLB_a005f53c9e1a19cb4bb0b792e490416b9}
\hypertarget{classPowerISA_1_1TLB_aaa2455839f9586ce25fefa06fdc4e952}{
\index{PowerISA::TLB@{PowerISA::TLB}!table@{table}}
\index{table@{table}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{table}]{\setlength{\rightskip}{0pt plus 5cm}{\bf PowerISA::PTE}$\ast$ {\bf table}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classPowerISA_1_1TLB_aaa2455839f9586ce25fefa06fdc4e952}
\hypertarget{classPowerISA_1_1TLB_af3301e9dd0bb91de161b7bafefade7f3}{
\index{PowerISA::TLB@{PowerISA::TLB}!write\_\-accesses@{write\_\-accesses}}
\index{write\_\-accesses@{write\_\-accesses}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{write\_\-accesses}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf write\_\-accesses}\hspace{0.3cm}{\ttfamily  \mbox{[}mutable, protected\mbox{]}}}}
\label{classPowerISA_1_1TLB_af3301e9dd0bb91de161b7bafefade7f3}
\hypertarget{classPowerISA_1_1TLB_a764f5ef97bfcb1ba3ad05704de5a3a32}{
\index{PowerISA::TLB@{PowerISA::TLB}!write\_\-acv@{write\_\-acv}}
\index{write\_\-acv@{write\_\-acv}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{write\_\-acv}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf write\_\-acv}\hspace{0.3cm}{\ttfamily  \mbox{[}mutable, protected\mbox{]}}}}
\label{classPowerISA_1_1TLB_a764f5ef97bfcb1ba3ad05704de5a3a32}
\hypertarget{classPowerISA_1_1TLB_ab3172bfd014e75dcad1b0a2a91de59dd}{
\index{PowerISA::TLB@{PowerISA::TLB}!write\_\-hits@{write\_\-hits}}
\index{write\_\-hits@{write\_\-hits}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{write\_\-hits}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf write\_\-hits}\hspace{0.3cm}{\ttfamily  \mbox{[}mutable, protected\mbox{]}}}}
\label{classPowerISA_1_1TLB_ab3172bfd014e75dcad1b0a2a91de59dd}
\hypertarget{classPowerISA_1_1TLB_af8519a07f8f1f76c8fff9c9a1aaa4638}{
\index{PowerISA::TLB@{PowerISA::TLB}!write\_\-misses@{write\_\-misses}}
\index{write\_\-misses@{write\_\-misses}!PowerISA::TLB@{PowerISA::TLB}}
\subsubsection[{write\_\-misses}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf write\_\-misses}\hspace{0.3cm}{\ttfamily  \mbox{[}mutable, protected\mbox{]}}}}
\label{classPowerISA_1_1TLB_af8519a07f8f1f76c8fff9c9a1aaa4638}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
arch/power/\hyperlink{arch_2power_2tlb_8hh}{tlb.hh}\item 
arch/power/\hyperlink{arch_2power_2tlb_8cc}{tlb.cc}\end{DoxyCompactItemize}
