<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: cpu/ozone/back_end_impl.hh ソースファイル</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li><a href="annotated.html"><span>クラス</span></a></li>
      <li class="current"><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>ファイル一覧</span></a></li>
      <li><a href="globals.html"><span>ファイルメンバ</span></a></li>
    </ul>
  </div>
<h1>cpu/ozone/back_end_impl.hh</h1><a href="back__end__impl_8hh.html">説明を見る。</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (c) 2006 The Regents of The University of Michigan</span>
<a name="l00003"></a>00003 <span class="comment"> * All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
<a name="l00006"></a>00006 <span class="comment"> * modification, are permitted provided that the following conditions are</span>
<a name="l00007"></a>00007 <span class="comment"> * met: redistributions of source code must retain the above copyright</span>
<a name="l00008"></a>00008 <span class="comment"> * notice, this list of conditions and the following disclaimer;</span>
<a name="l00009"></a>00009 <span class="comment"> * redistributions in binary form must reproduce the above copyright</span>
<a name="l00010"></a>00010 <span class="comment"> * notice, this list of conditions and the following disclaimer in the</span>
<a name="l00011"></a>00011 <span class="comment"> * documentation and/or other materials provided with the distribution;</span>
<a name="l00012"></a>00012 <span class="comment"> * neither the name of the copyright holders nor the names of its</span>
<a name="l00013"></a>00013 <span class="comment"> * contributors may be used to endorse or promote products derived from</span>
<a name="l00014"></a>00014 <span class="comment"> * this software without specific prior written permission.</span>
<a name="l00015"></a>00015 <span class="comment"> *</span>
<a name="l00016"></a>00016 <span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<a name="l00017"></a>00017 <span class="comment"> * &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<a name="l00018"></a>00018 <span class="comment"> * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span>
<a name="l00019"></a>00019 <span class="comment"> * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span>
<a name="l00020"></a>00020 <span class="comment"> * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
<a name="l00021"></a>00021 <span class="comment"> * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
<a name="l00022"></a>00022 <span class="comment"> * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span>
<a name="l00023"></a>00023 <span class="comment"> * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span>
<a name="l00024"></a>00024 <span class="comment"> * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<a name="l00025"></a>00025 <span class="comment"> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<a name="l00026"></a>00026 <span class="comment"> * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00027"></a>00027 <span class="comment"> *</span>
<a name="l00028"></a>00028 <span class="comment"> * Authors: Kevin Lim</span>
<a name="l00029"></a>00029 <span class="comment"> */</span>
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="preprocessor">#ifndef __CPU_OZONE_BACK_END_IMPL_HH__</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span><span class="preprocessor">#define __CPU_OZONE_BACK_END_IMPL_HH__</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="back__end_8hh.html">cpu/ozone/back_end.hh</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;encumbered/cpu/full/op_class.hh&quot;</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l00038"></a><a class="code" href="classBackEnd_1_1InstQueue.html#a679ee5512f178ea331ab7cd3ebf2aa78">00038</a> <a class="code" href="classBackEnd_1_1InstQueue.html#a679ee5512f178ea331ab7cd3ebf2aa78">BackEnd&lt;Impl&gt;::InstQueue::InstQueue</a>(<a class="code" href="namespaceThePipeline.html#ab62ca16eeca26566ad2422b5df4943ce">Params</a> *params)
<a name="l00039"></a>00039     : size(params-&gt;numIQEntries), numInsts(0), <a class="code" href="namespaceArmISA.html#a0da89c280130b84ae26405a901396428">width</a>(params-&gt;issueWidth)
<a name="l00040"></a>00040 {
<a name="l00041"></a>00041 }
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l00044"></a>00044 std::string
<a name="l00045"></a><a class="code" href="classBackEnd_1_1InstQueue.html#a37627d5d5bba7f4a8690c71c2ab3cb07">00045</a> <a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">BackEnd&lt;Impl&gt;::InstQueue::name</a>()<span class="keyword"> const</span>
<a name="l00046"></a>00046 <span class="keyword"></span>{
<a name="l00047"></a>00047     <span class="keywordflow">return</span> <a class="code" href="classBackEnd_1_1InstQueue.html#a84f815aa1fa864ba2e6d75f5ad2b52d1">be</a>-&gt;<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.iq&quot;</span>;
<a name="l00048"></a>00048 }
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l00051"></a>00051 <span class="keywordtype">void</span>
<a name="l00052"></a><a class="code" href="classBackEnd_1_1InstQueue.html#a4dc637449366fcdfc4e764cdf12d9b11">00052</a> <a class="code" href="classBackEnd.html#a4dc637449366fcdfc4e764cdf12d9b11">BackEnd&lt;Impl&gt;::InstQueue::regStats</a>()
<a name="l00053"></a>00053 {
<a name="l00054"></a>00054     <span class="keyword">using namespace </span>Stats;
<a name="l00055"></a>00055 
<a name="l00056"></a>00056     <a class="code" href="classBackEnd_1_1InstQueue.html#a0a6cfaf987f6b772ffd079ce1bb21c2d">occ_dist</a>
<a name="l00057"></a>00057         .<a class="code" href="classStats_1_1VectorDistribution.html#ab5e2959f5d31e2ac926ba93fc0257cda">init</a>(1, 0, <a class="code" href="classBackEnd_1_1InstQueue.html#a439227feff9d7f55384e8780cfc2eb82">size</a>, 2)
<a name="l00058"></a>00058         .name(<a class="code" href="classBackEnd_1_1InstQueue.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;occ_dist&quot;</span>)
<a name="l00059"></a>00059         .desc(<span class="stringliteral">&quot;IQ Occupancy per cycle&quot;</span>)
<a name="l00060"></a>00060         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a> | <a class="code" href="namespaceStats.html#af659db47be37cf4f7fee0a18e320843b">cdf</a>)
<a name="l00061"></a>00061         ;
<a name="l00062"></a>00062 
<a name="l00063"></a>00063     <a class="code" href="classBackEnd_1_1InstQueue.html#aeaded670177c783870c5ddf39c3c6928">inst_count</a>
<a name="l00064"></a>00064         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(1)
<a name="l00065"></a>00065         .name(<a class="code" href="classBackEnd_1_1InstQueue.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;cum_num_insts&quot;</span>)
<a name="l00066"></a>00066         .desc(<span class="stringliteral">&quot;Total occupancy&quot;</span>)
<a name="l00067"></a>00067         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00068"></a>00068         ;
<a name="l00069"></a>00069 
<a name="l00070"></a>00070     <a class="code" href="classBackEnd_1_1InstQueue.html#a24f581671815b0aeef8077091ab0a9c0">peak_inst_count</a>
<a name="l00071"></a>00071         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(1)
<a name="l00072"></a>00072         .name(<a class="code" href="classBackEnd_1_1InstQueue.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;peak_occupancy&quot;</span>)
<a name="l00073"></a>00073         .desc(<span class="stringliteral">&quot;Peak IQ occupancy&quot;</span>)
<a name="l00074"></a>00074         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00075"></a>00075         ;
<a name="l00076"></a>00076 
<a name="l00077"></a>00077     <a class="code" href="classBackEnd_1_1InstQueue.html#a730156c8124059e3a4a3ad2da1801189">current_count</a>
<a name="l00078"></a>00078         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classBackEnd_1_1InstQueue.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;current_count&quot;</span>)
<a name="l00079"></a>00079         .desc(<span class="stringliteral">&quot;Occupancy this cycle&quot;</span>)
<a name="l00080"></a>00080         ;
<a name="l00081"></a>00081 
<a name="l00082"></a>00082     <a class="code" href="classBackEnd_1_1InstQueue.html#a42bc77715b0c30a6631cbe20e7e3c9b5">empty_count</a>
<a name="l00083"></a>00083         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classBackEnd_1_1InstQueue.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;empty_count&quot;</span>)
<a name="l00084"></a>00084         .desc(<span class="stringliteral">&quot;Number of empty cycles&quot;</span>)
<a name="l00085"></a>00085         ;
<a name="l00086"></a>00086 
<a name="l00087"></a>00087     <a class="code" href="classBackEnd_1_1InstQueue.html#a2e155696624248ee21593799d4e4a4a9">fullCount</a>
<a name="l00088"></a>00088         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classBackEnd_1_1InstQueue.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;full_count&quot;</span>)
<a name="l00089"></a>00089         .desc(<span class="stringliteral">&quot;Number of full cycles&quot;</span>)
<a name="l00090"></a>00090         ;
<a name="l00091"></a>00091 
<a name="l00092"></a>00092 
<a name="l00093"></a>00093     <a class="code" href="classBackEnd_1_1InstQueue.html#a4172173779f447a5d588417e0273c8a8">occ_rate</a>
<a name="l00094"></a>00094         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classBackEnd_1_1InstQueue.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;occ_rate&quot;</span>)
<a name="l00095"></a>00095         .desc(<span class="stringliteral">&quot;Average occupancy&quot;</span>)
<a name="l00096"></a>00096         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00097"></a>00097         ;
<a name="l00098"></a>00098     <a class="code" href="classBackEnd_1_1InstQueue.html#a4172173779f447a5d588417e0273c8a8">occ_rate</a> = <a class="code" href="classBackEnd_1_1InstQueue.html#aeaded670177c783870c5ddf39c3c6928">inst_count</a> / <a class="code" href="classBackEnd_1_1InstQueue.html#a84f815aa1fa864ba2e6d75f5ad2b52d1">be</a>-&gt;<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numCycles;
<a name="l00099"></a>00099 
<a name="l00100"></a>00100     <a class="code" href="classBackEnd_1_1InstQueue.html#aeb82d92fe05e8a4cb892ebb445e58dc4">avg_residency</a>
<a name="l00101"></a>00101         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classBackEnd_1_1InstQueue.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;avg_residency&quot;</span>)
<a name="l00102"></a>00102         .desc(<span class="stringliteral">&quot;Average IQ residency&quot;</span>)
<a name="l00103"></a>00103         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00104"></a>00104         ;
<a name="l00105"></a>00105     <a class="code" href="classBackEnd_1_1InstQueue.html#aeb82d92fe05e8a4cb892ebb445e58dc4">avg_residency</a> = <a class="code" href="classBackEnd_1_1InstQueue.html#a4172173779f447a5d588417e0273c8a8">occ_rate</a> / <a class="code" href="classBackEnd_1_1InstQueue.html#a84f815aa1fa864ba2e6d75f5ad2b52d1">be</a>-&gt;<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numCycles;
<a name="l00106"></a>00106 
<a name="l00107"></a>00107     <a class="code" href="classBackEnd_1_1InstQueue.html#ab63a348c8049b1a2a48ff96d6cfa00aa">empty_rate</a>
<a name="l00108"></a>00108         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classBackEnd_1_1InstQueue.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;empty_rate&quot;</span>)
<a name="l00109"></a>00109         .desc(<span class="stringliteral">&quot;Fraction of cycles empty&quot;</span>)
<a name="l00110"></a>00110         ;
<a name="l00111"></a>00111     <a class="code" href="classBackEnd_1_1InstQueue.html#ab63a348c8049b1a2a48ff96d6cfa00aa">empty_rate</a> = 100 * <a class="code" href="classBackEnd_1_1InstQueue.html#a42bc77715b0c30a6631cbe20e7e3c9b5">empty_count</a> / <a class="code" href="classBackEnd_1_1InstQueue.html#a84f815aa1fa864ba2e6d75f5ad2b52d1">be</a>-&gt;<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numCycles;
<a name="l00112"></a>00112 
<a name="l00113"></a>00113     <a class="code" href="classBackEnd_1_1InstQueue.html#a9635f0670e24507c9817f4809ab299ae">full_rate</a>
<a name="l00114"></a>00114         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classBackEnd_1_1InstQueue.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;full_rate&quot;</span>)
<a name="l00115"></a>00115         .desc(<span class="stringliteral">&quot;Fraction of cycles full&quot;</span>)
<a name="l00116"></a>00116         ;
<a name="l00117"></a>00117     <a class="code" href="classBackEnd_1_1InstQueue.html#a9635f0670e24507c9817f4809ab299ae">full_rate</a> = 100 * <a class="code" href="classBackEnd_1_1InstQueue.html#a2e155696624248ee21593799d4e4a4a9">fullCount</a> / <a class="code" href="classBackEnd_1_1InstQueue.html#a84f815aa1fa864ba2e6d75f5ad2b52d1">be</a>-&gt;<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numCycles;
<a name="l00118"></a>00118 }
<a name="l00119"></a>00119 
<a name="l00120"></a>00120 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l00121"></a>00121 <span class="keywordtype">void</span>
<a name="l00122"></a><a class="code" href="classBackEnd_1_1InstQueue.html#adff8385686f237650837ba2fbf13e5da">00122</a> <a class="code" href="classBackEnd.html">BackEnd&lt;Impl&gt;::InstQueue::setIssueExecQueue</a>(<a class="code" href="classTimeBuffer.html">TimeBuffer&lt;IssueToExec&gt;</a> *i2e_queue)
<a name="l00123"></a>00123 {
<a name="l00124"></a>00124     <a class="code" href="classBackEnd_1_1InstQueue.html#afc6d5236e885a5de7bfb9727fd01d6ee">i2e</a> = i2e_queue;
<a name="l00125"></a>00125     <a class="code" href="classBackEnd_1_1InstQueue.html#ac80a68748a283f0c7df3bd3eb19be49b">numIssued</a> = <a class="code" href="classBackEnd_1_1InstQueue.html#afc6d5236e885a5de7bfb9727fd01d6ee">i2e</a>-&gt;<a class="code" href="classTimeBuffer.html#ab1c801fd9d022ce4339cc62f4a0625dd">getWire</a>(0);
<a name="l00126"></a>00126 }
<a name="l00127"></a>00127 
<a name="l00128"></a>00128 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l00129"></a>00129 <span class="keywordtype">void</span>
<a name="l00130"></a><a class="code" href="classBackEnd_1_1InstQueue.html#a773e88db1aa010c3755e603493bf40ec">00130</a> <a class="code" href="classBackEnd.html">BackEnd&lt;Impl&gt;::InstQueue::insert</a>(<a class="code" href="classBackEnd.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;inst)
<a name="l00131"></a>00131 {
<a name="l00132"></a>00132     <a class="code" href="classBackEnd_1_1InstQueue.html#a358c879c68910efe5300c4515df35b6c">numInsts</a>++;
<a name="l00133"></a>00133     <a class="code" href="classBackEnd_1_1InstQueue.html#aeaded670177c783870c5ddf39c3c6928">inst_count</a>[0]++;
<a name="l00134"></a>00134     <span class="keywordflow">if</span> (!inst-&gt;isNonSpeculative()) {
<a name="l00135"></a>00135         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Instruction [sn:%lli] added to IQ\n&quot;</span>, inst-&gt;seqNum);
<a name="l00136"></a>00136         <span class="keywordflow">if</span> (inst-&gt;readyToIssue()) {
<a name="l00137"></a>00137             <a class="code" href="classBackEnd_1_1InstQueue.html#ad2696412af240d7ad2a5f9a4bf3157ef">toBeScheduled</a>.push_front(inst);
<a name="l00138"></a>00138             inst-&gt;iqIt = <a class="code" href="classBackEnd_1_1InstQueue.html#ad2696412af240d7ad2a5f9a4bf3157ef">toBeScheduled</a>.begin();
<a name="l00139"></a>00139             inst-&gt;iqItValid = <span class="keyword">true</span>;
<a name="l00140"></a>00140         } <span class="keywordflow">else</span> {
<a name="l00141"></a>00141             <a class="code" href="classBackEnd_1_1InstQueue.html#a22cf4c165453d89ad7db9e099d30f66e">iq</a>.push_front(inst);
<a name="l00142"></a>00142             inst-&gt;iqIt = <a class="code" href="classBackEnd_1_1InstQueue.html#a22cf4c165453d89ad7db9e099d30f66e">iq</a>.begin();
<a name="l00143"></a>00143             inst-&gt;iqItValid = <span class="keyword">true</span>;
<a name="l00144"></a>00144         }
<a name="l00145"></a>00145     } <span class="keywordflow">else</span> {
<a name="l00146"></a>00146         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Nonspeculative instruction [sn:%lli] added to IQ\n&quot;</span>, inst-&gt;seqNum);
<a name="l00147"></a>00147         <a class="code" href="classBackEnd_1_1InstQueue.html#ad94e34caaaf370c845966bd354354136">nonSpec</a>.push_front(inst);
<a name="l00148"></a>00148         inst-&gt;iqIt = <a class="code" href="classBackEnd_1_1InstQueue.html#ad94e34caaaf370c845966bd354354136">nonSpec</a>.begin();
<a name="l00149"></a>00149         inst-&gt;iqItValid = <span class="keyword">true</span>;
<a name="l00150"></a>00150     }
<a name="l00151"></a>00151 }
<a name="l00152"></a>00152 
<a name="l00153"></a>00153 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l00154"></a>00154 <span class="keywordtype">void</span>
<a name="l00155"></a><a class="code" href="classBackEnd_1_1InstQueue.html#a3694e72427d3a616808797f9343d1fc4">00155</a> <a class="code" href="classBackEnd.html#a3694e72427d3a616808797f9343d1fc4">BackEnd&lt;Impl&gt;::InstQueue::scheduleReadyInsts</a>()
<a name="l00156"></a>00156 {
<a name="l00157"></a>00157     <span class="keywordtype">int</span> scheduled = <a class="code" href="classBackEnd_1_1InstQueue.html#ac80a68748a283f0c7df3bd3eb19be49b">numIssued</a>-&gt;<a class="code" href="classTimeBuffer.html#a245260f6f74972558f61b85227df5aae">size</a>;
<a name="l00158"></a>00158     <a class="code" href="classBackEnd_1_1InstQueue.html#a4da46d72d68fcd5bfe65dc701c358379">InstListIt</a> iq_it = --<a class="code" href="classBackEnd_1_1InstQueue.html#ad2696412af240d7ad2a5f9a4bf3157ef">toBeScheduled</a>.end();
<a name="l00159"></a>00159     <a class="code" href="classBackEnd_1_1InstQueue.html#a4da46d72d68fcd5bfe65dc701c358379">InstListIt</a> iq_end_it = <a class="code" href="classBackEnd_1_1InstQueue.html#ad2696412af240d7ad2a5f9a4bf3157ef">toBeScheduled</a>.end();
<a name="l00160"></a>00160 
<a name="l00161"></a>00161     <span class="keywordflow">while</span> (iq_it != iq_end_it &amp;&amp; scheduled &lt; <a class="code" href="classBackEnd_1_1InstQueue.html#a2474a5474cbff19523a51eb1de01cda4">width</a>) {
<a name="l00162"></a>00162 <span class="comment">//        if ((*iq_it)-&gt;readyToIssue()) {</span>
<a name="l00163"></a>00163             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Instruction [sn:%lli] PC:%#x is ready\n&quot;</span>,
<a name="l00164"></a>00164                     (*iq_it)-&gt;seqNum, (*iq_it)-&gt;readPC());
<a name="l00165"></a>00165             <a class="code" href="classBackEnd_1_1InstQueue.html#ab9e4e533fd6d46fc4955cbcf0a4d28dc">readyQueue</a>.push(*iq_it);
<a name="l00166"></a>00166             <a class="code" href="classBackEnd_1_1InstQueue.html#a008a1081076d1f3d6d0077ca5ddde1ad">readyList</a>.push_front(*iq_it);
<a name="l00167"></a>00167 
<a name="l00168"></a>00168             (*iq_it)-&gt;iqIt = <a class="code" href="classBackEnd_1_1InstQueue.html#a008a1081076d1f3d6d0077ca5ddde1ad">readyList</a>.begin();
<a name="l00169"></a>00169 
<a name="l00170"></a>00170             <a class="code" href="classBackEnd_1_1InstQueue.html#ad2696412af240d7ad2a5f9a4bf3157ef">toBeScheduled</a>.erase(iq_it--);
<a name="l00171"></a>00171 
<a name="l00172"></a>00172             ++scheduled;
<a name="l00173"></a>00173 <span class="comment">//        } else {</span>
<a name="l00174"></a>00174 <span class="comment">//            iq_it++;</span>
<a name="l00175"></a>00175 <span class="comment">//        }</span>
<a name="l00176"></a>00176     }
<a name="l00177"></a>00177 
<a name="l00178"></a>00178     <a class="code" href="classBackEnd_1_1InstQueue.html#ac80a68748a283f0c7df3bd3eb19be49b">numIssued</a>-&gt;<a class="code" href="classTimeBuffer.html#a245260f6f74972558f61b85227df5aae">size</a>+= scheduled;
<a name="l00179"></a>00179 }
<a name="l00180"></a>00180 
<a name="l00181"></a>00181 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l00182"></a>00182 <span class="keywordtype">void</span>
<a name="l00183"></a><a class="code" href="classBackEnd_1_1InstQueue.html#acc2640b7a23376539d13b74725fcf7a9">00183</a> <a class="code" href="classBackEnd.html">BackEnd&lt;Impl&gt;::InstQueue::scheduleNonSpec</a>(<span class="keyword">const</span> <a class="code" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> &amp;sn)
<a name="l00184"></a>00184 {
<a name="l00185"></a>00185 <span class="comment">/*</span>
<a name="l00186"></a>00186 <span class="comment">    InstListIt non_spec_it = nonSpec.begin();</span>
<a name="l00187"></a>00187 <span class="comment">    InstListIt non_spec_end_it = nonSpec.end();</span>
<a name="l00188"></a>00188 <span class="comment"></span>
<a name="l00189"></a>00189 <span class="comment">    while ((*non_spec_it)-&gt;seqNum != sn) {</span>
<a name="l00190"></a>00190 <span class="comment">        non_spec_it++;</span>
<a name="l00191"></a>00191 <span class="comment">        assert(non_spec_it != non_spec_end_it);</span>
<a name="l00192"></a>00192 <span class="comment">    }</span>
<a name="l00193"></a>00193 <span class="comment">*/</span>
<a name="l00194"></a>00194     <a class="code" href="classBackEnd.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> inst = <a class="code" href="classBackEnd_1_1InstQueue.html#ad94e34caaaf370c845966bd354354136">nonSpec</a>.back();
<a name="l00195"></a>00195 
<a name="l00196"></a>00196     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Nonspeculative instruction [sn:%lli] scheduled\n&quot;</span>, inst-&gt;seqNum);
<a name="l00197"></a>00197 
<a name="l00198"></a>00198     assert(inst-&gt;seqNum == sn);
<a name="l00199"></a>00199 
<a name="l00200"></a>00200     assert(<a class="code" href="classBackEnd_1_1InstQueue.html#aea2496e092fdfa5953ee18676dcc78da">find</a>(<a class="code" href="classBackEnd_1_1InstQueue.html#af8ceabb22d9297bd28382151f35a2252aaee95c287c473832b4e60a841e2211ff">NonSpec</a>, inst-&gt;iqIt));
<a name="l00201"></a>00201     <a class="code" href="classBackEnd_1_1InstQueue.html#ad94e34caaaf370c845966bd354354136">nonSpec</a>.erase(inst-&gt;iqIt);
<a name="l00202"></a>00202     <a class="code" href="classBackEnd_1_1InstQueue.html#a008a1081076d1f3d6d0077ca5ddde1ad">readyList</a>.push_front(inst);
<a name="l00203"></a>00203     inst-&gt;iqIt = <a class="code" href="classBackEnd_1_1InstQueue.html#a008a1081076d1f3d6d0077ca5ddde1ad">readyList</a>.begin();
<a name="l00204"></a>00204     <a class="code" href="classBackEnd_1_1InstQueue.html#ab9e4e533fd6d46fc4955cbcf0a4d28dc">readyQueue</a>.push(inst);
<a name="l00205"></a>00205     <a class="code" href="classBackEnd_1_1InstQueue.html#ac80a68748a283f0c7df3bd3eb19be49b">numIssued</a>-&gt;<a class="code" href="classTimeBuffer.html#a245260f6f74972558f61b85227df5aae">size</a>++;
<a name="l00206"></a>00206 }
<a name="l00207"></a>00207 
<a name="l00208"></a>00208 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l00209"></a>00209 <span class="keyword">typename</span> <a class="code" href="namespaceThePipeline.html#a992959fefcd659c6ba422aa4de14677c">Impl::DynInstPtr</a>
<a name="l00210"></a><a class="code" href="classBackEnd_1_1InstQueue.html#adafbd3336dfa623082983831f3063993">00210</a> <a class="code" href="classBackEnd.html">BackEnd&lt;Impl&gt;::InstQueue::getReadyInst</a>()
<a name="l00211"></a>00211 {
<a name="l00212"></a>00212     assert(!<a class="code" href="classBackEnd_1_1InstQueue.html#a008a1081076d1f3d6d0077ca5ddde1ad">readyList</a>.empty());
<a name="l00213"></a>00213 
<a name="l00214"></a>00214     <a class="code" href="classBackEnd.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> inst = <a class="code" href="classBackEnd_1_1InstQueue.html#ab9e4e533fd6d46fc4955cbcf0a4d28dc">readyQueue</a>.top();
<a name="l00215"></a>00215     <a class="code" href="classBackEnd_1_1InstQueue.html#ab9e4e533fd6d46fc4955cbcf0a4d28dc">readyQueue</a>.pop();
<a name="l00216"></a>00216     assert(<a class="code" href="classBackEnd_1_1InstQueue.html#aea2496e092fdfa5953ee18676dcc78da">find</a>(<a class="code" href="classBackEnd_1_1InstQueue.html#af8ceabb22d9297bd28382151f35a2252a7c2a1b33083108fc8d494fa70df4efec">ReadyList</a>, inst-&gt;iqIt));
<a name="l00217"></a>00217     <a class="code" href="classBackEnd_1_1InstQueue.html#a008a1081076d1f3d6d0077ca5ddde1ad">readyList</a>.erase(inst-&gt;iqIt);
<a name="l00218"></a>00218     inst-&gt;iqItValid = <span class="keyword">false</span>;
<a name="l00219"></a>00219 <span class="comment">//    if (!inst-&gt;isMemRef())</span>
<a name="l00220"></a>00220         --<a class="code" href="classBackEnd_1_1InstQueue.html#a358c879c68910efe5300c4515df35b6c">numInsts</a>;
<a name="l00221"></a>00221     <span class="keywordflow">return</span> inst;
<a name="l00222"></a>00222 }
<a name="l00223"></a>00223 
<a name="l00224"></a>00224 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l00225"></a>00225 <span class="keywordtype">void</span>
<a name="l00226"></a><a class="code" href="classBackEnd_1_1InstQueue.html#adc9b67ce59b0b2e930cfaf6361ce42c5">00226</a> <a class="code" href="classBackEnd.html#a3c68c455d9207edd23ae3bcb7971e653">BackEnd&lt;Impl&gt;::InstQueue::squash</a>(<span class="keyword">const</span> <a class="code" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> &amp;sn)
<a name="l00227"></a>00227 {
<a name="l00228"></a>00228     <a class="code" href="classBackEnd_1_1InstQueue.html#a4da46d72d68fcd5bfe65dc701c358379">InstListIt</a> iq_it = <a class="code" href="classBackEnd_1_1InstQueue.html#a22cf4c165453d89ad7db9e099d30f66e">iq</a>.begin();
<a name="l00229"></a>00229     <a class="code" href="classBackEnd_1_1InstQueue.html#a4da46d72d68fcd5bfe65dc701c358379">InstListIt</a> iq_end_it = <a class="code" href="classBackEnd_1_1InstQueue.html#a22cf4c165453d89ad7db9e099d30f66e">iq</a>.end();
<a name="l00230"></a>00230 
<a name="l00231"></a>00231     <span class="keywordflow">while</span> (iq_it != iq_end_it &amp;&amp; (*iq_it)-&gt;seqNum &gt; sn) {
<a name="l00232"></a>00232         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Instruction [sn:%lli] removed from IQ\n&quot;</span>, (*iq_it)-&gt;seqNum);
<a name="l00233"></a>00233         (*iq_it)-&gt;iqItValid = <span class="keyword">false</span>;
<a name="l00234"></a>00234         <a class="code" href="classBackEnd_1_1InstQueue.html#a22cf4c165453d89ad7db9e099d30f66e">iq</a>.erase(iq_it++);
<a name="l00235"></a>00235         --<a class="code" href="classBackEnd_1_1InstQueue.html#a358c879c68910efe5300c4515df35b6c">numInsts</a>;
<a name="l00236"></a>00236     }
<a name="l00237"></a>00237 
<a name="l00238"></a>00238     iq_it = <a class="code" href="classBackEnd_1_1InstQueue.html#ad94e34caaaf370c845966bd354354136">nonSpec</a>.begin();
<a name="l00239"></a>00239     iq_end_it = <a class="code" href="classBackEnd_1_1InstQueue.html#ad94e34caaaf370c845966bd354354136">nonSpec</a>.end();
<a name="l00240"></a>00240 
<a name="l00241"></a>00241     <span class="keywordflow">while</span> (iq_it != iq_end_it &amp;&amp; (*iq_it)-&gt;seqNum &gt; sn) {
<a name="l00242"></a>00242         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Instruction [sn:%lli] removed from IQ\n&quot;</span>, (*iq_it)-&gt;seqNum);
<a name="l00243"></a>00243         (*iq_it)-&gt;iqItValid = <span class="keyword">false</span>;
<a name="l00244"></a>00244         <a class="code" href="classBackEnd_1_1InstQueue.html#ad94e34caaaf370c845966bd354354136">nonSpec</a>.erase(iq_it++);
<a name="l00245"></a>00245         --<a class="code" href="classBackEnd_1_1InstQueue.html#a358c879c68910efe5300c4515df35b6c">numInsts</a>;
<a name="l00246"></a>00246     }
<a name="l00247"></a>00247 
<a name="l00248"></a>00248     iq_it = <a class="code" href="classBackEnd_1_1InstQueue.html#a8ca9831b0a85813e19007e433bddc163">replayList</a>.begin();
<a name="l00249"></a>00249     iq_end_it = <a class="code" href="classBackEnd_1_1InstQueue.html#a8ca9831b0a85813e19007e433bddc163">replayList</a>.end();
<a name="l00250"></a>00250 
<a name="l00251"></a>00251     <span class="keywordflow">while</span> (iq_it != iq_end_it) {
<a name="l00252"></a>00252         <span class="keywordflow">if</span> ((*iq_it)-&gt;seqNum &gt; sn) {
<a name="l00253"></a>00253             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Instruction [sn:%lli] removed from IQ\n&quot;</span>, (*iq_it)-&gt;seqNum);
<a name="l00254"></a>00254             (*iq_it)-&gt;iqItValid = <span class="keyword">false</span>;
<a name="l00255"></a>00255             <a class="code" href="classBackEnd_1_1InstQueue.html#a8ca9831b0a85813e19007e433bddc163">replayList</a>.erase(iq_it++);
<a name="l00256"></a>00256             --<a class="code" href="classBackEnd_1_1InstQueue.html#a358c879c68910efe5300c4515df35b6c">numInsts</a>;
<a name="l00257"></a>00257         } <span class="keywordflow">else</span> {
<a name="l00258"></a>00258             iq_it++;
<a name="l00259"></a>00259         }
<a name="l00260"></a>00260     }
<a name="l00261"></a>00261 
<a name="l00262"></a>00262     assert(<a class="code" href="classBackEnd_1_1InstQueue.html#a358c879c68910efe5300c4515df35b6c">numInsts</a> &gt;= 0);
<a name="l00263"></a>00263 <span class="comment">/*</span>
<a name="l00264"></a>00264 <span class="comment">    InstListIt ready_it = readyList.begin();</span>
<a name="l00265"></a>00265 <span class="comment">    InstListIt ready_end_it = readyList.end();</span>
<a name="l00266"></a>00266 <span class="comment"></span>
<a name="l00267"></a>00267 <span class="comment">    while (ready_it != ready_end_it) {</span>
<a name="l00268"></a>00268 <span class="comment">        if ((*ready_it)-&gt;seqNum &gt; sn) {</span>
<a name="l00269"></a>00269 <span class="comment">            readyList.erase(ready_it++);</span>
<a name="l00270"></a>00270 <span class="comment">        } else {</span>
<a name="l00271"></a>00271 <span class="comment">            ready_it++;</span>
<a name="l00272"></a>00272 <span class="comment">        }</span>
<a name="l00273"></a>00273 <span class="comment">    }</span>
<a name="l00274"></a>00274 <span class="comment">*/</span>
<a name="l00275"></a>00275 }
<a name="l00276"></a>00276 
<a name="l00277"></a>00277 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l00278"></a>00278 <span class="keywordtype">int</span>
<a name="l00279"></a><a class="code" href="classBackEnd_1_1InstQueue.html#adc3bb738d2526d7074ee2a17b7c34bc4">00279</a> <a class="code" href="classBackEnd.html">BackEnd&lt;Impl&gt;::InstQueue::wakeDependents</a>(<a class="code" href="classBackEnd.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;inst)
<a name="l00280"></a>00280 {
<a name="l00281"></a>00281     assert(!inst-&gt;isSquashed());
<a name="l00282"></a>00282     <a class="code" href="classstd_1_1vector.html">std::vector&lt;DynInstPtr&gt;</a> &amp;dependents = inst-&gt;getDependents();
<a name="l00283"></a>00283     <span class="keywordtype">int</span> num_outputs = dependents.size();
<a name="l00284"></a>00284 
<a name="l00285"></a>00285     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Waking instruction [sn:%lli] dependents in IQ\n&quot;</span>, inst-&gt;seqNum);
<a name="l00286"></a>00286 
<a name="l00287"></a>00287     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; num_outputs; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00288"></a>00288         <a class="code" href="classBackEnd.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> dep_inst = dependents[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>];
<a name="l00289"></a>00289         dep_inst-&gt;markSrcRegReady();
<a name="l00290"></a>00290         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Marking source reg ready [sn:%lli] in IQ\n&quot;</span>, dep_inst-&gt;seqNum);
<a name="l00291"></a>00291 
<a name="l00292"></a>00292         <span class="keywordflow">if</span> (dep_inst-&gt;readyToIssue() &amp;&amp; dep_inst-&gt;iqItValid) {
<a name="l00293"></a>00293             <span class="keywordflow">if</span> (dep_inst-&gt;isNonSpeculative()) {
<a name="l00294"></a>00294                 assert(<a class="code" href="classBackEnd_1_1InstQueue.html#aea2496e092fdfa5953ee18676dcc78da">find</a>(<a class="code" href="classBackEnd_1_1InstQueue.html#af8ceabb22d9297bd28382151f35a2252aaee95c287c473832b4e60a841e2211ff">NonSpec</a>, dep_inst-&gt;iqIt));
<a name="l00295"></a>00295                 <a class="code" href="classBackEnd_1_1InstQueue.html#ad94e34caaaf370c845966bd354354136">nonSpec</a>.erase(dep_inst-&gt;iqIt);
<a name="l00296"></a>00296             } <span class="keywordflow">else</span> {
<a name="l00297"></a>00297                 assert(<a class="code" href="classBackEnd_1_1InstQueue.html#aea2496e092fdfa5953ee18676dcc78da">find</a>(<a class="code" href="classBackEnd_1_1InstQueue.html#af8ceabb22d9297bd28382151f35a2252a7608065caa4249ff47a58c32d6f3c531">IQ</a>, dep_inst-&gt;iqIt));
<a name="l00298"></a>00298                 <a class="code" href="classBackEnd_1_1InstQueue.html#a22cf4c165453d89ad7db9e099d30f66e">iq</a>.erase(dep_inst-&gt;iqIt);
<a name="l00299"></a>00299             }
<a name="l00300"></a>00300 
<a name="l00301"></a>00301             <a class="code" href="classBackEnd_1_1InstQueue.html#ad2696412af240d7ad2a5f9a4bf3157ef">toBeScheduled</a>.push_front(dep_inst);
<a name="l00302"></a>00302             dep_inst-&gt;iqIt = <a class="code" href="classBackEnd_1_1InstQueue.html#ad2696412af240d7ad2a5f9a4bf3157ef">toBeScheduled</a>.begin();
<a name="l00303"></a>00303         }
<a name="l00304"></a>00304     }
<a name="l00305"></a>00305     <span class="keywordflow">return</span> num_outputs;
<a name="l00306"></a>00306 }
<a name="l00307"></a>00307 
<a name="l00308"></a>00308 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l00309"></a>00309 <span class="keywordtype">void</span>
<a name="l00310"></a><a class="code" href="classBackEnd_1_1InstQueue.html#aa9c46f45f491ef90a936c7e2b95f20aa">00310</a> <a class="code" href="classBackEnd.html#aa9c46f45f491ef90a936c7e2b95f20aa">BackEnd&lt;Impl&gt;::InstQueue::rescheduleMemInst</a>(<a class="code" href="classBackEnd.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;inst)
<a name="l00311"></a>00311 {
<a name="l00312"></a>00312     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Rescheduling memory instruction [sn:%lli]\n&quot;</span>, inst-&gt;seqNum);
<a name="l00313"></a>00313     assert(!inst-&gt;iqItValid);
<a name="l00314"></a>00314     <a class="code" href="classBackEnd_1_1InstQueue.html#a8ca9831b0a85813e19007e433bddc163">replayList</a>.push_front(inst);
<a name="l00315"></a>00315     inst-&gt;iqIt = <a class="code" href="classBackEnd_1_1InstQueue.html#a8ca9831b0a85813e19007e433bddc163">replayList</a>.begin();
<a name="l00316"></a>00316     inst-&gt;iqItValid = <span class="keyword">true</span>;
<a name="l00317"></a>00317     ++<a class="code" href="classBackEnd_1_1InstQueue.html#a358c879c68910efe5300c4515df35b6c">numInsts</a>;
<a name="l00318"></a>00318 }
<a name="l00319"></a>00319 
<a name="l00320"></a>00320 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l00321"></a>00321 <span class="keywordtype">void</span>
<a name="l00322"></a><a class="code" href="classBackEnd_1_1InstQueue.html#ae165df775b4de9e9430228c7f04c2bc9">00322</a> <a class="code" href="classBackEnd.html#ae165df775b4de9e9430228c7f04c2bc9">BackEnd&lt;Impl&gt;::InstQueue::replayMemInst</a>(<a class="code" href="classBackEnd.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;inst)
<a name="l00323"></a>00323 {
<a name="l00324"></a>00324     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Replaying memory instruction [sn:%lli]\n&quot;</span>, inst-&gt;seqNum);
<a name="l00325"></a>00325     assert(<a class="code" href="classBackEnd_1_1InstQueue.html#aea2496e092fdfa5953ee18676dcc78da">find</a>(<a class="code" href="classBackEnd_1_1InstQueue.html#af8ceabb22d9297bd28382151f35a2252a170394fd5c7e033a2d09b135e567b083">ReplayList</a>, inst-&gt;iqIt));
<a name="l00326"></a>00326     <a class="code" href="classBackEnd_1_1InstQueue.html#a4da46d72d68fcd5bfe65dc701c358379">InstListIt</a> iq_it = --<a class="code" href="classBackEnd_1_1InstQueue.html#a8ca9831b0a85813e19007e433bddc163">replayList</a>.end();
<a name="l00327"></a>00327     <a class="code" href="classBackEnd_1_1InstQueue.html#a4da46d72d68fcd5bfe65dc701c358379">InstListIt</a> iq_end_it = <a class="code" href="classBackEnd_1_1InstQueue.html#a8ca9831b0a85813e19007e433bddc163">replayList</a>.end();
<a name="l00328"></a>00328     <span class="keywordflow">while</span> (iq_it != iq_end_it) {
<a name="l00329"></a>00329         <a class="code" href="classBackEnd.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> rescheduled_inst = (*iq_it);
<a name="l00330"></a>00330 
<a name="l00331"></a>00331         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Memory instruction [sn:%lli] also replayed\n&quot;</span>, inst-&gt;seqNum);
<a name="l00332"></a>00332         <a class="code" href="classBackEnd_1_1InstQueue.html#a8ca9831b0a85813e19007e433bddc163">replayList</a>.erase(iq_it--);
<a name="l00333"></a>00333         <a class="code" href="classBackEnd_1_1InstQueue.html#ad2696412af240d7ad2a5f9a4bf3157ef">toBeScheduled</a>.push_front(rescheduled_inst);
<a name="l00334"></a>00334         rescheduled_inst-&gt;iqIt = <a class="code" href="classBackEnd_1_1InstQueue.html#ad2696412af240d7ad2a5f9a4bf3157ef">toBeScheduled</a>.begin();
<a name="l00335"></a>00335     }
<a name="l00336"></a>00336 }
<a name="l00337"></a>00337 
<a name="l00338"></a>00338 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l00339"></a>00339 <span class="keywordtype">void</span>
<a name="l00340"></a><a class="code" href="classBackEnd_1_1InstQueue.html#a2212f511dc1886c073cf7ff1665f5c87">00340</a> <a class="code" href="classBackEnd.html#a2212f511dc1886c073cf7ff1665f5c87">BackEnd&lt;Impl&gt;::InstQueue::completeMemInst</a>(<a class="code" href="classBackEnd.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;inst)
<a name="l00341"></a>00341 {
<a name="l00342"></a>00342     <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Not implemented.&quot;</span>);
<a name="l00343"></a>00343 }
<a name="l00344"></a>00344 
<a name="l00345"></a>00345 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l00346"></a>00346 <span class="keywordtype">bool</span>
<a name="l00347"></a>00347 <a class="code" href="classBackEnd.html">BackEnd&lt;Impl&gt;::InstQueue::find</a>(queue <a class="code" href="namespaceArmISA.html#a853401ad1c480843ad53caaa0198fd05">q</a>, <a class="code" href="classBackEnd.html#a4da46d72d68fcd5bfe65dc701c358379">InstListIt</a> it)
<a name="l00348"></a>00348 {
<a name="l00349"></a>00349     <a class="code" href="classBackEnd_1_1InstQueue.html#a4da46d72d68fcd5bfe65dc701c358379">InstListIt</a> iq_it, iq_end_it;
<a name="l00350"></a>00350     <span class="keywordflow">switch</span>(q) {
<a name="l00351"></a>00351       <span class="keywordflow">case</span> <a class="code" href="classBackEnd_1_1InstQueue.html#af8ceabb22d9297bd28382151f35a2252aaee95c287c473832b4e60a841e2211ff">NonSpec</a>:
<a name="l00352"></a>00352         iq_it = <a class="code" href="classBackEnd_1_1InstQueue.html#ad94e34caaaf370c845966bd354354136">nonSpec</a>.begin();
<a name="l00353"></a>00353         iq_end_it = <a class="code" href="classBackEnd_1_1InstQueue.html#ad94e34caaaf370c845966bd354354136">nonSpec</a>.end();
<a name="l00354"></a>00354         <span class="keywordflow">break</span>;
<a name="l00355"></a>00355       <span class="keywordflow">case</span> <a class="code" href="classBackEnd_1_1InstQueue.html#af8ceabb22d9297bd28382151f35a2252a7608065caa4249ff47a58c32d6f3c531">IQ</a>:
<a name="l00356"></a>00356         iq_it = <a class="code" href="classBackEnd_1_1InstQueue.html#a22cf4c165453d89ad7db9e099d30f66e">iq</a>.begin();
<a name="l00357"></a>00357         iq_end_it = <a class="code" href="classBackEnd_1_1InstQueue.html#a22cf4c165453d89ad7db9e099d30f66e">iq</a>.end();
<a name="l00358"></a>00358         <span class="keywordflow">break</span>;
<a name="l00359"></a>00359       <span class="keywordflow">case</span> <a class="code" href="classBackEnd_1_1InstQueue.html#af8ceabb22d9297bd28382151f35a2252a9e2b065397f5c9551ce86c194a700a6d">ToBeScheduled</a>:
<a name="l00360"></a>00360         iq_it = <a class="code" href="classBackEnd_1_1InstQueue.html#ad2696412af240d7ad2a5f9a4bf3157ef">toBeScheduled</a>.begin();
<a name="l00361"></a>00361         iq_end_it = <a class="code" href="classBackEnd_1_1InstQueue.html#ad2696412af240d7ad2a5f9a4bf3157ef">toBeScheduled</a>.end();
<a name="l00362"></a>00362         <span class="keywordflow">break</span>;
<a name="l00363"></a>00363       <span class="keywordflow">case</span> <a class="code" href="classBackEnd_1_1InstQueue.html#af8ceabb22d9297bd28382151f35a2252a7c2a1b33083108fc8d494fa70df4efec">ReadyList</a>:
<a name="l00364"></a>00364         iq_it = <a class="code" href="classBackEnd_1_1InstQueue.html#a008a1081076d1f3d6d0077ca5ddde1ad">readyList</a>.begin();
<a name="l00365"></a>00365         iq_end_it = <a class="code" href="classBackEnd_1_1InstQueue.html#a008a1081076d1f3d6d0077ca5ddde1ad">readyList</a>.end();
<a name="l00366"></a>00366         <span class="keywordflow">break</span>;
<a name="l00367"></a>00367       <span class="keywordflow">case</span> <a class="code" href="classBackEnd_1_1InstQueue.html#af8ceabb22d9297bd28382151f35a2252a170394fd5c7e033a2d09b135e567b083">ReplayList</a>:
<a name="l00368"></a>00368         iq_it = <a class="code" href="classBackEnd_1_1InstQueue.html#a8ca9831b0a85813e19007e433bddc163">replayList</a>.begin();
<a name="l00369"></a>00369         iq_end_it = <a class="code" href="classBackEnd_1_1InstQueue.html#a8ca9831b0a85813e19007e433bddc163">replayList</a>.end();
<a name="l00370"></a>00370     }
<a name="l00371"></a>00371 
<a name="l00372"></a>00372     <span class="keywordflow">while</span> (iq_it != it &amp;&amp; iq_it != iq_end_it) {
<a name="l00373"></a>00373         iq_it++;
<a name="l00374"></a>00374     }
<a name="l00375"></a>00375     <span class="keywordflow">if</span> (iq_it == it) {
<a name="l00376"></a>00376         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00377"></a>00377     } <span class="keywordflow">else</span> {
<a name="l00378"></a>00378         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00379"></a>00379     }
<a name="l00380"></a>00380 }
<a name="l00381"></a>00381 
<a name="l00382"></a>00382 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l00383"></a>00383 <span class="keywordtype">void</span>
<a name="l00384"></a><a class="code" href="classBackEnd_1_1InstQueue.html#a80587b4fe043bbe1995536cb3b361588">00384</a> <a class="code" href="classBackEnd.html#a80587b4fe043bbe1995536cb3b361588">BackEnd&lt;Impl&gt;::InstQueue::dumpInsts</a>()
<a name="l00385"></a>00385 {
<a name="l00386"></a>00386     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;IQ size: %i\n&quot;</span>, <a class="code" href="classBackEnd_1_1InstQueue.html#a22cf4c165453d89ad7db9e099d30f66e">iq</a>.size());
<a name="l00387"></a>00387 
<a name="l00388"></a>00388     <a class="code" href="classBackEnd_1_1InstQueue.html#a4da46d72d68fcd5bfe65dc701c358379">InstListIt</a> inst_list_it = --<a class="code" href="classBackEnd_1_1InstQueue.html#a22cf4c165453d89ad7db9e099d30f66e">iq</a>.end();
<a name="l00389"></a>00389 
<a name="l00390"></a>00390     <span class="keywordtype">int</span> num = 0;
<a name="l00391"></a>00391     <span class="keywordtype">int</span> valid_num = 0;
<a name="l00392"></a>00392     <span class="keywordflow">while</span> (inst_list_it != <a class="code" href="classBackEnd_1_1InstQueue.html#a22cf4c165453d89ad7db9e099d30f66e">iq</a>.end())
<a name="l00393"></a>00393     {
<a name="l00394"></a>00394         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Instruction:%i\n&quot;</span>,
<a name="l00395"></a>00395                 num);
<a name="l00396"></a>00396         <span class="keywordflow">if</span> (!(*inst_list_it)-&gt;isSquashed()) {
<a name="l00397"></a>00397             <span class="keywordflow">if</span> (!(*inst_list_it)-&gt;isIssued()) {
<a name="l00398"></a>00398                 ++valid_num;
<a name="l00399"></a>00399                 <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Count:%i\n&quot;</span>, valid_num);
<a name="l00400"></a>00400             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*inst_list_it)-&gt;isMemRef() &amp;&amp;
<a name="l00401"></a>00401                        !(*inst_list_it)-&gt;memOpDone) {
<a name="l00402"></a>00402                 <span class="comment">// Loads that have not been marked as executed still count</span>
<a name="l00403"></a>00403                 <span class="comment">// towards the total instructions.</span>
<a name="l00404"></a>00404                 ++valid_num;
<a name="l00405"></a>00405                 <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Count:%i\n&quot;</span>, valid_num);
<a name="l00406"></a>00406             }
<a name="l00407"></a>00407         }
<a name="l00408"></a>00408 
<a name="l00409"></a>00409         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;PC:%#x\n[sn:%lli]\n[tid:%i]\n&quot;</span>
<a name="l00410"></a>00410                 <span class="stringliteral">&quot;Issued:%i\nSquashed:%i\n&quot;</span>,
<a name="l00411"></a>00411                 (*inst_list_it)-&gt;readPC(),
<a name="l00412"></a>00412                 (*inst_list_it)-&gt;seqNum,
<a name="l00413"></a>00413                 (*inst_list_it)-&gt;threadNumber,
<a name="l00414"></a>00414                 (*inst_list_it)-&gt;isIssued(),
<a name="l00415"></a>00415                 (*inst_list_it)-&gt;isSquashed());
<a name="l00416"></a>00416 
<a name="l00417"></a>00417         <span class="keywordflow">if</span> ((*inst_list_it)-&gt;isMemRef()) {
<a name="l00418"></a>00418             <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;MemOpDone:%i\n&quot;</span>, (*inst_list_it)-&gt;memOpDone);
<a name="l00419"></a>00419         }
<a name="l00420"></a>00420 
<a name="l00421"></a>00421         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00422"></a>00422 
<a name="l00423"></a>00423         inst_list_it--;
<a name="l00424"></a>00424         ++num;
<a name="l00425"></a>00425     }
<a name="l00426"></a>00426 
<a name="l00427"></a>00427     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;nonSpec size: %i\n&quot;</span>, <a class="code" href="classBackEnd_1_1InstQueue.html#ad94e34caaaf370c845966bd354354136">nonSpec</a>.size());
<a name="l00428"></a>00428 
<a name="l00429"></a>00429     inst_list_it = --<a class="code" href="classBackEnd_1_1InstQueue.html#ad94e34caaaf370c845966bd354354136">nonSpec</a>.end();
<a name="l00430"></a>00430 
<a name="l00431"></a>00431     <span class="keywordflow">while</span> (inst_list_it != <a class="code" href="classBackEnd_1_1InstQueue.html#ad94e34caaaf370c845966bd354354136">nonSpec</a>.end())
<a name="l00432"></a>00432     {
<a name="l00433"></a>00433         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Instruction:%i\n&quot;</span>,
<a name="l00434"></a>00434                 num);
<a name="l00435"></a>00435         <span class="keywordflow">if</span> (!(*inst_list_it)-&gt;isSquashed()) {
<a name="l00436"></a>00436             <span class="keywordflow">if</span> (!(*inst_list_it)-&gt;isIssued()) {
<a name="l00437"></a>00437                 ++valid_num;
<a name="l00438"></a>00438                 <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Count:%i\n&quot;</span>, valid_num);
<a name="l00439"></a>00439             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*inst_list_it)-&gt;isMemRef() &amp;&amp;
<a name="l00440"></a>00440                        !(*inst_list_it)-&gt;memOpDone) {
<a name="l00441"></a>00441                 <span class="comment">// Loads that have not been marked as executed still count</span>
<a name="l00442"></a>00442                 <span class="comment">// towards the total instructions.</span>
<a name="l00443"></a>00443                 ++valid_num;
<a name="l00444"></a>00444                 <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Count:%i\n&quot;</span>, valid_num);
<a name="l00445"></a>00445             }
<a name="l00446"></a>00446         }
<a name="l00447"></a>00447 
<a name="l00448"></a>00448         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;PC:%#x\n[sn:%lli]\n[tid:%i]\n&quot;</span>
<a name="l00449"></a>00449                 <span class="stringliteral">&quot;Issued:%i\nSquashed:%i\n&quot;</span>,
<a name="l00450"></a>00450                 (*inst_list_it)-&gt;readPC(),
<a name="l00451"></a>00451                 (*inst_list_it)-&gt;seqNum,
<a name="l00452"></a>00452                 (*inst_list_it)-&gt;threadNumber,
<a name="l00453"></a>00453                 (*inst_list_it)-&gt;isIssued(),
<a name="l00454"></a>00454                 (*inst_list_it)-&gt;isSquashed());
<a name="l00455"></a>00455 
<a name="l00456"></a>00456         <span class="keywordflow">if</span> ((*inst_list_it)-&gt;isMemRef()) {
<a name="l00457"></a>00457             <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;MemOpDone:%i\n&quot;</span>, (*inst_list_it)-&gt;memOpDone);
<a name="l00458"></a>00458         }
<a name="l00459"></a>00459 
<a name="l00460"></a>00460         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00461"></a>00461 
<a name="l00462"></a>00462         inst_list_it--;
<a name="l00463"></a>00463         ++num;
<a name="l00464"></a>00464     }
<a name="l00465"></a>00465 
<a name="l00466"></a>00466     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;toBeScheduled size: %i\n&quot;</span>, <a class="code" href="classBackEnd_1_1InstQueue.html#ad2696412af240d7ad2a5f9a4bf3157ef">toBeScheduled</a>.size());
<a name="l00467"></a>00467 
<a name="l00468"></a>00468     inst_list_it = --<a class="code" href="classBackEnd_1_1InstQueue.html#ad2696412af240d7ad2a5f9a4bf3157ef">toBeScheduled</a>.end();
<a name="l00469"></a>00469 
<a name="l00470"></a>00470     <span class="keywordflow">while</span> (inst_list_it != <a class="code" href="classBackEnd_1_1InstQueue.html#ad2696412af240d7ad2a5f9a4bf3157ef">toBeScheduled</a>.end())
<a name="l00471"></a>00471     {
<a name="l00472"></a>00472         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Instruction:%i\n&quot;</span>,
<a name="l00473"></a>00473                 num);
<a name="l00474"></a>00474         <span class="keywordflow">if</span> (!(*inst_list_it)-&gt;isSquashed()) {
<a name="l00475"></a>00475             <span class="keywordflow">if</span> (!(*inst_list_it)-&gt;isIssued()) {
<a name="l00476"></a>00476                 ++valid_num;
<a name="l00477"></a>00477                 <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Count:%i\n&quot;</span>, valid_num);
<a name="l00478"></a>00478             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*inst_list_it)-&gt;isMemRef() &amp;&amp;
<a name="l00479"></a>00479                        !(*inst_list_it)-&gt;memOpDone) {
<a name="l00480"></a>00480                 <span class="comment">// Loads that have not been marked as executed still count</span>
<a name="l00481"></a>00481                 <span class="comment">// towards the total instructions.</span>
<a name="l00482"></a>00482                 ++valid_num;
<a name="l00483"></a>00483                 <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Count:%i\n&quot;</span>, valid_num);
<a name="l00484"></a>00484             }
<a name="l00485"></a>00485         }
<a name="l00486"></a>00486 
<a name="l00487"></a>00487         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;PC:%#x\n[sn:%lli]\n[tid:%i]\n&quot;</span>
<a name="l00488"></a>00488                 <span class="stringliteral">&quot;Issued:%i\nSquashed:%i\n&quot;</span>,
<a name="l00489"></a>00489                 (*inst_list_it)-&gt;readPC(),
<a name="l00490"></a>00490                 (*inst_list_it)-&gt;seqNum,
<a name="l00491"></a>00491                 (*inst_list_it)-&gt;threadNumber,
<a name="l00492"></a>00492                 (*inst_list_it)-&gt;isIssued(),
<a name="l00493"></a>00493                 (*inst_list_it)-&gt;isSquashed());
<a name="l00494"></a>00494 
<a name="l00495"></a>00495         <span class="keywordflow">if</span> ((*inst_list_it)-&gt;isMemRef()) {
<a name="l00496"></a>00496             <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;MemOpDone:%i\n&quot;</span>, (*inst_list_it)-&gt;memOpDone);
<a name="l00497"></a>00497         }
<a name="l00498"></a>00498 
<a name="l00499"></a>00499         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00500"></a>00500 
<a name="l00501"></a>00501         inst_list_it--;
<a name="l00502"></a>00502         ++num;
<a name="l00503"></a>00503     }
<a name="l00504"></a>00504 
<a name="l00505"></a>00505     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;readyList size: %i\n&quot;</span>, <a class="code" href="classBackEnd_1_1InstQueue.html#a008a1081076d1f3d6d0077ca5ddde1ad">readyList</a>.size());
<a name="l00506"></a>00506 
<a name="l00507"></a>00507     inst_list_it = --<a class="code" href="classBackEnd_1_1InstQueue.html#a008a1081076d1f3d6d0077ca5ddde1ad">readyList</a>.end();
<a name="l00508"></a>00508 
<a name="l00509"></a>00509     <span class="keywordflow">while</span> (inst_list_it != <a class="code" href="classBackEnd_1_1InstQueue.html#a008a1081076d1f3d6d0077ca5ddde1ad">readyList</a>.end())
<a name="l00510"></a>00510     {
<a name="l00511"></a>00511         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Instruction:%i\n&quot;</span>,
<a name="l00512"></a>00512                 num);
<a name="l00513"></a>00513         <span class="keywordflow">if</span> (!(*inst_list_it)-&gt;isSquashed()) {
<a name="l00514"></a>00514             <span class="keywordflow">if</span> (!(*inst_list_it)-&gt;isIssued()) {
<a name="l00515"></a>00515                 ++valid_num;
<a name="l00516"></a>00516                 <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Count:%i\n&quot;</span>, valid_num);
<a name="l00517"></a>00517             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*inst_list_it)-&gt;isMemRef() &amp;&amp;
<a name="l00518"></a>00518                        !(*inst_list_it)-&gt;memOpDone) {
<a name="l00519"></a>00519                 <span class="comment">// Loads that have not been marked as executed still count</span>
<a name="l00520"></a>00520                 <span class="comment">// towards the total instructions.</span>
<a name="l00521"></a>00521                 ++valid_num;
<a name="l00522"></a>00522                 <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Count:%i\n&quot;</span>, valid_num);
<a name="l00523"></a>00523             }
<a name="l00524"></a>00524         }
<a name="l00525"></a>00525 
<a name="l00526"></a>00526         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;PC:%#x\n[sn:%lli]\n[tid:%i]\n&quot;</span>
<a name="l00527"></a>00527                 <span class="stringliteral">&quot;Issued:%i\nSquashed:%i\n&quot;</span>,
<a name="l00528"></a>00528                 (*inst_list_it)-&gt;readPC(),
<a name="l00529"></a>00529                 (*inst_list_it)-&gt;seqNum,
<a name="l00530"></a>00530                 (*inst_list_it)-&gt;threadNumber,
<a name="l00531"></a>00531                 (*inst_list_it)-&gt;isIssued(),
<a name="l00532"></a>00532                 (*inst_list_it)-&gt;isSquashed());
<a name="l00533"></a>00533 
<a name="l00534"></a>00534         <span class="keywordflow">if</span> ((*inst_list_it)-&gt;isMemRef()) {
<a name="l00535"></a>00535             <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;MemOpDone:%i\n&quot;</span>, (*inst_list_it)-&gt;memOpDone);
<a name="l00536"></a>00536         }
<a name="l00537"></a>00537 
<a name="l00538"></a>00538         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00539"></a>00539 
<a name="l00540"></a>00540         inst_list_it--;
<a name="l00541"></a>00541         ++num;
<a name="l00542"></a>00542     }
<a name="l00543"></a>00543 }
<a name="l00544"></a>00544 
<a name="l00545"></a>00545 <span class="keyword">template</span>&lt;<span class="keyword">class</span> Impl&gt;
<a name="l00546"></a><a class="code" href="classBackEnd_1_1LdWritebackEvent.html#acb4a3159b31096e59f3c05256151e7e0">00546</a> <a class="code" href="classBackEnd.html">BackEnd&lt;Impl&gt;::LdWritebackEvent::LdWritebackEvent</a>(<a class="code" href="classBackEnd.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;_inst,
<a name="l00547"></a>00547                                                   <a class="code" href="classBackEnd.html">BackEnd&lt;Impl&gt;</a> *_be)
<a name="l00548"></a>00548     : <a class="code" href="classEvent.html">Event</a>(&amp;<a class="code" href="eventq_8cc.html#a304cfaba7d9f7d70b0f766f8a28267db" title="Array for main event queues.">mainEventQueue</a>), inst(_inst), <a class="code" href="namespaceMipsISA.html#a9ce4b83c9b9078006fb3ba9345c5bdcf">be</a>(_be)
<a name="l00549"></a>00549 {
<a name="l00550"></a>00550     this-&gt;<a class="code" href="classEvent.html#a5e0b0810720dd9a6badbf966c410f723" title="Accessor for flags.">setFlags</a>(<a class="code" href="classEventBase.html#a54ba74dbb445f08c349fc85154f58b97">Event::AutoDelete</a>);
<a name="l00551"></a>00551 }
<a name="l00552"></a>00552 
<a name="l00553"></a>00553 <span class="keyword">template</span>&lt;<span class="keyword">class</span> Impl&gt;
<a name="l00554"></a>00554 <span class="keywordtype">void</span>
<a name="l00555"></a><a class="code" href="classBackEnd_1_1LdWritebackEvent.html#a2e9c5136d19b1a95fc427e0852deab5c">00555</a> <a class="code" href="classBackEnd.html">BackEnd&lt;Impl&gt;::LdWritebackEvent::process</a>()
<a name="l00556"></a>00556 {
<a name="l00557"></a>00557     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Load writeback event [sn:%lli]\n&quot;</span>, <a class="code" href="classBackEnd_1_1LdWritebackEvent.html#af5d4fb974eeb4507d4c837d365d0cefc">inst</a>-&gt;seqNum);
<a name="l00558"></a>00558 <span class="comment">//    DPRINTF(Activity, &quot;Activity: Ld Writeback event [sn:%lli]\n&quot;, inst-&gt;seqNum);</span>
<a name="l00559"></a>00559 
<a name="l00560"></a>00560     <span class="comment">//iewStage-&gt;ldstQueue.removeMSHR(inst-&gt;threadNumber,inst-&gt;seqNum);</span>
<a name="l00561"></a>00561 
<a name="l00562"></a>00562 <span class="comment">//    iewStage-&gt;wakeCPU();</span>
<a name="l00563"></a>00563 
<a name="l00564"></a>00564     <span class="keywordflow">if</span> (<a class="code" href="classBackEnd_1_1LdWritebackEvent.html#af5d4fb974eeb4507d4c837d365d0cefc">inst</a>-&gt;isSquashed()) {
<a name="l00565"></a>00565         <a class="code" href="classBackEnd_1_1LdWritebackEvent.html#af5d4fb974eeb4507d4c837d365d0cefc">inst</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00566"></a>00566         <span class="keywordflow">return</span>;
<a name="l00567"></a>00567     }
<a name="l00568"></a>00568 
<a name="l00569"></a>00569     <span class="keywordflow">if</span> (!<a class="code" href="classBackEnd_1_1LdWritebackEvent.html#af5d4fb974eeb4507d4c837d365d0cefc">inst</a>-&gt;isExecuted()) {
<a name="l00570"></a>00570         <a class="code" href="classBackEnd_1_1LdWritebackEvent.html#af5d4fb974eeb4507d4c837d365d0cefc">inst</a>-&gt;setExecuted();
<a name="l00571"></a>00571 
<a name="l00572"></a>00572         <span class="comment">// Execute again to copy data to proper place.</span>
<a name="l00573"></a>00573         <a class="code" href="classBackEnd_1_1LdWritebackEvent.html#af5d4fb974eeb4507d4c837d365d0cefc">inst</a>-&gt;completeAcc();
<a name="l00574"></a>00574     }
<a name="l00575"></a>00575 
<a name="l00576"></a>00576     <span class="comment">// Need to insert instruction into queue to commit</span>
<a name="l00577"></a>00577     <a class="code" href="classBackEnd_1_1LdWritebackEvent.html#a84f815aa1fa864ba2e6d75f5ad2b52d1">be</a>-&gt;<a class="code" href="classBackEnd.html#a720e9865ffa6e84b756f5ec1d1a24d94">instToCommit</a>(<a class="code" href="classBackEnd_1_1LdWritebackEvent.html#af5d4fb974eeb4507d4c837d365d0cefc">inst</a>);
<a name="l00578"></a>00578 
<a name="l00579"></a>00579     <span class="comment">//wroteToTimeBuffer = true;</span>
<a name="l00580"></a>00580 <span class="comment">//    iewStage-&gt;activityThisCycle();</span>
<a name="l00581"></a>00581 
<a name="l00582"></a>00582     <a class="code" href="classBackEnd_1_1LdWritebackEvent.html#af5d4fb974eeb4507d4c837d365d0cefc">inst</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00583"></a>00583 }
<a name="l00584"></a>00584 
<a name="l00585"></a>00585 <span class="keyword">template</span>&lt;<span class="keyword">class</span> Impl&gt;
<a name="l00586"></a>00586 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00587"></a><a class="code" href="classBackEnd_1_1LdWritebackEvent.html#a5a14fe478e2393ff51f02e9b7be27e00">00587</a> <a class="code" href="classBackEnd.html">BackEnd&lt;Impl&gt;::LdWritebackEvent::description</a>()<span class="keyword"> const</span>
<a name="l00588"></a>00588 <span class="keyword"></span>{
<a name="l00589"></a>00589     <span class="keywordflow">return</span> <span class="stringliteral">&quot;Load writeback&quot;</span>;
<a name="l00590"></a>00590 }
<a name="l00591"></a>00591 
<a name="l00592"></a>00592 
<a name="l00593"></a>00593 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l00594"></a><a class="code" href="classBackEnd_1_1DCacheCompletionEvent.html#a3448601dc7561a31778d913584e4fbae">00594</a> <a class="code" href="classBackEnd.html#a27227be5511e316f17702a3a99fb0b98">BackEnd&lt;Impl&gt;::DCacheCompletionEvent::DCacheCompletionEvent</a>(<a class="code" href="classBackEnd.html">BackEnd</a> *_be)
<a name="l00595"></a>00595     : <a class="code" href="classEvent.html">Event</a>(&amp;<a class="code" href="eventq_8cc.html#a304cfaba7d9f7d70b0f766f8a28267db" title="Array for main event queues.">mainEventQueue</a>, CPU_Tick_Pri), <a class="code" href="namespaceMipsISA.html#a9ce4b83c9b9078006fb3ba9345c5bdcf">be</a>(_be)
<a name="l00596"></a>00596 {
<a name="l00597"></a>00597 }
<a name="l00598"></a>00598 
<a name="l00599"></a>00599 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l00600"></a>00600 <span class="keywordtype">void</span>
<a name="l00601"></a><a class="code" href="classBackEnd_1_1DCacheCompletionEvent.html#a2e9c5136d19b1a95fc427e0852deab5c">00601</a> <a class="code" href="classBackEnd.html">BackEnd&lt;Impl&gt;::DCacheCompletionEvent::process</a>()
<a name="l00602"></a>00602 {
<a name="l00603"></a>00603 }
<a name="l00604"></a>00604 
<a name="l00605"></a>00605 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l00606"></a>00606 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00607"></a><a class="code" href="classBackEnd_1_1DCacheCompletionEvent.html#a5a14fe478e2393ff51f02e9b7be27e00">00607</a> <a class="code" href="classBackEnd.html">BackEnd&lt;Impl&gt;::DCacheCompletionEvent::description</a>()<span class="keyword"> const</span>
<a name="l00608"></a>00608 <span class="keyword"></span>{
<a name="l00609"></a>00609     <span class="keywordflow">return</span> <span class="stringliteral">&quot;Cache completion&quot;</span>;
<a name="l00610"></a>00610 }
<a name="l00611"></a>00611 
<a name="l00612"></a>00612 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l00613"></a><a class="code" href="classBackEnd.html#a8698a618ba78dbd457f2cee79a739588">00613</a> <a class="code" href="classBackEnd.html#a8698a618ba78dbd457f2cee79a739588">BackEnd&lt;Impl&gt;::BackEnd</a>(<a class="code" href="classBackEnd.html#a818e103eae798a24a06a0a34631849ea">Params</a> *params)
<a name="l00614"></a>00614     : <a class="code" href="classBackEnd.html#ae446eaddd47d5f227ed00af24aaefe68">d2i</a>(5, 5), <a class="code" href="classBackEnd.html#a055203b013ada25d70a2a2c8b2364455">i2e</a>(5, 5), <a class="code" href="classBackEnd.html#a114248f83077c8e99f4f4aa0236aafeb">e2c</a>(5, 5), <a class="code" href="classBackEnd.html#a2647e2052851a9122ac4ce89b84d77b5">numInstsToWB</a>(5, 5),
<a name="l00615"></a>00615       xcSquash(false), <a class="code" href="classBackEnd.html#a9f8da5ee0decabae62161ec4c1738952">IQ</a>(params),
<a name="l00616"></a>00616       <a class="code" href="classBackEnd.html#a08f9ddeb55a0840fc2f9d8f4c5e7a9fc">cacheCompletionEvent</a>(this), <a class="code" href="classBackEnd.html#a2474a5474cbff19523a51eb1de01cda4">width</a>(params-&gt;backEndWidth),
<a name="l00617"></a>00617       <a class="code" href="classBackEnd.html#a319e9530b28153883e886be5b9c573eb">exactFullStall</a>(true)
<a name="l00618"></a>00618 {
<a name="l00619"></a>00619     <a class="code" href="classBackEnd.html#ae40678133a160367f2207f07975ca0f3">numROBEntries</a> = params-&gt;numROBEntries;
<a name="l00620"></a>00620     <a class="code" href="classBackEnd.html#a358c879c68910efe5300c4515df35b6c">numInsts</a> = 0;
<a name="l00621"></a>00621     <a class="code" href="classBackEnd.html#a10a1f0f6ff8acbb26f4c308a502c6141">numDispatchEntries</a> = 32;
<a name="l00622"></a>00622     <a class="code" href="classBackEnd.html#a9f8da5ee0decabae62161ec4c1738952">IQ</a>.<a class="code" href="classBackEnd_1_1InstQueue.html#ac17b73ac697edccbae68bdb271673c35">setBE</a>(<span class="keyword">this</span>);
<a name="l00623"></a>00623     <a class="code" href="classLSQ.html">LSQ</a>.setBE(<span class="keyword">this</span>);
<a name="l00624"></a>00624 
<a name="l00625"></a>00625     <span class="comment">// Setup IQ and LSQ with their parameters here.</span>
<a name="l00626"></a>00626     <a class="code" href="classBackEnd.html#ace1cd34be1eca99cb8c1d3a30e32fcbe">instsToDispatch</a> = <a class="code" href="classBackEnd.html#ae446eaddd47d5f227ed00af24aaefe68">d2i</a>.<a class="code" href="classTimeBuffer.html#ab1c801fd9d022ce4339cc62f4a0625dd">getWire</a>(-1);
<a name="l00627"></a>00627 
<a name="l00628"></a>00628     <a class="code" href="classBackEnd.html#a45c3ddf2275eab2326190578f1fcbee2">instsToExecute</a> = <a class="code" href="classBackEnd.html#a055203b013ada25d70a2a2c8b2364455">i2e</a>.<a class="code" href="classTimeBuffer.html#ab1c801fd9d022ce4339cc62f4a0625dd">getWire</a>(-1);
<a name="l00629"></a>00629 
<a name="l00630"></a>00630     <a class="code" href="classBackEnd.html#a9f8da5ee0decabae62161ec4c1738952">IQ</a>.<a class="code" href="classBackEnd_1_1InstQueue.html#adff8385686f237650837ba2fbf13e5da">setIssueExecQueue</a>(&amp;<a class="code" href="classBackEnd.html#a055203b013ada25d70a2a2c8b2364455">i2e</a>);
<a name="l00631"></a>00631 
<a name="l00632"></a>00632     <a class="code" href="classBackEnd.html#aa304d4c426ea2bba52be0a3c0b9811e3">dispatchWidth</a> = params-&gt;dispatchWidth ? params-&gt;dispatchWidth : <a class="code" href="classBackEnd.html#a2474a5474cbff19523a51eb1de01cda4">width</a>;
<a name="l00633"></a>00633     <a class="code" href="classBackEnd.html#a171bac1210be84c8811563ab35209fce">issueWidth</a> = params-&gt;issueWidth ? params-&gt;issueWidth : <a class="code" href="classBackEnd.html#a2474a5474cbff19523a51eb1de01cda4">width</a>;
<a name="l00634"></a>00634     <a class="code" href="classBackEnd.html#a20d3086e6bcdc826d99143ac7c9b23a4">wbWidth</a> = params-&gt;wbWidth ? params-&gt;wbWidth : <a class="code" href="classBackEnd.html#a2474a5474cbff19523a51eb1de01cda4">width</a>;
<a name="l00635"></a>00635     <a class="code" href="classBackEnd.html#a328db48cdab1c2a18d8432b647e2785b">commitWidth</a> = params-&gt;commitWidth ? params-&gt;commitWidth : <a class="code" href="classBackEnd.html#a2474a5474cbff19523a51eb1de01cda4">width</a>;
<a name="l00636"></a>00636 
<a name="l00637"></a>00637     <a class="code" href="classLSQ.html">LSQ</a>.init(params, params-&gt;LQEntries, params-&gt;SQEntries, 0);
<a name="l00638"></a>00638 
<a name="l00639"></a>00639     <a class="code" href="classBackEnd.html#a245e3bace7ab490110304d56450aba64">dispatchStatus</a> = <a class="code" href="classBackEnd.html#a67a0db04d321a74b7e7fcfd3f1a3f70ba2f5f2c4a8c4f4f0519d503dcdfbf55cb">Running</a>;
<a name="l00640"></a>00640 }
<a name="l00641"></a>00641 
<a name="l00642"></a>00642 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l00643"></a>00643 std::string
<a name="l00644"></a><a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">00644</a> <a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">BackEnd&lt;Impl&gt;::name</a>()<span class="keyword"> const</span>
<a name="l00645"></a>00645 <span class="keyword"></span>{
<a name="l00646"></a>00646     <span class="keywordflow">return</span> <a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;name() + <span class="stringliteral">&quot;.backend&quot;</span>;
<a name="l00647"></a>00647 }
<a name="l00648"></a>00648 
<a name="l00649"></a>00649 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l00650"></a>00650 <span class="keywordtype">void</span>
<a name="l00651"></a><a class="code" href="classBackEnd.html#a4dc637449366fcdfc4e764cdf12d9b11">00651</a> <a class="code" href="classBackEnd.html#a4dc637449366fcdfc4e764cdf12d9b11">BackEnd&lt;Impl&gt;::regStats</a>()
<a name="l00652"></a>00652 {
<a name="l00653"></a>00653     <span class="keyword">using namespace </span>Stats;
<a name="l00654"></a>00654     <a class="code" href="classBackEnd.html#a6480145c05acc370598e816e2e8cf879">rob_cap_events</a>
<a name="l00655"></a>00655         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00656"></a>00656         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.ROB:cap_events&quot;</span>)
<a name="l00657"></a>00657         .desc(<span class="stringliteral">&quot;number of cycles where ROB cap was active&quot;</span>)
<a name="l00658"></a>00658         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00659"></a>00659         ;
<a name="l00660"></a>00660 
<a name="l00661"></a>00661     <a class="code" href="classBackEnd.html#a0eb2b00bb6b4dfa3e98d7a3c5c425c50">rob_cap_inst_count</a>
<a name="l00662"></a>00662         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00663"></a>00663         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.ROB:cap_inst&quot;</span>)
<a name="l00664"></a>00664         .desc(<span class="stringliteral">&quot;number of instructions held up by ROB cap&quot;</span>)
<a name="l00665"></a>00665         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00666"></a>00666         ;
<a name="l00667"></a>00667 
<a name="l00668"></a>00668     <a class="code" href="classBackEnd.html#a94526617722efa24b56a33ac2e91a53d">iq_cap_events</a>
<a name="l00669"></a>00669         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00670"></a>00670         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() +<span class="stringliteral">&quot;.IQ:cap_events&quot;</span> )
<a name="l00671"></a>00671         .desc(<span class="stringliteral">&quot;number of cycles where IQ cap was active&quot;</span>)
<a name="l00672"></a>00672         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00673"></a>00673         ;
<a name="l00674"></a>00674 
<a name="l00675"></a>00675     <a class="code" href="classBackEnd.html#ab013e91b819cbfbaeb30f620eeb9af63">iq_cap_inst_count</a>
<a name="l00676"></a>00676         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00677"></a>00677         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.IQ:cap_inst&quot;</span>)
<a name="l00678"></a>00678         .desc(<span class="stringliteral">&quot;number of instructions held up by IQ cap&quot;</span>)
<a name="l00679"></a>00679         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00680"></a>00680         ;
<a name="l00681"></a>00681 
<a name="l00682"></a>00682 
<a name="l00683"></a>00683     <a class="code" href="classBackEnd.html#afdd7841e13784687ccb7c432189dca2f">exe_inst</a>
<a name="l00684"></a>00684         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00685"></a>00685         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.ISSUE:count&quot;</span>)
<a name="l00686"></a>00686         .desc(<span class="stringliteral">&quot;number of insts issued&quot;</span>)
<a name="l00687"></a>00687         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00688"></a>00688         ;
<a name="l00689"></a>00689 
<a name="l00690"></a>00690     <a class="code" href="classBackEnd.html#a7d82b30a9bc5daa8a508aad6120df60a">exe_swp</a>
<a name="l00691"></a>00691         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00692"></a>00692         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.ISSUE:swp&quot;</span>)
<a name="l00693"></a>00693         .desc(<span class="stringliteral">&quot;number of swp insts issued&quot;</span>)
<a name="l00694"></a>00694         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00695"></a>00695         ;
<a name="l00696"></a>00696 
<a name="l00697"></a>00697     <a class="code" href="classBackEnd.html#a16327b5e9165d27dc47c0bf44238cd74">exe_nop</a>
<a name="l00698"></a>00698         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00699"></a>00699         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.ISSUE:nop&quot;</span>)
<a name="l00700"></a>00700         .desc(<span class="stringliteral">&quot;number of nop insts issued&quot;</span>)
<a name="l00701"></a>00701         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00702"></a>00702         ;
<a name="l00703"></a>00703 
<a name="l00704"></a>00704     <a class="code" href="classBackEnd.html#a9c0474dab97b001394a40aed972f827a">exe_refs</a>
<a name="l00705"></a>00705         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00706"></a>00706         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.ISSUE:refs&quot;</span>)
<a name="l00707"></a>00707         .desc(<span class="stringliteral">&quot;number of memory reference insts issued&quot;</span>)
<a name="l00708"></a>00708         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00709"></a>00709         ;
<a name="l00710"></a>00710 
<a name="l00711"></a>00711     <a class="code" href="classBackEnd.html#a07f469c547d380cda882b5ca10fc8813">exe_loads</a>
<a name="l00712"></a>00712         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00713"></a>00713         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.ISSUE:loads&quot;</span>)
<a name="l00714"></a>00714         .desc(<span class="stringliteral">&quot;number of load insts issued&quot;</span>)
<a name="l00715"></a>00715         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00716"></a>00716         ;
<a name="l00717"></a>00717 
<a name="l00718"></a>00718     <a class="code" href="classBackEnd.html#a2bffb8fee3fa396523a2b86dba12a606">exe_branches</a>
<a name="l00719"></a>00719         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00720"></a>00720         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.ISSUE:branches&quot;</span>)
<a name="l00721"></a>00721         .desc(<span class="stringliteral">&quot;Number of branches issued&quot;</span>)
<a name="l00722"></a>00722         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00723"></a>00723         ;
<a name="l00724"></a>00724 
<a name="l00725"></a>00725     <a class="code" href="classBackEnd.html#ad98215aa24a0390cc2ba2234f272cb17">issued_ops</a>
<a name="l00726"></a>00726         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00727"></a>00727         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.ISSUE:op_count&quot;</span>)
<a name="l00728"></a>00728         .desc(<span class="stringliteral">&quot;number of insts issued&quot;</span>)
<a name="l00729"></a>00729         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00730"></a>00730         ;
<a name="l00731"></a>00731 
<a name="l00732"></a>00732 <span class="comment">/*</span>
<a name="l00733"></a>00733 <span class="comment">    for (int i=0; i&lt;Num_OpClasses; ++i) {</span>
<a name="l00734"></a>00734 <span class="comment">        stringstream subname;</span>
<a name="l00735"></a>00735 <span class="comment">        subname &lt;&lt; opClassStrings[i] &lt;&lt; &quot;_delay&quot;;</span>
<a name="l00736"></a>00736 <span class="comment">        issue_delay_dist.subname(i, subname.str());</span>
<a name="l00737"></a>00737 <span class="comment">    }</span>
<a name="l00738"></a>00738 <span class="comment">*/</span>
<a name="l00739"></a>00739     <span class="comment">//</span>
<a name="l00740"></a>00740     <span class="comment">//  Other stats</span>
<a name="l00741"></a>00741     <span class="comment">//</span>
<a name="l00742"></a>00742     <a class="code" href="classBackEnd.html#afcc98cdfa47d5d6cfd8818f91dde0eb5">lsq_forw_loads</a>
<a name="l00743"></a>00743         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00744"></a>00744         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.LSQ:forw_loads&quot;</span>)
<a name="l00745"></a>00745         .desc(<span class="stringliteral">&quot;number of loads forwarded via LSQ&quot;</span>)
<a name="l00746"></a>00746         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00747"></a>00747         ;
<a name="l00748"></a>00748 
<a name="l00749"></a>00749     <a class="code" href="classBackEnd.html#a032ab6d2dd14a8ccff4d407c7ff2a3d9">inv_addr_loads</a>
<a name="l00750"></a>00750         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00751"></a>00751         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.ISSUE:addr_loads&quot;</span>)
<a name="l00752"></a>00752         .desc(<span class="stringliteral">&quot;number of invalid-address loads&quot;</span>)
<a name="l00753"></a>00753         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00754"></a>00754         ;
<a name="l00755"></a>00755 
<a name="l00756"></a>00756     <a class="code" href="classBackEnd.html#a3814f636ed4028691262652be79c7091">inv_addr_swpfs</a>
<a name="l00757"></a>00757         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00758"></a>00758         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.ISSUE:addr_swpfs&quot;</span>)
<a name="l00759"></a>00759         .desc(<span class="stringliteral">&quot;number of invalid-address SW prefetches&quot;</span>)
<a name="l00760"></a>00760         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00761"></a>00761         ;
<a name="l00762"></a>00762 
<a name="l00763"></a>00763     <a class="code" href="classBackEnd.html#afdabbae5f4752ae636610a296ce040e6">lsq_blocked_loads</a>
<a name="l00764"></a>00764         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00765"></a>00765         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.LSQ:blocked_loads&quot;</span>)
<a name="l00766"></a>00766         .desc(<span class="stringliteral">&quot;number of ready loads not issued due to memory disambiguation&quot;</span>)
<a name="l00767"></a>00767         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00768"></a>00768         ;
<a name="l00769"></a>00769 
<a name="l00770"></a>00770     <a class="code" href="classBackEnd.html#abf96f4acba126fbcf919829a1125954c">lsqInversion</a>
<a name="l00771"></a>00771         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.ISSUE:lsq_invert&quot;</span>)
<a name="l00772"></a>00772         .desc(<span class="stringliteral">&quot;Number of times LSQ instruction issued early&quot;</span>)
<a name="l00773"></a>00773         ;
<a name="l00774"></a>00774 
<a name="l00775"></a>00775     <a class="code" href="classBackEnd.html#aef7967289461e66d515723da65e1f9f7">n_issued_dist</a>
<a name="l00776"></a>00776         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a171bac1210be84c8811563ab35209fce">issueWidth</a> + 1)
<a name="l00777"></a>00777         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.ISSUE:issued_per_cycle&quot;</span>)
<a name="l00778"></a>00778         .desc(<span class="stringliteral">&quot;Number of insts issued each cycle&quot;</span>)
<a name="l00779"></a>00779         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a> | <a class="code" href="namespaceStats.html#a148700bbb7b09b1ebb9d6b099155391a">pdf</a> | <a class="code" href="namespaceStats.html#a25cf6f3e458aaa5fdf87fc287ef0376e">dist</a>)
<a name="l00780"></a>00780         ;
<a name="l00781"></a>00781     <a class="code" href="classBackEnd.html#acbff26ed63b17948662f090985d17d32">issue_delay_dist</a>
<a name="l00782"></a>00782         .<a class="code" href="classStats_1_1VectorDistribution.html#ab5e2959f5d31e2ac926ba93fc0257cda">init</a>(<a class="code" href="op__class_8hh.html#a5e0e351c8afca390ef0a05a7dbb68b1b">Num_OpClasses</a>,0,99,2)
<a name="l00783"></a>00783         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.ISSUE:&quot;</span>)
<a name="l00784"></a>00784         .desc(<span class="stringliteral">&quot;cycles from operands ready to issue&quot;</span>)
<a name="l00785"></a>00785         .flags(<a class="code" href="namespaceStats.html#a148700bbb7b09b1ebb9d6b099155391a">pdf</a> | <a class="code" href="namespaceStats.html#af659db47be37cf4f7fee0a18e320843b">cdf</a>)
<a name="l00786"></a>00786         ;
<a name="l00787"></a>00787 
<a name="l00788"></a>00788     <a class="code" href="classBackEnd.html#a6737d38b89983fe331764c5c0edfbe12">queue_res_dist</a>
<a name="l00789"></a>00789         .<a class="code" href="classStats_1_1VectorDistribution.html#ab5e2959f5d31e2ac926ba93fc0257cda">init</a>(<a class="code" href="op__class_8hh.html#a5e0e351c8afca390ef0a05a7dbb68b1b">Num_OpClasses</a>, 0, 99, 2)
<a name="l00790"></a>00790         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.IQ:residence:&quot;</span>)
<a name="l00791"></a>00791         .desc(<span class="stringliteral">&quot;cycles from dispatch to issue&quot;</span>)
<a name="l00792"></a>00792         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a> | <a class="code" href="namespaceStats.html#a148700bbb7b09b1ebb9d6b099155391a">pdf</a> | <a class="code" href="namespaceStats.html#af659db47be37cf4f7fee0a18e320843b">cdf</a> )
<a name="l00793"></a>00793         ;
<a name="l00794"></a>00794     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="op__class_8hh.html#a5e0e351c8afca390ef0a05a7dbb68b1b">Num_OpClasses</a>; ++<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>) {
<a name="l00795"></a>00795         <a class="code" href="classBackEnd.html#a6737d38b89983fe331764c5c0edfbe12">queue_res_dist</a>.<a class="code" href="classStats_1_1DataWrapVec.html#a74726d23d92792c7c3cebdaf3bfd23f0">subname</a>(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>, opClassStrings[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>]);
<a name="l00796"></a>00796     }
<a name="l00797"></a>00797 
<a name="l00798"></a>00798     <a class="code" href="classBackEnd.html#a1b89675ac5b779ab9ead5ae5d3550189">writeback_count</a>
<a name="l00799"></a>00799         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00800"></a>00800         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.WB:count&quot;</span>)
<a name="l00801"></a>00801         .desc(<span class="stringliteral">&quot;cumulative count of insts written-back&quot;</span>)
<a name="l00802"></a>00802         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00803"></a>00803         ;
<a name="l00804"></a>00804 
<a name="l00805"></a>00805     <a class="code" href="classBackEnd.html#a47652a48ae1beac314831c224e026f24">producer_inst</a>
<a name="l00806"></a>00806         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00807"></a>00807         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.WB:producers&quot;</span>)
<a name="l00808"></a>00808         .desc(<span class="stringliteral">&quot;num instructions producing a value&quot;</span>)
<a name="l00809"></a>00809         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00810"></a>00810         ;
<a name="l00811"></a>00811 
<a name="l00812"></a>00812     <a class="code" href="classBackEnd.html#a5242b9d95c9537000e64dee2e5ac42cf">consumer_inst</a>
<a name="l00813"></a>00813         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00814"></a>00814         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.WB:consumers&quot;</span>)
<a name="l00815"></a>00815         .desc(<span class="stringliteral">&quot;num instructions consuming a value&quot;</span>)
<a name="l00816"></a>00816         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00817"></a>00817         ;
<a name="l00818"></a>00818 
<a name="l00819"></a>00819     <a class="code" href="classBackEnd.html#adf6ccbeee5b1388f198d050e098df8d5">wb_penalized</a>
<a name="l00820"></a>00820         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00821"></a>00821         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.WB:penalized&quot;</span>)
<a name="l00822"></a>00822         .desc(<span class="stringliteral">&quot;number of instrctions required to write to &apos;other&apos; IQ&quot;</span>)
<a name="l00823"></a>00823         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00824"></a>00824         ;
<a name="l00825"></a>00825 
<a name="l00826"></a>00826 
<a name="l00827"></a>00827     <a class="code" href="classBackEnd.html#a3f801d7a68c69a6b19ef993fcbad1453">wb_penalized_rate</a>
<a name="l00828"></a>00828         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.WB:penalized_rate&quot;</span>)
<a name="l00829"></a>00829         .desc (<span class="stringliteral">&quot;fraction of instructions written-back that wrote to &apos;other&apos; IQ&quot;</span>)
<a name="l00830"></a>00830         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00831"></a>00831         ;
<a name="l00832"></a>00832 
<a name="l00833"></a>00833     <a class="code" href="classBackEnd.html#a3f801d7a68c69a6b19ef993fcbad1453">wb_penalized_rate</a> = <a class="code" href="classBackEnd.html#adf6ccbeee5b1388f198d050e098df8d5">wb_penalized</a> / <a class="code" href="classBackEnd.html#a1b89675ac5b779ab9ead5ae5d3550189">writeback_count</a>;
<a name="l00834"></a>00834 
<a name="l00835"></a>00835     <a class="code" href="classBackEnd.html#ac715c98888746617df195a858e4a13a4">wb_fanout</a>
<a name="l00836"></a>00836         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.WB:fanout&quot;</span>)
<a name="l00837"></a>00837         .desc(<span class="stringliteral">&quot;average fanout of values written-back&quot;</span>)
<a name="l00838"></a>00838         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00839"></a>00839         ;
<a name="l00840"></a>00840 
<a name="l00841"></a>00841     <a class="code" href="classBackEnd.html#ac715c98888746617df195a858e4a13a4">wb_fanout</a> = <a class="code" href="classBackEnd.html#a47652a48ae1beac314831c224e026f24">producer_inst</a> / <a class="code" href="classBackEnd.html#a5242b9d95c9537000e64dee2e5ac42cf">consumer_inst</a>;
<a name="l00842"></a>00842 
<a name="l00843"></a>00843     <a class="code" href="classBackEnd.html#ae3e32acce8acd38434b6efd36ea6198e">wb_rate</a>
<a name="l00844"></a>00844         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.WB:rate&quot;</span>)
<a name="l00845"></a>00845         .desc(<span class="stringliteral">&quot;insts written-back per cycle&quot;</span>)
<a name="l00846"></a>00846         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00847"></a>00847         ;
<a name="l00848"></a>00848     <a class="code" href="classBackEnd.html#ae3e32acce8acd38434b6efd36ea6198e">wb_rate</a> = <a class="code" href="classBackEnd.html#a1b89675ac5b779ab9ead5ae5d3550189">writeback_count</a> / <a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numCycles;
<a name="l00849"></a>00849 
<a name="l00850"></a>00850     <a class="code" href="classBackEnd.html#a3f56571c523bf46f2fe976188ad1e50c">stat_com_inst</a>
<a name="l00851"></a>00851         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00852"></a>00852         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.COM:count&quot;</span>)
<a name="l00853"></a>00853         .desc(<span class="stringliteral">&quot;Number of instructions committed&quot;</span>)
<a name="l00854"></a>00854         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00855"></a>00855         ;
<a name="l00856"></a>00856 
<a name="l00857"></a>00857     <a class="code" href="classBackEnd.html#a2c3ec644af0af2970d0066b987427b46">stat_com_swp</a>
<a name="l00858"></a>00858         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00859"></a>00859         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.COM:swp_count&quot;</span>)
<a name="l00860"></a>00860         .desc(<span class="stringliteral">&quot;Number of s/w prefetches committed&quot;</span>)
<a name="l00861"></a>00861         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00862"></a>00862         ;
<a name="l00863"></a>00863 
<a name="l00864"></a>00864     <a class="code" href="classBackEnd.html#a541fdbe722e4ddbdcca7994625162235">stat_com_refs</a>
<a name="l00865"></a>00865         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00866"></a>00866         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() +  <span class="stringliteral">&quot;.COM:refs&quot;</span>)
<a name="l00867"></a>00867         .desc(<span class="stringliteral">&quot;Number of memory references committed&quot;</span>)
<a name="l00868"></a>00868         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00869"></a>00869         ;
<a name="l00870"></a>00870 
<a name="l00871"></a>00871     <a class="code" href="classBackEnd.html#a998922e22a0a08c55cf2f5ed99ad79cc">stat_com_loads</a>
<a name="l00872"></a>00872         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00873"></a>00873         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() +  <span class="stringliteral">&quot;.COM:loads&quot;</span>)
<a name="l00874"></a>00874         .desc(<span class="stringliteral">&quot;Number of loads committed&quot;</span>)
<a name="l00875"></a>00875         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00876"></a>00876         ;
<a name="l00877"></a>00877 
<a name="l00878"></a>00878     <a class="code" href="classBackEnd.html#a2e29921a3b4c4ffb52ceef970898e906">stat_com_membars</a>
<a name="l00879"></a>00879         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00880"></a>00880         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() +  <span class="stringliteral">&quot;.COM:membars&quot;</span>)
<a name="l00881"></a>00881         .desc(<span class="stringliteral">&quot;Number of memory barriers committed&quot;</span>)
<a name="l00882"></a>00882         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00883"></a>00883         ;
<a name="l00884"></a>00884 
<a name="l00885"></a>00885     <a class="code" href="classBackEnd.html#a3368cb0b59cef9b4542f17661835022f">stat_com_branches</a>
<a name="l00886"></a>00886         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00887"></a>00887         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.COM:branches&quot;</span>)
<a name="l00888"></a>00888         .desc(<span class="stringliteral">&quot;Number of branches committed&quot;</span>)
<a name="l00889"></a>00889         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00890"></a>00890         ;
<a name="l00891"></a>00891     <a class="code" href="classBackEnd.html#adef6c140c8c63175c52b3bc6501f9d1c">n_committed_dist</a>
<a name="l00892"></a>00892         .<a class="code" href="classStats_1_1Distribution.html#a330a131f9f1614fae623ba309b61a590">init</a>(0,<a class="code" href="classBackEnd.html#a328db48cdab1c2a18d8432b647e2785b">commitWidth</a>,1)
<a name="l00893"></a>00893         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.COM:committed_per_cycle&quot;</span>)
<a name="l00894"></a>00894         .desc(<span class="stringliteral">&quot;Number of insts commited each cycle&quot;</span>)
<a name="l00895"></a>00895         .flags(<a class="code" href="namespaceStats.html#a148700bbb7b09b1ebb9d6b099155391a">pdf</a>)
<a name="l00896"></a>00896         ;
<a name="l00897"></a>00897 
<a name="l00898"></a>00898     <span class="comment">//</span>
<a name="l00899"></a>00899     <span class="comment">//  Commit-Eligible instructions...</span>
<a name="l00900"></a>00900     <span class="comment">//</span>
<a name="l00901"></a>00901     <span class="comment">//  -&gt; The number of instructions eligible to commit in those</span>
<a name="l00902"></a>00902     <span class="comment">//  cycles where we reached our commit BW limit (less the number</span>
<a name="l00903"></a>00903     <span class="comment">//  actually committed)</span>
<a name="l00904"></a>00904     <span class="comment">//</span>
<a name="l00905"></a>00905     <span class="comment">//  -&gt; The average value is computed over ALL CYCLES... not just</span>
<a name="l00906"></a>00906     <span class="comment">//  the BW limited cycles</span>
<a name="l00907"></a>00907     <span class="comment">//</span>
<a name="l00908"></a>00908     <span class="comment">//  -&gt; The standard deviation is computed only over cycles where</span>
<a name="l00909"></a>00909     <span class="comment">//  we reached the BW limit</span>
<a name="l00910"></a>00910     <span class="comment">//</span>
<a name="l00911"></a>00911     <a class="code" href="classBackEnd.html#a3dd8a34217d79ba678222441cf275502">commit_eligible</a>
<a name="l00912"></a>00912         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00913"></a>00913         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.COM:bw_limited&quot;</span>)
<a name="l00914"></a>00914         .desc(<span class="stringliteral">&quot;number of insts not committed due to BW limits&quot;</span>)
<a name="l00915"></a>00915         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00916"></a>00916         ;
<a name="l00917"></a>00917 
<a name="l00918"></a>00918     <a class="code" href="classBackEnd.html#accdcc276eadba243157fb68d08dd5cda">commit_eligible_samples</a>
<a name="l00919"></a>00919         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.COM:bw_lim_events&quot;</span>)
<a name="l00920"></a>00920         .desc(<span class="stringliteral">&quot;number cycles where commit BW limit reached&quot;</span>)
<a name="l00921"></a>00921         ;
<a name="l00922"></a>00922 
<a name="l00923"></a>00923     <a class="code" href="classBackEnd.html#ac41e5b42959e2f75c51c9fec633e2491">ROB_fcount</a>
<a name="l00924"></a>00924         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.ROB:full_count&quot;</span>)
<a name="l00925"></a>00925         .desc(<span class="stringliteral">&quot;number of cycles where ROB was full&quot;</span>)
<a name="l00926"></a>00926         ;
<a name="l00927"></a>00927 
<a name="l00928"></a>00928     <a class="code" href="classBackEnd.html#a4ccaf3f968ca2c525ff6934f5dc202a4">ROB_count</a>
<a name="l00929"></a>00929         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads)
<a name="l00930"></a>00930         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.ROB:occupancy&quot;</span>)
<a name="l00931"></a>00931         .desc(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.ROB occupancy (cumulative)&quot;</span>)
<a name="l00932"></a>00932         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00933"></a>00933         ;
<a name="l00934"></a>00934 
<a name="l00935"></a>00935     <a class="code" href="classBackEnd.html#a4e4aad30eb153b8d15da02cf33e57e9c">ROB_full_rate</a>
<a name="l00936"></a>00936         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.ROB:full_rate&quot;</span>)
<a name="l00937"></a>00937         .desc(<span class="stringliteral">&quot;ROB full per cycle&quot;</span>)
<a name="l00938"></a>00938         ;
<a name="l00939"></a>00939     <a class="code" href="classBackEnd.html#a4e4aad30eb153b8d15da02cf33e57e9c">ROB_full_rate</a> = <a class="code" href="classBackEnd.html#ac41e5b42959e2f75c51c9fec633e2491">ROB_fcount</a> / <a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numCycles;
<a name="l00940"></a>00940 
<a name="l00941"></a>00941     <a class="code" href="classBackEnd.html#ac6bfab47ea686c39b71e475aec8b07ca">ROB_occ_rate</a>
<a name="l00942"></a>00942         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.ROB:occ_rate&quot;</span>)
<a name="l00943"></a>00943         .desc(<span class="stringliteral">&quot;ROB occupancy rate&quot;</span>)
<a name="l00944"></a>00944         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a>)
<a name="l00945"></a>00945         ;
<a name="l00946"></a>00946     <a class="code" href="classBackEnd.html#ac6bfab47ea686c39b71e475aec8b07ca">ROB_occ_rate</a> = <a class="code" href="classBackEnd.html#a4ccaf3f968ca2c525ff6934f5dc202a4">ROB_count</a> / <a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numCycles;
<a name="l00947"></a>00947 
<a name="l00948"></a>00948     <a class="code" href="classBackEnd.html#ace261e0da7b5ca53fcfc3a27782418c4">ROB_occ_dist</a>
<a name="l00949"></a>00949         .<a class="code" href="classStats_1_1VectorDistribution.html#ab5e2959f5d31e2ac926ba93fc0257cda">init</a>(<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numThreads, 0, <a class="code" href="classBackEnd.html#ae40678133a160367f2207f07975ca0f3">numROBEntries</a>, 2)
<a name="l00950"></a>00950         .name(<a class="code" href="classBackEnd.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a>() + <span class="stringliteral">&quot;.ROB:occ_dist&quot;</span>)
<a name="l00951"></a>00951         .desc(<span class="stringliteral">&quot;ROB Occupancy per cycle&quot;</span>)
<a name="l00952"></a>00952         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a> | <a class="code" href="namespaceStats.html#af659db47be37cf4f7fee0a18e320843b">cdf</a>)
<a name="l00953"></a>00953         ;
<a name="l00954"></a>00954 
<a name="l00955"></a>00955     <a class="code" href="classBackEnd.html#a9f8da5ee0decabae62161ec4c1738952">IQ</a>.<a class="code" href="classBackEnd_1_1InstQueue.html#a4dc637449366fcdfc4e764cdf12d9b11">regStats</a>();
<a name="l00956"></a>00956 }
<a name="l00957"></a>00957 
<a name="l00958"></a>00958 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l00959"></a>00959 <span class="keywordtype">void</span>
<a name="l00960"></a><a class="code" href="classBackEnd.html#aeabdb9f0aae07df67c3029f8fddb2693">00960</a> <a class="code" href="classBackEnd.html#aeabdb9f0aae07df67c3029f8fddb2693">BackEnd&lt;Impl&gt;::setCommBuffer</a>(<a class="code" href="classTimeBuffer.html">TimeBuffer&lt;CommStruct&gt;</a> *_comm)
<a name="l00961"></a>00961 {
<a name="l00962"></a>00962     <a class="code" href="classBackEnd.html#a282f2307a986f183b83e887756561687">comm</a> = _comm;
<a name="l00963"></a>00963     <a class="code" href="classBackEnd.html#acf56450a952ce19a7cc68c86f0334c0c">toIEW</a> = <a class="code" href="classBackEnd.html#a282f2307a986f183b83e887756561687">comm</a>-&gt;<a class="code" href="classTimeBuffer.html#ab1c801fd9d022ce4339cc62f4a0625dd">getWire</a>(0);
<a name="l00964"></a>00964     <a class="code" href="classBackEnd.html#a77bf6c956edddf1d551d5371ff72162e">fromCommit</a> = <a class="code" href="classBackEnd.html#a282f2307a986f183b83e887756561687">comm</a>-&gt;<a class="code" href="classTimeBuffer.html#ab1c801fd9d022ce4339cc62f4a0625dd">getWire</a>(-1);
<a name="l00965"></a>00965 }
<a name="l00966"></a>00966 
<a name="l00967"></a>00967 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l00968"></a>00968 <span class="keywordtype">void</span>
<a name="l00969"></a><a class="code" href="classBackEnd.html#a873dd91783f9efb4a590aded1f70d6b0">00969</a> <a class="code" href="classBackEnd.html#a873dd91783f9efb4a590aded1f70d6b0">BackEnd&lt;Impl&gt;::tick</a>()
<a name="l00970"></a>00970 {
<a name="l00971"></a>00971     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Ticking back end\n&quot;</span>);
<a name="l00972"></a>00972 
<a name="l00973"></a>00973     <a class="code" href="classBackEnd.html#a4ccaf3f968ca2c525ff6934f5dc202a4">ROB_count</a>[0]+= <a class="code" href="classBackEnd.html#a358c879c68910efe5300c4515df35b6c">numInsts</a>;
<a name="l00974"></a>00974 
<a name="l00975"></a>00975     <a class="code" href="classBackEnd.html#ad2c7b2687f864f2b7359eb393276996f">wbCycle</a> = 0;
<a name="l00976"></a>00976 
<a name="l00977"></a>00977     <span class="keywordflow">if</span> (xcSquash) {
<a name="l00978"></a>00978         squashFromXC();
<a name="l00979"></a>00979     }
<a name="l00980"></a>00980 
<a name="l00981"></a>00981     <span class="comment">// Read in any done instruction information and update the IQ or LSQ.</span>
<a name="l00982"></a>00982     <a class="code" href="classBackEnd.html#a1107d388cfcea92a9043608346ce98f0">updateStructures</a>();
<a name="l00983"></a>00983 
<a name="l00984"></a>00984     <span class="keywordflow">if</span> (<a class="code" href="classBackEnd.html#a245e3bace7ab490110304d56450aba64">dispatchStatus</a> != <a class="code" href="classBackEnd.html#a67a0db04d321a74b7e7fcfd3f1a3f70ba9463ee9b8700258a1019b4b9d2d77a30">Blocked</a>) {
<a name="l00985"></a>00985         <a class="code" href="classBackEnd.html#ae446eaddd47d5f227ed00af24aaefe68">d2i</a>.<a class="code" href="classTimeBuffer.html#a8903a4e9f3d5fb42d0faa9d53e21d85c">advance</a>();
<a name="l00986"></a>00986         <a class="code" href="classBackEnd.html#ac3f94deccc87588d728716efc4dd7ce8">dispatchInsts</a>();
<a name="l00987"></a>00987     } <span class="keywordflow">else</span> {
<a name="l00988"></a>00988         <a class="code" href="classBackEnd.html#aee5c9997a61eb30564062dcdbda8c246">checkDispatchStatus</a>();
<a name="l00989"></a>00989     }
<a name="l00990"></a>00990 
<a name="l00991"></a>00991     <a class="code" href="classBackEnd.html#a055203b013ada25d70a2a2c8b2364455">i2e</a>.<a class="code" href="classTimeBuffer.html#a8903a4e9f3d5fb42d0faa9d53e21d85c">advance</a>();
<a name="l00992"></a>00992     <a class="code" href="classBackEnd.html#a3694e72427d3a616808797f9343d1fc4">scheduleReadyInsts</a>();
<a name="l00993"></a>00993 
<a name="l00994"></a>00994     <a class="code" href="classBackEnd.html#a114248f83077c8e99f4f4aa0236aafeb">e2c</a>.<a class="code" href="classTimeBuffer.html#a8903a4e9f3d5fb42d0faa9d53e21d85c">advance</a>();
<a name="l00995"></a>00995     <a class="code" href="classBackEnd.html#a2d00e30d66a56e4667e28df302c98ac0">executeInsts</a>();
<a name="l00996"></a>00996 
<a name="l00997"></a>00997     <a class="code" href="classBackEnd.html#a2647e2052851a9122ac4ce89b84d77b5">numInstsToWB</a>.<a class="code" href="classTimeBuffer.html#a8903a4e9f3d5fb42d0faa9d53e21d85c">advance</a>();
<a name="l00998"></a>00998     <a class="code" href="classBackEnd.html#a5e9a203f943b3a8a243ddc6d2a0a240d">writebackInsts</a>();
<a name="l00999"></a>00999 
<a name="l01000"></a>01000     <a class="code" href="classBackEnd.html#ac8b85fbfdf330d000c094a9d1886d264">commitInsts</a>();
<a name="l01001"></a>01001 
<a name="l01002"></a>01002     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;IQ entries in use: %i, ROB entries in use: %i, LSQ loads: %i, LSQ stores: %i\n&quot;</span>,
<a name="l01003"></a>01003             <a class="code" href="classBackEnd.html#a9f8da5ee0decabae62161ec4c1738952">IQ</a>.<a class="code" href="classBackEnd_1_1InstQueue.html#a358c879c68910efe5300c4515df35b6c">numInsts</a>, <a class="code" href="classBackEnd.html#a358c879c68910efe5300c4515df35b6c">numInsts</a>, <a class="code" href="classLSQ.html">LSQ</a>.numLoads(), <a class="code" href="classLSQ.html">LSQ</a>.numStores());
<a name="l01004"></a>01004 
<a name="l01005"></a>01005     assert(<a class="code" href="classBackEnd.html#a358c879c68910efe5300c4515df35b6c">numInsts</a> == <a class="code" href="classBackEnd.html#ae10a391d02ce1ef67ee13cd82b7d46e5">instList</a>.size());
<a name="l01006"></a>01006 }
<a name="l01007"></a>01007 
<a name="l01008"></a>01008 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l01009"></a>01009 <span class="keywordtype">void</span>
<a name="l01010"></a><a class="code" href="classBackEnd.html#a1107d388cfcea92a9043608346ce98f0">01010</a> <a class="code" href="classBackEnd.html#a1107d388cfcea92a9043608346ce98f0">BackEnd&lt;Impl&gt;::updateStructures</a>()
<a name="l01011"></a>01011 {
<a name="l01012"></a>01012     <span class="keywordflow">if</span> (<a class="code" href="classBackEnd.html#a77bf6c956edddf1d551d5371ff72162e">fromCommit</a>-&gt;doneSeqNum) {
<a name="l01013"></a>01013         <a class="code" href="classBackEnd.html#a9f8da5ee0decabae62161ec4c1738952">IQ</a>.<a class="code" href="classBackEnd_1_1InstQueue.html#aa72e9e4af0c8be21a633bea0bf0b5fe1">commit</a>(<a class="code" href="classBackEnd.html#a77bf6c956edddf1d551d5371ff72162e">fromCommit</a>-&gt;doneSeqNum);
<a name="l01014"></a>01014         <a class="code" href="classLSQ.html">LSQ</a>.commitLoads(<a class="code" href="classBackEnd.html#a77bf6c956edddf1d551d5371ff72162e">fromCommit</a>-&gt;doneSeqNum);
<a name="l01015"></a>01015         <a class="code" href="classLSQ.html">LSQ</a>.commitStores(<a class="code" href="classBackEnd.html#a77bf6c956edddf1d551d5371ff72162e">fromCommit</a>-&gt;doneSeqNum);
<a name="l01016"></a>01016     }
<a name="l01017"></a>01017 
<a name="l01018"></a>01018     <span class="keywordflow">if</span> (<a class="code" href="classBackEnd.html#a77bf6c956edddf1d551d5371ff72162e">fromCommit</a>-&gt;nonSpecSeqNum) {
<a name="l01019"></a>01019         <span class="keywordflow">if</span> (<a class="code" href="classBackEnd.html#a77bf6c956edddf1d551d5371ff72162e">fromCommit</a>-&gt;uncached) {
<a name="l01020"></a>01020             <a class="code" href="classLSQ.html">LSQ</a>.executeLoad(<a class="code" href="classBackEnd.html#a77bf6c956edddf1d551d5371ff72162e">fromCommit</a>-&gt;lqIdx);
<a name="l01021"></a>01021         } <span class="keywordflow">else</span> {
<a name="l01022"></a>01022             <a class="code" href="classBackEnd.html#a9f8da5ee0decabae62161ec4c1738952">IQ</a>.<a class="code" href="classBackEnd_1_1InstQueue.html#acc2640b7a23376539d13b74725fcf7a9">scheduleNonSpec</a>(
<a name="l01023"></a>01023                 <a class="code" href="classBackEnd.html#a77bf6c956edddf1d551d5371ff72162e">fromCommit</a>-&gt;nonSpecSeqNum);
<a name="l01024"></a>01024         }
<a name="l01025"></a>01025     }
<a name="l01026"></a>01026 }
<a name="l01027"></a>01027 
<a name="l01028"></a>01028 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l01029"></a>01029 <span class="keywordtype">void</span>
<a name="l01030"></a><a class="code" href="classBackEnd.html#a2c7b6d036b77d997f9c6f718ddf0be7d">01030</a> <a class="code" href="classBackEnd.html#a2c7b6d036b77d997f9c6f718ddf0be7d">BackEnd&lt;Impl&gt;::addToIQ</a>(<a class="code" href="namespaceThePipeline.html#a992959fefcd659c6ba422aa4de14677c">DynInstPtr</a> &amp;inst)
<a name="l01031"></a>01031 {
<a name="l01032"></a>01032     <span class="comment">// Do anything IQ specific here?</span>
<a name="l01033"></a>01033     <a class="code" href="classBackEnd.html#a9f8da5ee0decabae62161ec4c1738952">IQ</a>.<a class="code" href="classBackEnd_1_1InstQueue.html#a773e88db1aa010c3755e603493bf40ec">insert</a>(inst);
<a name="l01034"></a>01034 }
<a name="l01035"></a>01035 
<a name="l01036"></a>01036 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l01037"></a>01037 <span class="keywordtype">void</span>
<a name="l01038"></a><a class="code" href="classBackEnd.html#a1b9c2184abc4f4e7a00285130f39bf26">01038</a> <a class="code" href="classBackEnd.html#a1b9c2184abc4f4e7a00285130f39bf26">BackEnd&lt;Impl&gt;::addToLSQ</a>(<a class="code" href="namespaceThePipeline.html#a992959fefcd659c6ba422aa4de14677c">DynInstPtr</a> &amp;inst)
<a name="l01039"></a>01039 {
<a name="l01040"></a>01040     <span class="comment">// Do anything LSQ specific here?</span>
<a name="l01041"></a>01041     <a class="code" href="classLSQ.html">LSQ</a>.insert(inst);
<a name="l01042"></a>01042 }
<a name="l01043"></a>01043 
<a name="l01044"></a>01044 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l01045"></a>01045 <span class="keywordtype">void</span>
<a name="l01046"></a><a class="code" href="classBackEnd.html#ac3f94deccc87588d728716efc4dd7ce8">01046</a> <a class="code" href="classBackEnd.html#ac3f94deccc87588d728716efc4dd7ce8">BackEnd&lt;Impl&gt;::dispatchInsts</a>()
<a name="l01047"></a>01047 {
<a name="l01048"></a>01048     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Trying to dispatch instructions.\n&quot;</span>);
<a name="l01049"></a>01049 
<a name="l01050"></a>01050     <span class="comment">// Pull instructions out of the front end.</span>
<a name="l01051"></a>01051     <span class="keywordtype">int</span> disp_width = <a class="code" href="classBackEnd.html#aa304d4c426ea2bba52be0a3c0b9811e3">dispatchWidth</a> ? <a class="code" href="classBackEnd.html#aa304d4c426ea2bba52be0a3c0b9811e3">dispatchWidth</a> : <a class="code" href="classBackEnd.html#a2474a5474cbff19523a51eb1de01cda4">width</a>;
<a name="l01052"></a>01052 
<a name="l01053"></a>01053     <span class="comment">// Could model dispatching time, but in general 1 cycle is probably</span>
<a name="l01054"></a>01054     <span class="comment">// good enough.</span>
<a name="l01055"></a>01055 
<a name="l01056"></a>01056     <span class="keywordflow">if</span> (<a class="code" href="classBackEnd.html#a32343e1e9e56c17bb868f861f9b8927d">dispatchSize</a> &lt; <a class="code" href="classBackEnd.html#a10a1f0f6ff8acbb26f4c308a502c6141">numDispatchEntries</a>) {
<a name="l01057"></a>01057         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; disp_width; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l01058"></a>01058             <span class="comment">// Get instructions</span>
<a name="l01059"></a>01059             <a class="code" href="classBackEnd.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> inst = <a class="code" href="classBackEnd.html#a67c762418bb2017cb2dce5a0c94f0788">frontEnd</a>-&gt;<a class="code" href="classFrontEnd.html#a2032af0310bc2b8b708cac0af3811074">getInst</a>();
<a name="l01060"></a>01060 
<a name="l01061"></a>01061             <span class="keywordflow">if</span> (!inst) {
<a name="l01062"></a>01062                 <span class="comment">// No more instructions to get</span>
<a name="l01063"></a>01063                 <span class="keywordflow">break</span>;
<a name="l01064"></a>01064             }
<a name="l01065"></a>01065 
<a name="l01066"></a>01066             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Processing instruction [sn:%lli] PC:%#x\n&quot;</span>,
<a name="l01067"></a>01067                     inst-&gt;seqNum, inst-&gt;readPC());
<a name="l01068"></a>01068 
<a name="l01069"></a>01069             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; inst-&gt;numDestRegs(); ++<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>)
<a name="l01070"></a>01070                 <a class="code" href="classBackEnd.html#af8d3f859e7c0dd9408ba99de6f415616">renameTable</a>[inst-&gt;destRegIdx(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>)] = inst;
<a name="l01071"></a>01071 
<a name="l01072"></a>01072             <span class="comment">// Add to queue to be dispatched.</span>
<a name="l01073"></a>01073             <a class="code" href="classBackEnd.html#a1e13c801cafc8d7e052b2f999c89ad85">dispatch</a>.push_back(inst);
<a name="l01074"></a>01074 
<a name="l01075"></a>01075             <a class="code" href="classBackEnd.html#ae446eaddd47d5f227ed00af24aaefe68">d2i</a>[0].<a class="code" href="classTimeBuffer.html#a245260f6f74972558f61b85227df5aae">size</a>++;
<a name="l01076"></a>01076             ++<a class="code" href="classBackEnd.html#a32343e1e9e56c17bb868f861f9b8927d">dispatchSize</a>;
<a name="l01077"></a>01077         }
<a name="l01078"></a>01078     }
<a name="l01079"></a>01079 
<a name="l01080"></a>01080     assert(<a class="code" href="classBackEnd.html#a1e13c801cafc8d7e052b2f999c89ad85">dispatch</a>.size() &lt; 64);
<a name="l01081"></a>01081 
<a name="l01082"></a>01082     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classBackEnd.html#ace1cd34be1eca99cb8c1d3a30e32fcbe">instsToDispatch</a>-&gt;<a class="code" href="classTimeBuffer.html#a245260f6f74972558f61b85227df5aae">size</a>; ++<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>) {
<a name="l01083"></a>01083         assert(!<a class="code" href="classBackEnd.html#a1e13c801cafc8d7e052b2f999c89ad85">dispatch</a>.empty());
<a name="l01084"></a>01084         <span class="comment">// Get instruction from front of time buffer</span>
<a name="l01085"></a>01085         <a class="code" href="classBackEnd.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> inst = <a class="code" href="classBackEnd.html#a1e13c801cafc8d7e052b2f999c89ad85">dispatch</a>.front();
<a name="l01086"></a>01086         <a class="code" href="classBackEnd.html#a1e13c801cafc8d7e052b2f999c89ad85">dispatch</a>.pop_front();
<a name="l01087"></a>01087         --<a class="code" href="classBackEnd.html#a32343e1e9e56c17bb868f861f9b8927d">dispatchSize</a>;
<a name="l01088"></a>01088 
<a name="l01089"></a>01089         <span class="keywordflow">if</span> (inst-&gt;isSquashed())
<a name="l01090"></a>01090             <span class="keywordflow">continue</span>;
<a name="l01091"></a>01091 
<a name="l01092"></a>01092         ++<a class="code" href="classBackEnd.html#a358c879c68910efe5300c4515df35b6c">numInsts</a>;
<a name="l01093"></a>01093         <a class="code" href="classBackEnd.html#ae10a391d02ce1ef67ee13cd82b7d46e5">instList</a>.push_back(inst);
<a name="l01094"></a>01094 
<a name="l01095"></a>01095         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Dispatching instruction [sn:%lli] PC:%#x\n&quot;</span>,
<a name="l01096"></a>01096                 inst-&gt;seqNum, inst-&gt;readPC());
<a name="l01097"></a>01097 
<a name="l01098"></a>01098         <a class="code" href="classBackEnd.html#a2c7b6d036b77d997f9c6f718ddf0be7d">addToIQ</a>(inst);
<a name="l01099"></a>01099 
<a name="l01100"></a>01100         <span class="keywordflow">if</span> (inst-&gt;isMemRef()) {
<a name="l01101"></a>01101             <a class="code" href="classBackEnd.html#a1b9c2184abc4f4e7a00285130f39bf26">addToLSQ</a>(inst);
<a name="l01102"></a>01102         }
<a name="l01103"></a>01103 
<a name="l01104"></a>01104         <span class="keywordflow">if</span> (inst-&gt;isNonSpeculative()) {
<a name="l01105"></a>01105             inst-&gt;setCanCommit();
<a name="l01106"></a>01106         }
<a name="l01107"></a>01107 
<a name="l01108"></a>01108         <span class="comment">// Check if IQ or LSQ is full.  If so we&apos;ll need to break and stop</span>
<a name="l01109"></a>01109         <span class="comment">// removing instructions.  Also update the number of insts to remove</span>
<a name="l01110"></a>01110         <span class="comment">// from the queue.</span>
<a name="l01111"></a>01111         <span class="keywordflow">if</span> (<a class="code" href="classBackEnd.html#a319e9530b28153883e886be5b9c573eb">exactFullStall</a>) {
<a name="l01112"></a>01112             <span class="keywordtype">bool</span> stall = <span class="keyword">false</span>;
<a name="l01113"></a>01113             <span class="keywordflow">if</span> (<a class="code" href="classBackEnd.html#a9f8da5ee0decabae62161ec4c1738952">IQ</a>.<a class="code" href="classBackEnd_1_1InstQueue.html#a3e70330939fdfc4dbc2f60c1a660584d">isFull</a>()) {
<a name="l01114"></a>01114                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;IQ is full!\n&quot;</span>);
<a name="l01115"></a>01115                 stall = <span class="keyword">true</span>;
<a name="l01116"></a>01116             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classLSQ.html">LSQ</a>.isFull()) {
<a name="l01117"></a>01117                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;LSQ is full!\n&quot;</span>);
<a name="l01118"></a>01118                 stall = <span class="keyword">true</span>;
<a name="l01119"></a>01119             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classBackEnd.html#a3e70330939fdfc4dbc2f60c1a660584d">isFull</a>()) {
<a name="l01120"></a>01120                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;ROB is full!\n&quot;</span>);
<a name="l01121"></a>01121                 stall = <span class="keyword">true</span>;
<a name="l01122"></a>01122                 <a class="code" href="classBackEnd.html#ac41e5b42959e2f75c51c9fec633e2491">ROB_fcount</a>++;
<a name="l01123"></a>01123             }
<a name="l01124"></a>01124             <span class="keywordflow">if</span> (stall) {
<a name="l01125"></a>01125                 <a class="code" href="classBackEnd.html#ace1cd34be1eca99cb8c1d3a30e32fcbe">instsToDispatch</a>-&gt;<a class="code" href="classTimeBuffer.html#a245260f6f74972558f61b85227df5aae">size</a>-= <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>+1;
<a name="l01126"></a>01126                 <a class="code" href="classBackEnd.html#a3a69629e2b050560eb983bdedffc30ba">dispatchStall</a>();
<a name="l01127"></a>01127                 <span class="keywordflow">return</span>;
<a name="l01128"></a>01128             }
<a name="l01129"></a>01129         }
<a name="l01130"></a>01130     }
<a name="l01131"></a>01131 
<a name="l01132"></a>01132     <span class="comment">// Check if IQ or LSQ is full.  If so we&apos;ll need to break and stop</span>
<a name="l01133"></a>01133     <span class="comment">// removing instructions.  Also update the number of insts to remove</span>
<a name="l01134"></a>01134     <span class="comment">// from the queue.  Check here if we don&apos;t care about exact stall</span>
<a name="l01135"></a>01135     <span class="comment">// conditions.</span>
<a name="l01136"></a>01136 
<a name="l01137"></a>01137     <span class="keywordtype">bool</span> stall = <span class="keyword">false</span>;
<a name="l01138"></a>01138     <span class="keywordflow">if</span> (<a class="code" href="classBackEnd.html#a9f8da5ee0decabae62161ec4c1738952">IQ</a>.<a class="code" href="classBackEnd_1_1InstQueue.html#a3e70330939fdfc4dbc2f60c1a660584d">isFull</a>()) {
<a name="l01139"></a>01139         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;IQ is full!\n&quot;</span>);
<a name="l01140"></a>01140         stall = <span class="keyword">true</span>;
<a name="l01141"></a>01141     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classLSQ.html">LSQ</a>.isFull()) {
<a name="l01142"></a>01142         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;LSQ is full!\n&quot;</span>);
<a name="l01143"></a>01143         stall = <span class="keyword">true</span>;
<a name="l01144"></a>01144     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classBackEnd.html#a3e70330939fdfc4dbc2f60c1a660584d">isFull</a>()) {
<a name="l01145"></a>01145         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;ROB is full!\n&quot;</span>);
<a name="l01146"></a>01146         stall = <span class="keyword">true</span>;
<a name="l01147"></a>01147         <a class="code" href="classBackEnd.html#ac41e5b42959e2f75c51c9fec633e2491">ROB_fcount</a>++;
<a name="l01148"></a>01148     }
<a name="l01149"></a>01149     <span class="keywordflow">if</span> (stall) {
<a name="l01150"></a>01150         <a class="code" href="classBackEnd.html#ae446eaddd47d5f227ed00af24aaefe68">d2i</a>.<a class="code" href="classTimeBuffer.html#a8903a4e9f3d5fb42d0faa9d53e21d85c">advance</a>();
<a name="l01151"></a>01151         <a class="code" href="classBackEnd.html#a3a69629e2b050560eb983bdedffc30ba">dispatchStall</a>();
<a name="l01152"></a>01152         <span class="keywordflow">return</span>;
<a name="l01153"></a>01153     }
<a name="l01154"></a>01154 }
<a name="l01155"></a>01155 
<a name="l01156"></a>01156 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l01157"></a>01157 <span class="keywordtype">void</span>
<a name="l01158"></a><a class="code" href="classBackEnd.html#a3a69629e2b050560eb983bdedffc30ba">01158</a> <a class="code" href="classBackEnd.html#a3a69629e2b050560eb983bdedffc30ba">BackEnd&lt;Impl&gt;::dispatchStall</a>()
<a name="l01159"></a>01159 {
<a name="l01160"></a>01160     <a class="code" href="classBackEnd.html#a245e3bace7ab490110304d56450aba64">dispatchStatus</a> = <a class="code" href="classBackEnd.html#a67a0db04d321a74b7e7fcfd3f1a3f70ba9463ee9b8700258a1019b4b9d2d77a30">Blocked</a>;
<a name="l01161"></a>01161     <span class="keywordflow">if</span> (!<a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;decoupledFrontEnd) {
<a name="l01162"></a>01162         <span class="comment">// Tell front end to stall here through a timebuffer, or just tell</span>
<a name="l01163"></a>01163         <span class="comment">// it directly.</span>
<a name="l01164"></a>01164     }
<a name="l01165"></a>01165 }
<a name="l01166"></a>01166 
<a name="l01167"></a>01167 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l01168"></a>01168 <span class="keywordtype">void</span>
<a name="l01169"></a><a class="code" href="classBackEnd.html#aee5c9997a61eb30564062dcdbda8c246">01169</a> <a class="code" href="classBackEnd.html#aee5c9997a61eb30564062dcdbda8c246">BackEnd&lt;Impl&gt;::checkDispatchStatus</a>()
<a name="l01170"></a>01170 {
<a name="l01171"></a>01171     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Checking dispatch status\n&quot;</span>);
<a name="l01172"></a>01172     assert(<a class="code" href="classBackEnd.html#a245e3bace7ab490110304d56450aba64">dispatchStatus</a> == <a class="code" href="classBackEnd.html#a67a0db04d321a74b7e7fcfd3f1a3f70ba9463ee9b8700258a1019b4b9d2d77a30">Blocked</a>);
<a name="l01173"></a>01173     <span class="keywordflow">if</span> (!<a class="code" href="classBackEnd.html#a9f8da5ee0decabae62161ec4c1738952">IQ</a>.<a class="code" href="classBackEnd_1_1InstQueue.html#a3e70330939fdfc4dbc2f60c1a660584d">isFull</a>() &amp;&amp; !<a class="code" href="classLSQ.html">LSQ</a>.isFull() &amp;&amp; !<a class="code" href="classBackEnd.html#a3e70330939fdfc4dbc2f60c1a660584d">isFull</a>()) {
<a name="l01174"></a>01174         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Dispatch no longer blocked\n&quot;</span>);
<a name="l01175"></a>01175         <a class="code" href="classBackEnd.html#a245e3bace7ab490110304d56450aba64">dispatchStatus</a> = <a class="code" href="classBackEnd.html#a67a0db04d321a74b7e7fcfd3f1a3f70ba2f5f2c4a8c4f4f0519d503dcdfbf55cb">Running</a>;
<a name="l01176"></a>01176         <a class="code" href="classBackEnd.html#ac3f94deccc87588d728716efc4dd7ce8">dispatchInsts</a>();
<a name="l01177"></a>01177     }
<a name="l01178"></a>01178 }
<a name="l01179"></a>01179 
<a name="l01180"></a>01180 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l01181"></a>01181 <span class="keywordtype">void</span>
<a name="l01182"></a><a class="code" href="classBackEnd.html#a3694e72427d3a616808797f9343d1fc4">01182</a> <a class="code" href="classBackEnd.html#a3694e72427d3a616808797f9343d1fc4">BackEnd&lt;Impl&gt;::scheduleReadyInsts</a>()
<a name="l01183"></a>01183 {
<a name="l01184"></a>01184     <span class="comment">// Tell IQ to put any ready instructions into the instruction list.</span>
<a name="l01185"></a>01185     <span class="comment">// Probably want to have a list of DynInstPtrs returned here.  Then I</span>
<a name="l01186"></a>01186     <span class="comment">// can choose to either put them into a time buffer to simulate</span>
<a name="l01187"></a>01187     <span class="comment">// IQ scheduling time, or hand them directly off to the next stage.</span>
<a name="l01188"></a>01188     <span class="comment">// Do you ever want to directly hand it off to the next stage?</span>
<a name="l01189"></a>01189     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Trying to schedule ready instructions\n&quot;</span>);
<a name="l01190"></a>01190     <a class="code" href="classBackEnd.html#a9f8da5ee0decabae62161ec4c1738952">IQ</a>.<a class="code" href="classBackEnd_1_1InstQueue.html#a3694e72427d3a616808797f9343d1fc4">scheduleReadyInsts</a>();
<a name="l01191"></a>01191 }
<a name="l01192"></a>01192 
<a name="l01193"></a>01193 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l01194"></a>01194 <span class="keywordtype">void</span>
<a name="l01195"></a><a class="code" href="classBackEnd.html#a2d00e30d66a56e4667e28df302c98ac0">01195</a> <a class="code" href="classBackEnd.html#a2d00e30d66a56e4667e28df302c98ac0">BackEnd&lt;Impl&gt;::executeInsts</a>()
<a name="l01196"></a>01196 {
<a name="l01197"></a>01197     <span class="keywordtype">int</span> insts_to_execute = <a class="code" href="classBackEnd.html#a45c3ddf2275eab2326190578f1fcbee2">instsToExecute</a>-&gt;<a class="code" href="classTimeBuffer.html#a245260f6f74972558f61b85227df5aae">size</a>;
<a name="l01198"></a>01198 
<a name="l01199"></a>01199     <a class="code" href="classBackEnd.html#ad98215aa24a0390cc2ba2234f272cb17">issued_ops</a>[0]+= insts_to_execute;
<a name="l01200"></a>01200     <a class="code" href="classBackEnd.html#aef7967289461e66d515723da65e1f9f7">n_issued_dist</a>[insts_to_execute]++;
<a name="l01201"></a>01201 
<a name="l01202"></a>01202     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Trying to execute %i instructions\n&quot;</span>, insts_to_execute);
<a name="l01203"></a>01203 
<a name="l01204"></a>01204     <a class="code" href="classBackEnd.html#aa40219506ff80e4e8c5a9a3b1205b282">fetchRedirect</a>[0] = <span class="keyword">false</span>;
<a name="l01205"></a>01205 
<a name="l01206"></a>01206     <span class="keywordflow">while</span> (insts_to_execute &gt; 0) {
<a name="l01207"></a>01207         <span class="comment">// Get ready instruction from the IQ (or queue coming out of IQ)</span>
<a name="l01208"></a>01208         <span class="comment">// Execute the ready instruction.</span>
<a name="l01209"></a>01209         <span class="comment">// Wakeup any dependents if it&apos;s done.</span>
<a name="l01210"></a>01210         <a class="code" href="classBackEnd.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> inst = <a class="code" href="classBackEnd.html#a9f8da5ee0decabae62161ec4c1738952">IQ</a>.<a class="code" href="classBackEnd_1_1InstQueue.html#adafbd3336dfa623082983831f3063993">getReadyInst</a>();
<a name="l01211"></a>01211 
<a name="l01212"></a>01212         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Executing inst [sn:%lli] PC: %#x\n&quot;</span>,
<a name="l01213"></a>01213                 inst-&gt;seqNum, inst-&gt;readPC());
<a name="l01214"></a>01214 
<a name="l01215"></a>01215         ++<a class="code" href="classBackEnd.html#a344acde4f72898017365be79fd18a323">funcExeInst</a>;
<a name="l01216"></a>01216 
<a name="l01217"></a>01217         <span class="comment">// Check if the instruction is squashed; if so then skip it</span>
<a name="l01218"></a>01218         <span class="comment">// and don&apos;t count it towards the FU usage.</span>
<a name="l01219"></a>01219         <span class="keywordflow">if</span> (inst-&gt;isSquashed()) {
<a name="l01220"></a>01220             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Execute: Instruction was squashed.\n&quot;</span>);
<a name="l01221"></a>01221 
<a name="l01222"></a>01222             <span class="comment">// Not sure how to handle this plus the method of sending # of</span>
<a name="l01223"></a>01223             <span class="comment">// instructions to use.  Probably will just have to count it</span>
<a name="l01224"></a>01224             <span class="comment">// towards the bandwidth usage, but not the FU usage.</span>
<a name="l01225"></a>01225             --insts_to_execute;
<a name="l01226"></a>01226 
<a name="l01227"></a>01227             <span class="comment">// Consider this instruction executed so that commit can go</span>
<a name="l01228"></a>01228             <span class="comment">// ahead and retire the instruction.</span>
<a name="l01229"></a>01229             inst-&gt;setExecuted();
<a name="l01230"></a>01230 
<a name="l01231"></a>01231             <span class="comment">// Not sure if I should set this here or just let commit try to</span>
<a name="l01232"></a>01232             <span class="comment">// commit any squashed instructions.  I like the latter a bit more.</span>
<a name="l01233"></a>01233             inst-&gt;setCanCommit();
<a name="l01234"></a>01234 
<a name="l01235"></a>01235 <span class="comment">//            ++iewExecSquashedInsts;</span>
<a name="l01236"></a>01236 
<a name="l01237"></a>01237             <span class="keywordflow">continue</span>;
<a name="l01238"></a>01238         }
<a name="l01239"></a>01239 
<a name="l01240"></a>01240         <a class="code" href="classRefCountingPtr.html">Fault</a> fault = <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l01241"></a>01241 
<a name="l01242"></a>01242         <span class="comment">// Execute instruction.</span>
<a name="l01243"></a>01243         <span class="comment">// Note that if the instruction faults, it will be handled</span>
<a name="l01244"></a>01244         <span class="comment">// at the commit stage.</span>
<a name="l01245"></a>01245         <span class="keywordflow">if</span> (inst-&gt;isMemRef() &amp;&amp;
<a name="l01246"></a>01246             (!inst-&gt;isDataPrefetch() &amp;&amp; !inst-&gt;isInstPrefetch())) {
<a name="l01247"></a>01247             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Execute: Initiating access for memory &quot;</span>
<a name="l01248"></a>01248                     <span class="stringliteral">&quot;reference.\n&quot;</span>);
<a name="l01249"></a>01249 
<a name="l01250"></a>01250             <span class="comment">// Tell the LDSTQ to execute this instruction (if it is a load).</span>
<a name="l01251"></a>01251             <span class="keywordflow">if</span> (inst-&gt;isLoad()) {
<a name="l01252"></a>01252                 <span class="comment">// Loads will mark themselves as executed, and their writeback</span>
<a name="l01253"></a>01253                 <span class="comment">// event adds the instruction to the queue to commit</span>
<a name="l01254"></a>01254                 fault = <a class="code" href="classLSQ.html">LSQ</a>.executeLoad(inst);
<a name="l01255"></a>01255 
<a name="l01256"></a>01256 <span class="comment">//                ++iewExecLoadInsts;</span>
<a name="l01257"></a>01257             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (inst-&gt;isStore()) {
<a name="l01258"></a>01258                 <a class="code" href="classLSQ.html">LSQ</a>.executeStore(inst);
<a name="l01259"></a>01259 
<a name="l01260"></a>01260 <span class="comment">//                ++iewExecStoreInsts;</span>
<a name="l01261"></a>01261 
<a name="l01262"></a>01262                 <span class="keywordflow">if</span> (!(inst-&gt;req-&gt;isLLSC())) {
<a name="l01263"></a>01263                     inst-&gt;setExecuted();
<a name="l01264"></a>01264 
<a name="l01265"></a>01265                     <a class="code" href="classBackEnd.html#a720e9865ffa6e84b756f5ec1d1a24d94">instToCommit</a>(inst);
<a name="l01266"></a>01266                 }
<a name="l01267"></a>01267                 <span class="comment">// Store conditionals will mark themselves as executed, and</span>
<a name="l01268"></a>01268                 <span class="comment">// their writeback event will add the instruction to the queue</span>
<a name="l01269"></a>01269                 <span class="comment">// to commit.</span>
<a name="l01270"></a>01270             } <span class="keywordflow">else</span> {
<a name="l01271"></a>01271                 <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Unexpected memory type!\n&quot;</span>);
<a name="l01272"></a>01272             }
<a name="l01273"></a>01273 
<a name="l01274"></a>01274         } <span class="keywordflow">else</span> {
<a name="l01275"></a>01275             inst-&gt;execute();
<a name="l01276"></a>01276 
<a name="l01277"></a>01277 <span class="comment">//            ++iewExecutedInsts;</span>
<a name="l01278"></a>01278 
<a name="l01279"></a>01279             inst-&gt;setExecuted();
<a name="l01280"></a>01280 
<a name="l01281"></a>01281             <a class="code" href="classBackEnd.html#a720e9865ffa6e84b756f5ec1d1a24d94">instToCommit</a>(inst);
<a name="l01282"></a>01282         }
<a name="l01283"></a>01283 
<a name="l01284"></a>01284         <a class="code" href="classBackEnd.html#a132db67a5c42af856da64e347e8284d8">updateExeInstStats</a>(inst);
<a name="l01285"></a>01285 
<a name="l01286"></a>01286         <span class="comment">// Probably should have some sort of function for this.</span>
<a name="l01287"></a>01287         <span class="comment">// More general question of how to handle squashes?  Have some sort of</span>
<a name="l01288"></a>01288         <span class="comment">// squash unit that controls it?  Probably...</span>
<a name="l01289"></a>01289         <span class="comment">// Check if branch was correct.  This check happens after the</span>
<a name="l01290"></a>01290         <span class="comment">// instruction is added to the queue because even if the branch</span>
<a name="l01291"></a>01291         <span class="comment">// is mispredicted, the branch instruction itself is still valid.</span>
<a name="l01292"></a>01292         <span class="comment">// Only handle this if there hasn&apos;t already been something that</span>
<a name="l01293"></a>01293         <span class="comment">// redirects fetch in this group of instructions.</span>
<a name="l01294"></a>01294 
<a name="l01295"></a>01295         <span class="comment">// This probably needs to prioritize the redirects if a different</span>
<a name="l01296"></a>01296         <span class="comment">// scheduler is used.  Currently the scheduler schedules the oldest</span>
<a name="l01297"></a>01297         <span class="comment">// instruction first, so the branch resolution order will be correct.</span>
<a name="l01298"></a>01298         <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = inst-&gt;threadNumber;
<a name="l01299"></a>01299 
<a name="l01300"></a>01300         <span class="keywordflow">if</span> (!<a class="code" href="classBackEnd.html#aa40219506ff80e4e8c5a9a3b1205b282">fetchRedirect</a>[tid]) {
<a name="l01301"></a>01301 
<a name="l01302"></a>01302             <span class="keywordflow">if</span> (inst-&gt;mispredicted()) {
<a name="l01303"></a>01303                 <a class="code" href="classBackEnd.html#aa40219506ff80e4e8c5a9a3b1205b282">fetchRedirect</a>[tid] = <span class="keyword">true</span>;
<a name="l01304"></a>01304 
<a name="l01305"></a>01305                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Execute: Branch mispredict detected.\n&quot;</span>);
<a name="l01306"></a>01306                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Execute: Redirecting fetch to PC: %#x.\n&quot;</span>,
<a name="l01307"></a>01307                         inst-&gt;nextPC);
<a name="l01308"></a>01308 
<a name="l01309"></a>01309                 <span class="comment">// If incorrect, then signal the ROB that it must be squashed.</span>
<a name="l01310"></a>01310                 <a class="code" href="classBackEnd.html#a05c89a1532adb13cc0632fc3bb600add">squashDueToBranch</a>(inst);
<a name="l01311"></a>01311 
<a name="l01312"></a>01312                 <span class="keywordflow">if</span> (inst-&gt;predTaken()) {
<a name="l01313"></a>01313 <span class="comment">//                    predictedTakenIncorrect++;</span>
<a name="l01314"></a>01314                 } <span class="keywordflow">else</span> {
<a name="l01315"></a>01315 <span class="comment">//                    predictedNotTakenIncorrect++;</span>
<a name="l01316"></a>01316                 }
<a name="l01317"></a>01317             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classLSQ.html">LSQ</a>.violation()) {
<a name="l01318"></a>01318                 <a class="code" href="classBackEnd.html#aa40219506ff80e4e8c5a9a3b1205b282">fetchRedirect</a>[tid] = <span class="keyword">true</span>;
<a name="l01319"></a>01319 
<a name="l01320"></a>01320                 <span class="comment">// Get the DynInst that caused the violation.  Note that this</span>
<a name="l01321"></a>01321                 <span class="comment">// clears the violation signal.</span>
<a name="l01322"></a>01322                 <a class="code" href="classBackEnd.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> violator;
<a name="l01323"></a>01323                 violator = <a class="code" href="classLSQ.html">LSQ</a>.getMemDepViolator();
<a name="l01324"></a>01324 
<a name="l01325"></a>01325                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;LDSTQ detected a violation.  Violator PC: &quot;</span>
<a name="l01326"></a>01326                         <span class="stringliteral">&quot;%#x, inst PC: %#x.  Addr is: %#x.\n&quot;</span>,
<a name="l01327"></a>01327                         violator-&gt;readPC(), inst-&gt;readPC(), inst-&gt;physEffAddr);
<a name="l01328"></a>01328 
<a name="l01329"></a>01329                 <span class="comment">// Tell the instruction queue that a violation has occured.</span>
<a name="l01330"></a>01330 <span class="comment">//                IQ.violation(inst, violator);</span>
<a name="l01331"></a>01331 
<a name="l01332"></a>01332                 <span class="comment">// Squash.</span>
<a name="l01333"></a>01333 <span class="comment">//                squashDueToMemOrder(inst,tid);</span>
<a name="l01334"></a>01334                 <a class="code" href="classBackEnd.html#a05c89a1532adb13cc0632fc3bb600add">squashDueToBranch</a>(inst);
<a name="l01335"></a>01335 
<a name="l01336"></a>01336 <span class="comment">//                ++memOrderViolationEvents;</span>
<a name="l01337"></a>01337             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classLSQ.html">LSQ</a>.loadBlocked()) {
<a name="l01338"></a>01338                 <a class="code" href="classBackEnd.html#aa40219506ff80e4e8c5a9a3b1205b282">fetchRedirect</a>[tid] = <span class="keyword">true</span>;
<a name="l01339"></a>01339 
<a name="l01340"></a>01340                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Load operation couldn&apos;t execute because the &quot;</span>
<a name="l01341"></a>01341                         <span class="stringliteral">&quot;memory system is blocked.  PC: %#x [sn:%lli]\n&quot;</span>,
<a name="l01342"></a>01342                         inst-&gt;readPC(), inst-&gt;seqNum);
<a name="l01343"></a>01343 
<a name="l01344"></a>01344                 <a class="code" href="classBackEnd.html#a5fcf443dc6ada1ab1936df923c3205d2">squashDueToMemBlocked</a>(inst);
<a name="l01345"></a>01345             }
<a name="l01346"></a>01346         }
<a name="l01347"></a>01347 
<a name="l01348"></a>01348 <span class="comment">//        instList.pop_front();</span>
<a name="l01349"></a>01349 
<a name="l01350"></a>01350         --insts_to_execute;
<a name="l01351"></a>01351 
<a name="l01352"></a>01352         <span class="comment">// keep an instruction count</span>
<a name="l01353"></a>01353         <a class="code" href="classBackEnd.html#a743989b66f3b52f1eda2a8498a93da0b">thread</a>-&gt;<a class="code" href="structThreadState.html#a1431f3f73435dd9b1c68e7e3a303ada0">numInst</a>++;
<a name="l01354"></a>01354         <a class="code" href="classBackEnd.html#a743989b66f3b52f1eda2a8498a93da0b">thread</a>-&gt;<a class="code" href="structThreadState.html#a302bf9a6fd3b54c46eb3e2bfb18a320e">numInsts</a>++;
<a name="l01355"></a>01355     }
<a name="l01356"></a>01356 
<a name="l01357"></a>01357     assert(insts_to_execute &gt;= 0);
<a name="l01358"></a>01358 }
<a name="l01359"></a>01359 
<a name="l01360"></a>01360 <span class="keyword">template</span>&lt;<span class="keyword">class</span> Impl&gt;
<a name="l01361"></a>01361 <span class="keywordtype">void</span>
<a name="l01362"></a><a class="code" href="classBackEnd.html#a720e9865ffa6e84b756f5ec1d1a24d94">01362</a> <a class="code" href="classBackEnd.html#a720e9865ffa6e84b756f5ec1d1a24d94">BackEnd&lt;Impl&gt;::instToCommit</a>(<a class="code" href="namespaceThePipeline.html#a992959fefcd659c6ba422aa4de14677c">DynInstPtr</a> &amp;inst)
<a name="l01363"></a>01363 {
<a name="l01364"></a>01364     <span class="keywordtype">int</span> wb_width = <a class="code" href="classBackEnd.html#a20d3086e6bcdc826d99143ac7c9b23a4">wbWidth</a>;
<a name="l01365"></a>01365     <span class="comment">// First check the time slot that this instruction will write</span>
<a name="l01366"></a>01366     <span class="comment">// to.  If there are free write ports at the time, then go ahead</span>
<a name="l01367"></a>01367     <span class="comment">// and write the instruction to that time.  If there are not,</span>
<a name="l01368"></a>01368     <span class="comment">// keep looking back to see where&apos;s the first time there&apos;s a</span>
<a name="l01369"></a>01369     <span class="comment">// free slot.  What happens if you run out of free spaces?</span>
<a name="l01370"></a>01370     <span class="comment">// For now naively assume that all instructions take one cycle.</span>
<a name="l01371"></a>01371     <span class="comment">// Otherwise would have to look into the time buffer based on the</span>
<a name="l01372"></a>01372     <span class="comment">// latency of the instruction.</span>
<a name="l01373"></a>01373 
<a name="l01374"></a>01374     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Sending instructions to commit [sn:%lli] PC %#x.\n&quot;</span>,
<a name="l01375"></a>01375             inst-&gt;seqNum, inst-&gt;readPC());
<a name="l01376"></a>01376 
<a name="l01377"></a>01377     <span class="keywordflow">while</span> (<a class="code" href="classBackEnd.html#a2647e2052851a9122ac4ce89b84d77b5">numInstsToWB</a>[<a class="code" href="classBackEnd.html#ad2c7b2687f864f2b7359eb393276996f">wbCycle</a>].size &gt;= wb_width) {
<a name="l01378"></a>01378         ++<a class="code" href="classBackEnd.html#ad2c7b2687f864f2b7359eb393276996f">wbCycle</a>;
<a name="l01379"></a>01379 
<a name="l01380"></a>01380         assert(<a class="code" href="classBackEnd.html#ad2c7b2687f864f2b7359eb393276996f">wbCycle</a> &lt; 5);
<a name="l01381"></a>01381     }
<a name="l01382"></a>01382 
<a name="l01383"></a>01383     <span class="comment">// Add finished instruction to queue to commit.</span>
<a name="l01384"></a>01384     <a class="code" href="classBackEnd.html#ae4b76f4612be07d13b349e13ee9dfa16">writeback</a>.push_back(inst);
<a name="l01385"></a>01385     <a class="code" href="classBackEnd.html#a2647e2052851a9122ac4ce89b84d77b5">numInstsToWB</a>[<a class="code" href="classBackEnd.html#ad2c7b2687f864f2b7359eb393276996f">wbCycle</a>].<a class="code" href="classTimeBuffer.html#a245260f6f74972558f61b85227df5aae">size</a>++;
<a name="l01386"></a>01386 
<a name="l01387"></a>01387     <span class="keywordflow">if</span> (<a class="code" href="classBackEnd.html#ad2c7b2687f864f2b7359eb393276996f">wbCycle</a>)
<a name="l01388"></a>01388         <a class="code" href="classBackEnd.html#adf6ccbeee5b1388f198d050e098df8d5">wb_penalized</a>[0]++;
<a name="l01389"></a>01389 }
<a name="l01390"></a>01390 
<a name="l01391"></a>01391 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l01392"></a>01392 <span class="keywordtype">void</span>
<a name="l01393"></a><a class="code" href="classBackEnd.html#a5e9a203f943b3a8a243ddc6d2a0a240d">01393</a> <a class="code" href="classBackEnd.html#a5e9a203f943b3a8a243ddc6d2a0a240d">BackEnd&lt;Impl&gt;::writebackInsts</a>()
<a name="l01394"></a>01394 {
<a name="l01395"></a>01395     <span class="keywordtype">int</span> wb_width = <a class="code" href="classBackEnd.html#a20d3086e6bcdc826d99143ac7c9b23a4">wbWidth</a>;
<a name="l01396"></a>01396     <span class="comment">// Using this method I&apos;m not quite sure how to prevent an</span>
<a name="l01397"></a>01397     <span class="comment">// instruction from waking its own dependents multiple times,</span>
<a name="l01398"></a>01398     <span class="comment">// without the guarantee that commit always has enough bandwidth</span>
<a name="l01399"></a>01399     <span class="comment">// to accept all instructions being written back.  This guarantee</span>
<a name="l01400"></a>01400     <span class="comment">// might not be too unrealistic.</span>
<a name="l01401"></a>01401     <a class="code" href="classBackEnd.html#a4da46d72d68fcd5bfe65dc701c358379">InstListIt</a> wb_inst_it = <a class="code" href="classBackEnd.html#ae4b76f4612be07d13b349e13ee9dfa16">writeback</a>.begin();
<a name="l01402"></a>01402     <a class="code" href="classBackEnd.html#a4da46d72d68fcd5bfe65dc701c358379">InstListIt</a> wb_end_it = <a class="code" href="classBackEnd.html#ae4b76f4612be07d13b349e13ee9dfa16">writeback</a>.end();
<a name="l01403"></a>01403     <span class="keywordtype">int</span> inst_num = 0;
<a name="l01404"></a>01404     <span class="keywordtype">int</span> consumer_insts = 0;
<a name="l01405"></a>01405 
<a name="l01406"></a>01406     <span class="keywordflow">for</span> (; inst_num &lt; wb_width &amp;&amp;
<a name="l01407"></a>01407              wb_inst_it != wb_end_it; inst_num++) {
<a name="l01408"></a>01408         <a class="code" href="classBackEnd.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> inst = (*wb_inst_it);
<a name="l01409"></a>01409 
<a name="l01410"></a>01410         <span class="comment">// Some instructions will be sent to commit without having</span>
<a name="l01411"></a>01411         <span class="comment">// executed because they need commit to handle them.</span>
<a name="l01412"></a>01412         <span class="comment">// E.g. Uncached loads have not actually executed when they</span>
<a name="l01413"></a>01413         <span class="comment">// are first sent to commit.  Instead commit must tell the LSQ</span>
<a name="l01414"></a>01414         <span class="comment">// when it&apos;s ready to execute the uncached load.</span>
<a name="l01415"></a>01415         <span class="keywordflow">if</span> (!inst-&gt;isSquashed()) {
<a name="l01416"></a>01416             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Writing back instruction [sn:%lli] PC %#x.\n&quot;</span>,
<a name="l01417"></a>01417                     inst-&gt;seqNum, inst-&gt;readPC());
<a name="l01418"></a>01418 
<a name="l01419"></a>01419             inst-&gt;setCanCommit();
<a name="l01420"></a>01420             inst-&gt;setResultReady();
<a name="l01421"></a>01421 
<a name="l01422"></a>01422             <span class="keywordflow">if</span> (inst-&gt;isExecuted()) {
<a name="l01423"></a>01423                 <span class="keywordtype">int</span> dependents = <a class="code" href="classBackEnd.html#a9f8da5ee0decabae62161ec4c1738952">IQ</a>.<a class="code" href="classBackEnd_1_1InstQueue.html#adc3bb738d2526d7074ee2a17b7c34bc4">wakeDependents</a>(inst);
<a name="l01424"></a>01424                 <span class="keywordflow">if</span> (dependents) {
<a name="l01425"></a>01425                     <a class="code" href="classBackEnd.html#a47652a48ae1beac314831c224e026f24">producer_inst</a>[0]++;
<a name="l01426"></a>01426                     consumer_insts+= dependents;
<a name="l01427"></a>01427                 }
<a name="l01428"></a>01428             }
<a name="l01429"></a>01429         }
<a name="l01430"></a>01430 
<a name="l01431"></a>01431         <a class="code" href="classBackEnd.html#ae4b76f4612be07d13b349e13ee9dfa16">writeback</a>.erase(wb_inst_it++);
<a name="l01432"></a>01432     }
<a name="l01433"></a>01433     <a class="code" href="classLSQ.html">LSQ</a>.writebackStores();
<a name="l01434"></a>01434     <a class="code" href="classBackEnd.html#a5242b9d95c9537000e64dee2e5ac42cf">consumer_inst</a>[0]+= consumer_insts;
<a name="l01435"></a>01435     <a class="code" href="classBackEnd.html#a1b89675ac5b779ab9ead5ae5d3550189">writeback_count</a>[0]+= inst_num;
<a name="l01436"></a>01436 }
<a name="l01437"></a>01437 
<a name="l01438"></a>01438 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l01439"></a>01439 <span class="keywordtype">bool</span>
<a name="l01440"></a><a class="code" href="classBackEnd.html#a300f33ed45badc3c856983b1b7469955">01440</a> <a class="code" href="classBackEnd.html#a300f33ed45badc3c856983b1b7469955">BackEnd&lt;Impl&gt;::commitInst</a>(<span class="keywordtype">int</span> inst_num)
<a name="l01441"></a>01441 {
<a name="l01442"></a>01442     <span class="comment">// Read instruction from the head of the ROB</span>
<a name="l01443"></a>01443     <a class="code" href="classBackEnd.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> inst = <a class="code" href="classBackEnd.html#ae10a391d02ce1ef67ee13cd82b7d46e5">instList</a>.front();
<a name="l01444"></a>01444 
<a name="l01445"></a>01445     <span class="comment">// Make sure instruction is valid</span>
<a name="l01446"></a>01446     assert(inst);
<a name="l01447"></a>01447 
<a name="l01448"></a>01448     <span class="keywordflow">if</span> (!inst-&gt;readyToCommit())
<a name="l01449"></a>01449         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01450"></a>01450 
<a name="l01451"></a>01451     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Trying to commit instruction [sn:%lli] PC:%#x\n&quot;</span>,
<a name="l01452"></a>01452             inst-&gt;seqNum, inst-&gt;readPC());
<a name="l01453"></a>01453 
<a name="l01454"></a>01454     <span class="comment">// If the instruction is not executed yet, then it is a non-speculative</span>
<a name="l01455"></a>01455     <span class="comment">// or store inst.  Signal backwards that it should be executed.</span>
<a name="l01456"></a>01456     <span class="keywordflow">if</span> (!inst-&gt;isExecuted()) {
<a name="l01457"></a>01457         <span class="comment">// Keep this number correct.  We have not yet actually executed</span>
<a name="l01458"></a>01458         <span class="comment">// and committed this instruction.</span>
<a name="l01459"></a>01459 <span class="comment">//        thread-&gt;funcExeInst--;</span>
<a name="l01460"></a>01460 
<a name="l01461"></a>01461         <span class="keywordflow">if</span> (inst-&gt;isNonSpeculative()) {
<a name="l01462"></a>01462             <span class="comment">// Hack to make sure syscalls aren&apos;t executed until all stores</span>
<a name="l01463"></a>01463             <span class="comment">// write back their data.  This direct communication shouldn&apos;t</span>
<a name="l01464"></a>01464             <span class="comment">// be used for anything other than this.</span>
<a name="l01465"></a>01465             <span class="keywordflow">if</span> (inst_num &gt; 0 || <a class="code" href="classLSQ.html">LSQ</a>.hasStoresToWB()) {
<a name="l01466"></a>01466                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Waiting for all stores to writeback.\n&quot;</span>);
<a name="l01467"></a>01467                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01468"></a>01468             }
<a name="l01469"></a>01469 
<a name="l01470"></a>01470             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Encountered a store or non-speculative &quot;</span>
<a name="l01471"></a>01471                     <span class="stringliteral">&quot;instruction at the head of the ROB, PC %#x.\n&quot;</span>,
<a name="l01472"></a>01472                     inst-&gt;readPC());
<a name="l01473"></a>01473 
<a name="l01474"></a>01474             <span class="comment">// Send back the non-speculative instruction&apos;s sequence number.</span>
<a name="l01475"></a>01475             <a class="code" href="classBackEnd.html#acf56450a952ce19a7cc68c86f0334c0c">toIEW</a>-&gt;nonSpecSeqNum = inst-&gt;seqNum;
<a name="l01476"></a>01476 
<a name="l01477"></a>01477             <span class="comment">// Change the instruction so it won&apos;t try to commit again until</span>
<a name="l01478"></a>01478             <span class="comment">// it is executed.</span>
<a name="l01479"></a>01479             inst-&gt;clearCanCommit();
<a name="l01480"></a>01480 
<a name="l01481"></a>01481 <span class="comment">//            ++commitNonSpecStalls;</span>
<a name="l01482"></a>01482 
<a name="l01483"></a>01483             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01484"></a>01484         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (inst-&gt;isLoad()) {
<a name="l01485"></a>01485             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;[sn:%lli]: Uncached load, PC %#x.\n&quot;</span>,
<a name="l01486"></a>01486                     inst-&gt;seqNum, inst-&gt;readPC());
<a name="l01487"></a>01487 
<a name="l01488"></a>01488             <span class="comment">// Send back the non-speculative instruction&apos;s sequence</span>
<a name="l01489"></a>01489             <span class="comment">// number.  Maybe just tell the lsq to re-execute the load.</span>
<a name="l01490"></a>01490             <a class="code" href="classBackEnd.html#acf56450a952ce19a7cc68c86f0334c0c">toIEW</a>-&gt;nonSpecSeqNum = inst-&gt;seqNum;
<a name="l01491"></a>01491             <a class="code" href="classBackEnd.html#acf56450a952ce19a7cc68c86f0334c0c">toIEW</a>-&gt;uncached = <span class="keyword">true</span>;
<a name="l01492"></a>01492             <a class="code" href="classBackEnd.html#acf56450a952ce19a7cc68c86f0334c0c">toIEW</a>-&gt;lqIdx = inst-&gt;lqIdx;
<a name="l01493"></a>01493 
<a name="l01494"></a>01494             inst-&gt;clearCanCommit();
<a name="l01495"></a>01495 
<a name="l01496"></a>01496             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01497"></a>01497         } <span class="keywordflow">else</span> {
<a name="l01498"></a>01498             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Trying to commit un-executed instruction &quot;</span>
<a name="l01499"></a>01499                   <span class="stringliteral">&quot;of unknown type!\n&quot;</span>);
<a name="l01500"></a>01500         }
<a name="l01501"></a>01501     }
<a name="l01502"></a>01502 
<a name="l01503"></a>01503     <span class="comment">// Now check if it&apos;s one of the special trap or barrier or</span>
<a name="l01504"></a>01504     <span class="comment">// serializing instructions.</span>
<a name="l01505"></a>01505     <span class="keywordflow">if</span> (inst-&gt;isThreadSync())
<a name="l01506"></a>01506     {
<a name="l01507"></a>01507         <span class="comment">// Not handled for now.</span>
<a name="l01508"></a>01508         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Barrier instructions are not handled yet.\n&quot;</span>);
<a name="l01509"></a>01509     }
<a name="l01510"></a>01510 
<a name="l01511"></a>01511     <span class="comment">// Check if the instruction caused a fault.  If so, trap.</span>
<a name="l01512"></a>01512     <a class="code" href="classRefCountingPtr.html">Fault</a> inst_fault = inst-&gt;getFault();
<a name="l01513"></a>01513 
<a name="l01514"></a>01514     <span class="keywordflow">if</span> (inst_fault != <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>) {
<a name="l01515"></a>01515         <span class="keywordflow">if</span> (!inst-&gt;isNop()) {
<a name="l01516"></a>01516             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Inst [sn:%lli] PC %#x has a fault\n&quot;</span>,
<a name="l01517"></a>01517                     inst-&gt;seqNum, inst-&gt;readPC());
<a name="l01518"></a>01518 
<a name="l01519"></a>01519 <span class="comment">//            assert(!thread-&gt;noSquashFromTC);</span>
<a name="l01520"></a>01520 
<a name="l01521"></a>01521 <span class="comment">//            thread-&gt;noSquashFromTC = true;</span>
<a name="l01522"></a>01522 
<a name="l01523"></a>01523             <span class="comment">// Consider holding onto the trap and waiting until the trap event</span>
<a name="l01524"></a>01524             <span class="comment">// happens for this to be executed.</span>
<a name="l01525"></a>01525             inst_fault-&gt;invoke(<a class="code" href="classBackEnd.html#a743989b66f3b52f1eda2a8498a93da0b">thread</a>-&gt;getXCProxy());
<a name="l01526"></a>01526 
<a name="l01527"></a>01527             <span class="comment">// Exit state update mode to avoid accidental updating.</span>
<a name="l01528"></a>01528 <span class="comment">//            thread-&gt;noSquashFromTC = false;</span>
<a name="l01529"></a>01529 
<a name="l01530"></a>01530 <span class="comment">//            commitStatus = TrapPending;</span>
<a name="l01531"></a>01531 
<a name="l01532"></a>01532             <span class="comment">// Generate trap squash event.</span>
<a name="l01533"></a>01533 <span class="comment">//            generateTrapEvent();</span>
<a name="l01534"></a>01534 
<a name="l01535"></a>01535             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01536"></a>01536         }
<a name="l01537"></a>01537     }
<a name="l01538"></a>01538 
<a name="l01539"></a>01539     <span class="keywordflow">if</span> (inst-&gt;isControl()) {
<a name="l01540"></a>01540 <span class="comment">//        ++commitCommittedBranches;</span>
<a name="l01541"></a>01541     }
<a name="l01542"></a>01542 
<a name="l01543"></a>01543     <span class="keywordtype">int</span> freed_regs = 0;
<a name="l01544"></a>01544 
<a name="l01545"></a>01545     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; inst-&gt;numDestRegs(); ++<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>) {
<a name="l01546"></a>01546         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Commit rename map setting register %i to [sn:%lli]\n&quot;</span>,
<a name="l01547"></a>01547                 (<span class="keywordtype">int</span>)inst-&gt;destRegIdx(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>), inst-&gt;seqNum);
<a name="l01548"></a>01548         <a class="code" href="classBackEnd.html#a743989b66f3b52f1eda2a8498a93da0b">thread</a>-&gt;<a class="code" href="structOzoneThreadState.html#af8d3f859e7c0dd9408ba99de6f415616">renameTable</a>[inst-&gt;destRegIdx(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>)] = inst;
<a name="l01549"></a>01549         ++freed_regs;
<a name="l01550"></a>01550     }
<a name="l01551"></a>01551 
<a name="l01552"></a>01552     <span class="keywordflow">if</span> (inst-&gt;traceData) {
<a name="l01553"></a>01553         inst-&gt;traceData-&gt;finalize();
<a name="l01554"></a>01554         inst-&gt;traceData = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l01555"></a>01555     }
<a name="l01556"></a>01556 
<a name="l01557"></a>01557     inst-&gt;clearDependents();
<a name="l01558"></a>01558 
<a name="l01559"></a>01559     <a class="code" href="classBackEnd.html#a67c762418bb2017cb2dce5a0c94f0788">frontEnd</a>-&gt;<a class="code" href="classFrontEnd.html#a5562c5f14a79f595934df368f2e86d54">addFreeRegs</a>(freed_regs);
<a name="l01560"></a>01560 
<a name="l01561"></a>01561     <a class="code" href="classBackEnd.html#ae10a391d02ce1ef67ee13cd82b7d46e5">instList</a>.pop_front();
<a name="l01562"></a>01562 
<a name="l01563"></a>01563     --<a class="code" href="classBackEnd.html#a358c879c68910efe5300c4515df35b6c">numInsts</a>;
<a name="l01564"></a>01564     <a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;numInst++;
<a name="l01565"></a>01565     <a class="code" href="classBackEnd.html#a743989b66f3b52f1eda2a8498a93da0b">thread</a>-&gt;<a class="code" href="structThreadState.html#a302bf9a6fd3b54c46eb3e2bfb18a320e">numInsts</a>++;
<a name="l01566"></a>01566     ++<a class="code" href="classBackEnd.html#a743989b66f3b52f1eda2a8498a93da0b">thread</a>-&gt;<a class="code" href="structThreadState.html#a344acde4f72898017365be79fd18a323">funcExeInst</a>;
<a name="l01567"></a>01567     <a class="code" href="classBackEnd.html#a743989b66f3b52f1eda2a8498a93da0b">thread</a>-&gt;<a class="code" href="structOzoneThreadState.html#ab4fee9d7e100be71a104b4b714909357">PC</a> = inst-&gt;readNextPC();
<a name="l01568"></a>01568     <a class="code" href="classBackEnd.html#a5bbf266cb0cc97eed138c8fe0d2d76b6">updateComInstStats</a>(inst);
<a name="l01569"></a>01569 
<a name="l01570"></a>01570     <span class="comment">// Write the done sequence number here.</span>
<a name="l01571"></a>01571     <a class="code" href="classBackEnd.html#acf56450a952ce19a7cc68c86f0334c0c">toIEW</a>-&gt;doneSeqNum = inst-&gt;seqNum;
<a name="l01572"></a>01572 
<a name="l01573"></a>01573     <span class="keywordtype">int</span> <a class="code" href="namespaceX86ISA.html#a668f84c330035fdb72824eb18e09cd09">count</a> = 0;
<a name="l01574"></a>01574     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> oldpc;
<a name="l01575"></a>01575     <span class="keywordflow">do</span> {
<a name="l01576"></a>01576         <span class="keywordflow">if</span> (count == 0)
<a name="l01577"></a>01577             assert(!<a class="code" href="classBackEnd.html#a743989b66f3b52f1eda2a8498a93da0b">thread</a>-&gt;<a class="code" href="structOzoneThreadState.html#afdfc33b720511483d84f7098ab6ba075">noSquashFromTC</a> &amp;&amp; !<a class="code" href="classBackEnd.html#a743989b66f3b52f1eda2a8498a93da0b">thread</a>-&gt;<a class="code" href="structOzoneThreadState.html#aa9f948437524f88e51afd737df505200">trapPending</a>);
<a name="l01578"></a>01578         oldpc = <a class="code" href="classBackEnd.html#a743989b66f3b52f1eda2a8498a93da0b">thread</a>-&gt;<a class="code" href="structOzoneThreadState.html#a30cb2afdfdc1383b7804c167dcf5ee78">readPC</a>();
<a name="l01579"></a>01579         <a class="code" href="classBackEnd.html#a766385c2941cd46525f4d9dff90200a2">cpu</a>-&gt;system-&gt;pcEventQueue.service(
<a name="l01580"></a>01580             <a class="code" href="classBackEnd.html#a743989b66f3b52f1eda2a8498a93da0b">thread</a>-&gt;getXCProxy());
<a name="l01581"></a>01581         count++;
<a name="l01582"></a>01582     } <span class="keywordflow">while</span> (oldpc != <a class="code" href="classBackEnd.html#a743989b66f3b52f1eda2a8498a93da0b">thread</a>-&gt;<a class="code" href="structOzoneThreadState.html#a30cb2afdfdc1383b7804c167dcf5ee78">readPC</a>());
<a name="l01583"></a>01583     <span class="keywordflow">if</span> (count &gt; 1) {
<a name="l01584"></a>01584         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;PC skip function event, stopping commit\n&quot;</span>);
<a name="l01585"></a>01585 <span class="comment">//        completed_last_inst = false;</span>
<a name="l01586"></a>01586 <span class="comment">//        squashPending = true;</span>
<a name="l01587"></a>01587         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01588"></a>01588     }
<a name="l01589"></a>01589     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01590"></a>01590 }
<a name="l01591"></a>01591 
<a name="l01592"></a>01592 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l01593"></a>01593 <span class="keywordtype">void</span>
<a name="l01594"></a><a class="code" href="classBackEnd.html#ac8b85fbfdf330d000c094a9d1886d264">01594</a> <a class="code" href="classBackEnd.html#ac8b85fbfdf330d000c094a9d1886d264">BackEnd&lt;Impl&gt;::commitInsts</a>()
<a name="l01595"></a>01595 {
<a name="l01596"></a>01596     <span class="keywordtype">int</span> commit_width = <a class="code" href="classBackEnd.html#a328db48cdab1c2a18d8432b647e2785b">commitWidth</a> ? <a class="code" href="classBackEnd.html#a328db48cdab1c2a18d8432b647e2785b">commitWidth</a> : <a class="code" href="classBackEnd.html#a2474a5474cbff19523a51eb1de01cda4">width</a>;
<a name="l01597"></a>01597 
<a name="l01598"></a>01598     <span class="comment">// Not sure this should be a loop or not.</span>
<a name="l01599"></a>01599     <span class="keywordtype">int</span> inst_num = 0;
<a name="l01600"></a>01600     <span class="keywordflow">while</span> (!<a class="code" href="classBackEnd.html#ae10a391d02ce1ef67ee13cd82b7d46e5">instList</a>.empty() &amp;&amp; inst_num &lt; commit_width) {
<a name="l01601"></a>01601         <span class="keywordflow">if</span> (<a class="code" href="classBackEnd.html#ae10a391d02ce1ef67ee13cd82b7d46e5">instList</a>.front()-&gt;isSquashed()) {
<a name="l01602"></a>01602             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;No squashed insts should still be on the list!&quot;</span>);
<a name="l01603"></a>01603             <a class="code" href="classBackEnd.html#ae10a391d02ce1ef67ee13cd82b7d46e5">instList</a>.front()-&gt;clearDependents();
<a name="l01604"></a>01604             <a class="code" href="classBackEnd.html#ae10a391d02ce1ef67ee13cd82b7d46e5">instList</a>.pop_front();
<a name="l01605"></a>01605             <span class="keywordflow">continue</span>;
<a name="l01606"></a>01606         }
<a name="l01607"></a>01607 
<a name="l01608"></a>01608         <span class="keywordflow">if</span> (!<a class="code" href="classBackEnd.html#a300f33ed45badc3c856983b1b7469955">commitInst</a>(inst_num++)) {
<a name="l01609"></a>01609             <span class="keywordflow">break</span>;
<a name="l01610"></a>01610         }
<a name="l01611"></a>01611     }
<a name="l01612"></a>01612     <a class="code" href="classBackEnd.html#adef6c140c8c63175c52b3bc6501f9d1c">n_committed_dist</a>.<a class="code" href="classStats_1_1DistBase.html#afed4e1e09f566c5aa9e972d8c17b5a27">sample</a>(inst_num);
<a name="l01613"></a>01613 }
<a name="l01614"></a>01614 
<a name="l01615"></a>01615 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l01616"></a>01616 <span class="keywordtype">void</span>
<a name="l01617"></a><a class="code" href="classBackEnd.html#adc9b67ce59b0b2e930cfaf6361ce42c5">01617</a> <a class="code" href="classBackEnd.html#a3c68c455d9207edd23ae3bcb7971e653">BackEnd&lt;Impl&gt;::squash</a>(<span class="keyword">const</span> <a class="code" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> &amp;sn)
<a name="l01618"></a>01618 {
<a name="l01619"></a>01619     <a class="code" href="classBackEnd.html#a9f8da5ee0decabae62161ec4c1738952">IQ</a>.<a class="code" href="classBackEnd_1_1InstQueue.html#adc9b67ce59b0b2e930cfaf6361ce42c5">squash</a>(sn);
<a name="l01620"></a>01620     <a class="code" href="classLSQ.html">LSQ</a>.squash(sn);
<a name="l01621"></a>01621 
<a name="l01622"></a>01622     <span class="keywordtype">int</span> freed_regs = 0;
<a name="l01623"></a>01623     <a class="code" href="classBackEnd.html#a4da46d72d68fcd5bfe65dc701c358379">InstListIt</a> dispatch_end = <a class="code" href="classBackEnd.html#a1e13c801cafc8d7e052b2f999c89ad85">dispatch</a>.end();
<a name="l01624"></a>01624     <a class="code" href="classBackEnd.html#a4da46d72d68fcd5bfe65dc701c358379">InstListIt</a> insts_it = <a class="code" href="classBackEnd.html#a1e13c801cafc8d7e052b2f999c89ad85">dispatch</a>.end();
<a name="l01625"></a>01625     insts_it--;
<a name="l01626"></a>01626 
<a name="l01627"></a>01627     <span class="keywordflow">while</span> (insts_it != dispatch_end &amp;&amp; (*insts_it)-&gt;seqNum &gt; sn)
<a name="l01628"></a>01628     {
<a name="l01629"></a>01629         <span class="keywordflow">if</span> ((*insts_it)-&gt;isSquashed()) {
<a name="l01630"></a>01630             --insts_it;
<a name="l01631"></a>01631             <span class="keywordflow">continue</span>;
<a name="l01632"></a>01632         }
<a name="l01633"></a>01633         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Squashing instruction on dispatch list PC %#x, [sn:%lli].\n&quot;</span>,
<a name="l01634"></a>01634                 (*insts_it)-&gt;readPC(),
<a name="l01635"></a>01635                 (*insts_it)-&gt;seqNum);
<a name="l01636"></a>01636 
<a name="l01637"></a>01637         <span class="comment">// Mark the instruction as squashed, and ready to commit so that</span>
<a name="l01638"></a>01638         <span class="comment">// it can drain out of the pipeline.</span>
<a name="l01639"></a>01639         (*insts_it)-&gt;setSquashed();
<a name="l01640"></a>01640 
<a name="l01641"></a>01641         (*insts_it)-&gt;setCanCommit();
<a name="l01642"></a>01642 
<a name="l01643"></a>01643         <span class="comment">// Be careful with IPRs and such here</span>
<a name="l01644"></a>01644         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; (*insts_it)-&gt;numDestRegs(); ++<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>) {
<a name="l01645"></a>01645             <a class="code" href="classBackEnd.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> prev_dest = (*insts_it)-&gt;getPrevDestInst(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>);
<a name="l01646"></a>01646             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Commit rename map setting register %i to [sn:%lli]\n&quot;</span>,
<a name="l01647"></a>01647                     (<span class="keywordtype">int</span>)(*insts_it)-&gt;destRegIdx(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>), prev_dest);
<a name="l01648"></a>01648             <a class="code" href="classBackEnd.html#af8d3f859e7c0dd9408ba99de6f415616">renameTable</a>[(*insts_it)-&gt;destRegIdx(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>)] = prev_dest;
<a name="l01649"></a>01649             ++freed_regs;
<a name="l01650"></a>01650         }
<a name="l01651"></a>01651 
<a name="l01652"></a>01652         (*insts_it)-&gt;clearDependents();
<a name="l01653"></a>01653 
<a name="l01654"></a>01654         --insts_it;
<a name="l01655"></a>01655     }
<a name="l01656"></a>01656 
<a name="l01657"></a>01657     insts_it = <a class="code" href="classBackEnd.html#ae10a391d02ce1ef67ee13cd82b7d46e5">instList</a>.end();
<a name="l01658"></a>01658     insts_it--;
<a name="l01659"></a>01659 
<a name="l01660"></a>01660     <span class="keywordflow">while</span> (!<a class="code" href="classBackEnd.html#ae10a391d02ce1ef67ee13cd82b7d46e5">instList</a>.empty() &amp;&amp; (*insts_it)-&gt;seqNum &gt; sn)
<a name="l01661"></a>01661     {
<a name="l01662"></a>01662         <span class="keywordflow">if</span> ((*insts_it)-&gt;isSquashed()) {
<a name="l01663"></a>01663             --insts_it;
<a name="l01664"></a>01664             <span class="keywordflow">continue</span>;
<a name="l01665"></a>01665         }
<a name="l01666"></a>01666         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Squashing instruction on inst list PC %#x, [sn:%lli].\n&quot;</span>,
<a name="l01667"></a>01667                 (*insts_it)-&gt;readPC(),
<a name="l01668"></a>01668                 (*insts_it)-&gt;seqNum);
<a name="l01669"></a>01669 
<a name="l01670"></a>01670         <span class="comment">// Mark the instruction as squashed, and ready to commit so that</span>
<a name="l01671"></a>01671         <span class="comment">// it can drain out of the pipeline.</span>
<a name="l01672"></a>01672         (*insts_it)-&gt;setSquashed();
<a name="l01673"></a>01673 
<a name="l01674"></a>01674         (*insts_it)-&gt;setCanCommit();
<a name="l01675"></a>01675 
<a name="l01676"></a>01676         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; (*insts_it)-&gt;numDestRegs(); ++<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>) {
<a name="l01677"></a>01677             <a class="code" href="classBackEnd.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> prev_dest = (*insts_it)-&gt;getPrevDestInst(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>);
<a name="l01678"></a>01678             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BE, <span class="stringliteral">&quot;Commit rename map setting register %i to [sn:%lli]\n&quot;</span>,
<a name="l01679"></a>01679                     (<span class="keywordtype">int</span>)(*insts_it)-&gt;destRegIdx(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>), prev_dest);
<a name="l01680"></a>01680             <a class="code" href="classBackEnd.html#af8d3f859e7c0dd9408ba99de6f415616">renameTable</a>[(*insts_it)-&gt;destRegIdx(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>)] = prev_dest;
<a name="l01681"></a>01681             ++freed_regs;
<a name="l01682"></a>01682         }
<a name="l01683"></a>01683 
<a name="l01684"></a>01684         (*insts_it)-&gt;clearDependents();
<a name="l01685"></a>01685 
<a name="l01686"></a>01686         <a class="code" href="classBackEnd.html#ae10a391d02ce1ef67ee13cd82b7d46e5">instList</a>.erase(insts_it--);
<a name="l01687"></a>01687         --<a class="code" href="classBackEnd.html#a358c879c68910efe5300c4515df35b6c">numInsts</a>;
<a name="l01688"></a>01688     }
<a name="l01689"></a>01689 
<a name="l01690"></a>01690     <a class="code" href="classBackEnd.html#a67c762418bb2017cb2dce5a0c94f0788">frontEnd</a>-&gt;<a class="code" href="classFrontEnd.html#a5562c5f14a79f595934df368f2e86d54">addFreeRegs</a>(freed_regs);
<a name="l01691"></a>01691 }
<a name="l01692"></a>01692 
<a name="l01693"></a>01693 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l01694"></a>01694 <span class="keywordtype">void</span>
<a name="l01695"></a>01695 <a class="code" href="classBackEnd.html">BackEnd&lt;Impl&gt;::squashFromXC</a>()
<a name="l01696"></a>01696 {
<a name="l01697"></a>01697     xcSquash = <span class="keyword">true</span>;
<a name="l01698"></a>01698 }
<a name="l01699"></a>01699 
<a name="l01700"></a>01700 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l01701"></a>01701 <span class="keywordtype">void</span>
<a name="l01702"></a><a class="code" href="classBackEnd.html#a05c89a1532adb13cc0632fc3bb600add">01702</a> <a class="code" href="classBackEnd.html#a05c89a1532adb13cc0632fc3bb600add">BackEnd&lt;Impl&gt;::squashDueToBranch</a>(<a class="code" href="namespaceThePipeline.html#a992959fefcd659c6ba422aa4de14677c">DynInstPtr</a> &amp;inst)
<a name="l01703"></a>01703 {
<a name="l01704"></a>01704     <span class="comment">// Update the branch predictor state I guess</span>
<a name="l01705"></a>01705     <a class="code" href="classBackEnd.html#a3c68c455d9207edd23ae3bcb7971e653">squash</a>(inst-&gt;seqNum);
<a name="l01706"></a>01706     <a class="code" href="classBackEnd.html#a67c762418bb2017cb2dce5a0c94f0788">frontEnd</a>-&gt;<a class="code" href="classFrontEnd.html#a2b2ddbfb364763ee4f0f337c79d436d9">squash</a>(inst-&gt;seqNum, inst-&gt;readNextPC(),
<a name="l01707"></a>01707                      <span class="keyword">true</span>, inst-&gt;mispredicted());
<a name="l01708"></a>01708 }
<a name="l01709"></a>01709 
<a name="l01710"></a>01710 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l01711"></a>01711 <span class="keywordtype">void</span>
<a name="l01712"></a><a class="code" href="classBackEnd.html#a5fcf443dc6ada1ab1936df923c3205d2">01712</a> <a class="code" href="classBackEnd.html#a5fcf443dc6ada1ab1936df923c3205d2">BackEnd&lt;Impl&gt;::squashDueToMemBlocked</a>(<a class="code" href="namespaceThePipeline.html#a992959fefcd659c6ba422aa4de14677c">DynInstPtr</a> &amp;inst)
<a name="l01713"></a>01713 {
<a name="l01714"></a>01714     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(IEW, <span class="stringliteral">&quot;Memory blocked, squashing load and younger insts, &quot;</span>
<a name="l01715"></a>01715             <span class="stringliteral">&quot;PC: %#x [sn:%i].\n&quot;</span>, inst-&gt;readPC(), inst-&gt;seqNum);
<a name="l01716"></a>01716 
<a name="l01717"></a>01717     <a class="code" href="classBackEnd.html#a3c68c455d9207edd23ae3bcb7971e653">squash</a>(inst-&gt;seqNum - 1);
<a name="l01718"></a>01718     <a class="code" href="classBackEnd.html#a67c762418bb2017cb2dce5a0c94f0788">frontEnd</a>-&gt;<a class="code" href="classFrontEnd.html#a2b2ddbfb364763ee4f0f337c79d436d9">squash</a>(inst-&gt;seqNum - 1, inst-&gt;readPC());
<a name="l01719"></a>01719 }
<a name="l01720"></a>01720 
<a name="l01721"></a>01721 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l01722"></a>01722 <span class="keywordtype">void</span>
<a name="l01723"></a><a class="code" href="classBackEnd.html#a71dcc69e5b01fa12b8ccd2dccdcc9917">01723</a> <a class="code" href="classBackEnd.html#a71dcc69e5b01fa12b8ccd2dccdcc9917">BackEnd&lt;Impl&gt;::fetchFault</a>(<a class="code" href="classRefCountingPtr.html">Fault</a> &amp;fault)
<a name="l01724"></a>01724 {
<a name="l01725"></a>01725     <a class="code" href="classBackEnd.html#a21a86a2f5f30b0f512909bdc8b2aae53">faultFromFetch</a> = fault;
<a name="l01726"></a>01726 }
<a name="l01727"></a>01727 
<a name="l01728"></a>01728 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l01729"></a>01729 <span class="keywordtype">void</span>
<a name="l01730"></a><a class="code" href="classBackEnd.html#a132db67a5c42af856da64e347e8284d8">01730</a> <a class="code" href="classBackEnd.html#a132db67a5c42af856da64e347e8284d8">BackEnd&lt;Impl&gt;::updateExeInstStats</a>(<a class="code" href="namespaceThePipeline.html#a992959fefcd659c6ba422aa4de14677c">DynInstPtr</a> &amp;inst)
<a name="l01731"></a>01731 {
<a name="l01732"></a>01732     <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = inst-&gt;threadNumber;
<a name="l01733"></a>01733 
<a name="l01734"></a>01734     <a class="code" href="classBackEnd.html#afdd7841e13784687ccb7c432189dca2f">exe_inst</a>[tid]++;
<a name="l01735"></a>01735 
<a name="l01736"></a>01736     <span class="comment">//</span>
<a name="l01737"></a>01737     <span class="comment">//  Control operations</span>
<a name="l01738"></a>01738     <span class="comment">//</span>
<a name="l01739"></a>01739     <span class="keywordflow">if</span> (inst-&gt;isControl())
<a name="l01740"></a>01740         <a class="code" href="classBackEnd.html#a2bffb8fee3fa396523a2b86dba12a606">exe_branches</a>[tid]++;
<a name="l01741"></a>01741 
<a name="l01742"></a>01742     <span class="comment">//</span>
<a name="l01743"></a>01743     <span class="comment">//  Memory operations</span>
<a name="l01744"></a>01744     <span class="comment">//</span>
<a name="l01745"></a>01745     <span class="keywordflow">if</span> (inst-&gt;isMemRef()) {
<a name="l01746"></a>01746         <a class="code" href="classBackEnd.html#a9c0474dab97b001394a40aed972f827a">exe_refs</a>[tid]++;
<a name="l01747"></a>01747 
<a name="l01748"></a>01748         <span class="keywordflow">if</span> (inst-&gt;isLoad())
<a name="l01749"></a>01749             <a class="code" href="classBackEnd.html#a07f469c547d380cda882b5ca10fc8813">exe_loads</a>[tid]++;
<a name="l01750"></a>01750     }
<a name="l01751"></a>01751 }
<a name="l01752"></a>01752 
<a name="l01753"></a>01753 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l01754"></a>01754 <span class="keywordtype">void</span>
<a name="l01755"></a><a class="code" href="classBackEnd.html#a5bbf266cb0cc97eed138c8fe0d2d76b6">01755</a> <a class="code" href="classBackEnd.html#a5bbf266cb0cc97eed138c8fe0d2d76b6">BackEnd&lt;Impl&gt;::updateComInstStats</a>(<a class="code" href="namespaceThePipeline.html#a992959fefcd659c6ba422aa4de14677c">DynInstPtr</a> &amp;inst)
<a name="l01756"></a>01756 {
<a name="l01757"></a>01757     <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid = inst-&gt;threadNumber;
<a name="l01758"></a>01758 
<a name="l01759"></a>01759     <span class="comment">//</span>
<a name="l01760"></a>01760     <span class="comment">//  Pick off the software prefetches</span>
<a name="l01761"></a>01761     <span class="comment">//</span>
<a name="l01762"></a>01762 <span class="preprocessor">#ifdef TARGET_ALPHA</span>
<a name="l01763"></a>01763 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (inst-&gt;isDataPrefetch()) {
<a name="l01764"></a>01764         <a class="code" href="classBackEnd.html#a2c3ec644af0af2970d0066b987427b46">stat_com_swp</a>[tid]++;
<a name="l01765"></a>01765     } <span class="keywordflow">else</span> {
<a name="l01766"></a>01766         <a class="code" href="classBackEnd.html#a3f56571c523bf46f2fe976188ad1e50c">stat_com_inst</a>[tid]++;
<a name="l01767"></a>01767     }
<a name="l01768"></a>01768 <span class="preprocessor">#else</span>
<a name="l01769"></a>01769 <span class="preprocessor"></span>    <a class="code" href="classBackEnd.html#a3f56571c523bf46f2fe976188ad1e50c">stat_com_inst</a>[tid]++;
<a name="l01770"></a>01770 <span class="preprocessor">#endif</span>
<a name="l01771"></a>01771 <span class="preprocessor"></span>
<a name="l01772"></a>01772     <span class="comment">//</span>
<a name="l01773"></a>01773     <span class="comment">//  Control Instructions</span>
<a name="l01774"></a>01774     <span class="comment">//</span>
<a name="l01775"></a>01775     <span class="keywordflow">if</span> (inst-&gt;isControl())
<a name="l01776"></a>01776         <a class="code" href="classBackEnd.html#a3368cb0b59cef9b4542f17661835022f">stat_com_branches</a>[tid]++;
<a name="l01777"></a>01777 
<a name="l01778"></a>01778     <span class="comment">//</span>
<a name="l01779"></a>01779     <span class="comment">//  Memory references</span>
<a name="l01780"></a>01780     <span class="comment">//</span>
<a name="l01781"></a>01781     <span class="keywordflow">if</span> (inst-&gt;isMemRef()) {
<a name="l01782"></a>01782         <a class="code" href="classBackEnd.html#a541fdbe722e4ddbdcca7994625162235">stat_com_refs</a>[tid]++;
<a name="l01783"></a>01783 
<a name="l01784"></a>01784         <span class="keywordflow">if</span> (inst-&gt;isLoad()) {
<a name="l01785"></a>01785             <a class="code" href="classBackEnd.html#a998922e22a0a08c55cf2f5ed99ad79cc">stat_com_loads</a>[tid]++;
<a name="l01786"></a>01786         }
<a name="l01787"></a>01787     }
<a name="l01788"></a>01788 
<a name="l01789"></a>01789     <span class="keywordflow">if</span> (inst-&gt;isMemBarrier()) {
<a name="l01790"></a>01790         <a class="code" href="classBackEnd.html#a2e29921a3b4c4ffb52ceef970898e906">stat_com_membars</a>[tid]++;
<a name="l01791"></a>01791     }
<a name="l01792"></a>01792 }
<a name="l01793"></a>01793 
<a name="l01794"></a>01794 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Impl&gt;
<a name="l01795"></a>01795 <span class="keywordtype">void</span>
<a name="l01796"></a><a class="code" href="classBackEnd.html#a80587b4fe043bbe1995536cb3b361588">01796</a> <a class="code" href="classBackEnd.html#a80587b4fe043bbe1995536cb3b361588">BackEnd&lt;Impl&gt;::dumpInsts</a>()
<a name="l01797"></a>01797 {
<a name="l01798"></a>01798     <span class="keywordtype">int</span> num = 0;
<a name="l01799"></a>01799     <span class="keywordtype">int</span> valid_num = 0;
<a name="l01800"></a>01800 
<a name="l01801"></a>01801     <a class="code" href="classBackEnd.html#a4da46d72d68fcd5bfe65dc701c358379">InstListIt</a> inst_list_it = <a class="code" href="classBackEnd.html#ae10a391d02ce1ef67ee13cd82b7d46e5">instList</a>.begin();
<a name="l01802"></a>01802 
<a name="l01803"></a>01803     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Inst list size: %i\n&quot;</span>, <a class="code" href="classBackEnd.html#ae10a391d02ce1ef67ee13cd82b7d46e5">instList</a>.size());
<a name="l01804"></a>01804 
<a name="l01805"></a>01805     <span class="keywordflow">while</span> (inst_list_it != <a class="code" href="classBackEnd.html#ae10a391d02ce1ef67ee13cd82b7d46e5">instList</a>.end())
<a name="l01806"></a>01806     {
<a name="l01807"></a>01807         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Instruction:%i\n&quot;</span>,
<a name="l01808"></a>01808                 num);
<a name="l01809"></a>01809         <span class="keywordflow">if</span> (!(*inst_list_it)-&gt;isSquashed()) {
<a name="l01810"></a>01810             <span class="keywordflow">if</span> (!(*inst_list_it)-&gt;isIssued()) {
<a name="l01811"></a>01811                 ++valid_num;
<a name="l01812"></a>01812                 <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Count:%i\n&quot;</span>, valid_num);
<a name="l01813"></a>01813             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*inst_list_it)-&gt;isMemRef() &amp;&amp;
<a name="l01814"></a>01814                        !(*inst_list_it)-&gt;memOpDone) {
<a name="l01815"></a>01815                 <span class="comment">// Loads that have not been marked as executed still count</span>
<a name="l01816"></a>01816                 <span class="comment">// towards the total instructions.</span>
<a name="l01817"></a>01817                 ++valid_num;
<a name="l01818"></a>01818                 <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Count:%i\n&quot;</span>, valid_num);
<a name="l01819"></a>01819             }
<a name="l01820"></a>01820         }
<a name="l01821"></a>01821 
<a name="l01822"></a>01822         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;PC:%#x\n[sn:%lli]\n[tid:%i]\n&quot;</span>
<a name="l01823"></a>01823                 <span class="stringliteral">&quot;Issued:%i\nSquashed:%i\n&quot;</span>,
<a name="l01824"></a>01824                 (*inst_list_it)-&gt;readPC(),
<a name="l01825"></a>01825                 (*inst_list_it)-&gt;seqNum,
<a name="l01826"></a>01826                 (*inst_list_it)-&gt;threadNumber,
<a name="l01827"></a>01827                 (*inst_list_it)-&gt;isIssued(),
<a name="l01828"></a>01828                 (*inst_list_it)-&gt;isSquashed());
<a name="l01829"></a>01829 
<a name="l01830"></a>01830         <span class="keywordflow">if</span> ((*inst_list_it)-&gt;isMemRef()) {
<a name="l01831"></a>01831             <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;MemOpDone:%i\n&quot;</span>, (*inst_list_it)-&gt;memOpDone);
<a name="l01832"></a>01832         }
<a name="l01833"></a>01833 
<a name="l01834"></a>01834         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01835"></a>01835 
<a name="l01836"></a>01836         inst_list_it++;
<a name="l01837"></a>01837         ++num;
<a name="l01838"></a>01838     }
<a name="l01839"></a>01839 
<a name="l01840"></a>01840     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Dispatch list size: %i\n&quot;</span>, <a class="code" href="classBackEnd.html#a1e13c801cafc8d7e052b2f999c89ad85">dispatch</a>.size());
<a name="l01841"></a>01841 
<a name="l01842"></a>01842     inst_list_it = <a class="code" href="classBackEnd.html#a1e13c801cafc8d7e052b2f999c89ad85">dispatch</a>.begin();
<a name="l01843"></a>01843 
<a name="l01844"></a>01844     <span class="keywordflow">while</span> (inst_list_it != <a class="code" href="classBackEnd.html#a1e13c801cafc8d7e052b2f999c89ad85">dispatch</a>.end())
<a name="l01845"></a>01845     {
<a name="l01846"></a>01846         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Instruction:%i\n&quot;</span>,
<a name="l01847"></a>01847                 num);
<a name="l01848"></a>01848         <span class="keywordflow">if</span> (!(*inst_list_it)-&gt;isSquashed()) {
<a name="l01849"></a>01849             <span class="keywordflow">if</span> (!(*inst_list_it)-&gt;isIssued()) {
<a name="l01850"></a>01850                 ++valid_num;
<a name="l01851"></a>01851                 <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Count:%i\n&quot;</span>, valid_num);
<a name="l01852"></a>01852             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*inst_list_it)-&gt;isMemRef() &amp;&amp;
<a name="l01853"></a>01853                        !(*inst_list_it)-&gt;memOpDone) {
<a name="l01854"></a>01854                 <span class="comment">// Loads that have not been marked as executed still count</span>
<a name="l01855"></a>01855                 <span class="comment">// towards the total instructions.</span>
<a name="l01856"></a>01856                 ++valid_num;
<a name="l01857"></a>01857                 <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Count:%i\n&quot;</span>, valid_num);
<a name="l01858"></a>01858             }
<a name="l01859"></a>01859         }
<a name="l01860"></a>01860 
<a name="l01861"></a>01861         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;PC:%#x\n[sn:%lli]\n[tid:%i]\n&quot;</span>
<a name="l01862"></a>01862                 <span class="stringliteral">&quot;Issued:%i\nSquashed:%i\n&quot;</span>,
<a name="l01863"></a>01863                 (*inst_list_it)-&gt;readPC(),
<a name="l01864"></a>01864                 (*inst_list_it)-&gt;seqNum,
<a name="l01865"></a>01865                 (*inst_list_it)-&gt;threadNumber,
<a name="l01866"></a>01866                 (*inst_list_it)-&gt;isIssued(),
<a name="l01867"></a>01867                 (*inst_list_it)-&gt;isSquashed());
<a name="l01868"></a>01868 
<a name="l01869"></a>01869         <span class="keywordflow">if</span> ((*inst_list_it)-&gt;isMemRef()) {
<a name="l01870"></a>01870             <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;MemOpDone:%i\n&quot;</span>, (*inst_list_it)-&gt;memOpDone);
<a name="l01871"></a>01871         }
<a name="l01872"></a>01872 
<a name="l01873"></a>01873         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01874"></a>01874 
<a name="l01875"></a>01875         inst_list_it++;
<a name="l01876"></a>01876         ++num;
<a name="l01877"></a>01877     }
<a name="l01878"></a>01878 
<a name="l01879"></a>01879     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Writeback list size: %i\n&quot;</span>, <a class="code" href="classBackEnd.html#ae4b76f4612be07d13b349e13ee9dfa16">writeback</a>.size());
<a name="l01880"></a>01880 
<a name="l01881"></a>01881     inst_list_it = <a class="code" href="classBackEnd.html#ae4b76f4612be07d13b349e13ee9dfa16">writeback</a>.begin();
<a name="l01882"></a>01882 
<a name="l01883"></a>01883     <span class="keywordflow">while</span> (inst_list_it != <a class="code" href="classBackEnd.html#ae4b76f4612be07d13b349e13ee9dfa16">writeback</a>.end())
<a name="l01884"></a>01884     {
<a name="l01885"></a>01885         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Instruction:%i\n&quot;</span>,
<a name="l01886"></a>01886                 num);
<a name="l01887"></a>01887         <span class="keywordflow">if</span> (!(*inst_list_it)-&gt;isSquashed()) {
<a name="l01888"></a>01888             <span class="keywordflow">if</span> (!(*inst_list_it)-&gt;isIssued()) {
<a name="l01889"></a>01889                 ++valid_num;
<a name="l01890"></a>01890                 <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Count:%i\n&quot;</span>, valid_num);
<a name="l01891"></a>01891             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*inst_list_it)-&gt;isMemRef() &amp;&amp;
<a name="l01892"></a>01892                        !(*inst_list_it)-&gt;memOpDone) {
<a name="l01893"></a>01893                 <span class="comment">// Loads that have not been marked as executed still count</span>
<a name="l01894"></a>01894                 <span class="comment">// towards the total instructions.</span>
<a name="l01895"></a>01895                 ++valid_num;
<a name="l01896"></a>01896                 <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Count:%i\n&quot;</span>, valid_num);
<a name="l01897"></a>01897             }
<a name="l01898"></a>01898         }
<a name="l01899"></a>01899 
<a name="l01900"></a>01900         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;PC:%#x\n[sn:%lli]\n[tid:%i]\n&quot;</span>
<a name="l01901"></a>01901                 <span class="stringliteral">&quot;Issued:%i\nSquashed:%i\n&quot;</span>,
<a name="l01902"></a>01902                 (*inst_list_it)-&gt;readPC(),
<a name="l01903"></a>01903                 (*inst_list_it)-&gt;seqNum,
<a name="l01904"></a>01904                 (*inst_list_it)-&gt;threadNumber,
<a name="l01905"></a>01905                 (*inst_list_it)-&gt;isIssued(),
<a name="l01906"></a>01906                 (*inst_list_it)-&gt;isSquashed());
<a name="l01907"></a>01907 
<a name="l01908"></a>01908         <span class="keywordflow">if</span> ((*inst_list_it)-&gt;isMemRef()) {
<a name="l01909"></a>01909             <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;MemOpDone:%i\n&quot;</span>, (*inst_list_it)-&gt;memOpDone);
<a name="l01910"></a>01910         }
<a name="l01911"></a>01911 
<a name="l01912"></a>01912         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01913"></a>01913 
<a name="l01914"></a>01914         inst_list_it++;
<a name="l01915"></a>01915         ++num;
<a name="l01916"></a>01916     }
<a name="l01917"></a>01917 }
<a name="l01918"></a>01918 
<a name="l01919"></a>01919 <span class="preprocessor">#endif//__CPU_OZONE_BACK_END_IMPL_HH__</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
