\hypertarget{classMalta}{
\section{クラス Malta}
\label{classMalta}\index{Malta@{Malta}}
}


{\ttfamily \#include $<$malta.hh$>$}Maltaに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=4cm]{classMalta}
\end{center}
\end{figure}
\subsection*{構成}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classMalta_1_1Malta}{Malta}
\item 
class \hyperlink{classMalta_1_1MaltaCChip}{MaltaCChip}
\item 
class \hyperlink{classMalta_1_1MaltaIO}{MaltaIO}
\item 
class \hyperlink{classMalta_1_1MaltaPChip}{MaltaPChip}
\end{DoxyCompactItemize}
\subsection*{Public 型}
\begin{DoxyCompactItemize}
\item 
typedef MaltaParams \hyperlink{classMalta_a189ad6fd96fd77d2ea4e32ba0a9e5298}{Params}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classMalta_a737e6039fde9f614aee1026aa86405fb}{Malta} (const \hyperlink{classMalta_a189ad6fd96fd77d2ea4e32ba0a9e5298}{Params} $\ast$p)
\item 
virtual void \hyperlink{classMalta_a5b278cebc0a62bc2195edf27f059ab1a}{postConsoleInt} ()
\item 
virtual void \hyperlink{classMalta_ad38e46034c079c8e765d3ac7eb99337d}{clearConsoleInt} ()
\item 
virtual void \hyperlink{classMalta_a545d1445357706d7259aa73104f44222}{postPciInt} (int line)
\item 
virtual void \hyperlink{classMalta_a0d98ea2b236bb883fa15d63a59a2ec9e}{clearPciInt} (int line)
\item 
virtual \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{classMalta_a87078b3d3a28ae134f6736337e90dac3}{pciToDma} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} pciAddr) const 
\item 
\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{classMalta_a5b8797a83289cb5fd895c9a5dc7eae6f}{calcPciConfigAddr} (int bus, int dev, int func)
\item 
\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{classMalta_a83afd16479598cfaeb035fd30eeedd8b}{calcPciIOAddr} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} addr)
\item 
\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{classMalta_aa2acd9bf04ba56b380e7812ce29971b5}{calcPciMemAddr} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} addr)
\item 
virtual void \hyperlink{classMalta_a53e036786d17361be4c7320d39c99b84}{serialize} (std::ostream \&os)
\item 
virtual void \hyperlink{classMalta_af22e5d6d660b97db37003ac61ac4ee49}{unserialize} (\hyperlink{classCheckpoint}{Checkpoint} $\ast$cp, const std::string \&section)
\end{DoxyCompactItemize}
\subsection*{Public 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classSystem}{System} $\ast$ \hyperlink{classMalta_af27ccd765f13a4b7bd119dc7579e2746}{system}
\item 
\hyperlink{classMalta_1_1MaltaIO}{MaltaIO} $\ast$ \hyperlink{classMalta_aecab915d0de4a8ce102b5d7904f9cb13}{io}
\item 
\hyperlink{classMalta_1_1MaltaCChip}{MaltaCChip} $\ast$ \hyperlink{classMalta_a5d34b1cefc8f42c4e48ca7132a5ff9ce}{cchip}
\item 
\hyperlink{classMalta_1_1MaltaPChip}{MaltaPChip} $\ast$ \hyperlink{classMalta_ac4b4664e7d3bda2f7f4af6fdfc5e246c}{pchip}
\item 
int \hyperlink{classMalta_a8b0ff0114edf7682d27853102d207c45}{intr\_\-sum\_\-type} \mbox{[}\hyperlink{classMalta_ab15ce4af0fe2c47746a30bafa34ced51}{Malta::Max\_\-CPUs}\mbox{]}
\item 
int \hyperlink{classMalta_abe53041a06886c8b2519264101cabfa5}{ipi\_\-pending} \mbox{[}\hyperlink{classMalta_ab15ce4af0fe2c47746a30bafa34ced51}{Malta::Max\_\-CPUs}\mbox{]}
\end{DoxyCompactItemize}
\subsection*{Static Public 変数}
\begin{DoxyCompactItemize}
\item 
static const int \hyperlink{classMalta_ab15ce4af0fe2c47746a30bafa34ced51}{Max\_\-CPUs} = 64
\end{DoxyCompactItemize}


\subsection{説明}
Top level class for \hyperlink{classMalta}{Malta} Chipset emulation. This structure just contains pointers to all the children so the children can commnicate to do the read work 

\subsection{型定義}
\hypertarget{classMalta_a189ad6fd96fd77d2ea4e32ba0a9e5298}{
\index{Malta@{Malta}!Params@{Params}}
\index{Params@{Params}!Malta@{Malta}}
\subsubsection[{Params}]{\setlength{\rightskip}{0pt plus 5cm}typedef MaltaParams {\bf Params}}}
\label{classMalta_a189ad6fd96fd77d2ea4e32ba0a9e5298}
Constructor for the \hyperlink{classMalta}{Malta} Class. 
\begin{DoxyParams}{引数}
\item[{\em name}]name of the object \item[{\em s}]system the object belongs to \item[{\em intctrl}]pointer to the interrupt controller \end{DoxyParams}


\hyperlink{classPlatform_af4e77eaf2602e4808deef7d1ba95e579}{Platform}を再定義しています。

\subsection{コンストラクタとデストラクタ}
\hypertarget{classMalta_a737e6039fde9f614aee1026aa86405fb}{
\index{Malta@{Malta}!Malta@{Malta}}
\index{Malta@{Malta}!Malta@{Malta}}
\subsubsection[{Malta}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Malta} (const {\bf Params} $\ast$ {\em p})}}
\label{classMalta_a737e6039fde9f614aee1026aa86405fb}



\begin{DoxyCode}
55     : Platform(p), system(p->system)
56 {
57     for (int i = 0; i < Malta::Max_CPUs; i++)
58         intr_sum_type[i] = 0;
59 }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classMalta_a5b8797a83289cb5fd895c9a5dc7eae6f}{
\index{Malta@{Malta}!calcPciConfigAddr@{calcPciConfigAddr}}
\index{calcPciConfigAddr@{calcPciConfigAddr}!Malta@{Malta}}
\subsubsection[{calcPciConfigAddr}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Addr} calcPciConfigAddr (int {\em bus}, \/  int {\em dev}, \/  int {\em func})\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}
\label{classMalta_a5b8797a83289cb5fd895c9a5dc7eae6f}


\hyperlink{classPlatform_a4a2bdce1a8794dd3ea6ca12b36320433}{Platform}を実装しています。


\begin{DoxyCode}
119     {
120         panic("Need implementation\n");
121         M5_DUMMY_RETURN
122     }
\end{DoxyCode}
\hypertarget{classMalta_a83afd16479598cfaeb035fd30eeedd8b}{
\index{Malta@{Malta}!calcPciIOAddr@{calcPciIOAddr}}
\index{calcPciIOAddr@{calcPciIOAddr}!Malta@{Malta}}
\subsubsection[{calcPciIOAddr}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Addr} calcPciIOAddr ({\bf Addr} {\em addr})\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}
\label{classMalta_a83afd16479598cfaeb035fd30eeedd8b}


\hyperlink{classPlatform_a3d1d55996e865ab1b65c732496c08b00}{Platform}を実装しています。


\begin{DoxyCode}
126     {
127         panic("Need implementation\n");
128         M5_DUMMY_RETURN
129     }
\end{DoxyCode}
\hypertarget{classMalta_aa2acd9bf04ba56b380e7812ce29971b5}{
\index{Malta@{Malta}!calcPciMemAddr@{calcPciMemAddr}}
\index{calcPciMemAddr@{calcPciMemAddr}!Malta@{Malta}}
\subsubsection[{calcPciMemAddr}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Addr} calcPciMemAddr ({\bf Addr} {\em addr})\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}
\label{classMalta_aa2acd9bf04ba56b380e7812ce29971b5}


\hyperlink{classPlatform_a303d8161e77b31b8425cb320562a54b2}{Platform}を実装しています。


\begin{DoxyCode}
133     {
134         panic("Need implementation\n");
135         M5_DUMMY_RETURN
136     }
\end{DoxyCode}
\hypertarget{classMalta_ad38e46034c079c8e765d3ac7eb99337d}{
\index{Malta@{Malta}!clearConsoleInt@{clearConsoleInt}}
\index{clearConsoleInt@{clearConsoleInt}!Malta@{Malta}}
\subsubsection[{clearConsoleInt}]{\setlength{\rightskip}{0pt plus 5cm}void clearConsoleInt ()\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classMalta_ad38e46034c079c8e765d3ac7eb99337d}
Clear a posted CPU interrupt (id=55) 

\hyperlink{classPlatform_aaf1bfcf0f5ac95c6a9d1607172a5a29e}{Platform}を実装しています。


\begin{DoxyCode}
70 {
71     //FIXME: implement clearConsoleInt()
72     io->clearIntr(0x10/*HW4*/);
73 }
\end{DoxyCode}
\hypertarget{classMalta_a0d98ea2b236bb883fa15d63a59a2ec9e}{
\index{Malta@{Malta}!clearPciInt@{clearPciInt}}
\index{clearPciInt@{clearPciInt}!Malta@{Malta}}
\subsubsection[{clearPciInt}]{\setlength{\rightskip}{0pt plus 5cm}void clearPciInt (int {\em line})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classMalta_a0d98ea2b236bb883fa15d63a59a2ec9e}
Clear a posted PCI-\/$>$CPU interrupt 

\hyperlink{classPlatform_a0d98ea2b236bb883fa15d63a59a2ec9e}{Platform}を再定義しています。


\begin{DoxyCode}
83 {
84     panic("Malta::clearPciInt() has not been implemented.");
85 }
\end{DoxyCode}
\hypertarget{classMalta_a87078b3d3a28ae134f6736337e90dac3}{
\index{Malta@{Malta}!pciToDma@{pciToDma}}
\index{pciToDma@{pciToDma}!Malta@{Malta}}
\subsubsection[{pciToDma}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Addr} pciToDma ({\bf Addr} {\em pciAddr}) const\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classMalta_a87078b3d3a28ae134f6736337e90dac3}


\hyperlink{classPlatform_a87078b3d3a28ae134f6736337e90dac3}{Platform}を再定義しています。


\begin{DoxyCode}
89 {
90     panic("Malta::pciToDma() has not been implemented.");
91 }
\end{DoxyCode}
\hypertarget{classMalta_a5b278cebc0a62bc2195edf27f059ab1a}{
\index{Malta@{Malta}!postConsoleInt@{postConsoleInt}}
\index{postConsoleInt@{postConsoleInt}!Malta@{Malta}}
\subsubsection[{postConsoleInt}]{\setlength{\rightskip}{0pt plus 5cm}void postConsoleInt ()\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classMalta_a5b278cebc0a62bc2195edf27f059ab1a}
Cause the cpu to post a serial interrupt to the CPU. 

\hyperlink{classPlatform_a24ab6780a0fa391b19980027355ba467}{Platform}を実装しています。


\begin{DoxyCode}
63 {
64     //see {Linux-src}/arch/mips/mips-boards/sim/sim_setup.c
65     io->postIntr(0x10/*HW4*/);
66 }
\end{DoxyCode}
\hypertarget{classMalta_a545d1445357706d7259aa73104f44222}{
\index{Malta@{Malta}!postPciInt@{postPciInt}}
\index{postPciInt@{postPciInt}!Malta@{Malta}}
\subsubsection[{postPciInt}]{\setlength{\rightskip}{0pt plus 5cm}void postPciInt (int {\em line})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classMalta_a545d1445357706d7259aa73104f44222}
Cause the chipset to post a cpi interrupt to the CPU. 

\hyperlink{classPlatform_a545d1445357706d7259aa73104f44222}{Platform}を再定義しています。


\begin{DoxyCode}
77 {
78     panic("Malta::postPciInt() has not been implemented.");
79 }
\end{DoxyCode}
\hypertarget{classMalta_a53e036786d17361be4c7320d39c99b84}{
\index{Malta@{Malta}!serialize@{serialize}}
\index{serialize@{serialize}!Malta@{Malta}}
\subsubsection[{serialize}]{\setlength{\rightskip}{0pt plus 5cm}void serialize (std::ostream \& {\em os})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classMalta_a53e036786d17361be4c7320d39c99b84}
Serialize this object to the given output stream. 
\begin{DoxyParams}{引数}
\item[{\em os}]The stream to serialize to. \end{DoxyParams}


\hyperlink{classSerializable_ad6272f80ae37e8331e3969b3f072a801}{Serializable}を再定義しています。


\begin{DoxyCode}
95 {
96     SERIALIZE_ARRAY(intr_sum_type, Malta::Max_CPUs);
97 }
\end{DoxyCode}
\hypertarget{classMalta_af22e5d6d660b97db37003ac61ac4ee49}{
\index{Malta@{Malta}!unserialize@{unserialize}}
\index{unserialize@{unserialize}!Malta@{Malta}}
\subsubsection[{unserialize}]{\setlength{\rightskip}{0pt plus 5cm}void unserialize ({\bf Checkpoint} $\ast$ {\em cp}, \/  const std::string \& {\em section})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classMalta_af22e5d6d660b97db37003ac61ac4ee49}
Reconstruct the state of this object from a checkpoint. 
\begin{DoxyParams}{引数}
\item[{\em \hyperlink{namespacecp}{cp}}]The checkpoint use. \item[{\em section}]The section name of this object \end{DoxyParams}


\hyperlink{classSerializable_af100c4e9feabf3cd918619c88c718387}{Serializable}を再定義しています。


\begin{DoxyCode}
101 {
102     UNSERIALIZE_ARRAY(intr_sum_type, Malta::Max_CPUs);
103 }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classMalta_a5d34b1cefc8f42c4e48ca7132a5ff9ce}{
\index{Malta@{Malta}!cchip@{cchip}}
\index{cchip@{cchip}!Malta@{Malta}}
\subsubsection[{cchip}]{\setlength{\rightskip}{0pt plus 5cm}{\bf MaltaCChip}$\ast$ {\bf cchip}}}
\label{classMalta_a5d34b1cefc8f42c4e48ca7132a5ff9ce}
Pointer to the \hyperlink{classMalta}{Malta} CChip. The chip contains some configuration information and all the interrupt mask and status registers \hypertarget{classMalta_a8b0ff0114edf7682d27853102d207c45}{
\index{Malta@{Malta}!intr\_\-sum\_\-type@{intr\_\-sum\_\-type}}
\index{intr\_\-sum\_\-type@{intr\_\-sum\_\-type}!Malta@{Malta}}
\subsubsection[{intr\_\-sum\_\-type}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf intr\_\-sum\_\-type}\mbox{[}{\bf Malta::Max\_\-CPUs}\mbox{]}}}
\label{classMalta_a8b0ff0114edf7682d27853102d207c45}
\hypertarget{classMalta_aecab915d0de4a8ce102b5d7904f9cb13}{
\index{Malta@{Malta}!io@{io}}
\index{io@{io}!Malta@{Malta}}
\subsubsection[{io}]{\setlength{\rightskip}{0pt plus 5cm}{\bf MaltaIO}$\ast$ {\bf io}}}
\label{classMalta_aecab915d0de4a8ce102b5d7904f9cb13}
Pointer to the \hyperlink{classMalta_1_1MaltaIO}{MaltaIO} device which has the RTC \hypertarget{classMalta_abe53041a06886c8b2519264101cabfa5}{
\index{Malta@{Malta}!ipi\_\-pending@{ipi\_\-pending}}
\index{ipi\_\-pending@{ipi\_\-pending}!Malta@{Malta}}
\subsubsection[{ipi\_\-pending}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf ipi\_\-pending}\mbox{[}{\bf Malta::Max\_\-CPUs}\mbox{]}}}
\label{classMalta_abe53041a06886c8b2519264101cabfa5}
\hypertarget{classMalta_ab15ce4af0fe2c47746a30bafa34ced51}{
\index{Malta@{Malta}!Max\_\-CPUs@{Max\_\-CPUs}}
\index{Max\_\-CPUs@{Max\_\-CPUs}!Malta@{Malta}}
\subsubsection[{Max\_\-CPUs}]{\setlength{\rightskip}{0pt plus 5cm}const int {\bf Max\_\-CPUs} = 64\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classMalta_ab15ce4af0fe2c47746a30bafa34ced51}
Max number of CPUs in a \hyperlink{classMalta}{Malta} \hypertarget{classMalta_ac4b4664e7d3bda2f7f4af6fdfc5e246c}{
\index{Malta@{Malta}!pchip@{pchip}}
\index{pchip@{pchip}!Malta@{Malta}}
\subsubsection[{pchip}]{\setlength{\rightskip}{0pt plus 5cm}{\bf MaltaPChip}$\ast$ {\bf pchip}}}
\label{classMalta_ac4b4664e7d3bda2f7f4af6fdfc5e246c}
Pointer to the \hyperlink{classMalta}{Malta} PChip. The pchip is the interface to the PCI bus, in our case it does not have to do much. \hypertarget{classMalta_af27ccd765f13a4b7bd119dc7579e2746}{
\index{Malta@{Malta}!system@{system}}
\index{system@{system}!Malta@{Malta}}
\subsubsection[{system}]{\setlength{\rightskip}{0pt plus 5cm}{\bf System}$\ast$ {\bf system}}}
\label{classMalta_af27ccd765f13a4b7bd119dc7579e2746}
Pointer to the system 

\hyperlink{classPlatform_af27ccd765f13a4b7bd119dc7579e2746}{Platform}を再定義しています。

このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
dev/mips/\hyperlink{malta_8hh}{malta.hh}\item 
dev/mips/\hyperlink{malta_8cc}{malta.cc}\end{DoxyCompactItemize}
