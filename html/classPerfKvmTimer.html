<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス PerfKvmTimer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>クラス PerfKvmTimer</h1><!-- doxytag: class="PerfKvmTimer" --><!-- doxytag: inherits="BaseKvmTimer" -->
<p><code>#include &lt;<a class="el" href="timer_8hh_source.html">timer.hh</a>&gt;</code></p>
<div class="dynheader">
PerfKvmTimerに対する継承グラフ</div>
<div class="dynsection">
 <div class="center">
  <img src="classPerfKvmTimer.gif" usemap="#PerfKvmTimer_map" alt=""/>
  <map id="PerfKvmTimer_map" name="PerfKvmTimer_map">
<area href="classBaseKvmTimer.html" alt="BaseKvmTimer" shape="rect" coords="0,0,95,24"/>
</map>
 </div>
</div>

<p><a href="classPerfKvmTimer-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmTimer.html#a9435bd1cf661fdb4e35b2a733d94f92d">PerfKvmTimer</a> (<a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a> &amp;ctr, int <a class="el" href="classBaseKvmTimer.html#a68acd751895efa9ac5a6461017f1d2d8">signo</a>, float <a class="el" href="classBaseKvmTimer.html#a0ef366aa4bbbcdc2f7eeb7fcd3962dde">hostFactor</a>, <a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="el" href="classBaseKvmTimer.html#af880b55be2bf83ac65eb9b0abe62ae49">hostFreq</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmTimer.html#a0095b8dff4f2db7d8d44674689127373">~PerfKvmTimer</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmTimer.html#a5041ff590d50fcb1f0f5149b2e7eb4bb">arm</a> (<a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> ticks)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmTimer.html#a9882bfa120cede575461197f2a13cd8b">disarm</a> ()</td></tr>
<tr><td colspan="2"><h2>Protected メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmTimer.html#a02798cc202bebceef3ff0e3ff3d7b5b8">calcResolution</a> ()</td></tr>
<tr><td colspan="2"><h2>Private 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmTimer.html#af183dc3e77e7fc3603a0d4ff4a8fb65d">hwOverflow</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>説明</h2>
<p>PerfEvent based timer using the host's CPU cycle counter.</p>
<dl class="warning"><dt><b>警告:</b></dt><dd>There is a known problem in some versions of the PerfEvent API that prevents the counter overflow period from being updated reliably, which might break this timer. See <a class="el" href="classPerfKvmCounter.html#a08ec1e452f32c7b0e573d63f126a2bbf">PerfKvmCounter::period()</a> for details. </dd></dl>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="a9435bd1cf661fdb4e35b2a733d94f92d"></a><!-- doxytag: member="PerfKvmTimer::PerfKvmTimer" ref="a9435bd1cf661fdb4e35b2a733d94f92d" args="(PerfKvmCounter &amp;ctr, int signo, float hostFactor, Tick hostFreq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPerfKvmTimer.html">PerfKvmTimer</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>ctr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>signo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>hostFactor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td>
          <td class="paramname"> <em>hostFreq</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create a timer that uses an existing hardware cycle counter.</p>
<dl class="note"><dt><b>覚え書き:</b></dt><dd>The performance counter must be configured for overflow sampling, which in practice means that it must have a non-zero sample period. The initial sample period is ignored since period will be updated when <a class="el" href="classPerfKvmTimer.html#a5041ff590d50fcb1f0f5149b2e7eb4bb">arm()</a> is called.</dd></dl>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ctr</em>&nbsp;</td><td>Attached performance counter configured for overflow reporting. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>signo</em>&nbsp;</td><td>Signal to deliver </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hostFactor</em>&nbsp;</td><td>Performance scaling factor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hostFreq</em>&nbsp;</td><td><a class="el" href="classClock.html">Clock</a> frequency of the host </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00161"></a>00161     : <a class="code" href="classBaseKvmTimer.html#a0593c66dc86ef9aeff3553a78e114231">BaseKvmTimer</a>(<a class="code" href="classBaseKvmTimer.html#a68acd751895efa9ac5a6461017f1d2d8">signo</a>, <a class="code" href="classBaseKvmTimer.html#a0ef366aa4bbbcdc2f7eeb7fcd3962dde">hostFactor</a>, <a class="code" href="classBaseKvmTimer.html#af880b55be2bf83ac65eb9b0abe62ae49">hostFreq</a>),
<a name="l00162"></a>00162       <a class="code" href="classPerfKvmTimer.html#af183dc3e77e7fc3603a0d4ff4a8fb65d">hwOverflow</a>(ctr)
<a name="l00163"></a>00163 {
<a name="l00164"></a>00164     <a class="code" href="classPerfKvmTimer.html#af183dc3e77e7fc3603a0d4ff4a8fb65d">hwOverflow</a>.<a class="code" href="classPerfKvmCounter.html#adcb1192220b2f38f9e05b5c8a0f3ab30">enableSignals</a>(<a class="code" href="classBaseKvmTimer.html#a68acd751895efa9ac5a6461017f1d2d8">signo</a>);
<a name="l00165"></a>00165 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0095b8dff4f2db7d8d44674689127373"></a><!-- doxytag: member="PerfKvmTimer::~PerfKvmTimer" ref="a0095b8dff4f2db7d8d44674689127373" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classPerfKvmTimer.html">PerfKvmTimer</a> </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00168"></a>00168 {
<a name="l00169"></a>00169 }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="a5041ff590d50fcb1f0f5149b2e7eb4bb"></a><!-- doxytag: member="PerfKvmTimer::arm" ref="a5041ff590d50fcb1f0f5149b2e7eb4bb" args="(Tick ticks)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void arm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td>
          <td class="paramname"> <em>ticks</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Arm the timer so that it fires after a certain number of ticks.</p>
<dl class="note"><dt><b>覚え書き:</b></dt><dd>A timer implementation is free to convert between simulation ticks and virtualized time using any method it chooses. The accuracy of the timer therefore depends on what it measures, an accurate timer implementation should measure the number of cycles or instructions executed in the guest. If such counters are unavailable, it may fallback to wall clock time.</dd></dl>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ticks</em>&nbsp;</td><td>Number of ticks until the timer fires </td></tr>
  </table>
  </dd>
</dl>

<p><a class="el" href="classBaseKvmTimer.html#af6a92c8cd2abd0bf8699cbefe1257074">BaseKvmTimer</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00173"></a>00173 {
<a name="l00174"></a>00174     <a class="code" href="classPerfKvmTimer.html#af183dc3e77e7fc3603a0d4ff4a8fb65d">hwOverflow</a>.<a class="code" href="classPerfKvmCounter.html#a08ec1e452f32c7b0e573d63f126a2bbf">period</a>(<a class="code" href="classBaseKvmTimer.html#ab987095ba5c55b83638d48c3b69693d4">hostCycles</a>(ticks));
<a name="l00175"></a>00175     <a class="code" href="classPerfKvmTimer.html#af183dc3e77e7fc3603a0d4ff4a8fb65d">hwOverflow</a>.<a class="code" href="classPerfKvmCounter.html#a6af1a045627841dd5b66f15c28cb48e7">refresh</a>(1);
<a name="l00176"></a>00176 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a02798cc202bebceef3ff0e3ff3d7b5b8"></a><!-- doxytag: member="PerfKvmTimer::calcResolution" ref="a02798cc202bebceef3ff0e3ff3d7b5b8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> calcResolution </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Calculate the timer resolution, used by <a class="el" href="classBaseKvmTimer.html#a4450cc644b16fe4cb8b25ed02fb6446f">resolution()</a> which caches the result.</p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>Minimum number of ticks the timer can resolve </dd></dl>

<p><a class="el" href="classBaseKvmTimer.html#a8bff362cf60f8a6adbdc0aa31cb9be27">BaseKvmTimer</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00186"></a>00186 {
<a name="l00187"></a>00187     <span class="keywordflow">return</span> <a class="code" href="classBaseKvmTimer.html#ace36954bea0efa9977b9d4760437860b">ticksFromHostCycles</a>(<a class="code" href="timer_8cc.html#a4e8d937bb3332c6c8e19b6bdacf6fe5b">MIN_HOST_CYCLES</a>);
<a name="l00188"></a>00188 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9882bfa120cede575461197f2a13cd8b"></a><!-- doxytag: member="PerfKvmTimer::disarm" ref="a9882bfa120cede575461197f2a13cd8b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void disarm </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Disarm the timer.</p>
<p>When this method has returned, the timer may no longer deliver signals upon timeout. </p>

<p><a class="el" href="classBaseKvmTimer.html#aaef5c4bcad609bff2d6580c368020346">BaseKvmTimer</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00180"></a>00180 {
<a name="l00181"></a>00181     <a class="code" href="classPerfKvmTimer.html#af183dc3e77e7fc3603a0d4ff4a8fb65d">hwOverflow</a>.<a class="code" href="classPerfKvmCounter.html#a8c528baf37154d347366083f0f816846">stop</a>();
<a name="l00182"></a>00182 }
</pre></div></p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="af183dc3e77e7fc3603a0d4ff4a8fb65d"></a><!-- doxytag: member="PerfKvmTimer::hwOverflow" ref="af183dc3e77e7fc3603a0d4ff4a8fb65d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a>&amp; <a class="el" href="classPerfKvmTimer.html#af183dc3e77e7fc3603a0d4ff4a8fb65d">hwOverflow</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>cpu/kvm/<a class="el" href="timer_8hh_source.html">timer.hh</a></li>
<li>cpu/kvm/<a class="el" href="timer_8cc.html">timer.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
