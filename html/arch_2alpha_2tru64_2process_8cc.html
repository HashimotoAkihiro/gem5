<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: arch/alpha/tru64/process.cc</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li><a href="annotated.html"><span>クラス</span></a></li>
      <li class="current"><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>ファイル一覧</span></a></li>
      <li><a href="globals.html"><span>ファイルメンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>arch/alpha/tru64/process.cc</h1><code>#include &quot;<a class="el" href="arch_2alpha_2tru64_2process_8hh_source.html">arch/alpha/tru64/process.hh</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="arch_2alpha_2tru64_2tru64_8hh_source.html">arch/alpha/tru64/tru64.hh</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="alpha_2isa__traits_8hh_source.html">arch/alpha/isa_traits.hh</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="thread__context_8hh_source.html">cpu/thread_context.hh</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="kern_2tru64_2tru64_8hh_source.html">kern/tru64/tru64.hh</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="byteswap_8hh_source.html">sim/byteswap.hh</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="sim_2process_8hh_source.html">sim/process.hh</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="syscall__emul_8hh_source.html">sim/syscall_emul.hh</a>&quot;</code><br/>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>関数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="arch_2alpha_2tru64_2process_8cc.html#a9b3287e154144b39ade23cc40ad37808">unameFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int callnum, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target uname() handler.  <a href="#a9b3287e154144b39ade23cc40ad37808"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="arch_2alpha_2tru64_2process_8cc.html#a8a94bcb1171ba9bfc36534223041792e">getsysinfoFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int callnum, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target getsysyinfo() handler.  <a href="#a8a94bcb1171ba9bfc36534223041792e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="arch_2alpha_2tru64_2process_8cc.html#a25d086a2a74808a33bc82eedad777184">setsysinfoFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int callnum, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target setsysyinfo() handler.  <a href="#a25d086a2a74808a33bc82eedad777184"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="arch_2alpha_2tru64_2process_8cc.html#a93378dd3fbe219276336dde493c9fa26">tableFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int callnum, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target table() handler.  <a href="#a93378dd3fbe219276336dde493c9fa26"></a><br/></td></tr>
</table>
<hr/><h2>関数</h2>
<a class="anchor" id="a8a94bcb1171ba9bfc36534223041792e"></a><!-- doxytag: member="process.cc::getsysinfoFunc" ref="a8a94bcb1171ba9bfc36534223041792e" args="(SyscallDesc *desc, int callnum, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classSyscallReturn.html">SyscallReturn</a> getsysinfoFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>callnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target getsysyinfo() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00066"></a>00066 {
<a name="l00067"></a>00067     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00068"></a>00068     <span class="keywordtype">unsigned</span> <a class="code" href="namespaceX86ISA.html#ac120faf051fe003563eb1b3ece78528c">op</a> = process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00069"></a>00069     <a class="code" href="classm5_1_1params_1_1Addr.html">Addr</a> bufPtr = process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00070"></a>00070     <span class="keywordtype">unsigned</span> nbytes = process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00071"></a>00071 
<a name="l00072"></a>00072     <span class="keywordflow">switch</span> (op) {
<a name="l00073"></a>00073 
<a name="l00074"></a>00074       <span class="keywordflow">case</span> <a class="code" href="classAlphaTru64.html#a14ed8f49156face38fb0dee35125148d" title="max # CPUs on machine">AlphaTru64::GSI_MAX_CPU</a>: {
<a name="l00075"></a>00075           <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;uint32_t&gt;</a> max_cpu(bufPtr);
<a name="l00076"></a>00076           *max_cpu = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>((<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)process-&gt;<a class="code" href="classProcess.html#ac5c70b967092e10582ce2f165e174890">numCpus</a>());
<a name="l00077"></a>00077           max_cpu.copyOut(tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>());
<a name="l00078"></a>00078           <span class="keywordflow">return</span> 1;
<a name="l00079"></a>00079       }
<a name="l00080"></a>00080 
<a name="l00081"></a>00081       <span class="keywordflow">case</span> <a class="code" href="classAlphaTru64.html#a4df912c77419619f6f242873f65b0045" title="number of CPUs in system">AlphaTru64::GSI_CPUS_IN_BOX</a>: {
<a name="l00082"></a>00082           <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;uint32_t&gt;</a> cpus_in_box(bufPtr);
<a name="l00083"></a>00083           *cpus_in_box = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>((<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)process-&gt;<a class="code" href="classProcess.html#ac5c70b967092e10582ce2f165e174890">numCpus</a>());
<a name="l00084"></a>00084           cpus_in_box.copyOut(tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>());
<a name="l00085"></a>00085           <span class="keywordflow">return</span> 1;
<a name="l00086"></a>00086       }
<a name="l00087"></a>00087 
<a name="l00088"></a>00088       <span class="keywordflow">case</span> <a class="code" href="classAlphaTru64.html#a2c859016d59653914527bcd85a154da4" title="Physical memory in KB.">AlphaTru64::GSI_PHYSMEM</a>: {
<a name="l00089"></a>00089           <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;uint64_t&gt;</a> physmem(bufPtr);
<a name="l00090"></a>00090           *physmem = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>((uint64_t)1024 * 1024);  <span class="comment">// physical memory in KB</span>
<a name="l00091"></a>00091           physmem.copyOut(tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>());
<a name="l00092"></a>00092           <span class="keywordflow">return</span> 1;
<a name="l00093"></a>00093       }
<a name="l00094"></a>00094 
<a name="l00095"></a>00095       <span class="keywordflow">case</span> <a class="code" href="classAlphaTru64.html#ad89f91e0925845385f177d93e4ef7985" title="CPU information.">AlphaTru64::GSI_CPU_INFO</a>: {
<a name="l00096"></a>00096           <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;AlphaTru64::cpu_info&gt;</a> infop(bufPtr);
<a name="l00097"></a>00097 
<a name="l00098"></a>00098           infop-&gt;current_cpu = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(0);
<a name="l00099"></a>00099           infop-&gt;cpus_in_box = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(process-&gt;<a class="code" href="classProcess.html#ac5c70b967092e10582ce2f165e174890">numCpus</a>());
<a name="l00100"></a>00100           infop-&gt;cpu_type = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(57);
<a name="l00101"></a>00101           infop-&gt;ncpus = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(process-&gt;<a class="code" href="classProcess.html#ac5c70b967092e10582ce2f165e174890">numCpus</a>());
<a name="l00102"></a>00102           uint64_t cpumask = (1 &lt;&lt; process-&gt;<a class="code" href="classProcess.html#ac5c70b967092e10582ce2f165e174890">numCpus</a>()) - 1;
<a name="l00103"></a>00103           infop-&gt;cpus_present = infop-&gt;cpus_running = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(cpumask);
<a name="l00104"></a>00104           infop-&gt;cpu_binding = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(0);
<a name="l00105"></a>00105           infop-&gt;cpu_ex_binding = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(0);
<a name="l00106"></a>00106           infop-&gt;mhz = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(667);
<a name="l00107"></a>00107 
<a name="l00108"></a>00108           infop.copyOut(tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>());
<a name="l00109"></a>00109           <span class="keywordflow">return</span> 1;
<a name="l00110"></a>00110       }
<a name="l00111"></a>00111 
<a name="l00112"></a>00112       <span class="keywordflow">case</span> <a class="code" href="classAlphaTru64.html#a3048b7c97d8a7e86854cdb73520560d0" title="get proc_type">AlphaTru64::GSI_PROC_TYPE</a>: {
<a name="l00113"></a>00113           <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;uint64_t&gt;</a> proc_type(bufPtr);
<a name="l00114"></a>00114           *proc_type = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>((uint64_t)11);
<a name="l00115"></a>00115           proc_type.copyOut(tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>());
<a name="l00116"></a>00116           <span class="keywordflow">return</span> 1;
<a name="l00117"></a>00117       }
<a name="l00118"></a>00118 
<a name="l00119"></a>00119       <span class="keywordflow">case</span> <a class="code" href="classAlphaTru64.html#ac2412600f242b3062b887ef0ec4b4908" title="For getsysinfo().">AlphaTru64::GSI_PLATFORM_NAME</a>: {
<a name="l00120"></a>00120           <a class="code" href="classBufferArg.html">BufferArg</a> bufArg(bufPtr, nbytes);
<a name="l00121"></a>00121           strncpy((<span class="keywordtype">char</span> *)bufArg.bufferPtr(),
<a name="l00122"></a>00122                   <span class="stringliteral">&quot;COMPAQ Professional Workstation XP1000&quot;</span>,
<a name="l00123"></a>00123                   nbytes);
<a name="l00124"></a>00124           bufArg.copyOut(tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>());
<a name="l00125"></a>00125           <span class="keywordflow">return</span> 1;
<a name="l00126"></a>00126       }
<a name="l00127"></a>00127 
<a name="l00128"></a>00128       <span class="keywordflow">case</span> <a class="code" href="classAlphaTru64.html#a26c255cf18ca324c7c09a629e9e2a4f0" title="clock freq in Hz">AlphaTru64::GSI_CLK_TCK</a>: {
<a name="l00129"></a>00129           <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;uint64_t&gt;</a> clk_hz(bufPtr);
<a name="l00130"></a>00130           *clk_hz = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>((uint64_t)1024);
<a name="l00131"></a>00131           clk_hz.copyOut(tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>());
<a name="l00132"></a>00132           <span class="keywordflow">return</span> 1;
<a name="l00133"></a>00133       }
<a name="l00134"></a>00134 
<a name="l00135"></a>00135       <span class="keywordflow">default</span>:
<a name="l00136"></a>00136         <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;getsysinfo: unknown op %d\n&quot;</span>, op);
<a name="l00137"></a>00137         <span class="keywordflow">break</span>;
<a name="l00138"></a>00138     }
<a name="l00139"></a>00139 
<a name="l00140"></a>00140     <span class="keywordflow">return</span> 0;
<a name="l00141"></a>00141 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a25d086a2a74808a33bc82eedad777184"></a><!-- doxytag: member="process.cc::setsysinfoFunc" ref="a25d086a2a74808a33bc82eedad777184" args="(SyscallDesc *desc, int callnum, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classSyscallReturn.html">SyscallReturn</a> setsysinfoFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>callnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target setsysyinfo() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00147"></a>00147 {
<a name="l00148"></a>00148     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00149"></a>00149     <span class="keywordtype">unsigned</span> <a class="code" href="namespaceX86ISA.html#ac120faf051fe003563eb1b3ece78528c">op</a> = process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00150"></a>00150 
<a name="l00151"></a>00151     <span class="keywordflow">switch</span> (op) {
<a name="l00152"></a>00152       <span class="keywordflow">case</span> <a class="code" href="classAlphaTru64.html#a4dea1885b08c38c78286ecd5ffd5488d" title="For setsysinfo().">AlphaTru64::SSI_IEEE_FP_CONTROL</a>:
<a name="l00153"></a>00153         <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;setsysinfo: ignoring ieee_set_fp_control() arg 0x%x\n&quot;</span>,
<a name="l00154"></a>00154              process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index));
<a name="l00155"></a>00155         <span class="keywordflow">break</span>;
<a name="l00156"></a>00156 
<a name="l00157"></a>00157       <span class="keywordflow">default</span>:
<a name="l00158"></a>00158         <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;setsysinfo: unknown op %d\n&quot;</span>, op);
<a name="l00159"></a>00159         <span class="keywordflow">break</span>;
<a name="l00160"></a>00160     }
<a name="l00161"></a>00161 
<a name="l00162"></a>00162     <span class="keywordflow">return</span> 0;
<a name="l00163"></a>00163 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a93378dd3fbe219276336dde493c9fa26"></a><!-- doxytag: member="process.cc::tableFunc" ref="a93378dd3fbe219276336dde493c9fa26" args="(SyscallDesc *desc, int callnum, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classSyscallReturn.html">SyscallReturn</a> tableFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>callnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target table() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00169"></a>00169 {
<a name="l00170"></a>00170     <span class="keyword">using namespace </span>std;
<a name="l00171"></a>00171 
<a name="l00172"></a>00172     <span class="keywordtype">int</span> argIndex = 0;
<a name="l00173"></a>00173     <span class="keywordtype">int</span> <span class="keywordtype">id</span> = process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, argIndex);    <span class="comment">// table ID</span>
<a name="l00174"></a>00174     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, argIndex); <span class="comment">// index into table</span>
<a name="l00175"></a>00175     <a class="code" href="classm5_1_1params_1_1Addr.html">Addr</a> bufPtr = process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, argIndex);
<a name="l00176"></a>00176     <span class="comment">// arg 2 is buffer pointer; type depends on table ID</span>
<a name="l00177"></a>00177     <span class="keywordtype">int</span> nel = process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, argIndex);   <span class="comment">// number of elements</span>
<a name="l00178"></a>00178     <span class="keywordtype">int</span> lel = process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, argIndex);   <span class="comment">// expected element size</span>
<a name="l00179"></a>00179 
<a name="l00180"></a>00180     <span class="keywordflow">switch</span> (<span class="keywordtype">id</span>) {
<a name="l00181"></a>00181       <span class="keywordflow">case</span> <a class="code" href="classAlphaTru64.html#a02a979126f2aa34bcdfdc6ab92207d3b" title="For table().">AlphaTru64::TBL_SYSINFO</a>: {
<a name="l00182"></a>00182           <span class="keywordflow">if</span> (index != 0 || nel != 1 || lel != <span class="keyword">sizeof</span>(<a class="code" href="structTru64_1_1tbl__sysinfo.html" title="For table().">Tru64::tbl_sysinfo</a>))
<a name="l00183"></a>00183               <span class="keywordflow">return</span> -EINVAL;
<a name="l00184"></a>00184           <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;Tru64::tbl_sysinfo&gt;</a> elp(bufPtr);
<a name="l00185"></a>00185 
<a name="l00186"></a>00186           <span class="keyword">const</span> <span class="keywordtype">int</span> clk_hz = <a class="code" href="syscall__emul_8hh.html#a669e0ac171376b8be956f4ac131e78a7" title="A readable name for 1,000,000, for converting microseconds to seconds.">one_million</a>;
<a name="l00187"></a>00187           elp-&gt;si_user = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(<a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>() / (<a class="code" href="namespaceSimClock.html#af196276bdf8e65836e88981a33d57943" title="The simulated frequency of curTick(). (In ticks per second).">SimClock::Frequency</a> / clk_hz));
<a name="l00188"></a>00188           elp-&gt;si_nice = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(0);
<a name="l00189"></a>00189           elp-&gt;si_sys = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(0);
<a name="l00190"></a>00190           elp-&gt;si_idle = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(0);
<a name="l00191"></a>00191           elp-&gt;wait = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(0);
<a name="l00192"></a>00192           elp-&gt;si_hz = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(clk_hz);
<a name="l00193"></a>00193           elp-&gt;si_phz = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(clk_hz);
<a name="l00194"></a>00194           elp-&gt;si_boottime = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(<a class="code" href="syscall__emul_8hh.html#a39e588dacd751ca716fd5352f319e401">seconds_since_epoch</a>); <span class="comment">// seconds since epoch?</span>
<a name="l00195"></a>00195           elp-&gt;si_max_procs = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(process-&gt;<a class="code" href="classProcess.html#ac5c70b967092e10582ce2f165e174890">numCpus</a>());
<a name="l00196"></a>00196           elp.copyOut(tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>());
<a name="l00197"></a>00197           <span class="keywordflow">return</span> 0;
<a name="l00198"></a>00198       }
<a name="l00199"></a>00199 
<a name="l00200"></a>00200       <span class="keywordflow">default</span>:
<a name="l00201"></a>00201         cerr &lt;&lt; <span class="stringliteral">&quot;table(): id &quot;</span> &lt;&lt; <span class="keywordtype">id</span> &lt;&lt; <span class="stringliteral">&quot; unknown.&quot;</span> &lt;&lt; endl;
<a name="l00202"></a>00202         <span class="keywordflow">return</span> -EINVAL;
<a name="l00203"></a>00203     }
<a name="l00204"></a>00204 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9b3287e154144b39ade23cc40ad37808"></a><!-- doxytag: member="process.cc::unameFunc" ref="a9b3287e154144b39ade23cc40ad37808" args="(SyscallDesc *desc, int callnum, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classSyscallReturn.html">SyscallReturn</a> unameFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>callnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target uname() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00048"></a>00048 {
<a name="l00049"></a>00049     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00050"></a>00050     <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;AlphaTru64::utsname&gt;</a> <a class="code" href="trace_8hh.html#a166fa10b86d8faa127fb7c78191e3e60">name</a>(process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index));
<a name="l00051"></a>00051 
<a name="l00052"></a>00052     strcpy(<a class="code" href="trace_8hh.html#a166fa10b86d8faa127fb7c78191e3e60">name</a>-&gt;sysname, <span class="stringliteral">&quot;OSF1&quot;</span>);
<a name="l00053"></a>00053     strcpy(<a class="code" href="trace_8hh.html#a166fa10b86d8faa127fb7c78191e3e60">name</a>-&gt;nodename, <span class="stringliteral">&quot;m5.eecs.umich.edu&quot;</span>);
<a name="l00054"></a>00054     strcpy(<a class="code" href="trace_8hh.html#a166fa10b86d8faa127fb7c78191e3e60">name</a>-&gt;release, <span class="stringliteral">&quot;V5.1&quot;</span>);
<a name="l00055"></a>00055     strcpy(<a class="code" href="trace_8hh.html#a166fa10b86d8faa127fb7c78191e3e60">name</a>-&gt;version, <span class="stringliteral">&quot;732&quot;</span>);
<a name="l00056"></a>00056     strcpy(<a class="code" href="trace_8hh.html#a166fa10b86d8faa127fb7c78191e3e60">name</a>-&gt;machine, <span class="stringliteral">&quot;alpha&quot;</span>);
<a name="l00057"></a>00057 
<a name="l00058"></a>00058     <a class="code" href="trace_8hh.html#a166fa10b86d8faa127fb7c78191e3e60">name</a>.copyOut(tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>());
<a name="l00059"></a>00059     <span class="keywordflow">return</span> 0;
<a name="l00060"></a>00060 }
</pre></div></p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
