<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス DmaPort</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>クラス DmaPort</h1><!-- doxytag: class="DmaPort" --><!-- doxytag: inherits="MasterPort" -->
<p><code>#include &lt;<a class="el" href="dma__device_8hh_source.html">dma_device.hh</a>&gt;</code></p>
<div class="dynheader">
DmaPortに対する継承グラフ</div>
<div class="dynsection">
 <div class="center">
  <img src="classDmaPort.gif" usemap="#DmaPort_map" alt=""/>
  <map id="DmaPort_map" name="DmaPort_map">
<area href="classMasterPort.html" alt="MasterPort" shape="rect" coords="0,112,113,136"/>
<area href="classBaseMasterPort.html" alt="BaseMasterPort" shape="rect" coords="0,56,113,80"/>
<area href="classPort.html" alt="Port" shape="rect" coords="0,0,113,24"/>
<area href="classArmISA_1_1TableWalker_1_1SnoopingDmaPort.html" alt="SnoopingDmaPort" shape="rect" coords="0,224,113,248"/>
</map>
 </div>
</div>

<p><a href="classDmaPort-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>構成</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDmaPort_1_1DmaReqState.html">DmaReqState</a></td></tr>
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDmaPort.html#a7e3134f5a5a31bf28df04f0d6223ac3b">DmaPort</a> (<a class="el" href="classMemObject.html">MemObject</a> *dev, <a class="el" href="classSystem.html">System</a> *s)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDmaPort.html#ac9a04fe85b8cb0292631680073eddb86">dmaAction</a> (<a class="el" href="classMemCmd.html#a2afce0a47a93eee73a314d53e4890153">Packet::Command</a> cmd, <a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> addr, int size, <a class="el" href="classEvent.html">Event</a> *event, uint8_t *data, <a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> delay, <a class="el" href="classFlags.html">Request::Flags</a> flag=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDmaPort.html#a481b9352c138101d0f84f163a760c6e5">dmaPending</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDmaPort.html#a6bf479c521c7c3eb473822d953275b26">drain</a> (<a class="el" href="classDrainManager.html">DrainManager</a> *drainManger)</td></tr>
<tr><td colspan="2"><h2>Protected メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDmaPort.html#a482dba5588f4bee43e498875a61e5e0b">recvTimingResp</a> (<a class="el" href="classPacket.html">PacketPtr</a> pkt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDmaPort.html#a29cb5a4f98063ce6e9210eacbdb35298">recvRetry</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDmaPort.html#a39ecf6d3539b9a83c7df974058a5846d">queueDma</a> (<a class="el" href="classPacket.html">PacketPtr</a> pkt)</td></tr>
<tr><td colspan="2"><h2>Private メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDmaPort.html#ab4a48e8fe7bec0588669bb654736c5e8">trySendTimingReq</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDmaPort.html#accc908efe0611b7a131c978f0d1e2e15">sendDma</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDmaPort.html#aa7a9b0bb526bd92c0f952a55f875d443">handleResp</a> (<a class="el" href="classPacket.html">PacketPtr</a> pkt, <a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> delay=0)</td></tr>
<tr><td colspan="2"><h2>Private 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMemObject.html">MemObject</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDmaPort.html#a4be8e04a8b8092d55e6b8707f95c1921">device</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1deque.html">std::deque</a>&lt; <a class="el" href="classPacket.html">PacketPtr</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDmaPort.html#aa1daf4e9dc0076207688f30abccdaab5">transmitList</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt; <a class="el" href="classDmaPort.html">DmaPort</a>,&amp;DmaPort::sendDma &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDmaPort.html#a944ed919343d4c184161d71c8b113c98">sendEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSystem.html">System</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDmaPort.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="request_8hh.html#ac366b729262fd8e7cbd3283da6f775cf">MasterID</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDmaPort.html#a4fe950c0a01bfb6dd81ee92b18162d26">masterId</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDmaPort.html#a42162a6fc29d8d8b33c43a0d19b60058">pendingCount</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDrainManager.html">DrainManager</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDmaPort.html#a329b71fb934a93312ca0aacbf5a3f982">drainManager</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDmaPort.html#a86588337eae6e277173a8da0cb966462">inRetry</a></td></tr>
</table>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="a7e3134f5a5a31bf28df04f0d6223ac3b"></a><!-- doxytag: member="DmaPort::DmaPort" ref="a7e3134f5a5a31bf28df04f0d6223ac3b" args="(MemObject *dev, System *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDmaPort.html">DmaPort</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMemObject.html">MemObject</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSystem.html">System</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00052"></a>00052     : <a class="code" href="classMasterPort.html#a4a4ccf1d4533ae4ce5ac9bf88a7edfd5">MasterPort</a>(dev-&gt;<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.dma&quot;</span>, dev), <a class="code" href="classDmaPort.html#a4be8e04a8b8092d55e6b8707f95c1921">device</a>(dev), <a class="code" href="classDmaPort.html#a944ed919343d4c184161d71c8b113c98">sendEvent</a>(<span class="keyword">this</span>),
<a name="l00053"></a>00053       <a class="code" href="classDmaPort.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>(s), <a class="code" href="classDmaPort.html#a4fe950c0a01bfb6dd81ee92b18162d26">masterId</a>(s-&gt;<a class="code" href="classSystem.html#a906e073613d8d8e76e11c1bf9310a25c">getMasterId</a>(dev-&gt;<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>())),
<a name="l00054"></a>00054       <a class="code" href="classDmaPort.html#a42162a6fc29d8d8b33c43a0d19b60058">pendingCount</a>(0), <a class="code" href="classDmaPort.html#a329b71fb934a93312ca0aacbf5a3f982">drainManager</a>(<a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>),
<a name="l00055"></a>00055       <a class="code" href="classDmaPort.html#a86588337eae6e277173a8da0cb966462">inRetry</a>(<span class="keyword">false</span>)
<a name="l00056"></a>00056 { }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="ac9a04fe85b8cb0292631680073eddb86"></a><!-- doxytag: member="DmaPort::dmaAction" ref="ac9a04fe85b8cb0292631680073eddb86" args="(Packet::Command cmd, Addr addr, int size, Event *event, uint8_t *data, Tick delay, Request::Flags flag=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dmaAction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMemCmd.html#a2afce0a47a93eee73a314d53e4890153">Packet::Command</a>&nbsp;</td>
          <td class="paramname"> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classEvent.html">Event</a> *&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td>
          <td class="paramname"> <em>delay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classFlags.html">Request::Flags</a>&nbsp;</td>
          <td class="paramname"> <em>flag</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00158"></a>00158 {
<a name="l00159"></a>00159     <span class="comment">// one DMA request sender state for every action, that is then</span>
<a name="l00160"></a>00160     <span class="comment">// split into many requests and packets based on the block size,</span>
<a name="l00161"></a>00161     <span class="comment">// i.e. cache line size</span>
<a name="l00162"></a>00162     DmaReqState *reqState = <span class="keyword">new</span> DmaReqState(event, size, delay);
<a name="l00163"></a>00163 
<a name="l00164"></a>00164     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="namespaceContextSwitchTaskId.html#aa8dd388981e62e592eb420a58ab290b7a6537a62f6f155792bb9a320ee2ec4d68">DMA</a>, <span class="stringliteral">&quot;Starting DMA for addr: %#x size: %d sched: %d\n&quot;</span>, <a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a>, size,
<a name="l00165"></a>00165             event ? event-&gt;<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>() : -1);
<a name="l00166"></a>00166     <span class="keywordflow">for</span> (<a class="code" href="classChunkGenerator.html">ChunkGenerator</a> gen(<a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a>, size, <a class="code" href="classDmaPort.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>-&gt;<a class="code" href="classSystem.html#ac1f842b56d922c001dda5262b4cccbc6">cacheLineSize</a>());
<a name="l00167"></a>00167          !gen.done(); gen.next()) {
<a name="l00168"></a>00168         <a class="code" href="classRequest.html">Request</a> *req = <span class="keyword">new</span> <a class="code" href="classRequest.html">Request</a>(gen.addr(), gen.size(), flag, <a class="code" href="classDmaPort.html#a4fe950c0a01bfb6dd81ee92b18162d26">masterId</a>);
<a name="l00169"></a>00169         req-&gt;<a class="code" href="classRequest.html#a7abf15d67b3fbd53236fde58eecb3f34">taskId</a>(<a class="code" href="namespaceContextSwitchTaskId.html#aa8dd388981e62e592eb420a58ab290b7a6537a62f6f155792bb9a320ee2ec4d68">ContextSwitchTaskId::DMA</a>);
<a name="l00170"></a>00170         <a class="code" href="classPacket.html">PacketPtr</a> pkt = <span class="keyword">new</span> <a class="code" href="classPacket.html">Packet</a>(req, cmd);
<a name="l00171"></a>00171 
<a name="l00172"></a>00172         <span class="comment">// Increment the data pointer on a write</span>
<a name="l00173"></a>00173         <span class="keywordflow">if</span> (data)
<a name="l00174"></a>00174             pkt-&gt;<a class="code" href="classPacket.html#a60621b00d6ecd49b3e336087aca2eda0">dataStatic</a>(data + gen.complete());
<a name="l00175"></a>00175 
<a name="l00176"></a>00176         pkt-&gt;<a class="code" href="classPacket.html#a983ade0479f946c813284dcc65073367">senderState</a> = reqState;
<a name="l00177"></a>00177 
<a name="l00178"></a>00178         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="namespaceContextSwitchTaskId.html#aa8dd388981e62e592eb420a58ab290b7a6537a62f6f155792bb9a320ee2ec4d68">DMA</a>, <span class="stringliteral">&quot;--Queuing DMA for addr: %#x size: %d\n&quot;</span>, gen.addr(),
<a name="l00179"></a>00179                 gen.size());
<a name="l00180"></a>00180         <a class="code" href="classDmaPort.html#a39ecf6d3539b9a83c7df974058a5846d">queueDma</a>(pkt);
<a name="l00181"></a>00181     }
<a name="l00182"></a>00182 
<a name="l00183"></a>00183     <span class="comment">// in zero time also initiate the sending of the packets we have</span>
<a name="l00184"></a>00184     <span class="comment">// just created, for atomic this involves actually completing all</span>
<a name="l00185"></a>00185     <span class="comment">// the requests</span>
<a name="l00186"></a>00186     <a class="code" href="classDmaPort.html#accc908efe0611b7a131c978f0d1e2e15">sendDma</a>();
<a name="l00187"></a>00187 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a481b9352c138101d0f84f163a760c6e5"></a><!-- doxytag: member="DmaPort::dmaPending" ref="a481b9352c138101d0f84f163a760c6e5" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool dmaPending </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00148"></a>00148 { <span class="keywordflow">return</span> <a class="code" href="classDmaPort.html#a42162a6fc29d8d8b33c43a0d19b60058">pendingCount</a> &gt; 0; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6bf479c521c7c3eb473822d953275b26"></a><!-- doxytag: member="DmaPort::drain" ref="a6bf479c521c7c3eb473822d953275b26" args="(DrainManager *drainManger)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int drain </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDrainManager.html">DrainManager</a> *&nbsp;</td>
          <td class="paramname"> <em>drainManger</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00140"></a>00140 {
<a name="l00141"></a>00141     <span class="keywordflow">if</span> (<a class="code" href="classDmaPort.html#a42162a6fc29d8d8b33c43a0d19b60058">pendingCount</a> == 0)
<a name="l00142"></a>00142         <span class="keywordflow">return</span> 0;
<a name="l00143"></a>00143     <a class="code" href="classDmaPort.html#a329b71fb934a93312ca0aacbf5a3f982">drainManager</a> = <a class="code" href="namespaceMipsISA.html#a2575c29e7f4617b6076486f340b6fe19">dm</a>;
<a name="l00144"></a>00144     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Drain, <span class="stringliteral">&quot;DmaPort not drained\n&quot;</span>);
<a name="l00145"></a>00145     <span class="keywordflow">return</span> 1;
<a name="l00146"></a>00146 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa7a9b0bb526bd92c0f952a55f875d443"></a><!-- doxytag: member="DmaPort::handleResp" ref="aa7a9b0bb526bd92c0f952a55f875d443" args="(PacketPtr pkt, Tick delay=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handleResp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td>
          <td class="paramname"> <em>delay</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Handle a response packet by updating the corresponding DMA request state to reflect the bytes received, and also update the pending request counter. If the DMA request that this packet is part of is complete, then signal the completion event if present, potentially with a delay added to it.</p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pkt</em>&nbsp;</td><td>Response packet to handler </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>delay</em>&nbsp;</td><td>Additional delay for scheduling the completion event </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00060"></a>00060 {
<a name="l00061"></a>00061     <span class="comment">// should always see a response with a sender state</span>
<a name="l00062"></a>00062     assert(pkt-&gt;<a class="code" href="classPacket.html#a5f89a108755a6cb3e8185d85c850a816">isResponse</a>());
<a name="l00063"></a>00063 
<a name="l00064"></a>00064     <span class="comment">// get the DMA sender state</span>
<a name="l00065"></a>00065     DmaReqState *state = <span class="keyword">dynamic_cast&lt;</span>DmaReqState*<span class="keyword">&gt;</span>(pkt-&gt;<a class="code" href="classPacket.html#a983ade0479f946c813284dcc65073367">senderState</a>);
<a name="l00066"></a>00066     assert(state);
<a name="l00067"></a>00067 
<a name="l00068"></a>00068     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="namespaceContextSwitchTaskId.html#aa8dd388981e62e592eb420a58ab290b7a6537a62f6f155792bb9a320ee2ec4d68">DMA</a>, <span class="stringliteral">&quot;Received response %s for addr: %#x size: %d nb: %d,&quot;</span>  \
<a name="l00069"></a>00069             <span class="stringliteral">&quot; tot: %d sched %d\n&quot;</span>,
<a name="l00070"></a>00070             pkt-&gt;<a class="code" href="classPacket.html#a863af57e28a01258236ea303155fc7ff">cmdString</a>(), pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>(), pkt-&gt;<a class="code" href="classPacket.html#a956cd41d82347558b9c0a5b0474903f2" title="A pointer to the original request.">req</a>-&gt;<a class="code" href="classRequest.html#a3c4029b904a61a9873e6d12785ce19a1">getSize</a>(),
<a name="l00071"></a>00071             state-&gt;numBytes, state-&gt;totBytes,
<a name="l00072"></a>00072             state-&gt;completionEvent ?
<a name="l00073"></a>00073             state-&gt;completionEvent-&gt;scheduled() : 0);
<a name="l00074"></a>00074 
<a name="l00075"></a>00075     assert(<a class="code" href="classDmaPort.html#a42162a6fc29d8d8b33c43a0d19b60058">pendingCount</a> != 0);
<a name="l00076"></a>00076     <a class="code" href="classDmaPort.html#a42162a6fc29d8d8b33c43a0d19b60058">pendingCount</a>--;
<a name="l00077"></a>00077 
<a name="l00078"></a>00078     <span class="comment">// update the number of bytes received based on the request rather</span>
<a name="l00079"></a>00079     <span class="comment">// than the packet as the latter could be rounded up to line sizes</span>
<a name="l00080"></a>00080     state-&gt;numBytes += pkt-&gt;<a class="code" href="classPacket.html#a956cd41d82347558b9c0a5b0474903f2" title="A pointer to the original request.">req</a>-&gt;<a class="code" href="classRequest.html#a3c4029b904a61a9873e6d12785ce19a1">getSize</a>();
<a name="l00081"></a>00081     assert(state-&gt;totBytes &gt;= state-&gt;numBytes);
<a name="l00082"></a>00082 
<a name="l00083"></a>00083     <span class="comment">// if we have reached the total number of bytes for this DMA</span>
<a name="l00084"></a>00084     <span class="comment">// request, then signal the completion and delete the sate</span>
<a name="l00085"></a>00085     <span class="keywordflow">if</span> (state-&gt;totBytes == state-&gt;numBytes) {
<a name="l00086"></a>00086         <span class="keywordflow">if</span> (state-&gt;completionEvent) {
<a name="l00087"></a>00087             delay += state-&gt;delay;
<a name="l00088"></a>00088             <a class="code" href="classDmaPort.html#a4be8e04a8b8092d55e6b8707f95c1921">device</a>-&gt;<a class="code" href="classEventManager.html#a4ddebbfe9a12b95be6fb993ce892dcd3">schedule</a>(state-&gt;completionEvent, <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>() + delay);
<a name="l00089"></a>00089         }
<a name="l00090"></a>00090         <span class="keyword">delete</span> state;
<a name="l00091"></a>00091     }
<a name="l00092"></a>00092 
<a name="l00093"></a>00093     <span class="comment">// delete the request that we created and also the packet</span>
<a name="l00094"></a>00094     <span class="keyword">delete</span> pkt-&gt;<a class="code" href="classPacket.html#a956cd41d82347558b9c0a5b0474903f2" title="A pointer to the original request.">req</a>;
<a name="l00095"></a>00095     <span class="keyword">delete</span> pkt;
<a name="l00096"></a>00096 
<a name="l00097"></a>00097     <span class="comment">// we might be drained at this point, if so signal the drain event</span>
<a name="l00098"></a>00098     <span class="keywordflow">if</span> (<a class="code" href="classDmaPort.html#a42162a6fc29d8d8b33c43a0d19b60058">pendingCount</a> == 0 &amp;&amp; <a class="code" href="classDmaPort.html#a329b71fb934a93312ca0aacbf5a3f982">drainManager</a>) {
<a name="l00099"></a>00099         <a class="code" href="classDmaPort.html#a329b71fb934a93312ca0aacbf5a3f982">drainManager</a>-&gt;<a class="code" href="classDrainManager.html#ab89d10e368d2e82061eddb9e40022382">signalDrainDone</a>();
<a name="l00100"></a>00100         <a class="code" href="classDmaPort.html#a329b71fb934a93312ca0aacbf5a3f982">drainManager</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00101"></a>00101     }
<a name="l00102"></a>00102 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a39ecf6d3539b9a83c7df974058a5846d"></a><!-- doxytag: member="DmaPort::queueDma" ref="a39ecf6d3539b9a83c7df974058a5846d" args="(PacketPtr pkt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void queueDma </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pkt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00191"></a>00191 {
<a name="l00192"></a>00192     <a class="code" href="classDmaPort.html#aa1daf4e9dc0076207688f30abccdaab5">transmitList</a>.push_back(pkt);
<a name="l00193"></a>00193 
<a name="l00194"></a>00194     <span class="comment">// remember that we have another packet pending, this will only be</span>
<a name="l00195"></a>00195     <span class="comment">// decremented once a response comes back</span>
<a name="l00196"></a>00196     <a class="code" href="classDmaPort.html#a42162a6fc29d8d8b33c43a0d19b60058">pendingCount</a>++;
<a name="l00197"></a>00197 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a29cb5a4f98063ce6e9210eacbdb35298"></a><!-- doxytag: member="DmaPort::recvRetry" ref="a29cb5a4f98063ce6e9210eacbdb35298" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void recvRetry </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Called by the slave port if sendTimingReq or sendTimingSnoopResp was called on this master port (causing recvTimingReq and recvTimingSnoopResp to be called on the slave port) and was unsuccesful. </p>

<p><a class="el" href="classMasterPort.html#ac1ccc3bcf7ebabb20b57fab99b2be5b0">MasterPort</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00150"></a>00150 {
<a name="l00151"></a>00151     assert(<a class="code" href="classDmaPort.html#aa1daf4e9dc0076207688f30abccdaab5">transmitList</a>.size());
<a name="l00152"></a>00152     <a class="code" href="classDmaPort.html#ab4a48e8fe7bec0588669bb654736c5e8">trySendTimingReq</a>();
<a name="l00153"></a>00153 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a482dba5588f4bee43e498875a61e5e0b"></a><!-- doxytag: member="DmaPort::recvTimingResp" ref="a482dba5588f4bee43e498875a61e5e0b" args="(PacketPtr pkt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool recvTimingResp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pkt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Receive a timing response from the slave port. </p>

<p><a class="el" href="classMasterPort.html#abd323548d6c93f8b0543f1fe3a86ca35">MasterPort</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00106"></a>00106 {
<a name="l00107"></a>00107     <span class="comment">// We shouldn&apos;t ever get a block in ownership state</span>
<a name="l00108"></a>00108     assert(!(pkt-&gt;<a class="code" href="classPacket.html#a9693a1ffeda326646443ab2a2a92be41">memInhibitAsserted</a>() &amp;&amp; !pkt-&gt;<a class="code" href="classPacket.html#a298938bfa2613955b13f630ce2b591e4">sharedAsserted</a>()));
<a name="l00109"></a>00109 
<a name="l00110"></a>00110     <a class="code" href="classDmaPort.html#aa7a9b0bb526bd92c0f952a55f875d443">handleResp</a>(pkt);
<a name="l00111"></a>00111 
<a name="l00112"></a>00112     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00113"></a>00113 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="accc908efe0611b7a131c978f0d1e2e15"></a><!-- doxytag: member="DmaPort::sendDma" ref="accc908efe0611b7a131c978f0d1e2e15" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sendDma </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>For timing, attempt to send the first item on the transmit list, and if it is successful and there are more packets waiting, then schedule the sending of the next packet. For atomic, simply send and process everything on the transmit list. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00230"></a>00230 {
<a name="l00231"></a>00231     <span class="comment">// some kind of selcetion between access methods</span>
<a name="l00232"></a>00232     <span class="comment">// more work is going to have to be done to make</span>
<a name="l00233"></a>00233     <span class="comment">// switching actually work</span>
<a name="l00234"></a>00234     assert(<a class="code" href="classDmaPort.html#aa1daf4e9dc0076207688f30abccdaab5">transmitList</a>.size());
<a name="l00235"></a>00235 
<a name="l00236"></a>00236     <span class="keywordflow">if</span> (<a class="code" href="classDmaPort.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>-&gt;<a class="code" href="classSystem.html#ae04bdd25f4dde1cc1b58b22505aa869c">isTimingMode</a>()) {
<a name="l00237"></a>00237         <span class="comment">// if we are either waiting for a retry or are still waiting</span>
<a name="l00238"></a>00238         <span class="comment">// after sending the last packet, then do not proceed</span>
<a name="l00239"></a>00239         <span class="keywordflow">if</span> (<a class="code" href="classDmaPort.html#a86588337eae6e277173a8da0cb966462">inRetry</a> || <a class="code" href="classDmaPort.html#a944ed919343d4c184161d71c8b113c98">sendEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>()) {
<a name="l00240"></a>00240             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="namespaceContextSwitchTaskId.html#aa8dd388981e62e592eb420a58ab290b7a6537a62f6f155792bb9a320ee2ec4d68">DMA</a>, <span class="stringliteral">&quot;Can&apos;t send immediately, waiting to send\n&quot;</span>);
<a name="l00241"></a>00241             <span class="keywordflow">return</span>;
<a name="l00242"></a>00242         }
<a name="l00243"></a>00243 
<a name="l00244"></a>00244         <a class="code" href="classDmaPort.html#ab4a48e8fe7bec0588669bb654736c5e8">trySendTimingReq</a>();
<a name="l00245"></a>00245     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classDmaPort.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a>-&gt;<a class="code" href="classSystem.html#a6685592df58820e9bb30d94908c9881a">isAtomicMode</a>()) {
<a name="l00246"></a>00246         <span class="comment">// send everything there is to send in zero time</span>
<a name="l00247"></a>00247         <span class="keywordflow">while</span> (!<a class="code" href="classDmaPort.html#aa1daf4e9dc0076207688f30abccdaab5">transmitList</a>.empty()) {
<a name="l00248"></a>00248             <a class="code" href="classPacket.html">PacketPtr</a> pkt = <a class="code" href="classDmaPort.html#aa1daf4e9dc0076207688f30abccdaab5">transmitList</a>.front();
<a name="l00249"></a>00249             <a class="code" href="classDmaPort.html#aa1daf4e9dc0076207688f30abccdaab5">transmitList</a>.pop_front();
<a name="l00250"></a>00250 
<a name="l00251"></a>00251             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="namespaceContextSwitchTaskId.html#aa8dd388981e62e592eb420a58ab290b7a6537a62f6f155792bb9a320ee2ec4d68">DMA</a>, <span class="stringliteral">&quot;Sending  DMA for addr: %#x size: %d\n&quot;</span>,
<a name="l00252"></a>00252                     pkt-&gt;<a class="code" href="classPacket.html#a956cd41d82347558b9c0a5b0474903f2" title="A pointer to the original request.">req</a>-&gt;<a class="code" href="classRequest.html#a744ef11a5afe9d3651ce5f954259cb43">getPaddr</a>(), pkt-&gt;<a class="code" href="classPacket.html#a956cd41d82347558b9c0a5b0474903f2" title="A pointer to the original request.">req</a>-&gt;<a class="code" href="classRequest.html#a3c4029b904a61a9873e6d12785ce19a1">getSize</a>());
<a name="l00253"></a>00253             <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> lat = <a class="code" href="classMasterPort.html#a49fe5ebde5a0349bff76527b969b7643">sendAtomic</a>(pkt);
<a name="l00254"></a>00254 
<a name="l00255"></a>00255             <a class="code" href="classDmaPort.html#aa7a9b0bb526bd92c0f952a55f875d443">handleResp</a>(pkt, lat);
<a name="l00256"></a>00256         }
<a name="l00257"></a>00257     } <span class="keywordflow">else</span>
<a name="l00258"></a>00258         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Unknown memory mode.&quot;</span>);
<a name="l00259"></a>00259 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab4a48e8fe7bec0588669bb654736c5e8"></a><!-- doxytag: member="DmaPort::trySendTimingReq" ref="ab4a48e8fe7bec0588669bb654736c5e8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trySendTimingReq </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Take the first packet of the transmit list and attempt to send it as a timing request. If it is successful, schedule the sending of the next packet, otherwise remember that we are waiting for a retry. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00201"></a>00201 {
<a name="l00202"></a>00202     <span class="comment">// send the first packet on the transmit list and schedule the</span>
<a name="l00203"></a>00203     <span class="comment">// following send if it is successful</span>
<a name="l00204"></a>00204     <a class="code" href="classPacket.html">PacketPtr</a> pkt = <a class="code" href="classDmaPort.html#aa1daf4e9dc0076207688f30abccdaab5">transmitList</a>.front();
<a name="l00205"></a>00205 
<a name="l00206"></a>00206     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="namespaceContextSwitchTaskId.html#aa8dd388981e62e592eb420a58ab290b7a6537a62f6f155792bb9a320ee2ec4d68">DMA</a>, <span class="stringliteral">&quot;Trying to send %s addr %#x\n&quot;</span>, pkt-&gt;<a class="code" href="classPacket.html#a863af57e28a01258236ea303155fc7ff">cmdString</a>(),
<a name="l00207"></a>00207             pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>());
<a name="l00208"></a>00208 
<a name="l00209"></a>00209     <a class="code" href="classDmaPort.html#a86588337eae6e277173a8da0cb966462">inRetry</a> = !<a class="code" href="classMasterPort.html#aafaf979005392447714384794f1a8610">sendTimingReq</a>(pkt);
<a name="l00210"></a>00210     <span class="keywordflow">if</span> (!inRetry) {
<a name="l00211"></a>00211         <a class="code" href="classDmaPort.html#aa1daf4e9dc0076207688f30abccdaab5">transmitList</a>.pop_front();
<a name="l00212"></a>00212         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="namespaceContextSwitchTaskId.html#aa8dd388981e62e592eb420a58ab290b7a6537a62f6f155792bb9a320ee2ec4d68">DMA</a>, <span class="stringliteral">&quot;-- Done\n&quot;</span>);
<a name="l00213"></a>00213         <span class="comment">// if there is more to do, then do so</span>
<a name="l00214"></a>00214         <span class="keywordflow">if</span> (!<a class="code" href="classDmaPort.html#aa1daf4e9dc0076207688f30abccdaab5">transmitList</a>.empty())
<a name="l00215"></a>00215             <span class="comment">// this should ultimately wait for as many cycles as the</span>
<a name="l00216"></a>00216             <span class="comment">// device needs to send the packet, but currently the port</span>
<a name="l00217"></a>00217             <span class="comment">// does not have any known width so simply wait a single</span>
<a name="l00218"></a>00218             <span class="comment">// cycle</span>
<a name="l00219"></a>00219             <a class="code" href="classDmaPort.html#a4be8e04a8b8092d55e6b8707f95c1921">device</a>-&gt;<a class="code" href="classEventManager.html#a4ddebbfe9a12b95be6fb993ce892dcd3">schedule</a>(<a class="code" href="classDmaPort.html#a944ed919343d4c184161d71c8b113c98">sendEvent</a>, <a class="code" href="classDmaPort.html#a4be8e04a8b8092d55e6b8707f95c1921">device</a>-&gt;<a class="code" href="classClockedObject.html#a773956693f216cafb7d4cad92ad582e5">clockEdge</a>(<a class="code" href="classCycles.html">Cycles</a>(1)));
<a name="l00220"></a>00220     } <span class="keywordflow">else</span> {
<a name="l00221"></a>00221         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="namespaceContextSwitchTaskId.html#aa8dd388981e62e592eb420a58ab290b7a6537a62f6f155792bb9a320ee2ec4d68">DMA</a>, <span class="stringliteral">&quot;-- Failed, waiting for retry\n&quot;</span>);
<a name="l00222"></a>00222     }
<a name="l00223"></a>00223 
<a name="l00224"></a>00224     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="namespaceContextSwitchTaskId.html#aa8dd388981e62e592eb420a58ab290b7a6537a62f6f155792bb9a320ee2ec4d68">DMA</a>, <span class="stringliteral">&quot;TransmitList: %d, inRetry: %d\n&quot;</span>,
<a name="l00225"></a>00225             <a class="code" href="classDmaPort.html#aa1daf4e9dc0076207688f30abccdaab5">transmitList</a>.size(), inRetry);
<a name="l00226"></a>00226 }
</pre></div></p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="a4be8e04a8b8092d55e6b8707f95c1921"></a><!-- doxytag: member="DmaPort::device" ref="a4be8e04a8b8092d55e6b8707f95c1921" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMemObject.html">MemObject</a>* <a class="el" href="classDmaPort.html#a4be8e04a8b8092d55e6b8707f95c1921">device</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The device that owns this port. </p>

</div>
</div>
<a class="anchor" id="a329b71fb934a93312ca0aacbf5a3f982"></a><!-- doxytag: member="DmaPort::drainManager" ref="a329b71fb934a93312ca0aacbf5a3f982" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDrainManager.html">DrainManager</a>* <a class="el" href="classDmaPort.html#a329b71fb934a93312ca0aacbf5a3f982">drainManager</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>If we need to drain, keep the drain event around until we're done here. </p>

</div>
</div>
<a class="anchor" id="a86588337eae6e277173a8da0cb966462"></a><!-- doxytag: member="DmaPort::inRetry" ref="a86588337eae6e277173a8da0cb966462" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classDmaPort.html#a86588337eae6e277173a8da0cb966462">inRetry</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>If the port is currently waiting for a retry before it can send whatever it is that it's sending. </p>

</div>
</div>
<a class="anchor" id="a4fe950c0a01bfb6dd81ee92b18162d26"></a><!-- doxytag: member="DmaPort::masterId" ref="a4fe950c0a01bfb6dd81ee92b18162d26" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="request_8hh.html#ac366b729262fd8e7cbd3283da6f775cf">MasterID</a> <a class="el" href="classDmaPort.html#a4fe950c0a01bfb6dd81ee92b18162d26">masterId</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Id for all requests </p>

</div>
</div>
<a class="anchor" id="a42162a6fc29d8d8b33c43a0d19b60058"></a><!-- doxytag: member="DmaPort::pendingCount" ref="a42162a6fc29d8d8b33c43a0d19b60058" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="classDmaPort.html#a42162a6fc29d8d8b33c43a0d19b60058">pendingCount</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of outstanding packets the dma port has. </p>

</div>
</div>
<a class="anchor" id="a944ed919343d4c184161d71c8b113c98"></a><!-- doxytag: member="DmaPort::sendEvent" ref="a944ed919343d4c184161d71c8b113c98" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt;<a class="el" href="classDmaPort.html">DmaPort</a>, &amp;DmaPort::sendDma&gt; <a class="el" href="classDmaPort.html#a944ed919343d4c184161d71c8b113c98">sendEvent</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classEvent.html">Event</a> used to schedule a future sending from the transmit list. </p>

</div>
</div>
<a class="anchor" id="a8ae37465ba84acfef6af3e9b9e6dbbd5"></a><!-- doxytag: member="DmaPort::sys" ref="a8ae37465ba84acfef6af3e9b9e6dbbd5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSystem.html">System</a>* <a class="el" href="classDmaPort.html#a8ae37465ba84acfef6af3e9b9e6dbbd5">sys</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The system that device/port are in. This is used to select which mode we are currently operating in. </p>

</div>
</div>
<a class="anchor" id="aa1daf4e9dc0076207688f30abccdaab5"></a><!-- doxytag: member="DmaPort::transmitList" ref="aa1daf4e9dc0076207688f30abccdaab5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1deque.html">std::deque</a>&lt;<a class="el" href="classPacket.html">PacketPtr</a>&gt; <a class="el" href="classDmaPort.html#aa1daf4e9dc0076207688f30abccdaab5">transmitList</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Use a deque as we never do any insertion or removal in the middle </p>

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>dev/<a class="el" href="dma__device_8hh_source.html">dma_device.hh</a></li>
<li>dev/<a class="el" href="dma__device_8cc.html">dma_device.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
