\hypertarget{classX86ISA_1_1Speaker}{
\section{クラス Speaker}
\label{classX86ISA_1_1Speaker}\index{X86ISA::Speaker@{X86ISA::Speaker}}
}


{\ttfamily \#include $<$speaker.hh$>$}Speakerに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=7cm]{classX86ISA_1_1Speaker}
\end{center}
\end{figure}
\subsection*{Public 型}
\begin{DoxyCompactItemize}
\item 
typedef PcSpeakerParams \hyperlink{classX86ISA_1_1Speaker_ae21f9523ca3e32b9fd40e1e647ebd365}{Params}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
const \hyperlink{classX86ISA_1_1Speaker_ae21f9523ca3e32b9fd40e1e647ebd365}{Params} $\ast$ \hyperlink{classX86ISA_1_1Speaker_acd3c3feb78ae7a8f88fe0f110a718dff}{params} () const 
\item 
\hyperlink{classX86ISA_1_1Speaker_ab5b969b360baf10e8afbe38ca5e18b59}{Speaker} (\hyperlink{classX86ISA_1_1Speaker_ae21f9523ca3e32b9fd40e1e647ebd365}{Params} $\ast$\hyperlink{namespaceX86ISA_af675c1d542a25b96e11164b80809a856}{p})
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classX86ISA_1_1Speaker_a613ec7d5e1ec64f8d21fec78ae8e568e}{read} (\hyperlink{classPacket}{PacketPtr} pkt)
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classX86ISA_1_1Speaker_a4cefab464e72b5dd42c003a0a4341802}{write} (\hyperlink{classPacket}{PacketPtr} pkt)
\item 
virtual void \hyperlink{classX86ISA_1_1Speaker_a53e036786d17361be4c7320d39c99b84}{serialize} (std::ostream \&\hyperlink{namespaceX86ISA_a6b6e6ba763e7eaf46ac5b6372ca98d30}{os})
\item 
virtual void \hyperlink{classX86ISA_1_1Speaker_af22e5d6d660b97db37003ac61ac4ee49}{unserialize} (\hyperlink{classCheckpoint}{Checkpoint} $\ast$cp, const std::string \&section)
\end{DoxyCompactItemize}
\subsection*{Protected メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classX86ISA_1_1Speaker_a9dee9e496fb415ab25e4f3e1b9540783}{BitUnion8} (SpeakerControl) Bitfield$<$ 0 $>$ gate
\item 
\hyperlink{classX86ISA_1_1Speaker_ad12d02df1d565ee6a83773de872eaa0a}{EndBitUnion} (SpeakerControl) SpeakerControl controlVal
\end{DoxyCompactItemize}
\subsection*{Protected 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classX86ISA_1_1Speaker_ac8d8966078cc047949fd1bca8feb21b6}{latency}
\item 
Bitfield$<$ 1 $>$ \hyperlink{classX86ISA_1_1Speaker_a3791b579002f3ffc8a2752a2d711e46e}{speaker}
\item 
Bitfield$<$ 5 $>$ \hyperlink{classX86ISA_1_1Speaker_a0d840ef312b28548436ba3651064f023}{timer}
\item 
\hyperlink{classX86ISA_1_1I8254}{I8254} $\ast$ \hyperlink{classX86ISA_1_1Speaker_aab951a332e224dfaad6bf461353dc1ce}{timer}
\end{DoxyCompactItemize}


\subsection{型定義}
\hypertarget{classX86ISA_1_1Speaker_ae21f9523ca3e32b9fd40e1e647ebd365}{
\index{X86ISA::Speaker@{X86ISA::Speaker}!Params@{Params}}
\index{Params@{Params}!X86ISA::Speaker@{X86ISA::Speaker}}
\subsubsection[{Params}]{\setlength{\rightskip}{0pt plus 5cm}typedef PcSpeakerParams {\bf Params}}}
\label{classX86ISA_1_1Speaker_ae21f9523ca3e32b9fd40e1e647ebd365}


\hyperlink{classBasicPioDevice_a2845515ac6467f10540747053c8a0449}{BasicPioDevice}を再定義しています。

\subsection{コンストラクタとデストラクタ}
\hypertarget{classX86ISA_1_1Speaker_ab5b969b360baf10e8afbe38ca5e18b59}{
\index{X86ISA::Speaker@{X86ISA::Speaker}!Speaker@{Speaker}}
\index{Speaker@{Speaker}!X86ISA::Speaker@{X86ISA::Speaker}}
\subsubsection[{Speaker}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Speaker} ({\bf Params} $\ast$ {\em p})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classX86ISA_1_1Speaker_ab5b969b360baf10e8afbe38ca5e18b59}



\begin{DoxyCode}
67                        : BasicPioDevice(p, 1),
68         latency(p->pio_latency), controlVal(0), timer(p->i8254)
69     {
70     }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classX86ISA_1_1Speaker_a9dee9e496fb415ab25e4f3e1b9540783}{
\index{X86ISA::Speaker@{X86ISA::Speaker}!BitUnion8@{BitUnion8}}
\index{BitUnion8@{BitUnion8}!X86ISA::Speaker@{X86ISA::Speaker}}
\subsubsection[{BitUnion8}]{\setlength{\rightskip}{0pt plus 5cm}BitUnion8 (SpeakerControl)\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classX86ISA_1_1Speaker_a9dee9e496fb415ab25e4f3e1b9540783}
\hypertarget{classX86ISA_1_1Speaker_ad12d02df1d565ee6a83773de872eaa0a}{
\index{X86ISA::Speaker@{X86ISA::Speaker}!EndBitUnion@{EndBitUnion}}
\index{EndBitUnion@{EndBitUnion}!X86ISA::Speaker@{X86ISA::Speaker}}
\subsubsection[{EndBitUnion}]{\setlength{\rightskip}{0pt plus 5cm}EndBitUnion (SpeakerControl)\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classX86ISA_1_1Speaker_ad12d02df1d565ee6a83773de872eaa0a}
\hypertarget{classX86ISA_1_1Speaker_acd3c3feb78ae7a8f88fe0f110a718dff}{
\index{X86ISA::Speaker@{X86ISA::Speaker}!params@{params}}
\index{params@{params}!X86ISA::Speaker@{X86ISA::Speaker}}
\subsubsection[{params}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Params}$\ast$ params () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classX86ISA_1_1Speaker_acd3c3feb78ae7a8f88fe0f110a718dff}


\hyperlink{classBasicPioDevice_acd3c3feb78ae7a8f88fe0f110a718dff}{BasicPioDevice}を再定義しています。


\begin{DoxyCode}
63     {
64         return dynamic_cast<const Params *>(_params);
65     }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1Speaker_a613ec7d5e1ec64f8d21fec78ae8e568e}{
\index{X86ISA::Speaker@{X86ISA::Speaker}!read@{read}}
\index{read@{read}!X86ISA::Speaker@{X86ISA::Speaker}}
\subsubsection[{read}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} read ({\bf PacketPtr} {\em pkt})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classX86ISA_1_1Speaker_a613ec7d5e1ec64f8d21fec78ae8e568e}
Pure virtual function that the device must implement. Called when a read command is recieved by the port. 
\begin{DoxyParams}{引数}
\item[{\em pkt}]\hyperlink{classPacket}{Packet} describing this request \end{DoxyParams}
\begin{DoxyReturn}{戻り値}
number of ticks it took to complete 
\end{DoxyReturn}


\hyperlink{classPioDevice_a842312590432036092c422c87a442358}{PioDevice}を実装しています。


\begin{DoxyCode}
41 {
42     assert(pkt->getAddr() == pioAddr);
43     assert(pkt->getSize() == 1);
44     controlVal.timer = timer->outputHigh(2) ? 1 : 0;
45     DPRINTF(PcSpeaker,
46             "Reading from speaker device: gate %s, speaker %s, output %s.\n",
47             controlVal.gate ? "on" : "off",
48             controlVal.speaker ? "on" : "off",
49             controlVal.timer ? "on" : "off");
50     pkt->set((uint8_t)controlVal);
51     pkt->makeAtomicResponse();
52     return latency;
53 }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1Speaker_a53e036786d17361be4c7320d39c99b84}{
\index{X86ISA::Speaker@{X86ISA::Speaker}!serialize@{serialize}}
\index{serialize@{serialize}!X86ISA::Speaker@{X86ISA::Speaker}}
\subsubsection[{serialize}]{\setlength{\rightskip}{0pt plus 5cm}void serialize (std::ostream \& {\em os})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classX86ISA_1_1Speaker_a53e036786d17361be4c7320d39c99b84}


\hyperlink{classSerializable_ad6272f80ae37e8331e3969b3f072a801}{Serializable}を再定義しています。


\begin{DoxyCode}
78 {
79     uint8_t controlValData = controlVal.__data;
80     SERIALIZE_SCALAR(controlValData);
81 }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1Speaker_af22e5d6d660b97db37003ac61ac4ee49}{
\index{X86ISA::Speaker@{X86ISA::Speaker}!unserialize@{unserialize}}
\index{unserialize@{unserialize}!X86ISA::Speaker@{X86ISA::Speaker}}
\subsubsection[{unserialize}]{\setlength{\rightskip}{0pt plus 5cm}void unserialize ({\bf Checkpoint} $\ast$ {\em cp}, \/  const std::string \& {\em section})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classX86ISA_1_1Speaker_af22e5d6d660b97db37003ac61ac4ee49}


\hyperlink{classSerializable_af100c4e9feabf3cd918619c88c718387}{Serializable}を再定義しています。


\begin{DoxyCode}
85 {
86     uint8_t controlValData;
87     UNSERIALIZE_SCALAR(controlValData);
88     controlVal.__data = controlValData;
89 }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1Speaker_a4cefab464e72b5dd42c003a0a4341802}{
\index{X86ISA::Speaker@{X86ISA::Speaker}!write@{write}}
\index{write@{write}!X86ISA::Speaker@{X86ISA::Speaker}}
\subsubsection[{write}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} write ({\bf PacketPtr} {\em pkt})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classX86ISA_1_1Speaker_a4cefab464e72b5dd42c003a0a4341802}
Pure virtual function that the device must implement. Called when a write command is recieved by the port. 
\begin{DoxyParams}{引数}
\item[{\em pkt}]\hyperlink{classPacket}{Packet} describing this request \end{DoxyParams}
\begin{DoxyReturn}{戻り値}
number of ticks it took to complete 
\end{DoxyReturn}


\hyperlink{classPioDevice_afe8371668d023bb2516b286e5e399b6f}{PioDevice}を実装しています。


\begin{DoxyCode}
57 {
58     assert(pkt->getAddr() == pioAddr);
59     assert(pkt->getSize() == 1);
60     SpeakerControl val = pkt->get<uint8_t>();
61     controlVal.gate = val.gate;
62     //Change the gate value in the timer.
63     if (!val.gate)
64         warn("The gate bit of the pc speaker isn't implemented and "
65                 "is always on.\n");
66     //This would control whether the timer output is hooked up to a physical
67     //speaker. Since M5 can't make noise, it's value doesn't actually do
68     //anything.
69     controlVal.speaker = val.speaker;
70     DPRINTF(PcSpeaker, "Writing to speaker device: gate %s, speaker %s.\n",
71             controlVal.gate ? "on" : "off", controlVal.speaker ? "on" : "off");
72     pkt->makeAtomicResponse();
73     return latency;
74 }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classX86ISA_1_1Speaker_ac8d8966078cc047949fd1bca8feb21b6}{
\index{X86ISA::Speaker@{X86ISA::Speaker}!latency@{latency}}
\index{latency@{latency}!X86ISA::Speaker@{X86ISA::Speaker}}
\subsubsection[{latency}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} {\bf latency}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classX86ISA_1_1Speaker_ac8d8966078cc047949fd1bca8feb21b6}
\hypertarget{classX86ISA_1_1Speaker_a3791b579002f3ffc8a2752a2d711e46e}{
\index{X86ISA::Speaker@{X86ISA::Speaker}!speaker@{speaker}}
\index{speaker@{speaker}!X86ISA::Speaker@{X86ISA::Speaker}}
\subsubsection[{speaker}]{\setlength{\rightskip}{0pt plus 5cm}Bitfield$<$1$>$ {\bf speaker}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classX86ISA_1_1Speaker_a3791b579002f3ffc8a2752a2d711e46e}
\hypertarget{classX86ISA_1_1Speaker_aab951a332e224dfaad6bf461353dc1ce}{
\index{X86ISA::Speaker@{X86ISA::Speaker}!timer@{timer}}
\index{timer@{timer}!X86ISA::Speaker@{X86ISA::Speaker}}
\subsubsection[{timer}]{\setlength{\rightskip}{0pt plus 5cm}{\bf I8254}$\ast$ {\bf timer}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classX86ISA_1_1Speaker_aab951a332e224dfaad6bf461353dc1ce}
\hypertarget{classX86ISA_1_1Speaker_a0d840ef312b28548436ba3651064f023}{
\index{X86ISA::Speaker@{X86ISA::Speaker}!timer@{timer}}
\index{timer@{timer}!X86ISA::Speaker@{X86ISA::Speaker}}
\subsubsection[{timer}]{\setlength{\rightskip}{0pt plus 5cm}Bitfield$<$5$>$ {\bf timer}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classX86ISA_1_1Speaker_a0d840ef312b28548436ba3651064f023}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
dev/x86/\hyperlink{speaker_8hh}{speaker.hh}\item 
dev/x86/\hyperlink{speaker_8cc}{speaker.cc}\end{DoxyCompactItemize}
