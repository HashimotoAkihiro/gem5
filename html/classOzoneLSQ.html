<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス テンプレート OzoneLSQ&lt; Impl &gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>クラス テンプレート OzoneLSQ&lt; Impl &gt;</h1><!-- doxytag: class="OzoneLSQ" -->
<p><code>#include &lt;<a class="el" href="ozone_2lsq__unit_8hh_source.html">lsq_unit.hh</a>&gt;</code></p>

<p><a href="classOzoneLSQ-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>構成</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structOzoneLSQ_1_1SQEntry.html">SQEntry</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ_1_1StoreCompletionEvent.html">StoreCompletionEvent</a></td></tr>
<tr><td colspan="2"><h2>Public 型</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70b">Status</a> { <a class="el" href="classOzoneLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70ba2f5f2c4a8c4f4f0519d503dcdfbf55cb">Running</a>, 
<a class="el" href="classOzoneLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70bad3fa9ae9431d6cb1772f9d9df48cab19">Idle</a>, 
<a class="el" href="classOzoneLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70ba4ba5ae5815b190bd652669e2fdea5ed7">DcacheMissStall</a>, 
<a class="el" href="classOzoneLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70bad01f64e5e67cc64e6ad4152f187a034d">DcacheMissSwitch</a>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef Impl::Params&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a818e103eae798a24a06a0a34631849ea">Params</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef Impl::FullCPU&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a90ba84e54618cc07f2e8f05e046cb5ce">FullCPU</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef Impl::BackEnd&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a3de526baa0cbb2b55bf669a6f7bf81cc">BackEnd</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef Impl::DynInstPtr&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef Impl::IssueStruct&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a568c86f6403070f1cb743e994405ba8b">IssueStruct</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef TheISA::IntReg&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a1355cb78d031430d4d70eb5080267604">IntReg</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; <a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a>, <br class="typebreak"/>
<a class="el" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &gt;::iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a8b43ca5318a59872c61492868e50bab6">LdMapIt</a></td></tr>
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a31be199d33faeff7e77c7ed894288f5b">OzoneLSQ</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#ae8565b0968a8115705f1585e8aa21f75">init</a> (<a class="el" href="classOzoneLSQ.html#a818e103eae798a24a06a0a34631849ea">Params</a> *params, unsigned maxLQEntries, unsigned maxSQEntries, unsigned id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a37627d5d5bba7f4a8690c71c2ab3cb07">name</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#ad491c9766121fc19aa77fd0723e7641d">setCPU</a> (<a class="el" href="classOzoneLSQ.html#a90ba84e54618cc07f2e8f05e046cb5ce">FullCPU</a> *cpu_ptr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a9134276ed85820d74779ad5826580822">setBE</a> (<a class="el" href="classBackEnd.html">BackEnd</a> *be_ptr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a873dd91783f9efb4a590aded1f70d6b0">tick</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a773e88db1aa010c3755e603493bf40ec">insert</a> (<a class="el" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#ad22b3ecafed2bcd9c59fcab049a1cb98">insertLoad</a> (<a class="el" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;load_inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a6a4b4e51bfff3639932ebaba45e8a282">insertStore</a> (<a class="el" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;store_inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a30c6332142c2ecca389ed6ee463c692b">executeLoad</a> (<a class="el" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a091a4d1788ce66e51ceb888bbd85ac08">executeLoad</a> (int lq_idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#aad78b8a37ee5c61e47df58dd39980340">executeStore</a> (<a class="el" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a8ddd26e169a62ec5ae591a9f95934839">commitLoad</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a1201888477c271cea802f0be0081d76b">commitLoad</a> (<a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> &amp;inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a1ae517a923a864a4e3a5aa1eeb2dd2d6">commitLoads</a> (<a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> &amp;youngest_inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a954ce1ce58b67cae49ba127d5ea40701">commitStores</a> (<a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> &amp;youngest_inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a5f04e29d6f6feb8b86460491f2ba7547">writebackStores</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#ae3af532345dbe6519e8272d9cd677230">clearLQ</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a171cd7891063f418b1ee217f5c03537b">clearSQ</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a3bc9500810cb2d5615e29206e2d6499f">resizeLQ</a> (unsigned size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a341dd6a3bd8d240659fd9d698c3b5c65">resizeSQ</a> (unsigned size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a51dd7e304d5413447717826fac6f4921">squash</a> (const <a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> &amp;squashed_num)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a4f720bbfb5fdefdb23516500eeb0b4de">violation</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a30adaf6f5fb6b38b5747f35c419e3f31">getMemDepViolator</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a05c413ba417c6453e99f75d87c958590">loadBlocked</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a028971a565aca048c67ea1c36a6a9d51">numFreeEntries</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a9aa5d5a61b2229931008ac2ea802a3ab">numLoadsReady</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a54460b759fb06e2b18e26657279a6f49">numLoads</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#aa0fc32a4a9d77696f5907f4d25e7d07f">numStores</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a3e70330939fdfc4dbc2f60c1a660584d">isFull</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a5893daf623130be826f492bbff58f757">lqFull</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a477981d1f905d2d398a1527f7149e3c4">sqFull</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a80587b4fe043bbe1995536cb3b361588">dumpInsts</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a24ba9cb3fa1e726321780a20a960c8cd">getCount</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#ad2e4b46255cfb53e85522adeed4e2089">hasStoresToWB</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a276cdbdaf4551f1b846c4e2535c5f882">numStoresToWB</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a338be821734603396bfef8d9fb8f04b0">willWB</a> ()</td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#ad2981b6704bca036af0723daaaebe57e">read</a> (MemReqPtr &amp;req, T &amp;data, int load_idx)</td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">Fault</a>&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a173162a41482ee35c5a15394b4befa4b">write</a> (MemReqPtr &amp;req, T &amp;data, int store_idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#ad43a7408f4e1c1e181bc40ecab6dc593">getLoadHead</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#aee7352adadc6b43b7ce36a8c052eb222">getLoadHeadSeqNum</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#ab9d14b0deb8ab44dc09ac784b162e774">getStoreHead</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a1813b58ab7569d6aeefb5d4e235cceda">getStoreHeadSeqNum</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#af8eb8590fbfa6ecd2f796390677a4c00">isStalled</a> ()</td></tr>
<tr><td colspan="2"><h2>Private メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a12ec7cad6ac51a53bca7795588885e5c">completeStore</a> (int store_idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a4ec2fe6ed54cf88c23fb214b87f850d1">incrStIdx</a> (int &amp;store_idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#aa585a02e67713aeeabb73720e6c89388">decrStIdx</a> (int &amp;store_idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a0e0f98133b2afd7aa1793ba30dd4a96b">incrLdIdx</a> (int &amp;load_idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a73fc7794c8562f58407f59513a891c84">decrLdIdx</a> (int &amp;load_idx)</td></tr>
<tr><td colspan="2"><h2>Private 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOzoneLSQ.html#a90ba84e54618cc07f2e8f05e046cb5ce">FullCPU</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a766385c2941cd46525f4d9dff90200a2">cpu</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBackEnd.html">BackEnd</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a84f815aa1fa864ba2e6d75f5ad2b52d1">be</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">MemInterface *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a22dc8294eecb144fbdd951d2e32e9330">dcacheInterface</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPageTable.html">PageTable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#ad14ffa23ad731f6003755b643f999049">pTable</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#adfd96fbbaa327a31d20f0d4134418fad">lsqID</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOzoneLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70b">Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a6cdf6e6db875a442f3ab6db542bd2bb5">_status</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt; <a class="el" href="structOzoneLSQ_1_1SQEntry.html">SQEntry</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt; <a class="el" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a38c8af5392da70119dc5cce4e3637cbc">SQEntries</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#ac09af89928d2ef4da4cbdcfce26fa3f5">loadHead</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a973a489225da164cc85e690f13c86841">loadTail</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a6e87b6f77102183080ea6ab8599b26a9">storeHead</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#acd5c7fbb5578b5cb505ffff16bbf6a8b">storeTail</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#ab2e23636971c40e7ed945026b2a184e1">cachePorts</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a03435d626b7567ed154de5d7d8c3d419">usedPorts</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e">Counter</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a8b4696062ef09ab956804a7a99491853">lastDcacheStall</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt; <a class="el" href="structIssueStruct.html">IssueStruct</a> &gt;::wire&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#af6f43373b6586aa8c486538fb076effb">fromIssue</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a6f8bff553ad30865c7d0c62e05421eb8">stalled</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#afe1cdcfca6b44c28581d862228adc3da">stallingStoreIsn</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#af55bc9000c8b4e4cfcfbd018feca12a7">stallingLoadIdx</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a95dc31b4ce3ebcb6b9d75a510b3a128c">isLoadBlocked</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a7123aa8b10829cc4712dff5454e13978">loadFaultInst</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#ab98cf7d5235b7402e8916e78569f4ab2">storeFaultInst</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a270a20c3fa52139e0538288275db9d22">memDepViolator</a></td></tr>
<tr><td colspan="2"><h2>フレンド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOzoneLSQ.html#a8f5ca1839f53a90564710f1349dd0199">StoreCompletionEvent</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>説明</h2>
<h3>template&lt;class Impl&gt;<br/>
 class OzoneLSQ&lt; Impl &gt;</h3>

<p>Class that implements the actual LQ and SQ for each specific thread. Both are circular queues; load entries are freed upon committing, while store entries are freed once they writeback. The <a class="el" href="classLSQUnit.html">LSQUnit</a> tracks if there are memory ordering violations, and also detects partial load to store forwarding cases (a store only has part of a load's data) that requires the load to wait until the store writes back. In the former case it holds onto the instruction until the dependence unit looks at it, and in the latter it stalls the <a class="el" href="classLSQ.html">LSQ</a> until the store writes back. At that point the load is replayed. </p>
<hr/><h2>型定義</h2>
<a class="anchor" id="a3de526baa0cbb2b55bf669a6f7bf81cc"></a><!-- doxytag: member="OzoneLSQ::BackEnd" ref="a3de526baa0cbb2b55bf669a6f7bf81cc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef Impl::BackEnd <a class="el" href="classBackEnd.html">BackEnd</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a028ce10889c5f6450239d9e9a7347976"></a><!-- doxytag: member="OzoneLSQ::DynInstPtr" ref="a028ce10889c5f6450239d9e9a7347976" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef Impl::DynInstPtr <a class="el" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a90ba84e54618cc07f2e8f05e046cb5ce"></a><!-- doxytag: member="OzoneLSQ::FullCPU" ref="a90ba84e54618cc07f2e8f05e046cb5ce" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef Impl::FullCPU <a class="el" href="classOzoneLSQ.html#a90ba84e54618cc07f2e8f05e046cb5ce">FullCPU</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1355cb78d031430d4d70eb5080267604"></a><!-- doxytag: member="OzoneLSQ::IntReg" ref="a1355cb78d031430d4d70eb5080267604" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef TheISA::IntReg <a class="el" href="classOzoneLSQ.html#a1355cb78d031430d4d70eb5080267604">IntReg</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a568c86f6403070f1cb743e994405ba8b"></a><!-- doxytag: member="OzoneLSQ::IssueStruct" ref="a568c86f6403070f1cb743e994405ba8b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef Impl::IssueStruct <a class="el" href="structIssueStruct.html">IssueStruct</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8b43ca5318a59872c61492868e50bab6"></a><!-- doxytag: member="OzoneLSQ::LdMapIt" ref="a8b43ca5318a59872c61492868e50bab6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;<a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a>, <a class="el" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>&gt;::iterator <a class="el" href="classOzoneLSQ.html#a8b43ca5318a59872c61492868e50bab6">LdMapIt</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a818e103eae798a24a06a0a34631849ea"></a><!-- doxytag: member="OzoneLSQ::Params" ref="a818e103eae798a24a06a0a34631849ea" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef Impl::Params <a class="el" href="classOzoneLSQ.html#a818e103eae798a24a06a0a34631849ea">Params</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>列挙型</h2>
<a class="anchor" id="a67a0db04d321a74b7e7fcfd3f1a3f70b"></a><!-- doxytag: member="OzoneLSQ::Status" ref="a67a0db04d321a74b7e7fcfd3f1a3f70b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classOzoneLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70b">Status</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>列挙型の値: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a67a0db04d321a74b7e7fcfd3f1a3f70ba2f5f2c4a8c4f4f0519d503dcdfbf55cb"></a><!-- doxytag: member="Running" ref="a67a0db04d321a74b7e7fcfd3f1a3f70ba2f5f2c4a8c4f4f0519d503dcdfbf55cb" args="" -->Running</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a67a0db04d321a74b7e7fcfd3f1a3f70bad3fa9ae9431d6cb1772f9d9df48cab19"></a><!-- doxytag: member="Idle" ref="a67a0db04d321a74b7e7fcfd3f1a3f70bad3fa9ae9431d6cb1772f9d9df48cab19" args="" -->Idle</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a67a0db04d321a74b7e7fcfd3f1a3f70ba4ba5ae5815b190bd652669e2fdea5ed7"></a><!-- doxytag: member="DcacheMissStall" ref="a67a0db04d321a74b7e7fcfd3f1a3f70ba4ba5ae5815b190bd652669e2fdea5ed7" args="" -->DcacheMissStall</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a67a0db04d321a74b7e7fcfd3f1a3f70bad01f64e5e67cc64e6ad4152f187a034d"></a><!-- doxytag: member="DcacheMissSwitch" ref="a67a0db04d321a74b7e7fcfd3f1a3f70bad01f64e5e67cc64e6ad4152f187a034d" args="" -->DcacheMissSwitch</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00276"></a>00276                 {
<a name="l00277"></a>00277         <a class="code" href="classOzoneLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70ba2f5f2c4a8c4f4f0519d503dcdfbf55cb">Running</a>,
<a name="l00278"></a>00278         <a class="code" href="classOzoneLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70bad3fa9ae9431d6cb1772f9d9df48cab19">Idle</a>,
<a name="l00279"></a>00279         <a class="code" href="classOzoneLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70ba4ba5ae5815b190bd652669e2fdea5ed7">DcacheMissStall</a>,
<a name="l00280"></a>00280         <a class="code" href="classOzoneLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70bad01f64e5e67cc64e6ad4152f187a034d">DcacheMissSwitch</a>
<a name="l00281"></a>00281     };
</pre></div></p>

</div>
</div>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="a31be199d33faeff7e77c7ed894288f5b"></a><!-- doxytag: member="OzoneLSQ::OzoneLSQ" ref="a31be199d33faeff7e77c7ed894288f5b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOzoneLSQ.html">OzoneLSQ</a> </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Constructs an <a class="el" href="classLSQ.html">LSQ</a> unit. <a class="el" href="classOzoneLSQ.html#ae8565b0968a8115705f1585e8aa21f75">init()</a> must be called prior to use. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00073"></a>00073     : <a class="code" href="classOzoneLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a>(0), <a class="code" href="classOzoneLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a>(0), <a class="code" href="classOzoneLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a>(0), <a class="code" href="classOzoneLSQ.html#a6f8bff553ad30865c7d0c62e05421eb8">stalled</a>(<span class="keyword">false</span>), <a class="code" href="classOzoneLSQ.html#a95dc31b4ce3ebcb6b9d75a510b3a128c">isLoadBlocked</a>(<span class="keyword">false</span>)
<a name="l00074"></a>00074 {
<a name="l00075"></a>00075 }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="ae3af532345dbe6519e8272d9cd677230"></a><!-- doxytag: member="OzoneLSQ::clearLQ" ref="ae3af532345dbe6519e8272d9cd677230" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clearLQ </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Clears all the entries in the LQ. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00118"></a>00118 {
<a name="l00119"></a>00119     <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>.clear();
<a name="l00120"></a>00120 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a171cd7891063f418b1ee217f5c03537b"></a><!-- doxytag: member="OzoneLSQ::clearSQ" ref="a171cd7891063f418b1ee217f5c03537b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clearSQ </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Clears all the entries in the SQ. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00125"></a>00125 {
<a name="l00126"></a>00126     <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>.clear();
<a name="l00127"></a>00127 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1201888477c271cea802f0be0081d76b"></a><!-- doxytag: member="OzoneLSQ::commitLoad" ref="a1201888477c271cea802f0be0081d76b" args="(InstSeqNum &amp;inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void commitLoad </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Commits a specific load, given by the sequence number. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00458"></a>00458 {
<a name="l00459"></a>00459     <span class="comment">// Hopefully I don&apos;t use this function too much</span>
<a name="l00460"></a>00460     <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Don&apos;t use this function!&quot;</span>);
<a name="l00461"></a>00461 
<a name="l00462"></a>00462     <span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = <a class="code" href="classOzoneLSQ.html#ac09af89928d2ef4da4cbdcfce26fa3f5">loadHead</a>;
<a name="l00463"></a>00463     <span class="keywordflow">while</span> (1) {
<a name="l00464"></a>00464         <span class="keywordflow">if</span> (i == <a class="code" href="classOzoneLSQ.html#a973a489225da164cc85e690f13c86841">loadTail</a>) {
<a name="l00465"></a>00465             assert(0 &amp;&amp; <span class="stringliteral">&quot;Load not in the queue!&quot;</span>);
<a name="l00466"></a>00466         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[i]-&gt;seqNum == inst) {
<a name="l00467"></a>00467             <span class="keywordflow">break</span>;
<a name="l00468"></a>00468         }
<a name="l00469"></a>00469 
<a name="l00470"></a>00470         ++i;
<a name="l00471"></a>00471         <span class="keywordflow">if</span> (i &gt;= <a class="code" href="classOzoneLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a>) {
<a name="l00472"></a>00472             i = 0;
<a name="l00473"></a>00473         }
<a name="l00474"></a>00474     }
<a name="l00475"></a>00475 
<a name="l00476"></a>00476 <span class="comment">//    loadQueue[i]-&gt;removeInLSQ();</span>
<a name="l00477"></a>00477     <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[i] = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00478"></a>00478     --<a class="code" href="classOzoneLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a>;
<a name="l00479"></a>00479 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8ddd26e169a62ec5ae591a9f95934839"></a><!-- doxytag: member="OzoneLSQ::commitLoad" ref="a8ddd26e169a62ec5ae591a9f95934839" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void commitLoad </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Commits the head load. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00441"></a>00441 {
<a name="l00442"></a>00442     assert(<a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[<a class="code" href="classOzoneLSQ.html#ac09af89928d2ef4da4cbdcfce26fa3f5">loadHead</a>]);
<a name="l00443"></a>00443 
<a name="l00444"></a>00444     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;[sn:%lli] Committing head load instruction, PC %#x\n&quot;</span>,
<a name="l00445"></a>00445             <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[<a class="code" href="classOzoneLSQ.html#ac09af89928d2ef4da4cbdcfce26fa3f5">loadHead</a>]-&gt;seqNum, <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[<a class="code" href="classOzoneLSQ.html#ac09af89928d2ef4da4cbdcfce26fa3f5">loadHead</a>]-&gt;readPC());
<a name="l00446"></a>00446 
<a name="l00447"></a>00447 
<a name="l00448"></a>00448     <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[<a class="code" href="classOzoneLSQ.html#ac09af89928d2ef4da4cbdcfce26fa3f5">loadHead</a>] = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00449"></a>00449 
<a name="l00450"></a>00450     <a class="code" href="classOzoneLSQ.html#a0e0f98133b2afd7aa1793ba30dd4a96b">incrLdIdx</a>(<a class="code" href="classOzoneLSQ.html#ac09af89928d2ef4da4cbdcfce26fa3f5">loadHead</a>);
<a name="l00451"></a>00451 
<a name="l00452"></a>00452     --<a class="code" href="classOzoneLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a>;
<a name="l00453"></a>00453 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1ae517a923a864a4e3a5aa1eeb2dd2d6"></a><!-- doxytag: member="OzoneLSQ::commitLoads" ref="a1ae517a923a864a4e3a5aa1eeb2dd2d6" args="(InstSeqNum &amp;youngest_inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void commitLoads </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>youngest_inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Commits loads older than a specific sequence number. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00484"></a>00484 {
<a name="l00485"></a>00485     assert(<a class="code" href="classOzoneLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a> == 0 || <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[<a class="code" href="classOzoneLSQ.html#ac09af89928d2ef4da4cbdcfce26fa3f5">loadHead</a>]);
<a name="l00486"></a>00486 
<a name="l00487"></a>00487     <span class="keywordflow">while</span> (<a class="code" href="classOzoneLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a> != 0 &amp;&amp; <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[<a class="code" href="classOzoneLSQ.html#ac09af89928d2ef4da4cbdcfce26fa3f5">loadHead</a>]-&gt;seqNum &lt;= youngest_inst) {
<a name="l00488"></a>00488         <a class="code" href="classOzoneLSQ.html#a8ddd26e169a62ec5ae591a9f95934839">commitLoad</a>();
<a name="l00489"></a>00489     }
<a name="l00490"></a>00490 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a954ce1ce58b67cae49ba127d5ea40701"></a><!-- doxytag: member="OzoneLSQ::commitStores" ref="a954ce1ce58b67cae49ba127d5ea40701" args="(InstSeqNum &amp;youngest_inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void commitStores </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>youngest_inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Commits stores older than a specific sequence number. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00495"></a>00495 {
<a name="l00496"></a>00496     assert(<a class="code" href="classOzoneLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a> == 0 || <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[<a class="code" href="classOzoneLSQ.html#a6e87b6f77102183080ea6ab8599b26a9">storeHead</a>].inst);
<a name="l00497"></a>00497 
<a name="l00498"></a>00498     <span class="keywordtype">int</span> store_idx = <a class="code" href="classOzoneLSQ.html#a6e87b6f77102183080ea6ab8599b26a9">storeHead</a>;
<a name="l00499"></a>00499 
<a name="l00500"></a>00500     <span class="keywordflow">while</span> (store_idx != <a class="code" href="classOzoneLSQ.html#acd5c7fbb5578b5cb505ffff16bbf6a8b">storeTail</a>) {
<a name="l00501"></a>00501         assert(<a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].inst);
<a name="l00502"></a>00502         <span class="keywordflow">if</span> (!<a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].canWB) {
<a name="l00503"></a>00503             <span class="keywordflow">if</span> (<a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].inst-&gt;seqNum &gt; youngest_inst) {
<a name="l00504"></a>00504                 <span class="keywordflow">break</span>;
<a name="l00505"></a>00505             }
<a name="l00506"></a>00506             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Marking store as able to write back, PC &quot;</span>
<a name="l00507"></a>00507                     <span class="stringliteral">&quot;%#x [sn:%lli]\n&quot;</span>,
<a name="l00508"></a>00508                     <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].inst-&gt;readPC(),
<a name="l00509"></a>00509                     <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].inst-&gt;seqNum);
<a name="l00510"></a>00510 
<a name="l00511"></a>00511             <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].canWB = <span class="keyword">true</span>;
<a name="l00512"></a>00512 
<a name="l00513"></a>00513 <span class="comment">//            --stores;</span>
<a name="l00514"></a>00514             ++<a class="code" href="classOzoneLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a>;
<a name="l00515"></a>00515         }
<a name="l00516"></a>00516 
<a name="l00517"></a>00517         <a class="code" href="classOzoneLSQ.html#a4ec2fe6ed54cf88c23fb214b87f850d1">incrStIdx</a>(store_idx);
<a name="l00518"></a>00518     }
<a name="l00519"></a>00519 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a12ec7cad6ac51a53bca7795588885e5c"></a><!-- doxytag: member="OzoneLSQ::completeStore" ref="a12ec7cad6ac51a53bca7795588885e5c" args="(int store_idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void completeStore </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>store_idx</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Completes the store at the specified index. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00780"></a>00780 {
<a name="l00781"></a>00781     assert(<a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].inst);
<a name="l00782"></a>00782     <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].completed = <span class="keyword">true</span>;
<a name="l00783"></a>00783     --<a class="code" href="classOzoneLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a>;
<a name="l00784"></a>00784     <span class="comment">// A bit conservative because a store completion may not free up entries,</span>
<a name="l00785"></a>00785     <span class="comment">// but hopefully avoids two store completions in one cycle from making</span>
<a name="l00786"></a>00786     <span class="comment">// the CPU tick twice.</span>
<a name="l00787"></a>00787 <span class="comment">//    cpu-&gt;activityThisCycle();</span>
<a name="l00788"></a>00788 
<a name="l00789"></a>00789     <span class="keywordflow">if</span> (store_idx == <a class="code" href="classOzoneLSQ.html#a6e87b6f77102183080ea6ab8599b26a9">storeHead</a>) {
<a name="l00790"></a>00790         <span class="keywordflow">do</span> {
<a name="l00791"></a>00791             <a class="code" href="classOzoneLSQ.html#a4ec2fe6ed54cf88c23fb214b87f850d1">incrStIdx</a>(<a class="code" href="classOzoneLSQ.html#a6e87b6f77102183080ea6ab8599b26a9">storeHead</a>);
<a name="l00792"></a>00792 
<a name="l00793"></a>00793             --<a class="code" href="classOzoneLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a>;
<a name="l00794"></a>00794         } <span class="keywordflow">while</span> (<a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[<a class="code" href="classOzoneLSQ.html#a6e87b6f77102183080ea6ab8599b26a9">storeHead</a>].completed &amp;&amp;
<a name="l00795"></a>00795                  <a class="code" href="classOzoneLSQ.html#a6e87b6f77102183080ea6ab8599b26a9">storeHead</a> != <a class="code" href="classOzoneLSQ.html#acd5c7fbb5578b5cb505ffff16bbf6a8b">storeTail</a>);
<a name="l00796"></a>00796 
<a name="l00797"></a>00797 <span class="comment">//        be-&gt;updateLSQNextCycle = true;</span>
<a name="l00798"></a>00798     }
<a name="l00799"></a>00799 
<a name="l00800"></a>00800     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Store head idx:%i\n&quot;</span>, <a class="code" href="classOzoneLSQ.html#a6e87b6f77102183080ea6ab8599b26a9">storeHead</a>);
<a name="l00801"></a>00801 
<a name="l00802"></a>00802     <span class="keywordflow">if</span> (<a class="code" href="classOzoneLSQ.html#af8eb8590fbfa6ecd2f796390677a4c00">isStalled</a>() &amp;&amp;
<a name="l00803"></a>00803         <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].inst-&gt;seqNum == <a class="code" href="classOzoneLSQ.html#afe1cdcfca6b44c28581d862228adc3da">stallingStoreIsn</a>) {
<a name="l00804"></a>00804         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Unstalling, stalling store [sn:%lli] &quot;</span>
<a name="l00805"></a>00805                 <span class="stringliteral">&quot;load idx:%i\n&quot;</span>,
<a name="l00806"></a>00806                 <a class="code" href="classOzoneLSQ.html#afe1cdcfca6b44c28581d862228adc3da">stallingStoreIsn</a>, <a class="code" href="classOzoneLSQ.html#af55bc9000c8b4e4cfcfbd018feca12a7">stallingLoadIdx</a>);
<a name="l00807"></a>00807         <a class="code" href="classOzoneLSQ.html#a6f8bff553ad30865c7d0c62e05421eb8">stalled</a> = <span class="keyword">false</span>;
<a name="l00808"></a>00808         <a class="code" href="classOzoneLSQ.html#afe1cdcfca6b44c28581d862228adc3da">stallingStoreIsn</a> = 0;
<a name="l00809"></a>00809         <a class="code" href="classOzoneLSQ.html#a84f815aa1fa864ba2e6d75f5ad2b52d1">be</a>-&gt;<a class="code" href="classBackEnd.html#ae165df775b4de9e9430228c7f04c2bc9">replayMemInst</a>(<a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[<a class="code" href="classOzoneLSQ.html#af55bc9000c8b4e4cfcfbd018feca12a7">stallingLoadIdx</a>]);
<a name="l00810"></a>00810     }
<a name="l00811"></a>00811 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a73fc7794c8562f58407f59513a891c84"></a><!-- doxytag: member="OzoneLSQ::decrLdIdx" ref="a73fc7794c8562f58407f59513a891c84" args="(int &amp;load_idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void decrLdIdx </td>
          <td>(</td>
          <td class="paramtype">int &amp;&nbsp;</td>
          <td class="paramname"> <em>load_idx</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Decrements the given load index (circular queue). </p>

<p><div class="fragment"><pre class="fragment"><a name="l00840"></a>00840 {
<a name="l00841"></a>00841     <span class="keywordflow">if</span> (--load_idx &lt; 0)
<a name="l00842"></a>00842         load_idx += <a class="code" href="classOzoneLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a>;
<a name="l00843"></a>00843 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa585a02e67713aeeabb73720e6c89388"></a><!-- doxytag: member="OzoneLSQ::decrStIdx" ref="aa585a02e67713aeeabb73720e6c89388" args="(int &amp;store_idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void decrStIdx </td>
          <td>(</td>
          <td class="paramtype">int &amp;&nbsp;</td>
          <td class="paramname"> <em>store_idx</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Decrements the given store index (circular queue). </p>

<p><div class="fragment"><pre class="fragment"><a name="l00824"></a>00824 {
<a name="l00825"></a>00825     <span class="keywordflow">if</span> (--store_idx &lt; 0)
<a name="l00826"></a>00826         store_idx += <a class="code" href="classOzoneLSQ.html#a38c8af5392da70119dc5cce4e3637cbc">SQEntries</a>;
<a name="l00827"></a>00827 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a80587b4fe043bbe1995536cb3b361588"></a><!-- doxytag: member="OzoneLSQ::dumpInsts" ref="a80587b4fe043bbe1995536cb3b361588" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dumpInsts </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Debugging function to dump instructions in the <a class="el" href="classLSQ.html">LSQ</a>. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00748"></a>00748 {
<a name="l00749"></a>00749     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Load store queue: Dumping instructions.\n&quot;</span>);
<a name="l00750"></a>00750     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Load queue size: %i\n&quot;</span>, <a class="code" href="classOzoneLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a>);
<a name="l00751"></a>00751     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Load queue: &quot;</span>);
<a name="l00752"></a>00752 
<a name="l00753"></a>00753     <span class="keywordtype">int</span> load_idx = <a class="code" href="classOzoneLSQ.html#ac09af89928d2ef4da4cbdcfce26fa3f5">loadHead</a>;
<a name="l00754"></a>00754 
<a name="l00755"></a>00755     <span class="keywordflow">while</span> (load_idx != <a class="code" href="classOzoneLSQ.html#a973a489225da164cc85e690f13c86841">loadTail</a> &amp;&amp; <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[load_idx]) {
<a name="l00756"></a>00756         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;[sn:%lli] %#x &quot;</span>, <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[load_idx]-&gt;seqNum,
<a name="l00757"></a>00757                 <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[load_idx]-&gt;readPC());
<a name="l00758"></a>00758 
<a name="l00759"></a>00759         <a class="code" href="classOzoneLSQ.html#a0e0f98133b2afd7aa1793ba30dd4a96b">incrLdIdx</a>(load_idx);
<a name="l00760"></a>00760     }
<a name="l00761"></a>00761 
<a name="l00762"></a>00762     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;\nStore queue size: %i\n&quot;</span>, <a class="code" href="classOzoneLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a>);
<a name="l00763"></a>00763     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Store queue: &quot;</span>);
<a name="l00764"></a>00764 
<a name="l00765"></a>00765     <span class="keywordtype">int</span> store_idx = <a class="code" href="classOzoneLSQ.html#a6e87b6f77102183080ea6ab8599b26a9">storeHead</a>;
<a name="l00766"></a>00766 
<a name="l00767"></a>00767     <span class="keywordflow">while</span> (store_idx != <a class="code" href="classOzoneLSQ.html#acd5c7fbb5578b5cb505ffff16bbf6a8b">storeTail</a> &amp;&amp; <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].inst) {
<a name="l00768"></a>00768         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;[sn:%lli] %#x &quot;</span>, <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].inst-&gt;seqNum,
<a name="l00769"></a>00769                 <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].inst-&gt;readPC());
<a name="l00770"></a>00770 
<a name="l00771"></a>00771         <a class="code" href="classOzoneLSQ.html#a4ec2fe6ed54cf88c23fb214b87f850d1">incrStIdx</a>(store_idx);
<a name="l00772"></a>00772     }
<a name="l00773"></a>00773 
<a name="l00774"></a>00774     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00775"></a>00775 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a091a4d1788ce66e51ceb888bbd85ac08"></a><!-- doxytag: member="OzoneLSQ::executeLoad" ref="a091a4d1788ce66e51ceb888bbd85ac08" args="(int lq_idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">Fault</a> executeLoad </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>lq_idx</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00352"></a>00352 {
<a name="l00353"></a>00353     <span class="comment">// Very hackish.  Not sure the best way to check that this</span>
<a name="l00354"></a>00354     <span class="comment">// instruction is at the head of the ROB.  I should have some sort</span>
<a name="l00355"></a>00355     <span class="comment">// of extra information here so that I&apos;m not overloading the</span>
<a name="l00356"></a>00356     <span class="comment">// canCommit signal for 15 different things.</span>
<a name="l00357"></a>00357     <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[lq_idx]-&gt;setCanCommit();
<a name="l00358"></a>00358     <a class="code" href="classRefCountingPtr.html">Fault</a> ret_fault = <a class="code" href="classOzoneLSQ.html#a30c6332142c2ecca389ed6ee463c692b">executeLoad</a>(<a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[lq_idx]);
<a name="l00359"></a>00359     <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[lq_idx]-&gt;clearCanCommit();
<a name="l00360"></a>00360     <span class="keywordflow">return</span> ret_fault;
<a name="l00361"></a>00361 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a30c6332142c2ecca389ed6ee463c692b"></a><!-- doxytag: member="OzoneLSQ::executeLoad" ref="a30c6332142c2ecca389ed6ee463c692b" args="(DynInstPtr &amp;inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">Fault</a> executeLoad </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Executes a load instruction. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00308"></a>00308 {
<a name="l00309"></a>00309     <span class="comment">// Execute a specific load.</span>
<a name="l00310"></a>00310     <a class="code" href="classRefCountingPtr.html">Fault</a> load_fault = <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00311"></a>00311 
<a name="l00312"></a>00312     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Executing load PC %#x, [sn:%lli]\n&quot;</span>,
<a name="l00313"></a>00313             inst-&gt;readPC(),inst-&gt;seqNum);
<a name="l00314"></a>00314 
<a name="l00315"></a>00315     <span class="comment">// Make sure it&apos;s really in the list.</span>
<a name="l00316"></a>00316     <span class="comment">// Normally it should always be in the list.  However,</span>
<a name="l00317"></a>00317     <span class="comment">/* due to a syscall it may not be the list.</span>
<a name="l00318"></a>00318 <span class="comment">#ifdef DEBUG</span>
<a name="l00319"></a>00319 <span class="comment">    int i = loadHead;</span>
<a name="l00320"></a>00320 <span class="comment">    while (1) {</span>
<a name="l00321"></a>00321 <span class="comment">        if (i == loadTail &amp;&amp; !find(inst)) {</span>
<a name="l00322"></a>00322 <span class="comment">            assert(0 &amp;&amp; &quot;Load not in the queue!&quot;);</span>
<a name="l00323"></a>00323 <span class="comment">        } else if (loadQueue[i] == inst) {</span>
<a name="l00324"></a>00324 <span class="comment">            break;</span>
<a name="l00325"></a>00325 <span class="comment">        }</span>
<a name="l00326"></a>00326 <span class="comment"></span>
<a name="l00327"></a>00327 <span class="comment">        i = i + 1;</span>
<a name="l00328"></a>00328 <span class="comment">        if (i &gt;= LQEntries) {</span>
<a name="l00329"></a>00329 <span class="comment">            i = 0;</span>
<a name="l00330"></a>00330 <span class="comment">        }</span>
<a name="l00331"></a>00331 <span class="comment">    }</span>
<a name="l00332"></a>00332 <span class="comment">#endif // DEBUG*/</span>
<a name="l00333"></a>00333 
<a name="l00334"></a>00334     load_fault = inst-&gt;initiateAcc();
<a name="l00335"></a>00335 
<a name="l00336"></a>00336     <span class="comment">// Might want to make sure that I&apos;m not overwriting a previously faulting</span>
<a name="l00337"></a>00337     <span class="comment">// instruction that hasn&apos;t been checked yet.</span>
<a name="l00338"></a>00338     <span class="comment">// Actually probably want the oldest faulting load</span>
<a name="l00339"></a>00339     <span class="keywordflow">if</span> (load_fault != <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>) {
<a name="l00340"></a>00340         <span class="comment">// Maybe just set it as can commit here, although that might cause</span>
<a name="l00341"></a>00341         <span class="comment">// some other problems with sending traps to the ROB too quickly.</span>
<a name="l00342"></a>00342 <span class="comment">//        iewStage-&gt;instToCommit(inst);</span>
<a name="l00343"></a>00343 <span class="comment">//        iewStage-&gt;activityThisCycle();</span>
<a name="l00344"></a>00344     }
<a name="l00345"></a>00345 
<a name="l00346"></a>00346     <span class="keywordflow">return</span> load_fault;
<a name="l00347"></a>00347 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aad78b8a37ee5c61e47df58dd39980340"></a><!-- doxytag: member="OzoneLSQ::executeStore" ref="aad78b8a37ee5c61e47df58dd39980340" args="(DynInstPtr &amp;inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">Fault</a> executeStore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Executes a store instruction. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00366"></a>00366 {
<a name="l00367"></a>00367     <span class="comment">// Make sure that a store exists.</span>
<a name="l00368"></a>00368     assert(<a class="code" href="classOzoneLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a> != 0);
<a name="l00369"></a>00369 
<a name="l00370"></a>00370     <span class="keywordtype">int</span> store_idx = store_inst-&gt;sqIdx;
<a name="l00371"></a>00371 
<a name="l00372"></a>00372     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Executing store PC %#x [sn:%lli]\n&quot;</span>,
<a name="l00373"></a>00373             store_inst-&gt;readPC(), store_inst-&gt;seqNum);
<a name="l00374"></a>00374 
<a name="l00375"></a>00375     <span class="comment">// Check the recently completed loads to see if any match this store&apos;s</span>
<a name="l00376"></a>00376     <span class="comment">// address.  If so, then we have a memory ordering violation.</span>
<a name="l00377"></a>00377     <span class="keywordtype">int</span> load_idx = store_inst-&gt;lqIdx;
<a name="l00378"></a>00378 
<a name="l00379"></a>00379     <a class="code" href="classRefCountingPtr.html">Fault</a> store_fault = store_inst-&gt;initiateAcc();
<a name="l00380"></a>00380 
<a name="l00381"></a>00381     <span class="comment">// Store size should now be available.  Use it to get proper offset for</span>
<a name="l00382"></a>00382     <span class="comment">// addr comparisons.</span>
<a name="l00383"></a>00383     <span class="keywordtype">int</span> size = <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].size;
<a name="l00384"></a>00384 
<a name="l00385"></a>00385     <span class="keywordflow">if</span> (size == 0) {
<a name="l00386"></a>00386         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>,<span class="stringliteral">&quot;Fault on Store PC %#x, [sn:%lli],Size = 0\n&quot;</span>,
<a name="l00387"></a>00387                 store_inst-&gt;readPC(),store_inst-&gt;seqNum);
<a name="l00388"></a>00388 
<a name="l00389"></a>00389         <span class="keywordflow">return</span> store_fault;
<a name="l00390"></a>00390     }
<a name="l00391"></a>00391 
<a name="l00392"></a>00392     assert(store_fault == <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>);
<a name="l00393"></a>00393 
<a name="l00394"></a>00394     <span class="keywordflow">if</span> (!<a class="code" href="classOzoneLSQ.html#ab98cf7d5235b7402e8916e78569f4ab2">storeFaultInst</a>) {
<a name="l00395"></a>00395         <span class="keywordflow">if</span> (store_fault != <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>) {
<a name="l00396"></a>00396             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Fault in a store instruction!&quot;</span>);
<a name="l00397"></a>00397             <a class="code" href="classOzoneLSQ.html#ab98cf7d5235b7402e8916e78569f4ab2">storeFaultInst</a> = store_inst;
<a name="l00398"></a>00398         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (store_inst-&gt;isNonSpeculative()) {
<a name="l00399"></a>00399             <span class="comment">// Nonspeculative accesses (namely store conditionals)</span>
<a name="l00400"></a>00400             <span class="comment">// need to set themselves as able to writeback if we</span>
<a name="l00401"></a>00401             <span class="comment">// haven&apos;t had a fault by here.</span>
<a name="l00402"></a>00402             <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].canWB = <span class="keyword">true</span>;
<a name="l00403"></a>00403 
<a name="l00404"></a>00404             ++<a class="code" href="classOzoneLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a>;
<a name="l00405"></a>00405         }
<a name="l00406"></a>00406     }
<a name="l00407"></a>00407 
<a name="l00408"></a>00408     <span class="keywordflow">if</span> (!<a class="code" href="classOzoneLSQ.html#a270a20c3fa52139e0538288275db9d22">memDepViolator</a>) {
<a name="l00409"></a>00409         <span class="keywordflow">while</span> (load_idx != <a class="code" href="classOzoneLSQ.html#a973a489225da164cc85e690f13c86841">loadTail</a>) {
<a name="l00410"></a>00410             <span class="comment">// Actually should only check loads that have actually executed</span>
<a name="l00411"></a>00411             <span class="comment">// Might be safe because effAddr is set to InvalAddr when the</span>
<a name="l00412"></a>00412             <span class="comment">// dyn inst is created.</span>
<a name="l00413"></a>00413 
<a name="l00414"></a>00414             <span class="comment">// Must actually check all addrs in the proper size range</span>
<a name="l00415"></a>00415             <span class="comment">// Which is more correct than needs to be.  What if for now we just</span>
<a name="l00416"></a>00416             <span class="comment">// assume all loads are quad-word loads, and do the addr based</span>
<a name="l00417"></a>00417             <span class="comment">// on that.</span>
<a name="l00418"></a>00418             <span class="comment">// @todo: Fix this, magic number being used here</span>
<a name="l00419"></a>00419             <span class="keywordflow">if</span> ((<a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[load_idx]-&gt;<a class="code" href="inorder__dyn__inst_8cc.html#a849e0e24d00a194aec793c47bb536ccc">effAddr</a> &gt;&gt; 8) ==
<a name="l00420"></a>00420                 (store_inst-&gt;effAddr &gt;&gt; 8)) {
<a name="l00421"></a>00421                 <span class="comment">// A load incorrectly passed this store.  Squash and refetch.</span>
<a name="l00422"></a>00422                 <span class="comment">// For now return a fault to show that it was unsuccessful.</span>
<a name="l00423"></a>00423                 <a class="code" href="classOzoneLSQ.html#a270a20c3fa52139e0538288275db9d22">memDepViolator</a> = <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[load_idx];
<a name="l00424"></a>00424 
<a name="l00425"></a>00425                 <span class="keywordflow">return</span> TheISA::genMachineCheckFault();
<a name="l00426"></a>00426             }
<a name="l00427"></a>00427 
<a name="l00428"></a>00428             <a class="code" href="classOzoneLSQ.html#a0e0f98133b2afd7aa1793ba30dd4a96b">incrLdIdx</a>(load_idx);
<a name="l00429"></a>00429         }
<a name="l00430"></a>00430 
<a name="l00431"></a>00431         <span class="comment">// If we&apos;ve reached this point, there was no violation.</span>
<a name="l00432"></a>00432         <a class="code" href="classOzoneLSQ.html#a270a20c3fa52139e0538288275db9d22">memDepViolator</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00433"></a>00433     }
<a name="l00434"></a>00434 
<a name="l00435"></a>00435     <span class="keywordflow">return</span> store_fault;
<a name="l00436"></a>00436 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a24ba9cb3fa1e726321780a20a960c8cd"></a><!-- doxytag: member="OzoneLSQ::getCount" ref="a24ba9cb3fa1e726321780a20a960c8cd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned getCount </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the number of instructions in the <a class="el" href="classLSQ.html">LSQ</a>. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00207"></a>00207 { <span class="keywordflow">return</span> <a class="code" href="classOzoneLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a> + <a class="code" href="classOzoneLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad43a7408f4e1c1e181bc40ecab6dc593"></a><!-- doxytag: member="OzoneLSQ::getLoadHead" ref="ad43a7408f4e1c1e181bc40ecab6dc593" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getLoadHead </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the index of the head load instruction. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00377"></a>00377 { <span class="keywordflow">return</span> <a class="code" href="classOzoneLSQ.html#ac09af89928d2ef4da4cbdcfce26fa3f5">loadHead</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aee7352adadc6b43b7ce36a8c052eb222"></a><!-- doxytag: member="OzoneLSQ::getLoadHeadSeqNum" ref="aee7352adadc6b43b7ce36a8c052eb222" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> getLoadHeadSeqNum </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the sequence number of the head load instruction. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00380"></a>00380     {
<a name="l00381"></a>00381         <span class="keywordflow">if</span> (<a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[<a class="code" href="classOzoneLSQ.html#ac09af89928d2ef4da4cbdcfce26fa3f5">loadHead</a>]) {
<a name="l00382"></a>00382             <span class="keywordflow">return</span> <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[loadHead]-&gt;seqNum;
<a name="l00383"></a>00383         } <span class="keywordflow">else</span> {
<a name="l00384"></a>00384             <span class="keywordflow">return</span> 0;
<a name="l00385"></a>00385         }
<a name="l00386"></a>00386 
<a name="l00387"></a>00387     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a30adaf6f5fb6b38b5747f35c419e3f31"></a><!-- doxytag: member="OzoneLSQ::getMemDepViolator" ref="a30adaf6f5fb6b38b5747f35c419e3f31" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Impl::DynInstPtr getMemDepViolator </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the memory ordering violator. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00230"></a>00230 {
<a name="l00231"></a>00231     <a class="code" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> temp = <a class="code" href="classOzoneLSQ.html#a270a20c3fa52139e0538288275db9d22">memDepViolator</a>;
<a name="l00232"></a>00232 
<a name="l00233"></a>00233     <a class="code" href="classOzoneLSQ.html#a270a20c3fa52139e0538288275db9d22">memDepViolator</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00234"></a>00234 
<a name="l00235"></a>00235     <span class="keywordflow">return</span> temp;
<a name="l00236"></a>00236 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab9d14b0deb8ab44dc09ac784b162e774"></a><!-- doxytag: member="OzoneLSQ::getStoreHead" ref="ab9d14b0deb8ab44dc09ac784b162e774" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getStoreHead </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the index of the head store instruction. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00390"></a>00390 { <span class="keywordflow">return</span> <a class="code" href="classOzoneLSQ.html#a6e87b6f77102183080ea6ab8599b26a9">storeHead</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1813b58ab7569d6aeefb5d4e235cceda"></a><!-- doxytag: member="OzoneLSQ::getStoreHeadSeqNum" ref="a1813b58ab7569d6aeefb5d4e235cceda" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> getStoreHeadSeqNum </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the sequence number of the head store instruction. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00393"></a>00393     {
<a name="l00394"></a>00394         <span class="keywordflow">if</span> (<a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[<a class="code" href="classOzoneLSQ.html#a6e87b6f77102183080ea6ab8599b26a9">storeHead</a>].inst) {
<a name="l00395"></a>00395             <span class="keywordflow">return</span> <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[<a class="code" href="classOzoneLSQ.html#a6e87b6f77102183080ea6ab8599b26a9">storeHead</a>].inst-&gt;seqNum;
<a name="l00396"></a>00396         } <span class="keywordflow">else</span> {
<a name="l00397"></a>00397             <span class="keywordflow">return</span> 0;
<a name="l00398"></a>00398         }
<a name="l00399"></a>00399 
<a name="l00400"></a>00400     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad2e4b46255cfb53e85522adeed4e2089"></a><!-- doxytag: member="OzoneLSQ::hasStoresToWB" ref="ad2e4b46255cfb53e85522adeed4e2089" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool hasStoresToWB </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns if there are any stores to writeback. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00210"></a>00210 { <span class="keywordflow">return</span> <a class="code" href="classOzoneLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0e0f98133b2afd7aa1793ba30dd4a96b"></a><!-- doxytag: member="OzoneLSQ::incrLdIdx" ref="a0e0f98133b2afd7aa1793ba30dd4a96b" args="(int &amp;load_idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void incrLdIdx </td>
          <td>(</td>
          <td class="paramtype">int &amp;&nbsp;</td>
          <td class="paramname"> <em>load_idx</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Increments the given load index (circular queue). </p>

<p><div class="fragment"><pre class="fragment"><a name="l00832"></a>00832 {
<a name="l00833"></a>00833     <span class="keywordflow">if</span> (++load_idx &gt;= <a class="code" href="classOzoneLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a>)
<a name="l00834"></a>00834         load_idx = 0;
<a name="l00835"></a>00835 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4ec2fe6ed54cf88c23fb214b87f850d1"></a><!-- doxytag: member="OzoneLSQ::incrStIdx" ref="a4ec2fe6ed54cf88c23fb214b87f850d1" args="(int &amp;store_idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void incrStIdx </td>
          <td>(</td>
          <td class="paramtype">int &amp;&nbsp;</td>
          <td class="paramname"> <em>store_idx</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Increments the given store index (circular queue). </p>

<p><div class="fragment"><pre class="fragment"><a name="l00816"></a>00816 {
<a name="l00817"></a>00817     <span class="keywordflow">if</span> (++store_idx &gt;= <a class="code" href="classOzoneLSQ.html#a38c8af5392da70119dc5cce4e3637cbc">SQEntries</a>)
<a name="l00818"></a>00818         store_idx = 0;
<a name="l00819"></a>00819 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae8565b0968a8115705f1585e8aa21f75"></a><!-- doxytag: member="OzoneLSQ::init" ref="ae8565b0968a8115705f1585e8aa21f75" args="(Params *params, unsigned maxLQEntries, unsigned maxSQEntries, unsigned id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classOzoneLSQ.html#a818e103eae798a24a06a0a34631849ea">Params</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>maxLQEntries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>maxSQEntries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes the <a class="el" href="classLSQ.html">LSQ</a> unit with the specified number of entries. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00082"></a>00082 {
<a name="l00083"></a>00083     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Creating OzoneLSQ%i object.\n&quot;</span>,<span class="keywordtype">id</span>);
<a name="l00084"></a>00084 
<a name="l00085"></a>00085     <a class="code" href="classOzoneLSQ.html#adfd96fbbaa327a31d20f0d4134418fad">lsqID</a> = <a class="code" href="namespaceSparcISA.html#a2b4cf644f5af9ebaec502fb09986f302">id</a>;
<a name="l00086"></a>00086 
<a name="l00087"></a>00087     <a class="code" href="classOzoneLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a> = maxLQEntries;
<a name="l00088"></a>00088     <a class="code" href="classOzoneLSQ.html#a38c8af5392da70119dc5cce4e3637cbc">SQEntries</a> = maxSQEntries;
<a name="l00089"></a>00089 
<a name="l00090"></a>00090     <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>.resize(<a class="code" href="classOzoneLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a>);
<a name="l00091"></a>00091     <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>.resize(<a class="code" href="classOzoneLSQ.html#a38c8af5392da70119dc5cce4e3637cbc">SQEntries</a>);
<a name="l00092"></a>00092 
<a name="l00093"></a>00093 
<a name="l00094"></a>00094     <span class="comment">// May want to initialize these entries to NULL</span>
<a name="l00095"></a>00095 
<a name="l00096"></a>00096     <a class="code" href="classOzoneLSQ.html#ac09af89928d2ef4da4cbdcfce26fa3f5">loadHead</a> = <a class="code" href="classOzoneLSQ.html#a973a489225da164cc85e690f13c86841">loadTail</a> = 0;
<a name="l00097"></a>00097 
<a name="l00098"></a>00098     <a class="code" href="classOzoneLSQ.html#a6e87b6f77102183080ea6ab8599b26a9">storeHead</a> = <a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a> = <a class="code" href="classOzoneLSQ.html#acd5c7fbb5578b5cb505ffff16bbf6a8b">storeTail</a> = 0;
<a name="l00099"></a>00099 
<a name="l00100"></a>00100     <a class="code" href="classOzoneLSQ.html#a03435d626b7567ed154de5d7d8c3d419">usedPorts</a> = 0;
<a name="l00101"></a>00101     <a class="code" href="classOzoneLSQ.html#ab2e23636971c40e7ed945026b2a184e1">cachePorts</a> = params-&gt;cachePorts;
<a name="l00102"></a>00102 
<a name="l00103"></a>00103     <a class="code" href="classOzoneLSQ.html#a22dc8294eecb144fbdd951d2e32e9330">dcacheInterface</a> = params-&gt;dcacheInterface;
<a name="l00104"></a>00104 
<a name="l00105"></a>00105     <a class="code" href="classOzoneLSQ.html#a7123aa8b10829cc4712dff5454e13978">loadFaultInst</a> = <a class="code" href="classOzoneLSQ.html#ab98cf7d5235b7402e8916e78569f4ab2">storeFaultInst</a> = <a class="code" href="classOzoneLSQ.html#a270a20c3fa52139e0538288275db9d22">memDepViolator</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00106"></a>00106 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a773e88db1aa010c3755e603493bf40ec"></a><!-- doxytag: member="OzoneLSQ::insert" ref="a773e88db1aa010c3755e603493bf40ec" args="(DynInstPtr &amp;inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Inserts an instruction. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00165"></a>00165 {
<a name="l00166"></a>00166     <span class="comment">// Make sure we really have a memory reference.</span>
<a name="l00167"></a>00167     assert(inst-&gt;isMemRef());
<a name="l00168"></a>00168 
<a name="l00169"></a>00169     <span class="comment">// Make sure it&apos;s one of the two classes of memory references.</span>
<a name="l00170"></a>00170     assert(inst-&gt;isLoad() || inst-&gt;isStore());
<a name="l00171"></a>00171 
<a name="l00172"></a>00172     <span class="keywordflow">if</span> (inst-&gt;isLoad()) {
<a name="l00173"></a>00173         <a class="code" href="classOzoneLSQ.html#ad22b3ecafed2bcd9c59fcab049a1cb98">insertLoad</a>(inst);
<a name="l00174"></a>00174     } <span class="keywordflow">else</span> {
<a name="l00175"></a>00175         <a class="code" href="classOzoneLSQ.html#a6a4b4e51bfff3639932ebaba45e8a282">insertStore</a>(inst);
<a name="l00176"></a>00176     }
<a name="l00177"></a>00177 
<a name="l00178"></a>00178 <span class="comment">//    inst-&gt;setInLSQ();</span>
<a name="l00179"></a>00179 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad22b3ecafed2bcd9c59fcab049a1cb98"></a><!-- doxytag: member="OzoneLSQ::insertLoad" ref="ad22b3ecafed2bcd9c59fcab049a1cb98" args="(DynInstPtr &amp;load_inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void insertLoad </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>load_inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Inserts a load instruction. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00184"></a>00184 {
<a name="l00185"></a>00185     assert((<a class="code" href="classOzoneLSQ.html#a973a489225da164cc85e690f13c86841">loadTail</a> + 1) % <a class="code" href="classOzoneLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a> != <a class="code" href="classOzoneLSQ.html#ac09af89928d2ef4da4cbdcfce26fa3f5">loadHead</a> &amp;&amp; <a class="code" href="classOzoneLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a> &lt; <a class="code" href="classOzoneLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a>);
<a name="l00186"></a>00186 
<a name="l00187"></a>00187     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Inserting load PC %#x, idx:%i [sn:%lli]\n&quot;</span>,
<a name="l00188"></a>00188             load_inst-&gt;readPC(), <a class="code" href="classOzoneLSQ.html#a973a489225da164cc85e690f13c86841">loadTail</a>, load_inst-&gt;seqNum);
<a name="l00189"></a>00189 
<a name="l00190"></a>00190     load_inst-&gt;lqIdx = <a class="code" href="classOzoneLSQ.html#a973a489225da164cc85e690f13c86841">loadTail</a>;
<a name="l00191"></a>00191 
<a name="l00192"></a>00192     <span class="keywordflow">if</span> (<a class="code" href="classOzoneLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a> == 0) {
<a name="l00193"></a>00193         load_inst-&gt;sqIdx = -1;
<a name="l00194"></a>00194     } <span class="keywordflow">else</span> {
<a name="l00195"></a>00195         load_inst-&gt;sqIdx = <a class="code" href="classOzoneLSQ.html#acd5c7fbb5578b5cb505ffff16bbf6a8b">storeTail</a>;
<a name="l00196"></a>00196     }
<a name="l00197"></a>00197 
<a name="l00198"></a>00198     <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[<a class="code" href="classOzoneLSQ.html#a973a489225da164cc85e690f13c86841">loadTail</a>] = load_inst;
<a name="l00199"></a>00199 
<a name="l00200"></a>00200     <a class="code" href="classOzoneLSQ.html#a0e0f98133b2afd7aa1793ba30dd4a96b">incrLdIdx</a>(<a class="code" href="classOzoneLSQ.html#a973a489225da164cc85e690f13c86841">loadTail</a>);
<a name="l00201"></a>00201 
<a name="l00202"></a>00202     ++<a class="code" href="classOzoneLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a>;
<a name="l00203"></a>00203 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6a4b4e51bfff3639932ebaba45e8a282"></a><!-- doxytag: member="OzoneLSQ::insertStore" ref="a6a4b4e51bfff3639932ebaba45e8a282" args="(DynInstPtr &amp;store_inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void insertStore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>store_inst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Inserts a store instruction. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00208"></a>00208 {
<a name="l00209"></a>00209     <span class="comment">// Make sure it is not full before inserting an instruction.</span>
<a name="l00210"></a>00210     assert((<a class="code" href="classOzoneLSQ.html#acd5c7fbb5578b5cb505ffff16bbf6a8b">storeTail</a> + 1) % <a class="code" href="classOzoneLSQ.html#a38c8af5392da70119dc5cce4e3637cbc">SQEntries</a> != <a class="code" href="classOzoneLSQ.html#a6e87b6f77102183080ea6ab8599b26a9">storeHead</a>);
<a name="l00211"></a>00211     assert(<a class="code" href="classOzoneLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a> &lt; <a class="code" href="classOzoneLSQ.html#a38c8af5392da70119dc5cce4e3637cbc">SQEntries</a>);
<a name="l00212"></a>00212 
<a name="l00213"></a>00213     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Inserting store PC %#x, idx:%i [sn:%lli]\n&quot;</span>,
<a name="l00214"></a>00214             store_inst-&gt;readPC(), <a class="code" href="classOzoneLSQ.html#acd5c7fbb5578b5cb505ffff16bbf6a8b">storeTail</a>, store_inst-&gt;seqNum);
<a name="l00215"></a>00215 
<a name="l00216"></a>00216     store_inst-&gt;sqIdx = <a class="code" href="classOzoneLSQ.html#acd5c7fbb5578b5cb505ffff16bbf6a8b">storeTail</a>;
<a name="l00217"></a>00217     store_inst-&gt;lqIdx = <a class="code" href="classOzoneLSQ.html#a973a489225da164cc85e690f13c86841">loadTail</a>;
<a name="l00218"></a>00218 
<a name="l00219"></a>00219     <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[<a class="code" href="classOzoneLSQ.html#acd5c7fbb5578b5cb505ffff16bbf6a8b">storeTail</a>] = SQEntry(store_inst);
<a name="l00220"></a>00220 
<a name="l00221"></a>00221     <a class="code" href="classOzoneLSQ.html#a4ec2fe6ed54cf88c23fb214b87f850d1">incrStIdx</a>(<a class="code" href="classOzoneLSQ.html#acd5c7fbb5578b5cb505ffff16bbf6a8b">storeTail</a>);
<a name="l00222"></a>00222 
<a name="l00223"></a>00223     ++<a class="code" href="classOzoneLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a>;
<a name="l00224"></a>00224 
<a name="l00225"></a>00225 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3e70330939fdfc4dbc2f60c1a660584d"></a><!-- doxytag: member="OzoneLSQ::isFull" ref="a3e70330939fdfc4dbc2f60c1a660584d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool isFull </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns if either the LQ or SQ is full. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00195"></a>00195 { <span class="keywordflow">return</span> <a class="code" href="classOzoneLSQ.html#a5893daf623130be826f492bbff58f757">lqFull</a>() || <a class="code" href="classOzoneLSQ.html#a477981d1f905d2d398a1527f7149e3c4">sqFull</a>(); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af8eb8590fbfa6ecd2f796390677a4c00"></a><!-- doxytag: member="OzoneLSQ::isStalled" ref="af8eb8590fbfa6ecd2f796390677a4c00" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool isStalled </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns whether or not the <a class="el" href="classLSQ.html">LSQ</a> unit is stalled. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00403"></a>00403 { <span class="keywordflow">return</span> <a class="code" href="classOzoneLSQ.html#a6f8bff553ad30865c7d0c62e05421eb8">stalled</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a05c413ba417c6453e99f75d87c958590"></a><!-- doxytag: member="OzoneLSQ::loadBlocked" ref="a05c413ba417c6453e99f75d87c958590" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool loadBlocked </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns if a load became blocked due to the memory system. It clears the bool's value upon this being called. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00630"></a>00630 {
<a name="l00631"></a>00631     <span class="keywordtype">bool</span> ret_val = <a class="code" href="classOzoneLSQ.html#a95dc31b4ce3ebcb6b9d75a510b3a128c">isLoadBlocked</a>;
<a name="l00632"></a>00632     <a class="code" href="classOzoneLSQ.html#a95dc31b4ce3ebcb6b9d75a510b3a128c">isLoadBlocked</a> = <span class="keyword">false</span>;
<a name="l00633"></a>00633     <span class="keywordflow">return</span> ret_val;
<a name="l00634"></a>00634 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5893daf623130be826f492bbff58f757"></a><!-- doxytag: member="OzoneLSQ::lqFull" ref="a5893daf623130be826f492bbff58f757" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool lqFull </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns if the LQ is full. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00198"></a>00198 { <span class="keywordflow">return</span> <a class="code" href="classOzoneLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a> &gt;= (<a class="code" href="classOzoneLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a> - 1); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a37627d5d5bba7f4a8690c71c2ab3cb07"></a><!-- doxytag: member="OzoneLSQ::name" ref="a37627d5d5bba7f4a8690c71c2ab3cb07" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string name </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the name of the <a class="el" href="classLSQ.html">LSQ</a> unit. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00111"></a>00111 {
<a name="l00112"></a>00112     <span class="keywordflow">return</span> <span class="stringliteral">&quot;lsqunit&quot;</span>;
<a name="l00113"></a>00113 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a028971a565aca048c67ea1c36a6a9d51"></a><!-- doxytag: member="OzoneLSQ::numFreeEntries" ref="a028971a565aca048c67ea1c36a6a9d51" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned numFreeEntries </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the number of free entries (min of free LQ and SQ entries). </p>

<p><div class="fragment"><pre class="fragment"><a name="l00241"></a>00241 {
<a name="l00242"></a>00242     <span class="keywordtype">unsigned</span> free_lq_entries = <a class="code" href="classOzoneLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a> - <a class="code" href="classOzoneLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a>;
<a name="l00243"></a>00243     <span class="keywordtype">unsigned</span> free_sq_entries = <a class="code" href="classOzoneLSQ.html#a38c8af5392da70119dc5cce4e3637cbc">SQEntries</a> - <a class="code" href="classOzoneLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a>;
<a name="l00244"></a>00244 
<a name="l00245"></a>00245     <span class="comment">// Both the LQ and SQ entries have an extra dummy entry to differentiate</span>
<a name="l00246"></a>00246     <span class="comment">// empty/full conditions.  Subtract 1 from the free entries.</span>
<a name="l00247"></a>00247     <span class="keywordflow">if</span> (free_lq_entries &lt; free_sq_entries) {
<a name="l00248"></a>00248         <span class="keywordflow">return</span> free_lq_entries - 1;
<a name="l00249"></a>00249     } <span class="keywordflow">else</span> {
<a name="l00250"></a>00250         <span class="keywordflow">return</span> free_sq_entries - 1;
<a name="l00251"></a>00251     }
<a name="l00252"></a>00252 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a54460b759fb06e2b18e26657279a6f49"></a><!-- doxytag: member="OzoneLSQ::numLoads" ref="a54460b759fb06e2b18e26657279a6f49" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int numLoads </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the number of loads in the LQ. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00189"></a>00189 { <span class="keywordflow">return</span> <a class="code" href="classOzoneLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9aa5d5a61b2229931008ac2ea802a3ab"></a><!-- doxytag: member="OzoneLSQ::numLoadsReady" ref="a9aa5d5a61b2229931008ac2ea802a3ab" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int numLoadsReady </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the number of loads ready to execute. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00257"></a>00257 {
<a name="l00258"></a>00258     <span class="keywordtype">int</span> load_idx = <a class="code" href="classOzoneLSQ.html#ac09af89928d2ef4da4cbdcfce26fa3f5">loadHead</a>;
<a name="l00259"></a>00259     <span class="keywordtype">int</span> retval = 0;
<a name="l00260"></a>00260 
<a name="l00261"></a>00261     <span class="keywordflow">while</span> (load_idx != <a class="code" href="classOzoneLSQ.html#a973a489225da164cc85e690f13c86841">loadTail</a>) {
<a name="l00262"></a>00262         assert(<a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[load_idx]);
<a name="l00263"></a>00263 
<a name="l00264"></a>00264         <span class="keywordflow">if</span> (<a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[load_idx]-&gt;readyToIssue()) {
<a name="l00265"></a>00265             ++retval;
<a name="l00266"></a>00266         }
<a name="l00267"></a>00267     }
<a name="l00268"></a>00268 
<a name="l00269"></a>00269     <span class="keywordflow">return</span> retval;
<a name="l00270"></a>00270 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa0fc32a4a9d77696f5907f4d25e7d07f"></a><!-- doxytag: member="OzoneLSQ::numStores" ref="aa0fc32a4a9d77696f5907f4d25e7d07f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int numStores </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the number of stores in the SQ. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00192"></a>00192 { <span class="keywordflow">return</span> <a class="code" href="classOzoneLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a276cdbdaf4551f1b846c4e2535c5f882"></a><!-- doxytag: member="OzoneLSQ::numStoresToWB" ref="a276cdbdaf4551f1b846c4e2535c5f882" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int numStoresToWB </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the number of stores to writeback. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00213"></a>00213 { <span class="keywordflow">return</span> <a class="code" href="classOzoneLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad2981b6704bca036af0723daaaebe57e"></a><!-- doxytag: member="OzoneLSQ::read" ref="ad2981b6704bca036af0723daaaebe57e" args="(MemReqPtr &amp;req, T &amp;data, int load_idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">Fault</a> read </td>
          <td>(</td>
          <td class="paramtype">MemReqPtr &amp;&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T &amp;&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>load_idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Executes the load at the given index. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00410"></a>00410 {
<a name="l00411"></a>00411     <span class="comment">//Depending on issue2execute delay a squashed load could</span>
<a name="l00412"></a>00412     <span class="comment">//execute if it is found to be squashed in the same</span>
<a name="l00413"></a>00413     <span class="comment">//cycle it is scheduled to execute</span>
<a name="l00414"></a>00414     assert(<a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[load_idx]);
<a name="l00415"></a>00415 
<a name="l00416"></a>00416     <span class="keywordflow">if</span> (<a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[load_idx]-&gt;isExecuted()) {
<a name="l00417"></a>00417         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Should not reach this point with split ops!&quot;</span>);
<a name="l00418"></a>00418 
<a name="l00419"></a>00419         memcpy(&amp;data,req-&gt;data,req-&gt;size);
<a name="l00420"></a>00420 
<a name="l00421"></a>00421         <span class="keywordflow">return</span> <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00422"></a>00422     }
<a name="l00423"></a>00423 
<a name="l00424"></a>00424     <span class="comment">// Make sure this isn&apos;t an uncacheable access</span>
<a name="l00425"></a>00425     <span class="comment">// A bit of a hackish way to get uncached accesses to work only if they&apos;re</span>
<a name="l00426"></a>00426     <span class="comment">// at the head of the LSQ and are ready to commit (at the head of the ROB</span>
<a name="l00427"></a>00427     <span class="comment">// too).</span>
<a name="l00428"></a>00428     <span class="comment">// @todo: Fix uncached accesses.</span>
<a name="l00429"></a>00429     <span class="keywordflow">if</span> (req-&gt;isUncacheable() &amp;&amp;
<a name="l00430"></a>00430         (load_idx != <a class="code" href="classOzoneLSQ.html#ac09af89928d2ef4da4cbdcfce26fa3f5">loadHead</a> || !<a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[load_idx]-&gt;readyToCommit())) {
<a name="l00431"></a>00431 
<a name="l00432"></a>00432         <span class="keywordflow">return</span> TheISA::genMachineCheckFault();
<a name="l00433"></a>00433     }
<a name="l00434"></a>00434 
<a name="l00435"></a>00435     <span class="comment">// Check the SQ for any previous stores that might lead to forwarding</span>
<a name="l00436"></a>00436     <span class="keywordtype">int</span> store_idx = <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[load_idx]-&gt;sqIdx;
<a name="l00437"></a>00437 
<a name="l00438"></a>00438     <span class="keywordtype">int</span> store_size = 0;
<a name="l00439"></a>00439 
<a name="l00440"></a>00440     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Read called, load idx: %i, store idx: %i, &quot;</span>
<a name="l00441"></a>00441             <span class="stringliteral">&quot;storeHead: %i addr: %#x\n&quot;</span>,
<a name="l00442"></a>00442             load_idx, store_idx, <a class="code" href="classOzoneLSQ.html#a6e87b6f77102183080ea6ab8599b26a9">storeHead</a>, req-&gt;paddr);
<a name="l00443"></a>00443 
<a name="l00444"></a>00444     <span class="keywordflow">while</span> (store_idx != -1) {
<a name="l00445"></a>00445         <span class="comment">// End once we&apos;ve reached the top of the LSQ</span>
<a name="l00446"></a>00446         <span class="keywordflow">if</span> (store_idx == <a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a>) {
<a name="l00447"></a>00447             <span class="keywordflow">break</span>;
<a name="l00448"></a>00448         }
<a name="l00449"></a>00449 
<a name="l00450"></a>00450         <span class="comment">// Move the index to one younger</span>
<a name="l00451"></a>00451         <span class="keywordflow">if</span> (--store_idx &lt; 0)
<a name="l00452"></a>00452             store_idx += <a class="code" href="classOzoneLSQ.html#a38c8af5392da70119dc5cce4e3637cbc">SQEntries</a>;
<a name="l00453"></a>00453 
<a name="l00454"></a>00454         assert(<a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].inst);
<a name="l00455"></a>00455 
<a name="l00456"></a>00456         store_size = <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].size;
<a name="l00457"></a>00457 
<a name="l00458"></a>00458         <span class="keywordflow">if</span> (store_size == 0)
<a name="l00459"></a>00459             <span class="keywordflow">continue</span>;
<a name="l00460"></a>00460 
<a name="l00461"></a>00461         <span class="comment">// Check if the store data is within the lower and upper bounds of</span>
<a name="l00462"></a>00462         <span class="comment">// addresses that the request needs.</span>
<a name="l00463"></a>00463         <span class="keywordtype">bool</span> store_has_lower_limit =
<a name="l00464"></a>00464             req-&gt;vaddr &gt;= <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].inst-&gt;effAddr;
<a name="l00465"></a>00465         <span class="keywordtype">bool</span> store_has_upper_limit =
<a name="l00466"></a>00466             (req-&gt;vaddr + req-&gt;size) &lt;= (<a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].inst-&gt;effAddr +
<a name="l00467"></a>00467                                          store_size);
<a name="l00468"></a>00468         <span class="keywordtype">bool</span> lower_load_has_store_part =
<a name="l00469"></a>00469             req-&gt;vaddr &lt; (<a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].inst-&gt;effAddr +
<a name="l00470"></a>00470                            store_size);
<a name="l00471"></a>00471         <span class="keywordtype">bool</span> upper_load_has_store_part =
<a name="l00472"></a>00472             (req-&gt;vaddr + req-&gt;size) &gt; <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].inst-&gt;effAddr;
<a name="l00473"></a>00473 
<a name="l00474"></a>00474         <span class="comment">// If the store&apos;s data has all of the data needed, we can forward.</span>
<a name="l00475"></a>00475         if (store_has_lower_limit &amp;&amp; store_has_upper_limit) {
<a name="l00476"></a>00476 
<a name="l00477"></a>00477             <span class="keywordtype">int</span> shift_amt = req-&gt;vaddr &amp; (store_size - 1);
<a name="l00478"></a>00478             <span class="comment">// Assumes byte addressing</span>
<a name="l00479"></a>00479             shift_amt = shift_amt &lt;&lt; 3;
<a name="l00480"></a>00480 
<a name="l00481"></a>00481             <span class="comment">// Cast this to type T?</span>
<a name="l00482"></a>00482             data = <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].data &gt;&gt; shift_amt;
<a name="l00483"></a>00483 
<a name="l00484"></a>00484             req-&gt;cmd = Read;
<a name="l00485"></a>00485             assert(!req-&gt;completionEvent);
<a name="l00486"></a>00486             req-&gt;completionEvent = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00487"></a>00487             req-&gt;time = <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>();
<a name="l00488"></a>00488             assert(!req-&gt;data);
<a name="l00489"></a>00489             req-&gt;data = <span class="keyword">new</span> uint8_t[64];
<a name="l00490"></a>00490 
<a name="l00491"></a>00491             memcpy(req-&gt;data, &amp;data, req-&gt;size);
<a name="l00492"></a>00492 
<a name="l00493"></a>00493             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Forwarding from store idx %i to load to &quot;</span>
<a name="l00494"></a>00494                     <span class="stringliteral">&quot;addr %#x, data %#x\n&quot;</span>,
<a name="l00495"></a>00495                     store_idx, req-&gt;vaddr, *(req-&gt;data));
<a name="l00496"></a>00496 
<a name="l00497"></a>00497             <span class="keyword">typename</span> <a class="code" href="classBackEnd_1_1LdWritebackEvent.html">BackEnd::LdWritebackEvent</a> *wb =
<a name="l00498"></a>00498                 <span class="keyword">new</span> <span class="keyword">typename</span> <a class="code" href="classBackEnd_1_1LdWritebackEvent.html">BackEnd::LdWritebackEvent</a>(<a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[load_idx],
<a name="l00499"></a>00499                                                        <a class="code" href="classOzoneLSQ.html#a84f815aa1fa864ba2e6d75f5ad2b52d1">be</a>);
<a name="l00500"></a>00500 
<a name="l00501"></a>00501             <span class="comment">// We&apos;ll say this has a 1 cycle load-store forwarding latency</span>
<a name="l00502"></a>00502             <span class="comment">// for now.</span>
<a name="l00503"></a>00503             <span class="comment">// FIXME - Need to make this a parameter.</span>
<a name="l00504"></a>00504             wb-&gt;schedule(<a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>());
<a name="l00505"></a>00505 
<a name="l00506"></a>00506             <span class="comment">// Should keep track of stat for forwarded data</span>
<a name="l00507"></a>00507             <span class="keywordflow">return</span> <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00508"></a>00508         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((store_has_lower_limit &amp;&amp; lower_load_has_store_part) ||
<a name="l00509"></a>00509                    (store_has_upper_limit &amp;&amp; upper_load_has_store_part) ||
<a name="l00510"></a>00510                    (lower_load_has_store_part &amp;&amp; upper_load_has_store_part)) {
<a name="l00511"></a>00511             <span class="comment">// This is the partial store-load forwarding case where a store</span>
<a name="l00512"></a>00512             <span class="comment">// has only part of the load&apos;s data.</span>
<a name="l00513"></a>00513 
<a name="l00514"></a>00514             <span class="comment">// If it&apos;s already been written back, then don&apos;t worry about</span>
<a name="l00515"></a>00515             <span class="comment">// stalling on it.</span>
<a name="l00516"></a>00516             <span class="keywordflow">if</span> (<a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].completed) {
<a name="l00517"></a>00517                 <span class="keywordflow">continue</span>;
<a name="l00518"></a>00518             }
<a name="l00519"></a>00519 
<a name="l00520"></a>00520             <span class="comment">// Must stall load and force it to retry, so long as it&apos;s the oldest</span>
<a name="l00521"></a>00521             <span class="comment">// load that needs to do so.</span>
<a name="l00522"></a>00522             <span class="keywordflow">if</span> (!<a class="code" href="classOzoneLSQ.html#a6f8bff553ad30865c7d0c62e05421eb8">stalled</a> ||
<a name="l00523"></a>00523                 (<a class="code" href="classOzoneLSQ.html#a6f8bff553ad30865c7d0c62e05421eb8">stalled</a> &amp;&amp;
<a name="l00524"></a>00524                  <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[load_idx]-&gt;seqNum &lt;
<a name="l00525"></a>00525                  <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[<a class="code" href="classOzoneLSQ.html#af55bc9000c8b4e4cfcfbd018feca12a7">stallingLoadIdx</a>]-&gt;seqNum)) {
<a name="l00526"></a>00526                 <a class="code" href="classOzoneLSQ.html#a6f8bff553ad30865c7d0c62e05421eb8">stalled</a> = <span class="keyword">true</span>;
<a name="l00527"></a>00527                 <a class="code" href="classOzoneLSQ.html#afe1cdcfca6b44c28581d862228adc3da">stallingStoreIsn</a> = <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].inst-&gt;seqNum;
<a name="l00528"></a>00528                 <a class="code" href="classOzoneLSQ.html#af55bc9000c8b4e4cfcfbd018feca12a7">stallingLoadIdx</a> = load_idx;
<a name="l00529"></a>00529             }
<a name="l00530"></a>00530 
<a name="l00531"></a>00531             <span class="comment">// Tell IQ/mem dep unit that this instruction will need to be</span>
<a name="l00532"></a>00532             <span class="comment">// rescheduled eventually</span>
<a name="l00533"></a>00533             <a class="code" href="classOzoneLSQ.html#a84f815aa1fa864ba2e6d75f5ad2b52d1">be</a>-&gt;<a class="code" href="classBackEnd.html#aa9c46f45f491ef90a936c7e2b95f20aa">rescheduleMemInst</a>(<a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[load_idx]);
<a name="l00534"></a>00534 
<a name="l00535"></a>00535             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Load-store forwarding mis-match. &quot;</span>
<a name="l00536"></a>00536                     <span class="stringliteral">&quot;Store idx %i to load addr %#x\n&quot;</span>,
<a name="l00537"></a>00537                     store_idx, req-&gt;vaddr);
<a name="l00538"></a>00538 
<a name="l00539"></a>00539             <span class="keywordflow">return</span> <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00540"></a>00540         }
<a name="l00541"></a>00541     }
<a name="l00542"></a>00542 
<a name="l00543"></a>00543 
<a name="l00544"></a>00544     <span class="comment">// If there&apos;s no forwarding case, then go access memory</span>
<a name="l00545"></a>00545     <a class="code" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> inst = <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[load_idx];
<a name="l00546"></a>00546 
<a name="l00547"></a>00547     ++<a class="code" href="classOzoneLSQ.html#a03435d626b7567ed154de5d7d8c3d419">usedPorts</a>;
<a name="l00548"></a>00548 
<a name="l00549"></a>00549     <span class="comment">// if we have a cache, do cache access too</span>
<a name="l00550"></a>00550     <span class="keywordflow">if</span> (<a class="code" href="classOzoneLSQ.html#a22dc8294eecb144fbdd951d2e32e9330">dcacheInterface</a>) {
<a name="l00551"></a>00551         <span class="keywordflow">if</span> (<a class="code" href="classOzoneLSQ.html#a22dc8294eecb144fbdd951d2e32e9330">dcacheInterface</a>-&gt;isBlocked()) {
<a name="l00552"></a>00552             <a class="code" href="classOzoneLSQ.html#a95dc31b4ce3ebcb6b9d75a510b3a128c">isLoadBlocked</a> = <span class="keyword">true</span>;
<a name="l00553"></a>00553             <span class="comment">// No fault occurred, even though the interface is blocked.</span>
<a name="l00554"></a>00554             <span class="keywordflow">return</span> <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00555"></a>00555         }
<a name="l00556"></a>00556 
<a name="l00557"></a>00557         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;D-cache: PC:%#x reading from paddr:%#x &quot;</span>
<a name="l00558"></a>00558                 <span class="stringliteral">&quot;vaddr:%#x flags:%i\n&quot;</span>,
<a name="l00559"></a>00559                 inst-&gt;readPC(), req-&gt;paddr, req-&gt;vaddr, req-&gt;flags);
<a name="l00560"></a>00560 
<a name="l00561"></a>00561         <span class="comment">// Setup MemReq pointer</span>
<a name="l00562"></a>00562         req-&gt;cmd = Read;
<a name="l00563"></a>00563         req-&gt;completionEvent = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00564"></a>00564         req-&gt;time = <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>();
<a name="l00565"></a>00565         assert(!req-&gt;data);
<a name="l00566"></a>00566         req-&gt;data = <span class="keyword">new</span> uint8_t[64];
<a name="l00567"></a>00567 
<a name="l00568"></a>00568         assert(!req-&gt;completionEvent);
<a name="l00569"></a>00569         <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classBackEnd_1_1LdWritebackEvent.html">BackEnd::LdWritebackEvent</a> LdWritebackEvent;
<a name="l00570"></a>00570 
<a name="l00571"></a>00571         LdWritebackEvent *wb = <span class="keyword">new</span> LdWritebackEvent(<a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[load_idx], <a class="code" href="classOzoneLSQ.html#a84f815aa1fa864ba2e6d75f5ad2b52d1">be</a>);
<a name="l00572"></a>00572 
<a name="l00573"></a>00573         req-&gt;completionEvent = wb;
<a name="l00574"></a>00574 
<a name="l00575"></a>00575         <span class="comment">// Do Cache Access</span>
<a name="l00576"></a>00576         MemAccessResult result = <a class="code" href="classOzoneLSQ.html#a22dc8294eecb144fbdd951d2e32e9330">dcacheInterface</a>-&gt;access(req);
<a name="l00577"></a>00577 
<a name="l00578"></a>00578         <span class="comment">// Ugly hack to get an event scheduled *only* if the access is</span>
<a name="l00579"></a>00579         <span class="comment">// a miss.  We really should add first-class support for this</span>
<a name="l00580"></a>00580         <span class="comment">// at some point.</span>
<a name="l00581"></a>00581         <span class="comment">// @todo: Probably should support having no events</span>
<a name="l00582"></a>00582         <span class="keywordflow">if</span> (result != MA_HIT) {
<a name="l00583"></a>00583             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;D-cache miss!\n&quot;</span>);
<a name="l00584"></a>00584             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Activity, <span class="stringliteral">&quot;Activity: ld accessing mem miss [sn:%lli]\n&quot;</span>,
<a name="l00585"></a>00585                     inst-&gt;seqNum);
<a name="l00586"></a>00586 
<a name="l00587"></a>00587             <a class="code" href="classOzoneLSQ.html#a8b4696062ef09ab956804a7a99491853">lastDcacheStall</a> = <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>();
<a name="l00588"></a>00588 
<a name="l00589"></a>00589             <a class="code" href="classOzoneLSQ.html#a6cdf6e6db875a442f3ab6db542bd2bb5">_status</a> = <a class="code" href="classOzoneLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70ba4ba5ae5815b190bd652669e2fdea5ed7">DcacheMissStall</a>;
<a name="l00590"></a>00590 
<a name="l00591"></a>00591             wb-&gt;setDcacheMiss();
<a name="l00592"></a>00592 
<a name="l00593"></a>00593         } <span class="keywordflow">else</span> {
<a name="l00594"></a>00594 <span class="comment">//            DPRINTF(Activity, &quot;Activity: ld accessing mem hit [sn:%lli]\n&quot;,</span>
<a name="l00595"></a>00595 <span class="comment">//                    inst-&gt;seqNum);</span>
<a name="l00596"></a>00596 
<a name="l00597"></a>00597             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;D-cache hit!\n&quot;</span>);
<a name="l00598"></a>00598         }
<a name="l00599"></a>00599     } <span class="keywordflow">else</span> {
<a name="l00600"></a>00600         <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;Must use D-cache with new memory system&quot;</span>);
<a name="l00601"></a>00601     }
<a name="l00602"></a>00602 
<a name="l00603"></a>00603     <span class="keywordflow">return</span> <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00604"></a>00604 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3bc9500810cb2d5615e29206e2d6499f"></a><!-- doxytag: member="OzoneLSQ::resizeLQ" ref="a3bc9500810cb2d5615e29206e2d6499f" args="(unsigned size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void resizeLQ </td>
          <td>(</td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>size</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Resizes the LQ to a given size. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00132"></a>00132 {
<a name="l00133"></a>00133     assert( size &gt;= <a class="code" href="classOzoneLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a>);
<a name="l00134"></a>00134 
<a name="l00135"></a>00135     <span class="keywordflow">if</span> (size &gt; <a class="code" href="classOzoneLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a>) {
<a name="l00136"></a>00136         <span class="keywordflow">while</span> (size &gt; <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>.size()) {
<a name="l00137"></a>00137             <a class="code" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> dummy;
<a name="l00138"></a>00138             <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>.push_back(dummy);
<a name="l00139"></a>00139             <a class="code" href="classOzoneLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a>++;
<a name="l00140"></a>00140         }
<a name="l00141"></a>00141     } <span class="keywordflow">else</span> {
<a name="l00142"></a>00142         <a class="code" href="classOzoneLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a> = size;
<a name="l00143"></a>00143     }
<a name="l00144"></a>00144 
<a name="l00145"></a>00145 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a341dd6a3bd8d240659fd9d698c3b5c65"></a><!-- doxytag: member="OzoneLSQ::resizeSQ" ref="a341dd6a3bd8d240659fd9d698c3b5c65" args="(unsigned size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void resizeSQ </td>
          <td>(</td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>size</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Resizes the SQ to a given size. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00150"></a>00150 {
<a name="l00151"></a>00151     <span class="keywordflow">if</span> (size &gt; <a class="code" href="classOzoneLSQ.html#a38c8af5392da70119dc5cce4e3637cbc">SQEntries</a>) {
<a name="l00152"></a>00152         <span class="keywordflow">while</span> (size &gt; <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>.size()) {
<a name="l00153"></a>00153             SQEntry dummy;
<a name="l00154"></a>00154             <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>.push_back(dummy);
<a name="l00155"></a>00155             <a class="code" href="classOzoneLSQ.html#a38c8af5392da70119dc5cce4e3637cbc">SQEntries</a>++;
<a name="l00156"></a>00156         }
<a name="l00157"></a>00157     } <span class="keywordflow">else</span> {
<a name="l00158"></a>00158         <a class="code" href="classOzoneLSQ.html#a38c8af5392da70119dc5cce4e3637cbc">SQEntries</a> = size;
<a name="l00159"></a>00159     }
<a name="l00160"></a>00160 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9134276ed85820d74779ad5826580822"></a><!-- doxytag: member="OzoneLSQ::setBE" ref="a9134276ed85820d74779ad5826580822" args="(BackEnd *be_ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setBE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBackEnd.html">BackEnd</a> *&nbsp;</td>
          <td class="paramname"> <em>be_ptr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the back-end stage pointer. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00115"></a>00115     { <a class="code" href="classOzoneLSQ.html#a84f815aa1fa864ba2e6d75f5ad2b52d1">be</a> = be_ptr; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad491c9766121fc19aa77fd0723e7641d"></a><!-- doxytag: member="OzoneLSQ::setCPU" ref="ad491c9766121fc19aa77fd0723e7641d" args="(FullCPU *cpu_ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setCPU </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classOzoneLSQ.html#a90ba84e54618cc07f2e8f05e046cb5ce">FullCPU</a> *&nbsp;</td>
          <td class="paramname"> <em>cpu_ptr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the CPU pointer. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00111"></a>00111     { <a class="code" href="classOzoneLSQ.html#a766385c2941cd46525f4d9dff90200a2">cpu</a> = cpu_ptr; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a477981d1f905d2d398a1527f7149e3c4"></a><!-- doxytag: member="OzoneLSQ::sqFull" ref="a477981d1f905d2d398a1527f7149e3c4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sqFull </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns if the SQ is full. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00201"></a>00201 { <span class="keywordflow">return</span> <a class="code" href="classOzoneLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a> &gt;= (<a class="code" href="classOzoneLSQ.html#a38c8af5392da70119dc5cce4e3637cbc">SQEntries</a> - 1); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a51dd7e304d5413447717826fac6f4921"></a><!-- doxytag: member="OzoneLSQ::squash" ref="a51dd7e304d5413447717826fac6f4921" args="(const InstSeqNum &amp;squashed_num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void squash </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>squashed_num</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Squashes all instructions younger than a specific sequence number. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00677"></a>00677 {
<a name="l00678"></a>00678     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Squashing until [sn:%lli]!&quot;</span>
<a name="l00679"></a>00679             <span class="stringliteral">&quot;(Loads:%i Stores:%i)\n&quot;</span>,squashed_num,<a class="code" href="classOzoneLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a>,<a class="code" href="classOzoneLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a>);
<a name="l00680"></a>00680 
<a name="l00681"></a>00681     <span class="keywordtype">int</span> load_idx = <a class="code" href="classOzoneLSQ.html#a973a489225da164cc85e690f13c86841">loadTail</a>;
<a name="l00682"></a>00682     <a class="code" href="classOzoneLSQ.html#a73fc7794c8562f58407f59513a891c84">decrLdIdx</a>(load_idx);
<a name="l00683"></a>00683 
<a name="l00684"></a>00684     <span class="keywordflow">while</span> (<a class="code" href="classOzoneLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a> != 0 &amp;&amp; <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[load_idx]-&gt;seqNum &gt; squashed_num) {
<a name="l00685"></a>00685 
<a name="l00686"></a>00686         <span class="comment">// Clear the smart pointer to make sure it is decremented.</span>
<a name="l00687"></a>00687         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>,<span class="stringliteral">&quot;Load Instruction PC %#x squashed, &quot;</span>
<a name="l00688"></a>00688                 <span class="stringliteral">&quot;[sn:%lli]\n&quot;</span>,
<a name="l00689"></a>00689                 <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[load_idx]-&gt;readPC(),
<a name="l00690"></a>00690                 <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[load_idx]-&gt;seqNum);
<a name="l00691"></a>00691 
<a name="l00692"></a>00692         <span class="keywordflow">if</span> (<a class="code" href="classOzoneLSQ.html#af8eb8590fbfa6ecd2f796390677a4c00">isStalled</a>() &amp;&amp; load_idx == <a class="code" href="classOzoneLSQ.html#af55bc9000c8b4e4cfcfbd018feca12a7">stallingLoadIdx</a>) {
<a name="l00693"></a>00693             <a class="code" href="classOzoneLSQ.html#a6f8bff553ad30865c7d0c62e05421eb8">stalled</a> = <span class="keyword">false</span>;
<a name="l00694"></a>00694             <a class="code" href="classOzoneLSQ.html#afe1cdcfca6b44c28581d862228adc3da">stallingStoreIsn</a> = 0;
<a name="l00695"></a>00695             <a class="code" href="classOzoneLSQ.html#af55bc9000c8b4e4cfcfbd018feca12a7">stallingLoadIdx</a> = 0;
<a name="l00696"></a>00696         }
<a name="l00697"></a>00697 
<a name="l00698"></a>00698 <span class="comment">//        loadQueue[load_idx]-&gt;squashed = true;</span>
<a name="l00699"></a>00699         <a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[load_idx] = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00700"></a>00700         --<a class="code" href="classOzoneLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a>;
<a name="l00701"></a>00701 
<a name="l00702"></a>00702         <span class="comment">// Inefficient!</span>
<a name="l00703"></a>00703         <a class="code" href="classOzoneLSQ.html#a973a489225da164cc85e690f13c86841">loadTail</a> = load_idx;
<a name="l00704"></a>00704 
<a name="l00705"></a>00705         <a class="code" href="classOzoneLSQ.html#a73fc7794c8562f58407f59513a891c84">decrLdIdx</a>(load_idx);
<a name="l00706"></a>00706     }
<a name="l00707"></a>00707 
<a name="l00708"></a>00708     <span class="keywordtype">int</span> store_idx = <a class="code" href="classOzoneLSQ.html#acd5c7fbb5578b5cb505ffff16bbf6a8b">storeTail</a>;
<a name="l00709"></a>00709     <a class="code" href="classOzoneLSQ.html#aa585a02e67713aeeabb73720e6c89388">decrStIdx</a>(store_idx);
<a name="l00710"></a>00710 
<a name="l00711"></a>00711     <span class="keywordflow">while</span> (<a class="code" href="classOzoneLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a> != 0 &amp;&amp; <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].inst-&gt;seqNum &gt; squashed_num) {
<a name="l00712"></a>00712 
<a name="l00713"></a>00713         <span class="comment">// Clear the smart pointer to make sure it is decremented.</span>
<a name="l00714"></a>00714         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>,<span class="stringliteral">&quot;Store Instruction PC %#x squashed, &quot;</span>
<a name="l00715"></a>00715                 <span class="stringliteral">&quot;idx:%i [sn:%lli]\n&quot;</span>,
<a name="l00716"></a>00716                 <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].inst-&gt;readPC(),
<a name="l00717"></a>00717                 store_idx, <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].inst-&gt;seqNum);
<a name="l00718"></a>00718 
<a name="l00719"></a>00719         <span class="comment">// I don&apos;t think this can happen.  It should have been cleared by the</span>
<a name="l00720"></a>00720         <span class="comment">// stalling load.</span>
<a name="l00721"></a>00721         <span class="keywordflow">if</span> (<a class="code" href="classOzoneLSQ.html#af8eb8590fbfa6ecd2f796390677a4c00">isStalled</a>() &amp;&amp;
<a name="l00722"></a>00722             <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].inst-&gt;seqNum == <a class="code" href="classOzoneLSQ.html#afe1cdcfca6b44c28581d862228adc3da">stallingStoreIsn</a>) {
<a name="l00723"></a>00723             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Is stalled should have been cleared by stalling load!\n&quot;</span>);
<a name="l00724"></a>00724             <a class="code" href="classOzoneLSQ.html#a6f8bff553ad30865c7d0c62e05421eb8">stalled</a> = <span class="keyword">false</span>;
<a name="l00725"></a>00725             <a class="code" href="classOzoneLSQ.html#afe1cdcfca6b44c28581d862228adc3da">stallingStoreIsn</a> = 0;
<a name="l00726"></a>00726         }
<a name="l00727"></a>00727 
<a name="l00728"></a>00728 <span class="comment">//        storeQueue[store_idx].inst-&gt;squashed = true;</span>
<a name="l00729"></a>00729         <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].inst = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00730"></a>00730         <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].canWB = 0;
<a name="l00731"></a>00731 
<a name="l00732"></a>00732         <span class="keywordflow">if</span> (<a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].req) {
<a name="l00733"></a>00733             assert(!<a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].req-&gt;completionEvent);
<a name="l00734"></a>00734         }
<a name="l00735"></a>00735         <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].req = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00736"></a>00736         --<a class="code" href="classOzoneLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a>;
<a name="l00737"></a>00737 
<a name="l00738"></a>00738         <span class="comment">// Inefficient!</span>
<a name="l00739"></a>00739         <a class="code" href="classOzoneLSQ.html#acd5c7fbb5578b5cb505ffff16bbf6a8b">storeTail</a> = store_idx;
<a name="l00740"></a>00740 
<a name="l00741"></a>00741         <a class="code" href="classOzoneLSQ.html#aa585a02e67713aeeabb73720e6c89388">decrStIdx</a>(store_idx);
<a name="l00742"></a>00742     }
<a name="l00743"></a>00743 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a873dd91783f9efb4a590aded1f70d6b0"></a><!-- doxytag: member="OzoneLSQ::tick" ref="a873dd91783f9efb4a590aded1f70d6b0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tick </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Ticks the <a class="el" href="classLSQ.html">LSQ</a> unit, which in this case only resets the number of used cache ports. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000044">TODO:</a></b></dt><dd>: Move the number of used ports up to the <a class="el" href="classLSQ.html">LSQ</a> level so it can be shared by all <a class="el" href="classLSQ.html">LSQ</a> units. </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00122"></a>00122 { <a class="code" href="classOzoneLSQ.html#a03435d626b7567ed154de5d7d8c3d419">usedPorts</a> = 0; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4f720bbfb5fdefdb23516500eeb0b4de"></a><!-- doxytag: member="OzoneLSQ::violation" ref="a4f720bbfb5fdefdb23516500eeb0b4de" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool violation </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns if there is a memory ordering violation. Value is reset upon call to <a class="el" href="classOzoneLSQ.html#a30adaf6f5fb6b38b5747f35c419e3f31">getMemDepViolator()</a>. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00172"></a>00172 { <span class="keywordflow">return</span> <a class="code" href="classOzoneLSQ.html#a270a20c3fa52139e0538288275db9d22">memDepViolator</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a338be821734603396bfef8d9fb8f04b0"></a><!-- doxytag: member="OzoneLSQ::willWB" ref="a338be821734603396bfef8d9fb8f04b0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool willWB </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns if the <a class="el" href="classLSQ.html">LSQ</a> unit will writeback on this cycle. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00216"></a>00216                   { <span class="keywordflow">return</span> <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[<a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a>].canWB &amp;&amp;
<a name="l00217"></a>00217                         !<a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[<a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a>].completed &amp;&amp;
<a name="l00218"></a>00218                         !<a class="code" href="classOzoneLSQ.html#a22dc8294eecb144fbdd951d2e32e9330">dcacheInterface</a>-&gt;isBlocked(); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a173162a41482ee35c5a15394b4befa4b"></a><!-- doxytag: member="OzoneLSQ::write" ref="a173162a41482ee35c5a15394b4befa4b" args="(MemReqPtr &amp;req, T &amp;data, int store_idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">Fault</a> write </td>
          <td>(</td>
          <td class="paramtype">MemReqPtr &amp;&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T &amp;&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>store_idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Executes the store at the given index. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00610"></a>00610 {
<a name="l00611"></a>00611     assert(<a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].inst);
<a name="l00612"></a>00612 
<a name="l00613"></a>00613     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Doing write to store idx %i, addr %#x data %#x&quot;</span>
<a name="l00614"></a>00614             <span class="stringliteral">&quot; | storeHead:%i [sn:%i]\n&quot;</span>,
<a name="l00615"></a>00615             store_idx, req-&gt;paddr, data, <a class="code" href="classOzoneLSQ.html#a6e87b6f77102183080ea6ab8599b26a9">storeHead</a>,
<a name="l00616"></a>00616             <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].inst-&gt;seqNum);
<a name="l00617"></a>00617 
<a name="l00618"></a>00618     <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].req = req;
<a name="l00619"></a>00619     <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].size = <span class="keyword">sizeof</span>(T);
<a name="l00620"></a>00620     <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[store_idx].data = data;
<a name="l00621"></a>00621 
<a name="l00622"></a>00622     <span class="comment">// This function only writes the data to the store queue, so no fault</span>
<a name="l00623"></a>00623     <span class="comment">// can happen here.</span>
<a name="l00624"></a>00624     <span class="keywordflow">return</span> <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00625"></a>00625 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5f04e29d6f6feb8b86460491f2ba7547"></a><!-- doxytag: member="OzoneLSQ::writebackStores" ref="a5f04e29d6f6feb8b86460491f2ba7547" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void writebackStores </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Writes back stores. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00524"></a>00524 {
<a name="l00525"></a>00525     <span class="keywordflow">while</span> (<a class="code" href="classOzoneLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a> &gt; 0 &amp;&amp;
<a name="l00526"></a>00526            <a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a> != <a class="code" href="classOzoneLSQ.html#acd5c7fbb5578b5cb505ffff16bbf6a8b">storeTail</a> &amp;&amp;
<a name="l00527"></a>00527            <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[<a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a>].inst &amp;&amp;
<a name="l00528"></a>00528            <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[<a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a>].canWB &amp;&amp;
<a name="l00529"></a>00529            <a class="code" href="classOzoneLSQ.html#a03435d626b7567ed154de5d7d8c3d419">usedPorts</a> &lt; <a class="code" href="classOzoneLSQ.html#ab2e23636971c40e7ed945026b2a184e1">cachePorts</a>) {
<a name="l00530"></a>00530 
<a name="l00531"></a>00531         <span class="keywordflow">if</span> (<a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[<a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a>].size == 0) {
<a name="l00532"></a>00532             <a class="code" href="classOzoneLSQ.html#a12ec7cad6ac51a53bca7795588885e5c">completeStore</a>(<a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a>);
<a name="l00533"></a>00533 
<a name="l00534"></a>00534             <a class="code" href="classOzoneLSQ.html#a4ec2fe6ed54cf88c23fb214b87f850d1">incrStIdx</a>(<a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a>);
<a name="l00535"></a>00535 
<a name="l00536"></a>00536             <span class="keywordflow">continue</span>;
<a name="l00537"></a>00537         }
<a name="l00538"></a>00538 
<a name="l00539"></a>00539         <span class="keywordflow">if</span> (<a class="code" href="classOzoneLSQ.html#a22dc8294eecb144fbdd951d2e32e9330">dcacheInterface</a> &amp;&amp; <a class="code" href="classOzoneLSQ.html#a22dc8294eecb144fbdd951d2e32e9330">dcacheInterface</a>-&gt;isBlocked()) {
<a name="l00540"></a>00540             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Unable to write back any more stores, cache&quot;</span>
<a name="l00541"></a>00541                     <span class="stringliteral">&quot; is blocked!\n&quot;</span>);
<a name="l00542"></a>00542             <span class="keywordflow">break</span>;
<a name="l00543"></a>00543         }
<a name="l00544"></a>00544 
<a name="l00545"></a>00545         ++<a class="code" href="classOzoneLSQ.html#a03435d626b7567ed154de5d7d8c3d419">usedPorts</a>;
<a name="l00546"></a>00546 
<a name="l00547"></a>00547         <span class="keywordflow">if</span> (<a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[<a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a>].inst-&gt;isDataPrefetch()) {
<a name="l00548"></a>00548             <a class="code" href="classOzoneLSQ.html#a4ec2fe6ed54cf88c23fb214b87f850d1">incrStIdx</a>(<a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a>);
<a name="l00549"></a>00549 
<a name="l00550"></a>00550             <span class="keywordflow">continue</span>;
<a name="l00551"></a>00551         }
<a name="l00552"></a>00552 
<a name="l00553"></a>00553         assert(<a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[<a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a>].req);
<a name="l00554"></a>00554         assert(!<a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[<a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a>].committed);
<a name="l00555"></a>00555 
<a name="l00556"></a>00556         MemReqPtr req = <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[<a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a>].req;
<a name="l00557"></a>00557         <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[<a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a>].committed = <span class="keyword">true</span>;
<a name="l00558"></a>00558 
<a name="l00559"></a>00559 <span class="comment">//      Fault fault = cpu-&gt;translateDataReadReq(req);</span>
<a name="l00560"></a>00560         req-&gt;cmd = Write;
<a name="l00561"></a>00561         req-&gt;completionEvent = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00562"></a>00562         req-&gt;time = <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>();
<a name="l00563"></a>00563         assert(!req-&gt;data);
<a name="l00564"></a>00564         req-&gt;data = <span class="keyword">new</span> uint8_t[64];
<a name="l00565"></a>00565         memcpy(req-&gt;data, (uint8_t *)&amp;<a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[<a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a>].data, req-&gt;size);
<a name="l00566"></a>00566 
<a name="l00567"></a>00567         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;D-Cache: Writing back store idx:%i PC:%#x &quot;</span>
<a name="l00568"></a>00568                 <span class="stringliteral">&quot;to Addr:%#x, data:%#x [sn:%lli]\n&quot;</span>,
<a name="l00569"></a>00569                 <a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a>,<a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[<a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a>].inst-&gt;readPC(),
<a name="l00570"></a>00570                 req-&gt;paddr, *(req-&gt;data),
<a name="l00571"></a>00571                 <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[<a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a>].inst-&gt;seqNum);
<a name="l00572"></a>00572 
<a name="l00573"></a>00573 <span class="comment">//        if (fault != NoFault) {</span>
<a name="l00574"></a>00574             <span class="comment">//What should we do if there is a fault???</span>
<a name="l00575"></a>00575             <span class="comment">//for now panic</span>
<a name="l00576"></a>00576 <span class="comment">//            panic(&quot;Page Table Fault!!!!!\n&quot;);</span>
<a name="l00577"></a>00577 <span class="comment">//        }</span>
<a name="l00578"></a>00578 
<a name="l00579"></a>00579         <span class="keywordflow">if</span> (<a class="code" href="classOzoneLSQ.html#a22dc8294eecb144fbdd951d2e32e9330">dcacheInterface</a>) {
<a name="l00580"></a>00580             MemAccessResult result = <a class="code" href="classOzoneLSQ.html#a22dc8294eecb144fbdd951d2e32e9330">dcacheInterface</a>-&gt;access(req);
<a name="l00581"></a>00581 
<a name="l00582"></a>00582             <span class="comment">//@todo temp fix for LL/SC (works fine for 1 CPU)</span>
<a name="l00583"></a>00583             <span class="keywordflow">if</span> (req-&gt;isLLSC()) {
<a name="l00584"></a>00584                 req-&gt;result=1;
<a name="l00585"></a>00585                 <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;LL/SC! oh no no support!!!&quot;</span>);
<a name="l00586"></a>00586             }
<a name="l00587"></a>00587 
<a name="l00588"></a>00588             <span class="keywordflow">if</span> (<a class="code" href="classOzoneLSQ.html#af8eb8590fbfa6ecd2f796390677a4c00">isStalled</a>() &amp;&amp;
<a name="l00589"></a>00589                 <a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[<a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a>].inst-&gt;seqNum == <a class="code" href="classOzoneLSQ.html#afe1cdcfca6b44c28581d862228adc3da">stallingStoreIsn</a>) {
<a name="l00590"></a>00590                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>, <span class="stringliteral">&quot;Unstalling, stalling store [sn:%lli] &quot;</span>
<a name="l00591"></a>00591                         <span class="stringliteral">&quot;load idx:%i\n&quot;</span>,
<a name="l00592"></a>00592                         <a class="code" href="classOzoneLSQ.html#afe1cdcfca6b44c28581d862228adc3da">stallingStoreIsn</a>, <a class="code" href="classOzoneLSQ.html#af55bc9000c8b4e4cfcfbd018feca12a7">stallingLoadIdx</a>);
<a name="l00593"></a>00593                 <a class="code" href="classOzoneLSQ.html#a6f8bff553ad30865c7d0c62e05421eb8">stalled</a> = <span class="keyword">false</span>;
<a name="l00594"></a>00594                 <a class="code" href="classOzoneLSQ.html#afe1cdcfca6b44c28581d862228adc3da">stallingStoreIsn</a> = 0;
<a name="l00595"></a>00595                 <a class="code" href="classOzoneLSQ.html#a84f815aa1fa864ba2e6d75f5ad2b52d1">be</a>-&gt;<a class="code" href="classBackEnd.html#ae165df775b4de9e9430228c7f04c2bc9">replayMemInst</a>(<a class="code" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a>[<a class="code" href="classOzoneLSQ.html#af55bc9000c8b4e4cfcfbd018feca12a7">stallingLoadIdx</a>]);
<a name="l00596"></a>00596             }
<a name="l00597"></a>00597 
<a name="l00598"></a>00598             <span class="keywordflow">if</span> (result != MA_HIT &amp;&amp; <a class="code" href="classOzoneLSQ.html#a22dc8294eecb144fbdd951d2e32e9330">dcacheInterface</a>-&gt;doEvents()) {
<a name="l00599"></a>00599                 <a class="code" href="classEvent.html">Event</a> *wb = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00600"></a>00600 <span class="comment">/*</span>
<a name="l00601"></a>00601 <span class="comment">                typename IEW::LdWritebackEvent *wb = NULL;</span>
<a name="l00602"></a>00602 <span class="comment">                if (req-&gt;isLLSC()) {</span>
<a name="l00603"></a>00603 <span class="comment">                    // Stx_C does not generate a system port transaction.</span>
<a name="l00604"></a>00604 <span class="comment">                    req-&gt;result=0;</span>
<a name="l00605"></a>00605 <span class="comment">                    wb = new typename IEW::LdWritebackEvent(storeQueue[storeWBIdx].inst,</span>
<a name="l00606"></a>00606 <span class="comment">                                                            iewStage);</span>
<a name="l00607"></a>00607 <span class="comment">                }</span>
<a name="l00608"></a>00608 <span class="comment">*/</span>
<a name="l00609"></a>00609                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>,<span class="stringliteral">&quot;D-Cache Write Miss!\n&quot;</span>);
<a name="l00610"></a>00610 
<a name="l00611"></a>00611 <span class="comment">//                DPRINTF(Activity, &quot;Active st accessing mem miss [sn:%lli]\n&quot;,</span>
<a name="l00612"></a>00612 <span class="comment">//                        storeQueue[storeWBIdx].inst-&gt;seqNum);</span>
<a name="l00613"></a>00613 
<a name="l00614"></a>00614                 <span class="comment">// Will stores need their own kind of writeback events?</span>
<a name="l00615"></a>00615                 <span class="comment">// Do stores even need writeback events?</span>
<a name="l00616"></a>00616                 assert(!req-&gt;completionEvent);
<a name="l00617"></a>00617                 req-&gt;completionEvent = <span class="keyword">new</span>
<a name="l00618"></a>00618                     <a class="code" href="classOzoneLSQ.html#a8f5ca1839f53a90564710f1349dd0199">StoreCompletionEvent</a>(<a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a>, wb, <span class="keyword">this</span>);
<a name="l00619"></a>00619 
<a name="l00620"></a>00620                 <a class="code" href="classOzoneLSQ.html#a8b4696062ef09ab956804a7a99491853">lastDcacheStall</a> = <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>();
<a name="l00621"></a>00621 
<a name="l00622"></a>00622                 <a class="code" href="classOzoneLSQ.html#a6cdf6e6db875a442f3ab6db542bd2bb5">_status</a> = <a class="code" href="classOzoneLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70ba4ba5ae5815b190bd652669e2fdea5ed7">DcacheMissStall</a>;
<a name="l00623"></a>00623 
<a name="l00624"></a>00624                 <span class="comment">//mshrSeqNums.push_back(storeQueue[storeWBIdx].inst-&gt;seqNum);</span>
<a name="l00625"></a>00625 
<a name="l00626"></a>00626                 <span class="comment">//DPRINTF(OzoneLSQ, &quot;Added MSHR. count = %i\n&quot;,mshrSeqNums.size());</span>
<a name="l00627"></a>00627 
<a name="l00628"></a>00628                 <span class="comment">// Increment stat here or something</span>
<a name="l00629"></a>00629             } <span class="keywordflow">else</span> {
<a name="l00630"></a>00630                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classOzoneLSQ.html">OzoneLSQ</a>,<span class="stringliteral">&quot;D-Cache: Write Hit on idx:%i !\n&quot;</span>,
<a name="l00631"></a>00631                         <a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a>);
<a name="l00632"></a>00632 
<a name="l00633"></a>00633 <span class="comment">//                DPRINTF(Activity, &quot;Active st accessing mem hit [sn:%lli]\n&quot;,</span>
<a name="l00634"></a>00634 <span class="comment">//                        storeQueue[storeWBIdx].inst-&gt;seqNum);</span>
<a name="l00635"></a>00635 
<a name="l00636"></a>00636                 <span class="keywordflow">if</span> (req-&gt;isLLSC()) {
<a name="l00637"></a>00637                     <span class="comment">// Stx_C does not generate a system port transaction.</span>
<a name="l00638"></a>00638                     req-&gt;result=1;
<a name="l00639"></a>00639                     <span class="keyword">typename</span> <a class="code" href="classBackEnd_1_1LdWritebackEvent.html">BackEnd::LdWritebackEvent</a> *wb =
<a name="l00640"></a>00640                         <span class="keyword">new</span> <span class="keyword">typename</span> <a class="code" href="classBackEnd_1_1LdWritebackEvent.html">BackEnd::LdWritebackEvent</a>(<a class="code" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a>[<a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a>].inst,
<a name="l00641"></a>00641                                                                <a class="code" href="classOzoneLSQ.html#a84f815aa1fa864ba2e6d75f5ad2b52d1">be</a>);
<a name="l00642"></a>00642                     wb-&gt;schedule(<a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>());
<a name="l00643"></a>00643                 }
<a name="l00644"></a>00644 
<a name="l00645"></a>00645                 <a class="code" href="classOzoneLSQ.html#a12ec7cad6ac51a53bca7795588885e5c">completeStore</a>(<a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a>);
<a name="l00646"></a>00646             }
<a name="l00647"></a>00647 
<a name="l00648"></a>00648             <a class="code" href="classOzoneLSQ.html#a4ec2fe6ed54cf88c23fb214b87f850d1">incrStIdx</a>(<a class="code" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a>);
<a name="l00649"></a>00649         } <span class="keywordflow">else</span> {
<a name="l00650"></a>00650             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Must HAVE DCACHE!!!!!\n&quot;</span>);
<a name="l00651"></a>00651         }
<a name="l00652"></a>00652     }
<a name="l00653"></a>00653 
<a name="l00654"></a>00654     <span class="comment">// Not sure this should set it to 0.</span>
<a name="l00655"></a>00655     <a class="code" href="classOzoneLSQ.html#a03435d626b7567ed154de5d7d8c3d419">usedPorts</a> = 0;
<a name="l00656"></a>00656 
<a name="l00657"></a>00657     assert(<a class="code" href="classOzoneLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a> &gt;= 0 &amp;&amp; <a class="code" href="classOzoneLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a> &gt;= 0);
<a name="l00658"></a>00658 }
</pre></div></p>

</div>
</div>
<hr/><h2>フレンドと関連する関数</h2>
<a class="anchor" id="a8f5ca1839f53a90564710f1349dd0199"></a><!-- doxytag: member="OzoneLSQ::StoreCompletionEvent" ref="a8f5ca1839f53a90564710f1349dd0199" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classOzoneLSQ_1_1StoreCompletionEvent.html">StoreCompletionEvent</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="a6cdf6e6db875a442f3ab6db542bd2bb5"></a><!-- doxytag: member="OzoneLSQ::_status" ref="a6cdf6e6db875a442f3ab6db542bd2bb5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOzoneLSQ.html#a67a0db04d321a74b7e7fcfd3f1a3f70b">Status</a> <a class="el" href="classOzoneLSQ.html#a6cdf6e6db875a442f3ab6db542bd2bb5">_status</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The status of the <a class="el" href="classLSQ.html">LSQ</a> unit. </p>

</div>
</div>
<a class="anchor" id="a84f815aa1fa864ba2e6d75f5ad2b52d1"></a><!-- doxytag: member="OzoneLSQ::be" ref="a84f815aa1fa864ba2e6d75f5ad2b52d1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBackEnd.html">BackEnd</a>* <a class="el" href="classOzoneLSQ.html#a84f815aa1fa864ba2e6d75f5ad2b52d1">be</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pointer to the back-end stage. </p>

</div>
</div>
<a class="anchor" id="ab2e23636971c40e7ed945026b2a184e1"></a><!-- doxytag: member="OzoneLSQ::cachePorts" ref="ab2e23636971c40e7ed945026b2a184e1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classOzoneLSQ.html#ab2e23636971c40e7ed945026b2a184e1">cachePorts</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000045">TODO:</a></b></dt><dd>Consider moving to a more advanced model with write vs read ports </dd></dl>
<p>The number of cache ports available each cycle. </p>

</div>
</div>
<a class="anchor" id="a766385c2941cd46525f4d9dff90200a2"></a><!-- doxytag: member="OzoneLSQ::cpu" ref="a766385c2941cd46525f4d9dff90200a2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOzoneLSQ.html#a90ba84e54618cc07f2e8f05e046cb5ce">FullCPU</a>* <a class="el" href="classOzoneLSQ.html#a766385c2941cd46525f4d9dff90200a2">cpu</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pointer to the CPU. </p>

</div>
</div>
<a class="anchor" id="a22dc8294eecb144fbdd951d2e32e9330"></a><!-- doxytag: member="OzoneLSQ::dcacheInterface" ref="a22dc8294eecb144fbdd951d2e32e9330" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MemInterface* <a class="el" href="classOzoneLSQ.html#a22dc8294eecb144fbdd951d2e32e9330">dcacheInterface</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pointer to the D-cache. </p>

</div>
</div>
<a class="anchor" id="af6f43373b6586aa8c486538fb076effb"></a><!-- doxytag: member="OzoneLSQ::fromIssue" ref="af6f43373b6586aa8c486538fb076effb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTimeBuffer.html">TimeBuffer</a>&lt;<a class="el" href="structIssueStruct.html">IssueStruct</a>&gt;::wire <a class="el" href="classOzoneLSQ.html#af6f43373b6586aa8c486538fb076effb">fromIssue</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classWire.html">Wire</a> to read information from the issue stage time queue. </p>

</div>
</div>
<a class="anchor" id="a95dc31b4ce3ebcb6b9d75a510b3a128c"></a><!-- doxytag: member="OzoneLSQ::isLoadBlocked" ref="a95dc31b4ce3ebcb6b9d75a510b3a128c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classOzoneLSQ.html#a95dc31b4ce3ebcb6b9d75a510b3a128c">isLoadBlocked</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Whether or not a load is blocked due to the memory system. It is cleared when this value is checked via <a class="el" href="classOzoneLSQ.html#a05c413ba417c6453e99f75d87c958590">loadBlocked()</a>. </p>

</div>
</div>
<a class="anchor" id="a8b4696062ef09ab956804a7a99491853"></a><!-- doxytag: member="OzoneLSQ::lastDcacheStall" ref="a8b4696062ef09ab956804a7a99491853" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e">Counter</a> <a class="el" href="classOzoneLSQ.html#a8b4696062ef09ab956804a7a99491853">lastDcacheStall</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a7123aa8b10829cc4712dff5454e13978"></a><!-- doxytag: member="OzoneLSQ::loadFaultInst" ref="a7123aa8b10829cc4712dff5454e13978" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> <a class="el" href="classOzoneLSQ.html#a7123aa8b10829cc4712dff5454e13978">loadFaultInst</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The oldest faulting load instruction. </p>

</div>
</div>
<a class="anchor" id="ac09af89928d2ef4da4cbdcfce26fa3f5"></a><!-- doxytag: member="OzoneLSQ::loadHead" ref="ac09af89928d2ef4da4cbdcfce26fa3f5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classOzoneLSQ.html#ac09af89928d2ef4da4cbdcfce26fa3f5">loadHead</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The index of the head instruction in the LQ. </p>

</div>
</div>
<a class="anchor" id="aa5f3703c5d7c5ce21a497352b94c7465"></a><!-- doxytag: member="OzoneLSQ::loadQueue" ref="aa5f3703c5d7c5ce21a497352b94c7465" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt;<a class="el" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a>&gt; <a class="el" href="classOzoneLSQ.html#aa5f3703c5d7c5ce21a497352b94c7465">loadQueue</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The load queue. </p>

</div>
</div>
<a class="anchor" id="a867971f18e464abd16193e069c64a8ad"></a><!-- doxytag: member="OzoneLSQ::loads" ref="a867971f18e464abd16193e069c64a8ad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classOzoneLSQ.html#a867971f18e464abd16193e069c64a8ad">loads</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The number of load instructions in the LQ. </p>

</div>
</div>
<a class="anchor" id="a973a489225da164cc85e690f13c86841"></a><!-- doxytag: member="OzoneLSQ::loadTail" ref="a973a489225da164cc85e690f13c86841" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classOzoneLSQ.html#a973a489225da164cc85e690f13c86841">loadTail</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The index of the tail instruction in the LQ. </p>

</div>
</div>
<a class="anchor" id="aafa99d800d574095881acbacdbbbcc47"></a><!-- doxytag: member="OzoneLSQ::LQEntries" ref="aafa99d800d574095881acbacdbbbcc47" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classOzoneLSQ.html#aafa99d800d574095881acbacdbbbcc47">LQEntries</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The number of LQ entries. </p>

</div>
</div>
<a class="anchor" id="adfd96fbbaa327a31d20f0d4134418fad"></a><!-- doxytag: member="OzoneLSQ::lsqID" ref="adfd96fbbaa327a31d20f0d4134418fad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classOzoneLSQ.html#adfd96fbbaa327a31d20f0d4134418fad">lsqID</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The <a class="el" href="classOzoneLSQ.html">OzoneLSQ</a> thread id. </p>

</div>
</div>
<a class="anchor" id="a270a20c3fa52139e0538288275db9d22"></a><!-- doxytag: member="OzoneLSQ::memDepViolator" ref="a270a20c3fa52139e0538288275db9d22" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> <a class="el" href="classOzoneLSQ.html#a270a20c3fa52139e0538288275db9d22">memDepViolator</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The oldest load that caused a memory ordering violation. </p>

</div>
</div>
<a class="anchor" id="ad14ffa23ad731f6003755b643f999049"></a><!-- doxytag: member="OzoneLSQ::pTable" ref="ad14ffa23ad731f6003755b643f999049" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPageTable.html">PageTable</a>* <a class="el" href="classOzoneLSQ.html#ad14ffa23ad731f6003755b643f999049">pTable</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pointer to the page table. </p>

</div>
</div>
<a class="anchor" id="a38c8af5392da70119dc5cce4e3637cbc"></a><!-- doxytag: member="OzoneLSQ::SQEntries" ref="a38c8af5392da70119dc5cce4e3637cbc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classOzoneLSQ.html#a38c8af5392da70119dc5cce4e3637cbc">SQEntries</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The number of SQ entries. </p>

</div>
</div>
<a class="anchor" id="a6f8bff553ad30865c7d0c62e05421eb8"></a><!-- doxytag: member="OzoneLSQ::stalled" ref="a6f8bff553ad30865c7d0c62e05421eb8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classOzoneLSQ.html#a6f8bff553ad30865c7d0c62e05421eb8">stalled</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Whether or not the <a class="el" href="classLSQ.html">LSQ</a> is stalled. </p>

</div>
</div>
<a class="anchor" id="af55bc9000c8b4e4cfcfbd018feca12a7"></a><!-- doxytag: member="OzoneLSQ::stallingLoadIdx" ref="af55bc9000c8b4e4cfcfbd018feca12a7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classOzoneLSQ.html#af55bc9000c8b4e4cfcfbd018feca12a7">stallingLoadIdx</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The index of the above store. </p>

</div>
</div>
<a class="anchor" id="afe1cdcfca6b44c28581d862228adc3da"></a><!-- doxytag: member="OzoneLSQ::stallingStoreIsn" ref="afe1cdcfca6b44c28581d862228adc3da" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> <a class="el" href="classOzoneLSQ.html#afe1cdcfca6b44c28581d862228adc3da">stallingStoreIsn</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The store that causes the stall due to partial store to load forwarding. </p>

</div>
</div>
<a class="anchor" id="ab98cf7d5235b7402e8916e78569f4ab2"></a><!-- doxytag: member="OzoneLSQ::storeFaultInst" ref="ab98cf7d5235b7402e8916e78569f4ab2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOzoneLSQ.html#a028ce10889c5f6450239d9e9a7347976">DynInstPtr</a> <a class="el" href="classOzoneLSQ.html#ab98cf7d5235b7402e8916e78569f4ab2">storeFaultInst</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The oldest faulting store instruction. </p>

</div>
</div>
<a class="anchor" id="a6e87b6f77102183080ea6ab8599b26a9"></a><!-- doxytag: member="OzoneLSQ::storeHead" ref="a6e87b6f77102183080ea6ab8599b26a9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classOzoneLSQ.html#a6e87b6f77102183080ea6ab8599b26a9">storeHead</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The index of the head instruction in the SQ. </p>

</div>
</div>
<a class="anchor" id="a1d370cdc36d253e0f786d46c6af77a40"></a><!-- doxytag: member="OzoneLSQ::storeQueue" ref="a1d370cdc36d253e0f786d46c6af77a40" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt;<a class="el" href="structOzoneLSQ_1_1SQEntry.html">SQEntry</a>&gt; <a class="el" href="classOzoneLSQ.html#a1d370cdc36d253e0f786d46c6af77a40">storeQueue</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The store queue. </p>

</div>
</div>
<a class="anchor" id="ade9e895aa9c5ace27779c985c4f43326"></a><!-- doxytag: member="OzoneLSQ::stores" ref="ade9e895aa9c5ace27779c985c4f43326" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classOzoneLSQ.html#ade9e895aa9c5ace27779c985c4f43326">stores</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The number of store instructions in the SQ (excludes those waiting to writeback). </p>

</div>
</div>
<a class="anchor" id="a3831a7965ffbe90df177026988476f9c"></a><!-- doxytag: member="OzoneLSQ::storesToWB" ref="a3831a7965ffbe90df177026988476f9c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classOzoneLSQ.html#a3831a7965ffbe90df177026988476f9c">storesToWB</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The number of store instructions in the SQ waiting to writeback. </p>

</div>
</div>
<a class="anchor" id="acd5c7fbb5578b5cb505ffff16bbf6a8b"></a><!-- doxytag: member="OzoneLSQ::storeTail" ref="acd5c7fbb5578b5cb505ffff16bbf6a8b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classOzoneLSQ.html#acd5c7fbb5578b5cb505ffff16bbf6a8b">storeTail</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The index of the tail instruction in the SQ. </p>

</div>
</div>
<a class="anchor" id="a9023e0813d4f3e566d17fb6334a2da02"></a><!-- doxytag: member="OzoneLSQ::storeWBIdx" ref="a9023e0813d4f3e566d17fb6334a2da02" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classOzoneLSQ.html#a9023e0813d4f3e566d17fb6334a2da02">storeWBIdx</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The index of the first instruction that is ready to be written back, and has not yet been written back. </p>

</div>
</div>
<a class="anchor" id="a03435d626b7567ed154de5d7d8c3d419"></a><!-- doxytag: member="OzoneLSQ::usedPorts" ref="a03435d626b7567ed154de5d7d8c3d419" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classOzoneLSQ.html#a03435d626b7567ed154de5d7d8c3d419">usedPorts</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The number of used cache ports in this cycle. </p>

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>cpu/ozone/<a class="el" href="ozone_2lsq__unit_8hh_source.html">lsq_unit.hh</a></li>
<li>cpu/ozone/<a class="el" href="ozone_2lsq__unit__impl_8hh_source.html">lsq_unit_impl.hh</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
