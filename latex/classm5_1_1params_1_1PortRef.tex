\hypertarget{classm5_1_1params_1_1PortRef}{
\section{クラス PortRef}
\label{classm5_1_1params_1_1PortRef}\index{m5::params::PortRef@{m5::params::PortRef}}
}
PortRefに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2cm]{classm5_1_1params_1_1PortRef}
\end{center}
\end{figure}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classm5_1_1params_1_1PortRef_ac775ee34451fdfa742b318538164070e}{\_\-\_\-init\_\-\_\-}
\item 
def \hyperlink{classm5_1_1params_1_1PortRef_aa7a4b9bc0941308e362738503137460e}{\_\-\_\-str\_\-\_\-}
\item 
def \hyperlink{classm5_1_1params_1_1PortRef_af6412d48d9a71eac81e3195b52455aaa}{\_\-\_\-len\_\-\_\-}
\item 
def \hyperlink{classm5_1_1params_1_1PortRef_a33ebe6cd32bcbd15465fc28b9d94bf82}{ini\_\-str}
\item 
def \hyperlink{classm5_1_1params_1_1PortRef_ab1772c0da7b9e12819e1c0373513c53c}{get\_\-config\_\-as\_\-dict}
\item 
def \hyperlink{classm5_1_1params_1_1PortRef_a0a990b3ec3889d40889daca9ee5e4695}{\_\-\_\-getattr\_\-\_\-}
\item 
def \hyperlink{classm5_1_1params_1_1PortRef_a0f3e881a92d7a1b4d6d07d9e63180c98}{connect}
\item 
def \hyperlink{classm5_1_1params_1_1PortRef_a4110248fff184e40b53c1cfa2bc3c649}{clone}
\item 
def \hyperlink{classm5_1_1params_1_1PortRef_a587cd3c1e899640dc09d63793aa8093b}{unproxy}
\item 
def \hyperlink{classm5_1_1params_1_1PortRef_addaf6e2a0c3ee33ece43bba237efcd7d}{ccConnect}
\end{DoxyCompactItemize}
\subsection*{Public 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classm5_1_1params_1_1PortRef_a5fccb54db416603de9f73682d34ea092}{simobj}
\item 
\hyperlink{classm5_1_1params_1_1PortRef_ab74e6bf80237ddc4109968cedc58c151}{name}
\item 
\hyperlink{classm5_1_1params_1_1PortRef_a4e0cdb878325d53ad79a74504bf97a96}{role}
\item 
\hyperlink{classm5_1_1params_1_1PortRef_a3c494215e4790a80ee48db4c305b387b}{peer}
\item 
\hyperlink{classm5_1_1params_1_1PortRef_acc170d29b85660fe80665f04ce53bbe3}{ccConnected}
\item 
\hyperlink{classm5_1_1params_1_1PortRef_a6784e1c334dfceb8f017667c0b0f6a3e}{index}
\end{DoxyCompactItemize}


\subsection{関数}
\hypertarget{classm5_1_1params_1_1PortRef_a0a990b3ec3889d40889daca9ee5e4695}{
\index{m5::params::PortRef@{m5::params::PortRef}!\_\-\_\-getattr\_\-\_\-@{\_\-\_\-getattr\_\-\_\-}}
\index{\_\-\_\-getattr\_\-\_\-@{\_\-\_\-getattr\_\-\_\-}!m5::params::PortRef@{m5::params::PortRef}}
\subsubsection[{\_\-\_\-getattr\_\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}def \_\-\_\-getattr\_\-\_\- ( {\em self}, \/   {\em attr})}}
\label{classm5_1_1params_1_1PortRef_a0a990b3ec3889d40889daca9ee5e4695}



\begin{DoxyCode}
1399                                :
1400         if attr == 'peerObj':
1401             # shorthand for proxies
1402             return self.peer.simobj
1403         raise AttributeError, "'%s' object has no attribute '%s'" % \
1404               (self.__class__.__name__, attr)
1405 
1406     # Full connection is symmetric (both ways).  Called via
1407     # SimObject.__setattr__ as a result of a port assignment, e.g.,
1408     # "obj1.portA = obj2.portB", or via VectorPortElementRef.__setitem__,
1409     # e.g., "obj1.portA[3] = obj2.portB".
    def connect(self, other):
\end{DoxyCode}
\hypertarget{classm5_1_1params_1_1PortRef_ac775ee34451fdfa742b318538164070e}{
\index{m5::params::PortRef@{m5::params::PortRef}!\_\-\_\-init\_\-\_\-@{\_\-\_\-init\_\-\_\-}}
\index{\_\-\_\-init\_\-\_\-@{\_\-\_\-init\_\-\_\-}!m5::params::PortRef@{m5::params::PortRef}}
\subsubsection[{\_\-\_\-init\_\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}def \_\-\_\-init\_\-\_\- ( {\em self}, \/   {\em simobj}, \/   {\em name}, \/   {\em role})}}
\label{classm5_1_1params_1_1PortRef_ac775ee34451fdfa742b318538164070e}



\begin{DoxyCode}
1374                                           :
1375         assert(isSimObject(simobj) or isSimObjectClass(simobj))
1376         self.simobj = simobj
1377         self.name = name
1378         self.role = role
1379         self.peer = None   # not associated with another port yet
1380         self.ccConnected = False # C++ port connection done?
1381         self.index = -1  # always -1 for non-vector ports
1382 
    def __str__(self):
\end{DoxyCode}
\hypertarget{classm5_1_1params_1_1PortRef_af6412d48d9a71eac81e3195b52455aaa}{
\index{m5::params::PortRef@{m5::params::PortRef}!\_\-\_\-len\_\-\_\-@{\_\-\_\-len\_\-\_\-}}
\index{\_\-\_\-len\_\-\_\-@{\_\-\_\-len\_\-\_\-}!m5::params::PortRef@{m5::params::PortRef}}
\subsubsection[{\_\-\_\-len\_\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}def \_\-\_\-len\_\-\_\- ( {\em self})}}
\label{classm5_1_1params_1_1PortRef_af6412d48d9a71eac81e3195b52455aaa}



\begin{DoxyCode}
1386                      :
1387         # Return the number of connected ports, i.e. 0 is we have no
1388         # peer and 1 if we do.
1389         return int(self.peer != None)
1390 
1391     # for config.ini, print peer's name (not ours)
    def ini_str(self):
\end{DoxyCode}
\hypertarget{classm5_1_1params_1_1PortRef_aa7a4b9bc0941308e362738503137460e}{
\index{m5::params::PortRef@{m5::params::PortRef}!\_\-\_\-str\_\-\_\-@{\_\-\_\-str\_\-\_\-}}
\index{\_\-\_\-str\_\-\_\-@{\_\-\_\-str\_\-\_\-}!m5::params::PortRef@{m5::params::PortRef}}
\subsubsection[{\_\-\_\-str\_\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}def \_\-\_\-str\_\-\_\- ( {\em self})}}
\label{classm5_1_1params_1_1PortRef_aa7a4b9bc0941308e362738503137460e}


\hyperlink{classm5_1_1params_1_1VectorPortElementRef_aa7a4b9bc0941308e362738503137460e}{VectorPortElementRef}で再定義されています。


\begin{DoxyCode}
1383                      :
1384         return '%s.%s' % (self.simobj, self.name)
1385 
    def __len__(self):
\end{DoxyCode}
\hypertarget{classm5_1_1params_1_1PortRef_addaf6e2a0c3ee33ece43bba237efcd7d}{
\index{m5::params::PortRef@{m5::params::PortRef}!ccConnect@{ccConnect}}
\index{ccConnect@{ccConnect}!m5::params::PortRef@{m5::params::PortRef}}
\subsubsection[{ccConnect}]{\setlength{\rightskip}{0pt plus 5cm}def ccConnect ( {\em self})}}
\label{classm5_1_1params_1_1PortRef_addaf6e2a0c3ee33ece43bba237efcd7d}



\begin{DoxyCode}
1453                        :
1454         from m5.internal.pyobject import connectPorts
1455 
1456         if self.role == 'SLAVE':
1457             # do nothing and let the master take care of it
1458             return
1459 
1460         if self.ccConnected: # already done this
1461             return
1462         peer = self.peer
1463         if not self.peer: # nothing to connect to
1464             return
1465 
1466         # check that we connect a master to a slave
1467         if self.role == peer.role:
1468             raise TypeError, \
1469                 "cannot connect '%s' and '%s' due to identical role '%s'" \
1470                 % (peer, self, self.role)
1471 
1472         try:
1473             # self is always the master and peer the slave
1474             connectPorts(self.simobj.getCCObject(), self.name, self.index,
1475                          peer.simobj.getCCObject(), peer.name, peer.index)
1476         except:
1477             print "Error connecting port %s.%s to %s.%s" % \
1478                   (self.simobj.path(), self.name,
1479                    peer.simobj.path(), peer.name)
1480             raise
1481         self.ccConnected = True
1482         peer.ccConnected = True
1483 
1484 # A reference to an individual element of a VectorPort... much like a
1485 # PortRef, but has an index.
class VectorPortElementRef(PortRef):
\end{DoxyCode}
\hypertarget{classm5_1_1params_1_1PortRef_a4110248fff184e40b53c1cfa2bc3c649}{
\index{m5::params::PortRef@{m5::params::PortRef}!clone@{clone}}
\index{clone@{clone}!m5::params::PortRef@{m5::params::PortRef}}
\subsubsection[{clone}]{\setlength{\rightskip}{0pt plus 5cm}def clone ( {\em self}, \/   {\em simobj}, \/   {\em memo})}}
\label{classm5_1_1params_1_1PortRef_a4110248fff184e40b53c1cfa2bc3c649}



\begin{DoxyCode}
1428                                  :
1429         if memo.has_key(self):
1430             return memo[self]
1431         newRef = copy.copy(self)
1432         memo[self] = newRef
1433         newRef.simobj = simobj
1434         assert(isSimObject(newRef.simobj))
1435         if self.peer and not proxy.isproxy(self.peer):
1436             peerObj = self.peer.simobj(_memo=memo)
1437             newRef.peer = self.peer.clone(peerObj, memo)
1438             assert(not isinstance(newRef.peer, VectorPortRef))
1439         return newRef
1440 
    def unproxy(self, simobj):
\end{DoxyCode}
\hypertarget{classm5_1_1params_1_1PortRef_a0f3e881a92d7a1b4d6d07d9e63180c98}{
\index{m5::params::PortRef@{m5::params::PortRef}!connect@{connect}}
\index{connect@{connect}!m5::params::PortRef@{m5::params::PortRef}}
\subsubsection[{connect}]{\setlength{\rightskip}{0pt plus 5cm}def connect ( {\em self}, \/   {\em other})}}
\label{classm5_1_1params_1_1PortRef_a0f3e881a92d7a1b4d6d07d9e63180c98}



\begin{DoxyCode}
1410                             :
1411         if isinstance(other, VectorPortRef):
1412             # reference to plain VectorPort is implicit append
1413             other = other._get_next()
1414         if self.peer and not proxy.isproxy(self.peer):
1415             fatal("Port %s is already connected to %s, cannot connect %s\n",
1416                   self, self.peer, other);
1417         self.peer = other
1418         if proxy.isproxy(other):
1419             other.set_param_desc(PortParamDesc())
1420         elif isinstance(other, PortRef):
1421             if other.peer is not self:
1422                 other.connect(self)
1423         else:
1424             raise TypeError, \
1425                   "assigning non-port reference '%s' to port '%s'" \
1426                   % (other, self)
1427 
    def clone(self, simobj, memo):
\end{DoxyCode}
\hypertarget{classm5_1_1params_1_1PortRef_ab1772c0da7b9e12819e1c0373513c53c}{
\index{m5::params::PortRef@{m5::params::PortRef}!get\_\-config\_\-as\_\-dict@{get\_\-config\_\-as\_\-dict}}
\index{get\_\-config\_\-as\_\-dict@{get\_\-config\_\-as\_\-dict}!m5::params::PortRef@{m5::params::PortRef}}
\subsubsection[{get\_\-config\_\-as\_\-dict}]{\setlength{\rightskip}{0pt plus 5cm}def get\_\-config\_\-as\_\-dict ( {\em self})}}
\label{classm5_1_1params_1_1PortRef_ab1772c0da7b9e12819e1c0373513c53c}



\begin{DoxyCode}
1396                                 :
1397         return {'role' : self.role, 'peer' : str(self.peer)}
1398 
    def __getattr__(self, attr):
\end{DoxyCode}
\hypertarget{classm5_1_1params_1_1PortRef_a33ebe6cd32bcbd15465fc28b9d94bf82}{
\index{m5::params::PortRef@{m5::params::PortRef}!ini\_\-str@{ini\_\-str}}
\index{ini\_\-str@{ini\_\-str}!m5::params::PortRef@{m5::params::PortRef}}
\subsubsection[{ini\_\-str}]{\setlength{\rightskip}{0pt plus 5cm}def ini\_\-str ( {\em self})}}
\label{classm5_1_1params_1_1PortRef_a33ebe6cd32bcbd15465fc28b9d94bf82}



\begin{DoxyCode}
1392                      :
1393         return str(self.peer)
1394 
1395     # for config.json
    def get_config_as_dict(self):
\end{DoxyCode}
\hypertarget{classm5_1_1params_1_1PortRef_a587cd3c1e899640dc09d63793aa8093b}{
\index{m5::params::PortRef@{m5::params::PortRef}!unproxy@{unproxy}}
\index{unproxy@{unproxy}!m5::params::PortRef@{m5::params::PortRef}}
\subsubsection[{unproxy}]{\setlength{\rightskip}{0pt plus 5cm}def unproxy ( {\em self}, \/   {\em simobj})}}
\label{classm5_1_1params_1_1PortRef_a587cd3c1e899640dc09d63793aa8093b}



\begin{DoxyCode}
1441                              :
1442         assert(simobj is self.simobj)
1443         if proxy.isproxy(self.peer):
1444             try:
1445                 realPeer = self.peer.unproxy(self.simobj)
1446             except:
1447                 print "Error in unproxying port '%s' of %s" % \
1448                       (self.name, self.simobj.path())
1449                 raise
1450             self.connect(realPeer)
1451 
1452     # Call C++ to create corresponding port connection between C++ objects
    def ccConnect(self):
\end{DoxyCode}


\subsection{変数}
\hypertarget{classm5_1_1params_1_1PortRef_acc170d29b85660fe80665f04ce53bbe3}{
\index{m5::params::PortRef@{m5::params::PortRef}!ccConnected@{ccConnected}}
\index{ccConnected@{ccConnected}!m5::params::PortRef@{m5::params::PortRef}}
\subsubsection[{ccConnected}]{\setlength{\rightskip}{0pt plus 5cm}{\bf ccConnected}}}
\label{classm5_1_1params_1_1PortRef_acc170d29b85660fe80665f04ce53bbe3}
\hypertarget{classm5_1_1params_1_1PortRef_a6784e1c334dfceb8f017667c0b0f6a3e}{
\index{m5::params::PortRef@{m5::params::PortRef}!index@{index}}
\index{index@{index}!m5::params::PortRef@{m5::params::PortRef}}
\subsubsection[{index}]{\setlength{\rightskip}{0pt plus 5cm}{\bf index}}}
\label{classm5_1_1params_1_1PortRef_a6784e1c334dfceb8f017667c0b0f6a3e}


\hyperlink{classm5_1_1params_1_1VectorPortElementRef_a6784e1c334dfceb8f017667c0b0f6a3e}{VectorPortElementRef}で再定義されています。\hypertarget{classm5_1_1params_1_1PortRef_ab74e6bf80237ddc4109968cedc58c151}{
\index{m5::params::PortRef@{m5::params::PortRef}!name@{name}}
\index{name@{name}!m5::params::PortRef@{m5::params::PortRef}}
\subsubsection[{name}]{\setlength{\rightskip}{0pt plus 5cm}{\bf name}}}
\label{classm5_1_1params_1_1PortRef_ab74e6bf80237ddc4109968cedc58c151}
\hypertarget{classm5_1_1params_1_1PortRef_a3c494215e4790a80ee48db4c305b387b}{
\index{m5::params::PortRef@{m5::params::PortRef}!peer@{peer}}
\index{peer@{peer}!m5::params::PortRef@{m5::params::PortRef}}
\subsubsection[{peer}]{\setlength{\rightskip}{0pt plus 5cm}{\bf peer}}}
\label{classm5_1_1params_1_1PortRef_a3c494215e4790a80ee48db4c305b387b}
\hypertarget{classm5_1_1params_1_1PortRef_a4e0cdb878325d53ad79a74504bf97a96}{
\index{m5::params::PortRef@{m5::params::PortRef}!role@{role}}
\index{role@{role}!m5::params::PortRef@{m5::params::PortRef}}
\subsubsection[{role}]{\setlength{\rightskip}{0pt plus 5cm}{\bf role}}}
\label{classm5_1_1params_1_1PortRef_a4e0cdb878325d53ad79a74504bf97a96}
\hypertarget{classm5_1_1params_1_1PortRef_a5fccb54db416603de9f73682d34ea092}{
\index{m5::params::PortRef@{m5::params::PortRef}!simobj@{simobj}}
\index{simobj@{simobj}!m5::params::PortRef@{m5::params::PortRef}}
\subsubsection[{simobj}]{\setlength{\rightskip}{0pt plus 5cm}{\bf simobj}}}
\label{classm5_1_1params_1_1PortRef_a5fccb54db416603de9f73682d34ea092}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
python/m5/\hyperlink{params_8py}{params.py}\end{DoxyCompactItemize}
