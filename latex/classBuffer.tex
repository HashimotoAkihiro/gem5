\hypertarget{classBuffer}{
\section{クラス Buffer}
\label{classBuffer}\index{Buffer@{Buffer}}
}


{\ttfamily \#include $<$Buffer.hh$>$}\subsection*{Public 型}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{classBuffer_aaa1b52e516aa86db344256019b904840}{BufferModel} \{ \hyperlink{classBuffer_aaa1b52e516aa86db344256019b904840abab57b6e2c553e4d983f415a1f4ea75b}{NO\_\-MODEL} =  0, 
\hyperlink{classBuffer_aaa1b52e516aa86db344256019b904840a99a4e26934946b15bde8d5e6311ff98e}{BUF\_\-SRAM}, 
\hyperlink{classBuffer_aaa1b52e516aa86db344256019b904840aebafedb9a04e73c117cce7cebbf53790}{BUF\_\-REG}
 \}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classBuffer_a2aaebb88cefd77cf975f76e3f0f6a88d}{Buffer} (const string \&buffer\_\-model\_\-str\_\-, bool is\_\-fifo\_\-, bool is\_\-outdrv\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-entry\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} line\_\-width\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-read\_\-port\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-write\_\-port\_\-, const \hyperlink{classOrionConfig}{OrionConfig} $\ast$orion\_\-cfg\_\-ptr\_\-)
\item 
\hyperlink{classBuffer_ac72b418d40e29411ac044a49a20be750}{$\sim$Buffer} ()
\item 
double \hyperlink{classBuffer_a10fb66546e1cf164fe736f85adc39a63}{get\_\-dynamic\_\-energy} (bool is\_\-read\_\-, bool is\_\-max\_\-) const 
\item 
double \hyperlink{classBuffer_aeb5933543cfdeb1668baed5ce7c68351}{get\_\-static\_\-power} () const 
\item 
void \hyperlink{classBuffer_a8404831790e4809674f0249ef6505cd5}{print\_\-all} () const 
\end{DoxyCompactItemize}
\subsection*{Private メソッド}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classBuffer_a02fd73d861ef2e4aabb38c0c9ff82947}{init} ()
\end{DoxyCompactItemize}
\subsection*{Private 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classBuffer_aaa1b52e516aa86db344256019b904840}{BufferModel} \hyperlink{classBuffer_a9834deea607a93506904e1f399737596}{m\_\-buffer\_\-model}
\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} \hyperlink{classBuffer_a291c35e9632031ebe307862c5c760519}{m\_\-num\_\-entry}
\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} \hyperlink{classBuffer_add4c54b54475120d0e1547d3a9c48f44}{m\_\-line\_\-width}
\item 
bool \hyperlink{classBuffer_a6278bce84ca8f1587dbb706ad2d20012}{m\_\-is\_\-fifo}
\item 
bool \hyperlink{classBuffer_abf268b469077bf0460d0043b68443b6a}{m\_\-is\_\-outdrv}
\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} \hyperlink{classBuffer_a0bf03d796dd95afdc5077aa3a1bef997}{m\_\-num\_\-read\_\-port}
\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} \hyperlink{classBuffer_a2c7430e3adc3731c7d4d7b23a12bc0e2}{m\_\-num\_\-write\_\-port}
\item 
const \hyperlink{classOrionConfig}{OrionConfig} $\ast$ \hyperlink{classBuffer_a84de60ae1f7ca812df5347e27a658c77}{m\_\-orion\_\-cfg\_\-ptr}
\item 
const \hyperlink{classTechParameter}{TechParameter} $\ast$ \hyperlink{classBuffer_a11d1644aa2bfe0e16783dface6fadf13}{m\_\-tech\_\-param\_\-ptr}
\item 
\hyperlink{classSRAM}{SRAM} $\ast$ \hyperlink{classBuffer_a8a6d79435b3c974cbb1e303de1ab32c9}{m\_\-sram\_\-ptr}
\item 
\hyperlink{classRegister}{Register} $\ast$ \hyperlink{classBuffer_aa07e1d495ebbcf128a3b5976688f4a19}{m\_\-reg\_\-ptr}
\end{DoxyCompactItemize}


\subsection{列挙型}
\hypertarget{classBuffer_aaa1b52e516aa86db344256019b904840}{
\index{Buffer@{Buffer}!BufferModel@{BufferModel}}
\index{BufferModel@{BufferModel}!Buffer@{Buffer}}
\subsubsection[{BufferModel}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf BufferModel}}}
\label{classBuffer_aaa1b52e516aa86db344256019b904840}
\begin{Desc}
\item[列挙型の値: ]\par
\begin{description}
\index{NO\_\-MODEL@{NO\_\-MODEL}!Buffer@{Buffer}}\index{Buffer@{Buffer}!NO\_\-MODEL@{NO\_\-MODEL}}\item[{\em 
\hypertarget{classBuffer_aaa1b52e516aa86db344256019b904840abab57b6e2c553e4d983f415a1f4ea75b}{
NO\_\-MODEL}
\label{classBuffer_aaa1b52e516aa86db344256019b904840abab57b6e2c553e4d983f415a1f4ea75b}
}]\index{BUF\_\-SRAM@{BUF\_\-SRAM}!Buffer@{Buffer}}\index{Buffer@{Buffer}!BUF\_\-SRAM@{BUF\_\-SRAM}}\item[{\em 
\hypertarget{classBuffer_aaa1b52e516aa86db344256019b904840a99a4e26934946b15bde8d5e6311ff98e}{
BUF\_\-SRAM}
\label{classBuffer_aaa1b52e516aa86db344256019b904840a99a4e26934946b15bde8d5e6311ff98e}
}]\index{BUF\_\-REG@{BUF\_\-REG}!Buffer@{Buffer}}\index{Buffer@{Buffer}!BUF\_\-REG@{BUF\_\-REG}}\item[{\em 
\hypertarget{classBuffer_aaa1b52e516aa86db344256019b904840aebafedb9a04e73c117cce7cebbf53790}{
BUF\_\-REG}
\label{classBuffer_aaa1b52e516aa86db344256019b904840aebafedb9a04e73c117cce7cebbf53790}
}]\end{description}
\end{Desc}




\begin{DoxyCode}
51     {
52       NO_MODEL = 0,
53       BUF_SRAM,
54       BUF_REG
55     };
\end{DoxyCode}


\subsection{コンストラクタとデストラクタ}
\hypertarget{classBuffer_a2aaebb88cefd77cf975f76e3f0f6a88d}{
\index{Buffer@{Buffer}!Buffer@{Buffer}}
\index{Buffer@{Buffer}!Buffer@{Buffer}}
\subsubsection[{Buffer}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Buffer} (const string \& {\em buffer\_\-model\_\-str\_\-}, \/  bool {\em is\_\-fifo\_\-}, \/  bool {\em is\_\-outdrv\_\-}, \/  {\bf uint32\_\-t} {\em num\_\-entry\_\-}, \/  {\bf uint32\_\-t} {\em line\_\-width\_\-}, \/  {\bf uint32\_\-t} {\em num\_\-read\_\-port\_\-}, \/  {\bf uint32\_\-t} {\em num\_\-write\_\-port\_\-}, \/  const {\bf OrionConfig} $\ast$ {\em orion\_\-cfg\_\-ptr\_\-})}}
\label{classBuffer_a2aaebb88cefd77cf975f76e3f0f6a88d}



\begin{DoxyCode}
57 {
58     if (buffer_model_str_ == string("SRAM"))
59     {
60         m_buffer_model = BUF_SRAM;
61     }
62     else if(buffer_model_str_ == string("REGISTER"))
63     {
64         m_buffer_model = BUF_REG;
65     }
66     else
67     {
68         m_buffer_model = NO_MODEL;
69     }
70 
71     if (m_buffer_model != NO_MODEL)
72     {
73         assert(num_entry_ == num_entry_);
74         assert(line_width_ == line_width_);
75         assert(num_read_port_ == num_read_port_);
76         assert(num_write_port_ == num_write_port_);
77 
78         m_num_entry = num_entry_;
79         m_line_width = line_width_;
80         m_is_fifo = is_fifo_;
81         m_is_outdrv = is_outdrv_;
82         m_num_read_port = num_read_port_;
83         m_num_write_port = num_write_port_;
84 
85         m_orion_cfg_ptr = orion_cfg_ptr_;
86         m_tech_param_ptr = m_orion_cfg_ptr->get_tech_param_ptr();
87 
88         init();
89     }
90 }
\end{DoxyCode}
\hypertarget{classBuffer_ac72b418d40e29411ac044a49a20be750}{
\index{Buffer@{Buffer}!$\sim$Buffer@{$\sim$Buffer}}
\index{$\sim$Buffer@{$\sim$Buffer}!Buffer@{Buffer}}
\subsubsection[{$\sim$Buffer}]{\setlength{\rightskip}{0pt plus 5cm}$\sim${\bf Buffer} ()}}
\label{classBuffer_ac72b418d40e29411ac044a49a20be750}



\begin{DoxyCode}
93 {
94     delete m_sram_ptr;
95 }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classBuffer_a10fb66546e1cf164fe736f85adc39a63}{
\index{Buffer@{Buffer}!get\_\-dynamic\_\-energy@{get\_\-dynamic\_\-energy}}
\index{get\_\-dynamic\_\-energy@{get\_\-dynamic\_\-energy}!Buffer@{Buffer}}
\subsubsection[{get\_\-dynamic\_\-energy}]{\setlength{\rightskip}{0pt plus 5cm}double get\_\-dynamic\_\-energy (bool {\em is\_\-read\_\-}, \/  bool {\em is\_\-max\_\-}) const}}
\label{classBuffer_a10fb66546e1cf164fe736f85adc39a63}



\begin{DoxyCode}
101 {
102     if (m_buffer_model == BUF_SRAM)
103     {
104         if (is_read_)
105         {
106             return m_sram_ptr->calc_e_read(is_max_);
107         }
108         else
109         {
110             return m_sram_ptr->calc_e_write(is_max_);
111         }
112     }
113     else if (m_buffer_model == BUF_REG)
114     {
115         if (is_read_)
116         {
117             return m_reg_ptr->calc_e_read();
118         }
119         else
120         {
121             return m_reg_ptr->calc_e_write();
122         }
123     }
124     else
125     {
126         return 0;
127     }
128 }
\end{DoxyCode}
\hypertarget{classBuffer_aeb5933543cfdeb1668baed5ce7c68351}{
\index{Buffer@{Buffer}!get\_\-static\_\-power@{get\_\-static\_\-power}}
\index{get\_\-static\_\-power@{get\_\-static\_\-power}!Buffer@{Buffer}}
\subsubsection[{get\_\-static\_\-power}]{\setlength{\rightskip}{0pt plus 5cm}double get\_\-static\_\-power () const}}
\label{classBuffer_aeb5933543cfdeb1668baed5ce7c68351}



\begin{DoxyCode}
131 {
132     double vdd = m_tech_param_ptr->get_vdd();
133     double SCALE_S = m_tech_param_ptr->get_SCALE_S();
134     if (m_buffer_model == BUF_SRAM)
135     {
136         return m_sram_ptr->calc_i_static()*vdd*SCALE_S;
137     }
138     else if (m_buffer_model == BUF_REG)
139     {
140         return m_reg_ptr->calc_i_static()*vdd*SCALE_S;
141     }
142     else
143     {
144         return 0;
145     }
146 }
\end{DoxyCode}
\hypertarget{classBuffer_a02fd73d861ef2e4aabb38c0c9ff82947}{
\index{Buffer@{Buffer}!init@{init}}
\index{init@{init}!Buffer@{Buffer}}
\subsubsection[{init}]{\setlength{\rightskip}{0pt plus 5cm}void init ()\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classBuffer_a02fd73d861ef2e4aabb38c0c9ff82947}



\begin{DoxyCode}
158 {
159     if(m_buffer_model == BUF_SRAM)
160     {
161         uint32_t num_data_end = m_orion_cfg_ptr->get<uint32_t>("SRAM_NUM_DATA_END
      ");
162         const string& rowdec_model_str = m_orion_cfg_ptr->get<string>("SRAM_ROWDE
      C_MODEL");
163         const string& wl_model_str = m_orion_cfg_ptr->get<string>("SRAM_WORDLINE_
      MODEL");
164         const string& bl_pre_model_str = m_orion_cfg_ptr->get<string>("SRAM_BITLI
      NE_PRE_MODEL");
165         const string& mem_model_str = "NORMAL_MEM";
166         const string& bl_model_str = m_orion_cfg_ptr->get<string>("SRAM_BITLINE_M
      ODEL");
167         const string& amp_model_str = m_orion_cfg_ptr->get<string>("SRAM_AMP_MODE
      L");
168         const string& outdrv_model_str = m_orion_cfg_ptr->get<string>("SRAM_OUTDR
      V_MODEL");
169         m_sram_ptr = new SRAM(
170                 m_num_entry, m_line_width, m_is_fifo, m_is_outdrv, 
171                 m_num_read_port, m_num_write_port, num_data_end, 
172                 rowdec_model_str, wl_model_str, bl_pre_model_str, mem_model_str, 
      
173                 bl_model_str, amp_model_str, outdrv_model_str, m_tech_param_ptr);
      
174     }
175     else if (m_buffer_model == BUF_REG)
176     {
177         m_sram_ptr = NULL;
178         m_reg_ptr = new Register(m_num_entry, m_line_width, m_tech_param_ptr);
179     }
180     else
181     {
182         m_sram_ptr = NULL;
183         m_reg_ptr = NULL;
184     }
185     return;
186 }
\end{DoxyCode}
\hypertarget{classBuffer_a8404831790e4809674f0249ef6505cd5}{
\index{Buffer@{Buffer}!print\_\-all@{print\_\-all}}
\index{print\_\-all@{print\_\-all}!Buffer@{Buffer}}
\subsubsection[{print\_\-all}]{\setlength{\rightskip}{0pt plus 5cm}void print\_\-all () const}}
\label{classBuffer_a8404831790e4809674f0249ef6505cd5}



\begin{DoxyCode}
149 {
150     cout << "Buffer" << endl;
151     cout << "\t" << "Read = " << get_dynamic_energy(true, false) << endl;
152     cout << "\t" << "Write = " << get_dynamic_energy(false, false) << endl;
153     cout << "\t" << "Static power = " << get_static_power() << endl;
154     return;
155 }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classBuffer_a9834deea607a93506904e1f399737596}{
\index{Buffer@{Buffer}!m\_\-buffer\_\-model@{m\_\-buffer\_\-model}}
\index{m\_\-buffer\_\-model@{m\_\-buffer\_\-model}!Buffer@{Buffer}}
\subsubsection[{m\_\-buffer\_\-model}]{\setlength{\rightskip}{0pt plus 5cm}{\bf BufferModel} {\bf m\_\-buffer\_\-model}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classBuffer_a9834deea607a93506904e1f399737596}
\hypertarget{classBuffer_a6278bce84ca8f1587dbb706ad2d20012}{
\index{Buffer@{Buffer}!m\_\-is\_\-fifo@{m\_\-is\_\-fifo}}
\index{m\_\-is\_\-fifo@{m\_\-is\_\-fifo}!Buffer@{Buffer}}
\subsubsection[{m\_\-is\_\-fifo}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf m\_\-is\_\-fifo}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classBuffer_a6278bce84ca8f1587dbb706ad2d20012}
\hypertarget{classBuffer_abf268b469077bf0460d0043b68443b6a}{
\index{Buffer@{Buffer}!m\_\-is\_\-outdrv@{m\_\-is\_\-outdrv}}
\index{m\_\-is\_\-outdrv@{m\_\-is\_\-outdrv}!Buffer@{Buffer}}
\subsubsection[{m\_\-is\_\-outdrv}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf m\_\-is\_\-outdrv}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classBuffer_abf268b469077bf0460d0043b68443b6a}
\hypertarget{classBuffer_add4c54b54475120d0e1547d3a9c48f44}{
\index{Buffer@{Buffer}!m\_\-line\_\-width@{m\_\-line\_\-width}}
\index{m\_\-line\_\-width@{m\_\-line\_\-width}!Buffer@{Buffer}}
\subsubsection[{m\_\-line\_\-width}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t} {\bf m\_\-line\_\-width}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classBuffer_add4c54b54475120d0e1547d3a9c48f44}
\hypertarget{classBuffer_a291c35e9632031ebe307862c5c760519}{
\index{Buffer@{Buffer}!m\_\-num\_\-entry@{m\_\-num\_\-entry}}
\index{m\_\-num\_\-entry@{m\_\-num\_\-entry}!Buffer@{Buffer}}
\subsubsection[{m\_\-num\_\-entry}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t} {\bf m\_\-num\_\-entry}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classBuffer_a291c35e9632031ebe307862c5c760519}
\hypertarget{classBuffer_a0bf03d796dd95afdc5077aa3a1bef997}{
\index{Buffer@{Buffer}!m\_\-num\_\-read\_\-port@{m\_\-num\_\-read\_\-port}}
\index{m\_\-num\_\-read\_\-port@{m\_\-num\_\-read\_\-port}!Buffer@{Buffer}}
\subsubsection[{m\_\-num\_\-read\_\-port}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t} {\bf m\_\-num\_\-read\_\-port}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classBuffer_a0bf03d796dd95afdc5077aa3a1bef997}
\hypertarget{classBuffer_a2c7430e3adc3731c7d4d7b23a12bc0e2}{
\index{Buffer@{Buffer}!m\_\-num\_\-write\_\-port@{m\_\-num\_\-write\_\-port}}
\index{m\_\-num\_\-write\_\-port@{m\_\-num\_\-write\_\-port}!Buffer@{Buffer}}
\subsubsection[{m\_\-num\_\-write\_\-port}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t} {\bf m\_\-num\_\-write\_\-port}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classBuffer_a2c7430e3adc3731c7d4d7b23a12bc0e2}
\hypertarget{classBuffer_a84de60ae1f7ca812df5347e27a658c77}{
\index{Buffer@{Buffer}!m\_\-orion\_\-cfg\_\-ptr@{m\_\-orion\_\-cfg\_\-ptr}}
\index{m\_\-orion\_\-cfg\_\-ptr@{m\_\-orion\_\-cfg\_\-ptr}!Buffer@{Buffer}}
\subsubsection[{m\_\-orion\_\-cfg\_\-ptr}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf OrionConfig}$\ast$ {\bf m\_\-orion\_\-cfg\_\-ptr}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classBuffer_a84de60ae1f7ca812df5347e27a658c77}
\hypertarget{classBuffer_aa07e1d495ebbcf128a3b5976688f4a19}{
\index{Buffer@{Buffer}!m\_\-reg\_\-ptr@{m\_\-reg\_\-ptr}}
\index{m\_\-reg\_\-ptr@{m\_\-reg\_\-ptr}!Buffer@{Buffer}}
\subsubsection[{m\_\-reg\_\-ptr}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Register}$\ast$ {\bf m\_\-reg\_\-ptr}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classBuffer_aa07e1d495ebbcf128a3b5976688f4a19}
\hypertarget{classBuffer_a8a6d79435b3c974cbb1e303de1ab32c9}{
\index{Buffer@{Buffer}!m\_\-sram\_\-ptr@{m\_\-sram\_\-ptr}}
\index{m\_\-sram\_\-ptr@{m\_\-sram\_\-ptr}!Buffer@{Buffer}}
\subsubsection[{m\_\-sram\_\-ptr}]{\setlength{\rightskip}{0pt plus 5cm}{\bf SRAM}$\ast$ {\bf m\_\-sram\_\-ptr}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classBuffer_a8a6d79435b3c974cbb1e303de1ab32c9}
\hypertarget{classBuffer_a11d1644aa2bfe0e16783dface6fadf13}{
\index{Buffer@{Buffer}!m\_\-tech\_\-param\_\-ptr@{m\_\-tech\_\-param\_\-ptr}}
\index{m\_\-tech\_\-param\_\-ptr@{m\_\-tech\_\-param\_\-ptr}!Buffer@{Buffer}}
\subsubsection[{m\_\-tech\_\-param\_\-ptr}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf TechParameter}$\ast$ {\bf m\_\-tech\_\-param\_\-ptr}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classBuffer_a11d1644aa2bfe0e16783dface6fadf13}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
mem/ruby/network/orion/Buffer/\hyperlink{Buffer_8hh}{Buffer.hh}\item 
mem/ruby/network/orion/Buffer/\hyperlink{Buffer_8cc}{Buffer.cc}\end{DoxyCompactItemize}
