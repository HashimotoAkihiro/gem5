<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス TxDescCache</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="classIGbE.html">IGbE</a>::<a class="el" href="classIGbE_1_1TxDescCache.html">TxDescCache</a>
  </div>
</div>
<div class="contents">
<h1>クラス TxDescCache</h1><!-- doxytag: class="IGbE::TxDescCache" --><!-- doxytag: inherits="DescCache&lt; iGbReg::TxDesc &gt;" --><div class="dynheader">
TxDescCacheに対する継承グラフ</div>
<div class="dynsection">
 <div class="center">
  <img src="classIGbE_1_1TxDescCache.gif" usemap="#TxDescCache_map" alt=""/>
  <map id="TxDescCache_map" name="TxDescCache_map">
<area href="classIGbE_1_1DescCache.html" alt="DescCache&lt; iGbReg::TxDesc &gt;" shape="rect" coords="0,0,191,24"/>
</map>
 </div>
</div>

<p><a href="classIGbE_1_1TxDescCache-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a5c53fad45a69d0f3c20bd08b980a2485">TxDescCache</a> (<a class="el" href="classIGbE.html">IGbE</a> *i, std::string n, int s)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a924187a1c689184efd8492916ca12e32">getPacketSize</a> (<a class="el" href="classRefCountingPtr.html">EthPacketPtr</a> p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#af58491ad4f774a610584c404231b30ae">getPacketData</a> (<a class="el" href="classRefCountingPtr.html">EthPacketPtr</a> p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#af7a2e6e84647ba93598a7a02730cba41">processContextDesc</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a6fb0bd6d34eae6de55fb211662f92180">descInBlock</a> (unsigned num_desc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a3fd3cdfc66306ff22b53325aeb4e2c64">packetAvailable</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#ad8a4f7d1ef74ba318f35597c58bc757b">packetWaiting</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a126e4d9db081d9783bdcf86befdff3de">packetMultiDesc</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a4f0881be8aa8698e16dcf52a89085100">pktComplete</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#ae7e4853724fee8019b3bdd04200b9d6b">headerComplete</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a10c4245eaf8149b42c17bb6aa4a7c5eb">completionWriteback</a> (<a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> a, bool enabled)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a2587421ae644a9474416e5a5b63ccbca">hasOutstandingEvents</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a34032325b571ff60682217adbf73ad37">nullCallback</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a53e036786d17361be4c7320d39c99b84">serialize</a> (std::ostream &amp;os)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#af22e5d6d660b97db37003ac61ac4ee49">unserialize</a> (<a class="el" href="classCheckpoint.html">Checkpoint</a> *cp, const std::string &amp;section)</td></tr>
<tr><td colspan="2"><h2>Public 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt; <a class="el" href="classIGbE_1_1TxDescCache.html">TxDescCache</a>,&amp;TxDescCache::pktComplete &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a2a06f4aa962fc09e9e764d3e9006d11b">pktEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt; <a class="el" href="classIGbE_1_1TxDescCache.html">TxDescCache</a>,&amp;TxDescCache::headerComplete &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#ae7a8388f5aa169f8c86c19f91c3b128d">headerEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt; <a class="el" href="classIGbE_1_1TxDescCache.html">TxDescCache</a>,&amp;TxDescCache::nullCallback &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#adc0e7fe81737dc40daddf8391bffae79">nullEvent</a></td></tr>
<tr><td colspan="2"><h2>Protected メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#ae5a77c90557026fdf4fd78883f92bef9">descBase</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#af3d1877b6f30bdf98b95351c38d400f3">descHead</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a4b6b769be62592fc43518ba480bbd1f7">descTail</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a465e4e31be3a89db3d7f9cd1ecc40064">descLen</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a4f8dbb4f64167626cac110753708c55c">updateHead</a> (long h)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#aec7fdcc540223076999e0f8f07f854bc">enableSm</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a32bbafeff677d291df2eb9247a33b292">actionAfterWb</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#abb8070fbcfa38a9697d92bbc4a0b6505">fetchAfterWb</a> ()</td></tr>
<tr><td colspan="2"><h2>Protected 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a0807bda2e863c4492ab0165135bf396c">pktDone</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#ad610366c4a18d924d4962433c0b8515e">isTcp</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a584d7923b741a0ed4ae9c59b8ab254ad">pktWaiting</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#adb0830579bf508fe91ec42f51928ca5d">pktMultiDesc</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a9bad25394212b8c9bf19b5b3fd692d7a">completionAddress</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#ad3481e86d121444fdcc4b02650d38e47">completionEnabled</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a487a3ccede49d6015e8e320bcd5b29e7">descEnd</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#abdc8c249b4ac1dcba87bb5dd61aad6b4">tsoHeaderLen</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a140f29bf479ea15261618bed60b9f777">tsoMss</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a94166f6af145a255d6623ebd93b0c0f5">tsoTotalLen</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#afaeeb9d655b0c19961b86d83fc025ae5">tsoUsedLen</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a2906204858e8f7b554a7b5a449bbb4cb">tsoPrevSeq</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a6113e9447ae2e0f5fcea17ac8b4a2fd5">tsoPktPayloadBytes</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#aea6ed56838e016f0ad81353c348b62cb">tsoLoadedHeader</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a3e767a1c20550a9a1f1c04e0900475d3">tsoPktHasHeader</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a3309d8f5e1d64bb4d1ce8a654d406094">tsoHeader</a> [256]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a9db8e95f501ae2399c15308b5fd40905">tsoDescBytesUsed</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a4e886802f97241586f0f9e59d4d3b27e">tsoCopyBytes</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIGbE_1_1TxDescCache.html#a50260682f8c2508080a0c2c51727b40c">tsoPkts</a></td></tr>
</table>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="a5c53fad45a69d0f3c20bd08b980a2485"></a><!-- doxytag: member="IGbE::TxDescCache::TxDescCache" ref="a5c53fad45a69d0f3c20bd08b980a2485" args="(IGbE *i, std::string n, int s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classIGbE_1_1TxDescCache.html">TxDescCache</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classIGbE.html">IGbE</a> *&nbsp;</td>
          <td class="paramname"> <em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>s</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l01542"></a>01542     : DescCache&lt;TxDesc&gt;(i,<a class="code" href="namespaceArmISA.html#aeab71244afb687f16d8c4f5ee9d6ef0e">n</a>, <a class="code" href="namespaceArmISA.html#afaeb18e17f862d8fcb76dfb68a18854f">s</a>), <a class="code" href="classIGbE_1_1TxDescCache.html#a0807bda2e863c4492ab0165135bf396c">pktDone</a>(<span class="keyword">false</span>), <a class="code" href="classIGbE_1_1TxDescCache.html#ad610366c4a18d924d4962433c0b8515e">isTcp</a>(<span class="keyword">false</span>),
<a name="l01543"></a>01543       <a class="code" href="classIGbE_1_1TxDescCache.html#a584d7923b741a0ed4ae9c59b8ab254ad">pktWaiting</a>(<span class="keyword">false</span>), <a class="code" href="classIGbE_1_1TxDescCache.html#a9bad25394212b8c9bf19b5b3fd692d7a">completionAddress</a>(0), <a class="code" href="classIGbE_1_1TxDescCache.html#ad3481e86d121444fdcc4b02650d38e47">completionEnabled</a>(<span class="keyword">false</span>),
<a name="l01544"></a>01544       <a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a>(<span class="keyword">false</span>), <a class="code" href="classIGbE_1_1TxDescCache.html#abdc8c249b4ac1dcba87bb5dd61aad6b4">tsoHeaderLen</a>(0), <a class="code" href="classIGbE_1_1TxDescCache.html#a140f29bf479ea15261618bed60b9f777">tsoMss</a>(0), <a class="code" href="classIGbE_1_1TxDescCache.html#a94166f6af145a255d6623ebd93b0c0f5">tsoTotalLen</a>(0), <a class="code" href="classIGbE_1_1TxDescCache.html#afaeeb9d655b0c19961b86d83fc025ae5">tsoUsedLen</a>(0),
<a name="l01545"></a>01545       <a class="code" href="classIGbE_1_1TxDescCache.html#a2906204858e8f7b554a7b5a449bbb4cb">tsoPrevSeq</a>(0), <a class="code" href="classIGbE_1_1TxDescCache.html#a6113e9447ae2e0f5fcea17ac8b4a2fd5">tsoPktPayloadBytes</a>(0), <a class="code" href="classIGbE_1_1TxDescCache.html#aea6ed56838e016f0ad81353c348b62cb">tsoLoadedHeader</a>(<span class="keyword">false</span>),
<a name="l01546"></a>01546       <a class="code" href="classIGbE_1_1TxDescCache.html#a3e767a1c20550a9a1f1c04e0900475d3">tsoPktHasHeader</a>(<span class="keyword">false</span>), <a class="code" href="classIGbE_1_1TxDescCache.html#a9db8e95f501ae2399c15308b5fd40905">tsoDescBytesUsed</a>(0), <a class="code" href="classIGbE_1_1TxDescCache.html#a4e886802f97241586f0f9e59d4d3b27e">tsoCopyBytes</a>(0), <a class="code" href="classIGbE_1_1TxDescCache.html#a50260682f8c2508080a0c2c51727b40c">tsoPkts</a>(0),
<a name="l01547"></a>01547       <a class="code" href="classIGbE_1_1TxDescCache.html#a2a06f4aa962fc09e9e764d3e9006d11b">pktEvent</a>(<span class="keyword">this</span>), <a class="code" href="classIGbE_1_1TxDescCache.html#ae7a8388f5aa169f8c86c19f91c3b128d">headerEvent</a>(<span class="keyword">this</span>), <a class="code" href="classIGbE_1_1TxDescCache.html#adc0e7fe81737dc40daddf8391bffae79">nullEvent</a>(<span class="keyword">this</span>)
<a name="l01548"></a>01548 {
<a name="l01549"></a>01549     <a class="code" href="classIGbE_1_1DescCache.html#afa0b0aa4b6539cf61d33c27e35c809a1">annSmFetch</a> = <span class="stringliteral">&quot;TX Desc Fetch&quot;</span>;
<a name="l01550"></a>01550     <a class="code" href="classIGbE_1_1DescCache.html#af0c632f8282132e3abbbe879fcdea126">annSmWb</a> = <span class="stringliteral">&quot;TX Desc Writeback&quot;</span>;
<a name="l01551"></a>01551     <a class="code" href="classIGbE_1_1DescCache.html#a7cc80d85ecc41b9f0e262b9ad332fc76">annUnusedDescQ</a> = <span class="stringliteral">&quot;TX Unused Descriptors&quot;</span>;
<a name="l01552"></a>01552     <a class="code" href="classIGbE_1_1DescCache.html#aa1b65175b7b2bc6609744ebc8657ac7d">annUnusedCacheQ</a> = <span class="stringliteral">&quot;TX Unused Descriptor Cache&quot;</span>;
<a name="l01553"></a>01553     <a class="code" href="classIGbE_1_1DescCache.html#a6ee5c97cfcef9e794d9691f2d11454aa">annUsedCacheQ</a> = <span class="stringliteral">&quot;TX Used Descriptor Cache&quot;</span>;
<a name="l01554"></a>01554     <a class="code" href="classIGbE_1_1DescCache.html#a7fe6b65fb10d40a843ce4e8925062aa6">annUsedDescQ</a> = <span class="stringliteral">&quot;TX Used Descriptors&quot;</span>;
<a name="l01555"></a>01555     <a class="code" href="classIGbE_1_1DescCache.html#a710b789ff37ebd40141ea5d4239cb50d">annDescQ</a> = <span class="stringliteral">&quot;TX Descriptors&quot;</span>;
<a name="l01556"></a>01556 }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="a32bbafeff677d291df2eb9247a33b292"></a><!-- doxytag: member="IGbE::TxDescCache::actionAfterWb" ref="a32bbafeff677d291df2eb9247a33b292" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void actionAfterWb </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classIGbE_1_1DescCache.html#a22d736f39e553f2f93799dc2e0eea912">DescCache&lt; iGbReg::TxDesc &gt;</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l01948"></a>01948 {
<a name="l01949"></a>01949     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;actionAfterWb() completionEnabled: %d\n&quot;</span>,
<a name="l01950"></a>01950             <a class="code" href="classIGbE_1_1TxDescCache.html#ad3481e86d121444fdcc4b02650d38e47">completionEnabled</a>);
<a name="l01951"></a>01951     <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a5421bafb8503ffca04cac20d616ae4cc">postInterrupt</a>(<a class="code" href="namespaceiGbReg.html#ab881f740bd3545d8eb42b05253752e9ca41242befdd855ef8192a0cad76e34a02">iGbReg::IT_TXDW</a>);
<a name="l01952"></a>01952     <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1TxDescCache.html#ad3481e86d121444fdcc4b02650d38e47">completionEnabled</a>) { 
<a name="l01953"></a>01953         <a class="code" href="classIGbE_1_1TxDescCache.html#a487a3ccede49d6015e8e320bcd5b29e7">descEnd</a> = <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a001949adaeea4f9ae509aaeb09d87056">tdh</a>();
<a name="l01954"></a>01954         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc,
<a name="l01955"></a>01955                 <span class="stringliteral">&quot;Completion writing back value: %d to addr: %#x\n&quot;</span>, <a class="code" href="classIGbE_1_1TxDescCache.html#a487a3ccede49d6015e8e320bcd5b29e7">descEnd</a>,
<a name="l01956"></a>01956                 <a class="code" href="classIGbE_1_1TxDescCache.html#a9bad25394212b8c9bf19b5b3fd692d7a">completionAddress</a>);
<a name="l01957"></a>01957         <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classDmaDevice.html#a4a2db8a9eb52a00a9a2e19c2eb3753dc">dmaWrite</a>(<a class="code" href="classIGbE_1_1DescCache.html#aaeea87c73c95205c88d11e03fe8f48b9">pciToDma</a>(<a class="code" href="bitfield_8hh.html#acaa3c424fec3407f14a01fe1ec22c2d4">mbits</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a9bad25394212b8c9bf19b5b3fd692d7a">completionAddress</a>, 63, 2)),
<a name="l01958"></a>01958                        <span class="keyword">sizeof</span>(<a class="code" href="classIGbE_1_1TxDescCache.html#a487a3ccede49d6015e8e320bcd5b29e7">descEnd</a>), &amp;<a class="code" href="classIGbE_1_1TxDescCache.html#adc0e7fe81737dc40daddf8391bffae79">nullEvent</a>, (uint8_t*)&amp;<a class="code" href="classIGbE_1_1TxDescCache.html#a487a3ccede49d6015e8e320bcd5b29e7">descEnd</a>, 0);
<a name="l01959"></a>01959     }
<a name="l01960"></a>01960 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a10c4245eaf8149b42c17bb6aa4a7c5eb"></a><!-- doxytag: member="IGbE::TxDescCache::completionWriteback" ref="a10c4245eaf8149b42c17bb6aa4a7c5eb" args="(Addr a, bool enabled)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void completionWriteback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>enabled</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00487"></a>00487                                                        {
<a name="l00488"></a>00488             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc,
<a name="l00489"></a>00489                     <span class="stringliteral">&quot;Completion writeback Addr: %#x enabled: %d\n&quot;</span>, 
<a name="l00490"></a>00490                     <a class="code" href="namespaceArmISA.html#a468da4d7330577ee8746df2acfa40959">a</a>, <a class="code" href="namespaceTrace.html#a8740ba80e30dd75e71d09fa1dcf04f3d">enabled</a>);
<a name="l00491"></a>00491             <a class="code" href="classIGbE_1_1TxDescCache.html#a9bad25394212b8c9bf19b5b3fd692d7a">completionAddress</a> = <a class="code" href="namespaceArmISA.html#a468da4d7330577ee8746df2acfa40959">a</a>;
<a name="l00492"></a>00492             <a class="code" href="classIGbE_1_1TxDescCache.html#ad3481e86d121444fdcc4b02650d38e47">completionEnabled</a> = <a class="code" href="namespaceTrace.html#a8740ba80e30dd75e71d09fa1dcf04f3d">enabled</a>;
<a name="l00493"></a>00493         }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae5a77c90557026fdf4fd78883f92bef9"></a><!-- doxytag: member="IGbE::TxDescCache::descBase" ref="ae5a77c90557026fdf4fd78883f92bef9" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> descBase </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classIGbE_1_1DescCache.html#aa8bdc83aee2be5e0eaa7a1f7f1f284e2">DescCache&lt; iGbReg::TxDesc &gt;</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00401"></a>00401 { <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a7f50fa230d52f1e8a3d501722e3f2bf8">tdba</a>(); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af3d1877b6f30bdf98b95351c38d400f3"></a><!-- doxytag: member="IGbE::TxDescCache::descHead" ref="af3d1877b6f30bdf98b95351c38d400f3" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual long descHead </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classIGbE_1_1DescCache.html#af413050780b6b8b2fe0793fff12037e3">DescCache&lt; iGbReg::TxDesc &gt;</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00402"></a>00402 { <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a001949adaeea4f9ae509aaeb09d87056">tdh</a>(); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6fb0bd6d34eae6de55fb211662f92180"></a><!-- doxytag: member="IGbE::TxDescCache::descInBlock" ref="a6fb0bd6d34eae6de55fb211662f92180" args="(unsigned num_desc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned descInBlock </td>
          <td>(</td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>num_desc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the number of dsecriptors in a cache block for threshold operations. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00455"></a>00455         {
<a name="l00456"></a>00456             <span class="keywordflow">return</span> num_desc / <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classDmaDevice.html#a3e6e4aa434d2b5c83de3660307a49001">cacheBlockSize</a>() / <span class="keyword">sizeof</span>(<a class="code" href="structiGbReg_1_1TxDesc.html">iGbReg::TxDesc</a>);
<a name="l00457"></a>00457         }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a465e4e31be3a89db3d7f9cd1ecc40064"></a><!-- doxytag: member="IGbE::TxDescCache::descLen" ref="a465e4e31be3a89db3d7f9cd1ecc40064" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual long descLen </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classIGbE_1_1DescCache.html#a8eb35163568b01fa17aa47b23a80f90c">DescCache&lt; iGbReg::TxDesc &gt;</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00404"></a>00404 { <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#abfbe0450e80a5b975712629e8635d42b">tdlen</a>() &gt;&gt; 4; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4b6b769be62592fc43518ba480bbd1f7"></a><!-- doxytag: member="IGbE::TxDescCache::descTail" ref="a4b6b769be62592fc43518ba480bbd1f7" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual long descTail </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classIGbE_1_1DescCache.html#a88ebc5d9eb88ca9148465557e9a66c1c">DescCache&lt; iGbReg::TxDesc &gt;</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00403"></a>00403 { <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a928dc76d0b5b003d9336bee496f78089">tdt</a>(); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aec7fdcc540223076999e0f8f07f854bc"></a><!-- doxytag: member="IGbE::TxDescCache::enableSm" ref="aec7fdcc540223076999e0f8f07f854bc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enableSm </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classIGbE_1_1DescCache.html#a9b931707aadb26e13262c50e0dd87006">DescCache&lt; iGbReg::TxDesc &gt;</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l02030"></a>02030 {
<a name="l02031"></a>02031     <span class="keywordflow">if</span> (!<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a329b71fb934a93312ca0aacbf5a3f982">drainManager</a>) {
<a name="l02032"></a>02032         <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a0f33aec9eb84199e089e1917f7df501d">txTick</a> = <span class="keyword">true</span>;
<a name="l02033"></a>02033         <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a9506deecc41eb6290f9b9b8662cc33c2">restartClock</a>();
<a name="l02034"></a>02034     }
<a name="l02035"></a>02035 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="abb8070fbcfa38a9697d92bbc4a0b6505"></a><!-- doxytag: member="IGbE::TxDescCache::fetchAfterWb" ref="abb8070fbcfa38a9697d92bbc4a0b6505" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void fetchAfterWb </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classIGbE_1_1DescCache.html#abe568c102619a35d2aa1a37c64dff086">DescCache&lt; iGbReg::TxDesc &gt;</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00408"></a>00408                                     {
<a name="l00409"></a>00409             <span class="keywordflow">if</span> (!<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a0f33aec9eb84199e089e1917f7df501d">txTick</a> &amp;&amp; <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classDrainable.html#a5c95358f0e9355bcc3979baf3fb7307f">getDrainState</a>() == <a class="code" href="classDrainable.html#a5d74787dedbc4e11c1ab15bf487e61f8a2f5f2c4a8c4f4f0519d503dcdfbf55cb">Drainable::Running</a>)
<a name="l00410"></a>00410                 <a class="code" href="classIGbE_1_1DescCache.html#a69c2eb368f23448d28ccb10dfa67c250">fetchDescriptors</a>();
<a name="l00411"></a>00411         }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af58491ad4f774a610584c404231b30ae"></a><!-- doxytag: member="IGbE::TxDescCache::getPacketData" ref="af58491ad4f774a610584c404231b30ae" args="(EthPacketPtr p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getPacketData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRefCountingPtr.html">EthPacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l01702"></a>01702 {
<a name="l01703"></a>01703     assert(<a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.size());
<a name="l01704"></a>01704 
<a name="l01705"></a>01705     <a class="code" href="structiGbReg_1_1TxDesc.html">TxDesc</a> *desc;
<a name="l01706"></a>01706     desc = <a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.front();
<a name="l01707"></a>01707 
<a name="l01708"></a>01708     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;getPacketData(): TxDescriptor data &quot;</span>
<a name="l01709"></a>01709             <span class="stringliteral">&quot;d1: %#llx d2: %#llx\n&quot;</span>, desc-&gt;d1, desc-&gt;d2);
<a name="l01710"></a>01710     assert((<a class="code" href="namespaceiGbReg_1_1TxdOp.html#af55d26465a475bf81ed6f357bdf7c1b1">TxdOp::isLegacy</a>(desc) || <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a6986d9be70f07915ad25bf0892c3c5d7">TxdOp::isData</a>(desc)) &amp;&amp;
<a name="l01711"></a>01711            <a class="code" href="namespaceiGbReg_1_1TxdOp.html#ad1ccf1bd606d966d7549916b3562aebd">TxdOp::getLen</a>(desc));
<a name="l01712"></a>01712 
<a name="l01713"></a>01713     <a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a> = p;
<a name="l01714"></a>01714 
<a name="l01715"></a>01715     <a class="code" href="classIGbE_1_1TxDescCache.html#a584d7923b741a0ed4ae9c59b8ab254ad">pktWaiting</a> = <span class="keyword">true</span>;
<a name="l01716"></a>01716 
<a name="l01717"></a>01717     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Starting DMA of packet at offset %d\n&quot;</span>, p-&gt;length);
<a name="l01718"></a>01718     
<a name="l01719"></a>01719     <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a>) {
<a name="l01720"></a>01720         assert(<a class="code" href="classIGbE_1_1TxDescCache.html#aea6ed56838e016f0ad81353c348b62cb">tsoLoadedHeader</a>);
<a name="l01721"></a>01721         <span class="keywordflow">if</span> (!<a class="code" href="classIGbE_1_1TxDescCache.html#a3e767a1c20550a9a1f1c04e0900475d3">tsoPktHasHeader</a>) {
<a name="l01722"></a>01722             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc,
<a name="l01723"></a>01723                     <span class="stringliteral">&quot;Loading TSO header (%d bytes) into start of packet\n&quot;</span>,
<a name="l01724"></a>01724                     <a class="code" href="classIGbE_1_1TxDescCache.html#abdc8c249b4ac1dcba87bb5dd61aad6b4">tsoHeaderLen</a>);
<a name="l01725"></a>01725             memcpy(p-&gt;<a class="code" href="classRefCountingPtr.html#ac88dceffbecaed1137b0e27783adbcc5">data</a>, &amp;<a class="code" href="classIGbE_1_1TxDescCache.html#a3309d8f5e1d64bb4d1ce8a654d406094">tsoHeader</a>,<a class="code" href="classIGbE_1_1TxDescCache.html#abdc8c249b4ac1dcba87bb5dd61aad6b4">tsoHeaderLen</a>);
<a name="l01726"></a>01726             p-&gt;length +=<a class="code" href="classIGbE_1_1TxDescCache.html#abdc8c249b4ac1dcba87bb5dd61aad6b4">tsoHeaderLen</a>;
<a name="l01727"></a>01727             <a class="code" href="classIGbE_1_1TxDescCache.html#a3e767a1c20550a9a1f1c04e0900475d3">tsoPktHasHeader</a> = <span class="keyword">true</span>;
<a name="l01728"></a>01728         }
<a name="l01729"></a>01729     }
<a name="l01730"></a>01730   
<a name="l01731"></a>01731     <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a>) {
<a name="l01732"></a>01732         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc,
<a name="l01733"></a>01733                 <span class="stringliteral">&quot;Starting DMA of packet at offset %d length: %d\n&quot;</span>,
<a name="l01734"></a>01734                 p-&gt;length, <a class="code" href="classIGbE_1_1TxDescCache.html#a4e886802f97241586f0f9e59d4d3b27e">tsoCopyBytes</a>);
<a name="l01735"></a>01735         <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classDmaDevice.html#a8ca93dacaa427cede08842a958aa1b23">dmaRead</a>(<a class="code" href="classIGbE_1_1DescCache.html#aaeea87c73c95205c88d11e03fe8f48b9">pciToDma</a>(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a363e2b2f2f55fcc8bdd1291609cc48db">TxdOp::getBuf</a>(desc))
<a name="l01736"></a>01736                       + <a class="code" href="classIGbE_1_1TxDescCache.html#a9db8e95f501ae2399c15308b5fd40905">tsoDescBytesUsed</a>,
<a name="l01737"></a>01737                       <a class="code" href="classIGbE_1_1TxDescCache.html#a4e886802f97241586f0f9e59d4d3b27e">tsoCopyBytes</a>, &amp;<a class="code" href="classIGbE_1_1TxDescCache.html#a2a06f4aa962fc09e9e764d3e9006d11b">pktEvent</a>, p-&gt;<a class="code" href="classRefCountingPtr.html#ac88dceffbecaed1137b0e27783adbcc5">data</a> + p-&gt;length,
<a name="l01738"></a>01738                       <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a2e204efac3d8a0a09aef20570520baac">txReadDelay</a>);
<a name="l01739"></a>01739         <a class="code" href="classIGbE_1_1TxDescCache.html#a9db8e95f501ae2399c15308b5fd40905">tsoDescBytesUsed</a> += <a class="code" href="classIGbE_1_1TxDescCache.html#a4e886802f97241586f0f9e59d4d3b27e">tsoCopyBytes</a>;
<a name="l01740"></a>01740         assert(<a class="code" href="classIGbE_1_1TxDescCache.html#a9db8e95f501ae2399c15308b5fd40905">tsoDescBytesUsed</a> &lt;= <a class="code" href="namespaceiGbReg_1_1TxdOp.html#ad1ccf1bd606d966d7549916b3562aebd">TxdOp::getLen</a>(desc));
<a name="l01741"></a>01741     } <span class="keywordflow">else</span> {
<a name="l01742"></a>01742         <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classDmaDevice.html#a8ca93dacaa427cede08842a958aa1b23">dmaRead</a>(<a class="code" href="classIGbE_1_1DescCache.html#aaeea87c73c95205c88d11e03fe8f48b9">pciToDma</a>(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a363e2b2f2f55fcc8bdd1291609cc48db">TxdOp::getBuf</a>(desc)),
<a name="l01743"></a>01743                       <a class="code" href="namespaceiGbReg_1_1TxdOp.html#ad1ccf1bd606d966d7549916b3562aebd">TxdOp::getLen</a>(desc), &amp;<a class="code" href="classIGbE_1_1TxDescCache.html#a2a06f4aa962fc09e9e764d3e9006d11b">pktEvent</a>, p-&gt;<a class="code" href="classRefCountingPtr.html#ac88dceffbecaed1137b0e27783adbcc5">data</a> + p-&gt;length,
<a name="l01744"></a>01744                       <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a2e204efac3d8a0a09aef20570520baac">txReadDelay</a>);
<a name="l01745"></a>01745     }
<a name="l01746"></a>01746 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a924187a1c689184efd8492916ca12e32"></a><!-- doxytag: member="IGbE::TxDescCache::getPacketSize" ref="a924187a1c689184efd8492916ca12e32" args="(EthPacketPtr p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned getPacketSize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRefCountingPtr.html">EthPacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Tell the cache to DMA a packet from main memory into its buffer and return the size the of the packet to reserve space in tx fifo. </p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>size of the packet </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l01662"></a>01662 {
<a name="l01663"></a>01663     <span class="keywordflow">if</span> (!<a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.size())
<a name="l01664"></a>01664         <span class="keywordflow">return</span> 0;
<a name="l01665"></a>01665  
<a name="l01666"></a>01666     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Starting processing of descriptor\n&quot;</span>);
<a name="l01667"></a>01667 
<a name="l01668"></a>01668     assert(!<a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a> || <a class="code" href="classIGbE_1_1TxDescCache.html#aea6ed56838e016f0ad81353c348b62cb">tsoLoadedHeader</a>);
<a name="l01669"></a>01669     <a class="code" href="structiGbReg_1_1TxDesc.html">TxDesc</a> *desc = <a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.front();
<a name="l01670"></a>01670 
<a name="l01671"></a>01671     <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a>) {
<a name="l01672"></a>01672         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;getPacket(): TxDescriptor data &quot;</span>
<a name="l01673"></a>01673                 <span class="stringliteral">&quot;d1: %#llx d2: %#llx\n&quot;</span>, desc-&gt;<a class="code" href="structiGbReg_1_1TxDesc.html#acf7fdcf693e16061288fb38f25c65065">d1</a>, desc-&gt;<a class="code" href="structiGbReg_1_1TxDesc.html#af70722427656749b5aaa2c67a7ccc33d">d2</a>);
<a name="l01674"></a>01674         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;TSO: use: %d hdrlen: %d mss: %d total: %d &quot;</span>
<a name="l01675"></a>01675                 <span class="stringliteral">&quot;used: %d loaded hdr: %d\n&quot;</span>, <a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a>, <a class="code" href="classIGbE_1_1TxDescCache.html#abdc8c249b4ac1dcba87bb5dd61aad6b4">tsoHeaderLen</a>, <a class="code" href="classIGbE_1_1TxDescCache.html#a140f29bf479ea15261618bed60b9f777">tsoMss</a>,
<a name="l01676"></a>01676                 <a class="code" href="classIGbE_1_1TxDescCache.html#a94166f6af145a255d6623ebd93b0c0f5">tsoTotalLen</a>, <a class="code" href="classIGbE_1_1TxDescCache.html#afaeeb9d655b0c19961b86d83fc025ae5">tsoUsedLen</a>, <a class="code" href="classIGbE_1_1TxDescCache.html#aea6ed56838e016f0ad81353c348b62cb">tsoLoadedHeader</a>);
<a name="l01677"></a>01677 
<a name="l01678"></a>01678         <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1TxDescCache.html#a3e767a1c20550a9a1f1c04e0900475d3">tsoPktHasHeader</a>) 
<a name="l01679"></a>01679             <a class="code" href="classIGbE_1_1TxDescCache.html#a4e886802f97241586f0f9e59d4d3b27e">tsoCopyBytes</a> =  std::min((<a class="code" href="classIGbE_1_1TxDescCache.html#a140f29bf479ea15261618bed60b9f777">tsoMss</a> + <a class="code" href="classIGbE_1_1TxDescCache.html#abdc8c249b4ac1dcba87bb5dd61aad6b4">tsoHeaderLen</a>) - p-&gt;length,
<a name="l01680"></a>01680                                      <a class="code" href="namespaceiGbReg_1_1TxdOp.html#ad1ccf1bd606d966d7549916b3562aebd">TxdOp::getLen</a>(desc) - <a class="code" href="classIGbE_1_1TxDescCache.html#a9db8e95f501ae2399c15308b5fd40905">tsoDescBytesUsed</a>);
<a name="l01681"></a>01681         <span class="keywordflow">else</span>
<a name="l01682"></a>01682             <a class="code" href="classIGbE_1_1TxDescCache.html#a4e886802f97241586f0f9e59d4d3b27e">tsoCopyBytes</a> =  std::min(<a class="code" href="classIGbE_1_1TxDescCache.html#a140f29bf479ea15261618bed60b9f777">tsoMss</a>,
<a name="l01683"></a>01683                                      <a class="code" href="namespaceiGbReg_1_1TxdOp.html#ad1ccf1bd606d966d7549916b3562aebd">TxdOp::getLen</a>(desc) - <a class="code" href="classIGbE_1_1TxDescCache.html#a9db8e95f501ae2399c15308b5fd40905">tsoDescBytesUsed</a>); 
<a name="l01684"></a>01684         <span class="keywordtype">unsigned</span> pkt_size =
<a name="l01685"></a>01685             <a class="code" href="classIGbE_1_1TxDescCache.html#a4e886802f97241586f0f9e59d4d3b27e">tsoCopyBytes</a> + (<a class="code" href="classIGbE_1_1TxDescCache.html#a3e767a1c20550a9a1f1c04e0900475d3">tsoPktHasHeader</a> ? 0 : <a class="code" href="classIGbE_1_1TxDescCache.html#abdc8c249b4ac1dcba87bb5dd61aad6b4">tsoHeaderLen</a>); 
<a name="l01686"></a>01686 
<a name="l01687"></a>01687         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;TSO: descBytesUsed: %d copyBytes: %d &quot;</span>
<a name="l01688"></a>01688                 <span class="stringliteral">&quot;this descLen: %d\n&quot;</span>,
<a name="l01689"></a>01689                 <a class="code" href="classIGbE_1_1TxDescCache.html#a9db8e95f501ae2399c15308b5fd40905">tsoDescBytesUsed</a>, <a class="code" href="classIGbE_1_1TxDescCache.html#a4e886802f97241586f0f9e59d4d3b27e">tsoCopyBytes</a>, <a class="code" href="namespaceiGbReg_1_1TxdOp.html#ad1ccf1bd606d966d7549916b3562aebd">TxdOp::getLen</a>(desc));
<a name="l01690"></a>01690         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;TSO: pktHasHeader: %d\n&quot;</span>, <a class="code" href="classIGbE_1_1TxDescCache.html#a3e767a1c20550a9a1f1c04e0900475d3">tsoPktHasHeader</a>);
<a name="l01691"></a>01691         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;TSO: Next packet is %d bytes\n&quot;</span>, pkt_size);
<a name="l01692"></a>01692         <span class="keywordflow">return</span> pkt_size;
<a name="l01693"></a>01693     }
<a name="l01694"></a>01694 
<a name="l01695"></a>01695     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Next TX packet is %d bytes\n&quot;</span>,
<a name="l01696"></a>01696             <a class="code" href="namespaceiGbReg_1_1TxdOp.html#ad1ccf1bd606d966d7549916b3562aebd">TxdOp::getLen</a>(<a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.front()));
<a name="l01697"></a>01697     <span class="keywordflow">return</span> <a class="code" href="namespaceiGbReg_1_1TxdOp.html#ad1ccf1bd606d966d7549916b3562aebd">TxdOp::getLen</a>(desc);
<a name="l01698"></a>01698 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2587421ae644a9474416e5a5b63ccbca"></a><!-- doxytag: member="IGbE::TxDescCache::hasOutstandingEvents" ref="a2587421ae644a9474416e5a5b63ccbca" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool hasOutstandingEvents </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classIGbE_1_1DescCache.html#a09989bc9720a200c8164dc1ef109d70b">DescCache&lt; iGbReg::TxDesc &gt;</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l02039"></a>02039 {
<a name="l02040"></a>02040     <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1TxDescCache.html#a2a06f4aa962fc09e9e764d3e9006d11b">pktEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>() || <a class="code" href="classIGbE_1_1DescCache.html#ae9ac7c384feda84fd885f523f0ce5f73">wbEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>() ||
<a name="l02041"></a>02041         <a class="code" href="classIGbE_1_1DescCache.html#a663aeb25d4224f8d4cbe8d4e1fe3d7d3">fetchEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>();
<a name="l02042"></a>02042 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae7e4853724fee8019b3bdd04200b9d6b"></a><!-- doxytag: member="IGbE::TxDescCache::headerComplete" ref="ae7e4853724fee8019b3bdd04200b9d6b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void headerComplete </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l01637"></a>01637 {
<a name="l01638"></a>01638     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;TSO: Fetching TSO header complete\n&quot;</span>);
<a name="l01639"></a>01639     <a class="code" href="classIGbE_1_1TxDescCache.html#a584d7923b741a0ed4ae9c59b8ab254ad">pktWaiting</a> = <span class="keyword">false</span>;
<a name="l01640"></a>01640 
<a name="l01641"></a>01641     assert(<a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.size());
<a name="l01642"></a>01642     <a class="code" href="structiGbReg_1_1TxDesc.html">TxDesc</a> *desc = <a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.front();
<a name="l01643"></a>01643     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;TSO: len: %d tsoHeaderLen: %d\n&quot;</span>,
<a name="l01644"></a>01644             <a class="code" href="namespaceiGbReg_1_1TxdOp.html#ad1ccf1bd606d966d7549916b3562aebd">TxdOp::getLen</a>(desc), <a class="code" href="classIGbE_1_1TxDescCache.html#abdc8c249b4ac1dcba87bb5dd61aad6b4">tsoHeaderLen</a>);
<a name="l01645"></a>01645 
<a name="l01646"></a>01646     <span class="keywordflow">if</span> (<a class="code" href="namespaceiGbReg_1_1TxdOp.html#ad1ccf1bd606d966d7549916b3562aebd">TxdOp::getLen</a>(desc) == <a class="code" href="classIGbE_1_1TxDescCache.html#abdc8c249b4ac1dcba87bb5dd61aad6b4">tsoHeaderLen</a>) {
<a name="l01647"></a>01647         <a class="code" href="classIGbE_1_1TxDescCache.html#a9db8e95f501ae2399c15308b5fd40905">tsoDescBytesUsed</a> = 0;
<a name="l01648"></a>01648         <a class="code" href="classIGbE_1_1TxDescCache.html#aea6ed56838e016f0ad81353c348b62cb">tsoLoadedHeader</a> = <span class="keyword">true</span>;
<a name="l01649"></a>01649         <a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.pop_front();
<a name="l01650"></a>01650         <a class="code" href="classIGbE_1_1DescCache.html#a99982ada48f129fedf0ee5d8871f5df8">usedCache</a>.push_back(desc);
<a name="l01651"></a>01651     } <span class="keywordflow">else</span> {
<a name="l01652"></a>01652         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;TSO: header part of larger payload\n&quot;</span>);
<a name="l01653"></a>01653         <a class="code" href="classIGbE_1_1TxDescCache.html#a9db8e95f501ae2399c15308b5fd40905">tsoDescBytesUsed</a> = <a class="code" href="classIGbE_1_1TxDescCache.html#abdc8c249b4ac1dcba87bb5dd61aad6b4">tsoHeaderLen</a>;
<a name="l01654"></a>01654         <a class="code" href="classIGbE_1_1TxDescCache.html#aea6ed56838e016f0ad81353c348b62cb">tsoLoadedHeader</a> = <span class="keyword">true</span>;
<a name="l01655"></a>01655     }
<a name="l01656"></a>01656     <a class="code" href="classIGbE_1_1TxDescCache.html#aec7fdcc540223076999e0f8f07f854bc">enableSm</a>();
<a name="l01657"></a>01657     <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a97cbf86aeda5390deb20b1d39396d111">checkDrain</a>();
<a name="l01658"></a>01658 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a34032325b571ff60682217adbf73ad37"></a><!-- doxytag: member="IGbE::TxDescCache::nullCallback" ref="a34032325b571ff60682217adbf73ad37" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nullCallback </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00497"></a>00497                             {
<a name="l00498"></a>00498             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Completion writeback complete\n&quot;</span>);
<a name="l00499"></a>00499         }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3fd3cdfc66306ff22b53325aeb4e2c64"></a><!-- doxytag: member="IGbE::TxDescCache::packetAvailable" ref="a3fd3cdfc66306ff22b53325aeb4e2c64" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool packetAvailable </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Ask if the packet has been transfered so the state machine can give it to the fifo. </p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>packet available in descriptor cache </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l02020"></a>02020 {
<a name="l02021"></a>02021     <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1TxDescCache.html#a0807bda2e863c4492ab0165135bf396c">pktDone</a>) {
<a name="l02022"></a>02022         <a class="code" href="classIGbE_1_1TxDescCache.html#a0807bda2e863c4492ab0165135bf396c">pktDone</a> = <span class="keyword">false</span>;
<a name="l02023"></a>02023         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02024"></a>02024     }
<a name="l02025"></a>02025     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02026"></a>02026 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a126e4d9db081d9783bdcf86befdff3de"></a><!-- doxytag: member="IGbE::TxDescCache::packetMultiDesc" ref="a126e4d9db081d9783bdcf86befdff3de" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool packetMultiDesc </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Ask if this packet is composed of multiple descriptors so even if we've got data, we need to wait for more before we can send it out. </p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>packet can't be sent out because it's a multi-descriptor packet </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00476"></a>00476 { <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1TxDescCache.html#adb0830579bf508fe91ec42f51928ca5d">pktMultiDesc</a>;}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad8a4f7d1ef74ba318f35597c58bc757b"></a><!-- doxytag: member="IGbE::TxDescCache::packetWaiting" ref="ad8a4f7d1ef74ba318f35597c58bc757b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool packetWaiting </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Ask if we are still waiting for the packet to be transfered. </p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>packet still in transit. </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00468"></a>00468 { <span class="keywordflow">return</span> <a class="code" href="classIGbE_1_1TxDescCache.html#a584d7923b741a0ed4ae9c59b8ab254ad">pktWaiting</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4f0881be8aa8698e16dcf52a89085100"></a><!-- doxytag: member="IGbE::TxDescCache::pktComplete" ref="a4f0881be8aa8698e16dcf52a89085100" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pktComplete </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Called by event when dma to write packet is completed </p>

<p><div class="fragment"><pre class="fragment"><a name="l01750"></a>01750 {
<a name="l01751"></a>01751 
<a name="l01752"></a>01752     <a class="code" href="structiGbReg_1_1TxDesc.html">TxDesc</a> *desc;
<a name="l01753"></a>01753     assert(<a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.size());
<a name="l01754"></a>01754     assert(<a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a>);
<a name="l01755"></a>01755 
<a name="l01756"></a>01756     <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(<span class="stringliteral">&quot;TXS&quot;</span>, <span class="stringliteral">&quot;Update Desc&quot;</span>);
<a name="l01757"></a>01757 
<a name="l01758"></a>01758     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;DMA of packet complete\n&quot;</span>);
<a name="l01759"></a>01759 
<a name="l01760"></a>01760 
<a name="l01761"></a>01761     desc = <a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.front();
<a name="l01762"></a>01762     assert((<a class="code" href="namespaceiGbReg_1_1TxdOp.html#af55d26465a475bf81ed6f357bdf7c1b1">TxdOp::isLegacy</a>(desc) || <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a6986d9be70f07915ad25bf0892c3c5d7">TxdOp::isData</a>(desc)) &amp;&amp;
<a name="l01763"></a>01763            <a class="code" href="namespaceiGbReg_1_1TxdOp.html#ad1ccf1bd606d966d7549916b3562aebd">TxdOp::getLen</a>(desc));
<a name="l01764"></a>01764 
<a name="l01765"></a>01765     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;TxDescriptor data d1: %#llx d2: %#llx\n&quot;</span>,
<a name="l01766"></a>01766             desc-&gt;<a class="code" href="structiGbReg_1_1TxDesc.html#acf7fdcf693e16061288fb38f25c65065">d1</a>, desc-&gt;<a class="code" href="structiGbReg_1_1TxDesc.html#af70722427656749b5aaa2c67a7ccc33d">d2</a>);
<a name="l01767"></a>01767 
<a name="l01768"></a>01768     <span class="comment">// Set the length of the data in the EtherPacket</span>
<a name="l01769"></a>01769     <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a>) {
<a name="l01770"></a>01770         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;TSO: use: %d hdrlen: %d mss: %d total: %d &quot;</span>
<a name="l01771"></a>01771             <span class="stringliteral">&quot;used: %d loaded hdr: %d\n&quot;</span>, <a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a>, <a class="code" href="classIGbE_1_1TxDescCache.html#abdc8c249b4ac1dcba87bb5dd61aad6b4">tsoHeaderLen</a>, <a class="code" href="classIGbE_1_1TxDescCache.html#a140f29bf479ea15261618bed60b9f777">tsoMss</a>,
<a name="l01772"></a>01772             <a class="code" href="classIGbE_1_1TxDescCache.html#a94166f6af145a255d6623ebd93b0c0f5">tsoTotalLen</a>, <a class="code" href="classIGbE_1_1TxDescCache.html#afaeeb9d655b0c19961b86d83fc025ae5">tsoUsedLen</a>, <a class="code" href="classIGbE_1_1TxDescCache.html#aea6ed56838e016f0ad81353c348b62cb">tsoLoadedHeader</a>);
<a name="l01773"></a>01773         <a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a>-&gt;length += <a class="code" href="classIGbE_1_1TxDescCache.html#a4e886802f97241586f0f9e59d4d3b27e">tsoCopyBytes</a>;
<a name="l01774"></a>01774         <a class="code" href="classIGbE_1_1TxDescCache.html#afaeeb9d655b0c19961b86d83fc025ae5">tsoUsedLen</a> += <a class="code" href="classIGbE_1_1TxDescCache.html#a4e886802f97241586f0f9e59d4d3b27e">tsoCopyBytes</a>;
<a name="l01775"></a>01775         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;TSO: descBytesUsed: %d copyBytes: %d\n&quot;</span>,
<a name="l01776"></a>01776             <a class="code" href="classIGbE_1_1TxDescCache.html#a9db8e95f501ae2399c15308b5fd40905">tsoDescBytesUsed</a>, <a class="code" href="classIGbE_1_1TxDescCache.html#a4e886802f97241586f0f9e59d4d3b27e">tsoCopyBytes</a>);
<a name="l01777"></a>01777     } <span class="keywordflow">else</span>
<a name="l01778"></a>01778         <a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a>-&gt;length += <a class="code" href="namespaceiGbReg_1_1TxdOp.html#ad1ccf1bd606d966d7549916b3562aebd">TxdOp::getLen</a>(desc);
<a name="l01779"></a>01779     
<a name="l01780"></a>01780 
<a name="l01781"></a>01781 
<a name="l01782"></a>01782     <span class="keywordflow">if</span> ((!<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a0e51e7a024606345d359fc17d3af7c9c">TxdOp::eop</a>(desc) &amp;&amp; !<a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a>) || 
<a name="l01783"></a>01783         (<a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a>-&gt;length &lt; ( <a class="code" href="classIGbE_1_1TxDescCache.html#a140f29bf479ea15261618bed60b9f777">tsoMss</a> + <a class="code" href="classIGbE_1_1TxDescCache.html#abdc8c249b4ac1dcba87bb5dd61aad6b4">tsoHeaderLen</a>) &amp;&amp;
<a name="l01784"></a>01784          <a class="code" href="classIGbE_1_1TxDescCache.html#a94166f6af145a255d6623ebd93b0c0f5">tsoTotalLen</a> != <a class="code" href="classIGbE_1_1TxDescCache.html#afaeeb9d655b0c19961b86d83fc025ae5">tsoUsedLen</a> &amp;&amp; <a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a>)) {
<a name="l01785"></a>01785         assert(!<a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a> || (<a class="code" href="classIGbE_1_1TxDescCache.html#a9db8e95f501ae2399c15308b5fd40905">tsoDescBytesUsed</a> == <a class="code" href="namespaceiGbReg_1_1TxdOp.html#ad1ccf1bd606d966d7549916b3562aebd">TxdOp::getLen</a>(desc)));
<a name="l01786"></a>01786         <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a4d59c58fec3355c64488974a9110bb70">anDq</a>(<span class="stringliteral">&quot;TXS&quot;</span>, <a class="code" href="classIGbE_1_1DescCache.html#aa1b65175b7b2bc6609744ebc8657ac7d">annUnusedCacheQ</a>);
<a name="l01787"></a>01787         <a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.pop_front();
<a name="l01788"></a>01788         <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#ad5560d7f7671ea0c96250beacf187ac8">anQ</a>(<span class="stringliteral">&quot;TXS&quot;</span>, <a class="code" href="classIGbE_1_1DescCache.html#a6ee5c97cfcef9e794d9691f2d11454aa">annUsedCacheQ</a>);
<a name="l01789"></a>01789         <a class="code" href="classIGbE_1_1DescCache.html#a99982ada48f129fedf0ee5d8871f5df8">usedCache</a>.push_back(desc);
<a name="l01790"></a>01790 
<a name="l01791"></a>01791         <a class="code" href="classIGbE_1_1TxDescCache.html#a9db8e95f501ae2399c15308b5fd40905">tsoDescBytesUsed</a> = 0;
<a name="l01792"></a>01792         <a class="code" href="classIGbE_1_1TxDescCache.html#a0807bda2e863c4492ab0165135bf396c">pktDone</a> = <span class="keyword">true</span>;
<a name="l01793"></a>01793         <a class="code" href="classIGbE_1_1TxDescCache.html#a584d7923b741a0ed4ae9c59b8ab254ad">pktWaiting</a> = <span class="keyword">false</span>;
<a name="l01794"></a>01794         <a class="code" href="classIGbE_1_1TxDescCache.html#adb0830579bf508fe91ec42f51928ca5d">pktMultiDesc</a> = <span class="keyword">true</span>;
<a name="l01795"></a>01795 
<a name="l01796"></a>01796         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Partial Packet Descriptor of %d bytes Done\n&quot;</span>,
<a name="l01797"></a>01797                 <a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a>-&gt;length);
<a name="l01798"></a>01798         <a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l01799"></a>01799 
<a name="l01800"></a>01800         <a class="code" href="classIGbE_1_1TxDescCache.html#aec7fdcc540223076999e0f8f07f854bc">enableSm</a>();
<a name="l01801"></a>01801         <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a97cbf86aeda5390deb20b1d39396d111">checkDrain</a>();
<a name="l01802"></a>01802         <span class="keywordflow">return</span>;
<a name="l01803"></a>01803     }
<a name="l01804"></a>01804 
<a name="l01805"></a>01805 
<a name="l01806"></a>01806     <a class="code" href="classIGbE_1_1TxDescCache.html#adb0830579bf508fe91ec42f51928ca5d">pktMultiDesc</a> = <span class="keyword">false</span>;
<a name="l01807"></a>01807     <span class="comment">// no support for vlans</span>
<a name="l01808"></a>01808     assert(!<a class="code" href="namespaceiGbReg_1_1TxdOp.html#ad25431c134234e0709d6020ebc822a65">TxdOp::vle</a>(desc));
<a name="l01809"></a>01809 
<a name="l01810"></a>01810     <span class="comment">// we only support single packet descriptors at this point</span>
<a name="l01811"></a>01811     <span class="keywordflow">if</span> (!<a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a>)
<a name="l01812"></a>01812         assert(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a0e51e7a024606345d359fc17d3af7c9c">TxdOp::eop</a>(desc));
<a name="l01813"></a>01813 
<a name="l01814"></a>01814     <span class="comment">// set that this packet is done</span>
<a name="l01815"></a>01815     <span class="keywordflow">if</span> (<a class="code" href="namespaceArmISA.html#acf2b1073855b77fc0cddb61c70ec5391">TxdOp::rs</a>(desc))
<a name="l01816"></a>01816         <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aa4f81d41615115c41fcc39018aaff20e">TxdOp::setDd</a>(desc);
<a name="l01817"></a>01817 
<a name="l01818"></a>01818     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;TxDescriptor data d1: %#llx d2: %#llx\n&quot;</span>,
<a name="l01819"></a>01819             desc-&gt;<a class="code" href="structiGbReg_1_1TxDesc.html#acf7fdcf693e16061288fb38f25c65065">d1</a>, desc-&gt;<a class="code" href="structiGbReg_1_1TxDesc.html#af70722427656749b5aaa2c67a7ccc33d">d2</a>);
<a name="l01820"></a>01820 
<a name="l01821"></a>01821     <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a>) {
<a name="l01822"></a>01822         <a class="code" href="classNet_1_1IpPtr.html">IpPtr</a> <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>(<a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a>);
<a name="l01823"></a>01823         <span class="keywordflow">if</span> (<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>) {
<a name="l01824"></a>01824             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;TSO: Modifying IP header. Id + %d\n&quot;</span>,
<a name="l01825"></a>01825                     <a class="code" href="classIGbE_1_1TxDescCache.html#a50260682f8c2508080a0c2c51727b40c">tsoPkts</a>);
<a name="l01826"></a>01826             <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>-&gt;id(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>-&gt;id() + <a class="code" href="classIGbE_1_1TxDescCache.html#a50260682f8c2508080a0c2c51727b40c">tsoPkts</a>++);
<a name="l01827"></a>01827             <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>-&gt;len(<a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a>-&gt;length - <a class="code" href="classNet_1_1EthPtr.html">EthPtr</a>(<a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a>)-&gt;<a class="code" href="classIGbE_1_1DescCache.html#a439227feff9d7f55384e8780cfc2eb82">size</a>()); 
<a name="l01828"></a>01828         
<a name="l01829"></a>01829             <a class="code" href="classNet_1_1TcpPtr.html">TcpPtr</a> <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>);
<a name="l01830"></a>01830             <span class="keywordflow">if</span> (<a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>) {
<a name="l01831"></a>01831                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc,
<a name="l01832"></a>01832                         <span class="stringliteral">&quot;TSO: Modifying TCP header. old seq %d + %d\n&quot;</span>,
<a name="l01833"></a>01833                         <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>-&gt;seq(), <a class="code" href="classIGbE_1_1TxDescCache.html#a2906204858e8f7b554a7b5a449bbb4cb">tsoPrevSeq</a>);
<a name="l01834"></a>01834                 <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>-&gt;seq(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>-&gt;seq() + <a class="code" href="classIGbE_1_1TxDescCache.html#a2906204858e8f7b554a7b5a449bbb4cb">tsoPrevSeq</a>);
<a name="l01835"></a>01835                 <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1TxDescCache.html#afaeeb9d655b0c19961b86d83fc025ae5">tsoUsedLen</a> != <a class="code" href="classIGbE_1_1TxDescCache.html#a94166f6af145a255d6623ebd93b0c0f5">tsoTotalLen</a>)
<a name="l01836"></a>01836                     <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>-&gt;flags(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>-&gt;flags() &amp; ~9); <span class="comment">// clear fin &amp; psh</span>
<a name="l01837"></a>01837             }
<a name="l01838"></a>01838             <a class="code" href="classNet_1_1UdpPtr.html">UdpPtr</a> udp(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>);
<a name="l01839"></a>01839             <span class="keywordflow">if</span> (udp) {
<a name="l01840"></a>01840                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;TSO: Modifying UDP header.\n&quot;</span>);
<a name="l01841"></a>01841                 udp-&gt;len(<a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a>-&gt;length - <a class="code" href="classNet_1_1EthPtr.html">EthPtr</a>(<a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a>)-&gt;<a class="code" href="classIGbE_1_1DescCache.html#a439227feff9d7f55384e8780cfc2eb82">size</a>());
<a name="l01842"></a>01842             }
<a name="l01843"></a>01843         }
<a name="l01844"></a>01844         <a class="code" href="classIGbE_1_1TxDescCache.html#a2906204858e8f7b554a7b5a449bbb4cb">tsoPrevSeq</a> = <a class="code" href="classIGbE_1_1TxDescCache.html#afaeeb9d655b0c19961b86d83fc025ae5">tsoUsedLen</a>;
<a name="l01845"></a>01845     }
<a name="l01846"></a>01846 
<a name="l01847"></a>01847     <span class="keywordflow">if</span> (<a class="code" href="trace_8hh.html#af76c9f7776aade1bf9d7dfa8a0c6b341">DTRACE</a>(EthernetDesc)) {
<a name="l01848"></a>01848         <a class="code" href="classNet_1_1IpPtr.html">IpPtr</a> <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>(<a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a>);
<a name="l01849"></a>01849         <span class="keywordflow">if</span> (<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>)
<a name="l01850"></a>01850             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Proccesing Ip packet with Id=%d\n&quot;</span>,
<a name="l01851"></a>01851                     <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>-&gt;id());
<a name="l01852"></a>01852         <span class="keywordflow">else</span>
<a name="l01853"></a>01853             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;Proccesing Non-Ip packet\n&quot;</span>);
<a name="l01854"></a>01854     }
<a name="l01855"></a>01855 
<a name="l01856"></a>01856     <span class="comment">// Checksums are only ofloaded for new descriptor types</span>
<a name="l01857"></a>01857     <span class="keywordflow">if</span> (<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a6986d9be70f07915ad25bf0892c3c5d7">TxdOp::isData</a>(desc) &amp;&amp; ( <a class="code" href="namespaceiGbReg_1_1TxdOp.html#ad3912371dfd0afe6467b8612bb0c040e">TxdOp::ixsm</a>(desc) || <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a0182840b987fe696a6728f84db149b74">TxdOp::txsm</a>(desc)) ) {
<a name="l01858"></a>01858         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Calculating checksums for packet\n&quot;</span>);
<a name="l01859"></a>01859         <a class="code" href="classNet_1_1IpPtr.html">IpPtr</a> <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>(<a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a>);
<a name="l01860"></a>01860         assert(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>);
<a name="l01861"></a>01861         <span class="keywordflow">if</span> (<a class="code" href="namespaceiGbReg_1_1TxdOp.html#ad3912371dfd0afe6467b8612bb0c040e">TxdOp::ixsm</a>(desc)) {
<a name="l01862"></a>01862             <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>-&gt;sum(0);
<a name="l01863"></a>01863             <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>-&gt;sum(<a class="code" href="namespaceNet.html#a7c7758a7af16c9b808dcb8ddf7aa1a34">cksum</a>(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>));
<a name="l01864"></a>01864             <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classEtherDevice.html#ab8fd14604893c8e4a3972f2fdf9501e1">txIpChecksums</a>++;
<a name="l01865"></a>01865             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Calculated IP checksum\n&quot;</span>);
<a name="l01866"></a>01866         }
<a name="l01867"></a>01867         <span class="keywordflow">if</span> (<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a0182840b987fe696a6728f84db149b74">TxdOp::txsm</a>(desc)) {
<a name="l01868"></a>01868             <a class="code" href="classNet_1_1TcpPtr.html">TcpPtr</a> <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>);
<a name="l01869"></a>01869             <a class="code" href="classNet_1_1UdpPtr.html">UdpPtr</a> udp(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>);
<a name="l01870"></a>01870             <span class="keywordflow">if</span> (<a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>) {
<a name="l01871"></a>01871                 <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>-&gt;sum(0);
<a name="l01872"></a>01872                 <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>-&gt;sum(<a class="code" href="namespaceNet.html#a7c7758a7af16c9b808dcb8ddf7aa1a34">cksum</a>(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>));
<a name="l01873"></a>01873                 <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classEtherDevice.html#a5eb11fbceeba64f33c20a6f83d47fa4c">txTcpChecksums</a>++;
<a name="l01874"></a>01874                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Calculated TCP checksum\n&quot;</span>);
<a name="l01875"></a>01875             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (udp) {
<a name="l01876"></a>01876                 assert(udp);
<a name="l01877"></a>01877                 udp-&gt;sum(0);
<a name="l01878"></a>01878                 udp-&gt;sum(<a class="code" href="namespaceNet.html#a7c7758a7af16c9b808dcb8ddf7aa1a34">cksum</a>(udp));
<a name="l01879"></a>01879                 <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classEtherDevice.html#aa1217365fc3caee57fb3a21d3a51b237">txUdpChecksums</a>++;
<a name="l01880"></a>01880                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Calculated UDP checksum\n&quot;</span>);
<a name="l01881"></a>01881             } <span class="keywordflow">else</span> {
<a name="l01882"></a>01882                 <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Told to checksum, but don&apos;t know how\n&quot;</span>);
<a name="l01883"></a>01883             }
<a name="l01884"></a>01884         }
<a name="l01885"></a>01885     }
<a name="l01886"></a>01886 
<a name="l01887"></a>01887     <span class="keywordflow">if</span> (<a class="code" href="namespaceArmISA.html#a12c551fa840211ff81e39f3dc8bc5b71">TxdOp::ide</a>(desc)) {
<a name="l01888"></a>01888         <span class="comment">// Deal with the rx timer interrupts</span>
<a name="l01889"></a>01889         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Descriptor had IDE set\n&quot;</span>);
<a name="l01890"></a>01890         <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a5a6fc226edb656c090d075c1064fe0d5">tidv</a>.idv()) {
<a name="l01891"></a>01891             <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> delay = <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a5a6fc226edb656c090d075c1064fe0d5">tidv</a>.idv() * <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#ad4b9fb8ece2ddee6cda2b12e4f77b3d1">intClock</a>();
<a name="l01892"></a>01892             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;setting tidv\n&quot;</span>);
<a name="l01893"></a>01893             <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classEventManager.html#a83fe8e2d06cd7c6e36743e5beb07298f">reschedule</a>(<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a91fce863693eb4c56a924639620d77cf">tidvEvent</a>, <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>() + delay, <span class="keyword">true</span>);
<a name="l01894"></a>01894         }
<a name="l01895"></a>01895 
<a name="l01896"></a>01896         <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a900770ffadce14bf9ff68603b7e4b9ae">tadv</a>.idv() &amp;&amp; <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a5a6fc226edb656c090d075c1064fe0d5">tidv</a>.idv()) {
<a name="l01897"></a>01897             <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> delay = <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a900770ffadce14bf9ff68603b7e4b9ae">tadv</a>.idv() * <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#ad4b9fb8ece2ddee6cda2b12e4f77b3d1">intClock</a>();
<a name="l01898"></a>01898             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;setting tadv\n&quot;</span>);
<a name="l01899"></a>01899             <span class="keywordflow">if</span> (!<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a52af2948f0bdbd05624c9f1e90872556">tadvEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>()) {
<a name="l01900"></a>01900                 <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classEventManager.html#a4ddebbfe9a12b95be6fb993ce892dcd3">schedule</a>(<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a52af2948f0bdbd05624c9f1e90872556">tadvEvent</a>, <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>() + delay);
<a name="l01901"></a>01901             }
<a name="l01902"></a>01902         }
<a name="l01903"></a>01903     }
<a name="l01904"></a>01904 
<a name="l01905"></a>01905 
<a name="l01906"></a>01906     <span class="keywordflow">if</span> (!<a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a> ||  <a class="code" href="namespaceiGbReg_1_1TxdOp.html#ad1ccf1bd606d966d7549916b3562aebd">TxdOp::getLen</a>(desc) == <a class="code" href="classIGbE_1_1TxDescCache.html#a9db8e95f501ae2399c15308b5fd40905">tsoDescBytesUsed</a>) {
<a name="l01907"></a>01907         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Descriptor Done\n&quot;</span>);
<a name="l01908"></a>01908         <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a4d59c58fec3355c64488974a9110bb70">anDq</a>(<span class="stringliteral">&quot;TXS&quot;</span>, <a class="code" href="classIGbE_1_1DescCache.html#aa1b65175b7b2bc6609744ebc8657ac7d">annUnusedCacheQ</a>);
<a name="l01909"></a>01909         <a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.pop_front();
<a name="l01910"></a>01910         <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#ad5560d7f7671ea0c96250beacf187ac8">anQ</a>(<span class="stringliteral">&quot;TXS&quot;</span>, <a class="code" href="classIGbE_1_1DescCache.html#a6ee5c97cfcef9e794d9691f2d11454aa">annUsedCacheQ</a>);
<a name="l01911"></a>01911         <a class="code" href="classIGbE_1_1DescCache.html#a99982ada48f129fedf0ee5d8871f5df8">usedCache</a>.push_back(desc);
<a name="l01912"></a>01912         <a class="code" href="classIGbE_1_1TxDescCache.html#a9db8e95f501ae2399c15308b5fd40905">tsoDescBytesUsed</a> = 0;
<a name="l01913"></a>01913     }
<a name="l01914"></a>01914 
<a name="l01915"></a>01915     <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a> &amp;&amp; <a class="code" href="classIGbE_1_1TxDescCache.html#afaeeb9d655b0c19961b86d83fc025ae5">tsoUsedLen</a> == <a class="code" href="classIGbE_1_1TxDescCache.html#a94166f6af145a255d6623ebd93b0c0f5">tsoTotalLen</a>)
<a name="l01916"></a>01916         <a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a> = <span class="keyword">false</span>;
<a name="l01917"></a>01917 
<a name="l01918"></a>01918 
<a name="l01919"></a>01919     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc,
<a name="l01920"></a>01920             <span class="stringliteral">&quot;------Packet of %d bytes ready for transmission-------\n&quot;</span>,
<a name="l01921"></a>01921             <a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a>-&gt;length);
<a name="l01922"></a>01922     <a class="code" href="classIGbE_1_1TxDescCache.html#a0807bda2e863c4492ab0165135bf396c">pktDone</a> = <span class="keyword">true</span>;
<a name="l01923"></a>01923     <a class="code" href="classIGbE_1_1TxDescCache.html#a584d7923b741a0ed4ae9c59b8ab254ad">pktWaiting</a> = <span class="keyword">false</span>;
<a name="l01924"></a>01924     <a class="code" href="classIGbE_1_1DescCache.html#a3ac80d9129084f8cd11a49ded80e8333">pktPtr</a> = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l01925"></a>01925     <a class="code" href="classIGbE_1_1TxDescCache.html#a3e767a1c20550a9a1f1c04e0900475d3">tsoPktHasHeader</a> = <span class="keyword">false</span>;
<a name="l01926"></a>01926 
<a name="l01927"></a>01927     <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a3d8c32f0d48138f48863430f0c591850">txdctl</a>.wthresh() == 0) {
<a name="l01928"></a>01928         <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(<span class="stringliteral">&quot;TXS&quot;</span>, <span class="stringliteral">&quot;Desc Writeback&quot;</span>);
<a name="l01929"></a>01929         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;WTHRESH == 0, writing back descriptor\n&quot;</span>);
<a name="l01930"></a>01930         <a class="code" href="classIGbE_1_1DescCache.html#af6593b85cc3920a68b9a0317053a4416">writeback</a>(0);
<a name="l01931"></a>01931     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a3d8c32f0d48138f48863430f0c591850">txdctl</a>.gran() &amp;&amp; <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a3d8c32f0d48138f48863430f0c591850">txdctl</a>.wthresh() &lt;=
<a name="l01932"></a>01932                <a class="code" href="classIGbE_1_1TxDescCache.html#a6fb0bd6d34eae6de55fb211662f92180">descInBlock</a>(<a class="code" href="classIGbE_1_1DescCache.html#a99982ada48f129fedf0ee5d8871f5df8">usedCache</a>.size())) {
<a name="l01933"></a>01933         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;used &gt; WTHRESH, writing back descriptor\n&quot;</span>);
<a name="l01934"></a>01934         <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(<span class="stringliteral">&quot;TXS&quot;</span>, <span class="stringliteral">&quot;Desc Writeback&quot;</span>);
<a name="l01935"></a>01935         <a class="code" href="classIGbE_1_1DescCache.html#af6593b85cc3920a68b9a0317053a4416">writeback</a>((<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classDmaDevice.html#a3e6e4aa434d2b5c83de3660307a49001">cacheBlockSize</a>()-1)&gt;&gt;4);
<a name="l01936"></a>01936     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a3d8c32f0d48138f48863430f0c591850">txdctl</a>.wthresh() &lt;= <a class="code" href="classIGbE_1_1DescCache.html#a99982ada48f129fedf0ee5d8871f5df8">usedCache</a>.size()) {
<a name="l01937"></a>01937         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;used &gt; WTHRESH, writing back descriptor\n&quot;</span>);
<a name="l01938"></a>01938         <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#ac20fadb883428d12627ffa95751acf17">anBegin</a>(<span class="stringliteral">&quot;TXS&quot;</span>, <span class="stringliteral">&quot;Desc Writeback&quot;</span>);
<a name="l01939"></a>01939         <a class="code" href="classIGbE_1_1DescCache.html#af6593b85cc3920a68b9a0317053a4416">writeback</a>((<a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classDmaDevice.html#a3e6e4aa434d2b5c83de3660307a49001">cacheBlockSize</a>()-1)&gt;&gt;4);
<a name="l01940"></a>01940     }
<a name="l01941"></a>01941 
<a name="l01942"></a>01942     <a class="code" href="classIGbE_1_1TxDescCache.html#aec7fdcc540223076999e0f8f07f854bc">enableSm</a>();
<a name="l01943"></a>01943     <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a97cbf86aeda5390deb20b1d39396d111">checkDrain</a>();
<a name="l01944"></a>01944 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af7a2e6e84647ba93598a7a02730cba41"></a><!-- doxytag: member="IGbE::TxDescCache::processContextDesc" ref="af7a2e6e84647ba93598a7a02730cba41" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void processContextDesc </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l01560"></a>01560 {
<a name="l01561"></a>01561     assert(<a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.size());
<a name="l01562"></a>01562     <a class="code" href="structiGbReg_1_1TxDesc.html">TxDesc</a> *desc;
<a name="l01563"></a>01563     
<a name="l01564"></a>01564     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Checking and  processing context descriptors\n&quot;</span>);
<a name="l01565"></a>01565 
<a name="l01566"></a>01566     <span class="keywordflow">while</span> (!<a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a> &amp;&amp; <a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.size() &amp;&amp;
<a name="l01567"></a>01567            <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a91da43b92c742f43f0aee2bc07d15fe2">TxdOp::isContext</a>(<a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.front())) {
<a name="l01568"></a>01568         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Got context descriptor type...\n&quot;</span>);
<a name="l01569"></a>01569 
<a name="l01570"></a>01570         desc = <a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.front();
<a name="l01571"></a>01571         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Descriptor upper: %#x lower: %#X\n&quot;</span>, 
<a name="l01572"></a>01572                 desc-&gt;d1, desc-&gt;d2);
<a name="l01573"></a>01573 
<a name="l01574"></a>01574         
<a name="l01575"></a>01575         <span class="comment">// is this going to be a tcp or udp packet?</span>
<a name="l01576"></a>01576         <a class="code" href="classIGbE_1_1TxDescCache.html#ad610366c4a18d924d4962433c0b8515e">isTcp</a> = <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">TxdOp::tcp</a>(desc) ? <span class="keyword">true</span> : <span class="keyword">false</span>;
<a name="l01577"></a>01577 
<a name="l01578"></a>01578         <span class="comment">// setup all the TSO variables, they&apos;ll be ignored if we don&apos;t use </span>
<a name="l01579"></a>01579         <span class="comment">// tso for this connection</span>
<a name="l01580"></a>01580         <a class="code" href="classIGbE_1_1TxDescCache.html#abdc8c249b4ac1dcba87bb5dd61aad6b4">tsoHeaderLen</a> = <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a56155a1a3846877b600c56961f9ce28d">TxdOp::hdrlen</a>(desc);
<a name="l01581"></a>01581         <a class="code" href="classIGbE_1_1TxDescCache.html#a140f29bf479ea15261618bed60b9f777">tsoMss</a>  = <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a3c9424fedfd3337a1fbe2fdb133cec01">TxdOp::mss</a>(desc);
<a name="l01582"></a>01582 
<a name="l01583"></a>01583         <span class="keywordflow">if</span> (<a class="code" href="namespaceiGbReg_1_1TxdOp.html#aa03874ccb0b42e0cc137487bd84279d4">TxdOp::isType</a>(desc, <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a134b13753f53fae4712f0cf445beb0fe">TxdOp::TXD_CNXT</a>) &amp;&amp; <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a264ab0660d5fb172a75fa608a9ee3644">TxdOp::tse</a>(desc)) {
<a name="l01584"></a>01584             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;TCP offload enabled for packet hdrlen: &quot;</span>
<a name="l01585"></a>01585                     <span class="stringliteral">&quot;%d mss: %d paylen %d\n&quot;</span>, <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a56155a1a3846877b600c56961f9ce28d">TxdOp::hdrlen</a>(desc),
<a name="l01586"></a>01586                     <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a3c9424fedfd3337a1fbe2fdb133cec01">TxdOp::mss</a>(desc), <a class="code" href="namespaceiGbReg_1_1TxdOp.html#ad1ccf1bd606d966d7549916b3562aebd">TxdOp::getLen</a>(desc));
<a name="l01587"></a>01587             <a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a> = <span class="keyword">true</span>;
<a name="l01588"></a>01588             <a class="code" href="classIGbE_1_1TxDescCache.html#a94166f6af145a255d6623ebd93b0c0f5">tsoTotalLen</a> = <a class="code" href="namespaceiGbReg_1_1TxdOp.html#ad1ccf1bd606d966d7549916b3562aebd">TxdOp::getLen</a>(desc);
<a name="l01589"></a>01589             <a class="code" href="classIGbE_1_1TxDescCache.html#aea6ed56838e016f0ad81353c348b62cb">tsoLoadedHeader</a> = <span class="keyword">false</span>;
<a name="l01590"></a>01590             <a class="code" href="classIGbE_1_1TxDescCache.html#a9db8e95f501ae2399c15308b5fd40905">tsoDescBytesUsed</a> = 0;
<a name="l01591"></a>01591             <a class="code" href="classIGbE_1_1TxDescCache.html#afaeeb9d655b0c19961b86d83fc025ae5">tsoUsedLen</a> = 0;
<a name="l01592"></a>01592             <a class="code" href="classIGbE_1_1TxDescCache.html#a2906204858e8f7b554a7b5a449bbb4cb">tsoPrevSeq</a> = 0;
<a name="l01593"></a>01593             <a class="code" href="classIGbE_1_1TxDescCache.html#a3e767a1c20550a9a1f1c04e0900475d3">tsoPktHasHeader</a> = <span class="keyword">false</span>;
<a name="l01594"></a>01594             <a class="code" href="classIGbE_1_1TxDescCache.html#a50260682f8c2508080a0c2c51727b40c">tsoPkts</a> = 0;
<a name="l01595"></a>01595             <a class="code" href="classIGbE_1_1TxDescCache.html#a4e886802f97241586f0f9e59d4d3b27e">tsoCopyBytes</a> = 0;
<a name="l01596"></a>01596         }
<a name="l01597"></a>01597 
<a name="l01598"></a>01598         <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aa4f81d41615115c41fcc39018aaff20e">TxdOp::setDd</a>(desc);
<a name="l01599"></a>01599         <a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.pop_front();
<a name="l01600"></a>01600         <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#a4d59c58fec3355c64488974a9110bb70">anDq</a>(<span class="stringliteral">&quot;TXS&quot;</span>, <a class="code" href="classIGbE_1_1DescCache.html#aa1b65175b7b2bc6609744ebc8657ac7d">annUnusedCacheQ</a>);
<a name="l01601"></a>01601         <a class="code" href="classIGbE_1_1DescCache.html#a99982ada48f129fedf0ee5d8871f5df8">usedCache</a>.push_back(desc);
<a name="l01602"></a>01602         <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#ad5560d7f7671ea0c96250beacf187ac8">anQ</a>(<span class="stringliteral">&quot;TXS&quot;</span>, <a class="code" href="classIGbE_1_1DescCache.html#a6ee5c97cfcef9e794d9691f2d11454aa">annUsedCacheQ</a>);
<a name="l01603"></a>01603     }
<a name="l01604"></a>01604 
<a name="l01605"></a>01605     <span class="keywordflow">if</span> (!<a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.size())
<a name="l01606"></a>01606         <span class="keywordflow">return</span>;
<a name="l01607"></a>01607 
<a name="l01608"></a>01608     desc = <a class="code" href="classIGbE_1_1DescCache.html#af60e49173ff6f145cb02253c92201694">unusedCache</a>.front();
<a name="l01609"></a>01609     <span class="keywordflow">if</span> (!<a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a> &amp;&amp; <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aa03874ccb0b42e0cc137487bd84279d4">TxdOp::isType</a>(desc, <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a97280b2931b22cb8a343e91ee6d0fd80">TxdOp::TXD_ADVDATA</a>) &amp;&amp; 
<a name="l01610"></a>01610         <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a264ab0660d5fb172a75fa608a9ee3644">TxdOp::tse</a>(desc)) {
<a name="l01611"></a>01611         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;TCP offload(adv) enabled for packet &quot;</span>
<a name="l01612"></a>01612                 <span class="stringliteral">&quot;hdrlen: %d mss: %d paylen %d\n&quot;</span>, 
<a name="l01613"></a>01613                 <a class="code" href="classIGbE_1_1TxDescCache.html#abdc8c249b4ac1dcba87bb5dd61aad6b4">tsoHeaderLen</a>, <a class="code" href="classIGbE_1_1TxDescCache.html#a140f29bf479ea15261618bed60b9f777">tsoMss</a>, <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a48e87927f1617006b0965381efcf5dfd">TxdOp::getTsoLen</a>(desc));
<a name="l01614"></a>01614         <a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a> = <span class="keyword">true</span>;
<a name="l01615"></a>01615         <a class="code" href="classIGbE_1_1TxDescCache.html#a94166f6af145a255d6623ebd93b0c0f5">tsoTotalLen</a> = <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a48e87927f1617006b0965381efcf5dfd">TxdOp::getTsoLen</a>(desc);
<a name="l01616"></a>01616         <a class="code" href="classIGbE_1_1TxDescCache.html#aea6ed56838e016f0ad81353c348b62cb">tsoLoadedHeader</a> = <span class="keyword">false</span>;
<a name="l01617"></a>01617         <a class="code" href="classIGbE_1_1TxDescCache.html#a9db8e95f501ae2399c15308b5fd40905">tsoDescBytesUsed</a> = 0;
<a name="l01618"></a>01618         <a class="code" href="classIGbE_1_1TxDescCache.html#afaeeb9d655b0c19961b86d83fc025ae5">tsoUsedLen</a> = 0;
<a name="l01619"></a>01619         <a class="code" href="classIGbE_1_1TxDescCache.html#a2906204858e8f7b554a7b5a449bbb4cb">tsoPrevSeq</a> = 0;
<a name="l01620"></a>01620         <a class="code" href="classIGbE_1_1TxDescCache.html#a3e767a1c20550a9a1f1c04e0900475d3">tsoPktHasHeader</a> = <span class="keyword">false</span>;
<a name="l01621"></a>01621         <a class="code" href="classIGbE_1_1TxDescCache.html#a50260682f8c2508080a0c2c51727b40c">tsoPkts</a> = 0;
<a name="l01622"></a>01622     }
<a name="l01623"></a>01623 
<a name="l01624"></a>01624     <span class="keywordflow">if</span> (<a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a> &amp;&amp; !<a class="code" href="classIGbE_1_1TxDescCache.html#aea6ed56838e016f0ad81353c348b62cb">tsoLoadedHeader</a>) {
<a name="l01625"></a>01625         <span class="comment">// we need to fetch a header</span>
<a name="l01626"></a>01626         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDesc, <span class="stringliteral">&quot;Starting DMA of TSO header\n&quot;</span>);
<a name="l01627"></a>01627         assert(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a6986d9be70f07915ad25bf0892c3c5d7">TxdOp::isData</a>(desc) &amp;&amp; <a class="code" href="namespaceiGbReg_1_1TxdOp.html#ad1ccf1bd606d966d7549916b3562aebd">TxdOp::getLen</a>(desc) &gt;= <a class="code" href="classIGbE_1_1TxDescCache.html#abdc8c249b4ac1dcba87bb5dd61aad6b4">tsoHeaderLen</a>);
<a name="l01628"></a>01628         <a class="code" href="classIGbE_1_1TxDescCache.html#a584d7923b741a0ed4ae9c59b8ab254ad">pktWaiting</a> = <span class="keyword">true</span>;
<a name="l01629"></a>01629         assert(<a class="code" href="classIGbE_1_1TxDescCache.html#abdc8c249b4ac1dcba87bb5dd61aad6b4">tsoHeaderLen</a> &lt;= 256);
<a name="l01630"></a>01630         <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classDmaDevice.html#a8ca93dacaa427cede08842a958aa1b23">dmaRead</a>(<a class="code" href="classIGbE_1_1DescCache.html#aaeea87c73c95205c88d11e03fe8f48b9">pciToDma</a>(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a363e2b2f2f55fcc8bdd1291609cc48db">TxdOp::getBuf</a>(desc)),
<a name="l01631"></a>01631                       <a class="code" href="classIGbE_1_1TxDescCache.html#abdc8c249b4ac1dcba87bb5dd61aad6b4">tsoHeaderLen</a>, &amp;<a class="code" href="classIGbE_1_1TxDescCache.html#ae7a8388f5aa169f8c86c19f91c3b128d">headerEvent</a>, <a class="code" href="classIGbE_1_1TxDescCache.html#a3309d8f5e1d64bb4d1ce8a654d406094">tsoHeader</a>, 0);
<a name="l01632"></a>01632     }
<a name="l01633"></a>01633 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a53e036786d17361be4c7320d39c99b84"></a><!-- doxytag: member="IGbE::TxDescCache::serialize" ref="a53e036786d17361be4c7320d39c99b84" args="(std::ostream &amp;os)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void serialize </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>os</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classIGbE_1_1DescCache.html#a53e036786d17361be4c7320d39c99b84">DescCache&lt; iGbReg::TxDesc &gt;</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l01964"></a>01964 {
<a name="l01965"></a>01965     <a class="code" href="classIGbE_1_1TxDescCache.html#a53e036786d17361be4c7320d39c99b84">DescCache&lt;TxDesc&gt;::serialize</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>);
<a name="l01966"></a>01966     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a0807bda2e863c4492ab0165135bf396c">pktDone</a>);
<a name="l01967"></a>01967     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#ad610366c4a18d924d4962433c0b8515e">isTcp</a>);
<a name="l01968"></a>01968     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a584d7923b741a0ed4ae9c59b8ab254ad">pktWaiting</a>);
<a name="l01969"></a>01969     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#adb0830579bf508fe91ec42f51928ca5d">pktMultiDesc</a>);
<a name="l01970"></a>01970 
<a name="l01971"></a>01971     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a>);
<a name="l01972"></a>01972     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#abdc8c249b4ac1dcba87bb5dd61aad6b4">tsoHeaderLen</a>);
<a name="l01973"></a>01973     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a140f29bf479ea15261618bed60b9f777">tsoMss</a>);
<a name="l01974"></a>01974     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a94166f6af145a255d6623ebd93b0c0f5">tsoTotalLen</a>);
<a name="l01975"></a>01975     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#afaeeb9d655b0c19961b86d83fc025ae5">tsoUsedLen</a>);
<a name="l01976"></a>01976     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a2906204858e8f7b554a7b5a449bbb4cb">tsoPrevSeq</a>);;
<a name="l01977"></a>01977     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a6113e9447ae2e0f5fcea17ac8b4a2fd5">tsoPktPayloadBytes</a>);
<a name="l01978"></a>01978     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#aea6ed56838e016f0ad81353c348b62cb">tsoLoadedHeader</a>);
<a name="l01979"></a>01979     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a3e767a1c20550a9a1f1c04e0900475d3">tsoPktHasHeader</a>);
<a name="l01980"></a>01980     <a class="code" href="serialize_8hh.html#a9aa03522128bc19a3bc0294501226f8b">SERIALIZE_ARRAY</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a3309d8f5e1d64bb4d1ce8a654d406094">tsoHeader</a>, 256);
<a name="l01981"></a>01981     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a9db8e95f501ae2399c15308b5fd40905">tsoDescBytesUsed</a>);
<a name="l01982"></a>01982     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a4e886802f97241586f0f9e59d4d3b27e">tsoCopyBytes</a>);
<a name="l01983"></a>01983     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a50260682f8c2508080a0c2c51727b40c">tsoPkts</a>);
<a name="l01984"></a>01984 
<a name="l01985"></a>01985     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a9bad25394212b8c9bf19b5b3fd692d7a">completionAddress</a>);
<a name="l01986"></a>01986     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#ad3481e86d121444fdcc4b02650d38e47">completionEnabled</a>);
<a name="l01987"></a>01987     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a487a3ccede49d6015e8e320bcd5b29e7">descEnd</a>);
<a name="l01988"></a>01988 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af22e5d6d660b97db37003ac61ac4ee49"></a><!-- doxytag: member="IGbE::TxDescCache::unserialize" ref="af22e5d6d660b97db37003ac61ac4ee49" args="(Checkpoint *cp, const std::string &amp;section)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void unserialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCheckpoint.html">Checkpoint</a> *&nbsp;</td>
          <td class="paramname"> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>section</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classIGbE_1_1DescCache.html#af22e5d6d660b97db37003ac61ac4ee49">DescCache&lt; iGbReg::TxDesc &gt;</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l01992"></a>01992 {
<a name="l01993"></a>01993     <a class="code" href="classIGbE_1_1TxDescCache.html#af22e5d6d660b97db37003ac61ac4ee49">DescCache&lt;TxDesc&gt;::unserialize</a>(cp, section);
<a name="l01994"></a>01994     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a0807bda2e863c4492ab0165135bf396c">pktDone</a>);
<a name="l01995"></a>01995     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#ad610366c4a18d924d4962433c0b8515e">isTcp</a>);
<a name="l01996"></a>01996     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a584d7923b741a0ed4ae9c59b8ab254ad">pktWaiting</a>);
<a name="l01997"></a>01997     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#adb0830579bf508fe91ec42f51928ca5d">pktMultiDesc</a>);
<a name="l01998"></a>01998 
<a name="l01999"></a>01999     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a>);
<a name="l02000"></a>02000     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#abdc8c249b4ac1dcba87bb5dd61aad6b4">tsoHeaderLen</a>);
<a name="l02001"></a>02001     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a140f29bf479ea15261618bed60b9f777">tsoMss</a>);
<a name="l02002"></a>02002     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a94166f6af145a255d6623ebd93b0c0f5">tsoTotalLen</a>);
<a name="l02003"></a>02003     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#afaeeb9d655b0c19961b86d83fc025ae5">tsoUsedLen</a>);
<a name="l02004"></a>02004     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a2906204858e8f7b554a7b5a449bbb4cb">tsoPrevSeq</a>);;
<a name="l02005"></a>02005     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a6113e9447ae2e0f5fcea17ac8b4a2fd5">tsoPktPayloadBytes</a>);
<a name="l02006"></a>02006     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#aea6ed56838e016f0ad81353c348b62cb">tsoLoadedHeader</a>);
<a name="l02007"></a>02007     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a3e767a1c20550a9a1f1c04e0900475d3">tsoPktHasHeader</a>);
<a name="l02008"></a>02008     <a class="code" href="serialize_8hh.html#a8de12bf68d0f92f7ab8585820607932e">UNSERIALIZE_ARRAY</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a3309d8f5e1d64bb4d1ce8a654d406094">tsoHeader</a>, 256);
<a name="l02009"></a>02009     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a9db8e95f501ae2399c15308b5fd40905">tsoDescBytesUsed</a>);
<a name="l02010"></a>02010     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a4e886802f97241586f0f9e59d4d3b27e">tsoCopyBytes</a>);
<a name="l02011"></a>02011     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a50260682f8c2508080a0c2c51727b40c">tsoPkts</a>);
<a name="l02012"></a>02012 
<a name="l02013"></a>02013     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a9bad25394212b8c9bf19b5b3fd692d7a">completionAddress</a>);
<a name="l02014"></a>02014     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#ad3481e86d121444fdcc4b02650d38e47">completionEnabled</a>);
<a name="l02015"></a>02015     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classIGbE_1_1TxDescCache.html#a487a3ccede49d6015e8e320bcd5b29e7">descEnd</a>);
<a name="l02016"></a>02016 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4f8dbb4f64167626cac110753708c55c"></a><!-- doxytag: member="IGbE::TxDescCache::updateHead" ref="a4f8dbb4f64167626cac110753708c55c" args="(long h)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void updateHead </td>
          <td>(</td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>h</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classIGbE_1_1DescCache.html#af48912789332a0283480cd85c7197f15">DescCache&lt; iGbReg::TxDesc &gt;</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00405"></a>00405 { <a class="code" href="classIGbE_1_1DescCache.html#a408e72fda9473efd272ef36a9f6d6928">igbe</a>-&gt;<a class="code" href="classIGbE.html#aca82e9e23b43d692ee2d79799761533f">regs</a>.<a class="code" href="structiGbReg_1_1Regs.html#a001949adaeea4f9ae509aaeb09d87056">tdh</a>(h); }
</pre></div></p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="a9bad25394212b8c9bf19b5b3fd692d7a"></a><!-- doxytag: member="IGbE::TxDescCache::completionAddress" ref="a9bad25394212b8c9bf19b5b3fd692d7a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="el" href="classIGbE_1_1TxDescCache.html#a9bad25394212b8c9bf19b5b3fd692d7a">completionAddress</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad3481e86d121444fdcc4b02650d38e47"></a><!-- doxytag: member="IGbE::TxDescCache::completionEnabled" ref="ad3481e86d121444fdcc4b02650d38e47" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classIGbE_1_1TxDescCache.html#ad3481e86d121444fdcc4b02650d38e47">completionEnabled</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a487a3ccede49d6015e8e320bcd5b29e7"></a><!-- doxytag: member="IGbE::TxDescCache::descEnd" ref="a487a3ccede49d6015e8e320bcd5b29e7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="classIGbE_1_1TxDescCache.html#a487a3ccede49d6015e8e320bcd5b29e7">descEnd</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae7a8388f5aa169f8c86c19f91c3b128d"></a><!-- doxytag: member="IGbE::TxDescCache::headerEvent" ref="ae7a8388f5aa169f8c86c19f91c3b128d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt;<a class="el" href="classIGbE_1_1TxDescCache.html">TxDescCache</a>, &amp;TxDescCache::headerComplete&gt; <a class="el" href="classIGbE_1_1TxDescCache.html#ae7a8388f5aa169f8c86c19f91c3b128d">headerEvent</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad610366c4a18d924d4962433c0b8515e"></a><!-- doxytag: member="IGbE::TxDescCache::isTcp" ref="ad610366c4a18d924d4962433c0b8515e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classIGbE_1_1TxDescCache.html#ad610366c4a18d924d4962433c0b8515e">isTcp</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="adc0e7fe81737dc40daddf8391bffae79"></a><!-- doxytag: member="IGbE::TxDescCache::nullEvent" ref="adc0e7fe81737dc40daddf8391bffae79" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt;<a class="el" href="classIGbE_1_1TxDescCache.html">TxDescCache</a>, &amp;TxDescCache::nullCallback&gt; <a class="el" href="classIGbE_1_1TxDescCache.html#adc0e7fe81737dc40daddf8391bffae79">nullEvent</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0807bda2e863c4492ab0165135bf396c"></a><!-- doxytag: member="IGbE::TxDescCache::pktDone" ref="a0807bda2e863c4492ab0165135bf396c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classIGbE_1_1TxDescCache.html#a0807bda2e863c4492ab0165135bf396c">pktDone</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2a06f4aa962fc09e9e764d3e9006d11b"></a><!-- doxytag: member="IGbE::TxDescCache::pktEvent" ref="a2a06f4aa962fc09e9e764d3e9006d11b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt;<a class="el" href="classIGbE_1_1TxDescCache.html">TxDescCache</a>, &amp;TxDescCache::pktComplete&gt; <a class="el" href="classIGbE_1_1TxDescCache.html#a2a06f4aa962fc09e9e764d3e9006d11b">pktEvent</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="adb0830579bf508fe91ec42f51928ca5d"></a><!-- doxytag: member="IGbE::TxDescCache::pktMultiDesc" ref="adb0830579bf508fe91ec42f51928ca5d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classIGbE_1_1TxDescCache.html#adb0830579bf508fe91ec42f51928ca5d">pktMultiDesc</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a584d7923b741a0ed4ae9c59b8ab254ad"></a><!-- doxytag: member="IGbE::TxDescCache::pktWaiting" ref="a584d7923b741a0ed4ae9c59b8ab254ad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classIGbE_1_1TxDescCache.html#a584d7923b741a0ed4ae9c59b8ab254ad">pktWaiting</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4e886802f97241586f0f9e59d4d3b27e"></a><!-- doxytag: member="IGbE::TxDescCache::tsoCopyBytes" ref="a4e886802f97241586f0f9e59d4d3b27e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="el" href="classIGbE_1_1TxDescCache.html#a4e886802f97241586f0f9e59d4d3b27e">tsoCopyBytes</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9db8e95f501ae2399c15308b5fd40905"></a><!-- doxytag: member="IGbE::TxDescCache::tsoDescBytesUsed" ref="a9db8e95f501ae2399c15308b5fd40905" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="el" href="classIGbE_1_1TxDescCache.html#a9db8e95f501ae2399c15308b5fd40905">tsoDescBytesUsed</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3309d8f5e1d64bb4d1ce8a654d406094"></a><!-- doxytag: member="IGbE::TxDescCache::tsoHeader" ref="a3309d8f5e1d64bb4d1ce8a654d406094" args="[256]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="classIGbE_1_1TxDescCache.html#a3309d8f5e1d64bb4d1ce8a654d406094">tsoHeader</a>[256]<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="abdc8c249b4ac1dcba87bb5dd61aad6b4"></a><!-- doxytag: member="IGbE::TxDescCache::tsoHeaderLen" ref="abdc8c249b4ac1dcba87bb5dd61aad6b4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="el" href="classIGbE_1_1TxDescCache.html#abdc8c249b4ac1dcba87bb5dd61aad6b4">tsoHeaderLen</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aea6ed56838e016f0ad81353c348b62cb"></a><!-- doxytag: member="IGbE::TxDescCache::tsoLoadedHeader" ref="aea6ed56838e016f0ad81353c348b62cb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classIGbE_1_1TxDescCache.html#aea6ed56838e016f0ad81353c348b62cb">tsoLoadedHeader</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a140f29bf479ea15261618bed60b9f777"></a><!-- doxytag: member="IGbE::TxDescCache::tsoMss" ref="a140f29bf479ea15261618bed60b9f777" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="el" href="classIGbE_1_1TxDescCache.html#a140f29bf479ea15261618bed60b9f777">tsoMss</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3e767a1c20550a9a1f1c04e0900475d3"></a><!-- doxytag: member="IGbE::TxDescCache::tsoPktHasHeader" ref="a3e767a1c20550a9a1f1c04e0900475d3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classIGbE_1_1TxDescCache.html#a3e767a1c20550a9a1f1c04e0900475d3">tsoPktHasHeader</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a6113e9447ae2e0f5fcea17ac8b4a2fd5"></a><!-- doxytag: member="IGbE::TxDescCache::tsoPktPayloadBytes" ref="a6113e9447ae2e0f5fcea17ac8b4a2fd5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="el" href="classIGbE_1_1TxDescCache.html#a6113e9447ae2e0f5fcea17ac8b4a2fd5">tsoPktPayloadBytes</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a50260682f8c2508080a0c2c51727b40c"></a><!-- doxytag: member="IGbE::TxDescCache::tsoPkts" ref="a50260682f8c2508080a0c2c51727b40c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classIGbE_1_1TxDescCache.html#a50260682f8c2508080a0c2c51727b40c">tsoPkts</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2906204858e8f7b554a7b5a449bbb4cb"></a><!-- doxytag: member="IGbE::TxDescCache::tsoPrevSeq" ref="a2906204858e8f7b554a7b5a449bbb4cb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="el" href="classIGbE_1_1TxDescCache.html#a2906204858e8f7b554a7b5a449bbb4cb">tsoPrevSeq</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a94166f6af145a255d6623ebd93b0c0f5"></a><!-- doxytag: member="IGbE::TxDescCache::tsoTotalLen" ref="a94166f6af145a255d6623ebd93b0c0f5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="el" href="classIGbE_1_1TxDescCache.html#a94166f6af145a255d6623ebd93b0c0f5">tsoTotalLen</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="afaeeb9d655b0c19961b86d83fc025ae5"></a><!-- doxytag: member="IGbE::TxDescCache::tsoUsedLen" ref="afaeeb9d655b0c19961b86d83fc025ae5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="el" href="classIGbE_1_1TxDescCache.html#afaeeb9d655b0c19961b86d83fc025ae5">tsoUsedLen</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae2379f1cb19d3eabcb86036c07fc7986"></a><!-- doxytag: member="IGbE::TxDescCache::useTso" ref="ae2379f1cb19d3eabcb86036c07fc7986" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classIGbE_1_1TxDescCache.html#ae2379f1cb19d3eabcb86036c07fc7986">useTso</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>dev/<a class="el" href="i8254xGBe_8hh_source.html">i8254xGBe.hh</a></li>
<li>dev/<a class="el" href="i8254xGBe_8cc.html">i8254xGBe.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
