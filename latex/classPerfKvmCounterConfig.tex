\hypertarget{classPerfKvmCounterConfig}{
\section{クラス PerfKvmCounterConfig}
\label{classPerfKvmCounterConfig}\index{PerfKvmCounterConfig@{PerfKvmCounterConfig}}
}


{\ttfamily \#include $<$perfevent.hh$>$}\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classPerfKvmCounterConfig_a55ed8d9cf8254a7598c16bab27f50737}{PerfKvmCounterConfig} (\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} type, uint64\_\-t config)
\item 
\hyperlink{classPerfKvmCounterConfig_a45c48015a9fef5897588400e50ce2ee3}{$\sim$PerfKvmCounterConfig} ()
\item 
\hyperlink{classPerfKvmCounterConfig}{PerfKvmCounterConfig} \& \hyperlink{classPerfKvmCounterConfig_a21da8ec8646ef482a43c9912690f12db}{samplePeriod} (uint64\_\-t period)
\item 
\hyperlink{classPerfKvmCounterConfig}{PerfKvmCounterConfig} \& \hyperlink{classPerfKvmCounterConfig_a52dc4277819e416e01e710c3fcd0741f}{wakeupEvents} (\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} events)
\item 
\hyperlink{classPerfKvmCounterConfig}{PerfKvmCounterConfig} \& \hyperlink{classPerfKvmCounterConfig_ae9f6708c8ac2d38d1a259442dacf5ef9}{disabled} (bool val)
\item 
\hyperlink{classPerfKvmCounterConfig}{PerfKvmCounterConfig} \& \hyperlink{classPerfKvmCounterConfig_a6ff9b5b670a7713d60a49071544ef39d}{pinned} (bool val)
\item 
\hyperlink{classPerfKvmCounterConfig}{PerfKvmCounterConfig} \& \hyperlink{classPerfKvmCounterConfig_ae28830de9096ce653714c860182aa1ea}{exclude\_\-host} (bool val)
\item 
\hyperlink{classPerfKvmCounterConfig}{PerfKvmCounterConfig} \& \hyperlink{classPerfKvmCounterConfig_a267e4dd365a444393b1ccce9e564f7af}{exclude\_\-hv} (bool val)
\end{DoxyCompactItemize}
\subsection*{Public 変数}
\begin{DoxyCompactItemize}
\item 
struct perf\_\-event\_\-attr \hyperlink{classPerfKvmCounterConfig_aeae272195c5a5879b216cef6c7c909b2}{attr}
\end{DoxyCompactItemize}


\subsection{説明}
PerfEvent counter configuration. 

\subsection{コンストラクタとデストラクタ}
\hypertarget{classPerfKvmCounterConfig_a55ed8d9cf8254a7598c16bab27f50737}{
\index{PerfKvmCounterConfig@{PerfKvmCounterConfig}!PerfKvmCounterConfig@{PerfKvmCounterConfig}}
\index{PerfKvmCounterConfig@{PerfKvmCounterConfig}!PerfKvmCounterConfig@{PerfKvmCounterConfig}}
\subsubsection[{PerfKvmCounterConfig}]{\setlength{\rightskip}{0pt plus 5cm}{\bf PerfKvmCounterConfig} ({\bf uint32\_\-t} {\em type}, \/  uint64\_\-t {\em config})}}
\label{classPerfKvmCounterConfig_a55ed8d9cf8254a7598c16bab27f50737}
Initialize PerfEvent counter configuration structure

PerfEvent has the concept of counter types, which is a way to abstract hardware performance counters or access software events. The type field in the configuration specifies what type of counter this is. For hardware performance counters, it's typically PERF\_\-TYPE\_\-HARDWARE, PERF\_\-TYPE\_\-HW\_\-CACHE, or PERF\_\-TYPE\_\-RAW.

The 'config' field has different meanings depending on the type of counter. Possible values are listed in perf\_\-event.h in the kernel headers. When using raw counters, the value is the raw value written to the performance counter configuration register (some bits dealing with sampling and similar features are usually masked).


\begin{DoxyParams}{引数}
\item[{\em type}]Counter type. \item[{\em config}]Counter configuration \end{DoxyParams}



\begin{DoxyCode}
57 {
58     memset(&attr, 0, sizeof(attr));
59 
60     attr.size = PERF_ATTR_SIZE_VER0;
61     attr.type = type;
62     attr.config = config;
63 }
\end{DoxyCode}
\hypertarget{classPerfKvmCounterConfig_a45c48015a9fef5897588400e50ce2ee3}{
\index{PerfKvmCounterConfig@{PerfKvmCounterConfig}!$\sim$PerfKvmCounterConfig@{$\sim$PerfKvmCounterConfig}}
\index{$\sim$PerfKvmCounterConfig@{$\sim$PerfKvmCounterConfig}!PerfKvmCounterConfig@{PerfKvmCounterConfig}}
\subsubsection[{$\sim$PerfKvmCounterConfig}]{\setlength{\rightskip}{0pt plus 5cm}$\sim${\bf PerfKvmCounterConfig} ()}}
\label{classPerfKvmCounterConfig_a45c48015a9fef5897588400e50ce2ee3}



\begin{DoxyCode}
66 {
67 }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classPerfKvmCounterConfig_ae9f6708c8ac2d38d1a259442dacf5ef9}{
\index{PerfKvmCounterConfig@{PerfKvmCounterConfig}!disabled@{disabled}}
\index{disabled@{disabled}!PerfKvmCounterConfig@{PerfKvmCounterConfig}}
\subsubsection[{disabled}]{\setlength{\rightskip}{0pt plus 5cm}{\bf PerfKvmCounterConfig}\& disabled (bool {\em val})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classPerfKvmCounterConfig_ae9f6708c8ac2d38d1a259442dacf5ef9}
Don't start the performance counter automatically when attaching it.


\begin{DoxyParams}{引数}
\item[{\em val}]true to disable, false to enable the counter \end{DoxyParams}



\begin{DoxyCode}
112                                              {
113         attr.disabled = val;
114         return *this;
115     }
\end{DoxyCode}
\hypertarget{classPerfKvmCounterConfig_ae28830de9096ce653714c860182aa1ea}{
\index{PerfKvmCounterConfig@{PerfKvmCounterConfig}!exclude\_\-host@{exclude\_\-host}}
\index{exclude\_\-host@{exclude\_\-host}!PerfKvmCounterConfig@{PerfKvmCounterConfig}}
\subsubsection[{exclude\_\-host}]{\setlength{\rightskip}{0pt plus 5cm}{\bf PerfKvmCounterConfig}\& exclude\_\-host (bool {\em val})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classPerfKvmCounterConfig_ae28830de9096ce653714c860182aa1ea}
Exclude the events from the host (i.e., only include events from the guest system).

Intel CPUs seem to support this attribute from \hyperlink{classLinux}{Linux} 3.2 and onwards. Non-\/x86 architectures currently ignore this attribute (\hyperlink{classLinux}{Linux} 3.12-\/rc5).

This attribute is ignored if it isn't present in the kernel headers or if the kernel doesn't support it.


\begin{DoxyParams}{引数}
\item[{\em val}]true to exclude host events \end{DoxyParams}



\begin{DoxyCode}
143                                                  {
144 #if HAVE_PERF_ATTR_EXCLUDE_HOST == 1
145         attr.exclude_host = val;
146 #endif
147         return *this;
148     }
\end{DoxyCode}
\hypertarget{classPerfKvmCounterConfig_a267e4dd365a444393b1ccce9e564f7af}{
\index{PerfKvmCounterConfig@{PerfKvmCounterConfig}!exclude\_\-hv@{exclude\_\-hv}}
\index{exclude\_\-hv@{exclude\_\-hv}!PerfKvmCounterConfig@{PerfKvmCounterConfig}}
\subsubsection[{exclude\_\-hv}]{\setlength{\rightskip}{0pt plus 5cm}{\bf PerfKvmCounterConfig}\& exclude\_\-hv (bool {\em val})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classPerfKvmCounterConfig_a267e4dd365a444393b1ccce9e564f7af}
Exclude the hyper visor (i.e., only include events from the guest system).

This is attribute only seems to be ignored on Intel.


\begin{DoxyParams}{引数}
\item[{\em val}]true to exclude host events \end{DoxyParams}



\begin{DoxyCode}
158                                                {
159         attr.exclude_hv = val;
160         return *this;
161     }
\end{DoxyCode}
\hypertarget{classPerfKvmCounterConfig_a6ff9b5b670a7713d60a49071544ef39d}{
\index{PerfKvmCounterConfig@{PerfKvmCounterConfig}!pinned@{pinned}}
\index{pinned@{pinned}!PerfKvmCounterConfig@{PerfKvmCounterConfig}}
\subsubsection[{pinned}]{\setlength{\rightskip}{0pt plus 5cm}{\bf PerfKvmCounterConfig}\& pinned (bool {\em val})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classPerfKvmCounterConfig_a6ff9b5b670a7713d60a49071544ef39d}
Force the group to be on the active all the time (i.e., disallow multiplexing).

Only applies to group leaders.


\begin{DoxyParams}{引数}
\item[{\em val}]true to pin the counter \end{DoxyParams}



\begin{DoxyCode}
125                                            {
126         attr.pinned = val;
127         return *this;
128     }
\end{DoxyCode}
\hypertarget{classPerfKvmCounterConfig_a21da8ec8646ef482a43c9912690f12db}{
\index{PerfKvmCounterConfig@{PerfKvmCounterConfig}!samplePeriod@{samplePeriod}}
\index{samplePeriod@{samplePeriod}!PerfKvmCounterConfig@{PerfKvmCounterConfig}}
\subsubsection[{samplePeriod}]{\setlength{\rightskip}{0pt plus 5cm}{\bf PerfKvmCounterConfig}\& samplePeriod (uint64\_\-t {\em period})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classPerfKvmCounterConfig_a21da8ec8646ef482a43c9912690f12db}
\hyperlink{classSet}{Set} the initial sample period (overflow count) of an event. If this is set to 0, the event acts as a normal counting event and does not trigger overflows.


\begin{DoxyParams}{引数}
\item[{\em period}]Number of counter events before the counter overflows \end{DoxyParams}



\begin{DoxyCode}
87                                                         {
88         attr.freq = 0;
89         attr.sample_period = period;
90         return *this;
91     }
\end{DoxyCode}
\hypertarget{classPerfKvmCounterConfig_a52dc4277819e416e01e710c3fcd0741f}{
\index{PerfKvmCounterConfig@{PerfKvmCounterConfig}!wakeupEvents@{wakeupEvents}}
\index{wakeupEvents@{wakeupEvents}!PerfKvmCounterConfig@{PerfKvmCounterConfig}}
\subsubsection[{wakeupEvents}]{\setlength{\rightskip}{0pt plus 5cm}{\bf PerfKvmCounterConfig}\& wakeupEvents ({\bf uint32\_\-t} {\em events})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classPerfKvmCounterConfig_a52dc4277819e416e01e710c3fcd0741f}
\hyperlink{classSet}{Set} the number of samples that need to be triggered before reporting data as being available on the perf event FD. Defaults to 0, which disables overflow reporting.


\begin{DoxyParams}{引数}
\item[{\em events}]Number of overflows before signaling a wake up \end{DoxyParams}



\begin{DoxyCode}
100                                                         {
101         attr.watermark = 0;
102         attr.wakeup_events = events;
103         return *this;
104     }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classPerfKvmCounterConfig_aeae272195c5a5879b216cef6c7c909b2}{
\index{PerfKvmCounterConfig@{PerfKvmCounterConfig}!attr@{attr}}
\index{attr@{attr}!PerfKvmCounterConfig@{PerfKvmCounterConfig}}
\subsubsection[{attr}]{\setlength{\rightskip}{0pt plus 5cm}struct perf\_\-event\_\-attr {\bf attr}\hspace{0.3cm}{\ttfamily  \mbox{[}read\mbox{]}}}}
\label{classPerfKvmCounterConfig_aeae272195c5a5879b216cef6c7c909b2}
Underlying perf\_\-event\_\-attr structure describing the counter 

このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
cpu/kvm/\hyperlink{perfevent_8hh}{perfevent.hh}\item 
cpu/kvm/\hyperlink{perfevent_8cc}{perfevent.cc}\end{DoxyCompactItemize}
