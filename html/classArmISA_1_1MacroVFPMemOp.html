<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス MacroVFPMemOp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespaceArmISA.html">ArmISA</a>::<a class="el" href="classArmISA_1_1MacroVFPMemOp.html">MacroVFPMemOp</a>
  </div>
</div>
<div class="contents">
<h1>クラス MacroVFPMemOp</h1><!-- doxytag: class="ArmISA::MacroVFPMemOp" --><!-- doxytag: inherits="ArmISA::PredMacroOp" -->
<p><code>#include &lt;<a class="el" href="macromem_8hh_source.html">macromem.hh</a>&gt;</code></p>
<div class="dynheader">
MacroVFPMemOpに対する継承グラフ</div>
<div class="dynsection">
 <div class="center">
  <img src="classArmISA_1_1MacroVFPMemOp.gif" usemap="#MacroVFPMemOp_map" alt=""/>
  <map id="MacroVFPMemOp_map" name="MacroVFPMemOp_map">
<area href="classArmISA_1_1PredMacroOp.html" alt="PredMacroOp" shape="rect" coords="0,224,118,248"/>
<area href="classArmISA_1_1PredOp.html" alt="PredOp" shape="rect" coords="0,168,118,192"/>
<area href="classArmISA_1_1ArmStaticInst.html" alt="ArmStaticInst" shape="rect" coords="0,112,118,136"/>
<area href="classStaticInst.html" alt="StaticInst" shape="rect" coords="0,56,118,80"/>
<area href="classRefCounted.html" alt="RefCounted" shape="rect" coords="0,0,118,24"/>
</map>
 </div>
</div>

<p><a href="classArmISA_1_1MacroVFPMemOp-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Protected メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArmISA_1_1MacroVFPMemOp.html#ac86efcec990c72ecd0ea1044552863f9">MacroVFPMemOp</a> (const char *mnem, <a class="el" href="classStaticInst.html#a5605d4fc727eae9e595325c90c0ec108">ExtMachInst</a> <a class="el" href="classStaticInst.html#a744598b194ca3d4201d9414ce4cc4af4">machInst</a>, OpClass __opClass, <a class="el" href="namespaceArmISA.html#ae64680ba9fb526106829d6bf92fc791b">IntRegIndex</a> <a class="el" href="namespaceArmISA.html#adf8c6c579ad8729095a637a4f2181211">rn</a>, <a class="el" href="classStaticInst.html#a36d25e03e43fa3bb4c5482cbefe5e0fb">RegIndex</a> vd, bool single, bool <a class="el" href="namespaceArmISA.html#a3a82fdc0669ddcc0c196b1ac0220c55a">up</a>, bool <a class="el" href="namespaceArmISA.html#a8143fa40e9030da2e8b93ba9990a7bb1">writeback</a>, bool load, <a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="namespaceArmISA.html#a87b7a740701cddafb930a9460e9f4eba">offset</a>)</td></tr>
</table>
<hr/><a name="_details"></a><h2>説明</h2>
<p>Base class for microcoded floating point memory instructions. </p>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="ac86efcec990c72ecd0ea1044552863f9"></a><!-- doxytag: member="ArmISA::MacroVFPMemOp::MacroVFPMemOp" ref="ac86efcec990c72ecd0ea1044552863f9" args="(const char *mnem, ExtMachInst machInst, OpClass __opClass, IntRegIndex rn, RegIndex vd, bool single, bool up, bool writeback, bool load, uint32_t offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classArmISA_1_1MacroVFPMemOp.html">MacroVFPMemOp</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>mnem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classStaticInst.html#a5605d4fc727eae9e595325c90c0ec108">ExtMachInst</a>&nbsp;</td>
          <td class="paramname"> <em>machInst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OpClass&nbsp;</td>
          <td class="paramname"> <em>__opClass</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceArmISA.html#ae64680ba9fb526106829d6bf92fc791b">IntRegIndex</a>&nbsp;</td>
          <td class="paramname"> <em>rn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classStaticInst.html#a36d25e03e43fa3bb4c5482cbefe5e0fb">RegIndex</a>&nbsp;</td>
          <td class="paramname"> <em>vd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>single</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>up</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>writeback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>load</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>offset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l01337"></a>01337                                                                          :
<a name="l01338"></a>01338     <a class="code" href="classArmISA_1_1PredMacroOp.html#a4d1de434734e67db31db5b479940c0cc" title="Constructor.">PredMacroOp</a>(mnem, <a class="code" href="classStaticInst.html#a744598b194ca3d4201d9414ce4cc4af4" title="The binary machine instruction.">machInst</a>, __opClass)
<a name="l01339"></a>01339 {
<a name="l01340"></a>01340     <span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0;
<a name="l01341"></a>01341 
<a name="l01342"></a>01342     <span class="comment">// The lowest order bit selects fldmx (set) or fldmd (clear). These seem</span>
<a name="l01343"></a>01343     <span class="comment">// to be functionally identical except that fldmx is deprecated. For now</span>
<a name="l01344"></a>01344     <span class="comment">// we&apos;ll assume they&apos;re otherwise interchangable.</span>
<a name="l01345"></a>01345     <span class="keywordtype">int</span> <a class="code" href="classRefCounted.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a> = (single ? <a class="code" href="namespaceArmISA.html#a87b7a740701cddafb930a9460e9f4eba">offset</a> : (<a class="code" href="namespaceArmISA.html#a87b7a740701cddafb930a9460e9f4eba">offset</a> / 2));
<a name="l01346"></a>01346     <span class="keywordflow">if</span> (count == 0 || count &gt; <a class="code" href="namespaceArmISA.html#ac5bd0125daa93dac8dfda6a9fcd0fdf7">NumFloatV7ArchRegs</a>)
<a name="l01347"></a>01347         <a class="code" href="base_2misc_8hh.html#abb243c15dfbeedf4ae64aa213f4f18c7">warn_once</a>(<span class="stringliteral">&quot;Bad offset field for VFP load/store multiple.\n&quot;</span>);
<a name="l01348"></a>01348     <span class="keywordflow">if</span> (count == 0) {
<a name="l01349"></a>01349         <span class="comment">// Force there to be at least one microop so the macroop makes sense.</span>
<a name="l01350"></a>01350         <a class="code" href="namespaceArmISA.html#a8143fa40e9030da2e8b93ba9990a7bb1">writeback</a> = <span class="keyword">true</span>;
<a name="l01351"></a>01351     }
<a name="l01352"></a>01352     <span class="keywordflow">if</span> (count &gt; <a class="code" href="namespaceArmISA.html#ac5bd0125daa93dac8dfda6a9fcd0fdf7">NumFloatV7ArchRegs</a>)
<a name="l01353"></a>01353         count = <a class="code" href="namespaceArmISA.html#ac5bd0125daa93dac8dfda6a9fcd0fdf7">NumFloatV7ArchRegs</a>;
<a name="l01354"></a>01354 
<a name="l01355"></a>01355     <a class="code" href="classArmISA_1_1PredMacroOp.html#a19b588f64e88c4ef1ef5fd836415e6f5">numMicroops</a> = count * (single ? 1 : 2) + (<a class="code" href="namespaceArmISA.html#a8143fa40e9030da2e8b93ba9990a7bb1">writeback</a> ? 1 : 0);
<a name="l01356"></a>01356     <a class="code" href="classArmISA_1_1PredMacroOp.html#a824cafc0dae7c0bbc33402c635074879">microOps</a> = <span class="keyword">new</span> <a class="code" href="classRefCountingPtr.html">StaticInstPtr</a>[<a class="code" href="classArmISA_1_1PredMacroOp.html#a19b588f64e88c4ef1ef5fd836415e6f5">numMicroops</a>];
<a name="l01357"></a>01357 
<a name="l01358"></a>01358     int64_t <a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a> = 0;
<a name="l01359"></a>01359 
<a name="l01360"></a>01360     <span class="keywordflow">if</span> (!<a class="code" href="namespaceArmISA.html#a3a82fdc0669ddcc0c196b1ac0220c55a">up</a>)
<a name="l01361"></a>01361         addr = 4 * <a class="code" href="namespaceArmISA.html#a87b7a740701cddafb930a9460e9f4eba">offset</a>;
<a name="l01362"></a>01362 
<a name="l01363"></a>01363     <span class="keywordtype">bool</span> tempUp = <a class="code" href="namespaceArmISA.html#a3a82fdc0669ddcc0c196b1ac0220c55a">up</a>;
<a name="l01364"></a>01364     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#adda8322536e2853111a71e4e2f911762">j</a> = 0; <a class="code" href="namespaceArmISA.html#adda8322536e2853111a71e4e2f911762">j</a> &lt; count; <a class="code" href="namespaceArmISA.html#adda8322536e2853111a71e4e2f911762">j</a>++) {
<a name="l01365"></a>01365         <span class="keywordflow">if</span> (load) {
<a name="l01366"></a>01366             <span class="keywordflow">if</span> (single) {
<a name="l01367"></a>01367                 <a class="code" href="classArmISA_1_1PredMacroOp.html#a824cafc0dae7c0bbc33402c635074879">microOps</a>[i++] = <span class="keyword">new</span> MicroLdrFpUop(<a class="code" href="classStaticInst.html#a744598b194ca3d4201d9414ce4cc4af4" title="The binary machine instruction.">machInst</a>, vd++, <a class="code" href="namespaceArmISA.html#adf8c6c579ad8729095a637a4f2181211">rn</a>,
<a name="l01368"></a>01368                                                   tempUp, addr);
<a name="l01369"></a>01369             } <span class="keywordflow">else</span> {
<a name="l01370"></a>01370                 <a class="code" href="classArmISA_1_1PredMacroOp.html#a824cafc0dae7c0bbc33402c635074879">microOps</a>[i++] = <span class="keyword">new</span> MicroLdrDBFpUop(<a class="code" href="classStaticInst.html#a744598b194ca3d4201d9414ce4cc4af4" title="The binary machine instruction.">machInst</a>, vd++, <a class="code" href="namespaceArmISA.html#adf8c6c579ad8729095a637a4f2181211">rn</a>,
<a name="l01371"></a>01371                                                     tempUp, addr);
<a name="l01372"></a>01372                 <a class="code" href="classArmISA_1_1PredMacroOp.html#a824cafc0dae7c0bbc33402c635074879">microOps</a>[i++] = <span class="keyword">new</span> MicroLdrDTFpUop(<a class="code" href="classStaticInst.html#a744598b194ca3d4201d9414ce4cc4af4" title="The binary machine instruction.">machInst</a>, vd++, <a class="code" href="namespaceArmISA.html#adf8c6c579ad8729095a637a4f2181211">rn</a>, tempUp,
<a name="l01373"></a>01373                                                     addr + (<a class="code" href="namespaceArmISA.html#a3a82fdc0669ddcc0c196b1ac0220c55a">up</a> ? 4 : -4));
<a name="l01374"></a>01374             }
<a name="l01375"></a>01375         } <span class="keywordflow">else</span> {
<a name="l01376"></a>01376             <span class="keywordflow">if</span> (single) {
<a name="l01377"></a>01377                 <a class="code" href="classArmISA_1_1PredMacroOp.html#a824cafc0dae7c0bbc33402c635074879">microOps</a>[i++] = <span class="keyword">new</span> MicroStrFpUop(<a class="code" href="classStaticInst.html#a744598b194ca3d4201d9414ce4cc4af4" title="The binary machine instruction.">machInst</a>, vd++, <a class="code" href="namespaceArmISA.html#adf8c6c579ad8729095a637a4f2181211">rn</a>,
<a name="l01378"></a>01378                                                   tempUp, addr);
<a name="l01379"></a>01379             } <span class="keywordflow">else</span> {
<a name="l01380"></a>01380                 <a class="code" href="classArmISA_1_1PredMacroOp.html#a824cafc0dae7c0bbc33402c635074879">microOps</a>[i++] = <span class="keyword">new</span> MicroStrDBFpUop(<a class="code" href="classStaticInst.html#a744598b194ca3d4201d9414ce4cc4af4" title="The binary machine instruction.">machInst</a>, vd++, <a class="code" href="namespaceArmISA.html#adf8c6c579ad8729095a637a4f2181211">rn</a>,
<a name="l01381"></a>01381                                                     tempUp, addr);
<a name="l01382"></a>01382                 <a class="code" href="classArmISA_1_1PredMacroOp.html#a824cafc0dae7c0bbc33402c635074879">microOps</a>[i++] = <span class="keyword">new</span> MicroStrDTFpUop(<a class="code" href="classStaticInst.html#a744598b194ca3d4201d9414ce4cc4af4" title="The binary machine instruction.">machInst</a>, vd++, <a class="code" href="namespaceArmISA.html#adf8c6c579ad8729095a637a4f2181211">rn</a>, tempUp,
<a name="l01383"></a>01383                                                     addr + (<a class="code" href="namespaceArmISA.html#a3a82fdc0669ddcc0c196b1ac0220c55a">up</a> ? 4 : -4));
<a name="l01384"></a>01384             }
<a name="l01385"></a>01385         }
<a name="l01386"></a>01386         <span class="keywordflow">if</span> (!tempUp) {
<a name="l01387"></a>01387             addr -= (single ? 4 : 8);
<a name="l01388"></a>01388             <span class="comment">// The microops don&apos;t handle negative displacement, so turn if we</span>
<a name="l01389"></a>01389             <span class="comment">// hit zero, flip polarity and start adding.</span>
<a name="l01390"></a>01390             <span class="keywordflow">if</span> (addr &lt;= 0) {
<a name="l01391"></a>01391                 tempUp = <span class="keyword">true</span>;
<a name="l01392"></a>01392                 addr = -addr;
<a name="l01393"></a>01393             }
<a name="l01394"></a>01394         } <span class="keywordflow">else</span> {
<a name="l01395"></a>01395             addr += (single ? 4 : 8);
<a name="l01396"></a>01396         }
<a name="l01397"></a>01397     }
<a name="l01398"></a>01398 
<a name="l01399"></a>01399     <span class="keywordflow">if</span> (<a class="code" href="namespaceArmISA.html#a8143fa40e9030da2e8b93ba9990a7bb1">writeback</a>) {
<a name="l01400"></a>01400         <span class="keywordflow">if</span> (<a class="code" href="namespaceArmISA.html#a3a82fdc0669ddcc0c196b1ac0220c55a">up</a>) {
<a name="l01401"></a>01401             <a class="code" href="classArmISA_1_1PredMacroOp.html#a824cafc0dae7c0bbc33402c635074879">microOps</a>[i++] =
<a name="l01402"></a>01402                 <span class="keyword">new</span> MicroAddiUop(<a class="code" href="classStaticInst.html#a744598b194ca3d4201d9414ce4cc4af4" title="The binary machine instruction.">machInst</a>, <a class="code" href="namespaceArmISA.html#adf8c6c579ad8729095a637a4f2181211">rn</a>, <a class="code" href="namespaceArmISA.html#adf8c6c579ad8729095a637a4f2181211">rn</a>, 4 * <a class="code" href="namespaceArmISA.html#a87b7a740701cddafb930a9460e9f4eba">offset</a>);
<a name="l01403"></a>01403         } <span class="keywordflow">else</span> {
<a name="l01404"></a>01404             <a class="code" href="classArmISA_1_1PredMacroOp.html#a824cafc0dae7c0bbc33402c635074879">microOps</a>[i++] =
<a name="l01405"></a>01405                 <span class="keyword">new</span> MicroSubiUop(<a class="code" href="classStaticInst.html#a744598b194ca3d4201d9414ce4cc4af4" title="The binary machine instruction.">machInst</a>, <a class="code" href="namespaceArmISA.html#adf8c6c579ad8729095a637a4f2181211">rn</a>, <a class="code" href="namespaceArmISA.html#adf8c6c579ad8729095a637a4f2181211">rn</a>, 4 * <a class="code" href="namespaceArmISA.html#a87b7a740701cddafb930a9460e9f4eba">offset</a>);
<a name="l01406"></a>01406         }
<a name="l01407"></a>01407     }
<a name="l01408"></a>01408 
<a name="l01409"></a>01409     assert(<a class="code" href="classArmISA_1_1PredMacroOp.html#a19b588f64e88c4ef1ef5fd836415e6f5">numMicroops</a> == i);
<a name="l01410"></a>01410     <a class="code" href="classArmISA_1_1PredMacroOp.html#a824cafc0dae7c0bbc33402c635074879">microOps</a>[<a class="code" href="classArmISA_1_1PredMacroOp.html#a19b588f64e88c4ef1ef5fd836415e6f5">numMicroops</a> - 1]-&gt;setLastMicroop();
<a name="l01411"></a>01411 
<a name="l01412"></a>01412     <span class="keywordflow">for</span> (<a class="code" href="classRefCountingPtr.html">StaticInstPtr</a> *curUop = <a class="code" href="classArmISA_1_1PredMacroOp.html#a824cafc0dae7c0bbc33402c635074879">microOps</a>;
<a name="l01413"></a>01413             !(*curUop)-&gt;isLastMicroop(); curUop++) {
<a name="l01414"></a>01414         <a class="code" href="classArmISA_1_1MicroOp.html">MicroOp</a> * uopPtr = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classArmISA_1_1MicroOp.html">MicroOp</a> *<span class="keyword">&gt;</span>(curUop-&gt;get());
<a name="l01415"></a>01415         assert(uopPtr);
<a name="l01416"></a>01416         uopPtr-&gt;<a class="code" href="classStaticInst.html#a962e50e6bada636e2fee41feb5650da8">setDelayedCommit</a>();
<a name="l01417"></a>01417     }
<a name="l01418"></a>01418 }

</pre></div></p>

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>arch/arm/insts/<a class="el" href="macromem_8hh_source.html">macromem.hh</a></li>
<li>arch/arm/insts/<a class="el" href="macromem_8cc.html">macromem.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
