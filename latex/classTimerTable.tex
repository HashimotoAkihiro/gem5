\hypertarget{classTimerTable}{
\section{クラス TimerTable}
\label{classTimerTable}\index{TimerTable@{TimerTable}}
}


{\ttfamily \#include $<$TimerTable.hh$>$}\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classTimerTable_a962081e7b878ea1c7019cc69a78dc8f2}{TimerTable} ()
\item 
void \hyperlink{classTimerTable_a8487c37680239f103e21ada9acf1726d}{setConsumer} (\hyperlink{classConsumer}{Consumer} $\ast$consumer\_\-ptr)
\item 
void \hyperlink{classTimerTable_abc72aeeb43ac97f6a2e2a003f050bb06}{setClockObj} (\hyperlink{classClockedObject}{ClockedObject} $\ast$obj)
\item 
void \hyperlink{classTimerTable_a9cdbe64eebafb111a124edec55ed2340}{setDescription} (const std::string \&name)
\item 
bool \hyperlink{classTimerTable_ac12eec09d47a89a1ddf3eb6bb19b5bd3}{isReady} () const 
\item 
const \hyperlink{classAddress}{Address} \& \hyperlink{classTimerTable_af365d2a04bb754f7422868d41432909a}{readyAddress} () const 
\item 
bool \hyperlink{classTimerTable_af88cb5939b3467b1d758aef5ec470283}{isSet} (const \hyperlink{classAddress}{Address} \&address) const 
\item 
void \hyperlink{classTimerTable_a7e2c839d59092594ac3fd757ae2f617c}{set} (const \hyperlink{classAddress}{Address} \&address, \hyperlink{classCycles}{Cycles} relative\_\-latency)
\item 
void \hyperlink{classTimerTable_ada47cc37e5c46401dbac71cf3972a211}{set} (const \hyperlink{classAddress}{Address} \&address, uint64\_\-t relative\_\-latency)
\item 
void \hyperlink{classTimerTable_ac54af1e5e959f0027f639c741609ab0a}{unset} (const \hyperlink{classAddress}{Address} \&address)
\item 
void \hyperlink{classTimerTable_ac55fe386a101fbae38c716067c9966a0}{print} (std::ostream \&out) const 
\end{DoxyCompactItemize}
\subsection*{Private 型}
\begin{DoxyCompactItemize}
\item 
typedef std::map$<$ \hyperlink{classAddress}{Address}, \hyperlink{classCycles}{Cycles} $>$ \hyperlink{classTimerTable_aafe31722aec34a121c4566b713a7a5e8}{AddressMap}
\end{DoxyCompactItemize}
\subsection*{Private メソッド}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classTimerTable_a05f4fd90d099c5d73fa5132cc4c998fc}{updateNext} () const 
\item 
\hyperlink{classTimerTable_a9764098760fd28d90c29721b03c37840}{TimerTable} (const \hyperlink{classTimerTable}{TimerTable} \&obj)
\item 
\hyperlink{classTimerTable}{TimerTable} \& \hyperlink{classTimerTable_a569facea7e509f7f50d1ae82527db0d2}{operator=} (const \hyperlink{classTimerTable}{TimerTable} \&obj)
\end{DoxyCompactItemize}
\subsection*{Private 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classTimerTable_aafe31722aec34a121c4566b713a7a5e8}{AddressMap} \hyperlink{classTimerTable_a81aeb6fef4ddb55c4abc1662d977def1}{m\_\-map}
\item 
bool \hyperlink{classTimerTable_accdda4364ff7ccbe605fa69671ad24d1}{m\_\-next\_\-valid}
\item 
\hyperlink{classCycles}{Cycles} \hyperlink{classTimerTable_ab2e7bdd220d0b6072674d78ef9974963}{m\_\-next\_\-time}
\item 
\hyperlink{classAddress}{Address} \hyperlink{classTimerTable_af70be644429943a989c4c0776289059f}{m\_\-next\_\-address}
\item 
\hyperlink{classClockedObject}{ClockedObject} $\ast$ \hyperlink{classTimerTable_a7e1899f4b71f54a1b3d6813b09c78e48}{m\_\-clockobj\_\-ptr}
\begin{DoxyCompactList}\small\item\em Object used for querying time. \item\end{DoxyCompactList}\item 
\hyperlink{classConsumer}{Consumer} $\ast$ \hyperlink{classTimerTable_a83dd1dc8eef330b0c0d184a4167b26b4}{m\_\-consumer\_\-ptr}
\begin{DoxyCompactList}\small\item\em \hyperlink{classConsumer}{Consumer} to signal a wakeup(). \item\end{DoxyCompactList}\item 
std::string \hyperlink{classTimerTable_adb41893ba19e889e56c559f25fc1a68a}{m\_\-name}
\end{DoxyCompactItemize}


\subsection{型定義}
\hypertarget{classTimerTable_aafe31722aec34a121c4566b713a7a5e8}{
\index{TimerTable@{TimerTable}!AddressMap@{AddressMap}}
\index{AddressMap@{AddressMap}!TimerTable@{TimerTable}}
\subsubsection[{AddressMap}]{\setlength{\rightskip}{0pt plus 5cm}typedef std::map$<${\bf Address}, {\bf Cycles}$>$ {\bf AddressMap}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classTimerTable_aafe31722aec34a121c4566b713a7a5e8}


\subsection{コンストラクタとデストラクタ}
\hypertarget{classTimerTable_a962081e7b878ea1c7019cc69a78dc8f2}{
\index{TimerTable@{TimerTable}!TimerTable@{TimerTable}}
\index{TimerTable@{TimerTable}!TimerTable@{TimerTable}}
\subsubsection[{TimerTable}]{\setlength{\rightskip}{0pt plus 5cm}{\bf TimerTable} ()}}
\label{classTimerTable_a962081e7b878ea1c7019cc69a78dc8f2}



\begin{DoxyCode}
34     : m_next_time(0)
35 {
36     m_consumer_ptr  = NULL;
37     m_clockobj_ptr = NULL;
38 
39     m_next_valid = false;
40     m_next_address = Address(0);
41 }
\end{DoxyCode}
\hypertarget{classTimerTable_a9764098760fd28d90c29721b03c37840}{
\index{TimerTable@{TimerTable}!TimerTable@{TimerTable}}
\index{TimerTable@{TimerTable}!TimerTable@{TimerTable}}
\subsubsection[{TimerTable}]{\setlength{\rightskip}{0pt plus 5cm}{\bf TimerTable} (const {\bf TimerTable} \& {\em obj})\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classTimerTable_a9764098760fd28d90c29721b03c37840}


\subsection{関数}
\hypertarget{classTimerTable_ac12eec09d47a89a1ddf3eb6bb19b5bd3}{
\index{TimerTable@{TimerTable}!isReady@{isReady}}
\index{isReady@{isReady}!TimerTable@{TimerTable}}
\subsubsection[{isReady}]{\setlength{\rightskip}{0pt plus 5cm}bool isReady () const}}
\label{classTimerTable_ac12eec09d47a89a1ddf3eb6bb19b5bd3}



\begin{DoxyCode}
45 {
46     if (m_map.empty())
47         return false;
48 
49     if (!m_next_valid) {
50         updateNext();
51     }
52     assert(m_next_valid);
53     return (m_clockobj_ptr->curCycle() >= m_next_time);
54 }
\end{DoxyCode}
\hypertarget{classTimerTable_af88cb5939b3467b1d758aef5ec470283}{
\index{TimerTable@{TimerTable}!isSet@{isSet}}
\index{isSet@{isSet}!TimerTable@{TimerTable}}
\subsubsection[{isSet}]{\setlength{\rightskip}{0pt plus 5cm}bool isSet (const {\bf Address} \& {\em address}) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classTimerTable_af88cb5939b3467b1d758aef5ec470283}



\begin{DoxyCode}
66 { return !!m_map.count(address); }
\end{DoxyCode}
\hypertarget{classTimerTable_a569facea7e509f7f50d1ae82527db0d2}{
\index{TimerTable@{TimerTable}!operator=@{operator=}}
\index{operator=@{operator=}!TimerTable@{TimerTable}}
\subsubsection[{operator=}]{\setlength{\rightskip}{0pt plus 5cm}{\bf TimerTable}\& operator= (const {\bf TimerTable} \& {\em obj})\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classTimerTable_a569facea7e509f7f50d1ae82527db0d2}
\hypertarget{classTimerTable_ac55fe386a101fbae38c716067c9966a0}{
\index{TimerTable@{TimerTable}!print@{print}}
\index{print@{print}!TimerTable@{TimerTable}}
\subsubsection[{print}]{\setlength{\rightskip}{0pt plus 5cm}void print (std::ostream \& {\em out}) const}}
\label{classTimerTable_ac55fe386a101fbae38c716067c9966a0}



\begin{DoxyCode}
103 {
104 }
\end{DoxyCode}
\hypertarget{classTimerTable_af365d2a04bb754f7422868d41432909a}{
\index{TimerTable@{TimerTable}!readyAddress@{readyAddress}}
\index{readyAddress@{readyAddress}!TimerTable@{TimerTable}}
\subsubsection[{readyAddress}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Address} \& readyAddress () const}}
\label{classTimerTable_af365d2a04bb754f7422868d41432909a}



\begin{DoxyCode}
58 {
59     assert(isReady());
60 
61     if (!m_next_valid) {
62         updateNext();
63     }
64     assert(m_next_valid);
65     return m_next_address;
66 }
\end{DoxyCode}
\hypertarget{classTimerTable_ada47cc37e5c46401dbac71cf3972a211}{
\index{TimerTable@{TimerTable}!set@{set}}
\index{set@{set}!TimerTable@{TimerTable}}
\subsubsection[{set}]{\setlength{\rightskip}{0pt plus 5cm}void set (const {\bf Address} \& {\em address}, \/  uint64\_\-t {\em relative\_\-latency})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classTimerTable_ada47cc37e5c46401dbac71cf3972a211}



\begin{DoxyCode}
69     { set(address, Cycles(relative_latency)); }
\end{DoxyCode}
\hypertarget{classTimerTable_a7e2c839d59092594ac3fd757ae2f617c}{
\index{TimerTable@{TimerTable}!set@{set}}
\index{set@{set}!TimerTable@{TimerTable}}
\subsubsection[{set}]{\setlength{\rightskip}{0pt plus 5cm}void set (const {\bf Address} \& {\em address}, \/  {\bf Cycles} {\em relative\_\-latency})}}
\label{classTimerTable_a7e2c839d59092594ac3fd757ae2f617c}



\begin{DoxyCode}
70 {
71     assert(address == line_address(address));
72     assert(relative_latency > 0);
73     assert(!m_map.count(address));
74 
75     Cycles ready_time = m_clockobj_ptr->curCycle() + relative_latency;
76     m_map[address] = ready_time;
77     assert(m_consumer_ptr != NULL);
78     m_consumer_ptr->
79         scheduleEventAbsolute(m_clockobj_ptr->clockPeriod() * ready_time);
80     m_next_valid = false;
81 
82     // Don't always recalculate the next ready address
83     if (ready_time <= m_next_time) {
84         m_next_valid = false;
85     }
86 }
\end{DoxyCode}
\hypertarget{classTimerTable_abc72aeeb43ac97f6a2e2a003f050bb06}{
\index{TimerTable@{TimerTable}!setClockObj@{setClockObj}}
\index{setClockObj@{setClockObj}!TimerTable@{TimerTable}}
\subsubsection[{setClockObj}]{\setlength{\rightskip}{0pt plus 5cm}void setClockObj ({\bf ClockedObject} $\ast$ {\em obj})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classTimerTable_abc72aeeb43ac97f6a2e2a003f050bb06}



\begin{DoxyCode}
53     {
54         assert(m_clockobj_ptr == NULL);
55         m_clockobj_ptr = obj;
56     }
\end{DoxyCode}
\hypertarget{classTimerTable_a8487c37680239f103e21ada9acf1726d}{
\index{TimerTable@{TimerTable}!setConsumer@{setConsumer}}
\index{setConsumer@{setConsumer}!TimerTable@{TimerTable}}
\subsubsection[{setConsumer}]{\setlength{\rightskip}{0pt plus 5cm}void setConsumer ({\bf Consumer} $\ast$ {\em consumer\_\-ptr})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classTimerTable_a8487c37680239f103e21ada9acf1726d}



\begin{DoxyCode}
47     {
48         assert(m_consumer_ptr == NULL);
49         m_consumer_ptr = consumer_ptr;
50     }
\end{DoxyCode}
\hypertarget{classTimerTable_a9cdbe64eebafb111a124edec55ed2340}{
\index{TimerTable@{TimerTable}!setDescription@{setDescription}}
\index{setDescription@{setDescription}!TimerTable@{TimerTable}}
\subsubsection[{setDescription}]{\setlength{\rightskip}{0pt plus 5cm}void setDescription (const std::string \& {\em name})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classTimerTable_a9cdbe64eebafb111a124edec55ed2340}



\begin{DoxyCode}
60     {
61         m_name = name;
62     }
\end{DoxyCode}
\hypertarget{classTimerTable_ac54af1e5e959f0027f639c741609ab0a}{
\index{TimerTable@{TimerTable}!unset@{unset}}
\index{unset@{unset}!TimerTable@{TimerTable}}
\subsubsection[{unset}]{\setlength{\rightskip}{0pt plus 5cm}void unset (const {\bf Address} \& {\em address})}}
\label{classTimerTable_ac54af1e5e959f0027f639c741609ab0a}



\begin{DoxyCode}
90 {
91     assert(address == line_address(address));
92     assert(m_map.count(address));
93     m_map.erase(address);
94 
95     // Don't always recalculate the next ready address
96     if (address == m_next_address) {
97         m_next_valid = false;
98     }
99 }
\end{DoxyCode}
\hypertarget{classTimerTable_a05f4fd90d099c5d73fa5132cc4c998fc}{
\index{TimerTable@{TimerTable}!updateNext@{updateNext}}
\index{updateNext@{updateNext}!TimerTable@{TimerTable}}
\subsubsection[{updateNext}]{\setlength{\rightskip}{0pt plus 5cm}void updateNext () const\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classTimerTable_a05f4fd90d099c5d73fa5132cc4c998fc}



\begin{DoxyCode}
108 {
109     if (m_map.empty()) {
110         assert(!m_next_valid);
111         return;
112     }
113 
114     AddressMap::const_iterator i = m_map.begin();
115     AddressMap::const_iterator end = m_map.end();
116 
117     m_next_address = i->first;
118     m_next_time = i->second;
119     ++i;
120 
121     for (; i != end; ++i) {
122         if (i->second < m_next_time) {
123             m_next_address = i->first;
124             m_next_time = i->second;
125         }
126     }
127 
128     m_next_valid = true;
129 }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classTimerTable_a7e1899f4b71f54a1b3d6813b09c78e48}{
\index{TimerTable@{TimerTable}!m\_\-clockobj\_\-ptr@{m\_\-clockobj\_\-ptr}}
\index{m\_\-clockobj\_\-ptr@{m\_\-clockobj\_\-ptr}!TimerTable@{TimerTable}}
\subsubsection[{m\_\-clockobj\_\-ptr}]{\setlength{\rightskip}{0pt plus 5cm}{\bf ClockedObject}$\ast$ {\bf m\_\-clockobj\_\-ptr}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classTimerTable_a7e1899f4b71f54a1b3d6813b09c78e48}


Object used for querying time. \hypertarget{classTimerTable_a83dd1dc8eef330b0c0d184a4167b26b4}{
\index{TimerTable@{TimerTable}!m\_\-consumer\_\-ptr@{m\_\-consumer\_\-ptr}}
\index{m\_\-consumer\_\-ptr@{m\_\-consumer\_\-ptr}!TimerTable@{TimerTable}}
\subsubsection[{m\_\-consumer\_\-ptr}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Consumer}$\ast$ {\bf m\_\-consumer\_\-ptr}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classTimerTable_a83dd1dc8eef330b0c0d184a4167b26b4}


\hyperlink{classConsumer}{Consumer} to signal a wakeup(). \hypertarget{classTimerTable_a81aeb6fef4ddb55c4abc1662d977def1}{
\index{TimerTable@{TimerTable}!m\_\-map@{m\_\-map}}
\index{m\_\-map@{m\_\-map}!TimerTable@{TimerTable}}
\subsubsection[{m\_\-map}]{\setlength{\rightskip}{0pt plus 5cm}{\bf AddressMap} {\bf m\_\-map}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classTimerTable_a81aeb6fef4ddb55c4abc1662d977def1}
\hypertarget{classTimerTable_adb41893ba19e889e56c559f25fc1a68a}{
\index{TimerTable@{TimerTable}!m\_\-name@{m\_\-name}}
\index{m\_\-name@{m\_\-name}!TimerTable@{TimerTable}}
\subsubsection[{m\_\-name}]{\setlength{\rightskip}{0pt plus 5cm}std::string {\bf m\_\-name}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classTimerTable_adb41893ba19e889e56c559f25fc1a68a}
\hypertarget{classTimerTable_af70be644429943a989c4c0776289059f}{
\index{TimerTable@{TimerTable}!m\_\-next\_\-address@{m\_\-next\_\-address}}
\index{m\_\-next\_\-address@{m\_\-next\_\-address}!TimerTable@{TimerTable}}
\subsubsection[{m\_\-next\_\-address}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Address} {\bf m\_\-next\_\-address}\hspace{0.3cm}{\ttfamily  \mbox{[}mutable, private\mbox{]}}}}
\label{classTimerTable_af70be644429943a989c4c0776289059f}
\hypertarget{classTimerTable_ab2e7bdd220d0b6072674d78ef9974963}{
\index{TimerTable@{TimerTable}!m\_\-next\_\-time@{m\_\-next\_\-time}}
\index{m\_\-next\_\-time@{m\_\-next\_\-time}!TimerTable@{TimerTable}}
\subsubsection[{m\_\-next\_\-time}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Cycles} {\bf m\_\-next\_\-time}\hspace{0.3cm}{\ttfamily  \mbox{[}mutable, private\mbox{]}}}}
\label{classTimerTable_ab2e7bdd220d0b6072674d78ef9974963}
\hypertarget{classTimerTable_accdda4364ff7ccbe605fa69671ad24d1}{
\index{TimerTable@{TimerTable}!m\_\-next\_\-valid@{m\_\-next\_\-valid}}
\index{m\_\-next\_\-valid@{m\_\-next\_\-valid}!TimerTable@{TimerTable}}
\subsubsection[{m\_\-next\_\-valid}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf m\_\-next\_\-valid}\hspace{0.3cm}{\ttfamily  \mbox{[}mutable, private\mbox{]}}}}
\label{classTimerTable_accdda4364ff7ccbe605fa69671ad24d1}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
mem/ruby/system/\hyperlink{TimerTable_8hh}{TimerTable.hh}\item 
mem/ruby/system/\hyperlink{TimerTable_8cc}{TimerTable.cc}\end{DoxyCompactItemize}
