\hypertarget{classPlatform}{
\section{クラス Platform}
\label{classPlatform}\index{Platform@{Platform}}
}


{\ttfamily \#include $<$platform.hh$>$}Platformに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.6246cm]{classPlatform}
\end{center}
\end{figure}
\subsection*{構成}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classPlatform_1_1Platform}{Platform}
\end{DoxyCompactItemize}
\subsection*{Public 型}
\begin{DoxyCompactItemize}
\item 
typedef PlatformParams \hyperlink{classPlatform_af4e77eaf2602e4808deef7d1ba95e579}{Params}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classPlatform_a3741160d0c1f6688a4e38bc97bdd15d3}{Platform} (const \hyperlink{classPlatform_af4e77eaf2602e4808deef7d1ba95e579}{Params} $\ast$p)
\item 
virtual \hyperlink{classPlatform_ac9776566b67c64e4c343b6e6546cb177}{$\sim$Platform} ()
\item 
virtual void \hyperlink{classPlatform_a24ab6780a0fa391b19980027355ba467}{postConsoleInt} ()=0
\item 
virtual void \hyperlink{classPlatform_aaf1bfcf0f5ac95c6a9d1607172a5a29e}{clearConsoleInt} ()=0
\item 
virtual void \hyperlink{classPlatform_a545d1445357706d7259aa73104f44222}{postPciInt} (int line)
\item 
virtual void \hyperlink{classPlatform_a0d98ea2b236bb883fa15d63a59a2ec9e}{clearPciInt} (int line)
\item 
virtual \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{classPlatform_a87078b3d3a28ae134f6736337e90dac3}{pciToDma} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} pciAddr) const 
\item 
virtual \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{classPlatform_a4a2bdce1a8794dd3ea6ca12b36320433}{calcPciConfigAddr} (int bus, int dev, int func)=0
\item 
virtual \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{classPlatform_a3d1d55996e865ab1b65c732496c08b00}{calcPciIOAddr} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} addr)=0
\item 
virtual \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{classPlatform_a303d8161e77b31b8425cb320562a54b2}{calcPciMemAddr} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} addr)=0
\item 
virtual void \hyperlink{classPlatform_a04c0d51f5dc49c970da514b7e8f46c14}{registerPciDevice} (uint8\_\-t bus, uint8\_\-t dev, uint8\_\-t func, uint8\_\-t intr)
\end{DoxyCompactItemize}
\subsection*{Public 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classIntrControl}{IntrControl} $\ast$ \hyperlink{classPlatform_aab4191dd66c041ed67fb31d758ab705e}{intrctrl}
\item 
\hyperlink{classSystem}{System} $\ast$ \hyperlink{classPlatform_af27ccd765f13a4b7bd119dc7579e2746}{system}
\end{DoxyCompactItemize}
\subsection*{Private 変数}
\begin{DoxyCompactItemize}
\item 
std::bitset$<$ 256 $>$ \hyperlink{classPlatform_a978f892860786a70cfc97a3cacf4b7b6}{intLines}
\item 
std::set$<$ \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} $>$ \hyperlink{classPlatform_a5a95b4e20e1bfcdd134457dc41de6fd5}{pciDevices}
\end{DoxyCompactItemize}


\subsection{型定義}
\hypertarget{classPlatform_af4e77eaf2602e4808deef7d1ba95e579}{
\index{Platform@{Platform}!Params@{Params}}
\index{Params@{Params}!Platform@{Platform}}
\subsubsection[{Params}]{\setlength{\rightskip}{0pt plus 5cm}typedef PlatformParams {\bf Params}}}
\label{classPlatform_af4e77eaf2602e4808deef7d1ba95e579}


\hyperlink{classSimObject_a0f0761d2db586a23bb2a2880b8f387bb}{SimObject}を再定義しています。

\hyperlink{classTsunami_a7beeeed12982def83e22faf17f7385e1}{Tsunami}, \hyperlink{classRealView_aa902b300d4e5553ea4f127d69fc0fa3a}{RealView}, \hyperlink{classMalta_a189ad6fd96fd77d2ea4e32ba0a9e5298}{Malta}, \hyperlink{classT1000_abc8ac05350758af915732ecded3a736e}{T1000}, と \hyperlink{classPc_a3cb59bd5a1945e535ba84d5e34ad19ec}{Pc}で再定義されています。

\subsection{コンストラクタとデストラクタ}
\hypertarget{classPlatform_a3741160d0c1f6688a4e38bc97bdd15d3}{
\index{Platform@{Platform}!Platform@{Platform}}
\index{Platform@{Platform}!Platform@{Platform}}
\subsubsection[{Platform}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Platform} (const {\bf Params} $\ast$ {\em p})}}
\label{classPlatform_a3741160d0c1f6688a4e38bc97bdd15d3}



\begin{DoxyCode}
40     : SimObject(p), intrctrl(p->intrctrl)
41 {
42 }
\end{DoxyCode}
\hypertarget{classPlatform_ac9776566b67c64e4c343b6e6546cb177}{
\index{Platform@{Platform}!$\sim$Platform@{$\sim$Platform}}
\index{$\sim$Platform@{$\sim$Platform}!Platform@{Platform}}
\subsubsection[{$\sim$Platform}]{\setlength{\rightskip}{0pt plus 5cm}$\sim${\bf Platform} ()\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classPlatform_ac9776566b67c64e4c343b6e6546cb177}



\begin{DoxyCode}
45 {
46 }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classPlatform_a4a2bdce1a8794dd3ea6ca12b36320433}{
\index{Platform@{Platform}!calcPciConfigAddr@{calcPciConfigAddr}}
\index{calcPciConfigAddr@{calcPciConfigAddr}!Platform@{Platform}}
\subsubsection[{calcPciConfigAddr}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf Addr} calcPciConfigAddr (int {\em bus}, \/  int {\em dev}, \/  int {\em func})\hspace{0.3cm}{\ttfamily  \mbox{[}pure virtual\mbox{]}}}}
\label{classPlatform_a4a2bdce1a8794dd3ea6ca12b36320433}


\hyperlink{classTsunami_a5b8797a83289cb5fd895c9a5dc7eae6f}{Tsunami}, \hyperlink{classRealView_a5b8797a83289cb5fd895c9a5dc7eae6f}{RealView}, \hyperlink{classMalta_a5b8797a83289cb5fd895c9a5dc7eae6f}{Malta}, \hyperlink{classT1000_a5b8797a83289cb5fd895c9a5dc7eae6f}{T1000}, と \hyperlink{classPc_a5b8797a83289cb5fd895c9a5dc7eae6f}{Pc}で実装されています。\hypertarget{classPlatform_a3d1d55996e865ab1b65c732496c08b00}{
\index{Platform@{Platform}!calcPciIOAddr@{calcPciIOAddr}}
\index{calcPciIOAddr@{calcPciIOAddr}!Platform@{Platform}}
\subsubsection[{calcPciIOAddr}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf Addr} calcPciIOAddr ({\bf Addr} {\em addr})\hspace{0.3cm}{\ttfamily  \mbox{[}pure virtual\mbox{]}}}}
\label{classPlatform_a3d1d55996e865ab1b65c732496c08b00}


\hyperlink{classTsunami_a83afd16479598cfaeb035fd30eeedd8b}{Tsunami}, \hyperlink{classRealView_a83afd16479598cfaeb035fd30eeedd8b}{RealView}, \hyperlink{classMalta_a83afd16479598cfaeb035fd30eeedd8b}{Malta}, \hyperlink{classT1000_a83afd16479598cfaeb035fd30eeedd8b}{T1000}, と \hyperlink{classPc_a83afd16479598cfaeb035fd30eeedd8b}{Pc}で実装されています。\hypertarget{classPlatform_a303d8161e77b31b8425cb320562a54b2}{
\index{Platform@{Platform}!calcPciMemAddr@{calcPciMemAddr}}
\index{calcPciMemAddr@{calcPciMemAddr}!Platform@{Platform}}
\subsubsection[{calcPciMemAddr}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf Addr} calcPciMemAddr ({\bf Addr} {\em addr})\hspace{0.3cm}{\ttfamily  \mbox{[}pure virtual\mbox{]}}}}
\label{classPlatform_a303d8161e77b31b8425cb320562a54b2}


\hyperlink{classTsunami_aa2acd9bf04ba56b380e7812ce29971b5}{Tsunami}, \hyperlink{classRealView_aa2acd9bf04ba56b380e7812ce29971b5}{RealView}, \hyperlink{classMalta_aa2acd9bf04ba56b380e7812ce29971b5}{Malta}, \hyperlink{classT1000_aa2acd9bf04ba56b380e7812ce29971b5}{T1000}, と \hyperlink{classPc_aa2acd9bf04ba56b380e7812ce29971b5}{Pc}で実装されています。\hypertarget{classPlatform_aaf1bfcf0f5ac95c6a9d1607172a5a29e}{
\index{Platform@{Platform}!clearConsoleInt@{clearConsoleInt}}
\index{clearConsoleInt@{clearConsoleInt}!Platform@{Platform}}
\subsubsection[{clearConsoleInt}]{\setlength{\rightskip}{0pt plus 5cm}virtual void clearConsoleInt ()\hspace{0.3cm}{\ttfamily  \mbox{[}pure virtual\mbox{]}}}}
\label{classPlatform_aaf1bfcf0f5ac95c6a9d1607172a5a29e}


\hyperlink{classTsunami_ad38e46034c079c8e765d3ac7eb99337d}{Tsunami}, \hyperlink{classRealView_ad38e46034c079c8e765d3ac7eb99337d}{RealView}, \hyperlink{classMalta_ad38e46034c079c8e765d3ac7eb99337d}{Malta}, \hyperlink{classT1000_ad38e46034c079c8e765d3ac7eb99337d}{T1000}, と \hyperlink{classPc_ad38e46034c079c8e765d3ac7eb99337d}{Pc}で実装されています。\hypertarget{classPlatform_a0d98ea2b236bb883fa15d63a59a2ec9e}{
\index{Platform@{Platform}!clearPciInt@{clearPciInt}}
\index{clearPciInt@{clearPciInt}!Platform@{Platform}}
\subsubsection[{clearPciInt}]{\setlength{\rightskip}{0pt plus 5cm}void clearPciInt (int {\em line})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classPlatform_a0d98ea2b236bb883fa15d63a59a2ec9e}


\hyperlink{classTsunami_a0d98ea2b236bb883fa15d63a59a2ec9e}{Tsunami}, \hyperlink{classRealView_a0d98ea2b236bb883fa15d63a59a2ec9e}{RealView}, \hyperlink{classMalta_a0d98ea2b236bb883fa15d63a59a2ec9e}{Malta}, \hyperlink{classT1000_a0d98ea2b236bb883fa15d63a59a2ec9e}{T1000}, と \hyperlink{classPc_a0d98ea2b236bb883fa15d63a59a2ec9e}{Pc}で再定義されています。


\begin{DoxyCode}
56 {
57    panic("No PCI interrupt support in platform.");
58 }
\end{DoxyCode}
\hypertarget{classPlatform_a87078b3d3a28ae134f6736337e90dac3}{
\index{Platform@{Platform}!pciToDma@{pciToDma}}
\index{pciToDma@{pciToDma}!Platform@{Platform}}
\subsubsection[{pciToDma}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Addr} pciToDma ({\bf Addr} {\em pciAddr}) const\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classPlatform_a87078b3d3a28ae134f6736337e90dac3}


\hyperlink{classTsunami_a87078b3d3a28ae134f6736337e90dac3}{Tsunami}, \hyperlink{classRealView_a87078b3d3a28ae134f6736337e90dac3}{RealView}, \hyperlink{classMalta_a87078b3d3a28ae134f6736337e90dac3}{Malta}, \hyperlink{classT1000_a87078b3d3a28ae134f6736337e90dac3}{T1000}, と \hyperlink{classPc_a87078b3d3a28ae134f6736337e90dac3}{Pc}で再定義されています。


\begin{DoxyCode}
62 {
63    panic("No PCI dma support in platform.");
64    M5_DUMMY_RETURN
65 }
\end{DoxyCode}
\hypertarget{classPlatform_a24ab6780a0fa391b19980027355ba467}{
\index{Platform@{Platform}!postConsoleInt@{postConsoleInt}}
\index{postConsoleInt@{postConsoleInt}!Platform@{Platform}}
\subsubsection[{postConsoleInt}]{\setlength{\rightskip}{0pt plus 5cm}virtual void postConsoleInt ()\hspace{0.3cm}{\ttfamily  \mbox{[}pure virtual\mbox{]}}}}
\label{classPlatform_a24ab6780a0fa391b19980027355ba467}


\hyperlink{classTsunami_a5b278cebc0a62bc2195edf27f059ab1a}{Tsunami}, \hyperlink{classRealView_a5b278cebc0a62bc2195edf27f059ab1a}{RealView}, \hyperlink{classMalta_a5b278cebc0a62bc2195edf27f059ab1a}{Malta}, \hyperlink{classT1000_a5b278cebc0a62bc2195edf27f059ab1a}{T1000}, と \hyperlink{classPc_a5b278cebc0a62bc2195edf27f059ab1a}{Pc}で実装されています。\hypertarget{classPlatform_a545d1445357706d7259aa73104f44222}{
\index{Platform@{Platform}!postPciInt@{postPciInt}}
\index{postPciInt@{postPciInt}!Platform@{Platform}}
\subsubsection[{postPciInt}]{\setlength{\rightskip}{0pt plus 5cm}void postPciInt (int {\em line})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classPlatform_a545d1445357706d7259aa73104f44222}


\hyperlink{classTsunami_a545d1445357706d7259aa73104f44222}{Tsunami}, \hyperlink{classRealView_a545d1445357706d7259aa73104f44222}{RealView}, \hyperlink{classMalta_a545d1445357706d7259aa73104f44222}{Malta}, \hyperlink{classT1000_a545d1445357706d7259aa73104f44222}{T1000}, と \hyperlink{classPc_a545d1445357706d7259aa73104f44222}{Pc}で再定義されています。


\begin{DoxyCode}
50 {
51    panic("No PCI interrupt support in platform.");
52 }
\end{DoxyCode}
\hypertarget{classPlatform_a04c0d51f5dc49c970da514b7e8f46c14}{
\index{Platform@{Platform}!registerPciDevice@{registerPciDevice}}
\index{registerPciDevice@{registerPciDevice}!Platform@{Platform}}
\subsubsection[{registerPciDevice}]{\setlength{\rightskip}{0pt plus 5cm}void registerPciDevice (uint8\_\-t {\em bus}, \/  uint8\_\-t {\em dev}, \/  uint8\_\-t {\em func}, \/  uint8\_\-t {\em intr})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classPlatform_a04c0d51f5dc49c970da514b7e8f46c14}



\begin{DoxyCode}
69 {
70     uint32_t bdf = bus << 16 | dev << 8 | func << 0;
71     if (pciDevices.find(bdf) != pciDevices.end())
72         fatal("Two PCI devices have same bus:device:function\n");
73 
74     if (intLines.test(intr))
75         fatal("Two PCI devices have same interrupt line: %d\n", intr);
76 
77     pciDevices.insert(bdf);
78 
79     intLines.set(intr);
80 }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classPlatform_a978f892860786a70cfc97a3cacf4b7b6}{
\index{Platform@{Platform}!intLines@{intLines}}
\index{intLines@{intLines}!Platform@{Platform}}
\subsubsection[{intLines}]{\setlength{\rightskip}{0pt plus 5cm}std::bitset$<$256$>$ {\bf intLines}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPlatform_a978f892860786a70cfc97a3cacf4b7b6}
\hypertarget{classPlatform_aab4191dd66c041ed67fb31d758ab705e}{
\index{Platform@{Platform}!intrctrl@{intrctrl}}
\index{intrctrl@{intrctrl}!Platform@{Platform}}
\subsubsection[{intrctrl}]{\setlength{\rightskip}{0pt plus 5cm}{\bf IntrControl}$\ast$ {\bf intrctrl}}}
\label{classPlatform_aab4191dd66c041ed67fb31d758ab705e}
Pointer to the interrupt controller \hypertarget{classPlatform_a5a95b4e20e1bfcdd134457dc41de6fd5}{
\index{Platform@{Platform}!pciDevices@{pciDevices}}
\index{pciDevices@{pciDevices}!Platform@{Platform}}
\subsubsection[{pciDevices}]{\setlength{\rightskip}{0pt plus 5cm}std::set$<${\bf uint32\_\-t}$>$ {\bf pciDevices}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPlatform_a5a95b4e20e1bfcdd134457dc41de6fd5}
\hypertarget{classPlatform_af27ccd765f13a4b7bd119dc7579e2746}{
\index{Platform@{Platform}!system@{system}}
\index{system@{system}!Platform@{Platform}}
\subsubsection[{system}]{\setlength{\rightskip}{0pt plus 5cm}{\bf System}$\ast$ {\bf system}}}
\label{classPlatform_af27ccd765f13a4b7bd119dc7579e2746}
Pointer to the system for info about the memory system. 

\hyperlink{classTsunami_af27ccd765f13a4b7bd119dc7579e2746}{Tsunami}, \hyperlink{classRealView_af27ccd765f13a4b7bd119dc7579e2746}{RealView}, \hyperlink{classMalta_af27ccd765f13a4b7bd119dc7579e2746}{Malta}, \hyperlink{classT1000_af27ccd765f13a4b7bd119dc7579e2746}{T1000}, \hyperlink{classT1000_1_1T1000_ab737471139f5a296e5b26e8a0e1b0744}{T1000}, と \hyperlink{classPc_af27ccd765f13a4b7bd119dc7579e2746}{Pc}で再定義されています。

このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
dev/\hyperlink{platform_8hh}{platform.hh}\item 
dev/\hyperlink{platform_8cc}{platform.cc}\end{DoxyCompactItemize}
