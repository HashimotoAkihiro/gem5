<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス PerfKvmCounterConfig</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>クラス PerfKvmCounterConfig</h1><!-- doxytag: class="PerfKvmCounterConfig" -->
<p><code>#include &lt;<a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>&gt;</code></p>

<p><a href="classPerfKvmCounterConfig-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounterConfig.html#a55ed8d9cf8254a7598c16bab27f50737">PerfKvmCounterConfig</a> (<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> type, uint64_t config)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounterConfig.html#a45c48015a9fef5897588400e50ce2ee3">~PerfKvmCounterConfig</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounterConfig.html#a21da8ec8646ef482a43c9912690f12db">samplePeriod</a> (uint64_t period)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounterConfig.html#a52dc4277819e416e01e710c3fcd0741f">wakeupEvents</a> (<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> events)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounterConfig.html#ae9f6708c8ac2d38d1a259442dacf5ef9">disabled</a> (bool val)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounterConfig.html#a6ff9b5b670a7713d60a49071544ef39d">pinned</a> (bool val)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounterConfig.html#ae28830de9096ce653714c860182aa1ea">exclude_host</a> (bool val)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounterConfig.html#a267e4dd365a444393b1ccce9e564f7af">exclude_hv</a> (bool val)</td></tr>
<tr><td colspan="2"><h2>Public 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct perf_event_attr&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounterConfig.html#aeae272195c5a5879b216cef6c7c909b2">attr</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>説明</h2>
<p>PerfEvent counter configuration. </p>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="a55ed8d9cf8254a7598c16bab27f50737"></a><!-- doxytag: member="PerfKvmCounterConfig::PerfKvmCounterConfig" ref="a55ed8d9cf8254a7598c16bab27f50737" args="(uint32_t type, uint64_t config)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>config</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize PerfEvent counter configuration structure</p>
<p>PerfEvent has the concept of counter types, which is a way to abstract hardware performance counters or access software events. The type field in the configuration specifies what type of counter this is. For hardware performance counters, it's typically PERF_TYPE_HARDWARE, PERF_TYPE_HW_CACHE, or PERF_TYPE_RAW.</p>
<p>The 'config' field has different meanings depending on the type of counter. Possible values are listed in perf_event.h in the kernel headers. When using raw counters, the value is the raw value written to the performance counter configuration register (some bits dealing with sampling and similar features are usually masked).</p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>Counter type. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td>Counter configuration </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00057"></a>00057 {
<a name="l00058"></a>00058     memset(&amp;<a class="code" href="classPerfKvmCounterConfig.html#aeae272195c5a5879b216cef6c7c909b2">attr</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="classPerfKvmCounterConfig.html#aeae272195c5a5879b216cef6c7c909b2">attr</a>));
<a name="l00059"></a>00059 
<a name="l00060"></a>00060     <a class="code" href="classPerfKvmCounterConfig.html#aeae272195c5a5879b216cef6c7c909b2">attr</a>.size = PERF_ATTR_SIZE_VER0;
<a name="l00061"></a>00061     <a class="code" href="classPerfKvmCounterConfig.html#aeae272195c5a5879b216cef6c7c909b2">attr</a>.type = <a class="code" href="namespaceX86ISA.html#ad805db903f6899f960fd9a982272096a">type</a>;
<a name="l00062"></a>00062     <a class="code" href="classPerfKvmCounterConfig.html#aeae272195c5a5879b216cef6c7c909b2">attr</a>.config = config;
<a name="l00063"></a>00063 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a45c48015a9fef5897588400e50ce2ee3"></a><!-- doxytag: member="PerfKvmCounterConfig::~PerfKvmCounterConfig" ref="a45c48015a9fef5897588400e50ce2ee3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00066"></a>00066 {
<a name="l00067"></a>00067 }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="ae9f6708c8ac2d38d1a259442dacf5ef9"></a><!-- doxytag: member="PerfKvmCounterConfig::disabled" ref="ae9f6708c8ac2d38d1a259442dacf5ef9" args="(bool val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a>&amp; disabled </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>val</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Don't start the performance counter automatically when attaching it.</p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>val</em>&nbsp;</td><td>true to disable, false to enable the counter </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00112"></a>00112                                              {
<a name="l00113"></a>00113         <a class="code" href="classPerfKvmCounterConfig.html#aeae272195c5a5879b216cef6c7c909b2">attr</a>.disabled = <a class="code" href="namespaceX86ISA.html#ae13bf1250853ff6b72aabe3c79b587cc">val</a>;
<a name="l00114"></a>00114         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00115"></a>00115     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae28830de9096ce653714c860182aa1ea"></a><!-- doxytag: member="PerfKvmCounterConfig::exclude_host" ref="ae28830de9096ce653714c860182aa1ea" args="(bool val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a>&amp; exclude_host </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>val</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Exclude the events from the host (i.e., only include events from the guest system).</p>
<p>Intel CPUs seem to support this attribute from <a class="el" href="classLinux.html">Linux</a> 3.2 and onwards. Non-x86 architectures currently ignore this attribute (<a class="el" href="classLinux.html">Linux</a> 3.12-rc5).</p>
<p>This attribute is ignored if it isn't present in the kernel headers or if the kernel doesn't support it.</p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>val</em>&nbsp;</td><td>true to exclude host events </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00143"></a>00143                                                  {
<a name="l00144"></a>00144 <span class="preprocessor">#if HAVE_PERF_ATTR_EXCLUDE_HOST == 1</span>
<a name="l00145"></a>00145 <span class="preprocessor"></span>        <a class="code" href="classPerfKvmCounterConfig.html#aeae272195c5a5879b216cef6c7c909b2">attr</a>.exclude_host = <a class="code" href="namespaceX86ISA.html#ae13bf1250853ff6b72aabe3c79b587cc">val</a>;
<a name="l00146"></a>00146 <span class="preprocessor">#endif</span>
<a name="l00147"></a>00147 <span class="preprocessor"></span>        <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00148"></a>00148     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a267e4dd365a444393b1ccce9e564f7af"></a><!-- doxytag: member="PerfKvmCounterConfig::exclude_hv" ref="a267e4dd365a444393b1ccce9e564f7af" args="(bool val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a>&amp; exclude_hv </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>val</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Exclude the hyper visor (i.e., only include events from the guest system).</p>
<p>This is attribute only seems to be ignored on Intel.</p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>val</em>&nbsp;</td><td>true to exclude host events </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00158"></a>00158                                                {
<a name="l00159"></a>00159         <a class="code" href="classPerfKvmCounterConfig.html#aeae272195c5a5879b216cef6c7c909b2">attr</a>.exclude_hv = <a class="code" href="namespaceX86ISA.html#ae13bf1250853ff6b72aabe3c79b587cc">val</a>;
<a name="l00160"></a>00160         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00161"></a>00161     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6ff9b5b670a7713d60a49071544ef39d"></a><!-- doxytag: member="PerfKvmCounterConfig::pinned" ref="a6ff9b5b670a7713d60a49071544ef39d" args="(bool val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a>&amp; pinned </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>val</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Force the group to be on the active all the time (i.e., disallow multiplexing).</p>
<p>Only applies to group leaders.</p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>val</em>&nbsp;</td><td>true to pin the counter </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00125"></a>00125                                            {
<a name="l00126"></a>00126         <a class="code" href="classPerfKvmCounterConfig.html#aeae272195c5a5879b216cef6c7c909b2">attr</a>.pinned = <a class="code" href="namespaceX86ISA.html#ae13bf1250853ff6b72aabe3c79b587cc">val</a>;
<a name="l00127"></a>00127         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00128"></a>00128     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a21da8ec8646ef482a43c9912690f12db"></a><!-- doxytag: member="PerfKvmCounterConfig::samplePeriod" ref="a21da8ec8646ef482a43c9912690f12db" args="(uint64_t period)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a>&amp; samplePeriod </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>period</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classSet.html">Set</a> the initial sample period (overflow count) of an event. If this is set to 0, the event acts as a normal counting event and does not trigger overflows.</p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>period</em>&nbsp;</td><td>Number of counter events before the counter overflows </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00087"></a>00087                                                         {
<a name="l00088"></a>00088         <a class="code" href="classPerfKvmCounterConfig.html#aeae272195c5a5879b216cef6c7c909b2">attr</a>.freq = 0;
<a name="l00089"></a>00089         <a class="code" href="classPerfKvmCounterConfig.html#aeae272195c5a5879b216cef6c7c909b2">attr</a>.sample_period = period;
<a name="l00090"></a>00090         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00091"></a>00091     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a52dc4277819e416e01e710c3fcd0741f"></a><!-- doxytag: member="PerfKvmCounterConfig::wakeupEvents" ref="a52dc4277819e416e01e710c3fcd0741f" args="(uint32_t events)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a>&amp; wakeupEvents </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>events</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classSet.html">Set</a> the number of samples that need to be triggered before reporting data as being available on the perf event FD. Defaults to 0, which disables overflow reporting.</p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>events</em>&nbsp;</td><td>Number of overflows before signaling a wake up </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00100"></a>00100                                                         {
<a name="l00101"></a>00101         <a class="code" href="classPerfKvmCounterConfig.html#aeae272195c5a5879b216cef6c7c909b2">attr</a>.watermark = 0;
<a name="l00102"></a>00102         <a class="code" href="classPerfKvmCounterConfig.html#aeae272195c5a5879b216cef6c7c909b2">attr</a>.wakeup_events = events;
<a name="l00103"></a>00103         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00104"></a>00104     }
</pre></div></p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="aeae272195c5a5879b216cef6c7c909b2"></a><!-- doxytag: member="PerfKvmCounterConfig::attr" ref="aeae272195c5a5879b216cef6c7c909b2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct perf_event_attr <a class="el" href="classPerfKvmCounterConfig.html#aeae272195c5a5879b216cef6c7c909b2">attr</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Underlying perf_event_attr structure describing the counter </p>

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>cpu/kvm/<a class="el" href="perfevent_8hh_source.html">perfevent.hh</a></li>
<li>cpu/kvm/<a class="el" href="perfevent_8cc.html">perfevent.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
