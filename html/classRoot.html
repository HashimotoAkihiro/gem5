<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス Root</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>クラス Root</h1><!-- doxytag: class="Root" --><!-- doxytag: inherits="SimObject" -->
<p><code>#include &lt;<a class="el" href="root_8hh_source.html">root.hh</a>&gt;</code></p>
<div class="dynheader">
Rootに対する継承グラフ</div>
<div class="dynsection">
 <div class="center">
  <img src="classRoot.gif" usemap="#Root_map" alt=""/>
  <map id="Root_map" name="Root_map">
<area href="classSimObject.html" alt="SimObject" shape="rect" coords="105,56,200,80"/>
<area href="classEventManager.html" alt="EventManager" shape="rect" coords="0,0,95,24"/>
<area href="classSerializable.html" alt="Serializable" shape="rect" coords="105,0,200,24"/>
<area href="classDrainable.html" alt="Drainable" shape="rect" coords="210,0,305,24"/>
</map>
 </div>
</div>

<p><a href="classRoot-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>構成</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRoot_1_1Root.html">Root</a></td></tr>
<tr><td colspan="2"><h2>Public 型</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef RootParams&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRoot.html#a0e87bb7e60cbe3229b1cb552ebb686e0">Params</a></td></tr>
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRoot.html#a7ca6e6b75b6eeb4aa20e46edce0ac6de">timeSyncEnabled</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classCheck.html">Check</a> whether time syncing is enabled.  <a href="#a7ca6e6b75b6eeb4aa20e46edce0ac6de"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classTime.html">Time</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRoot.html#a830a76b9f0c3aea17ec77cd0e5011ad6">timeSyncPeriod</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve the period for the sync event.  <a href="#a830a76b9f0c3aea17ec77cd0e5011ad6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classTime.html">Time</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRoot.html#a6528f63bdbdbc8055bbc6b8e34155c31">timeSyncSpinThreshold</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve the threshold for time remaining to spin wait.  <a href="#a6528f63bdbdbc8055bbc6b8e34155c31"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRoot.html#ad966d7a16083475060291e68ac9c9e24">timeSyncEnable</a> (bool en)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable or disable time syncing.  <a href="#ad966d7a16083475060291e68ac9c9e24"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRoot.html#ac3f63e1a46d7fb3cc8d11ddbb148b65b">timeSyncPeriod</a> (<a class="el" href="classTime.html">Time</a> newPeriod)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Configure the period for time sync events.  <a href="#ac3f63e1a46d7fb3cc8d11ddbb148b65b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRoot.html#a2424f9c13e5cf005bc79fbaf431ca660">timeSyncSpinThreshold</a> (<a class="el" href="classTime.html">Time</a> newThreshold)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classSet.html">Set</a> the threshold for time remaining to spin wait.  <a href="#a2424f9c13e5cf005bc79fbaf431ca660"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classRoot.html#a0e87bb7e60cbe3229b1cb552ebb686e0">Params</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRoot.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRoot.html#abc86df64e340cf2d26b91bb2006f6823">Root</a> (<a class="el" href="classRoot.html#a0e87bb7e60cbe3229b1cb552ebb686e0">Params</a> *p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRoot.html#a0c3e6eb311ceff72035b11f2a5e0f186">loadState</a> (<a class="el" href="classCheckpoint.html">Checkpoint</a> *cp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRoot.html#a3c34ea9b29f410748d4435a667484924">initState</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRoot.html#a53e036786d17361be4c7320d39c99b84">serialize</a> (std::ostream &amp;os)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRoot.html#af22e5d6d660b97db37003ac61ac4ee49">unserialize</a> (<a class="el" href="classCheckpoint.html">Checkpoint</a> *cp, const std::string &amp;section)</td></tr>
<tr><td colspan="2"><h2>Static Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classRoot_1_1Root.html">Root</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRoot.html#ac0ea009f164c8391bd2371c57518a5b2">root</a> ()</td></tr>
<tr><td colspan="2"><h2>Protected メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRoot.html#a9a1e892e8081bcf0f3d918f378d78e52">timeSync</a> ()</td></tr>
<tr><td colspan="2"><h2>Protected 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRoot.html#a096e979db21287ad2b56b0ad270ac681">_enabled</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTime.html">Time</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRoot.html#a858c13841be35f29f395107eba533cb8">_period</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRoot.html#a73b10c2d1eeecc817ef8cb4814c514fb">_periodTick</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTime.html">Time</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRoot.html#a95af4ca66c183d211cbe51f28f876625">_spinThreshold</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTime.html">Time</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRoot.html#af285d39478c6a28a617a471a6232fd4c">lastTime</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt; <a class="el" href="classRoot_1_1Root.html">Root</a>,&amp;Root::timeSync &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRoot.html#ac83acdff678c3ae9e22c78d639866177">syncEvent</a></td></tr>
<tr><td colspan="2"><h2>Static Private 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classRoot_1_1Root.html">Root</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRoot.html#a99366a4f856d83fbfa33f9a97441512b">_root</a> = NULL</td></tr>
<tr><td colspan="2"><h2>フレンド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRoot.html#a47a21fa8d012ff7d9657be29b3e52ee1">EventWrapper&lt; Root,&amp;Root::timeSync &gt;</a></td></tr>
</table>
<hr/><h2>型定義</h2>
<a class="anchor" id="a0e87bb7e60cbe3229b1cb552ebb686e0"></a><!-- doxytag: member="Root::Params" ref="a0e87bb7e60cbe3229b1cb552ebb686e0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef RootParams <a class="el" href="classRoot.html#a0e87bb7e60cbe3229b1cb552ebb686e0">Params</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classSimObject.html#a0f0761d2db586a23bb2a2880b8f387bb">SimObject</a>を再定義しています。</p>

</div>
</div>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="abc86df64e340cf2d26b91bb2006f6823"></a><!-- doxytag: member="Root::Root" ref="abc86df64e340cf2d26b91bb2006f6823" args="(Params *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRoot_1_1Root.html">Root</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRoot.html#a0e87bb7e60cbe3229b1cb552ebb686e0">Params</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00106"></a>00106                         : <a class="code" href="classSimObject.html#a153e2844edadce7c286efc5e3a7da911">SimObject</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>), <a class="code" href="classRoot.html#a096e979db21287ad2b56b0ad270ac681">_enabled</a>(<span class="keyword">false</span>),
<a name="l00107"></a>00107     <a class="code" href="classRoot.html#a73b10c2d1eeecc817ef8cb4814c514fb">_periodTick</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;time_sync_period), <a class="code" href="classRoot.html#ac83acdff678c3ae9e22c78d639866177">syncEvent</a>(<span class="keyword">this</span>)
<a name="l00108"></a>00108 {
<a name="l00109"></a>00109     <a class="code" href="classRoot.html#a858c13841be35f29f395107eba533cb8">_period</a>.<a class="code" href="classTime.html#ae71f267ec8d0248b503d266434953239">setTick</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;time_sync_period);
<a name="l00110"></a>00110     <a class="code" href="classRoot.html#a95af4ca66c183d211cbe51f28f876625">_spinThreshold</a>.<a class="code" href="classTime.html#ae71f267ec8d0248b503d266434953239">setTick</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;time_sync_spin_threshold);
<a name="l00111"></a>00111 
<a name="l00112"></a>00112     assert(<a class="code" href="classRoot.html#a99366a4f856d83fbfa33f9a97441512b">_root</a> == <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>);
<a name="l00113"></a>00113     <a class="code" href="classRoot.html#a99366a4f856d83fbfa33f9a97441512b">_root</a> = <span class="keyword">this</span>;
<a name="l00114"></a>00114     <a class="code" href="classRoot.html#af285d39478c6a28a617a471a6232fd4c">lastTime</a>.<a class="code" href="classTime.html#aaca92251d2a0c93c3ca57e75c8fd5e3c">setTimer</a>();
<a name="l00115"></a>00115 
<a name="l00116"></a>00116     <a class="code" href="eventq_8cc.html#a1184f025d31220089a3af9dfc6eeb4d4">simQuantum</a> = <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;sim_quantum;
<a name="l00117"></a>00117 }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="a3c34ea9b29f410748d4435a667484924"></a><!-- doxytag: member="Root::initState" ref="a3c34ea9b29f410748d4435a667484924" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initState </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Schedule the timesync event at <a class="el" href="classRoot.html#a3c34ea9b29f410748d4435a667484924">initState()</a> when not unserializing </p>

<p><a class="el" href="classSimObject.html#a3c34ea9b29f410748d4435a667484924">SimObject</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00121"></a>00121 {
<a name="l00122"></a>00122     <a class="code" href="classRoot.html#ad966d7a16083475060291e68ac9c9e24" title="Enable or disable time syncing.">timeSyncEnable</a>(<a class="code" href="classRoot.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;time_sync_enable);
<a name="l00123"></a>00123 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0c3e6eb311ceff72035b11f2a5e0f186"></a><!-- doxytag: member="Root::loadState" ref="a0c3e6eb311ceff72035b11f2a5e0f186" args="(Checkpoint *cp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loadState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCheckpoint.html">Checkpoint</a> *&nbsp;</td>
          <td class="paramname"> <em>cp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Schedule the timesync event at <a class="el" href="classRoot.html#a0c3e6eb311ceff72035b11f2a5e0f186">loadState()</a> so that curTick is correct </p>

<p><a class="el" href="classSimObject.html#a0c3e6eb311ceff72035b11f2a5e0f186">SimObject</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00127"></a>00127 {
<a name="l00128"></a>00128     <a class="code" href="classRoot.html#a0c3e6eb311ceff72035b11f2a5e0f186">SimObject::loadState</a>(cp);
<a name="l00129"></a>00129     <a class="code" href="classRoot.html#ad966d7a16083475060291e68ac9c9e24" title="Enable or disable time syncing.">timeSyncEnable</a>(<a class="code" href="classRoot.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;time_sync_enable);
<a name="l00130"></a>00130 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acd3c3feb78ae7a8f88fe0f110a718dff"></a><!-- doxytag: member="Root::params" ref="acd3c3feb78ae7a8f88fe0f110a718dff" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classRoot.html#a0e87bb7e60cbe3229b1cb552ebb686e0">Params</a>* params </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classSimObject.html#acd3c3feb78ae7a8f88fe0f110a718dff">SimObject</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00101"></a>00101     {
<a name="l00102"></a>00102         <span class="keywordflow">return</span> <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classRoot.html#a0e87bb7e60cbe3229b1cb552ebb686e0">Params</a> *<span class="keyword">&gt;</span>(<a class="code" href="classSimObject.html#acaf6024ae9dda44bfb1c67e05ad70aef">_params</a>);
<a name="l00103"></a>00103     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac0ea009f164c8391bd2371c57518a5b2"></a><!-- doxytag: member="Root::root" ref="ac0ea009f164c8391bd2371c57518a5b2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classRoot_1_1Root.html">Root</a>* root </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Use this function to get a pointer to the single <a class="el" href="classRoot.html">Root</a> object in the simulation. This function asserts that such an object has actual been constructed to avoid having to perform that check everywhere the root is used. This is to allow calling the functions below.</p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>Pointer to the single root object. </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00077"></a>00077     {
<a name="l00078"></a>00078         assert(<a class="code" href="classRoot.html#a99366a4f856d83fbfa33f9a97441512b">_root</a>);
<a name="l00079"></a>00079         <span class="keywordflow">return</span> <a class="code" href="classRoot.html#a99366a4f856d83fbfa33f9a97441512b">_root</a>;
<a name="l00080"></a>00080     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a53e036786d17361be4c7320d39c99b84"></a><!-- doxytag: member="Root::serialize" ref="a53e036786d17361be4c7320d39c99b84" args="(std::ostream &amp;os)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void serialize </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>os</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classSerializable.html#ad6272f80ae37e8331e3969b3f072a801">Serializable</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00134"></a>00134 {
<a name="l00135"></a>00135     uint64_t cpt_ver = <a class="code" href="serialize_8hh.html#a12e740c0c33a4a5fc432413005beae4c">gem5CheckpointVersion</a>;
<a name="l00136"></a>00136     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(cpt_ver);
<a name="l00137"></a>00137     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="full__system_8hh.html#af929576af6f85c8849704b66d04b8370">FullSystem</a>);
<a name="l00138"></a>00138     std::string isa = THE_ISA_STR;
<a name="l00139"></a>00139     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(isa);
<a name="l00140"></a>00140 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9a1e892e8081bcf0f3d918f378d78e52"></a><!-- doxytag: member="Root::timeSync" ref="a9a1e892e8081bcf0f3d918f378d78e52" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timeSync </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00051"></a>00051 {
<a name="l00052"></a>00052     <a class="code" href="classTime.html">Time</a> cur_time, diff, period = <a class="code" href="classRoot.html#a830a76b9f0c3aea17ec77cd0e5011ad6" title="Retrieve the period for the sync event.">timeSyncPeriod</a>();
<a name="l00053"></a>00053 
<a name="l00054"></a>00054     <span class="keywordflow">do</span> {
<a name="l00055"></a>00055         cur_time.<a class="code" href="classTime.html#aaca92251d2a0c93c3ca57e75c8fd5e3c">setTimer</a>();
<a name="l00056"></a>00056         diff = cur_time - <a class="code" href="classRoot.html#af285d39478c6a28a617a471a6232fd4c">lastTime</a>;
<a name="l00057"></a>00057         <a class="code" href="classTime.html">Time</a> remainder = period - diff;
<a name="l00058"></a>00058         <span class="keywordflow">if</span> (diff &lt; period &amp;&amp; remainder &gt; <a class="code" href="classRoot.html#a95af4ca66c183d211cbe51f28f876625">_spinThreshold</a>) {
<a name="l00059"></a>00059             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(TimeSync, <span class="stringliteral">&quot;Sleeping to sync with real time.\n&quot;</span>);
<a name="l00060"></a>00060             <span class="comment">// Sleep until the end of the period, or until a signal.</span>
<a name="l00061"></a>00061             <a class="code" href="time_8cc.html#a70619da6bb4db996fece0c1fb1228e34">sleep</a>(remainder);
<a name="l00062"></a>00062             <span class="comment">// Refresh the current time.</span>
<a name="l00063"></a>00063             cur_time.<a class="code" href="classTime.html#aaca92251d2a0c93c3ca57e75c8fd5e3c">setTimer</a>();
<a name="l00064"></a>00064         }
<a name="l00065"></a>00065     } <span class="keywordflow">while</span> (diff &lt; period);
<a name="l00066"></a>00066     lastTime = cur_time;
<a name="l00067"></a>00067     <a class="code" href="classEventManager.html#a4ddebbfe9a12b95be6fb993ce892dcd3">schedule</a>(&amp;<a class="code" href="classRoot.html#ac83acdff678c3ae9e22c78d639866177">syncEvent</a>, <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>() + <a class="code" href="classRoot.html#a73b10c2d1eeecc817ef8cb4814c514fb">_periodTick</a>);
<a name="l00068"></a>00068 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad966d7a16083475060291e68ac9c9e24"></a><!-- doxytag: member="Root::timeSyncEnable" ref="ad966d7a16083475060291e68ac9c9e24" args="(bool en)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timeSyncEnable </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>en</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable or disable time syncing. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00072"></a>00072 {
<a name="l00073"></a>00073     <span class="keywordflow">if</span> (<a class="code" href="namespaceArmISA.html#aa3e54588246d2e7102283e3c9fb2e480">en</a> == <a class="code" href="classRoot.html#a096e979db21287ad2b56b0ad270ac681">_enabled</a>)
<a name="l00074"></a>00074         <span class="keywordflow">return</span>;
<a name="l00075"></a>00075     <a class="code" href="classRoot.html#a096e979db21287ad2b56b0ad270ac681">_enabled</a> = <a class="code" href="namespaceArmISA.html#aa3e54588246d2e7102283e3c9fb2e480">en</a>;
<a name="l00076"></a>00076     <span class="keywordflow">if</span> (<a class="code" href="classRoot.html#a096e979db21287ad2b56b0ad270ac681">_enabled</a>) {
<a name="l00077"></a>00077         <span class="comment">// Get event going.</span>
<a name="l00078"></a>00078         <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> periods = ((<a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>() + <a class="code" href="classRoot.html#a73b10c2d1eeecc817ef8cb4814c514fb">_periodTick</a> - 1) / <a class="code" href="classRoot.html#a73b10c2d1eeecc817ef8cb4814c514fb">_periodTick</a>);
<a name="l00079"></a>00079         <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> nextPeriod = periods * <a class="code" href="classRoot.html#a73b10c2d1eeecc817ef8cb4814c514fb">_periodTick</a>;
<a name="l00080"></a>00080         <a class="code" href="classEventManager.html#a4ddebbfe9a12b95be6fb993ce892dcd3">schedule</a>(&amp;<a class="code" href="classRoot.html#ac83acdff678c3ae9e22c78d639866177">syncEvent</a>, nextPeriod);
<a name="l00081"></a>00081     } <span class="keywordflow">else</span> {
<a name="l00082"></a>00082         <span class="comment">// Stop event.</span>
<a name="l00083"></a>00083         <a class="code" href="classEventManager.html#a720e34da4db679fb3f30b20e55c23605">deschedule</a>(&amp;<a class="code" href="classRoot.html#ac83acdff678c3ae9e22c78d639866177">syncEvent</a>);
<a name="l00084"></a>00084     }
<a name="l00085"></a>00085 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7ca6e6b75b6eeb4aa20e46edce0ac6de"></a><!-- doxytag: member="Root::timeSyncEnabled" ref="a7ca6e6b75b6eeb4aa20e46edce0ac6de" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool timeSyncEnabled </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classCheck.html">Check</a> whether time syncing is enabled. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00085"></a>00085 { <span class="keywordflow">return</span> <a class="code" href="classRoot.html#a096e979db21287ad2b56b0ad270ac681">_enabled</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac3f63e1a46d7fb3cc8d11ddbb148b65b"></a><!-- doxytag: member="Root::timeSyncPeriod" ref="ac3f63e1a46d7fb3cc8d11ddbb148b65b" args="(Time newPeriod)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timeSyncPeriod </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTime.html">Time</a>&nbsp;</td>
          <td class="paramname"> <em>newPeriod</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Configure the period for time sync events. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00090"></a>00090 {
<a name="l00091"></a>00091     <span class="keywordtype">bool</span> <a class="code" href="namespaceArmISA.html#aa3e54588246d2e7102283e3c9fb2e480">en</a> = <a class="code" href="classRoot.html#a7ca6e6b75b6eeb4aa20e46edce0ac6de" title="Check whether time syncing is enabled.">timeSyncEnabled</a>();
<a name="l00092"></a>00092     <a class="code" href="classRoot.html#a858c13841be35f29f395107eba533cb8">_period</a> = newPeriod;
<a name="l00093"></a>00093     <a class="code" href="classRoot.html#a73b10c2d1eeecc817ef8cb4814c514fb">_periodTick</a> = <a class="code" href="classRoot.html#a858c13841be35f29f395107eba533cb8">_period</a>.<a class="code" href="classTime.html#a972aab5d67a4da04633746972803d5d6">getTick</a>();
<a name="l00094"></a>00094     <a class="code" href="classRoot.html#ad966d7a16083475060291e68ac9c9e24" title="Enable or disable time syncing.">timeSyncEnable</a>(en);
<a name="l00095"></a>00095 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a830a76b9f0c3aea17ec77cd0e5011ad6"></a><!-- doxytag: member="Root::timeSyncPeriod" ref="a830a76b9f0c3aea17ec77cd0e5011ad6" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classTime.html">Time</a> timeSyncPeriod </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve the period for the sync event. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00087"></a>00087 { <span class="keywordflow">return</span> <a class="code" href="classRoot.html#a858c13841be35f29f395107eba533cb8">_period</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2424f9c13e5cf005bc79fbaf431ca660"></a><!-- doxytag: member="Root::timeSyncSpinThreshold" ref="a2424f9c13e5cf005bc79fbaf431ca660" args="(Time newThreshold)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timeSyncSpinThreshold </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTime.html">Time</a>&nbsp;</td>
          <td class="paramname"> <em>newThreshold</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classSet.html">Set</a> the threshold for time remaining to spin wait. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00100"></a>00100 {
<a name="l00101"></a>00101     <span class="keywordtype">bool</span> <a class="code" href="namespaceArmISA.html#aa3e54588246d2e7102283e3c9fb2e480">en</a> = <a class="code" href="classRoot.html#a7ca6e6b75b6eeb4aa20e46edce0ac6de" title="Check whether time syncing is enabled.">timeSyncEnabled</a>();
<a name="l00102"></a>00102     <a class="code" href="classRoot.html#a95af4ca66c183d211cbe51f28f876625">_spinThreshold</a> = newThreshold;
<a name="l00103"></a>00103     <a class="code" href="classRoot.html#ad966d7a16083475060291e68ac9c9e24" title="Enable or disable time syncing.">timeSyncEnable</a>(en);
<a name="l00104"></a>00104 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6528f63bdbdbc8055bbc6b8e34155c31"></a><!-- doxytag: member="Root::timeSyncSpinThreshold" ref="a6528f63bdbdbc8055bbc6b8e34155c31" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classTime.html">Time</a> timeSyncSpinThreshold </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve the threshold for time remaining to spin wait. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00089"></a>00089 { <span class="keywordflow">return</span> <a class="code" href="classRoot.html#a95af4ca66c183d211cbe51f28f876625">_spinThreshold</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af22e5d6d660b97db37003ac61ac4ee49"></a><!-- doxytag: member="Root::unserialize" ref="af22e5d6d660b97db37003ac61ac4ee49" args="(Checkpoint *cp, const std::string &amp;section)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void unserialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCheckpoint.html">Checkpoint</a> *&nbsp;</td>
          <td class="paramname"> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>section</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classSerializable.html#af100c4e9feabf3cd918619c88c718387">Serializable</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00144"></a>00144 {
<a name="l00145"></a>00145     uint64_t cpt_ver = 0;
<a name="l00146"></a>00146     <a class="code" href="serialize_8hh.html#a4589b5c4561e2466c1318470af9c05bc">UNSERIALIZE_OPT_SCALAR</a>(cpt_ver);
<a name="l00147"></a>00147     <span class="keywordflow">if</span> (cpt_ver &lt; <a class="code" href="serialize_8hh.html#a12e740c0c33a4a5fc432413005beae4c">gem5CheckpointVersion</a>) {
<a name="l00148"></a>00148         <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;**********************************************************\n&quot;</span>);
<a name="l00149"></a>00149         <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;!!!! Checkpoint ver %#x is older than current ver %#x !!!!\n&quot;</span>,
<a name="l00150"></a>00150                 cpt_ver, <a class="code" href="serialize_8hh.html#a12e740c0c33a4a5fc432413005beae4c">gem5CheckpointVersion</a>);
<a name="l00151"></a>00151         <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;You might experience some issues when restoring and should run &quot;</span>
<a name="l00152"></a>00152              <span class="stringliteral">&quot;the checkpoint upgrader (util/cpt_upgrader.py) on your &quot;</span>
<a name="l00153"></a>00153              <span class="stringliteral">&quot;checkpoint\n&quot;</span>);
<a name="l00154"></a>00154         <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;**********************************************************\n&quot;</span>);
<a name="l00155"></a>00155     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cpt_ver &gt; <a class="code" href="serialize_8hh.html#a12e740c0c33a4a5fc432413005beae4c">gem5CheckpointVersion</a>) {
<a name="l00156"></a>00156         <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;**********************************************************\n&quot;</span>);
<a name="l00157"></a>00157         <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;!!!! Checkpoint ver %#x is newer than current ver %#x !!!!\n&quot;</span>,
<a name="l00158"></a>00158                 cpt_ver, <a class="code" href="serialize_8hh.html#a12e740c0c33a4a5fc432413005beae4c">gem5CheckpointVersion</a>);
<a name="l00159"></a>00159         <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;Running a new checkpoint with an older version of gem5 is not &quot;</span>
<a name="l00160"></a>00160              <span class="stringliteral">&quot;supported. While it might work, you may experience incorrect &quot;</span>
<a name="l00161"></a>00161              <span class="stringliteral">&quot;behavior or crashes.\n&quot;</span>);
<a name="l00162"></a>00162         <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;**********************************************************\n&quot;</span>);
<a name="l00163"></a>00163      }
<a name="l00164"></a>00164 }
</pre></div></p>

</div>
</div>
<hr/><h2>フレンドと関連する関数</h2>
<a class="anchor" id="a47a21fa8d012ff7d9657be29b3e52ee1"></a><!-- doxytag: member="Root::EventWrapper&lt; Root,&amp;Root::timeSync &gt;" ref="a47a21fa8d012ff7d9657be29b3e52ee1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classEventWrapper.html">EventWrapper</a>&lt; <a class="el" href="classRoot_1_1Root.html">Root</a>,&amp;Root::timeSync &gt;<code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="a096e979db21287ad2b56b0ad270ac681"></a><!-- doxytag: member="Root::_enabled" ref="a096e979db21287ad2b56b0ad270ac681" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classRoot.html#a096e979db21287ad2b56b0ad270ac681">_enabled</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a858c13841be35f29f395107eba533cb8"></a><!-- doxytag: member="Root::_period" ref="a858c13841be35f29f395107eba533cb8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTime.html">Time</a> <a class="el" href="classRoot.html#a858c13841be35f29f395107eba533cb8">_period</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a73b10c2d1eeecc817ef8cb4814c514fb"></a><!-- doxytag: member="Root::_periodTick" ref="a73b10c2d1eeecc817ef8cb4814c514fb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="el" href="classRoot.html#a73b10c2d1eeecc817ef8cb4814c514fb">_periodTick</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a99366a4f856d83fbfa33f9a97441512b"></a><!-- doxytag: member="Root::_root" ref="a99366a4f856d83fbfa33f9a97441512b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRoot_1_1Root.html">Root</a> * <a class="el" href="classRoot.html#a99366a4f856d83fbfa33f9a97441512b">_root</a> = NULL<code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a95af4ca66c183d211cbe51f28f876625"></a><!-- doxytag: member="Root::_spinThreshold" ref="a95af4ca66c183d211cbe51f28f876625" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTime.html">Time</a> <a class="el" href="classRoot.html#a95af4ca66c183d211cbe51f28f876625">_spinThreshold</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="af285d39478c6a28a617a471a6232fd4c"></a><!-- doxytag: member="Root::lastTime" ref="af285d39478c6a28a617a471a6232fd4c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTime.html">Time</a> <a class="el" href="classRoot.html#af285d39478c6a28a617a471a6232fd4c">lastTime</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ac83acdff678c3ae9e22c78d639866177"></a><!-- doxytag: member="Root::syncEvent" ref="ac83acdff678c3ae9e22c78d639866177" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt;<a class="el" href="classRoot_1_1Root.html">Root</a>, &amp;Root::timeSync&gt; <a class="el" href="classRoot.html#ac83acdff678c3ae9e22c78d639866177">syncEvent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>sim/<a class="el" href="root_8hh_source.html">root.hh</a></li>
<li>sim/<a class="el" href="root_8cc.html">root.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
