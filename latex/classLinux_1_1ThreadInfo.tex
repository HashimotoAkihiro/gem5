\hypertarget{classLinux_1_1ThreadInfo}{
\section{クラス ThreadInfo}
\label{classLinux_1_1ThreadInfo}\index{Linux::ThreadInfo@{Linux::ThreadInfo}}
}


{\ttfamily \#include $<$threadinfo.hh$>$}\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classLinux_1_1ThreadInfo_ac45ecf2813a7b8622615eb399e4ef8d7}{ThreadInfo} (\hyperlink{classThreadContext}{ThreadContext} $\ast$\_\-tc, \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \_\-pcbb=0)
\item 
\hyperlink{classLinux_1_1ThreadInfo_a4eb41aa67f0202861fc2a3862127964e}{$\sim$ThreadInfo} ()
\item 
\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{classLinux_1_1ThreadInfo_a858f183600a76216a02ed8118d784cdc}{curThreadInfo} ()
\item 
\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{classLinux_1_1ThreadInfo_a1a8fccfe3891a5949b7acbf68d210165}{curTaskInfo} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{structLinux_1_1thread__info}{thread\_\-info}=0)
\item 
int32\_\-t \hyperlink{classLinux_1_1ThreadInfo_a61cccca364818b8d499410a9b100d307}{curTaskPID} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{structLinux_1_1thread__info}{thread\_\-info}=0)
\item 
int32\_\-t \hyperlink{classLinux_1_1ThreadInfo_a95f8711d141a94ab8f2b192bb58d6fc1}{curTaskTGID} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{structLinux_1_1thread__info}{thread\_\-info}=0)
\item 
int64\_\-t \hyperlink{classLinux_1_1ThreadInfo_aa1fc5d282b28d10354417f72a82a36c7}{curTaskStart} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{structLinux_1_1thread__info}{thread\_\-info}=0)
\item 
std::string \hyperlink{classLinux_1_1ThreadInfo_a35e25daf337cac7b44d13cf92382f45e}{curTaskName} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{structLinux_1_1thread__info}{thread\_\-info}=0)
\item 
int32\_\-t \hyperlink{classLinux_1_1ThreadInfo_a9e35eef467b5e80427937e62772c91da}{curTaskMm} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{structLinux_1_1thread__info}{thread\_\-info}=0)
\end{DoxyCompactItemize}
\subsection*{Private メソッド}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename T $>$ }\\bool \hyperlink{classLinux_1_1ThreadInfo_af0da1d324f55329a4d5ca716b05dc79f}{get\_\-data} (const char $\ast$symbol, T \&data)
\end{DoxyCompactItemize}
\subsection*{Private 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classThreadContext}{ThreadContext} $\ast$ \hyperlink{classLinux_1_1ThreadInfo_a4455a4759e69e5ebe68ae7298cbcc37d}{tc}
\item 
\hyperlink{classSystem}{System} $\ast$ \hyperlink{classLinux_1_1ThreadInfo_a8ae37465ba84acfef6af3e9b9e6dbbd5}{sys}
\item 
\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{classLinux_1_1ThreadInfo_a6e10da530c8ba76b721d983185b1ea8d}{pcbb}
\end{DoxyCompactItemize}


\subsection{コンストラクタとデストラクタ}
\hypertarget{classLinux_1_1ThreadInfo_ac45ecf2813a7b8622615eb399e4ef8d7}{
\index{Linux::ThreadInfo@{Linux::ThreadInfo}!ThreadInfo@{ThreadInfo}}
\index{ThreadInfo@{ThreadInfo}!Linux::ThreadInfo@{Linux::ThreadInfo}}
\subsubsection[{ThreadInfo}]{\setlength{\rightskip}{0pt plus 5cm}{\bf ThreadInfo} ({\bf ThreadContext} $\ast$ {\em \_\-tc}, \/  {\bf Addr} {\em \_\-pcbb} = {\ttfamily 0})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classLinux_1_1ThreadInfo_ac45ecf2813a7b8622615eb399e4ef8d7}



\begin{DoxyCode}
70         : tc(_tc), sys(tc->getSystemPtr()), pcbb(_pcbb)
71     {
72 
73     }
\end{DoxyCode}
\hypertarget{classLinux_1_1ThreadInfo_a4eb41aa67f0202861fc2a3862127964e}{
\index{Linux::ThreadInfo@{Linux::ThreadInfo}!$\sim$ThreadInfo@{$\sim$ThreadInfo}}
\index{$\sim$ThreadInfo@{$\sim$ThreadInfo}!Linux::ThreadInfo@{Linux::ThreadInfo}}
\subsubsection[{$\sim$ThreadInfo}]{\setlength{\rightskip}{0pt plus 5cm}$\sim${\bf ThreadInfo} ()\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classLinux_1_1ThreadInfo_a4eb41aa67f0202861fc2a3862127964e}



\begin{DoxyCode}
75     {}
\end{DoxyCode}


\subsection{関数}
\hypertarget{classLinux_1_1ThreadInfo_a1a8fccfe3891a5949b7acbf68d210165}{
\index{Linux::ThreadInfo@{Linux::ThreadInfo}!curTaskInfo@{curTaskInfo}}
\index{curTaskInfo@{curTaskInfo}!Linux::ThreadInfo@{Linux::ThreadInfo}}
\subsubsection[{curTaskInfo}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Addr} curTaskInfo ({\bf Addr} {\em thread\_\-info} = {\ttfamily 0})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classLinux_1_1ThreadInfo_a1a8fccfe3891a5949b7acbf68d210165}



\begin{DoxyCode}
97     {
98         int32_t offset;
99         if (!get_data("thread_info_task", offset))
100             return 0;
101 
102         if (!thread_info)
103             thread_info = curThreadInfo();
104 
105         Addr addr;
106         CopyOut(tc, &addr, thread_info + offset, sizeof(addr));
107 
108         return addr;
109     }
\end{DoxyCode}
\hypertarget{classLinux_1_1ThreadInfo_a9e35eef467b5e80427937e62772c91da}{
\index{Linux::ThreadInfo@{Linux::ThreadInfo}!curTaskMm@{curTaskMm}}
\index{curTaskMm@{curTaskMm}!Linux::ThreadInfo@{Linux::ThreadInfo}}
\subsubsection[{curTaskMm}]{\setlength{\rightskip}{0pt plus 5cm}int32\_\-t curTaskMm ({\bf Addr} {\em thread\_\-info} = {\ttfamily 0})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classLinux_1_1ThreadInfo_a9e35eef467b5e80427937e62772c91da}



\begin{DoxyCode}
172     {
173         int32_t offset;
174         if (!get_data("task_struct_mm", offset))
175             return -1;
176 
177         int32_t mm_ptr;
178         CopyOut(tc, &mm_ptr, curTaskInfo(thread_info) + offset, sizeof(mm_ptr));
179 
180         return mm_ptr;
181     }
\end{DoxyCode}
\hypertarget{classLinux_1_1ThreadInfo_a35e25daf337cac7b44d13cf92382f45e}{
\index{Linux::ThreadInfo@{Linux::ThreadInfo}!curTaskName@{curTaskName}}
\index{curTaskName@{curTaskName}!Linux::ThreadInfo@{Linux::ThreadInfo}}
\subsubsection[{curTaskName}]{\setlength{\rightskip}{0pt plus 5cm}std::string curTaskName ({\bf Addr} {\em thread\_\-info} = {\ttfamily 0})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classLinux_1_1ThreadInfo_a35e25daf337cac7b44d13cf92382f45e}



\begin{DoxyCode}
154     {
155         int32_t offset;
156         int32_t size;
157 
158         if (!get_data("task_struct_comm", offset))
159             return "FailureIn_curTaskName";
160 
161         if (!get_data("task_struct_comm_size", size))
162             return "FailureIn_curTaskName";
163 
164         char buffer[size + 1];
165         CopyStringOut(tc, buffer, curTaskInfo(thread_info) + offset, size);
166 
167         return buffer;
168     }
\end{DoxyCode}
\hypertarget{classLinux_1_1ThreadInfo_a61cccca364818b8d499410a9b100d307}{
\index{Linux::ThreadInfo@{Linux::ThreadInfo}!curTaskPID@{curTaskPID}}
\index{curTaskPID@{curTaskPID}!Linux::ThreadInfo@{Linux::ThreadInfo}}
\subsubsection[{curTaskPID}]{\setlength{\rightskip}{0pt plus 5cm}int32\_\-t curTaskPID ({\bf Addr} {\em thread\_\-info} = {\ttfamily 0})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classLinux_1_1ThreadInfo_a61cccca364818b8d499410a9b100d307}



\begin{DoxyCode}
113     {
114         int32_t offset;
115         if (!get_data("task_struct_pid", offset))
116             return -1;
117 
118         int32_t pid;
119         CopyOut(tc, &pid, curTaskInfo(thread_info) + offset, sizeof(pid));
120 
121         return pid;
122     }
\end{DoxyCode}
\hypertarget{classLinux_1_1ThreadInfo_aa1fc5d282b28d10354417f72a82a36c7}{
\index{Linux::ThreadInfo@{Linux::ThreadInfo}!curTaskStart@{curTaskStart}}
\index{curTaskStart@{curTaskStart}!Linux::ThreadInfo@{Linux::ThreadInfo}}
\subsubsection[{curTaskStart}]{\setlength{\rightskip}{0pt plus 5cm}int64\_\-t curTaskStart ({\bf Addr} {\em thread\_\-info} = {\ttfamily 0})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classLinux_1_1ThreadInfo_aa1fc5d282b28d10354417f72a82a36c7}



\begin{DoxyCode}
139     {
140         int32_t offset;
141         if (!get_data("task_struct_start_time", offset))
142             return -1;
143 
144         int64_t data;
145         // start_time is actually of type timespec, but if we just
146         // grab the first long, we'll get the seconds out of it
147         CopyOut(tc, &data, curTaskInfo(thread_info) + offset, sizeof(data));
148 
149         return data;
150     }
\end{DoxyCode}
\hypertarget{classLinux_1_1ThreadInfo_a95f8711d141a94ab8f2b192bb58d6fc1}{
\index{Linux::ThreadInfo@{Linux::ThreadInfo}!curTaskTGID@{curTaskTGID}}
\index{curTaskTGID@{curTaskTGID}!Linux::ThreadInfo@{Linux::ThreadInfo}}
\subsubsection[{curTaskTGID}]{\setlength{\rightskip}{0pt plus 5cm}int32\_\-t curTaskTGID ({\bf Addr} {\em thread\_\-info} = {\ttfamily 0})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classLinux_1_1ThreadInfo_a95f8711d141a94ab8f2b192bb58d6fc1}



\begin{DoxyCode}
126     {
127         int32_t offset;
128         if (!get_data("task_struct_tgid", offset))
129             return -1;
130 
131         int32_t tgid;
132         CopyOut(tc, &tgid, curTaskInfo(thread_info) + offset, sizeof(tgid));
133 
134         return tgid;
135     }
\end{DoxyCode}
\hypertarget{classLinux_1_1ThreadInfo_a858f183600a76216a02ed8118d784cdc}{
\index{Linux::ThreadInfo@{Linux::ThreadInfo}!curThreadInfo@{curThreadInfo}}
\index{curThreadInfo@{curThreadInfo}!Linux::ThreadInfo@{Linux::ThreadInfo}}
\subsubsection[{curThreadInfo}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Addr} curThreadInfo ()\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classLinux_1_1ThreadInfo_a858f183600a76216a02ed8118d784cdc}



\begin{DoxyCode}
79     {
80         if (!TheISA::CurThreadInfoImplemented)
81             panic("curThreadInfo() not implemented for this ISA");
82 
83         Addr addr = pcbb;
84         Addr sp;
85 
86         if (!addr)
87             addr = tc->readMiscRegNoEffect(TheISA::CurThreadInfoReg);
88 
89         PortProxy &p = tc->getPhysProxy();
90         p.readBlob(addr, (uint8_t *)&sp, sizeof(Addr));
91 
92         return sp & ~ULL(0x3fff);
93     }
\end{DoxyCode}
\hypertarget{classLinux_1_1ThreadInfo_af0da1d324f55329a4d5ca716b05dc79f}{
\index{Linux::ThreadInfo@{Linux::ThreadInfo}!get\_\-data@{get\_\-data}}
\index{get\_\-data@{get\_\-data}!Linux::ThreadInfo@{Linux::ThreadInfo}}
\subsubsection[{get\_\-data}]{\setlength{\rightskip}{0pt plus 5cm}bool get\_\-data (const char $\ast$ {\em symbol}, \/  T \& {\em data})\hspace{0.3cm}{\ttfamily  \mbox{[}inline, private\mbox{]}}}}
\label{classLinux_1_1ThreadInfo_af0da1d324f55329a4d5ca716b05dc79f}



\begin{DoxyCode}
52     {
53         Addr addr = 0;
54         if (!sys->kernelSymtab->findAddress(symbol, addr)) {
55             warn_once("Unable to find kernel symbol %s\n", symbol);
56             warn_once("Kernel not compiled with task_struct info; can't get "
57                       "currently executing task/process/thread name/ids!\n");
58             return false;
59         }
60 
61         CopyOut(tc, &data, addr, sizeof(T));
62 
63         data = TheISA::gtoh(data);
64 
65         return true;
66     }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classLinux_1_1ThreadInfo_a6e10da530c8ba76b721d983185b1ea8d}{
\index{Linux::ThreadInfo@{Linux::ThreadInfo}!pcbb@{pcbb}}
\index{pcbb@{pcbb}!Linux::ThreadInfo@{Linux::ThreadInfo}}
\subsubsection[{pcbb}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Addr} pcbb\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classLinux_1_1ThreadInfo_a6e10da530c8ba76b721d983185b1ea8d}
\hypertarget{classLinux_1_1ThreadInfo_a8ae37465ba84acfef6af3e9b9e6dbbd5}{
\index{Linux::ThreadInfo@{Linux::ThreadInfo}!sys@{sys}}
\index{sys@{sys}!Linux::ThreadInfo@{Linux::ThreadInfo}}
\subsubsection[{sys}]{\setlength{\rightskip}{0pt plus 5cm}{\bf System}$\ast$ sys\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classLinux_1_1ThreadInfo_a8ae37465ba84acfef6af3e9b9e6dbbd5}
\hypertarget{classLinux_1_1ThreadInfo_a4455a4759e69e5ebe68ae7298cbcc37d}{
\index{Linux::ThreadInfo@{Linux::ThreadInfo}!tc@{tc}}
\index{tc@{tc}!Linux::ThreadInfo@{Linux::ThreadInfo}}
\subsubsection[{tc}]{\setlength{\rightskip}{0pt plus 5cm}{\bf ThreadContext}$\ast$ tc\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classLinux_1_1ThreadInfo_a4455a4759e69e5ebe68ae7298cbcc37d}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
arch/generic/linux/\hyperlink{threadinfo_8hh}{threadinfo.hh}\end{DoxyCompactItemize}
