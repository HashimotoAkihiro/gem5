\hypertarget{classBasePrefetcher}{
\section{クラス BasePrefetcher}
\label{classBasePrefetcher}\index{BasePrefetcher@{BasePrefetcher}}
}


{\ttfamily \#include $<$base.hh$>$}BasePrefetcherに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=5cm]{classBasePrefetcher}
\end{center}
\end{figure}
\subsection*{構成}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classBasePrefetcher_1_1DeferredPacket}{DeferredPacket}
\end{DoxyCompactItemize}
\subsection*{Public 型}
\begin{DoxyCompactItemize}
\item 
typedef BasePrefetcherParams \hyperlink{classBasePrefetcher_a46661f02a5642b04fd4e12f645ad9c5c}{Params}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classBasePrefetcher_a4dc637449366fcdfc4e764cdf12d9b11}{regStats} ()
\item 
\hyperlink{classBasePrefetcher_aff313fac14ed758d8896572ecb0b6bfe}{BasePrefetcher} (const \hyperlink{classBasePrefetcher_a46661f02a5642b04fd4e12f645ad9c5c}{Params} $\ast$p)
\item 
virtual \hyperlink{classBasePrefetcher_a36880a63235082d98e72895db229946f}{$\sim$BasePrefetcher} ()
\item 
void \hyperlink{classBasePrefetcher_a6a5d34a51c5ba1c4f87dbcc59e8b13fb}{setCache} (\hyperlink{classBaseCache}{BaseCache} $\ast$\_\-cache)
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classBasePrefetcher_a1d4199bee2a7f9e8f22bf9e84d5ceda4}{notify} (\hyperlink{classPacket}{PacketPtr} \&pkt, \hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classClockedObject_a4daae57fbf09ee5423d123f5ce330e92}{tick})
\item 
bool \hyperlink{classBasePrefetcher_a1c1743bff8e77d48e43b38e1b8bcb7e6}{inCache} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} addr, bool is\_\-secure)
\item 
bool \hyperlink{classBasePrefetcher_a7101ac3ce053ea800e49a4ff44c84ca0}{inMissQueue} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} addr, bool is\_\-secure)
\item 
\hyperlink{classPacket}{PacketPtr} \hyperlink{classBasePrefetcher_a248e1528ea5a374640182955f4793d3f}{getPacket} ()
\item 
bool \hyperlink{classBasePrefetcher_a1ea6e3ce1b4860ce7b2da36b169e6ff5}{havePending} ()
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classBasePrefetcher_a7b66a659d072bb2b2e105351949f7b2e}{nextPrefetchReadyTime} ()
\item 
virtual void \hyperlink{classBasePrefetcher_a3db7131bcae7e87e8146195a6e8be817}{calculatePrefetch} (\hyperlink{classPacket}{PacketPtr} \&pkt, \hyperlink{classstd_1_1list}{std::list}$<$ \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} $>$ \&addresses, \hyperlink{classstd_1_1list}{std::list}$<$ \hyperlink{classCycles}{Cycles} $>$ \&delays)=0
\item 
\hyperlink{classstd_1_1list}{std::list}$<$ \hyperlink{classBasePrefetcher_1_1DeferredPacket}{DeferredPacket} $>$::iterator \hyperlink{classBasePrefetcher_a50ff64f84defcdcd4e1ecc3f7df52af1}{inPrefetch} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} address, bool is\_\-secure)
\item 
bool \hyperlink{classBasePrefetcher_a0092f15516ff429fb7437fd21747fbf5}{samePage} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} a, \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} b)
\item 
const \hyperlink{classBasePrefetcher_a46661f02a5642b04fd4e12f645ad9c5c}{Params} $\ast$ \hyperlink{classBasePrefetcher_acd3c3feb78ae7a8f88fe0f110a718dff}{params} () const 
\end{DoxyCompactItemize}
\subsection*{Public 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classBasePrefetcher_aa83003235229fe6e7aae462188f4d63d}{pfIdentified}
\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classBasePrefetcher_a16b12f81a92a01a460e62a7785e0726d}{pfMSHRHit}
\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classBasePrefetcher_a61e01d10fc3d03b88341a0663ede2177}{pfCacheHit}
\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classBasePrefetcher_a2df98c96edba641dbec623185d5c801b}{pfBufferHit}
\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classBasePrefetcher_a33b63796ece1306bb25b4abcbb8e888e}{pfRemovedFull}
\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classBasePrefetcher_ac2aa69cf510d48d234493085b96d810b}{pfRemovedMSHR}
\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classBasePrefetcher_a616b66672824772fbc0ac255630074a8}{pfIssued}
\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classBasePrefetcher_a2e71998cfd3608b558c489b33280d0e6}{pfSpanPage}
\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classBasePrefetcher_ae39544ad55ce96aa1560f3f3fc8f5906}{pfSquashed}
\end{DoxyCompactItemize}
\subsection*{Protected 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classstd_1_1list}{std::list}$<$ \hyperlink{classBasePrefetcher_1_1DeferredPacket}{DeferredPacket} $>$ \hyperlink{classBasePrefetcher_acdef622ce8eca64ce81e25e37f0bc22e}{pf}
\item 
const unsigned \hyperlink{classBasePrefetcher_ad3f1cf0299fe68eb9a68a7c67232c62d}{size}
\item 
\hyperlink{classBaseCache}{BaseCache} $\ast$ \hyperlink{classBasePrefetcher_a5cc08dee7231c774489c04728dd5f169}{cache}
\item 
int \hyperlink{classBasePrefetcher_a848be51480be2b992d8a262952268fbc}{blkSize}
\item 
const \hyperlink{classCycles}{Cycles} \hyperlink{classBasePrefetcher_a46b9d67ee437c6ecdbedca8ec8d2ed40}{latency}
\item 
const unsigned \hyperlink{classBasePrefetcher_aa05c9c27f3c02725fb1574fb5218aeba}{degree}
\item 
const bool \hyperlink{classBasePrefetcher_ab84f738213bbd5196080f894c0d5aaf2}{useMasterId}
\item 
const bool \hyperlink{classBasePrefetcher_a8e2ec9b566b10d5b73a5d9fe6a90b058}{pageStop}
\item 
const bool \hyperlink{classBasePrefetcher_a198469b16ef2d026a2ffa298eb77e616}{serialSquash}
\item 
const bool \hyperlink{classBasePrefetcher_a8762c4c2c983c8eadd6c7bccfe973f5f}{onlyData}
\item 
const bool \hyperlink{classBasePrefetcher_ade1681d5d6ad302db05a204fd920a110}{onMissOnly}
\item 
const bool \hyperlink{classBasePrefetcher_a009f56092b97c79cde580c4ae5e12599}{onReadOnly}
\item 
const bool \hyperlink{classBasePrefetcher_a632f5ff02feaeadf06e58c82f3fb43c3}{onPrefetch}
\item 
\hyperlink{classSystem}{System} $\ast$ \hyperlink{classBasePrefetcher_af27ccd765f13a4b7bd119dc7579e2746}{system}
\item 
\hyperlink{request_8hh_ac366b729262fd8e7cbd3283da6f775cf}{MasterID} \hyperlink{classBasePrefetcher_a96ec6a422ac492d05f8b3edc5b58532b}{masterId}
\end{DoxyCompactItemize}


\subsection{型定義}
\hypertarget{classBasePrefetcher_a46661f02a5642b04fd4e12f645ad9c5c}{
\index{BasePrefetcher@{BasePrefetcher}!Params@{Params}}
\index{Params@{Params}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{Params}]{\setlength{\rightskip}{0pt plus 5cm}typedef BasePrefetcherParams {\bf Params}}}
\label{classBasePrefetcher_a46661f02a5642b04fd4e12f645ad9c5c}


\hyperlink{classSimObject_a0f0761d2db586a23bb2a2880b8f387bb}{SimObject}を再定義しています。

\subsection{コンストラクタとデストラクタ}
\hypertarget{classBasePrefetcher_aff313fac14ed758d8896572ecb0b6bfe}{
\index{BasePrefetcher@{BasePrefetcher}!BasePrefetcher@{BasePrefetcher}}
\index{BasePrefetcher@{BasePrefetcher}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{BasePrefetcher}]{\setlength{\rightskip}{0pt plus 5cm}{\bf BasePrefetcher} (const {\bf Params} $\ast$ {\em p})}}
\label{classBasePrefetcher_aff313fac14ed758d8896572ecb0b6bfe}



\begin{DoxyCode}
60     : ClockedObject(p), size(p->size), latency(p->latency), degree(p->degree),
61       useMasterId(p->use_master_id), pageStop(!p->cross_pages),
62       serialSquash(p->serial_squash), onlyData(p->data_accesses_only),
63       onMissOnly(p->on_miss_only), onReadOnly(p->on_read_only),
64       onPrefetch(p->on_prefetch), system(p->sys),
65       masterId(system->getMasterId(name()))
66 {
67 }
\end{DoxyCode}
\hypertarget{classBasePrefetcher_a36880a63235082d98e72895db229946f}{
\index{BasePrefetcher@{BasePrefetcher}!$\sim$BasePrefetcher@{$\sim$BasePrefetcher}}
\index{$\sim$BasePrefetcher@{$\sim$BasePrefetcher}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{$\sim$BasePrefetcher}]{\setlength{\rightskip}{0pt plus 5cm}virtual $\sim${\bf BasePrefetcher} ()\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}
\label{classBasePrefetcher_a36880a63235082d98e72895db229946f}



\begin{DoxyCode}
139 {}
\end{DoxyCode}


\subsection{関数}
\hypertarget{classBasePrefetcher_a3db7131bcae7e87e8146195a6e8be817}{
\index{BasePrefetcher@{BasePrefetcher}!calculatePrefetch@{calculatePrefetch}}
\index{calculatePrefetch@{calculatePrefetch}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{calculatePrefetch}]{\setlength{\rightskip}{0pt plus 5cm}virtual void calculatePrefetch ({\bf PacketPtr} \& {\em pkt}, \/  {\bf std::list}$<$ {\bf Addr} $>$ \& {\em addresses}, \/  {\bf std::list}$<$ {\bf Cycles} $>$ \& {\em delays})\hspace{0.3cm}{\ttfamily  \mbox{[}pure virtual\mbox{]}}}}
\label{classBasePrefetcher_a3db7131bcae7e87e8146195a6e8be817}


\hyperlink{classGHBPrefetcher_a1cc3d838a8314074cfda794f18eb6de9}{GHBPrefetcher}, \hyperlink{classStridePrefetcher_a1cc3d838a8314074cfda794f18eb6de9}{StridePrefetcher}, と \hyperlink{classTaggedPrefetcher_a1cc3d838a8314074cfda794f18eb6de9}{TaggedPrefetcher}で実装されています。\hypertarget{classBasePrefetcher_a248e1528ea5a374640182955f4793d3f}{
\index{BasePrefetcher@{BasePrefetcher}!getPacket@{getPacket}}
\index{getPacket@{getPacket}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{getPacket}]{\setlength{\rightskip}{0pt plus 5cm}{\bf PacketPtr} getPacket ()}}
\label{classBasePrefetcher_a248e1528ea5a374640182955f4793d3f}



\begin{DoxyCode}
148 {
149     DPRINTF(HWPrefetch, "Requesting a hw_pf to issue\n");
150 
151     if (pf.empty()) {
152         DPRINTF(HWPrefetch, "No HW_PF found\n");
153         return NULL;
154     }
155 
156     PacketPtr pkt = pf.begin()->pkt;
157     while (!pf.empty()) {
158         pkt = pf.begin()->pkt;
159         pf.pop_front();
160 
161         Addr blk_addr = pkt->getAddr() & ~(Addr)(blkSize-1);
162         bool is_secure = pkt->isSecure();
163 
164         if (!inCache(blk_addr, is_secure) && !inMissQueue(blk_addr, is_secure))
165             // we found a prefetch, return it
166             break;
167 
168         DPRINTF(HWPrefetch, "addr 0x%x (%s) in cache, skipping\n",
169                 pkt->getAddr(), is_secure ? "s" : "ns");
170         delete pkt->req;
171         delete pkt;
172 
173         if (pf.empty()) {
174             cache->deassertMemSideBusRequest(BaseCache::Request_PF);
175             return NULL; // None left, all were in cache
176         }
177     }
178 
179     pfIssued++;
180     assert(pkt != NULL);
181     DPRINTF(HWPrefetch, "returning 0x%x (%s)\n", pkt->getAddr(),
182             pkt->isSecure() ? "s" : "ns");
183     return pkt;
184 }
\end{DoxyCode}
\hypertarget{classBasePrefetcher_a1ea6e3ce1b4860ce7b2da36b169e6ff5}{
\index{BasePrefetcher@{BasePrefetcher}!havePending@{havePending}}
\index{havePending@{havePending}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{havePending}]{\setlength{\rightskip}{0pt plus 5cm}bool havePending ()\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classBasePrefetcher_a1ea6e3ce1b4860ce7b2da36b169e6ff5}



\begin{DoxyCode}
157     {
158         return !pf.empty();
159     }
\end{DoxyCode}
\hypertarget{classBasePrefetcher_a1c1743bff8e77d48e43b38e1b8bcb7e6}{
\index{BasePrefetcher@{BasePrefetcher}!inCache@{inCache}}
\index{inCache@{inCache}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{inCache}]{\setlength{\rightskip}{0pt plus 5cm}bool inCache ({\bf Addr} {\em addr}, \/  bool {\em is\_\-secure})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classBasePrefetcher_a1c1743bff8e77d48e43b38e1b8bcb7e6}



\begin{DoxyCode}
128 {
129     if (cache->inCache(addr, is_secure)) {
130         pfCacheHit++;
131         return true;
132     }
133     return false;
134 }
\end{DoxyCode}
\hypertarget{classBasePrefetcher_a7101ac3ce053ea800e49a4ff44c84ca0}{
\index{BasePrefetcher@{BasePrefetcher}!inMissQueue@{inMissQueue}}
\index{inMissQueue@{inMissQueue}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{inMissQueue}]{\setlength{\rightskip}{0pt plus 5cm}bool inMissQueue ({\bf Addr} {\em addr}, \/  bool {\em is\_\-secure})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classBasePrefetcher_a7101ac3ce053ea800e49a4ff44c84ca0}



\begin{DoxyCode}
138 {
139     if (cache->inMissQueue(addr, is_secure)) {
140         pfMSHRHit++;
141         return true;
142     }
143     return false;
144 }
\end{DoxyCode}
\hypertarget{classBasePrefetcher_a50ff64f84defcdcd4e1ecc3f7df52af1}{
\index{BasePrefetcher@{BasePrefetcher}!inPrefetch@{inPrefetch}}
\index{inPrefetch@{inPrefetch}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{inPrefetch}]{\setlength{\rightskip}{0pt plus 5cm}{\bf std::list}$<$ {\bf BasePrefetcher::DeferredPacket} $>$::iterator inPrefetch ({\bf Addr} {\em address}, \/  bool {\em is\_\-secure})}}
\label{classBasePrefetcher_a50ff64f84defcdcd4e1ecc3f7df52af1}



\begin{DoxyCode}
300 {
301     // Guaranteed to only be one match, we always check before inserting
302     std::list<DeferredPacket>::iterator iter;
303     for (iter = pf.begin(); iter != pf.end(); iter++) {
304         if (((*iter).pkt->getAddr() & ~(Addr)(blkSize-1)) == address &&
305             (*iter).pkt->isSecure() == is_secure) {
306             return iter;
307         }
308     }
309     return pf.end();
310 }
\end{DoxyCode}
\hypertarget{classBasePrefetcher_a7b66a659d072bb2b2e105351949f7b2e}{
\index{BasePrefetcher@{BasePrefetcher}!nextPrefetchReadyTime@{nextPrefetchReadyTime}}
\index{nextPrefetchReadyTime@{nextPrefetchReadyTime}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{nextPrefetchReadyTime}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} nextPrefetchReadyTime ()\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classBasePrefetcher_a7b66a659d072bb2b2e105351949f7b2e}



\begin{DoxyCode}
162     {
163         return pf.empty() ? MaxTick : pf.front().tick;
164     }
\end{DoxyCode}
\hypertarget{classBasePrefetcher_a1d4199bee2a7f9e8f22bf9e84d5ceda4}{
\index{BasePrefetcher@{BasePrefetcher}!notify@{notify}}
\index{notify@{notify}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{notify}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} notify ({\bf PacketPtr} \& {\em pkt}, \/  {\bf Tick} {\em tick})}}
\label{classBasePrefetcher_a1d4199bee2a7f9e8f22bf9e84d5ceda4}
Notify prefetcher of cache access (may be any access or just misses, depending on cache parameters.) 
\begin{DoxyRetVals}{戻り値}
\item[{\em \hyperlink{classTime}{Time}}]of next prefetch availability, or 0 if none. \end{DoxyRetVals}



\begin{DoxyCode}
189 {
190     // Don't consult the prefetcher if any of the following conditons are true
191     // 1) The request is uncacheable
192     // 2) The request is a fetch, but we are only prefeching data
193     // 3) The request is a cache hit, but we are only training on misses
194     // 4) THe request is a write, but we are only training on reads
195     if (!pkt->req->isUncacheable() && !(pkt->req->isInstFetch() && onlyData) &&
196         !(onMissOnly && inCache(pkt->getAddr(), true)) &&
197         !(onReadOnly && !pkt->isRead())) {
198         // Calculate the blk address
199         Addr blk_addr = pkt->getAddr() & ~(Addr)(blkSize-1);
200         bool is_secure = pkt->isSecure();
201 
202         // Check if miss is in pfq, if so remove it
203         std::list<DeferredPacket>::iterator iter = inPrefetch(blk_addr,
204                                                               is_secure);
205         if (iter != pf.end()) {
206             DPRINTF(HWPrefetch, "Saw a miss to a queued prefetch addr: "
207                     "0x%x (%s), removing it\n", blk_addr,
208                     is_secure ? "s" : "ns");
209             pfRemovedMSHR++;
210             delete iter->pkt->req;
211             delete iter->pkt;
212             iter = pf.erase(iter);
213             if (pf.empty())
214                 cache->deassertMemSideBusRequest(BaseCache::Request_PF);
215         }
216 
217         // Remove anything in queue with delay older than time
218         // since everything is inserted in time order, start from end
219         // and work until pf.empty() or time is earlier
220         // This is done to emulate Aborting the previous work on a new miss
221         // Needed for serial calculators like GHB
222         if (serialSquash) {
223             iter = pf.end();
224             if (iter != pf.begin())
225                 iter--;
226             while (!pf.empty() && iter->tick >= tick) {
227                 pfSquashed++;
228                 DPRINTF(HWPrefetch, "Squashing old prefetch addr: 0x%x\n",
229                         iter->pkt->getAddr());
230                 delete iter->pkt->req;
231                 delete iter->pkt;
232                 iter = pf.erase(iter);
233                 if (iter != pf.begin())
234                     iter--;
235             }
236             if (pf.empty())
237                 cache->deassertMemSideBusRequest(BaseCache::Request_PF);
238         }
239 
240 
241         std::list<Addr> addresses;
242         std::list<Cycles> delays;
243         calculatePrefetch(pkt, addresses, delays);
244 
245         std::list<Addr>::iterator addrIter = addresses.begin();
246         std::list<Cycles>::iterator delayIter = delays.begin();
247         for (; addrIter != addresses.end(); ++addrIter, ++delayIter) {
248             Addr addr = *addrIter;
249 
250             pfIdentified++;
251 
252             DPRINTF(HWPrefetch, "Found a pf candidate addr: 0x%x, "
253                     "inserting into prefetch queue with delay %d time %d\n",
254                     addr, *delayIter, time);
255 
256             // Check if it is already in the pf buffer
257             if (inPrefetch(addr, is_secure) != pf.end()) {
258                 pfBufferHit++;
259                 DPRINTF(HWPrefetch, "Prefetch addr already in pf buffer\n");
260                 continue;
261             }
262 
263             // create a prefetch memreq
264             Request *prefetchReq = new Request(*addrIter, blkSize, 0, masterId);
265             if (is_secure)
266                 prefetchReq->setFlags(Request::SECURE);
267             prefetchReq->taskId(ContextSwitchTaskId::Prefetcher);
268             PacketPtr prefetch =
269                 new Packet(prefetchReq, MemCmd::HardPFReq);
270             prefetch->allocate();
271             prefetch->req->setThreadContext(pkt->req->contextId(),
272                                             pkt->req->threadId());
273 
274             // Tag orefetch reqeuests with corresponding PC to train lower
275             // cache-level prefetchers
276             if (onPrefetch && pkt->req->hasPC())
277                 prefetch->req->setPC(pkt->req->getPC());
278 
279             // We just remove the head if we are full
280             if (pf.size() == size) {
281                 pfRemovedFull++;
282                 PacketPtr old_pkt = pf.begin()->pkt;
283                 DPRINTF(HWPrefetch, "Prefetch queue full, "
284                         "removing oldest 0x%x\n", old_pkt->getAddr());
285                 delete old_pkt->req;
286                 delete old_pkt;
287                 pf.pop_front();
288             }
289 
290             pf.push_back(DeferredPacket(tick + clockPeriod() * *delayIter,
291                                         prefetch));
292         }
293     }
294 
295     return pf.empty() ? 0 : pf.front().tick;
296 }
\end{DoxyCode}
\hypertarget{classBasePrefetcher_acd3c3feb78ae7a8f88fe0f110a718dff}{
\index{BasePrefetcher@{BasePrefetcher}!params@{params}}
\index{params@{params}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{params}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Params}$\ast$ params () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classBasePrefetcher_acd3c3feb78ae7a8f88fe0f110a718dff}


\hyperlink{classSimObject_acd3c3feb78ae7a8f88fe0f110a718dff}{SimObject}を再定義しています。


\begin{DoxyCode}
179     {
180         return dynamic_cast<const Params *>(_params);
181     }
\end{DoxyCode}
\hypertarget{classBasePrefetcher_a4dc637449366fcdfc4e764cdf12d9b11}{
\index{BasePrefetcher@{BasePrefetcher}!regStats@{regStats}}
\index{regStats@{regStats}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{regStats}]{\setlength{\rightskip}{0pt plus 5cm}void regStats ()\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classBasePrefetcher_a4dc637449366fcdfc4e764cdf12d9b11}
\hyperlink{classRegister}{Register} statistics for this object. 

\hyperlink{classSimObject_a4dc637449366fcdfc4e764cdf12d9b11}{SimObject}を再定義しています。


\begin{DoxyCode}
78 {
79     pfIdentified
80         .name(name() + ".prefetcher.num_hwpf_identified")
81         .desc("number of hwpf identified")
82         ;
83 
84     pfMSHRHit
85         .name(name() + ".prefetcher.num_hwpf_already_in_mshr")
86         .desc("number of hwpf that were already in mshr")
87         ;
88 
89     pfCacheHit
90         .name(name() + ".prefetcher.num_hwpf_already_in_cache")
91         .desc("number of hwpf that were already in the cache")
92         ;
93 
94     pfBufferHit
95         .name(name() + ".prefetcher.num_hwpf_already_in_prefetcher")
96         .desc("number of hwpf that were already in the prefetch queue")
97         ;
98 
99     pfRemovedFull
100         .name(name() + ".prefetcher.num_hwpf_evicted")
101         .desc("number of hwpf removed due to no buffer left")
102         ;
103 
104     pfRemovedMSHR
105         .name(name() + ".prefetcher.num_hwpf_removed_MSHR_hit")
106         .desc("number of hwpf removed because MSHR allocated")
107         ;
108 
109     pfIssued
110         .name(name() + ".prefetcher.num_hwpf_issued")
111         .desc("number of hwpf issued")
112         ;
113 
114     pfSpanPage
115         .name(name() + ".prefetcher.num_hwpf_span_page")
116         .desc("number of hwpf spanning a virtual page")
117         ;
118 
119     pfSquashed
120         .name(name() + ".prefetcher.num_hwpf_squashed_from_miss")
121         .desc("number of hwpf that got squashed due to a miss "
122               "aborting calculation time")
123         ;
124 }
\end{DoxyCode}
\hypertarget{classBasePrefetcher_a0092f15516ff429fb7437fd21747fbf5}{
\index{BasePrefetcher@{BasePrefetcher}!samePage@{samePage}}
\index{samePage@{samePage}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{samePage}]{\setlength{\rightskip}{0pt plus 5cm}bool samePage ({\bf Addr} {\em a}, \/  {\bf Addr} {\em b})}}
\label{classBasePrefetcher_a0092f15516ff429fb7437fd21747fbf5}
Utility function: are addresses a and b on the same VM page? 


\begin{DoxyCode}
314 {
315     return roundDown(a, TheISA::VMPageSize) == roundDown(b, TheISA::VMPageSize);
316 }
\end{DoxyCode}
\hypertarget{classBasePrefetcher_a6a5d34a51c5ba1c4f87dbcc59e8b13fb}{
\index{BasePrefetcher@{BasePrefetcher}!setCache@{setCache}}
\index{setCache@{setCache}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{setCache}]{\setlength{\rightskip}{0pt plus 5cm}void setCache ({\bf BaseCache} $\ast$ {\em \_\-cache})}}
\label{classBasePrefetcher_a6a5d34a51c5ba1c4f87dbcc59e8b13fb}



\begin{DoxyCode}
71 {
72     cache = _cache;
73     blkSize = cache->getBlockSize();
74 }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classBasePrefetcher_a848be51480be2b992d8a262952268fbc}{
\index{BasePrefetcher@{BasePrefetcher}!blkSize@{blkSize}}
\index{blkSize@{blkSize}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{blkSize}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf blkSize}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classBasePrefetcher_a848be51480be2b992d8a262952268fbc}
The block size of the parent cache. \hypertarget{classBasePrefetcher_a5cc08dee7231c774489c04728dd5f169}{
\index{BasePrefetcher@{BasePrefetcher}!cache@{cache}}
\index{cache@{cache}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{cache}]{\setlength{\rightskip}{0pt plus 5cm}{\bf BaseCache}$\ast$ {\bf cache}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classBasePrefetcher_a5cc08dee7231c774489c04728dd5f169}
Pointr to the parent cache. \hypertarget{classBasePrefetcher_aa05c9c27f3c02725fb1574fb5218aeba}{
\index{BasePrefetcher@{BasePrefetcher}!degree@{degree}}
\index{degree@{degree}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{degree}]{\setlength{\rightskip}{0pt plus 5cm}const unsigned {\bf degree}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classBasePrefetcher_aa05c9c27f3c02725fb1574fb5218aeba}
The number of prefetches to issue \hypertarget{classBasePrefetcher_a46b9d67ee437c6ecdbedca8ec8d2ed40}{
\index{BasePrefetcher@{BasePrefetcher}!latency@{latency}}
\index{latency@{latency}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{latency}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Cycles} {\bf latency}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classBasePrefetcher_a46b9d67ee437c6ecdbedca8ec8d2ed40}
The latency before a prefetch is issued \hypertarget{classBasePrefetcher_a96ec6a422ac492d05f8b3edc5b58532b}{
\index{BasePrefetcher@{BasePrefetcher}!masterId@{masterId}}
\index{masterId@{masterId}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{masterId}]{\setlength{\rightskip}{0pt plus 5cm}{\bf MasterID} {\bf masterId}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classBasePrefetcher_a96ec6a422ac492d05f8b3edc5b58532b}
\hyperlink{classRequest}{Request} id for prefetches \hypertarget{classBasePrefetcher_a8762c4c2c983c8eadd6c7bccfe973f5f}{
\index{BasePrefetcher@{BasePrefetcher}!onlyData@{onlyData}}
\index{onlyData@{onlyData}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{onlyData}]{\setlength{\rightskip}{0pt plus 5cm}const bool {\bf onlyData}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classBasePrefetcher_a8762c4c2c983c8eadd6c7bccfe973f5f}
Do we prefetch on only data reads, or on inst reads as well. \hypertarget{classBasePrefetcher_ade1681d5d6ad302db05a204fd920a110}{
\index{BasePrefetcher@{BasePrefetcher}!onMissOnly@{onMissOnly}}
\index{onMissOnly@{onMissOnly}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{onMissOnly}]{\setlength{\rightskip}{0pt plus 5cm}const bool {\bf onMissOnly}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classBasePrefetcher_ade1681d5d6ad302db05a204fd920a110}
Do we trigger/train prefetch on cache misses only, or all accesses. \hypertarget{classBasePrefetcher_a632f5ff02feaeadf06e58c82f3fb43c3}{
\index{BasePrefetcher@{BasePrefetcher}!onPrefetch@{onPrefetch}}
\index{onPrefetch@{onPrefetch}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{onPrefetch}]{\setlength{\rightskip}{0pt plus 5cm}const bool {\bf onPrefetch}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classBasePrefetcher_a632f5ff02feaeadf06e58c82f3fb43c3}
Do we tag prefetch's with PC addresses, allowing lower pc-\/based prefetchers to prefetch on prefetch requests \hypertarget{classBasePrefetcher_a009f56092b97c79cde580c4ae5e12599}{
\index{BasePrefetcher@{BasePrefetcher}!onReadOnly@{onReadOnly}}
\index{onReadOnly@{onReadOnly}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{onReadOnly}]{\setlength{\rightskip}{0pt plus 5cm}const bool {\bf onReadOnly}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classBasePrefetcher_a009f56092b97c79cde580c4ae5e12599}
Do we trigger/train prefetch on reads only, or all accesses. \hypertarget{classBasePrefetcher_a8e2ec9b566b10d5b73a5d9fe6a90b058}{
\index{BasePrefetcher@{BasePrefetcher}!pageStop@{pageStop}}
\index{pageStop@{pageStop}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{pageStop}]{\setlength{\rightskip}{0pt plus 5cm}const bool {\bf pageStop}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classBasePrefetcher_a8e2ec9b566b10d5b73a5d9fe6a90b058}
Do we prefetch across page boundaries. \hypertarget{classBasePrefetcher_acdef622ce8eca64ce81e25e37f0bc22e}{
\index{BasePrefetcher@{BasePrefetcher}!pf@{pf}}
\index{pf@{pf}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{pf}]{\setlength{\rightskip}{0pt plus 5cm}{\bf std::list}$<${\bf DeferredPacket}$>$ {\bf pf}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classBasePrefetcher_acdef622ce8eca64ce81e25e37f0bc22e}
The Prefetch Queue. \hypertarget{classBasePrefetcher_a2df98c96edba641dbec623185d5c801b}{
\index{BasePrefetcher@{BasePrefetcher}!pfBufferHit@{pfBufferHit}}
\index{pfBufferHit@{pfBufferHit}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{pfBufferHit}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf pfBufferHit}}}
\label{classBasePrefetcher_a2df98c96edba641dbec623185d5c801b}
\hypertarget{classBasePrefetcher_a61e01d10fc3d03b88341a0663ede2177}{
\index{BasePrefetcher@{BasePrefetcher}!pfCacheHit@{pfCacheHit}}
\index{pfCacheHit@{pfCacheHit}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{pfCacheHit}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf pfCacheHit}}}
\label{classBasePrefetcher_a61e01d10fc3d03b88341a0663ede2177}
\hypertarget{classBasePrefetcher_aa83003235229fe6e7aae462188f4d63d}{
\index{BasePrefetcher@{BasePrefetcher}!pfIdentified@{pfIdentified}}
\index{pfIdentified@{pfIdentified}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{pfIdentified}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf pfIdentified}}}
\label{classBasePrefetcher_aa83003235229fe6e7aae462188f4d63d}
\hypertarget{classBasePrefetcher_a616b66672824772fbc0ac255630074a8}{
\index{BasePrefetcher@{BasePrefetcher}!pfIssued@{pfIssued}}
\index{pfIssued@{pfIssued}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{pfIssued}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf pfIssued}}}
\label{classBasePrefetcher_a616b66672824772fbc0ac255630074a8}
\hypertarget{classBasePrefetcher_a16b12f81a92a01a460e62a7785e0726d}{
\index{BasePrefetcher@{BasePrefetcher}!pfMSHRHit@{pfMSHRHit}}
\index{pfMSHRHit@{pfMSHRHit}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{pfMSHRHit}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf pfMSHRHit}}}
\label{classBasePrefetcher_a16b12f81a92a01a460e62a7785e0726d}
\hypertarget{classBasePrefetcher_a33b63796ece1306bb25b4abcbb8e888e}{
\index{BasePrefetcher@{BasePrefetcher}!pfRemovedFull@{pfRemovedFull}}
\index{pfRemovedFull@{pfRemovedFull}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{pfRemovedFull}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf pfRemovedFull}}}
\label{classBasePrefetcher_a33b63796ece1306bb25b4abcbb8e888e}
\hypertarget{classBasePrefetcher_ac2aa69cf510d48d234493085b96d810b}{
\index{BasePrefetcher@{BasePrefetcher}!pfRemovedMSHR@{pfRemovedMSHR}}
\index{pfRemovedMSHR@{pfRemovedMSHR}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{pfRemovedMSHR}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf pfRemovedMSHR}}}
\label{classBasePrefetcher_ac2aa69cf510d48d234493085b96d810b}
\hypertarget{classBasePrefetcher_a2e71998cfd3608b558c489b33280d0e6}{
\index{BasePrefetcher@{BasePrefetcher}!pfSpanPage@{pfSpanPage}}
\index{pfSpanPage@{pfSpanPage}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{pfSpanPage}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf pfSpanPage}}}
\label{classBasePrefetcher_a2e71998cfd3608b558c489b33280d0e6}
\hypertarget{classBasePrefetcher_ae39544ad55ce96aa1560f3f3fc8f5906}{
\index{BasePrefetcher@{BasePrefetcher}!pfSquashed@{pfSquashed}}
\index{pfSquashed@{pfSquashed}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{pfSquashed}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf pfSquashed}}}
\label{classBasePrefetcher_ae39544ad55ce96aa1560f3f3fc8f5906}
\hypertarget{classBasePrefetcher_a198469b16ef2d026a2ffa298eb77e616}{
\index{BasePrefetcher@{BasePrefetcher}!serialSquash@{serialSquash}}
\index{serialSquash@{serialSquash}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{serialSquash}]{\setlength{\rightskip}{0pt plus 5cm}const bool {\bf serialSquash}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classBasePrefetcher_a198469b16ef2d026a2ffa298eb77e616}
Do we remove prefetches with later times than a new miss. \hypertarget{classBasePrefetcher_ad3f1cf0299fe68eb9a68a7c67232c62d}{
\index{BasePrefetcher@{BasePrefetcher}!size@{size}}
\index{size@{size}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{size}]{\setlength{\rightskip}{0pt plus 5cm}const unsigned {\bf size}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classBasePrefetcher_ad3f1cf0299fe68eb9a68a7c67232c62d}
The number of MSHRs in the Prefetch Queue. \hypertarget{classBasePrefetcher_af27ccd765f13a4b7bd119dc7579e2746}{
\index{BasePrefetcher@{BasePrefetcher}!system@{system}}
\index{system@{system}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{system}]{\setlength{\rightskip}{0pt plus 5cm}{\bf System}$\ast$ {\bf system}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classBasePrefetcher_af27ccd765f13a4b7bd119dc7579e2746}
\hyperlink{classSystem}{System} we belong to \hypertarget{classBasePrefetcher_ab84f738213bbd5196080f894c0d5aaf2}{
\index{BasePrefetcher@{BasePrefetcher}!useMasterId@{useMasterId}}
\index{useMasterId@{useMasterId}!BasePrefetcher@{BasePrefetcher}}
\subsubsection[{useMasterId}]{\setlength{\rightskip}{0pt plus 5cm}const bool {\bf useMasterId}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classBasePrefetcher_ab84f738213bbd5196080f894c0d5aaf2}
If patterns should be found per context id 

このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
mem/cache/prefetch/\hyperlink{mem_2cache_2prefetch_2base_8hh}{base.hh}\item 
mem/cache/prefetch/\hyperlink{mem_2cache_2prefetch_2base_8cc}{base.cc}\end{DoxyCompactItemize}
