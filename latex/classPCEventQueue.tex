\hypertarget{classPCEventQueue}{
\section{クラス PCEventQueue}
\label{classPCEventQueue}\index{PCEventQueue@{PCEventQueue}}
}


{\ttfamily \#include $<$pc\_\-event.hh$>$}\subsection*{構成}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classPCEventQueue_1_1MapCompare}{MapCompare}
\end{DoxyCompactItemize}
\subsection*{Public 型}
\begin{DoxyCompactItemize}
\item 
typedef map\_\-t::iterator \hyperlink{classPCEventQueue_a02720ab92b997d08a475408a87a9a378}{iterator}
\item 
typedef map\_\-t::const\_\-iterator \hyperlink{classPCEventQueue_a1b1044fb589ffa9451ee2a57f7649293}{const\_\-iterator}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classPCEventQueue_a718316a2d788aa19b6fc2bedf8213e23}{PCEventQueue} ()
\item 
\hyperlink{classPCEventQueue_aafeb23d2ec00e98724e77957cea69320}{$\sim$PCEventQueue} ()
\item 
bool \hyperlink{classPCEventQueue_a4a7ef09b8011f061e6d6624ed1de21b4}{remove} (\hyperlink{classPCEvent}{PCEvent} $\ast$event)
\item 
bool \hyperlink{classPCEventQueue_a3f0bfe2be12ac8f8e0ab5b1ad9633b8b}{schedule} (\hyperlink{classPCEvent}{PCEvent} $\ast$event)
\item 
bool \hyperlink{classPCEventQueue_a8060d68f4bd9328c674f6838dbb57494}{service} (\hyperlink{classThreadContext}{ThreadContext} $\ast$tc)
\item 
\hyperlink{classstd_1_1pair}{range\_\-t} \hyperlink{classPCEventQueue_a543c373cd519b8531e06bb3141f13678}{equal\_\-range} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} pc)
\item 
\hyperlink{classstd_1_1pair}{range\_\-t} \hyperlink{classPCEventQueue_af08617c0ba1693fcac0451031d9c09b9}{equal\_\-range} (\hyperlink{classPCEvent}{PCEvent} $\ast$event)
\item 
void \hyperlink{classPCEventQueue_a4a4fecb6d7cd9d0b8eb6579eee183af8}{dump} () const 
\end{DoxyCompactItemize}
\subsection*{Protected 型}
\begin{DoxyCompactItemize}
\item 
typedef \hyperlink{classPCEvent}{PCEvent} $\ast$ \hyperlink{classPCEventQueue_a0d238315b10c4db15cb81a537feeb907}{record\_\-t}
\item 
typedef \hyperlink{classstd_1_1vector}{std::vector}$<$ \hyperlink{classPCEvent}{record\_\-t} $>$ \hyperlink{classPCEventQueue_a5ea93a71647f298ad98b01e4aa156721}{map\_\-t}
\item 
typedef \hyperlink{classstd_1_1pair}{std::pair}$<$ \hyperlink{classPCEventQueue_a02720ab92b997d08a475408a87a9a378}{iterator}, \hyperlink{classPCEventQueue_a02720ab92b997d08a475408a87a9a378}{iterator} $>$ \hyperlink{classPCEventQueue_a25395d8f6c965039772100efce59edcb}{range\_\-t}
\item 
typedef \hyperlink{classstd_1_1pair}{std::pair}$<$ \hyperlink{classPCEventQueue_a1b1044fb589ffa9451ee2a57f7649293}{const\_\-iterator}, \hyperlink{classPCEventQueue_a1b1044fb589ffa9451ee2a57f7649293}{const\_\-iterator} $>$ \hyperlink{classPCEventQueue_a370a51098cf287e4725f0d54462fa1b5}{const\_\-range\_\-t}
\end{DoxyCompactItemize}
\subsection*{Protected メソッド}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classPCEventQueue_a52d7ad71fc18d1ed1be0caccabfacf6a}{doService} (\hyperlink{classThreadContext}{ThreadContext} $\ast$tc)
\end{DoxyCompactItemize}
\subsection*{Protected 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classstd_1_1vector}{map\_\-t} \hyperlink{classPCEventQueue_a2e55562092a0fea15421a9591ea20223}{pc\_\-map}
\end{DoxyCompactItemize}


\subsection{型定義}
\hypertarget{classPCEventQueue_a1b1044fb589ffa9451ee2a57f7649293}{
\index{PCEventQueue@{PCEventQueue}!const\_\-iterator@{const\_\-iterator}}
\index{const\_\-iterator@{const\_\-iterator}!PCEventQueue@{PCEventQueue}}
\subsubsection[{const\_\-iterator}]{\setlength{\rightskip}{0pt plus 5cm}typedef map\_\-t::const\_\-iterator {\bf const\_\-iterator}}}
\label{classPCEventQueue_a1b1044fb589ffa9451ee2a57f7649293}
\hypertarget{classPCEventQueue_a370a51098cf287e4725f0d54462fa1b5}{
\index{PCEventQueue@{PCEventQueue}!const\_\-range\_\-t@{const\_\-range\_\-t}}
\index{const\_\-range\_\-t@{const\_\-range\_\-t}!PCEventQueue@{PCEventQueue}}
\subsubsection[{const\_\-range\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf std::pair}$<${\bf const\_\-iterator}, {\bf const\_\-iterator}$>$ {\bf const\_\-range\_\-t}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classPCEventQueue_a370a51098cf287e4725f0d54462fa1b5}
\hypertarget{classPCEventQueue_a02720ab92b997d08a475408a87a9a378}{
\index{PCEventQueue@{PCEventQueue}!iterator@{iterator}}
\index{iterator@{iterator}!PCEventQueue@{PCEventQueue}}
\subsubsection[{iterator}]{\setlength{\rightskip}{0pt plus 5cm}typedef map\_\-t::iterator {\bf iterator}}}
\label{classPCEventQueue_a02720ab92b997d08a475408a87a9a378}
\hypertarget{classPCEventQueue_a5ea93a71647f298ad98b01e4aa156721}{
\index{PCEventQueue@{PCEventQueue}!map\_\-t@{map\_\-t}}
\index{map\_\-t@{map\_\-t}!PCEventQueue@{PCEventQueue}}
\subsubsection[{map\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf std::vector}$<${\bf record\_\-t}$>$ {\bf map\_\-t}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classPCEventQueue_a5ea93a71647f298ad98b01e4aa156721}
\hypertarget{classPCEventQueue_a25395d8f6c965039772100efce59edcb}{
\index{PCEventQueue@{PCEventQueue}!range\_\-t@{range\_\-t}}
\index{range\_\-t@{range\_\-t}!PCEventQueue@{PCEventQueue}}
\subsubsection[{range\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf std::pair}$<${\bf iterator}, {\bf iterator}$>$ {\bf range\_\-t}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classPCEventQueue_a25395d8f6c965039772100efce59edcb}
\hypertarget{classPCEventQueue_a0d238315b10c4db15cb81a537feeb907}{
\index{PCEventQueue@{PCEventQueue}!record\_\-t@{record\_\-t}}
\index{record\_\-t@{record\_\-t}!PCEventQueue@{PCEventQueue}}
\subsubsection[{record\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf PCEvent}$\ast$ {\bf record\_\-t}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classPCEventQueue_a0d238315b10c4db15cb81a537feeb907}


\subsection{コンストラクタとデストラクタ}
\hypertarget{classPCEventQueue_a718316a2d788aa19b6fc2bedf8213e23}{
\index{PCEventQueue@{PCEventQueue}!PCEventQueue@{PCEventQueue}}
\index{PCEventQueue@{PCEventQueue}!PCEventQueue@{PCEventQueue}}
\subsubsection[{PCEventQueue}]{\setlength{\rightskip}{0pt plus 5cm}{\bf PCEventQueue} ()}}
\label{classPCEventQueue_a718316a2d788aa19b6fc2bedf8213e23}



\begin{DoxyCode}
48 {}
\end{DoxyCode}
\hypertarget{classPCEventQueue_aafeb23d2ec00e98724e77957cea69320}{
\index{PCEventQueue@{PCEventQueue}!$\sim$PCEventQueue@{$\sim$PCEventQueue}}
\index{$\sim$PCEventQueue@{$\sim$PCEventQueue}!PCEventQueue@{PCEventQueue}}
\subsubsection[{$\sim$PCEventQueue}]{\setlength{\rightskip}{0pt plus 5cm}$\sim${\bf PCEventQueue} ()}}
\label{classPCEventQueue_aafeb23d2ec00e98724e77957cea69320}



\begin{DoxyCode}
51 {}
\end{DoxyCode}


\subsection{関数}
\hypertarget{classPCEventQueue_a52d7ad71fc18d1ed1be0caccabfacf6a}{
\index{PCEventQueue@{PCEventQueue}!doService@{doService}}
\index{doService@{doService}!PCEventQueue@{PCEventQueue}}
\subsubsection[{doService}]{\setlength{\rightskip}{0pt plus 5cm}bool doService ({\bf ThreadContext} $\ast$ {\em tc})\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classPCEventQueue_a52d7ad71fc18d1ed1be0caccabfacf6a}



\begin{DoxyCode}
89 {
90     // This will fail to break on Alpha PALcode addresses, but that is
91     // a rare use case.
92     Addr pc = tc->instAddr();
93     int serviced = 0;
94     range_t range = equal_range(pc);
95     for (iterator i = range.first; i != range.second; ++i) {
96         // Make sure that the pc wasn't changed as the side effect of
97         // another event.  This for example, prevents two invocations
98         // of the SkipFuncEvent.  Maybe we should have separate PC
99         // event queues for each processor?
100         if (pc != tc->instAddr())
101             continue;
102 
103         DPRINTF(PCEvent, "PC based event serviced at %#x: %s\n",
104                 (*i)->pc(), (*i)->descr());
105 
106         (*i)->process(tc);
107         ++serviced;
108     }
109 
110     return serviced > 0;
111 }
\end{DoxyCode}
\hypertarget{classPCEventQueue_a4a4fecb6d7cd9d0b8eb6579eee183af8}{
\index{PCEventQueue@{PCEventQueue}!dump@{dump}}
\index{dump@{dump}!PCEventQueue@{PCEventQueue}}
\subsubsection[{dump}]{\setlength{\rightskip}{0pt plus 5cm}void dump () const}}
\label{classPCEventQueue_a4a4fecb6d7cd9d0b8eb6579eee183af8}



\begin{DoxyCode}
115 {
116     const_iterator i = pc_map.begin();
117     const_iterator e = pc_map.end();
118 
119     for (; i != e; ++i)
120         cprintf("%d: event at %#x: %s\n", curTick(), (*i)->pc(),
121                 (*i)->descr());
122 }
\end{DoxyCode}
\hypertarget{classPCEventQueue_af08617c0ba1693fcac0451031d9c09b9}{
\index{PCEventQueue@{PCEventQueue}!equal\_\-range@{equal\_\-range}}
\index{equal\_\-range@{equal\_\-range}!PCEventQueue@{PCEventQueue}}
\subsubsection[{equal\_\-range}]{\setlength{\rightskip}{0pt plus 5cm}{\bf range\_\-t} equal\_\-range ({\bf PCEvent} $\ast$ {\em event})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classPCEventQueue_af08617c0ba1693fcac0451031d9c09b9}



\begin{DoxyCode}
112 { return equal_range(event->pc()); }
\end{DoxyCode}
\hypertarget{classPCEventQueue_a543c373cd519b8531e06bb3141f13678}{
\index{PCEventQueue@{PCEventQueue}!equal\_\-range@{equal\_\-range}}
\index{equal\_\-range@{equal\_\-range}!PCEventQueue@{PCEventQueue}}
\subsubsection[{equal\_\-range}]{\setlength{\rightskip}{0pt plus 5cm}{\bf PCEventQueue::range\_\-t} equal\_\-range ({\bf Addr} {\em pc})}}
\label{classPCEventQueue_a543c373cd519b8531e06bb3141f13678}



\begin{DoxyCode}
126 {
127     return std::equal_range(pc_map.begin(), pc_map.end(), pc, MapCompare());
128 }
\end{DoxyCode}
\hypertarget{classPCEventQueue_a4a7ef09b8011f061e6d6624ed1de21b4}{
\index{PCEventQueue@{PCEventQueue}!remove@{remove}}
\index{remove@{remove}!PCEventQueue@{PCEventQueue}}
\subsubsection[{remove}]{\setlength{\rightskip}{0pt plus 5cm}bool remove ({\bf PCEvent} $\ast$ {\em event})}}
\label{classPCEventQueue_a4a7ef09b8011f061e6d6624ed1de21b4}



\begin{DoxyCode}
55 {
56     int removed = 0;
57     range_t range = equal_range(event);
58     iterator i = range.first;
59     while (i != range.second &&
60            i != pc_map.end()) {
61         if (*i == event) {
62             DPRINTF(PCEvent, "PC based event removed at %#x: %s\n",
63                     event->pc(), event->descr());
64             i = pc_map.erase(i);
65             ++removed;
66         } else {
67             i++;
68         }
69 
70     }
71 
72     return removed > 0;
73 }
\end{DoxyCode}
\hypertarget{classPCEventQueue_a3f0bfe2be12ac8f8e0ab5b1ad9633b8b}{
\index{PCEventQueue@{PCEventQueue}!schedule@{schedule}}
\index{schedule@{schedule}!PCEventQueue@{PCEventQueue}}
\subsubsection[{schedule}]{\setlength{\rightskip}{0pt plus 5cm}bool schedule ({\bf PCEvent} $\ast$ {\em event})}}
\label{classPCEventQueue_a3f0bfe2be12ac8f8e0ab5b1ad9633b8b}



\begin{DoxyCode}
77 {
78     pc_map.push_back(event);
79     sort(pc_map.begin(), pc_map.end(), MapCompare());
80 
81     DPRINTF(PCEvent, "PC based event scheduled for %#x: %s\n",
82             event->pc(), event->descr());
83 
84     return true;
85 }
\end{DoxyCode}
\hypertarget{classPCEventQueue_a8060d68f4bd9328c674f6838dbb57494}{
\index{PCEventQueue@{PCEventQueue}!service@{service}}
\index{service@{service}!PCEventQueue@{PCEventQueue}}
\subsubsection[{service}]{\setlength{\rightskip}{0pt plus 5cm}bool service ({\bf ThreadContext} $\ast$ {\em tc})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classPCEventQueue_a8060d68f4bd9328c674f6838dbb57494}



\begin{DoxyCode}
104     {
105         if (pc_map.empty())
106             return false;
107 
108         return doService(tc);
109     }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classPCEventQueue_a2e55562092a0fea15421a9591ea20223}{
\index{PCEventQueue@{PCEventQueue}!pc\_\-map@{pc\_\-map}}
\index{pc\_\-map@{pc\_\-map}!PCEventQueue@{PCEventQueue}}
\subsubsection[{pc\_\-map}]{\setlength{\rightskip}{0pt plus 5cm}{\bf map\_\-t} {\bf pc\_\-map}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classPCEventQueue_a2e55562092a0fea15421a9591ea20223}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
cpu/\hyperlink{pc__event_8hh}{pc\_\-event.hh}\item 
cpu/\hyperlink{pc__event_8cc}{pc\_\-event.cc}\end{DoxyCompactItemize}
