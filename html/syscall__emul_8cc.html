<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: sim/syscall_emul.cc</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li><a href="annotated.html"><span>クラス</span></a></li>
      <li class="current"><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>ファイル一覧</span></a></li>
      <li><a href="globals.html"><span>ファイルメンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>sim/syscall_emul.cc</h1><code>#include &lt;fcntl.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;cstdio&gt;</code><br/>
<code>#include &lt;iostream&gt;</code><br/>
<code>#include &lt;string&gt;</code><br/>
<code>#include &quot;arch/utility.hh&quot;</code><br/>
<code>#include &quot;<a class="el" href="chunk__generator_8hh_source.html">base/chunk_generator.hh</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="trace_8hh_source.html">base/trace.hh</a>&quot;</code><br/>
<code>#include &quot;config/the_isa.hh&quot;</code><br/>
<code>#include &quot;<a class="el" href="cpu_2base_8hh_source.html">cpu/base.hh</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="thread__context_8hh_source.html">cpu/thread_context.hh</a>&quot;</code><br/>
<code>#include &quot;debug/SyscallVerbose.hh&quot;</code><br/>
<code>#include &quot;<a class="el" href="page__table_8hh_source.html">mem/page_table.hh</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="sim_2process_8hh_source.html">sim/process.hh</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="sim__exit_8hh_source.html">sim/sim_exit.hh</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="syscall__emul_8hh_source.html">sim/syscall_emul.hh</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="sim_2system_8hh_source.html">sim/system.hh</a>&quot;</code><br/>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>関数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a8706a3119dceec44ebd348035b2c74b1">unimplementedFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int callnum, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handler for unimplemented syscalls that we haven't thought about.  <a href="#a8706a3119dceec44ebd348035b2c74b1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a0eb648021cba31bfd0a11f7beb66b37c">ignoreFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int callnum, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#ad7fb5e5fe6d3afcdad2db282000415ca">ignoreWarnOnceFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int callnum, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#ad5134f2e6c066f51d4992f52975010ef">exitFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int callnum, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target <a class="el" href="namespaceX86ISA.html#aab9b5a2e1cd2f24d08a9872895ded9c9">exit()</a> handler: terminate current context.  <a href="#ad5134f2e6c066f51d4992f52975010ef"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#ac5e89d05896f25508b753d37f1b5d469">exitGroupFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int callnum, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target exit_group() handler: terminate simulation. (exit all threads).  <a href="#ac5e89d05896f25508b753d37f1b5d469"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a5961ea78f5b078d3c0881362b6992b3a">getpagesizeFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int num, <a class="el" href="classLiveProcess.html">LiveProcess</a> *p, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target getpagesize() handler.  <a href="#a5961ea78f5b078d3c0881362b6992b3a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#aacb64b1e0489626a0c931f076d2f4f31">brkFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int num, <a class="el" href="classLiveProcess.html">LiveProcess</a> *p, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target brk() handler: set brk address.  <a href="#aacb64b1e0489626a0c931f076d2f4f31"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a1cd0dfa0a5c6e64cc402c1a17fe6a86d">closeFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int num, <a class="el" href="classLiveProcess.html">LiveProcess</a> *p, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target close() handler.  <a href="#a1cd0dfa0a5c6e64cc402c1a17fe6a86d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a5cb187a0afcfb802a06396f382fe5ada">readFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int num, <a class="el" href="classLiveProcess.html">LiveProcess</a> *p, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target read() handler.  <a href="#a5cb187a0afcfb802a06396f382fe5ada"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a0d5b24a5c07baeac543de44989b73d43">writeFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int num, <a class="el" href="classLiveProcess.html">LiveProcess</a> *p, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target write() handler.  <a href="#a0d5b24a5c07baeac543de44989b73d43"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#aa37fa875550097f17e97de14c6964464">lseekFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int num, <a class="el" href="classLiveProcess.html">LiveProcess</a> *p, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target lseek() handler.  <a href="#aa37fa875550097f17e97de14c6964464"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#ab86e19440d57fb509cde4f13d38fffda">_llseekFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int num, <a class="el" href="classLiveProcess.html">LiveProcess</a> *p, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target _llseek() handler.  <a href="#ab86e19440d57fb509cde4f13d38fffda"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a627dd30ab77faa503107792836ea2158">munmapFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int num, <a class="el" href="classLiveProcess.html">LiveProcess</a> *p, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target munmap() handler.  <a href="#a627dd30ab77faa503107792836ea2158"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a82c247bc55c192c038a032fb9bcb884a">gethostnameFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int num, <a class="el" href="classLiveProcess.html">LiveProcess</a> *p, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target gethostname() handler.  <a href="#a82c247bc55c192c038a032fb9bcb884a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#ae2dad23a33eba280d86c2592fcd93fe9">getcwdFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int num, <a class="el" href="classLiveProcess.html">LiveProcess</a> *p, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target getcwd() handler.  <a href="#ae2dad23a33eba280d86c2592fcd93fe9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#ac467bbe13470753cfd16f6e21dee9b03">readlinkFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int callnum, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target open() handler.  <a href="#ac467bbe13470753cfd16f6e21dee9b03"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a9034f6b19f98de95e1d15aebf096e184">readlinkFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int num, <a class="el" href="classLiveProcess.html">LiveProcess</a> *p, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc, int index)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target readlink() handler.  <a href="#a9034f6b19f98de95e1d15aebf096e184"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a332ee720b2d3c8f128b10627f87a9a67">unlinkFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int num, <a class="el" href="classLiveProcess.html">LiveProcess</a> *p, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target unlink() handler.  <a href="#a332ee720b2d3c8f128b10627f87a9a67"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#aeada7d30dbed17e022348fdce3bdebc6">mkdirFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int num, <a class="el" href="classLiveProcess.html">LiveProcess</a> *p, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target mkdir() handler.  <a href="#aeada7d30dbed17e022348fdce3bdebc6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a7a4679edd20bcb6c6095d9641bf60a41">renameFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int num, <a class="el" href="classLiveProcess.html">LiveProcess</a> *p, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target rename() handler.  <a href="#a7a4679edd20bcb6c6095d9641bf60a41"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a6e21e57c806344e2ecbb7d2c952af5f9">truncateFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int num, <a class="el" href="classLiveProcess.html">LiveProcess</a> *p, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target truncate() handler.  <a href="#a6e21e57c806344e2ecbb7d2c952af5f9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a2b22628f4325f458a392c5064c840854">ftruncateFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int num, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target ftruncate() handler.  <a href="#a2b22628f4325f458a392c5064c840854"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#aa5bd0e27e30b6cde5f6e3ad3d2ad2afb">truncate64Func</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int num, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target truncate64() handler.  <a href="#aa5bd0e27e30b6cde5f6e3ad3d2ad2afb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#acf20461ebd534883e126917628cf1014">ftruncate64Func</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int num, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target ftruncate64() handler.  <a href="#acf20461ebd534883e126917628cf1014"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a8d8282d6d3230e5079ae0008964fa42d">umaskFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int num, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target umask() handler.  <a href="#a8d8282d6d3230e5079ae0008964fa42d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a30e4f3dddc7a190609b40155566eb23f">chownFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int num, <a class="el" href="classLiveProcess.html">LiveProcess</a> *p, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target chown() handler.  <a href="#a30e4f3dddc7a190609b40155566eb23f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a49ef4f5de745c6ee566e9fd8611771cd">fchownFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int num, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target fchown() handler.  <a href="#a49ef4f5de745c6ee566e9fd8611771cd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a56b6a187c0e6aa20f278735a8d555dbd">dupFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int num, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target dup() handler.  <a href="#a56b6a187c0e6aa20f278735a8d555dbd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a78ca4a2b9dba73eeb4fb283cc95a25e9">fcntlFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int num, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target fnctl() handler.  <a href="#a78ca4a2b9dba73eeb4fb283cc95a25e9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a6e50686b7758443953966999dcd80f40">fcntl64Func</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int num, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target fcntl64() handler.  <a href="#a6e50686b7758443953966999dcd80f40"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a17e13d1e4b9ccca44558d44e9dfde562">pipePseudoFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int callnum, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a586e2c98cfb680360dffccb5a0abc9e8">getpidPseudoFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int callnum, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target getpidPseudo() handler.  <a href="#a586e2c98cfb680360dffccb5a0abc9e8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a76cafd839835d0a079876d02ca854ce8">getuidPseudoFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int callnum, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target getuidPseudo() handler.  <a href="#a76cafd839835d0a079876d02ca854ce8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#af2c806041ac8d5f5b4a10e83ffe8769c">getgidPseudoFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int callnum, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target getgidPseudo() handler.  <a href="#af2c806041ac8d5f5b4a10e83ffe8769c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a3325f33075590dada9259b8de53df322">setuidFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int callnum, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target setuid() handler.  <a href="#a3325f33075590dada9259b8de53df322"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#afb43ae09ff692fb2d2a10ab38ca7f007">getpidFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int callnum, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target getpid() handler.  <a href="#afb43ae09ff692fb2d2a10ab38ca7f007"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a25247757bb07a46e63c248e3d5ebf95a">getppidFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int callnum, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target getppid() handler.  <a href="#a25247757bb07a46e63c248e3d5ebf95a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a7702c7e92d0895d004c43c9e5b107c9b">getuidFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int callnum, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target getuid() handler.  <a href="#a7702c7e92d0895d004c43c9e5b107c9b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#aabf7c2a33e41b3dc33cfc0ae922cbf67">geteuidFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int callnum, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target geteuid() handler.  <a href="#aabf7c2a33e41b3dc33cfc0ae922cbf67"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a8a2cde751ec4fd7659871ada0da6fa30">getgidFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int callnum, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target getgid() handler.  <a href="#a8a2cde751ec4fd7659871ada0da6fa30"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#adcfb0b887e6c1956270482d4f501b54e">getegidFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int callnum, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target getegid() handler.  <a href="#adcfb0b887e6c1956270482d4f501b54e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#af78ac487014e77d836b4b0b2c2b6be89">cloneFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int callnum, <a class="el" href="classLiveProcess.html">LiveProcess</a> *process, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target clone() handler.  <a href="#af78ac487014e77d836b4b0b2c2b6be89"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a2778a7f634d71c4854efd01bf2f01410">accessFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int callnum, <a class="el" href="classLiveProcess.html">LiveProcess</a> *p, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc, int index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSyscallReturn.html">SyscallReturn</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#a50b3106b3ff7b4778957d8f5abd85b0f">accessFunc</a> (<a class="el" href="classSyscallDesc.html">SyscallDesc</a> *desc, int callnum, <a class="el" href="classLiveProcess.html">LiveProcess</a> *p, <a class="el" href="classThreadContext.html">ThreadContext</a> *tc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Target access() handler.  <a href="#a50b3106b3ff7b4778957d8f5abd85b0f"></a><br/></td></tr>
<tr><td colspan="2"><h2>変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall__emul_8cc.html#aad01339e89106fdf68f57ef118956fa9">hostname</a> = &quot;m5.eecs.umich.edu&quot;</td></tr>
</table>
<hr/><h2>関数</h2>
<a class="anchor" id="ab86e19440d57fb509cde4f13d38fffda"></a><!-- doxytag: member="syscall_emul.cc::_llseekFunc" ref="ab86e19440d57fb509cde4f13d38fffda" args="(SyscallDesc *desc, int num, LiveProcess *p, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> _llseekFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target _llseek() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00264"></a>00264 {
<a name="l00265"></a>00265     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00266"></a>00266     <span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a87001e8063b8b1b5dc88f5a4b43b2a5a">fd</a> = p-&gt;<a class="code" href="classProcess.html#ac7bb7ef35884d6fb4a2c02f167ab7679">sim_fd</a>(p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index));
<a name="l00267"></a>00267     uint64_t offset_high = p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00268"></a>00268     <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> offset_low = p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00269"></a>00269     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> result_ptr = p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00270"></a>00270     <span class="keywordtype">int</span> whence = p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00271"></a>00271 
<a name="l00272"></a>00272     uint64_t <a class="code" href="namespaceArmISA.html#a87b7a740701cddafb930a9460e9f4eba">offset</a> = (offset_high &lt;&lt; 32) | offset_low;
<a name="l00273"></a>00273 
<a name="l00274"></a>00274     uint64_t result = lseek(fd, offset, whence);
<a name="l00275"></a>00275     result = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">TheISA::htog</a>(result);
<a name="l00276"></a>00276 
<a name="l00277"></a>00277     <span class="keywordflow">if</span> (result == (off_t)-1) {
<a name="l00278"></a>00278         <span class="comment">//The seek failed.</span>
<a name="l00279"></a>00279         <span class="keywordflow">return</span> -errno;
<a name="l00280"></a>00280     } <span class="keywordflow">else</span> {
<a name="l00281"></a>00281         <span class="comment">// The seek succeeded.</span>
<a name="l00282"></a>00282         <span class="comment">// Copy &quot;result&quot; to &quot;result_ptr&quot;</span>
<a name="l00283"></a>00283         <span class="comment">// XXX We&apos;ll assume that the size of loff_t is 64 bits on the</span>
<a name="l00284"></a>00284         <span class="comment">// target platform</span>
<a name="l00285"></a>00285         <a class="code" href="classBufferArg.html">BufferArg</a> result_buf(result_ptr, <span class="keyword">sizeof</span>(result));
<a name="l00286"></a>00286         memcpy(result_buf.bufferPtr(), &amp;result, <span class="keyword">sizeof</span>(result));
<a name="l00287"></a>00287         result_buf.copyOut(tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>());
<a name="l00288"></a>00288         <span class="keywordflow">return</span> 0;
<a name="l00289"></a>00289     }
<a name="l00290"></a>00290 
<a name="l00291"></a>00291 
<a name="l00292"></a>00292     <span class="keywordflow">return</span> (result == (off_t)-1) ? -errno : result;
<a name="l00293"></a>00293 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a50b3106b3ff7b4778957d8f5abd85b0f"></a><!-- doxytag: member="syscall_emul.cc::accessFunc" ref="a50b3106b3ff7b4778957d8f5abd85b0f" args="(SyscallDesc *desc, int callnum, LiveProcess *p, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> accessFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>callnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target access() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00880"></a>00880 {
<a name="l00881"></a>00881     <span class="keywordflow">return</span> <a class="code" href="syscall__emul_8cc.html#a2778a7f634d71c4854efd01bf2f01410">accessFunc</a>(desc, callnum, p, tc, 0);
<a name="l00882"></a>00882 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2778a7f634d71c4854efd01bf2f01410"></a><!-- doxytag: member="syscall_emul.cc::accessFunc" ref="a2778a7f634d71c4854efd01bf2f01410" args="(SyscallDesc *desc, int callnum, LiveProcess *p, ThreadContext *tc, int index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> accessFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>callnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00864"></a>00864 {
<a name="l00865"></a>00865     <span class="keywordtype">string</span> path;
<a name="l00866"></a>00866     <span class="keywordflow">if</span> (!tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>().<a class="code" href="classSETranslatingPortProxy.html#a566bb321a4a4657816925b1421a8abfa">tryReadString</a>(path, p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a>)))
<a name="l00867"></a>00867         <span class="keywordflow">return</span> -EFAULT;
<a name="l00868"></a>00868 
<a name="l00869"></a>00869     <span class="comment">// Adjust path for current working directory</span>
<a name="l00870"></a>00870     path = p-&gt;<a class="code" href="classLiveProcess.html#a9c94a4c8c47961ea420f67ad43c4a5e5">fullPath</a>(path);
<a name="l00871"></a>00871 
<a name="l00872"></a>00872     mode_t <a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a> = p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a>);
<a name="l00873"></a>00873 
<a name="l00874"></a>00874     <span class="keywordtype">int</span> result = access(path.c_str(), mode);
<a name="l00875"></a>00875     <span class="keywordflow">return</span> (result == -1) ? -errno : result;
<a name="l00876"></a>00876 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aacb64b1e0489626a0c931f076d2f4f31"></a><!-- doxytag: member="syscall_emul.cc::brkFunc" ref="aacb64b1e0489626a0c931f076d2f4f31" args="(SyscallDesc *desc, int num, LiveProcess *p, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> brkFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target brk() handler: set brk address. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00154"></a>00154 {
<a name="l00155"></a>00155     <span class="comment">// change brk addr to first arg</span>
<a name="l00156"></a>00156     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00157"></a>00157     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> new_brk = p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00158"></a>00158 
<a name="l00159"></a>00159     <span class="comment">// in Linux at least, brk(0) returns the current break value</span>
<a name="l00160"></a>00160     <span class="comment">// (note that the syscall and the glibc function have different behavior)</span>
<a name="l00161"></a>00161     <span class="keywordflow">if</span> (new_brk == 0)
<a name="l00162"></a>00162         <span class="keywordflow">return</span> p-&gt;<a class="code" href="classProcess.html#aa0d3d9ff2a6fcb719d3b83226bb50638">brk_point</a>;
<a name="l00163"></a>00163 
<a name="l00164"></a>00164     <span class="keywordflow">if</span> (new_brk &gt; p-&gt;<a class="code" href="classProcess.html#aa0d3d9ff2a6fcb719d3b83226bb50638">brk_point</a>) {
<a name="l00165"></a>00165         <span class="comment">// might need to allocate some new pages</span>
<a name="l00166"></a>00166         <span class="keywordflow">for</span> (<a class="code" href="classChunkGenerator.html">ChunkGenerator</a> gen(p-&gt;<a class="code" href="classProcess.html#aa0d3d9ff2a6fcb719d3b83226bb50638">brk_point</a>, new_brk - p-&gt;<a class="code" href="classProcess.html#aa0d3d9ff2a6fcb719d3b83226bb50638">brk_point</a>,
<a name="l00167"></a>00167                                 <a class="code" href="namespaceAlphaISA.html#a06fc87d81c62e9abb8790b6e5713c55babe0c83362ff9a394bc07b0e26f089b83">VMPageSize</a>); !gen.done(); gen.next()) {
<a name="l00168"></a>00168             <span class="keywordflow">if</span> (!p-&gt;<a class="code" href="classProcess.html#ad14ffa23ad731f6003755b643f999049">pTable</a>-&gt;<a class="code" href="classPageTable.html#a1fa58423b982a3454aadc9b5e932e9ed">translate</a>(gen.addr()))
<a name="l00169"></a>00169                 p-&gt;<a class="code" href="classProcess.html#aaebf8af407502fcc035e598795f77089">allocateMem</a>(<a class="code" href="intmath_8hh.html#a343c19b0ae885d5f3c7960987096e9d5">roundDown</a>(gen.addr(), <a class="code" href="namespaceAlphaISA.html#a06fc87d81c62e9abb8790b6e5713c55babe0c83362ff9a394bc07b0e26f089b83">VMPageSize</a>), <a class="code" href="namespaceAlphaISA.html#a06fc87d81c62e9abb8790b6e5713c55babe0c83362ff9a394bc07b0e26f089b83">VMPageSize</a>);
<a name="l00170"></a>00170 
<a name="l00171"></a>00171             <span class="comment">// if the address is already there, zero it out</span>
<a name="l00172"></a>00172             <span class="keywordflow">else</span> {
<a name="l00173"></a>00173                 uint8_t zero  = 0;
<a name="l00174"></a>00174                 <a class="code" href="classSETranslatingPortProxy.html">SETranslatingPortProxy</a> &amp;tp = tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>();
<a name="l00175"></a>00175 
<a name="l00176"></a>00176                 <span class="comment">// split non-page aligned accesses</span>
<a name="l00177"></a>00177                 <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> next_page = <a class="code" href="intmath_8hh.html#a4d254a89b294890f6ce3a474f4e8c6c7">roundUp</a>(gen.addr(), <a class="code" href="namespaceAlphaISA.html#a06fc87d81c62e9abb8790b6e5713c55babe0c83362ff9a394bc07b0e26f089b83">VMPageSize</a>);
<a name="l00178"></a>00178                 <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> size_needed = next_page - gen.addr();
<a name="l00179"></a>00179                 tp.<a class="code" href="classSETranslatingPortProxy.html#ab8c719f72992ac0e0b2b9a2c464a1456">memsetBlob</a>(gen.addr(), zero, size_needed);
<a name="l00180"></a>00180                 <span class="keywordflow">if</span> (gen.addr() + <a class="code" href="namespaceAlphaISA.html#a06fc87d81c62e9abb8790b6e5713c55babe0c83362ff9a394bc07b0e26f089b83">VMPageSize</a> &gt; next_page &amp;&amp;
<a name="l00181"></a>00181                     next_page &lt; new_brk &amp;&amp;
<a name="l00182"></a>00182                     p-&gt;<a class="code" href="classProcess.html#ad14ffa23ad731f6003755b643f999049">pTable</a>-&gt;<a class="code" href="classPageTable.html#a1fa58423b982a3454aadc9b5e932e9ed">translate</a>(next_page))
<a name="l00183"></a>00183                 {
<a name="l00184"></a>00184                     size_needed = <a class="code" href="namespaceAlphaISA.html#a06fc87d81c62e9abb8790b6e5713c55babe0c83362ff9a394bc07b0e26f089b83">VMPageSize</a> - size_needed;
<a name="l00185"></a>00185                     tp.<a class="code" href="classSETranslatingPortProxy.html#ab8c719f72992ac0e0b2b9a2c464a1456">memsetBlob</a>(next_page, zero, size_needed);
<a name="l00186"></a>00186                 }
<a name="l00187"></a>00187             }
<a name="l00188"></a>00188         }
<a name="l00189"></a>00189     }
<a name="l00190"></a>00190 
<a name="l00191"></a>00191     p-&gt;<a class="code" href="classProcess.html#aa0d3d9ff2a6fcb719d3b83226bb50638">brk_point</a> = new_brk;
<a name="l00192"></a>00192     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(SyscallVerbose, <span class="stringliteral">&quot;Break Point changed to: %#X\n&quot;</span>, p-&gt;<a class="code" href="classProcess.html#aa0d3d9ff2a6fcb719d3b83226bb50638">brk_point</a>);
<a name="l00193"></a>00193     <span class="keywordflow">return</span> p-&gt;<a class="code" href="classProcess.html#aa0d3d9ff2a6fcb719d3b83226bb50638">brk_point</a>;
<a name="l00194"></a>00194 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a30e4f3dddc7a190609b40155566eb23f"></a><!-- doxytag: member="syscall_emul.cc::chownFunc" ref="a30e4f3dddc7a190609b40155566eb23f" args="(SyscallDesc *desc, int num, LiveProcess *p, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> chownFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target chown() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00533"></a>00533 {
<a name="l00534"></a>00534     <span class="keywordtype">string</span> path;
<a name="l00535"></a>00535 
<a name="l00536"></a>00536     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00537"></a>00537     <span class="keywordflow">if</span> (!tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>().<a class="code" href="classSETranslatingPortProxy.html#a566bb321a4a4657816925b1421a8abfa">tryReadString</a>(path, p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index)))
<a name="l00538"></a>00538         <span class="keywordflow">return</span> -EFAULT;
<a name="l00539"></a>00539 
<a name="l00540"></a>00540     <span class="comment">/* XXX endianess */</span>
<a name="l00541"></a>00541     <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> owner = p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00542"></a>00542     uid_t hostOwner = owner;
<a name="l00543"></a>00543     <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> group = p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00544"></a>00544     gid_t hostGroup = group;
<a name="l00545"></a>00545 
<a name="l00546"></a>00546     <span class="comment">// Adjust path for current working directory</span>
<a name="l00547"></a>00547     path = p-&gt;<a class="code" href="classLiveProcess.html#a9c94a4c8c47961ea420f67ad43c4a5e5">fullPath</a>(path);
<a name="l00548"></a>00548 
<a name="l00549"></a>00549     <span class="keywordtype">int</span> result = chown(path.c_str(), hostOwner, hostGroup);
<a name="l00550"></a>00550     <span class="keywordflow">return</span> (result == -1) ? -errno : result;
<a name="l00551"></a>00551 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af78ac487014e77d836b4b0b2c2b6be89"></a><!-- doxytag: member="syscall_emul.cc::cloneFunc" ref="af78ac487014e77d836b4b0b2c2b6be89" args="(SyscallDesc *desc, int callnum, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> cloneFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>callnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target clone() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00782"></a>00782 {
<a name="l00783"></a>00783     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00784"></a>00784     <a class="code" href="namespaceAlphaISA.html#a0e080577527fb3e9685399f75b5caf15">IntReg</a> <a class="code" href="namespacem5_1_1debug.html#a9ceb38153d5c0f156fbeada6dc00ff4f">flags</a> = process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00785"></a>00785     <a class="code" href="namespaceAlphaISA.html#a0e080577527fb3e9685399f75b5caf15">IntReg</a> newStack = process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00786"></a>00786 
<a name="l00787"></a>00787     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(SyscallVerbose, <span class="stringliteral">&quot;In sys_clone:\n&quot;</span>);
<a name="l00788"></a>00788     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(SyscallVerbose, <span class="stringliteral">&quot; Flags=%llx\n&quot;</span>, flags);
<a name="l00789"></a>00789     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(SyscallVerbose, <span class="stringliteral">&quot; Child stack=%llx\n&quot;</span>, newStack);
<a name="l00790"></a>00790 
<a name="l00791"></a>00791 
<a name="l00792"></a>00792     <span class="keywordflow">if</span> (flags != 0x10f00) {
<a name="l00793"></a>00793         <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;This sys_clone implementation assumes flags &quot;</span>
<a name="l00794"></a>00794              <span class="stringliteral">&quot;CLONE_VM|CLONE_FS|CLONE_FILES|CLONE_SIGHAND|CLONE_THREAD &quot;</span>
<a name="l00795"></a>00795              <span class="stringliteral">&quot;(0x10f00), and may not work correctly with given flags &quot;</span>
<a name="l00796"></a>00796              <span class="stringliteral">&quot;0x%llx\n&quot;</span>, flags);
<a name="l00797"></a>00797     }
<a name="l00798"></a>00798 
<a name="l00799"></a>00799     <a class="code" href="classThreadContext.html">ThreadContext</a>* ctc; <span class="comment">// child thread context</span>
<a name="l00800"></a>00800     <span class="keywordflow">if</span> ( ( ctc = process-&gt;<a class="code" href="classProcess.html#ac26b4f23be05f684886e00f4f7526a0e">findFreeContext</a>() ) != <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a> ) {
<a name="l00801"></a>00801         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(SyscallVerbose, <span class="stringliteral">&quot; Found unallocated thread context\n&quot;</span>);
<a name="l00802"></a>00802 
<a name="l00803"></a>00803         ctc-&gt;<a class="code" href="classThreadContext.html#ae0375c0a094eeb6fe8f73db4393d4ceb">clearArchRegs</a>();
<a name="l00804"></a>00804 
<a name="l00805"></a>00805         <span class="comment">// Arch-specific cloning code</span>
<a name="l00806"></a>00806 <span class="preprocessor">        #if THE_ISA == ALPHA_ISA or THE_ISA == X86_ISA</span>
<a name="l00807"></a>00807 <span class="preprocessor"></span>            <span class="comment">// Cloning the misc. regs for these archs is enough</span>
<a name="l00808"></a>00808             <a class="code" href="namespaceAlphaISA.html#a42833096094e5ff0f2de948bf8e5965c">TheISA::copyMiscRegs</a>(tc, ctc);
<a name="l00809"></a>00809 <span class="preprocessor">        #elif THE_ISA == SPARC_ISA</span>
<a name="l00810"></a>00810 <span class="preprocessor"></span>            <a class="code" href="namespaceAlphaISA.html#aaeffcccf262b0dbd3cbcc8b4cef41168">TheISA::copyRegs</a>(tc, ctc);
<a name="l00811"></a>00811 
<a name="l00812"></a>00812             <span class="comment">// TODO: Explain what this code actually does :-)</span>
<a name="l00813"></a>00813             ctc-&gt;<a class="code" href="classThreadContext.html#a995ac11ab79af59e135d473df10c72da">setIntReg</a>(<a class="code" href="namespaceAlphaISA.html#a405c0abe85dc0da846c120e3b31f375c">NumIntArchRegs</a> + 6, 0);
<a name="l00814"></a>00814             ctc-&gt;<a class="code" href="classThreadContext.html#a995ac11ab79af59e135d473df10c72da">setIntReg</a>(<a class="code" href="namespaceAlphaISA.html#a405c0abe85dc0da846c120e3b31f375c">NumIntArchRegs</a> + 4, 0);
<a name="l00815"></a>00815             ctc-&gt;<a class="code" href="classThreadContext.html#a995ac11ab79af59e135d473df10c72da">setIntReg</a>(<a class="code" href="namespaceAlphaISA.html#a405c0abe85dc0da846c120e3b31f375c">NumIntArchRegs</a> + 3, <a class="code" href="namespaceSparcISA.html#a6216686abfee3750d491873b95a05308">NWindows</a> - 2);
<a name="l00816"></a>00816             ctc-&gt;<a class="code" href="classThreadContext.html#a995ac11ab79af59e135d473df10c72da">setIntReg</a>(<a class="code" href="namespaceAlphaISA.html#a405c0abe85dc0da846c120e3b31f375c">NumIntArchRegs</a> + 5, <a class="code" href="namespaceSparcISA.html#a6216686abfee3750d491873b95a05308">NWindows</a>);
<a name="l00817"></a>00817             ctc-&gt;<a class="code" href="classThreadContext.html#a074166dc2fe3c4aea3ad588ed9883c51">setMiscReg</a>(<a class="code" href="namespaceSparcISA.html#a1e522017e015d4c7efd6b2360143aa67acba2ba2d4694f11c96191c46487f61fe">MISCREG_CWP</a>, 0);
<a name="l00818"></a>00818             ctc-&gt;<a class="code" href="classThreadContext.html#a995ac11ab79af59e135d473df10c72da">setIntReg</a>(<a class="code" href="namespaceAlphaISA.html#a405c0abe85dc0da846c120e3b31f375c">NumIntArchRegs</a> + 7, 0);
<a name="l00819"></a>00819             ctc-&gt;<a class="code" href="classThreadContext.html#a2987c1ff22ebdf6cdf354a31462bdbfb">setMiscRegNoEffect</a>(<a class="code" href="namespaceSparcISA.html#a1e522017e015d4c7efd6b2360143aa67a63fcdc28db1f74cf46ec0b7652c52f21">MISCREG_TL</a>, 0);
<a name="l00820"></a>00820             ctc-&gt;<a class="code" href="classThreadContext.html#a074166dc2fe3c4aea3ad588ed9883c51">setMiscReg</a>(<a class="code" href="namespaceSparcISA.html#a1e522017e015d4c7efd6b2360143aa67a5b31a66cbee13241f5c1ccf56f80653d">MISCREG_ASI</a>, <a class="code" href="namespaceSparcISA.html#a6dd43f1311515252b283f56d7095a1f3aa6ce5a526e1048ac6d241bb947629eb3">ASI_PRIMARY</a>);
<a name="l00821"></a>00821 
<a name="l00822"></a>00822             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacem5_1_1util_1_1code__formatter.html#addbecca6e1a6301f3c92a77b235c1a51">y</a> = 8; <a class="code" href="namespacem5_1_1util_1_1code__formatter.html#addbecca6e1a6301f3c92a77b235c1a51">y</a> &lt; 32; <a class="code" href="namespacem5_1_1util_1_1code__formatter.html#addbecca6e1a6301f3c92a77b235c1a51">y</a>++)
<a name="l00823"></a>00823                 ctc-&gt;<a class="code" href="classThreadContext.html#a995ac11ab79af59e135d473df10c72da">setIntReg</a>(<a class="code" href="namespacem5_1_1util_1_1code__formatter.html#addbecca6e1a6301f3c92a77b235c1a51">y</a>, tc-&gt;<a class="code" href="classThreadContext.html#af80734776d68e6acd48e22f6c999394a">readIntReg</a>(<a class="code" href="namespacem5_1_1util_1_1code__formatter.html#addbecca6e1a6301f3c92a77b235c1a51">y</a>));
<a name="l00824"></a>00824 <span class="preprocessor">        #elif THE_ISA == ARM_ISA</span>
<a name="l00825"></a>00825 <span class="preprocessor"></span>            <a class="code" href="namespaceAlphaISA.html#aaeffcccf262b0dbd3cbcc8b4cef41168">TheISA::copyRegs</a>(tc, ctc);
<a name="l00826"></a>00826 <span class="preprocessor">        #else</span>
<a name="l00827"></a>00827 <span class="preprocessor"></span>            <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;sys_clone is not implemented for this ISA\n&quot;</span>);
<a name="l00828"></a>00828 <span class="preprocessor">        #endif</span>
<a name="l00829"></a>00829 <span class="preprocessor"></span>
<a name="l00830"></a>00830         <span class="comment">// Set up stack register</span>
<a name="l00831"></a>00831         ctc-&gt;<a class="code" href="classThreadContext.html#a995ac11ab79af59e135d473df10c72da">setIntReg</a>(<a class="code" href="namespaceAlphaISA.html#a344fcaf70f4d9d6fe84dc5eda59e49eb">TheISA::StackPointerReg</a>, newStack);
<a name="l00832"></a>00832 
<a name="l00833"></a>00833         <span class="comment">// Set up syscall return values in parent and child</span>
<a name="l00834"></a>00834         ctc-&gt;<a class="code" href="classThreadContext.html#a995ac11ab79af59e135d473df10c72da">setIntReg</a>(<a class="code" href="namespaceAlphaISA.html#a5aa17c403dc1152a73ef61c17f4e02cf">ReturnValueReg</a>, 0); <span class="comment">// return value, child</span>
<a name="l00835"></a>00835 
<a name="l00836"></a>00836         <span class="comment">// Alpha needs SyscallSuccessReg=0 in child</span>
<a name="l00837"></a>00837 <span class="preprocessor">        #if THE_ISA == ALPHA_ISA</span>
<a name="l00838"></a>00838 <span class="preprocessor"></span>            ctc-&gt;<a class="code" href="classThreadContext.html#a995ac11ab79af59e135d473df10c72da">setIntReg</a>(<a class="code" href="namespaceAlphaISA.html#a6c8c50158f99f454a2f011a1806f76c2">TheISA::SyscallSuccessReg</a>, 0);
<a name="l00839"></a>00839 <span class="preprocessor">        #endif</span>
<a name="l00840"></a>00840 <span class="preprocessor"></span>
<a name="l00841"></a>00841         <span class="comment">// In SPARC/Linux, clone returns 0 on pseudo-return register if</span>
<a name="l00842"></a>00842         <span class="comment">// parent, non-zero if child</span>
<a name="l00843"></a>00843 <span class="preprocessor">        #if THE_ISA == SPARC_ISA</span>
<a name="l00844"></a>00844 <span class="preprocessor"></span>            tc-&gt;<a class="code" href="classThreadContext.html#a995ac11ab79af59e135d473df10c72da">setIntReg</a>(<a class="code" href="namespaceAlphaISA.html#a6b71a09200f90f7292045d3560f10dad">TheISA::SyscallPseudoReturnReg</a>, 0);
<a name="l00845"></a>00845             ctc-&gt;<a class="code" href="classThreadContext.html#a995ac11ab79af59e135d473df10c72da">setIntReg</a>(<a class="code" href="namespaceAlphaISA.html#a6b71a09200f90f7292045d3560f10dad">TheISA::SyscallPseudoReturnReg</a>, 1);
<a name="l00846"></a>00846 <span class="preprocessor">        #endif</span>
<a name="l00847"></a>00847 <span class="preprocessor"></span>
<a name="l00848"></a>00848         ctc-&gt;<a class="code" href="classThreadContext.html#a1aaca26c0732d2191edbde1477d7ec13">pcState</a>(tc-&gt;<a class="code" href="classThreadContext.html#a01377ccfda419abf5f6ff7730c9eaac9">nextInstAddr</a>());
<a name="l00849"></a>00849 
<a name="l00850"></a>00850         ctc-&gt;<a class="code" href="classThreadContext.html#a9270160e6cce25ded6999f6e4e60a3ed">activate</a>();
<a name="l00851"></a>00851 
<a name="l00852"></a>00852         <span class="comment">// Should return nonzero child TID in parent&apos;s syscall return register,</span>
<a name="l00853"></a>00853         <span class="comment">// but for our pthread library any non-zero value will work</span>
<a name="l00854"></a>00854         <span class="keywordflow">return</span> 1;
<a name="l00855"></a>00855     } <span class="keywordflow">else</span> {
<a name="l00856"></a>00856         <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;Called sys_clone, but no unallocated thread contexts found!\n&quot;</span>);
<a name="l00857"></a>00857         <span class="keywordflow">return</span> 0;
<a name="l00858"></a>00858     }
<a name="l00859"></a>00859 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1cd0dfa0a5c6e64cc402c1a17fe6a86d"></a><!-- doxytag: member="syscall_emul.cc::closeFunc" ref="a1cd0dfa0a5c6e64cc402c1a17fe6a86d" args="(SyscallDesc *desc, int num, LiveProcess *p, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> closeFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target close() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00199"></a>00199 {
<a name="l00200"></a>00200     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00201"></a>00201     <span class="keywordtype">int</span> target_fd = p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00202"></a>00202     <span class="keywordtype">int</span> sim_fd = p-&gt;<a class="code" href="classProcess.html#ac7bb7ef35884d6fb4a2c02f167ab7679">sim_fd</a>(target_fd);
<a name="l00203"></a>00203     <span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a566327436c4c7e7a63ab9ac137e9d50e">status</a> = 0;
<a name="l00204"></a>00204     <span class="keywordflow">if</span> (sim_fd &gt; 2)
<a name="l00205"></a>00205         status = close(sim_fd);
<a name="l00206"></a>00206     <span class="keywordflow">if</span> (status &gt;= 0)
<a name="l00207"></a>00207         p-&gt;<a class="code" href="classProcess.html#a8c39614271eb6220f2db1bd774f43849">free_fd</a>(target_fd);
<a name="l00208"></a>00208     <span class="keywordflow">return</span> status;
<a name="l00209"></a>00209 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a56b6a187c0e6aa20f278735a8d555dbd"></a><!-- doxytag: member="syscall_emul.cc::dupFunc" ref="a56b6a187c0e6aa20f278735a8d555dbd" args="(SyscallDesc *desc, int num, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> dupFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target dup() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00575"></a>00575 {
<a name="l00576"></a>00576     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00577"></a>00577     <span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a87001e8063b8b1b5dc88f5a4b43b2a5a">fd</a> = process-&gt;<a class="code" href="classProcess.html#ac7bb7ef35884d6fb4a2c02f167ab7679">sim_fd</a>(process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index));
<a name="l00578"></a>00578     <span class="keywordflow">if</span> (fd &lt; 0)
<a name="l00579"></a>00579         <span class="keywordflow">return</span> -EBADF;
<a name="l00580"></a>00580 
<a name="l00581"></a>00581     <a class="code" href="classProcess_1_1FdMap.html">Process::FdMap</a> *fdo = process-&gt;<a class="code" href="classProcess.html#ac12196dd197c6731a021e211a95edb2d">sim_fd_obj</a>(fd);
<a name="l00582"></a>00582 
<a name="l00583"></a>00583     <span class="keywordtype">int</span> result = dup(fd);
<a name="l00584"></a>00584     <span class="keywordflow">return</span> (result == -1) ? -errno :
<a name="l00585"></a>00585         process-&gt;<a class="code" href="classProcess.html#aa98d99fb9a7db11be09b4e5b818d1795">alloc_fd</a>(result, fdo-&gt;<a class="code" href="classProcess_1_1FdMap.html#ae80f820219e45772366a2a68de6a54c4">filename</a>, fdo-&gt;<a class="code" href="classProcess_1_1FdMap.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a>, fdo-&gt;<a class="code" href="classProcess_1_1FdMap.html#a1ea5d0cb93f22f7d0fdf804bd68c3326">mode</a>, <span class="keyword">false</span>);
<a name="l00586"></a>00586 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad5134f2e6c066f51d4992f52975010ef"></a><!-- doxytag: member="syscall_emul.cc::exitFunc" ref="ad5134f2e6c066f51d4992f52975010ef" args="(SyscallDesc *desc, int callnum, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> exitFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>callnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target <a class="el" href="namespaceX86ISA.html#aab9b5a2e1cd2f24d08a9872895ded9c9">exit()</a> handler: terminate current context. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00116"></a>00116 {
<a name="l00117"></a>00117     <span class="keywordflow">if</span> (process-&gt;<a class="code" href="classProcess.html#af27ccd765f13a4b7bd119dc7579e2746">system</a>-&gt;<a class="code" href="classSystem.html#af17f73eb71dfedfb91e4f39e7bb732ce">numRunningContexts</a>() == 1) {
<a name="l00118"></a>00118         <span class="comment">// Last running context... exit simulator</span>
<a name="l00119"></a>00119         <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00120"></a>00120         <a class="code" href="sim__events_8cc.html#abca976500ad365c77607ab77d87698a7">exitSimLoop</a>(<span class="stringliteral">&quot;target called exit()&quot;</span>,
<a name="l00121"></a>00121                     process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index) &amp; 0xff);
<a name="l00122"></a>00122     } <span class="keywordflow">else</span> {
<a name="l00123"></a>00123         <span class="comment">// other running threads... just halt this one</span>
<a name="l00124"></a>00124         tc-&gt;<a class="code" href="classThreadContext.html#a1cf6e868fcd49300a04acd0cae4fd142" title="Set the status to Halted.">halt</a>();
<a name="l00125"></a>00125     }
<a name="l00126"></a>00126 
<a name="l00127"></a>00127     <span class="keywordflow">return</span> 1;
<a name="l00128"></a>00128 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac5e89d05896f25508b753d37f1b5d469"></a><!-- doxytag: member="syscall_emul.cc::exitGroupFunc" ref="ac5e89d05896f25508b753d37f1b5d469" args="(SyscallDesc *desc, int callnum, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> exitGroupFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>callnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target exit_group() handler: terminate simulation. (exit all threads). </p>

<p><div class="fragment"><pre class="fragment"><a name="l00134"></a>00134 {
<a name="l00135"></a>00135     <span class="comment">// really should just halt all thread contexts belonging to this</span>
<a name="l00136"></a>00136     <span class="comment">// process in case there&apos;s another process running...</span>
<a name="l00137"></a>00137     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00138"></a>00138     <a class="code" href="sim__events_8cc.html#abca976500ad365c77607ab77d87698a7">exitSimLoop</a>(<span class="stringliteral">&quot;target called exit()&quot;</span>,
<a name="l00139"></a>00139                 process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index) &amp; 0xff);
<a name="l00140"></a>00140 
<a name="l00141"></a>00141     <span class="keywordflow">return</span> 1;
<a name="l00142"></a>00142 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a49ef4f5de745c6ee566e9fd8611771cd"></a><!-- doxytag: member="syscall_emul.cc::fchownFunc" ref="a49ef4f5de745c6ee566e9fd8611771cd" args="(SyscallDesc *desc, int num, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> fchownFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target fchown() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00555"></a>00555 {
<a name="l00556"></a>00556     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00557"></a>00557     <span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a87001e8063b8b1b5dc88f5a4b43b2a5a">fd</a> = process-&gt;<a class="code" href="classProcess.html#ac7bb7ef35884d6fb4a2c02f167ab7679">sim_fd</a>(process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index));
<a name="l00558"></a>00558 
<a name="l00559"></a>00559     <span class="keywordflow">if</span> (fd &lt; 0)
<a name="l00560"></a>00560         <span class="keywordflow">return</span> -EBADF;
<a name="l00561"></a>00561 
<a name="l00562"></a>00562     <span class="comment">/* XXX endianess */</span>
<a name="l00563"></a>00563     <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> owner = process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00564"></a>00564     uid_t hostOwner = owner;
<a name="l00565"></a>00565     <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> group = process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00566"></a>00566     gid_t hostGroup = group;
<a name="l00567"></a>00567 
<a name="l00568"></a>00568     <span class="keywordtype">int</span> result = fchown(fd, hostOwner, hostGroup);
<a name="l00569"></a>00569     <span class="keywordflow">return</span> (result == -1) ? -errno : result;
<a name="l00570"></a>00570 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6e50686b7758443953966999dcd80f40"></a><!-- doxytag: member="syscall_emul.cc::fcntl64Func" ref="a6e50686b7758443953966999dcd80f40" args="(SyscallDesc *desc, int num, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> fcntl64Func </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target fcntl64() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00635"></a>00635 {
<a name="l00636"></a>00636     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00637"></a>00637     <span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a87001e8063b8b1b5dc88f5a4b43b2a5a">fd</a> = process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00638"></a>00638 
<a name="l00639"></a>00639     <span class="keywordflow">if</span> (fd &lt; 0 || process-&gt;sim_fd(fd) &lt; 0)
<a name="l00640"></a>00640         <span class="keywordflow">return</span> -EBADF;
<a name="l00641"></a>00641 
<a name="l00642"></a>00642     <span class="keywordtype">int</span> cmd = process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00643"></a>00643     <span class="keywordflow">switch</span> (cmd) {
<a name="l00644"></a>00644       <span class="keywordflow">case</span> 33: <span class="comment">//F_GETLK64</span>
<a name="l00645"></a>00645         <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;fcntl64(%d, F_GETLK64) not supported, error returned\n&quot;</span>, fd);
<a name="l00646"></a>00646         <span class="keywordflow">return</span> -EMFILE;
<a name="l00647"></a>00647 
<a name="l00648"></a>00648       <span class="keywordflow">case</span> 34: <span class="comment">// F_SETLK64</span>
<a name="l00649"></a>00649       <span class="keywordflow">case</span> 35: <span class="comment">// F_SETLKW64</span>
<a name="l00650"></a>00650         <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;fcntl64(%d, F_SETLK(W)64) not supported, error returned\n&quot;</span>, fd);
<a name="l00651"></a>00651         <span class="keywordflow">return</span> -EMFILE;
<a name="l00652"></a>00652 
<a name="l00653"></a>00653       <span class="keywordflow">default</span>:
<a name="l00654"></a>00654         <span class="comment">// not sure if this is totally valid, but we&apos;ll pass it through</span>
<a name="l00655"></a>00655         <span class="comment">// to the underlying OS</span>
<a name="l00656"></a>00656         <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;fcntl64(%d, %d) passed through to host\n&quot;</span>, fd, cmd);
<a name="l00657"></a>00657         <span class="keywordflow">return</span> fcntl(process-&gt;<a class="code" href="classProcess.html#ac7bb7ef35884d6fb4a2c02f167ab7679">sim_fd</a>(fd), cmd);
<a name="l00658"></a>00658         <span class="comment">// return 0;</span>
<a name="l00659"></a>00659     }
<a name="l00660"></a>00660 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a78ca4a2b9dba73eeb4fb283cc95a25e9"></a><!-- doxytag: member="syscall_emul.cc::fcntlFunc" ref="a78ca4a2b9dba73eeb4fb283cc95a25e9" args="(SyscallDesc *desc, int num, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> fcntlFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target fnctl() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00592"></a>00592 {
<a name="l00593"></a>00593     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00594"></a>00594     <span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a87001e8063b8b1b5dc88f5a4b43b2a5a">fd</a> = process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00595"></a>00595 
<a name="l00596"></a>00596     <span class="keywordflow">if</span> (fd &lt; 0 || process-&gt;sim_fd(fd) &lt; 0)
<a name="l00597"></a>00597         <span class="keywordflow">return</span> -EBADF;
<a name="l00598"></a>00598 
<a name="l00599"></a>00599     <span class="keywordtype">int</span> cmd = process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00600"></a>00600     <span class="keywordflow">switch</span> (cmd) {
<a name="l00601"></a>00601       <span class="keywordflow">case</span> 0: <span class="comment">// F_DUPFD</span>
<a name="l00602"></a>00602         <span class="comment">// if we really wanted to support this, we&apos;d need to do it</span>
<a name="l00603"></a>00603         <span class="comment">// in the target fd space.</span>
<a name="l00604"></a>00604         <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;fcntl(%d, F_DUPFD) not supported, error returned\n&quot;</span>, fd);
<a name="l00605"></a>00605         <span class="keywordflow">return</span> -EMFILE;
<a name="l00606"></a>00606 
<a name="l00607"></a>00607       <span class="keywordflow">case</span> 1: <span class="comment">// F_GETFD (get close-on-exec flag)</span>
<a name="l00608"></a>00608       <span class="keywordflow">case</span> 2: <span class="comment">// F_SETFD (set close-on-exec flag)</span>
<a name="l00609"></a>00609         <span class="keywordflow">return</span> 0;
<a name="l00610"></a>00610 
<a name="l00611"></a>00611       <span class="keywordflow">case</span> 3: <span class="comment">// F_GETFL (get file flags)</span>
<a name="l00612"></a>00612       <span class="keywordflow">case</span> 4: <span class="comment">// F_SETFL (set file flags)</span>
<a name="l00613"></a>00613         <span class="comment">// not sure if this is totally valid, but we&apos;ll pass it through</span>
<a name="l00614"></a>00614         <span class="comment">// to the underlying OS</span>
<a name="l00615"></a>00615         <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;fcntl(%d, %d) passed through to host\n&quot;</span>, fd, cmd);
<a name="l00616"></a>00616         <span class="keywordflow">return</span> fcntl(process-&gt;<a class="code" href="classProcess.html#ac7bb7ef35884d6fb4a2c02f167ab7679">sim_fd</a>(fd), cmd);
<a name="l00617"></a>00617         <span class="comment">// return 0;</span>
<a name="l00618"></a>00618 
<a name="l00619"></a>00619       <span class="keywordflow">case</span> 7: <span class="comment">// F_GETLK  (get lock)</span>
<a name="l00620"></a>00620       <span class="keywordflow">case</span> 8: <span class="comment">// F_SETLK  (set lock)</span>
<a name="l00621"></a>00621       <span class="keywordflow">case</span> 9: <span class="comment">// F_SETLKW (set lock and wait)</span>
<a name="l00622"></a>00622         <span class="comment">// don&apos;t mess with file locking... just act like it&apos;s OK</span>
<a name="l00623"></a>00623         <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;File lock call (fcntl(%d, %d)) ignored.\n&quot;</span>, fd, cmd);
<a name="l00624"></a>00624         <span class="keywordflow">return</span> 0;
<a name="l00625"></a>00625 
<a name="l00626"></a>00626       <span class="keywordflow">default</span>:
<a name="l00627"></a>00627         <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;Unknown fcntl command %d\n&quot;</span>, cmd);
<a name="l00628"></a>00628         <span class="keywordflow">return</span> 0;
<a name="l00629"></a>00629     }
<a name="l00630"></a>00630 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acf20461ebd534883e126917628cf1014"></a><!-- doxytag: member="syscall_emul.cc::ftruncate64Func" ref="acf20461ebd534883e126917628cf1014" args="(SyscallDesc *desc, int num, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> ftruncate64Func </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target ftruncate64() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00503"></a>00503 {
<a name="l00504"></a>00504     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00505"></a>00505     <span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a87001e8063b8b1b5dc88f5a4b43b2a5a">fd</a> = process-&gt;<a class="code" href="classProcess.html#ac7bb7ef35884d6fb4a2c02f167ab7679">sim_fd</a>(process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index));
<a name="l00506"></a>00506 
<a name="l00507"></a>00507     <span class="keywordflow">if</span> (fd &lt; 0)
<a name="l00508"></a>00508         <span class="keywordflow">return</span> -EBADF;
<a name="l00509"></a>00509 
<a name="l00510"></a>00510     int64_t length = process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index, 64);
<a name="l00511"></a>00511 
<a name="l00512"></a>00512 <span class="preprocessor">#if NO_STAT64</span>
<a name="l00513"></a>00513 <span class="preprocessor"></span>    <span class="keywordtype">int</span> result = ftruncate(fd, length);
<a name="l00514"></a>00514 <span class="preprocessor">#else</span>
<a name="l00515"></a>00515 <span class="preprocessor"></span>    <span class="keywordtype">int</span> result = ftruncate64(fd, length);
<a name="l00516"></a>00516 <span class="preprocessor">#endif</span>
<a name="l00517"></a>00517 <span class="preprocessor"></span>    <span class="keywordflow">return</span> (result == -1) ? -errno : result;
<a name="l00518"></a>00518 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2b22628f4325f458a392c5064c840854"></a><!-- doxytag: member="syscall_emul.cc::ftruncateFunc" ref="a2b22628f4325f458a392c5064c840854" args="(SyscallDesc *desc, int num, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> ftruncateFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target ftruncate() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00464"></a>00464 {
<a name="l00465"></a>00465     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00466"></a>00466     <span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a87001e8063b8b1b5dc88f5a4b43b2a5a">fd</a> = process-&gt;<a class="code" href="classProcess.html#ac7bb7ef35884d6fb4a2c02f167ab7679">sim_fd</a>(process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index));
<a name="l00467"></a>00467 
<a name="l00468"></a>00468     <span class="keywordflow">if</span> (fd &lt; 0)
<a name="l00469"></a>00469         <span class="keywordflow">return</span> -EBADF;
<a name="l00470"></a>00470 
<a name="l00471"></a>00471     off_t length = process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00472"></a>00472 
<a name="l00473"></a>00473     <span class="keywordtype">int</span> result = ftruncate(fd, length);
<a name="l00474"></a>00474     <span class="keywordflow">return</span> (result == -1) ? -errno : result;
<a name="l00475"></a>00475 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae2dad23a33eba280d86c2592fcd93fe9"></a><!-- doxytag: member="syscall_emul.cc::getcwdFunc" ref="ae2dad23a33eba280d86c2592fcd93fe9" args="(SyscallDesc *desc, int num, LiveProcess *p, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> getcwdFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target getcwd() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00323"></a>00323 {
<a name="l00324"></a>00324     <span class="keywordtype">int</span> result = 0;
<a name="l00325"></a>00325     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00326"></a>00326     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> bufPtr = p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00327"></a>00327     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> size = p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00328"></a>00328     <a class="code" href="classBufferArg.html">BufferArg</a> buf(bufPtr, size);
<a name="l00329"></a>00329 
<a name="l00330"></a>00330     <span class="comment">// Is current working directory defined?</span>
<a name="l00331"></a>00331     <span class="keywordtype">string</span> cwd = p-&gt;<a class="code" href="classLiveProcess.html#aba6680a83910e09f666106e67bc10c3b">getcwd</a>();
<a name="l00332"></a>00332     <span class="keywordflow">if</span> (!cwd.empty()) {
<a name="l00333"></a>00333         <span class="keywordflow">if</span> (cwd.length() &gt;= size) {
<a name="l00334"></a>00334             <span class="comment">// Buffer too small</span>
<a name="l00335"></a>00335             <span class="keywordflow">return</span> -ERANGE;
<a name="l00336"></a>00336         }
<a name="l00337"></a>00337         strncpy((<span class="keywordtype">char</span> *)buf.bufferPtr(), cwd.c_str(), size);
<a name="l00338"></a>00338         result = cwd.length();
<a name="l00339"></a>00339     }
<a name="l00340"></a>00340     <span class="keywordflow">else</span> {
<a name="l00341"></a>00341         <span class="keywordflow">if</span> (getcwd((<span class="keywordtype">char</span> *)buf.bufferPtr(), size) != <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>) {
<a name="l00342"></a>00342             result = strlen((<span class="keywordtype">char</span> *)buf.bufferPtr());
<a name="l00343"></a>00343         }
<a name="l00344"></a>00344         <span class="keywordflow">else</span> {
<a name="l00345"></a>00345             result = -1;
<a name="l00346"></a>00346         }
<a name="l00347"></a>00347     }
<a name="l00348"></a>00348 
<a name="l00349"></a>00349     buf.copyOut(tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>());
<a name="l00350"></a>00350 
<a name="l00351"></a>00351     <span class="keywordflow">return</span> (result == -1) ? -errno : result;
<a name="l00352"></a>00352 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="adcfb0b887e6c1956270482d4f501b54e"></a><!-- doxytag: member="syscall_emul.cc::getegidFunc" ref="adcfb0b887e6c1956270482d4f501b54e" args="(SyscallDesc *desc, int callnum, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> getegidFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>callnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target getegid() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00774"></a>00774 {
<a name="l00775"></a>00775     <span class="keywordflow">return</span> process-&gt;<a class="code" href="classLiveProcess.html#a0868ad9fa2d15bdaa033a861d2448edc">egid</a>();
<a name="l00776"></a>00776 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aabf7c2a33e41b3dc33cfc0ae922cbf67"></a><!-- doxytag: member="syscall_emul.cc::geteuidFunc" ref="aabf7c2a33e41b3dc33cfc0ae922cbf67" args="(SyscallDesc *desc, int callnum, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> geteuidFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>callnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target geteuid() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00760"></a>00760 {
<a name="l00761"></a>00761     <span class="keywordflow">return</span> process-&gt;<a class="code" href="classLiveProcess.html#a37002dbf259d35128485c6014a0c2fd9">euid</a>();             <span class="comment">// UID</span>
<a name="l00762"></a>00762 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8a2cde751ec4fd7659871ada0da6fa30"></a><!-- doxytag: member="syscall_emul.cc::getgidFunc" ref="a8a2cde751ec4fd7659871ada0da6fa30" args="(SyscallDesc *desc, int callnum, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> getgidFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>callnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target getgid() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00767"></a>00767 {
<a name="l00768"></a>00768     <span class="keywordflow">return</span> process-&gt;<a class="code" href="classLiveProcess.html#aa71ba391e05d5e24c3623f7f21edaa74">gid</a>();
<a name="l00769"></a>00769 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af2c806041ac8d5f5b4a10e83ffe8769c"></a><!-- doxytag: member="syscall_emul.cc::getgidPseudoFunc" ref="af2c806041ac8d5f5b4a10e83ffe8769c" args="(SyscallDesc *desc, int callnum, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> getgidPseudoFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>callnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target getgidPseudo() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00714"></a>00714 {
<a name="l00715"></a>00715     <span class="comment">// Get current group ID.  EGID goes in r20.</span>
<a name="l00716"></a>00716     tc-&gt;<a class="code" href="classThreadContext.html#a995ac11ab79af59e135d473df10c72da">setIntReg</a>(<a class="code" href="namespaceAlphaISA.html#a6b71a09200f90f7292045d3560f10dad">SyscallPseudoReturnReg</a>, process-&gt;<a class="code" href="classLiveProcess.html#a0868ad9fa2d15bdaa033a861d2448edc">egid</a>()); <span class="comment">//EGID</span>
<a name="l00717"></a>00717     <span class="keywordflow">return</span> process-&gt;<a class="code" href="classLiveProcess.html#aa71ba391e05d5e24c3623f7f21edaa74">gid</a>();
<a name="l00718"></a>00718 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a82c247bc55c192c038a032fb9bcb884a"></a><!-- doxytag: member="syscall_emul.cc::gethostnameFunc" ref="a82c247bc55c192c038a032fb9bcb884a" args="(SyscallDesc *desc, int num, LiveProcess *p, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> gethostnameFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target gethostname() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00308"></a>00308 {
<a name="l00309"></a>00309     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00310"></a>00310     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> bufPtr = p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00311"></a>00311     <span class="keywordtype">int</span> name_len = p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00312"></a>00312     <a class="code" href="classBufferArg.html">BufferArg</a> <a class="code" href="trace_8hh.html#a166fa10b86d8faa127fb7c78191e3e60">name</a>(bufPtr, name_len);
<a name="l00313"></a>00313 
<a name="l00314"></a>00314     strncpy((<span class="keywordtype">char</span> *)<a class="code" href="trace_8hh.html#a166fa10b86d8faa127fb7c78191e3e60">name</a>.bufferPtr(), <a class="code" href="syscall__emul_8cc.html#aad01339e89106fdf68f57ef118956fa9">hostname</a>, name_len);
<a name="l00315"></a>00315 
<a name="l00316"></a>00316     <a class="code" href="trace_8hh.html#a166fa10b86d8faa127fb7c78191e3e60">name</a>.copyOut(tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>());
<a name="l00317"></a>00317 
<a name="l00318"></a>00318     <span class="keywordflow">return</span> 0;
<a name="l00319"></a>00319 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5961ea78f5b078d3c0881362b6992b3a"></a><!-- doxytag: member="syscall_emul.cc::getpagesizeFunc" ref="a5961ea78f5b078d3c0881362b6992b3a" args="(SyscallDesc *desc, int num, LiveProcess *p, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> getpagesizeFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target getpagesize() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00147"></a>00147 {
<a name="l00148"></a>00148     <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)<a class="code" href="namespaceAlphaISA.html#a06fc87d81c62e9abb8790b6e5713c55babe0c83362ff9a394bc07b0e26f089b83">VMPageSize</a>;
<a name="l00149"></a>00149 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="afb43ae09ff692fb2d2a10ab38ca7f007"></a><!-- doxytag: member="syscall_emul.cc::getpidFunc" ref="afb43ae09ff692fb2d2a10ab38ca7f007" args="(SyscallDesc *desc, int callnum, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> getpidFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>callnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target getpid() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00734"></a>00734 {
<a name="l00735"></a>00735     <span class="comment">// Make up a PID.  There&apos;s no interprocess communication in</span>
<a name="l00736"></a>00736     <span class="comment">// fake_syscall mode, so there&apos;s no way for a process to know it&apos;s</span>
<a name="l00737"></a>00737     <span class="comment">// not getting a unique value.</span>
<a name="l00738"></a>00738 
<a name="l00739"></a>00739     tc-&gt;<a class="code" href="classThreadContext.html#a995ac11ab79af59e135d473df10c72da">setIntReg</a>(<a class="code" href="namespaceAlphaISA.html#a6b71a09200f90f7292045d3560f10dad">SyscallPseudoReturnReg</a>, process-&gt;<a class="code" href="classLiveProcess.html#a4c1e9134209da61d2f8edc374a94f327">ppid</a>()); <span class="comment">//PID</span>
<a name="l00740"></a>00740     <span class="keywordflow">return</span> process-&gt;<a class="code" href="classLiveProcess.html#a8bce5535a19cd849d89dacf166319a1a">pid</a>();
<a name="l00741"></a>00741 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a586e2c98cfb680360dffccb5a0abc9e8"></a><!-- doxytag: member="syscall_emul.cc::getpidPseudoFunc" ref="a586e2c98cfb680360dffccb5a0abc9e8" args="(SyscallDesc *desc, int callnum, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> getpidPseudoFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>callnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target getpidPseudo() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00688"></a>00688 {
<a name="l00689"></a>00689     <span class="comment">// Make up a PID.  There&apos;s no interprocess communication in</span>
<a name="l00690"></a>00690     <span class="comment">// fake_syscall mode, so there&apos;s no way for a process to know it&apos;s</span>
<a name="l00691"></a>00691     <span class="comment">// not getting a unique value.</span>
<a name="l00692"></a>00692 
<a name="l00693"></a>00693     tc-&gt;<a class="code" href="classThreadContext.html#a995ac11ab79af59e135d473df10c72da">setIntReg</a>(<a class="code" href="namespaceAlphaISA.html#a6b71a09200f90f7292045d3560f10dad">SyscallPseudoReturnReg</a>, process-&gt;<a class="code" href="classLiveProcess.html#a4c1e9134209da61d2f8edc374a94f327">ppid</a>());
<a name="l00694"></a>00694     <span class="keywordflow">return</span> process-&gt;<a class="code" href="classLiveProcess.html#a8bce5535a19cd849d89dacf166319a1a">pid</a>();
<a name="l00695"></a>00695 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a25247757bb07a46e63c248e3d5ebf95a"></a><!-- doxytag: member="syscall_emul.cc::getppidFunc" ref="a25247757bb07a46e63c248e3d5ebf95a" args="(SyscallDesc *desc, int callnum, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> getppidFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>callnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target getppid() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00746"></a>00746 {
<a name="l00747"></a>00747     <span class="keywordflow">return</span> process-&gt;<a class="code" href="classLiveProcess.html#a4c1e9134209da61d2f8edc374a94f327">ppid</a>();
<a name="l00748"></a>00748 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7702c7e92d0895d004c43c9e5b107c9b"></a><!-- doxytag: member="syscall_emul.cc::getuidFunc" ref="a7702c7e92d0895d004c43c9e5b107c9b" args="(SyscallDesc *desc, int callnum, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> getuidFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>callnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target getuid() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00753"></a>00753 {
<a name="l00754"></a>00754     <span class="keywordflow">return</span> process-&gt;<a class="code" href="classLiveProcess.html#aa371c162844c3023c2c2c98913267482">uid</a>();              <span class="comment">// UID</span>
<a name="l00755"></a>00755 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a76cafd839835d0a079876d02ca854ce8"></a><!-- doxytag: member="syscall_emul.cc::getuidPseudoFunc" ref="a76cafd839835d0a079876d02ca854ce8" args="(SyscallDesc *desc, int callnum, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> getuidPseudoFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>callnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target getuidPseudo() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00701"></a>00701 {
<a name="l00702"></a>00702     <span class="comment">// Make up a UID and EUID... it shouldn&apos;t matter, and we want the</span>
<a name="l00703"></a>00703     <span class="comment">// simulation to be deterministic.</span>
<a name="l00704"></a>00704 
<a name="l00705"></a>00705     <span class="comment">// EUID goes in r20.</span>
<a name="l00706"></a>00706     tc-&gt;<a class="code" href="classThreadContext.html#a995ac11ab79af59e135d473df10c72da">setIntReg</a>(<a class="code" href="namespaceAlphaISA.html#a6b71a09200f90f7292045d3560f10dad">SyscallPseudoReturnReg</a>, process-&gt;<a class="code" href="classLiveProcess.html#a37002dbf259d35128485c6014a0c2fd9">euid</a>()); <span class="comment">//EUID</span>
<a name="l00707"></a>00707     <span class="keywordflow">return</span> process-&gt;<a class="code" href="classLiveProcess.html#aa371c162844c3023c2c2c98913267482">uid</a>();              <span class="comment">// UID</span>
<a name="l00708"></a>00708 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0eb648021cba31bfd0a11f7beb66b37c"></a><!-- doxytag: member="syscall_emul.cc::ignoreFunc" ref="a0eb648021cba31bfd0a11f7beb66b37c" args="(SyscallDesc *desc, int callnum, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> ignoreFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Handler for unimplemented syscalls that we never intend to implement (signal handling, etc.) and should not affect the correct behavior of the program. Print a warning only if the appropriate trace flag is enabled. Return success to the target program. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00092"></a>00092 {
<a name="l00093"></a>00093     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00094"></a>00094     <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;ignoring syscall %s(%d, %d, ...)&quot;</span>, desc-&gt;<a class="code" href="classSyscallDesc.html#a8f8f80d37794cde9472343e4487ba3eb" title="Syscall name (e.g., &amp;quot;open&amp;quot;).">name</a>,
<a name="l00095"></a>00095          process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index), process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index));
<a name="l00096"></a>00096 
<a name="l00097"></a>00097     <span class="keywordflow">return</span> 0;
<a name="l00098"></a>00098 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad7fb5e5fe6d3afcdad2db282000415ca"></a><!-- doxytag: member="syscall_emul.cc::ignoreWarnOnceFunc" ref="ad7fb5e5fe6d3afcdad2db282000415ca" args="(SyscallDesc *desc, int callnum, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> ignoreWarnOnceFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>callnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00104"></a>00104 {
<a name="l00105"></a>00105     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00106"></a>00106     <a class="code" href="base_2misc_8hh.html#abb243c15dfbeedf4ae64aa213f4f18c7">warn_once</a>(<span class="stringliteral">&quot;ignoring syscall %s(%d, %d, ...)&quot;</span>, desc-&gt;<a class="code" href="classSyscallDesc.html#a8f8f80d37794cde9472343e4487ba3eb" title="Syscall name (e.g., &amp;quot;open&amp;quot;).">name</a>,
<a name="l00107"></a>00107          process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index), process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index));
<a name="l00108"></a>00108 
<a name="l00109"></a>00109     <span class="keywordflow">return</span> 0;
<a name="l00110"></a>00110 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa37fa875550097f17e97de14c6964464"></a><!-- doxytag: member="syscall_emul.cc::lseekFunc" ref="aa37fa875550097f17e97de14c6964464" args="(SyscallDesc *desc, int num, LiveProcess *p, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> lseekFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target lseek() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00250"></a>00250 {
<a name="l00251"></a>00251     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00252"></a>00252     <span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a87001e8063b8b1b5dc88f5a4b43b2a5a">fd</a> = p-&gt;<a class="code" href="classProcess.html#ac7bb7ef35884d6fb4a2c02f167ab7679">sim_fd</a>(p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index));
<a name="l00253"></a>00253     uint64_t offs = p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00254"></a>00254     <span class="keywordtype">int</span> whence = p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00255"></a>00255 
<a name="l00256"></a>00256     off_t result = lseek(fd, offs, whence);
<a name="l00257"></a>00257 
<a name="l00258"></a>00258     <span class="keywordflow">return</span> (result == (off_t)-1) ? -errno : result;
<a name="l00259"></a>00259 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aeada7d30dbed17e022348fdce3bdebc6"></a><!-- doxytag: member="syscall_emul.cc::mkdirFunc" ref="aeada7d30dbed17e022348fdce3bdebc6" args="(SyscallDesc *desc, int num, LiveProcess *p, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> mkdirFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target mkdir() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00405"></a>00405 {
<a name="l00406"></a>00406     <span class="keywordtype">string</span> path;
<a name="l00407"></a>00407 
<a name="l00408"></a>00408     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00409"></a>00409     <span class="keywordflow">if</span> (!tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>().<a class="code" href="classSETranslatingPortProxy.html#a566bb321a4a4657816925b1421a8abfa">tryReadString</a>(path, p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index)))
<a name="l00410"></a>00410         <span class="keywordflow">return</span> -EFAULT;
<a name="l00411"></a>00411 
<a name="l00412"></a>00412     <span class="comment">// Adjust path for current working directory</span>
<a name="l00413"></a>00413     path = p-&gt;<a class="code" href="classLiveProcess.html#a9c94a4c8c47961ea420f67ad43c4a5e5">fullPath</a>(path);
<a name="l00414"></a>00414 
<a name="l00415"></a>00415     mode_t <a class="code" href="namespaceArmISA.html#a5f3b9b97eb2dfa29d33e74878455f90d">mode</a> = p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00416"></a>00416 
<a name="l00417"></a>00417     <span class="keywordtype">int</span> result = mkdir(path.c_str(), mode);
<a name="l00418"></a>00418     <span class="keywordflow">return</span> (result == -1) ? -errno : result;
<a name="l00419"></a>00419 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a627dd30ab77faa503107792836ea2158"></a><!-- doxytag: member="syscall_emul.cc::munmapFunc" ref="a627dd30ab77faa503107792836ea2158" args="(SyscallDesc *desc, int num, LiveProcess *p, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> munmapFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target munmap() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00298"></a>00298 {
<a name="l00299"></a>00299     <span class="comment">// given that we don&apos;t really implement mmap, munmap is really easy</span>
<a name="l00300"></a>00300     <span class="keywordflow">return</span> 0;
<a name="l00301"></a>00301 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a17e13d1e4b9ccca44558d44e9dfde562"></a><!-- doxytag: member="syscall_emul.cc::pipePseudoFunc" ref="a17e13d1e4b9ccca44558d44e9dfde562" args="(SyscallDesc *desc, int callnum, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> pipePseudoFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pseudo Funcs - These functions use a different return convension, returning a second value in a register other than the normal return register </p>

<p><div class="fragment"><pre class="fragment"><a name="l00665"></a>00665 {
<a name="l00666"></a>00666     <span class="keywordtype">int</span> fds[2], sim_fds[2];
<a name="l00667"></a>00667     <span class="keywordtype">int</span> pipe_retval = pipe(fds);
<a name="l00668"></a>00668 
<a name="l00669"></a>00669     <span class="keywordflow">if</span> (pipe_retval &lt; 0) {
<a name="l00670"></a>00670         <span class="comment">// error</span>
<a name="l00671"></a>00671         <span class="keywordflow">return</span> pipe_retval;
<a name="l00672"></a>00672     }
<a name="l00673"></a>00673 
<a name="l00674"></a>00674     sim_fds[0] = process-&gt;<a class="code" href="classProcess.html#aa98d99fb9a7db11be09b4e5b818d1795">alloc_fd</a>(fds[0], <span class="stringliteral">&quot;PIPE-READ&quot;</span>, O_WRONLY, -1, <span class="keyword">true</span>);
<a name="l00675"></a>00675     sim_fds[1] = process-&gt;<a class="code" href="classProcess.html#aa98d99fb9a7db11be09b4e5b818d1795">alloc_fd</a>(fds[1], <span class="stringliteral">&quot;PIPE-WRITE&quot;</span>, O_RDONLY, -1, <span class="keyword">true</span>);
<a name="l00676"></a>00676 
<a name="l00677"></a>00677     process-&gt;<a class="code" href="classProcess.html#a06811a348d456174f7ad9f2b8f03a129">setReadPipeSource</a>(sim_fds[0], sim_fds[1]);
<a name="l00678"></a>00678     <span class="comment">// Alpha Linux convention for pipe() is that fd[0] is returned as</span>
<a name="l00679"></a>00679     <span class="comment">// the return value of the function, and fd[1] is returned in r20.</span>
<a name="l00680"></a>00680     tc-&gt;<a class="code" href="classThreadContext.html#a995ac11ab79af59e135d473df10c72da">setIntReg</a>(<a class="code" href="namespaceAlphaISA.html#a6b71a09200f90f7292045d3560f10dad">SyscallPseudoReturnReg</a>, sim_fds[1]);
<a name="l00681"></a>00681     <span class="keywordflow">return</span> sim_fds[0];
<a name="l00682"></a>00682 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5cb187a0afcfb802a06396f382fe5ada"></a><!-- doxytag: member="syscall_emul.cc::readFunc" ref="a5cb187a0afcfb802a06396f382fe5ada" args="(SyscallDesc *desc, int num, LiveProcess *p, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> readFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target read() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00214"></a>00214 {
<a name="l00215"></a>00215     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00216"></a>00216     <span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a87001e8063b8b1b5dc88f5a4b43b2a5a">fd</a> = p-&gt;<a class="code" href="classProcess.html#ac7bb7ef35884d6fb4a2c02f167ab7679">sim_fd</a>(p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index));
<a name="l00217"></a>00217     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> bufPtr = p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00218"></a>00218     <span class="keywordtype">int</span> nbytes = p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00219"></a>00219     <a class="code" href="classBufferArg.html">BufferArg</a> bufArg(bufPtr, nbytes);
<a name="l00220"></a>00220 
<a name="l00221"></a>00221     <span class="keywordtype">int</span> bytes_read = read(fd, bufArg.bufferPtr(), nbytes);
<a name="l00222"></a>00222 
<a name="l00223"></a>00223     <span class="keywordflow">if</span> (bytes_read != -1)
<a name="l00224"></a>00224         bufArg.copyOut(tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>());
<a name="l00225"></a>00225 
<a name="l00226"></a>00226     <span class="keywordflow">return</span> bytes_read;
<a name="l00227"></a>00227 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9034f6b19f98de95e1d15aebf096e184"></a><!-- doxytag: member="syscall_emul.cc::readlinkFunc" ref="a9034f6b19f98de95e1d15aebf096e184" args="(SyscallDesc *desc, int num, LiveProcess *p, ThreadContext *tc, int index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> readlinkFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target readlink() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00365"></a>00365 {
<a name="l00366"></a>00366     <span class="keywordtype">string</span> path;
<a name="l00367"></a>00367 
<a name="l00368"></a>00368     <span class="keywordflow">if</span> (!tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>().<a class="code" href="classSETranslatingPortProxy.html#a566bb321a4a4657816925b1421a8abfa">tryReadString</a>(path, p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a>)))
<a name="l00369"></a>00369         <span class="keywordflow">return</span> -EFAULT;
<a name="l00370"></a>00370 
<a name="l00371"></a>00371     <span class="comment">// Adjust path for current working directory</span>
<a name="l00372"></a>00372     path = p-&gt;<a class="code" href="classLiveProcess.html#a9c94a4c8c47961ea420f67ad43c4a5e5">fullPath</a>(path);
<a name="l00373"></a>00373 
<a name="l00374"></a>00374     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> bufPtr = p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a>);
<a name="l00375"></a>00375     <span class="keywordtype">size_t</span> bufsiz = p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a>);
<a name="l00376"></a>00376 
<a name="l00377"></a>00377     <a class="code" href="classBufferArg.html">BufferArg</a> buf(bufPtr, bufsiz);
<a name="l00378"></a>00378 
<a name="l00379"></a>00379     <span class="keywordtype">int</span> result = readlink(path.c_str(), (<span class="keywordtype">char</span> *)buf.bufferPtr(), bufsiz);
<a name="l00380"></a>00380 
<a name="l00381"></a>00381     buf.copyOut(tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>());
<a name="l00382"></a>00382 
<a name="l00383"></a>00383     <span class="keywordflow">return</span> (result == -1) ? -errno : result;
<a name="l00384"></a>00384 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac467bbe13470753cfd16f6e21dee9b03"></a><!-- doxytag: member="syscall_emul.cc::readlinkFunc" ref="ac467bbe13470753cfd16f6e21dee9b03" args="(SyscallDesc *desc, int callnum, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> readlinkFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>callnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target open() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00358"></a>00358 {
<a name="l00359"></a>00359     <span class="keywordflow">return</span> <a class="code" href="syscall__emul_8cc.html#ac467bbe13470753cfd16f6e21dee9b03" title="Target open() handler.">readlinkFunc</a>(desc, callnum, process, tc, 0);
<a name="l00360"></a>00360 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7a4679edd20bcb6c6095d9641bf60a41"></a><!-- doxytag: member="syscall_emul.cc::renameFunc" ref="a7a4679edd20bcb6c6095d9641bf60a41" args="(SyscallDesc *desc, int num, LiveProcess *p, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> renameFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target rename() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00423"></a>00423 {
<a name="l00424"></a>00424     <span class="keywordtype">string</span> old_name;
<a name="l00425"></a>00425 
<a name="l00426"></a>00426     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00427"></a>00427     <span class="keywordflow">if</span> (!tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>().<a class="code" href="classSETranslatingPortProxy.html#a566bb321a4a4657816925b1421a8abfa">tryReadString</a>(old_name, p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index)))
<a name="l00428"></a>00428         <span class="keywordflow">return</span> -EFAULT;
<a name="l00429"></a>00429 
<a name="l00430"></a>00430     <span class="keywordtype">string</span> new_name;
<a name="l00431"></a>00431 
<a name="l00432"></a>00432     <span class="keywordflow">if</span> (!tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>().<a class="code" href="classSETranslatingPortProxy.html#a566bb321a4a4657816925b1421a8abfa">tryReadString</a>(new_name, p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index)))
<a name="l00433"></a>00433         <span class="keywordflow">return</span> -EFAULT;
<a name="l00434"></a>00434 
<a name="l00435"></a>00435     <span class="comment">// Adjust path for current working directory</span>
<a name="l00436"></a>00436     old_name = p-&gt;<a class="code" href="classLiveProcess.html#a9c94a4c8c47961ea420f67ad43c4a5e5">fullPath</a>(old_name);
<a name="l00437"></a>00437     new_name = p-&gt;<a class="code" href="classLiveProcess.html#a9c94a4c8c47961ea420f67ad43c4a5e5">fullPath</a>(new_name);
<a name="l00438"></a>00438 
<a name="l00439"></a>00439     int64_t result = rename(old_name.c_str(), new_name.c_str());
<a name="l00440"></a>00440     <span class="keywordflow">return</span> (result == -1) ? -errno : result;
<a name="l00441"></a>00441 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3325f33075590dada9259b8de53df322"></a><!-- doxytag: member="syscall_emul.cc::setuidFunc" ref="a3325f33075590dada9259b8de53df322" args="(SyscallDesc *desc, int callnum, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> setuidFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>callnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target setuid() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00724"></a>00724 {
<a name="l00725"></a>00725     <span class="comment">// can&apos;t fathom why a benchmark would call this.</span>
<a name="l00726"></a>00726     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00727"></a>00727     <a class="code" href="base_2misc_8hh.html#a8224a361dddd2ad59b411982e5ea746f">warn</a>(<span class="stringliteral">&quot;Ignoring call to setuid(%d)\n&quot;</span>, process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index));
<a name="l00728"></a>00728     <span class="keywordflow">return</span> 0;
<a name="l00729"></a>00729 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa5bd0e27e30b6cde5f6e3ad3d2ad2afb"></a><!-- doxytag: member="syscall_emul.cc::truncate64Func" ref="aa5bd0e27e30b6cde5f6e3ad3d2ad2afb" args="(SyscallDesc *desc, int num, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> truncate64Func </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target truncate64() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00480"></a>00480 {
<a name="l00481"></a>00481     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00482"></a>00482     <span class="keywordtype">string</span> path;
<a name="l00483"></a>00483 
<a name="l00484"></a>00484     <span class="keywordflow">if</span> (!tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>().<a class="code" href="classSETranslatingPortProxy.html#a566bb321a4a4657816925b1421a8abfa">tryReadString</a>(path, process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index)))
<a name="l00485"></a>00485        <span class="keywordflow">return</span> -EFAULT;
<a name="l00486"></a>00486 
<a name="l00487"></a>00487     int64_t length = process-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index, 64);
<a name="l00488"></a>00488 
<a name="l00489"></a>00489     <span class="comment">// Adjust path for current working directory</span>
<a name="l00490"></a>00490     path = process-&gt;<a class="code" href="classLiveProcess.html#a9c94a4c8c47961ea420f67ad43c4a5e5">fullPath</a>(path);
<a name="l00491"></a>00491 
<a name="l00492"></a>00492 <span class="preprocessor">#if NO_STAT64</span>
<a name="l00493"></a>00493 <span class="preprocessor"></span>    <span class="keywordtype">int</span> result = truncate(path.c_str(), length);
<a name="l00494"></a>00494 <span class="preprocessor">#else</span>
<a name="l00495"></a>00495 <span class="preprocessor"></span>    <span class="keywordtype">int</span> result = truncate64(path.c_str(), length);
<a name="l00496"></a>00496 <span class="preprocessor">#endif</span>
<a name="l00497"></a>00497 <span class="preprocessor"></span>    <span class="keywordflow">return</span> (result == -1) ? -errno : result;
<a name="l00498"></a>00498 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6e21e57c806344e2ecbb7d2c952af5f9"></a><!-- doxytag: member="syscall_emul.cc::truncateFunc" ref="a6e21e57c806344e2ecbb7d2c952af5f9" args="(SyscallDesc *desc, int num, LiveProcess *p, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> truncateFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target truncate() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00445"></a>00445 {
<a name="l00446"></a>00446     <span class="keywordtype">string</span> path;
<a name="l00447"></a>00447 
<a name="l00448"></a>00448     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00449"></a>00449     <span class="keywordflow">if</span> (!tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>().<a class="code" href="classSETranslatingPortProxy.html#a566bb321a4a4657816925b1421a8abfa">tryReadString</a>(path, p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index)))
<a name="l00450"></a>00450         <span class="keywordflow">return</span> -EFAULT;
<a name="l00451"></a>00451 
<a name="l00452"></a>00452     off_t length = p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00453"></a>00453 
<a name="l00454"></a>00454     <span class="comment">// Adjust path for current working directory</span>
<a name="l00455"></a>00455     path = p-&gt;<a class="code" href="classLiveProcess.html#a9c94a4c8c47961ea420f67ad43c4a5e5">fullPath</a>(path);
<a name="l00456"></a>00456 
<a name="l00457"></a>00457     <span class="keywordtype">int</span> result = truncate(path.c_str(), length);
<a name="l00458"></a>00458     <span class="keywordflow">return</span> (result == -1) ? -errno : result;
<a name="l00459"></a>00459 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8d8282d6d3230e5079ae0008964fa42d"></a><!-- doxytag: member="syscall_emul.cc::umaskFunc" ref="a8d8282d6d3230e5079ae0008964fa42d" args="(SyscallDesc *desc, int num, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> umaskFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target umask() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00522"></a>00522 {
<a name="l00523"></a>00523     <span class="comment">// Letting the simulated program change the simulator&apos;s umask seems like</span>
<a name="l00524"></a>00524     <span class="comment">// a bad idea.  Compromise by just returning the current umask but not</span>
<a name="l00525"></a>00525     <span class="comment">// changing anything.</span>
<a name="l00526"></a>00526     mode_t oldMask = umask(0);
<a name="l00527"></a>00527     umask(oldMask);
<a name="l00528"></a>00528     <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)oldMask;
<a name="l00529"></a>00529 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8706a3119dceec44ebd348035b2c74b1"></a><!-- doxytag: member="syscall_emul.cc::unimplementedFunc" ref="a8706a3119dceec44ebd348035b2c74b1" args="(SyscallDesc *desc, int callnum, LiveProcess *process, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> unimplementedFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>callnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handler for unimplemented syscalls that we haven't thought about. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00082"></a>00082 {
<a name="l00083"></a>00083     <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;syscall %s (#%d) unimplemented.&quot;</span>, desc-&gt;<a class="code" href="classSyscallDesc.html#a8f8f80d37794cde9472343e4487ba3eb" title="Syscall name (e.g., &amp;quot;open&amp;quot;).">name</a>, callnum);
<a name="l00084"></a>00084 
<a name="l00085"></a>00085     <span class="keywordflow">return</span> 1;
<a name="l00086"></a>00086 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a332ee720b2d3c8f128b10627f87a9a67"></a><!-- doxytag: member="syscall_emul.cc::unlinkFunc" ref="a332ee720b2d3c8f128b10627f87a9a67" args="(SyscallDesc *desc, int num, LiveProcess *p, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> unlinkFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target unlink() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00388"></a>00388 {
<a name="l00389"></a>00389     <span class="keywordtype">string</span> path;
<a name="l00390"></a>00390 
<a name="l00391"></a>00391     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00392"></a>00392     <span class="keywordflow">if</span> (!tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>().<a class="code" href="classSETranslatingPortProxy.html#a566bb321a4a4657816925b1421a8abfa">tryReadString</a>(path, p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index)))
<a name="l00393"></a>00393         <span class="keywordflow">return</span> -EFAULT;
<a name="l00394"></a>00394 
<a name="l00395"></a>00395     <span class="comment">// Adjust path for current working directory</span>
<a name="l00396"></a>00396     path = p-&gt;<a class="code" href="classLiveProcess.html#a9c94a4c8c47961ea420f67ad43c4a5e5">fullPath</a>(path);
<a name="l00397"></a>00397 
<a name="l00398"></a>00398     <span class="keywordtype">int</span> result = unlink(path.c_str());
<a name="l00399"></a>00399     <span class="keywordflow">return</span> (result == -1) ? -errno : result;
<a name="l00400"></a>00400 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0d5b24a5c07baeac543de44989b73d43"></a><!-- doxytag: member="syscall_emul.cc::writeFunc" ref="a0d5b24a5c07baeac543de44989b73d43" args="(SyscallDesc *desc, int num, LiveProcess *p, ThreadContext *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSyscallReturn.html">SyscallReturn</a> writeFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSyscallDesc.html">SyscallDesc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLiveProcess.html">LiveProcess</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Target write() handler. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00231"></a>00231 {
<a name="l00232"></a>00232     <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = 0;
<a name="l00233"></a>00233     <span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a87001e8063b8b1b5dc88f5a4b43b2a5a">fd</a> = p-&gt;<a class="code" href="classProcess.html#ac7bb7ef35884d6fb4a2c02f167ab7679">sim_fd</a>(p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index));
<a name="l00234"></a>00234     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> bufPtr = p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00235"></a>00235     <span class="keywordtype">int</span> nbytes = p-&gt;<a class="code" href="classLiveProcess.html#aa001ff57ec460026facb89ba19c7bf96">getSyscallArg</a>(tc, index);
<a name="l00236"></a>00236     <a class="code" href="classBufferArg.html">BufferArg</a> bufArg(bufPtr, nbytes);
<a name="l00237"></a>00237 
<a name="l00238"></a>00238     bufArg.copyIn(tc-&gt;<a class="code" href="classThreadContext.html#a840e8764d04f2a3fb061c56738f3a874">getMemProxy</a>());
<a name="l00239"></a>00239 
<a name="l00240"></a>00240     <span class="keywordtype">int</span> bytes_written = write(fd, bufArg.bufferPtr(), nbytes);
<a name="l00241"></a>00241 
<a name="l00242"></a>00242     fsync(fd);
<a name="l00243"></a>00243 
<a name="l00244"></a>00244     <span class="keywordflow">return</span> bytes_written;
<a name="l00245"></a>00245 }
</pre></div></p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="aad01339e89106fdf68f57ef118956fa9"></a><!-- doxytag: member="syscall_emul.cc::hostname" ref="aad01339e89106fdf68f57ef118956fa9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* hostname = &quot;m5.eecs.umich.edu&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
