\hypertarget{classSp804}{
\section{クラス Sp804}
\label{classSp804}\index{Sp804@{Sp804}}
}


{\ttfamily \#include $<$timer\_\-sp804.hh$>$}Sp804に対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=8cm]{classSp804}
\end{center}
\end{figure}
\subsection*{構成}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classSp804_1_1Timer}{Timer}
\end{DoxyCompactItemize}
\subsection*{Public 型}
\begin{DoxyCompactItemize}
\item 
typedef Sp804Params \hyperlink{classSp804_af822827c8c9baefc6aafbdc713bc2b8d}{Params}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
const \hyperlink{classSp804_af822827c8c9baefc6aafbdc713bc2b8d}{Params} $\ast$ \hyperlink{classSp804_acd3c3feb78ae7a8f88fe0f110a718dff}{params} () const 
\item 
\hyperlink{classSp804_a51a53318988df11f161ff4849813bcdd}{Sp804} (\hyperlink{classSp804_af822827c8c9baefc6aafbdc713bc2b8d}{Params} $\ast$p)
\item 
virtual \hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classSp804_a613ec7d5e1ec64f8d21fec78ae8e568e}{read} (\hyperlink{classPacket}{PacketPtr} pkt)
\item 
virtual \hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classSp804_a4cefab464e72b5dd42c003a0a4341802}{write} (\hyperlink{classPacket}{PacketPtr} pkt)
\item 
virtual void \hyperlink{classSp804_a53e036786d17361be4c7320d39c99b84}{serialize} (std::ostream \&os)
\item 
virtual void \hyperlink{classSp804_af22e5d6d660b97db37003ac61ac4ee49}{unserialize} (\hyperlink{classCheckpoint}{Checkpoint} $\ast$cp, const std::string \&section)
\end{DoxyCompactItemize}
\subsection*{Protected 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classBaseGic}{BaseGic} $\ast$ \hyperlink{classSp804_a2e2266dca56928f63667e994933169ee}{gic}
\item 
\hyperlink{classSp804_1_1Timer}{Timer} \hyperlink{classSp804_a5a3102d67b545393f0fe81b35f27ee5b}{timer0}
\item 
\hyperlink{classSp804_1_1Timer}{Timer} \hyperlink{classSp804_aac7d019e29140bad89a32896ddaf7c8d}{timer1}
\end{DoxyCompactItemize}


\subsection{型定義}
\hypertarget{classSp804_af822827c8c9baefc6aafbdc713bc2b8d}{
\index{Sp804@{Sp804}!Params@{Params}}
\index{Params@{Params}!Sp804@{Sp804}}
\subsubsection[{Params}]{\setlength{\rightskip}{0pt plus 5cm}typedef Sp804Params {\bf Params}}}
\label{classSp804_af822827c8c9baefc6aafbdc713bc2b8d}


\hyperlink{classAmbaPioDevice_ab091a3a8ffa1f3152ec35e30d1b384d5}{AmbaPioDevice}を再定義しています。

\subsection{コンストラクタとデストラクタ}
\hypertarget{classSp804_a51a53318988df11f161ff4849813bcdd}{
\index{Sp804@{Sp804}!Sp804@{Sp804}}
\index{Sp804@{Sp804}!Sp804@{Sp804}}
\subsubsection[{Sp804}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Sp804} ({\bf Params} $\ast$ {\em p})}}
\label{classSp804_a51a53318988df11f161ff4849813bcdd}
The constructor for \hyperlink{classRealView}{RealView} just registers itself with the MMU. 
\begin{DoxyParams}{引数}
\item[{\em p}]params structure \end{DoxyParams}



\begin{DoxyCode}
50     : AmbaPioDevice(p, 0xfff), gic(p->gic),
51       timer0(name() + ".timer0", this, p->int_num0, p->clock0),
52       timer1(name() + ".timer1", this, p->int_num1, p->clock1)
53 {
54 }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classSp804_acd3c3feb78ae7a8f88fe0f110a718dff}{
\index{Sp804@{Sp804}!params@{params}}
\index{params@{params}!Sp804@{Sp804}}
\subsubsection[{params}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Params}$\ast$ params () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classSp804_acd3c3feb78ae7a8f88fe0f110a718dff}


\hyperlink{classBasicPioDevice_acd3c3feb78ae7a8f88fe0f110a718dff}{BasicPioDevice}を再定義しています。


\begin{DoxyCode}
140     {
141         return dynamic_cast<const Params *>(_params);
142     }
\end{DoxyCode}
\hypertarget{classSp804_a613ec7d5e1ec64f8d21fec78ae8e568e}{
\index{Sp804@{Sp804}!read@{read}}
\index{read@{read}!Sp804@{Sp804}}
\subsubsection[{read}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} read ({\bf PacketPtr} {\em pkt})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classSp804_a613ec7d5e1ec64f8d21fec78ae8e568e}
Handle a read to the device 
\begin{DoxyParams}{引数}
\item[{\em pkt}]The memory request. \item[{\em data}]Where to put the data. \end{DoxyParams}


\hyperlink{classPioDevice_a842312590432036092c422c87a442358}{PioDevice}を実装しています。


\begin{DoxyCode}
65 {
66     assert(pkt->getAddr() >= pioAddr && pkt->getAddr() < pioAddr + pioSize);
67     assert(pkt->getSize() == 4);
68     Addr daddr = pkt->getAddr() - pioAddr;
69     pkt->allocate();
70     DPRINTF(Timer, "Reading from DualTimer at offset: %#x\n", daddr);
71 
72     if (daddr < Timer::Size)
73         timer0.read(pkt, daddr);
74     else if ((daddr - Timer::Size) < Timer::Size)
75         timer1.read(pkt, daddr - Timer::Size);
76     else if (!readId(pkt, ambaId, pioAddr))
77         panic("Tried to read SP804 at offset %#x that doesn't exist\n", daddr);
78     pkt->makeAtomicResponse();
79     return pioDelay;
80 }
\end{DoxyCode}
\hypertarget{classSp804_a53e036786d17361be4c7320d39c99b84}{
\index{Sp804@{Sp804}!serialize@{serialize}}
\index{serialize@{serialize}!Sp804@{Sp804}}
\subsubsection[{serialize}]{\setlength{\rightskip}{0pt plus 5cm}void serialize (std::ostream \& {\em os})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classSp804_a53e036786d17361be4c7320d39c99b84}


\hyperlink{classSerializable_ad6272f80ae37e8331e3969b3f072a801}{Serializable}を再定義しています。


\begin{DoxyCode}
270 {
271     nameOut(os, csprintf("%s.timer0", name()));
272     timer0.serialize(os);
273     nameOut(os, csprintf("%s.timer1", name()));
274     timer1.serialize(os);
275 }
\end{DoxyCode}
\hypertarget{classSp804_af22e5d6d660b97db37003ac61ac4ee49}{
\index{Sp804@{Sp804}!unserialize@{unserialize}}
\index{unserialize@{unserialize}!Sp804@{Sp804}}
\subsubsection[{unserialize}]{\setlength{\rightskip}{0pt plus 5cm}void unserialize ({\bf Checkpoint} $\ast$ {\em cp}, \/  const std::string \& {\em section})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classSp804_af22e5d6d660b97db37003ac61ac4ee49}


\hyperlink{classSerializable_af100c4e9feabf3cd918619c88c718387}{Serializable}を再定義しています。


\begin{DoxyCode}
279 {
280     timer0.unserialize(cp, csprintf("%s.timer0", section));
281     timer1.unserialize(cp, csprintf("%s.timer1", section));
282 }
\end{DoxyCode}
\hypertarget{classSp804_a4cefab464e72b5dd42c003a0a4341802}{
\index{Sp804@{Sp804}!write@{write}}
\index{write@{write}!Sp804@{Sp804}}
\subsubsection[{write}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} write ({\bf PacketPtr} {\em pkt})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classSp804_a4cefab464e72b5dd42c003a0a4341802}
All writes are simply ignored. 
\begin{DoxyParams}{引数}
\item[{\em pkt}]The memory request. \item[{\em data}]the data \end{DoxyParams}


\hyperlink{classPioDevice_afe8371668d023bb2516b286e5e399b6f}{PioDevice}を実装しています。


\begin{DoxyCode}
120 {
121     assert(pkt->getAddr() >= pioAddr && pkt->getAddr() < pioAddr + pioSize);
122     assert(pkt->getSize() == 4);
123     Addr daddr = pkt->getAddr() - pioAddr;
124     pkt->allocate();
125     DPRINTF(Timer, "Writing to DualTimer at offset: %#x\n", daddr);
126 
127     if (daddr < Timer::Size)
128         timer0.write(pkt, daddr);
129     else if ((daddr - Timer::Size) < Timer::Size)
130         timer1.write(pkt, daddr - Timer::Size);
131     else if (!readId(pkt, ambaId, pioAddr))
132         panic("Tried to write SP804 at offset %#x that doesn't exist\n", daddr);
133     pkt->makeAtomicResponse();
134     return pioDelay;
135 }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classSp804_a2e2266dca56928f63667e994933169ee}{
\index{Sp804@{Sp804}!gic@{gic}}
\index{gic@{gic}!Sp804@{Sp804}}
\subsubsection[{gic}]{\setlength{\rightskip}{0pt plus 5cm}{\bf BaseGic}$\ast$ {\bf gic}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSp804_a2e2266dca56928f63667e994933169ee}
Pointer to the GIC for causing an interrupt \hypertarget{classSp804_a5a3102d67b545393f0fe81b35f27ee5b}{
\index{Sp804@{Sp804}!timer0@{timer0}}
\index{timer0@{timer0}!Sp804@{Sp804}}
\subsubsection[{timer0}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Timer} {\bf timer0}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSp804_a5a3102d67b545393f0fe81b35f27ee5b}
Timers that do the actual work \hypertarget{classSp804_aac7d019e29140bad89a32896ddaf7c8d}{
\index{Sp804@{Sp804}!timer1@{timer1}}
\index{timer1@{timer1}!Sp804@{Sp804}}
\subsubsection[{timer1}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Timer} {\bf timer1}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSp804_aac7d019e29140bad89a32896ddaf7c8d}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
dev/arm/\hyperlink{timer__sp804_8hh}{timer\_\-sp804.hh}\item 
dev/arm/\hyperlink{timer__sp804_8cc}{timer\_\-sp804.cc}\end{DoxyCompactItemize}
