\hypertarget{classArmISA_1_1AbortFault}{
\section{クラス テンプレート AbortFault$<$ T $>$}
\label{classArmISA_1_1AbortFault}\index{ArmISA::AbortFault@{ArmISA::AbortFault}}
}


{\ttfamily \#include $<$faults.hh$>$}AbortFault$<$ T $>$に対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=5cm]{classArmISA_1_1AbortFault}
\end{center}
\end{figure}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classArmISA_1_1AbortFault_a68effcc3ba0f9938e7571ad7dc83ffcf}{AbortFault} (\hyperlink{classm5_1_1params_1_1Addr}{Addr} \_\-faultAddr, bool \_\-write, \hyperlink{structArmISA_1_1TlbEntry_a0595b41cfb7d03f18438f9c355a3469d}{TlbEntry::DomainType} \_\-domain, uint8\_\-t \_\-source, bool \_\-stage2, \hyperlink{classArmISA_1_1ArmFault_ad78237d6390becbe8bdf9e73979c56ae}{ArmFault::TranMethod} \_\-tranMethod=ArmFault::UnknownTran)
\item 
void \hyperlink{classArmISA_1_1AbortFault_a2bd783b42262278d41157d428e1f8d6f}{invoke} (\hyperlink{classThreadContext}{ThreadContext} $\ast$\hyperlink{namespaceArmISA_a5aff829af55e65b802d83dfcef4e9dd0}{tc}, \hyperlink{classRefCountingPtr}{StaticInstPtr} inst=\hyperlink{classStaticInst_aa793d9793af735f09096369fb17567b6}{StaticInst::nullStaticInstPtr})
\item 
FSR \hyperlink{classArmISA_1_1AbortFault_abae0f5c90ba0a6f56bc8df45dbd5861b}{getFsr} (\hyperlink{classThreadContext}{ThreadContext} $\ast$\hyperlink{namespaceArmISA_a5aff829af55e65b802d83dfcef4e9dd0}{tc})
\item 
bool \hyperlink{classArmISA_1_1AbortFault_a92a741baab278ed029d84b0fe979e1b8}{abortDisable} (\hyperlink{classThreadContext}{ThreadContext} $\ast$\hyperlink{namespaceArmISA_a5aff829af55e65b802d83dfcef4e9dd0}{tc})
\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} \hyperlink{classArmISA_1_1AbortFault_a54f4d33ac162a95fd5b3830cf7fab8ff}{iss} () const 
\item 
bool \hyperlink{classArmISA_1_1AbortFault_abb0e34fd2d22460e7779f419601dc6dc}{isStage2} () const 
\item 
void \hyperlink{classArmISA_1_1AbortFault_a1534ab135f3f8a49ad6274389bf77b51}{annotate} (\hyperlink{classArmISA_1_1ArmFault_a955305710181a260a9ee0b419a6027fb}{ArmFault::AnnotationIDs} id, uint64\_\-t val)
\item 
bool \hyperlink{classArmISA_1_1AbortFault_a3839d4e20c8314337d02889689f3c57e}{isMMUFault} () const 
\end{DoxyCompactItemize}
\subsection*{Protected 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classm5_1_1params_1_1Addr}{Addr} \hyperlink{classArmISA_1_1AbortFault_a39e9eff111c8c7d4acfecc9d3bbd29d4}{faultAddr}
\item 
\hyperlink{classm5_1_1params_1_1Addr}{Addr} \hyperlink{classArmISA_1_1AbortFault_a6d8ab6ddd3da67e07350b2c3ff6c0d80}{OVAddr}
\item 
bool \hyperlink{classArmISA_1_1AbortFault_ab4d8d1259f524270d625ab8933700d27}{write}
\item 
\hyperlink{structArmISA_1_1TlbEntry_a0595b41cfb7d03f18438f9c355a3469d}{TlbEntry::DomainType} \hyperlink{classArmISA_1_1AbortFault_a8f425ac9ed99f5604dcca4b072c88718}{domain}
\item 
uint8\_\-t \hyperlink{classArmISA_1_1AbortFault_a36a99c772ae64e186f5264a662834eef}{source}
\item 
uint8\_\-t \hyperlink{classArmISA_1_1AbortFault_ada7b52f73921c795a241ffd6e381fc69}{srcEncoded}
\item 
bool \hyperlink{classArmISA_1_1AbortFault_a29056d47d3f3a94a388d6f9ba707ef0e}{stage2}
\item 
bool \hyperlink{classArmISA_1_1AbortFault_ad135724e922a94add62100a64854ae84}{s1ptw}
\item 
\hyperlink{classArmISA_1_1ArmFault_ad78237d6390becbe8bdf9e73979c56ae}{ArmFault::TranMethod} \hyperlink{classArmISA_1_1AbortFault_a8f7a9c6fc85261a8c7ffb21d5afeed24}{tranMethod}
\end{DoxyCompactItemize}
\subsubsection*{template$<$class T$>$ class ArmISA::AbortFault$<$ T $>$}



\subsection{コンストラクタとデストラクタ}
\hypertarget{classArmISA_1_1AbortFault_a68effcc3ba0f9938e7571ad7dc83ffcf}{
\index{ArmISA::AbortFault@{ArmISA::AbortFault}!AbortFault@{AbortFault}}
\index{AbortFault@{AbortFault}!ArmISA::AbortFault@{ArmISA::AbortFault}}
\subsubsection[{AbortFault}]{\setlength{\rightskip}{0pt plus 5cm}{\bf AbortFault} ({\bf Addr} {\em \_\-faultAddr}, \/  bool {\em \_\-write}, \/  {\bf TlbEntry::DomainType} {\em \_\-domain}, \/  uint8\_\-t {\em \_\-source}, \/  bool {\em \_\-stage2}, \/  {\bf ArmFault::TranMethod} {\em \_\-tranMethod} = {\ttfamily ArmFault::UnknownTran})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classArmISA_1_1AbortFault_a68effcc3ba0f9938e7571ad7dc83ffcf}



\begin{DoxyCode}
399                                                                                  
        :
400         faultAddr(_faultAddr), write(_write), domain(_domain), source(_source),
401         stage2(_stage2), s1ptw(false), tranMethod(_tranMethod)
402     {}

\end{DoxyCode}


\subsection{関数}
\hypertarget{classArmISA_1_1AbortFault_a92a741baab278ed029d84b0fe979e1b8}{
\index{ArmISA::AbortFault@{ArmISA::AbortFault}!abortDisable@{abortDisable}}
\index{abortDisable@{abortDisable}!ArmISA::AbortFault@{ArmISA::AbortFault}}
\subsubsection[{abortDisable}]{\setlength{\rightskip}{0pt plus 5cm}bool abortDisable ({\bf ThreadContext} $\ast$ {\em tc})\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}
\label{classArmISA_1_1AbortFault_a92a741baab278ed029d84b0fe979e1b8}


\hyperlink{classArmISA_1_1ArmFaultVals_a1f1a5b662b9a505415dd5ef1f52892f3}{ArmFaultVals$<$ T $>$}を再定義しています。


\begin{DoxyCode}
1004 {
1005     if (ArmSystem::haveSecurity(tc)) {
1006         SCR scr = tc->readMiscRegNoEffect(MISCREG_SCR);
1007         return (!scr.ns || scr.aw);
1008     }
1009     return true;
1010 }
\end{DoxyCode}
\hypertarget{classArmISA_1_1AbortFault_a1534ab135f3f8a49ad6274389bf77b51}{
\index{ArmISA::AbortFault@{ArmISA::AbortFault}!annotate@{annotate}}
\index{annotate@{annotate}!ArmISA::AbortFault@{ArmISA::AbortFault}}
\subsubsection[{annotate}]{\setlength{\rightskip}{0pt plus 5cm}void annotate ({\bf ArmFault::AnnotationIDs} {\em id}, \/  uint64\_\-t {\em val})\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}
\label{classArmISA_1_1AbortFault_a1534ab135f3f8a49ad6274389bf77b51}


\hyperlink{classArmISA_1_1ArmFault_a1711e0fd9d5fa3eaa8e62cc821ef850d}{ArmFault}を再定義しています。

\hyperlink{classArmISA_1_1DataAbort_a284956f8d8ec0f18434d857ae44c6a6c}{DataAbort}で再定義されています。


\begin{DoxyCode}
1015 {
1016     switch (id)
1017     {
1018       case ArmFault::S1PTW:
1019         s1ptw = val;
1020         break;
1021       case ArmFault::OVA:
1022         OVAddr = val;
1023         break;
1024 
1025       // Just ignore unknown ID's
1026       default:
1027         break;
1028     }
1029 }
\end{DoxyCode}
\hypertarget{classArmISA_1_1AbortFault_abae0f5c90ba0a6f56bc8df45dbd5861b}{
\index{ArmISA::AbortFault@{ArmISA::AbortFault}!getFsr@{getFsr}}
\index{getFsr@{getFsr}!ArmISA::AbortFault@{ArmISA::AbortFault}}
\subsubsection[{getFsr}]{\setlength{\rightskip}{0pt plus 5cm}FSR getFsr ({\bf ThreadContext} $\ast$ {\em tc})\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}
\label{classArmISA_1_1AbortFault_abae0f5c90ba0a6f56bc8df45dbd5861b}


\hyperlink{classArmISA_1_1ArmFault_a48f7b7354d7dcf9850a65f9f433c4871}{ArmFault}を再定義しています。


\begin{DoxyCode}
973 {
974     FSR fsr = 0;
975 
976     if (((CPSR) tc->readMiscRegNoEffect(MISCREG_CPSR)).width) {
977         // AArch32
978         assert(tranMethod != ArmFault::UnknownTran);
979         if (tranMethod == ArmFault::LpaeTran) {
980             srcEncoded = ArmFault::longDescFaultSources[source];
981             fsr.status = srcEncoded;
982             fsr.lpae   = 1;
983         } else {
984             srcEncoded = ArmFault::shortDescFaultSources[source];
985             fsr.fsLow  = bits(srcEncoded, 3, 0);
986             fsr.fsHigh = bits(srcEncoded, 4);
987             fsr.domain = static_cast<uint8_t>(domain);
988         }
989         fsr.wnr = (write ? 1 : 0);
990         fsr.ext = 0;
991     } else {
992         // AArch64
993         srcEncoded = ArmFault::aarch64FaultSources[source];
994     }
995     if (srcEncoded == ArmFault::FaultSourceInvalid) {
996         panic("Invalid fault source\n");
997     }
998     return fsr;
999 }
\end{DoxyCode}
\hypertarget{classArmISA_1_1AbortFault_a2bd783b42262278d41157d428e1f8d6f}{
\index{ArmISA::AbortFault@{ArmISA::AbortFault}!invoke@{invoke}}
\index{invoke@{invoke}!ArmISA::AbortFault@{ArmISA::AbortFault}}
\subsubsection[{invoke}]{\setlength{\rightskip}{0pt plus 5cm}void invoke ({\bf ThreadContext} $\ast$ {\em tc}, \/  {\bf StaticInstPtr} {\em inst} = {\ttfamily {\bf StaticInst::nullStaticInstPtr}})\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}
\label{classArmISA_1_1AbortFault_a2bd783b42262278d41157d428e1f8d6f}


\hyperlink{classArmISA_1_1ArmFault_a2bd783b42262278d41157d428e1f8d6f}{ArmFault}を再定義しています。

\hyperlink{classArmISA_1_1VirtualDataAbort_a38260dc6f5fb9598eaf95d8696e3efe8}{VirtualDataAbort}で再定義されています。


\begin{DoxyCode}
917 {
918     if (tranMethod == ArmFault::UnknownTran) {
919         tranMethod = longDescFormatInUse(tc) ? ArmFault::LpaeTran
920                                              : ArmFault::VmsaTran;
921 
922         if ((tranMethod == ArmFault::VmsaTran) && this->routeToMonitor(tc)) {
923             // See ARM ARM B3-1416
924             bool override_LPAE = false;
925             TTBCR ttbcr_s = tc->readMiscReg(MISCREG_TTBCR_S);
926             TTBCR M5_VAR_USED ttbcr_ns = tc->readMiscReg(MISCREG_TTBCR_NS);
927             if (ttbcr_s.eae) {
928                 override_LPAE = true;
929             } else {
930                 // Unimplemented code option, not seen in testing.  May need
931                 // extension according to the manual exceprt above.
932                 DPRINTF(Faults, "Warning: Incomplete translation method "
933                         "override detected.\n");
934             }
935             if (override_LPAE)
936                 tranMethod = ArmFault::LpaeTran;
937         }
938     }
939 
940     if (source == ArmFault::AsynchronousExternalAbort) {
941         tc->getCpuPtr()->clearInterrupt(INT_ABT, 0);
942     }
943     // Get effective fault source encoding
944     CPSR cpsr = tc->readMiscReg(MISCREG_CPSR);
945     FSR  fsr  = getFsr(tc);
946 
947     // source must be determined BEFORE invoking generic routines which will
948     // try to set hsr etc. and are based upon source!
949     ArmFaultVals<T>::invoke(tc, inst);
950 
951     if (cpsr.width) {  // AArch32
952         if (cpsr.mode == MODE_HYP) {
953             tc->setMiscReg(T::HFarIndex, faultAddr);
954         } else if (stage2) {
955             tc->setMiscReg(MISCREG_HPFAR, (faultAddr >> 8) & ~0xf);
956             tc->setMiscReg(T::HFarIndex,  OVAddr);
957         } else {
958             tc->setMiscReg(T::FsrIndex, fsr);
959             tc->setMiscReg(T::FarIndex, faultAddr);
960         }
961         DPRINTF(Faults, "Abort Fault source=%#x fsr=%#x faultAddr=%#x "\
962                 "tranMethod=%#x\n", source, fsr, faultAddr, tranMethod);
963     } else {  // AArch64
964         // Set the FAR register.  Nothing else to do if we are in AArch64 state
965         // because the syndrome register has already been set inside invoke64()
966         tc->setMiscReg(AbortFault<T>::getFaultAddrReg64(), faultAddr);
967     }
968 }
\end{DoxyCode}
\hypertarget{classArmISA_1_1AbortFault_a3839d4e20c8314337d02889689f3c57e}{
\index{ArmISA::AbortFault@{ArmISA::AbortFault}!isMMUFault@{isMMUFault}}
\index{isMMUFault@{isMMUFault}!ArmISA::AbortFault@{ArmISA::AbortFault}}
\subsubsection[{isMMUFault}]{\setlength{\rightskip}{0pt plus 5cm}bool isMMUFault () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classArmISA_1_1AbortFault_a3839d4e20c8314337d02889689f3c57e}



\begin{DoxyCode}
1046 {
1047     // NOTE: Not relying on LL information being aligned to lowest bits here
1048     return
1049          (source == ArmFault::AlignmentFault)     ||
1050         ((source >= ArmFault::TranslationLL) &&
1051          (source <  ArmFault::TranslationLL + 4)) ||
1052         ((source >= ArmFault::AccessFlagLL) &&
1053          (source <  ArmFault::AccessFlagLL + 4))  ||
1054         ((source >= ArmFault::DomainLL) &&
1055          (source <  ArmFault::DomainLL + 4))      ||
1056         ((source >= ArmFault::PermissionLL) &&
1057          (source <  ArmFault::PermissionLL + 4));
1058 }
\end{DoxyCode}
\hypertarget{classArmISA_1_1AbortFault_a54f4d33ac162a95fd5b3830cf7fab8ff}{
\index{ArmISA::AbortFault@{ArmISA::AbortFault}!iss@{iss}}
\index{iss@{iss}!ArmISA::AbortFault@{ArmISA::AbortFault}}
\subsubsection[{iss}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t} iss () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}
\label{classArmISA_1_1AbortFault_a54f4d33ac162a95fd5b3830cf7fab8ff}


\hyperlink{classArmISA_1_1ArmFaultVals_a1049bf31f8df10c66994603055cf531d}{ArmFaultVals$<$ T $>$}を再定義しています。

\hyperlink{classArmISA_1_1DataAbort_a54f4d33ac162a95fd5b3830cf7fab8ff}{DataAbort}で再定義されています。


\begin{DoxyCode}
1034 {
1035     uint32_t val;
1036 
1037     val  = srcEncoded & 0x3F;
1038     val |= write << 6;
1039     val |= s1ptw << 7;
1040     return (val);
1041 }
\end{DoxyCode}
\hypertarget{classArmISA_1_1AbortFault_abb0e34fd2d22460e7779f419601dc6dc}{
\index{ArmISA::AbortFault@{ArmISA::AbortFault}!isStage2@{isStage2}}
\index{isStage2@{isStage2}!ArmISA::AbortFault@{ArmISA::AbortFault}}
\subsubsection[{isStage2}]{\setlength{\rightskip}{0pt plus 5cm}bool isStage2 () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}
\label{classArmISA_1_1AbortFault_abb0e34fd2d22460e7779f419601dc6dc}


\hyperlink{classArmISA_1_1ArmFault_a61bc59380024a05bdcbb39fb27e0293d}{ArmFault}を再定義しています。


\begin{DoxyCode}
410 { return stage2; }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classArmISA_1_1AbortFault_a8f425ac9ed99f5604dcca4b072c88718}{
\index{ArmISA::AbortFault@{ArmISA::AbortFault}!domain@{domain}}
\index{domain@{domain}!ArmISA::AbortFault@{ArmISA::AbortFault}}
\subsubsection[{domain}]{\setlength{\rightskip}{0pt plus 5cm}{\bf TlbEntry::DomainType} {\bf domain}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classArmISA_1_1AbortFault_a8f425ac9ed99f5604dcca4b072c88718}
\hypertarget{classArmISA_1_1AbortFault_a39e9eff111c8c7d4acfecc9d3bbd29d4}{
\index{ArmISA::AbortFault@{ArmISA::AbortFault}!faultAddr@{faultAddr}}
\index{faultAddr@{faultAddr}!ArmISA::AbortFault@{ArmISA::AbortFault}}
\subsubsection[{faultAddr}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Addr} {\bf faultAddr}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classArmISA_1_1AbortFault_a39e9eff111c8c7d4acfecc9d3bbd29d4}
The virtual address the fault occured at. If 2 stages of translation are being used then this is the intermediate physical address that is the starting point for the second stage of translation. \hypertarget{classArmISA_1_1AbortFault_a6d8ab6ddd3da67e07350b2c3ff6c0d80}{
\index{ArmISA::AbortFault@{ArmISA::AbortFault}!OVAddr@{OVAddr}}
\index{OVAddr@{OVAddr}!ArmISA::AbortFault@{ArmISA::AbortFault}}
\subsubsection[{OVAddr}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Addr} {\bf OVAddr}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classArmISA_1_1AbortFault_a6d8ab6ddd3da67e07350b2c3ff6c0d80}
Original virtual address. If the fault was generated on the second stage of translation then this variable stores the virtual address used in the original stage 1 translation. \hypertarget{classArmISA_1_1AbortFault_ad135724e922a94add62100a64854ae84}{
\index{ArmISA::AbortFault@{ArmISA::AbortFault}!s1ptw@{s1ptw}}
\index{s1ptw@{s1ptw}!ArmISA::AbortFault@{ArmISA::AbortFault}}
\subsubsection[{s1ptw}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf s1ptw}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classArmISA_1_1AbortFault_ad135724e922a94add62100a64854ae84}
\hypertarget{classArmISA_1_1AbortFault_a36a99c772ae64e186f5264a662834eef}{
\index{ArmISA::AbortFault@{ArmISA::AbortFault}!source@{source}}
\index{source@{source}!ArmISA::AbortFault@{ArmISA::AbortFault}}
\subsubsection[{source}]{\setlength{\rightskip}{0pt plus 5cm}uint8\_\-t {\bf source}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classArmISA_1_1AbortFault_a36a99c772ae64e186f5264a662834eef}
\hypertarget{classArmISA_1_1AbortFault_ada7b52f73921c795a241ffd6e381fc69}{
\index{ArmISA::AbortFault@{ArmISA::AbortFault}!srcEncoded@{srcEncoded}}
\index{srcEncoded@{srcEncoded}!ArmISA::AbortFault@{ArmISA::AbortFault}}
\subsubsection[{srcEncoded}]{\setlength{\rightskip}{0pt plus 5cm}uint8\_\-t {\bf srcEncoded}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classArmISA_1_1AbortFault_ada7b52f73921c795a241ffd6e381fc69}
\hypertarget{classArmISA_1_1AbortFault_a29056d47d3f3a94a388d6f9ba707ef0e}{
\index{ArmISA::AbortFault@{ArmISA::AbortFault}!stage2@{stage2}}
\index{stage2@{stage2}!ArmISA::AbortFault@{ArmISA::AbortFault}}
\subsubsection[{stage2}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf stage2}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classArmISA_1_1AbortFault_a29056d47d3f3a94a388d6f9ba707ef0e}
\hypertarget{classArmISA_1_1AbortFault_a8f7a9c6fc85261a8c7ffb21d5afeed24}{
\index{ArmISA::AbortFault@{ArmISA::AbortFault}!tranMethod@{tranMethod}}
\index{tranMethod@{tranMethod}!ArmISA::AbortFault@{ArmISA::AbortFault}}
\subsubsection[{tranMethod}]{\setlength{\rightskip}{0pt plus 5cm}{\bf ArmFault::TranMethod} {\bf tranMethod}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classArmISA_1_1AbortFault_a8f7a9c6fc85261a8c7ffb21d5afeed24}
\hypertarget{classArmISA_1_1AbortFault_ab4d8d1259f524270d625ab8933700d27}{
\index{ArmISA::AbortFault@{ArmISA::AbortFault}!write@{write}}
\index{write@{write}!ArmISA::AbortFault@{ArmISA::AbortFault}}
\subsubsection[{write}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf write}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classArmISA_1_1AbortFault_ab4d8d1259f524270d625ab8933700d27}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
arch/arm/\hyperlink{arch_2arm_2faults_8hh}{faults.hh}\item 
arch/arm/\hyperlink{arch_2arm_2faults_8cc}{faults.cc}\end{DoxyCompactItemize}
