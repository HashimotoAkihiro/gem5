\hypertarget{namespacemicro__asm}{
\section{ネームスペース micro\_\-asm}
\label{namespacemicro__asm}\index{micro\_\-asm@{micro\_\-asm}}
}
\subsection*{構成}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classmicro__asm_1_1Micro__Container}{Micro\_\-Container}
\item 
class \hyperlink{classmicro__asm_1_1Combinational__Macroop}{Combinational\_\-Macroop}
\item 
class \hyperlink{classmicro__asm_1_1Rom__Macroop}{Rom\_\-Macroop}
\item 
class \hyperlink{classmicro__asm_1_1Rom}{Rom}
\item 
class \hyperlink{classmicro__asm_1_1Label}{Label}
\item 
class \hyperlink{classmicro__asm_1_1Block}{Block}
\item 
class \hyperlink{classmicro__asm_1_1Statement}{Statement}
\item 
class \hyperlink{classmicro__asm_1_1Microop}{Microop}
\item 
class \hyperlink{classmicro__asm_1_1Directive}{Directive}
\item 
class \hyperlink{classmicro__asm_1_1MicroAssembler}{MicroAssembler}
\end{DoxyCompactItemize}
\subsection*{関数}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{namespacemicro__asm_a96434e74020a56392cf780137ed37e97}{print\_\-error}
\item 
def \hyperlink{namespacemicro__asm_a1eb3d34a205235b95d352afbdc605c4d}{handle\_\-statement}
\item 
def \hyperlink{namespacemicro__asm_aac1c7ff3716ce006fcaf70d6764ce105}{error}
\item 
def \hyperlink{namespacemicro__asm_aebcbdea8d15279a91facd2b15955adee}{t\_\-ANY\_\-COMMENT}
\item 
def \hyperlink{namespacemicro__asm_a8f356658252996771cbfeff5f1e22598}{t\_\-ANY\_\-MULTILINECOMMENT}
\item 
def \hyperlink{namespacemicro__asm_a3848d5690974e3ec07f038ea017bf8bc}{t\_\-params\_\-COLON}
\item 
def \hyperlink{namespacemicro__asm_a95021a4fe487544ac75a27dd642332bc}{t\_\-params\_\-PARAMS}
\item 
def \hyperlink{namespacemicro__asm_a5392547f3aa663a26f335c12f5e1d90a}{t\_\-asm\_\-ID}
\item 
def \hyperlink{namespacemicro__asm_a8bd1b1ba139acf81145c33e6585aae5d}{t\_\-ANY\_\-ID}
\item 
def \hyperlink{namespacemicro__asm_aa2c06c393c224afce043356650406e53}{t\_\-INITIAL\_\-LBRACE}
\item 
def \hyperlink{namespacemicro__asm_a76fb1d4218c5b61b6da97a71c50cf2a6}{t\_\-asm\_\-RBRACE}
\item 
def \hyperlink{namespacemicro__asm_a01568e4c45abbf86a0d13ed07b788a73}{t\_\-INITIAL\_\-NEWLINE}
\item 
def \hyperlink{namespacemicro__asm_adc4f9c72cba5be242bb93df6c49c3bc5}{t\_\-asm\_\-NEWLINE}
\item 
def \hyperlink{namespacemicro__asm_a466b4ac51d5f9226e723240cdb1b809d}{t\_\-params\_\-NEWLINE}
\item 
def \hyperlink{namespacemicro__asm_a771bc622a40e7ad0bccc1715a303dff0}{t\_\-params\_\-SEMI}
\item 
def \hyperlink{namespacemicro__asm_a8a27a0ed21dc2158cf69643547032d6c}{t\_\-ANY\_\-error}
\item 
def \hyperlink{namespacemicro__asm_a61564c360e71827a5ab5edf7e138e4c1}{p\_\-file}
\item 
def \hyperlink{namespacemicro__asm_a428b8086af1d1528aff7252fa2990344}{p\_\-opt\_\-rom\_\-or\_\-macros\_\-0}
\item 
def \hyperlink{namespacemicro__asm_af9fedecba85a450dedbeba1844439c48}{p\_\-opt\_\-rom\_\-or\_\-macros\_\-1}
\item 
def \hyperlink{namespacemicro__asm_a964484247cb0adbfa617df2dc18412f9}{p\_\-rom\_\-or\_\-macros\_\-0}
\item 
def \hyperlink{namespacemicro__asm_a98a28e21d8935d0509b0eeab16cb1054}{p\_\-rom\_\-or\_\-macros\_\-1}
\item 
def \hyperlink{namespacemicro__asm_a1074e10937aa3b2c8c2a43b95ecb89bc}{p\_\-rom\_\-or\_\-macro\_\-0}
\item 
def \hyperlink{namespacemicro__asm_a85628206b0efb164296ad31d33c4e6c1}{p\_\-rom\_\-block}
\item 
def \hyperlink{namespacemicro__asm_aa06e96f1559d9d801fc212792e8b6f9a}{p\_\-macroop\_\-def\_\-0}
\item 
def \hyperlink{namespacemicro__asm_a6d0e75a8c27d4a8f7e9bd8d1e20459b6}{p\_\-macroop\_\-def\_\-1}
\item 
def \hyperlink{namespacemicro__asm_a02f1dabdaa8180367d76047e8d85ecfb}{p\_\-block}
\item 
def \hyperlink{namespacemicro__asm_a6cd716f332ee4919811fe6ade94e75c5}{p\_\-statements\_\-0}
\item 
def \hyperlink{namespacemicro__asm_a33c1a47687c46c90cb9435de8cb17c32}{p\_\-statements\_\-1}
\item 
def \hyperlink{namespacemicro__asm_aa6bc8ecb9428878bec6bcc95b1cb0f4c}{p\_\-statement}
\item 
def \hyperlink{namespacemicro__asm_a3e7c407b8a54e83439195cad9357af30}{p\_\-content\_\-of\_\-statement\_\-0}
\item 
def \hyperlink{namespacemicro__asm_a84b621725f0a85e7f52bfaeb974fedb7}{p\_\-content\_\-of\_\-statement\_\-1}
\item 
def \hyperlink{namespacemicro__asm_af9a07c99f70584eecf19c3bfc4fb8e26}{p\_\-end\_\-of\_\-statement}
\item 
def \hyperlink{namespacemicro__asm_a0f05ebd0fd8134f90eab4087d7e71fb2}{p\_\-microop\_\-0}
\item 
def \hyperlink{namespacemicro__asm_aabbc3564c9f11e69915460e13e307b07}{p\_\-microop\_\-1}
\item 
def \hyperlink{namespacemicro__asm_a3bf613ee79e6c58586b467556274fc84}{p\_\-microop\_\-2}
\item 
def \hyperlink{namespacemicro__asm_a86065607f7f81cdbb6bbf1375e32c2c2}{p\_\-microop\_\-3}
\item 
def \hyperlink{namespacemicro__asm_a9cb8e2ba66d91a1d4dfb7cb3a90c1cf7}{p\_\-labels\_\-0}
\item 
def \hyperlink{namespacemicro__asm_a14c2988a6cdde6544b11178ffa1ac4e1}{p\_\-labels\_\-1}
\item 
def \hyperlink{namespacemicro__asm_a16e86f7b82ae8abcb138c274ff0743b8}{p\_\-labels\_\-2}
\item 
def \hyperlink{namespacemicro__asm_aa02e5ebc42f155c23b13bfd0eb35bd9d}{p\_\-label\_\-0}
\item 
def \hyperlink{namespacemicro__asm_a7e3b6c397967ee0c9f541f8c1b388cd5}{p\_\-label\_\-1}
\item 
def \hyperlink{namespacemicro__asm_a8521fe516e58d23df8a9a00ffa804d91}{p\_\-directive\_\-0}
\item 
def \hyperlink{namespacemicro__asm_a4b5544c13f30d1f1b1be7d9ac1642ae6}{p\_\-directive\_\-1}
\item 
def \hyperlink{namespacemicro__asm_a7e0282385fe8587f1136e99fb97817f2}{p\_\-error}
\end{DoxyCompactItemize}
\subsection*{変数}
\begin{DoxyCompactItemize}
\item 
tuple \hyperlink{namespacemicro__asm_a7c0da508b820c6b4db51430d694f6d8b}{reserved} = ('DEF', 'MACROOP', 'ROM', 'EXTERN')
\item 
tuple \hyperlink{namespacemicro__asm_a8949ccb05d719d97020ab994d6044eef}{tokens}
\item 
tuple \hyperlink{namespacemicro__asm_a998242a7605823c08ad1630923b570d5}{states}
\item 
dictionary \hyperlink{namespacemicro__asm_a2fce270f6ee4bafd620b1b2f00cd9b79}{reserved\_\-map} = \{ \}
\item 
string \hyperlink{namespacemicro__asm_adddd3644d1c96a6ff6c697f82c5c6fe9}{t\_\-ANY\_\-LPAREN} = r'$\backslash$('
\item 
string \hyperlink{namespacemicro__asm_a48eea5b8a8376860f8538dafed3cc105}{t\_\-ANY\_\-RPAREN} = r'$\backslash$)'
\item 
string \hyperlink{namespacemicro__asm_a5a4b0779a63cf66d21e5a48374083ab4}{t\_\-ANY\_\-SEMI} = r';'
\item 
string \hyperlink{namespacemicro__asm_a552c7d03bd35ff56963494e8cdd840c1}{t\_\-ANY\_\-DOT} = r'$\backslash$.'
\item 
string \hyperlink{namespacemicro__asm_a65d7419bbffa21f7c4406f5518092c9b}{t\_\-ANY\_\-ignore} = ' $\backslash$t$\backslash$x0c'
\end{DoxyCompactItemize}


\subsection{関数}
\hypertarget{namespacemicro__asm_aac1c7ff3716ce006fcaf70d6764ce105}{
\index{micro\_\-asm@{micro\_\-asm}!error@{error}}
\index{error@{error}!micro_asm@{micro\_\-asm}}
\subsubsection[{error}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::error ( {\em lineno}, \/   {\em string}, \/   {\em print\_\-traceback} = {\ttfamily False})}}
\label{namespacemicro__asm_aac1c7ff3716ce006fcaf70d6764ce105}



\begin{DoxyCode}
171                                                   :
172     # Print a Python stack backtrace if requested.
173     if (print_traceback):
174         traceback.print_exc()
175     if lineno != 0:
176         line_str = "%d:" % lineno
177     else:
178         line_str = ""
179     sys.exit("%s %s" % (line_str, string))
180 
reserved = ('DEF', 'MACROOP', 'ROM', 'EXTERN')
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a1eb3d34a205235b95d352afbdc605c4d}{
\index{micro\_\-asm@{micro\_\-asm}!handle\_\-statement@{handle\_\-statement}}
\index{handle\_\-statement@{handle\_\-statement}!micro_asm@{micro\_\-asm}}
\subsubsection[{handle\_\-statement}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::handle\_\-statement ( {\em parser}, \/   {\em container}, \/   {\em statement})}}
\label{namespacemicro__asm_a1eb3d34a205235b95d352afbdc605c4d}



\begin{DoxyCode}
124                                                   :
125     if statement.is_microop:
126         if statement.mnemonic not in parser.microops.keys():
127             raise Exception, "Unrecognized mnemonic: %s" % statement.mnemonic
128         parser.symbols["__microopClassFromInsideTheAssembler"] = \
129             parser.microops[statement.mnemonic]
130         try:
131             microop = eval('__microopClassFromInsideTheAssembler(%s)' %
132                     statement.params, {}, parser.symbols)
133         except:
134             print_error("Error creating microop object with mnemonic %s." % \
135                     statement.mnemonic)
136             raise
137         try:
138             for label in statement.labels:
139                 container.labels[label.text] = microop
140                 if label.is_extern:
141                     container.externs[label.text] = microop
142             container.add_microop(statement.mnemonic, microop)
143         except:
144             print_error("Error adding microop.")
145             raise
146     elif statement.is_directive:
147         if statement.name not in container.directives.keys():
148             raise Exception, "Unrecognized directive: %s" % statement.name
149         parser.symbols["__directiveFunctionFromInsideTheAssembler"] = \
150             container.directives[statement.name]
151         try:
152             eval('__directiveFunctionFromInsideTheAssembler(%s)' %
153                     statement.params, {}, parser.symbols)
154         except:
155             print_error("Error executing directive.")
156             print container.directives
157             raise
158     else:
159         raise Exception, "Didn't recognize the type of statement", statement
160 
##########################################################################
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a02f1dabdaa8180367d76047e8d85ecfb}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-block@{p\_\-block}}
\index{p\_\-block@{p\_\-block}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-block}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-block ( {\em t})}}
\label{namespacemicro__asm_a02f1dabdaa8180367d76047e8d85ecfb}



\begin{DoxyCode}
362               :
363     'block : LBRACE statements RBRACE'
364     block = Block()
365     block.statements = t[2]
366     t[0] = block
367 
def p_statements_0(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a3e7c407b8a54e83439195cad9357af30}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-content\_\-of\_\-statement\_\-0@{p\_\-content\_\-of\_\-statement\_\-0}}
\index{p\_\-content\_\-of\_\-statement\_\-0@{p\_\-content\_\-of\_\-statement\_\-0}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-content\_\-of\_\-statement\_\-0}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-content\_\-of\_\-statement\_\-0 ( {\em t})}}
\label{namespacemicro__asm_a3e7c407b8a54e83439195cad9357af30}
\begin{DoxyVerb}content_of_statement : microop
                        | directive\end{DoxyVerb}
 


\begin{DoxyCode}
386                                :
387     '''content_of_statement : microop
388                             | directive'''
389     t[0] = t[1]
390 
391 # Ignore empty statements
def p_content_of_statement_1(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a84b621725f0a85e7f52bfaeb974fedb7}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-content\_\-of\_\-statement\_\-1@{p\_\-content\_\-of\_\-statement\_\-1}}
\index{p\_\-content\_\-of\_\-statement\_\-1@{p\_\-content\_\-of\_\-statement\_\-1}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-content\_\-of\_\-statement\_\-1}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-content\_\-of\_\-statement\_\-1 ( {\em t})}}
\label{namespacemicro__asm_a84b621725f0a85e7f52bfaeb974fedb7}



\begin{DoxyCode}
392                                :
393     'content_of_statement : '
394     pass
395 
396 # Statements are ended by newlines or a semi colon
def p_end_of_statement(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a8521fe516e58d23df8a9a00ffa804d91}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-directive\_\-0@{p\_\-directive\_\-0}}
\index{p\_\-directive\_\-0@{p\_\-directive\_\-0}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-directive\_\-0}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-directive\_\-0 ( {\em t})}}
\label{namespacemicro__asm_a8521fe516e58d23df8a9a00ffa804d91}



\begin{DoxyCode}
461                     :
462     'directive : DOT ID'
463     directive = Directive()
464     directive.name = t[2]
465     t[0] = directive
466 
def p_directive_1(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a4b5544c13f30d1f1b1be7d9ac1642ae6}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-directive\_\-1@{p\_\-directive\_\-1}}
\index{p\_\-directive\_\-1@{p\_\-directive\_\-1}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-directive\_\-1}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-directive\_\-1 ( {\em t})}}
\label{namespacemicro__asm_a4b5544c13f30d1f1b1be7d9ac1642ae6}



\begin{DoxyCode}
467                     :
468     'directive : DOT ID PARAMS'
469     directive = Directive()
470     directive.name = t[2]
471     directive.params = t[3]
472     t[0] = directive
473 
474 # Parse error handler.  Note that the argument here is the offending
475 # *token*, not a grammar symbol (hence the need to use t.value)
def p_error(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_af9a07c99f70584eecf19c3bfc4fb8e26}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-end\_\-of\_\-statement@{p\_\-end\_\-of\_\-statement}}
\index{p\_\-end\_\-of\_\-statement@{p\_\-end\_\-of\_\-statement}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-end\_\-of\_\-statement}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-end\_\-of\_\-statement ( {\em t})}}
\label{namespacemicro__asm_af9a07c99f70584eecf19c3bfc4fb8e26}
\begin{DoxyVerb}end_of_statement : NEWLINE
                    | SEMI\end{DoxyVerb}
 


\begin{DoxyCode}
397                          :
398     '''end_of_statement : NEWLINE
399                         | SEMI'''
400     pass
401 
402 # Different flavors of microop to avoid shift/reduce errors
def p_microop_0(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a7e0282385fe8587f1136e99fb97817f2}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-error@{p\_\-error}}
\index{p\_\-error@{p\_\-error}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-error}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-error ( {\em t})}}
\label{namespacemicro__asm_a7e0282385fe8587f1136e99fb97817f2}



\begin{DoxyCode}
476               :
477     if t:
478         error(t.lineno, "syntax error at '%s'" % t.value)
479     else:
480         error(0, "unknown syntax error", True)
481 
class MicroAssembler(object):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a61564c360e71827a5ab5edf7e138e4c1}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-file@{p\_\-file}}
\index{p\_\-file@{p\_\-file}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-file}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-file ( {\em t})}}
\label{namespacemicro__asm_a61564c360e71827a5ab5edf7e138e4c1}



\begin{DoxyCode}
310              :
311     'file : opt_rom_or_macros'
312 
def p_opt_rom_or_macros_0(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_aa02e5ebc42f155c23b13bfd0eb35bd9d}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-label\_\-0@{p\_\-label\_\-0}}
\index{p\_\-label\_\-0@{p\_\-label\_\-0}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-label\_\-0}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-label\_\-0 ( {\em t})}}
\label{namespacemicro__asm_aa02e5ebc42f155c23b13bfd0eb35bd9d}



\begin{DoxyCode}
446                 :
447     'label : ID COLON'
448     label = Label()
449     label.is_extern = False
450     label.text = t[1]
451     t[0] = label
452 
def p_label_1(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a7e3b6c397967ee0c9f541f8c1b388cd5}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-label\_\-1@{p\_\-label\_\-1}}
\index{p\_\-label\_\-1@{p\_\-label\_\-1}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-label\_\-1}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-label\_\-1 ( {\em t})}}
\label{namespacemicro__asm_a7e3b6c397967ee0c9f541f8c1b388cd5}



\begin{DoxyCode}
453                 :
454     'label : EXTERN ID COLON'
455     label = Label()
456     label.is_extern = True
457     label.text = t[2]
458     t[0] = label
459 
460 # Directives for the macroop
def p_directive_0(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a9cb8e2ba66d91a1d4dfb7cb3a90c1cf7}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-labels\_\-0@{p\_\-labels\_\-0}}
\index{p\_\-labels\_\-0@{p\_\-labels\_\-0}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-labels\_\-0}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-labels\_\-0 ( {\em t})}}
\label{namespacemicro__asm_a9cb8e2ba66d91a1d4dfb7cb3a90c1cf7}



\begin{DoxyCode}
432                  :
433     'labels : label'
434     t[0] = [t[1]]
435 
def p_labels_1(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a14c2988a6cdde6544b11178ffa1ac4e1}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-labels\_\-1@{p\_\-labels\_\-1}}
\index{p\_\-labels\_\-1@{p\_\-labels\_\-1}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-labels\_\-1}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-labels\_\-1 ( {\em t})}}
\label{namespacemicro__asm_a14c2988a6cdde6544b11178ffa1ac4e1}



\begin{DoxyCode}
436                  :
437     'labels : labels label'
438     t[1].append(t[2])
439     t[0] = t[1]
440 
441 # labels on lines by themselves are attached to the following instruction.
def p_labels_2(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a16e86f7b82ae8abcb138c274ff0743b8}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-labels\_\-2@{p\_\-labels\_\-2}}
\index{p\_\-labels\_\-2@{p\_\-labels\_\-2}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-labels\_\-2}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-labels\_\-2 ( {\em t})}}
\label{namespacemicro__asm_a16e86f7b82ae8abcb138c274ff0743b8}



\begin{DoxyCode}
442                  :
443     'labels : labels NEWLINE'
444     t[0] = t[1]
445 
def p_label_0(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_aa06e96f1559d9d801fc212792e8b6f9a}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-macroop\_\-def\_\-0@{p\_\-macroop\_\-def\_\-0}}
\index{p\_\-macroop\_\-def\_\-0@{p\_\-macroop\_\-def\_\-0}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-macroop\_\-def\_\-0}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-macroop\_\-def\_\-0 ( {\em t})}}
\label{namespacemicro__asm_aa06e96f1559d9d801fc212792e8b6f9a}



\begin{DoxyCode}
340                       :
341     'macroop_def : DEF MACROOP ID LPAREN ID RPAREN SEMI'
342     if not t.parser.rom_macroop_type:
343         print_error("ROM based macroop found, but no ROM macroop class was specif
      ied.")
344         raise TypeError, "ROM based macroop found, but no ROM macroop class was s
      pecified."
345     macroop = t.parser.rom_macroop_type(t[3], t[5])
346     t.parser.macroops[t[3]] = macroop
347 
348 
349 # Defines a macroop that is combinationally generated
def p_macroop_def_1(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a6d0e75a8c27d4a8f7e9bd8d1e20459b6}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-macroop\_\-def\_\-1@{p\_\-macroop\_\-def\_\-1}}
\index{p\_\-macroop\_\-def\_\-1@{p\_\-macroop\_\-def\_\-1}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-macroop\_\-def\_\-1}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-macroop\_\-def\_\-1 ( {\em t})}}
\label{namespacemicro__asm_a6d0e75a8c27d4a8f7e9bd8d1e20459b6}



\begin{DoxyCode}
350                       :
351     'macroop_def : DEF MACROOP ID block SEMI'
352     try:
353         curop = t.parser.macro_type(t[3])
354     except TypeError:
355         print_error("Error creating macroop object.")
356         raise
357     for statement in t[4].statements:
358         handle_statement(t.parser, curop, statement)
359     t.parser.macroops[t[3]] = curop
360 
361 # A block of statements
def p_block(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a0f05ebd0fd8134f90eab4087d7e71fb2}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-microop\_\-0@{p\_\-microop\_\-0}}
\index{p\_\-microop\_\-0@{p\_\-microop\_\-0}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-microop\_\-0}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-microop\_\-0 ( {\em t})}}
\label{namespacemicro__asm_a0f05ebd0fd8134f90eab4087d7e71fb2}



\begin{DoxyCode}
403                   :
404     'microop : labels ID'
405     microop = Microop()
406     microop.labels = t[1]
407     microop.mnemonic = t[2]
408     t[0] = microop
409 
def p_microop_1(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_aabbc3564c9f11e69915460e13e307b07}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-microop\_\-1@{p\_\-microop\_\-1}}
\index{p\_\-microop\_\-1@{p\_\-microop\_\-1}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-microop\_\-1}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-microop\_\-1 ( {\em t})}}
\label{namespacemicro__asm_aabbc3564c9f11e69915460e13e307b07}



\begin{DoxyCode}
410                   :
411     'microop : ID'
412     microop = Microop()
413     microop.mnemonic = t[1]
414     t[0] = microop
415 
def p_microop_2(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a3bf613ee79e6c58586b467556274fc84}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-microop\_\-2@{p\_\-microop\_\-2}}
\index{p\_\-microop\_\-2@{p\_\-microop\_\-2}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-microop\_\-2}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-microop\_\-2 ( {\em t})}}
\label{namespacemicro__asm_a3bf613ee79e6c58586b467556274fc84}



\begin{DoxyCode}
416                   :
417     'microop : labels ID PARAMS'
418     microop = Microop()
419     microop.labels = t[1]
420     microop.mnemonic = t[2]
421     microop.params = t[3]
422     t[0] = microop
423 
def p_microop_3(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a86065607f7f81cdbb6bbf1375e32c2c2}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-microop\_\-3@{p\_\-microop\_\-3}}
\index{p\_\-microop\_\-3@{p\_\-microop\_\-3}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-microop\_\-3}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-microop\_\-3 ( {\em t})}}
\label{namespacemicro__asm_a86065607f7f81cdbb6bbf1375e32c2c2}



\begin{DoxyCode}
424                   :
425     'microop : ID PARAMS'
426     microop = Microop()
427     microop.mnemonic = t[1]
428     microop.params = t[2]
429     t[0] = microop
430 
431 # Labels in the microcode
def p_labels_0(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a428b8086af1d1528aff7252fa2990344}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-opt\_\-rom\_\-or\_\-macros\_\-0@{p\_\-opt\_\-rom\_\-or\_\-macros\_\-0}}
\index{p\_\-opt\_\-rom\_\-or\_\-macros\_\-0@{p\_\-opt\_\-rom\_\-or\_\-macros\_\-0}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-opt\_\-rom\_\-or\_\-macros\_\-0}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-opt\_\-rom\_\-or\_\-macros\_\-0 ( {\em t})}}
\label{namespacemicro__asm_a428b8086af1d1528aff7252fa2990344}



\begin{DoxyCode}
313                             :
314     'opt_rom_or_macros : '
315 
def p_opt_rom_or_macros_1(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_af9fedecba85a450dedbeba1844439c48}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-opt\_\-rom\_\-or\_\-macros\_\-1@{p\_\-opt\_\-rom\_\-or\_\-macros\_\-1}}
\index{p\_\-opt\_\-rom\_\-or\_\-macros\_\-1@{p\_\-opt\_\-rom\_\-or\_\-macros\_\-1}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-opt\_\-rom\_\-or\_\-macros\_\-1}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-opt\_\-rom\_\-or\_\-macros\_\-1 ( {\em t})}}
\label{namespacemicro__asm_af9fedecba85a450dedbeba1844439c48}



\begin{DoxyCode}
316                             :
317     'opt_rom_or_macros : rom_or_macros'
318 
def p_rom_or_macros_0(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a85628206b0efb164296ad31d33c4e6c1}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-rom\_\-block@{p\_\-rom\_\-block}}
\index{p\_\-rom\_\-block@{p\_\-rom\_\-block}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-rom\_\-block}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-rom\_\-block ( {\em t})}}
\label{namespacemicro__asm_a85628206b0efb164296ad31d33c4e6c1}



\begin{DoxyCode}
330                   :
331     'rom_block : DEF ROM block SEMI'
332     if not t.parser.rom:
333         print_error("Rom block found, but no Rom object specified.")
334         raise TypeError, "Rom block found, but no Rom object was specified."
335     for statement in t[3].statements:
336         handle_statement(t.parser, t.parser.rom, statement)
337     t[0] = t.parser.rom
338 
339 # Defines a macroop that jumps to an external label in the ROM
def p_macroop_def_0(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a1074e10937aa3b2c8c2a43b95ecb89bc}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-rom\_\-or\_\-macro\_\-0@{p\_\-rom\_\-or\_\-macro\_\-0}}
\index{p\_\-rom\_\-or\_\-macro\_\-0@{p\_\-rom\_\-or\_\-macro\_\-0}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-rom\_\-or\_\-macro\_\-0}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-rom\_\-or\_\-macro\_\-0 ( {\em t})}}
\label{namespacemicro__asm_a1074e10937aa3b2c8c2a43b95ecb89bc}
\begin{DoxyVerb}rom_or_macro : rom_block
                | macroop_def\end{DoxyVerb}
 


\begin{DoxyCode}
325                        :
326     '''rom_or_macro : rom_block
327                     | macroop_def'''
328 
329 # Defines a section of microcode that should go in the current ROM
def p_rom_block(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a964484247cb0adbfa617df2dc18412f9}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-rom\_\-or\_\-macros\_\-0@{p\_\-rom\_\-or\_\-macros\_\-0}}
\index{p\_\-rom\_\-or\_\-macros\_\-0@{p\_\-rom\_\-or\_\-macros\_\-0}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-rom\_\-or\_\-macros\_\-0}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-rom\_\-or\_\-macros\_\-0 ( {\em t})}}
\label{namespacemicro__asm_a964484247cb0adbfa617df2dc18412f9}



\begin{DoxyCode}
319                         :
320     'rom_or_macros : rom_or_macro'
321 
def p_rom_or_macros_1(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a98a28e21d8935d0509b0eeab16cb1054}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-rom\_\-or\_\-macros\_\-1@{p\_\-rom\_\-or\_\-macros\_\-1}}
\index{p\_\-rom\_\-or\_\-macros\_\-1@{p\_\-rom\_\-or\_\-macros\_\-1}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-rom\_\-or\_\-macros\_\-1}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-rom\_\-or\_\-macros\_\-1 ( {\em t})}}
\label{namespacemicro__asm_a98a28e21d8935d0509b0eeab16cb1054}



\begin{DoxyCode}
322                         :
323     'rom_or_macros : rom_or_macros rom_or_macro'
324 
def p_rom_or_macro_0(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_aa6bc8ecb9428878bec6bcc95b1cb0f4c}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-statement@{p\_\-statement}}
\index{p\_\-statement@{p\_\-statement}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-statement}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-statement ( {\em t})}}
\label{namespacemicro__asm_aa6bc8ecb9428878bec6bcc95b1cb0f4c}



\begin{DoxyCode}
381                   :
382     'statement : content_of_statement end_of_statement'
383     t[0] = t[1]
384 
385 # A statement can be a microop or an assembler directive
def p_content_of_statement_0(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a6cd716f332ee4919811fe6ade94e75c5}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-statements\_\-0@{p\_\-statements\_\-0}}
\index{p\_\-statements\_\-0@{p\_\-statements\_\-0}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-statements\_\-0}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-statements\_\-0 ( {\em t})}}
\label{namespacemicro__asm_a6cd716f332ee4919811fe6ade94e75c5}



\begin{DoxyCode}
368                      :
369     'statements : statement'
370     if t[1]:
371         t[0] = [t[1]]
372     else:
373         t[0] = []
374 
def p_statements_1(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a33c1a47687c46c90cb9435de8cb17c32}{
\index{micro\_\-asm@{micro\_\-asm}!p\_\-statements\_\-1@{p\_\-statements\_\-1}}
\index{p\_\-statements\_\-1@{p\_\-statements\_\-1}!micro_asm@{micro\_\-asm}}
\subsubsection[{p\_\-statements\_\-1}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::p\_\-statements\_\-1 ( {\em t})}}
\label{namespacemicro__asm_a33c1a47687c46c90cb9435de8cb17c32}



\begin{DoxyCode}
375                      :
376     'statements : statements statement'
377     if t[2]:
378         t[1].append(t[2])
379     t[0] = t[1]
380 
def p_statement(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a96434e74020a56392cf780137ed37e97}{
\index{micro\_\-asm@{micro\_\-asm}!print\_\-error@{print\_\-error}}
\index{print\_\-error@{print\_\-error}!micro_asm@{micro\_\-asm}}
\subsubsection[{print\_\-error}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::print\_\-error ( {\em message})}}
\label{namespacemicro__asm_a96434e74020a56392cf780137ed37e97}



\begin{DoxyCode}
119                         :
120     print
121     print "*** %s" % message
122     print
123 
def handle_statement(parser, container, statement):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_aebcbdea8d15279a91facd2b15955adee}{
\index{micro\_\-asm@{micro\_\-asm}!t\_\-ANY\_\-COMMENT@{t\_\-ANY\_\-COMMENT}}
\index{t\_\-ANY\_\-COMMENT@{t\_\-ANY\_\-COMMENT}!micro_asm@{micro\_\-asm}}
\subsubsection[{t\_\-ANY\_\-COMMENT}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::t\_\-ANY\_\-COMMENT ( {\em t})}}
\label{namespacemicro__asm_aebcbdea8d15279a91facd2b15955adee}



\begin{DoxyCode}
207                     :
208     r'\#[^\n]*(?=\n)'
209 
def t_ANY_MULTILINECOMMENT(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a8a27a0ed21dc2158cf69643547032d6c}{
\index{micro\_\-asm@{micro\_\-asm}!t\_\-ANY\_\-error@{t\_\-ANY\_\-error}}
\index{t\_\-ANY\_\-error@{t\_\-ANY\_\-error}!micro_asm@{micro\_\-asm}}
\subsubsection[{t\_\-ANY\_\-error}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::t\_\-ANY\_\-error ( {\em t})}}
\label{namespacemicro__asm_a8a27a0ed21dc2158cf69643547032d6c}



\begin{DoxyCode}
298                   :
299     error(t.lineno, "illegal character '%s'" % t.value[0])
300     t.skip(1)
301 
##########################################################################
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a8bd1b1ba139acf81145c33e6585aae5d}{
\index{micro\_\-asm@{micro\_\-asm}!t\_\-ANY\_\-ID@{t\_\-ANY\_\-ID}}
\index{t\_\-ANY\_\-ID@{t\_\-ANY\_\-ID}!micro_asm@{micro\_\-asm}}
\subsubsection[{t\_\-ANY\_\-ID}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::t\_\-ANY\_\-ID ( {\em t})}}
\label{namespacemicro__asm_a8bd1b1ba139acf81145c33e6585aae5d}



\begin{DoxyCode}
249                :
250     r'[A-Za-z_]\w*'
251     t.type = reserved_map.get(t.value, 'ID')
252     return t
253 
254 # Braces enter and exit micro assembly
def t_INITIAL_LBRACE(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a8f356658252996771cbfeff5f1e22598}{
\index{micro\_\-asm@{micro\_\-asm}!t\_\-ANY\_\-MULTILINECOMMENT@{t\_\-ANY\_\-MULTILINECOMMENT}}
\index{t\_\-ANY\_\-MULTILINECOMMENT@{t\_\-ANY\_\-MULTILINECOMMENT}!micro_asm@{micro\_\-asm}}
\subsubsection[{t\_\-ANY\_\-MULTILINECOMMENT}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::t\_\-ANY\_\-MULTILINECOMMENT ( {\em t})}}
\label{namespacemicro__asm_a8f356658252996771cbfeff5f1e22598}



\begin{DoxyCode}
210                              :
211     r'/\*([^/]|((?<!\*)/))*\*/'
212 
213 # A colon marks the end of a label. It should follow an ID which will
214 # put the lexer in the "params" state. Seeing the colon will put it back
215 # in the "asm" state since it knows it saw a label and not a mnemonic.
def t_params_COLON(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a5392547f3aa663a26f335c12f5e1d90a}{
\index{micro\_\-asm@{micro\_\-asm}!t\_\-asm\_\-ID@{t\_\-asm\_\-ID}}
\index{t\_\-asm\_\-ID@{t\_\-asm\_\-ID}!micro_asm@{micro\_\-asm}}
\subsubsection[{t\_\-asm\_\-ID}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::t\_\-asm\_\-ID ( {\em t})}}
\label{namespacemicro__asm_a5392547f3aa663a26f335c12f5e1d90a}



\begin{DoxyCode}
238                :
239     r'[A-Za-z_]\w*'
240     t.type = reserved_map.get(t.value, 'ID')
241     # If the ID is really "extern", we shouldn't start looking for parameters
242     # yet. The real ID, the label itself, is coming up.
243     if t.type != 'EXTERN':
244         t.lexer.begin('params')
245     return t
246 
247 # If there is a label and you're -not- in the assembler (which would be caught
248 # above), don't start looking for parameters.
def t_ANY_ID(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_adc4f9c72cba5be242bb93df6c49c3bc5}{
\index{micro\_\-asm@{micro\_\-asm}!t\_\-asm\_\-NEWLINE@{t\_\-asm\_\-NEWLINE}}
\index{t\_\-asm\_\-NEWLINE@{t\_\-asm\_\-NEWLINE}!micro_asm@{micro\_\-asm}}
\subsubsection[{t\_\-asm\_\-NEWLINE}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::t\_\-asm\_\-NEWLINE ( {\em t})}}
\label{namespacemicro__asm_adc4f9c72cba5be242bb93df6c49c3bc5}



\begin{DoxyCode}
272                     :
273     r'\n+'
274     t.lineno += t.value.count('\n')
275     return t
276 
277 # A newline or semi colon when looking for params signals that the statement
278 # is over and the lexer should go back to looking for regular assembly.
def t_params_NEWLINE(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a76fb1d4218c5b61b6da97a71c50cf2a6}{
\index{micro\_\-asm@{micro\_\-asm}!t\_\-asm\_\-RBRACE@{t\_\-asm\_\-RBRACE}}
\index{t\_\-asm\_\-RBRACE@{t\_\-asm\_\-RBRACE}!micro_asm@{micro\_\-asm}}
\subsubsection[{t\_\-asm\_\-RBRACE}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::t\_\-asm\_\-RBRACE ( {\em t})}}
\label{namespacemicro__asm_a76fb1d4218c5b61b6da97a71c50cf2a6}



\begin{DoxyCode}
260                    :
261     r'\}'
262     t.lexer.begin('INITIAL')
263     return t
264 
265 # At the top level, keep track of newlines only for line counting.
def t_INITIAL_NEWLINE(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_aa2c06c393c224afce043356650406e53}{
\index{micro\_\-asm@{micro\_\-asm}!t\_\-INITIAL\_\-LBRACE@{t\_\-INITIAL\_\-LBRACE}}
\index{t\_\-INITIAL\_\-LBRACE@{t\_\-INITIAL\_\-LBRACE}!micro_asm@{micro\_\-asm}}
\subsubsection[{t\_\-INITIAL\_\-LBRACE}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::t\_\-INITIAL\_\-LBRACE ( {\em t})}}
\label{namespacemicro__asm_aa2c06c393c224afce043356650406e53}



\begin{DoxyCode}
255                        :
256     r'\{'
257     t.lexer.begin('asm')
258     return t
259 
def t_asm_RBRACE(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a01568e4c45abbf86a0d13ed07b788a73}{
\index{micro\_\-asm@{micro\_\-asm}!t\_\-INITIAL\_\-NEWLINE@{t\_\-INITIAL\_\-NEWLINE}}
\index{t\_\-INITIAL\_\-NEWLINE@{t\_\-INITIAL\_\-NEWLINE}!micro_asm@{micro\_\-asm}}
\subsubsection[{t\_\-INITIAL\_\-NEWLINE}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::t\_\-INITIAL\_\-NEWLINE ( {\em t})}}
\label{namespacemicro__asm_a01568e4c45abbf86a0d13ed07b788a73}



\begin{DoxyCode}
266                         :
267     r'\n+'
268     t.lineno += t.value.count('\n')
269 
270 # In the micro assembler, do line counting but also return a token. The
271 # token is needed by the parser to detect the end of a statement.
def t_asm_NEWLINE(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a3848d5690974e3ec07f038ea017bf8bc}{
\index{micro\_\-asm@{micro\_\-asm}!t\_\-params\_\-COLON@{t\_\-params\_\-COLON}}
\index{t\_\-params\_\-COLON@{t\_\-params\_\-COLON}!micro_asm@{micro\_\-asm}}
\subsubsection[{t\_\-params\_\-COLON}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::t\_\-params\_\-COLON ( {\em t})}}
\label{namespacemicro__asm_a3848d5690974e3ec07f038ea017bf8bc}



\begin{DoxyCode}
216                      :
217     r':'
218     t.lexer.begin('asm')
219     return t
220 
221 # Parameters are a string of text which don't contain an unescaped statement
222 # statement terminator, ie a newline or semi colon.
def t_params_PARAMS(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a466b4ac51d5f9226e723240cdb1b809d}{
\index{micro\_\-asm@{micro\_\-asm}!t\_\-params\_\-NEWLINE@{t\_\-params\_\-NEWLINE}}
\index{t\_\-params\_\-NEWLINE@{t\_\-params\_\-NEWLINE}!micro_asm@{micro\_\-asm}}
\subsubsection[{t\_\-params\_\-NEWLINE}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::t\_\-params\_\-NEWLINE ( {\em t})}}
\label{namespacemicro__asm_a466b4ac51d5f9226e723240cdb1b809d}



\begin{DoxyCode}
279                        :
280     r'\n+'
281     t.lineno += t.value.count('\n')
282     t.lexer.begin('asm')
283     return t
284 
def t_params_SEMI(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a95021a4fe487544ac75a27dd642332bc}{
\index{micro\_\-asm@{micro\_\-asm}!t\_\-params\_\-PARAMS@{t\_\-params\_\-PARAMS}}
\index{t\_\-params\_\-PARAMS@{t\_\-params\_\-PARAMS}!micro_asm@{micro\_\-asm}}
\subsubsection[{t\_\-params\_\-PARAMS}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::t\_\-params\_\-PARAMS ( {\em t})}}
\label{namespacemicro__asm_a95021a4fe487544ac75a27dd642332bc}



\begin{DoxyCode}
223                       :
224     r'([^\n;\\]|(\\[\n;\\]))+'
225     t.lineno += t.value.count('\n')
226     unescapeParamsRE = re.compile(r'(\\[\n;\\])')
227     def unescapeParams(mo):
228         val = mo.group(0)
229         return val[1]
230     t.value = unescapeParamsRE.sub(unescapeParams, t.value)
231     t.lexer.begin('asm')
232     return t
233 
234 # An "ID" in the micro assembler is either a label, directive, or mnemonic
235 # If it's either a directive or a mnemonic, it will be optionally followed by
236 # parameters. If it's a label, the following colon will make the lexer stop
237 # looking for parameters.
def t_asm_ID(t):
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a771bc622a40e7ad0bccc1715a303dff0}{
\index{micro\_\-asm@{micro\_\-asm}!t\_\-params\_\-SEMI@{t\_\-params\_\-SEMI}}
\index{t\_\-params\_\-SEMI@{t\_\-params\_\-SEMI}!micro_asm@{micro\_\-asm}}
\subsubsection[{t\_\-params\_\-SEMI}]{\setlength{\rightskip}{0pt plus 5cm}def micro\_\-asm::t\_\-params\_\-SEMI ( {\em t})}}
\label{namespacemicro__asm_a771bc622a40e7ad0bccc1715a303dff0}



\begin{DoxyCode}
285                     :
286     r';'
287     t.lexer.begin('asm')
288     return t
289 
290 # Basic regular expressions to pick out simple tokens
t_ANY_LPAREN = r'\('
\end{DoxyCode}


\subsection{変数}
\hypertarget{namespacemicro__asm_a7c0da508b820c6b4db51430d694f6d8b}{
\index{micro\_\-asm@{micro\_\-asm}!reserved@{reserved}}
\index{reserved@{reserved}!micro_asm@{micro\_\-asm}}
\subsubsection[{reserved}]{\setlength{\rightskip}{0pt plus 5cm}tuple {\bf reserved} = ('DEF', 'MACROOP', 'ROM', 'EXTERN')}}
\label{namespacemicro__asm_a7c0da508b820c6b4db51430d694f6d8b}
\hypertarget{namespacemicro__asm_a2fce270f6ee4bafd620b1b2f00cd9b79}{
\index{micro\_\-asm@{micro\_\-asm}!reserved\_\-map@{reserved\_\-map}}
\index{reserved\_\-map@{reserved\_\-map}!micro_asm@{micro\_\-asm}}
\subsubsection[{reserved\_\-map}]{\setlength{\rightskip}{0pt plus 5cm}dictionary {\bf reserved\_\-map} = \{ \}}}
\label{namespacemicro__asm_a2fce270f6ee4bafd620b1b2f00cd9b79}
\hypertarget{namespacemicro__asm_a998242a7605823c08ad1630923b570d5}{
\index{micro\_\-asm@{micro\_\-asm}!states@{states}}
\index{states@{states}!micro_asm@{micro\_\-asm}}
\subsubsection[{states}]{\setlength{\rightskip}{0pt plus 5cm}tuple {\bf states}}}
\label{namespacemicro__asm_a998242a7605823c08ad1630923b570d5}
{\bfseries 初期値:}
\begin{DoxyCode}
(
    ('asm', 'exclusive'),
    ('params', 'exclusive'),
)
\end{DoxyCode}
\hypertarget{namespacemicro__asm_a552c7d03bd35ff56963494e8cdd840c1}{
\index{micro\_\-asm@{micro\_\-asm}!t\_\-ANY\_\-DOT@{t\_\-ANY\_\-DOT}}
\index{t\_\-ANY\_\-DOT@{t\_\-ANY\_\-DOT}!micro_asm@{micro\_\-asm}}
\subsubsection[{t\_\-ANY\_\-DOT}]{\setlength{\rightskip}{0pt plus 5cm}string {\bf t\_\-ANY\_\-DOT} = r'$\backslash$.'}}
\label{namespacemicro__asm_a552c7d03bd35ff56963494e8cdd840c1}
\hypertarget{namespacemicro__asm_a65d7419bbffa21f7c4406f5518092c9b}{
\index{micro\_\-asm@{micro\_\-asm}!t\_\-ANY\_\-ignore@{t\_\-ANY\_\-ignore}}
\index{t\_\-ANY\_\-ignore@{t\_\-ANY\_\-ignore}!micro_asm@{micro\_\-asm}}
\subsubsection[{t\_\-ANY\_\-ignore}]{\setlength{\rightskip}{0pt plus 5cm}string {\bf t\_\-ANY\_\-ignore} = ' $\backslash$t$\backslash$x0c'}}
\label{namespacemicro__asm_a65d7419bbffa21f7c4406f5518092c9b}
\hypertarget{namespacemicro__asm_adddd3644d1c96a6ff6c697f82c5c6fe9}{
\index{micro\_\-asm@{micro\_\-asm}!t\_\-ANY\_\-LPAREN@{t\_\-ANY\_\-LPAREN}}
\index{t\_\-ANY\_\-LPAREN@{t\_\-ANY\_\-LPAREN}!micro_asm@{micro\_\-asm}}
\subsubsection[{t\_\-ANY\_\-LPAREN}]{\setlength{\rightskip}{0pt plus 5cm}string {\bf t\_\-ANY\_\-LPAREN} = r'$\backslash$('}}
\label{namespacemicro__asm_adddd3644d1c96a6ff6c697f82c5c6fe9}
\hypertarget{namespacemicro__asm_a48eea5b8a8376860f8538dafed3cc105}{
\index{micro\_\-asm@{micro\_\-asm}!t\_\-ANY\_\-RPAREN@{t\_\-ANY\_\-RPAREN}}
\index{t\_\-ANY\_\-RPAREN@{t\_\-ANY\_\-RPAREN}!micro_asm@{micro\_\-asm}}
\subsubsection[{t\_\-ANY\_\-RPAREN}]{\setlength{\rightskip}{0pt plus 5cm}string {\bf t\_\-ANY\_\-RPAREN} = r'$\backslash$)'}}
\label{namespacemicro__asm_a48eea5b8a8376860f8538dafed3cc105}
\hypertarget{namespacemicro__asm_a5a4b0779a63cf66d21e5a48374083ab4}{
\index{micro\_\-asm@{micro\_\-asm}!t\_\-ANY\_\-SEMI@{t\_\-ANY\_\-SEMI}}
\index{t\_\-ANY\_\-SEMI@{t\_\-ANY\_\-SEMI}!micro_asm@{micro\_\-asm}}
\subsubsection[{t\_\-ANY\_\-SEMI}]{\setlength{\rightskip}{0pt plus 5cm}string {\bf t\_\-ANY\_\-SEMI} = r';'}}
\label{namespacemicro__asm_a5a4b0779a63cf66d21e5a48374083ab4}
\hypertarget{namespacemicro__asm_a8949ccb05d719d97020ab994d6044eef}{
\index{micro\_\-asm@{micro\_\-asm}!tokens@{tokens}}
\index{tokens@{tokens}!micro_asm@{micro\_\-asm}}
\subsubsection[{tokens}]{\setlength{\rightskip}{0pt plus 5cm}tuple {\bf tokens}}}
\label{namespacemicro__asm_a8949ccb05d719d97020ab994d6044eef}
{\bfseries 初期値:}
\begin{DoxyCode}
reserved+(
        # identifier
        'ID',
        # arguments for microops and directives
        'PARAMS',

        'LPAREN', 'RPAREN',
        'LBRACE', 'RBRACE',
        'COLON', 'SEMI', 'DOT',
        'NEWLINE'
        )
\end{DoxyCode}
