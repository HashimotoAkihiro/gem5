\hypertarget{classArmISA_1_1DataAbort}{
\section{クラス DataAbort}
\label{classArmISA_1_1DataAbort}\index{ArmISA::DataAbort@{ArmISA::DataAbort}}
}


{\ttfamily \#include $<$faults.hh$>$}DataAbortに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=6cm]{classArmISA_1_1DataAbort}
\end{center}
\end{figure}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classArmISA_1_1DataAbort_aca4861c0042d8fa8b6d71b89d1ebe0e6}{DataAbort} (\hyperlink{classm5_1_1params_1_1Addr}{Addr} \_\-addr, \hyperlink{structArmISA_1_1TlbEntry_a0595b41cfb7d03f18438f9c355a3469d}{TlbEntry::DomainType} \_\-domain, bool \_\-write, uint8\_\-t \_\-source, bool \_\-stage2=false, \hyperlink{classArmISA_1_1ArmFault_ad78237d6390becbe8bdf9e73979c56ae}{ArmFault::TranMethod} \_\-tranMethod=ArmFault::UnknownTran)
\item 
\hyperlink{namespaceArmISA_a04034d12009cf36227f4d2abff3331a2}{ExceptionClass} \hyperlink{classArmISA_1_1DataAbort_aefab73b22a74d7c48b8a23230906d7cd}{ec} (\hyperlink{classThreadContext}{ThreadContext} $\ast$\hyperlink{namespaceArmISA_a5aff829af55e65b802d83dfcef4e9dd0}{tc}) const 
\item 
bool \hyperlink{classArmISA_1_1DataAbort_afd7a21fdb010230ad53094254739dde8}{routeToMonitor} (\hyperlink{classThreadContext}{ThreadContext} $\ast$\hyperlink{namespaceArmISA_a5aff829af55e65b802d83dfcef4e9dd0}{tc}) const 
\item 
bool \hyperlink{classArmISA_1_1DataAbort_a16facd13ba8e6d15d2b865882c379d5f}{routeToHyp} (\hyperlink{classThreadContext}{ThreadContext} $\ast$\hyperlink{namespaceArmISA_a5aff829af55e65b802d83dfcef4e9dd0}{tc}) const 
\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} \hyperlink{classArmISA_1_1DataAbort_a54f4d33ac162a95fd5b3830cf7fab8ff}{iss} () const 
\item 
void \hyperlink{classArmISA_1_1DataAbort_a284956f8d8ec0f18434d857ae44c6a6c}{annotate} (\hyperlink{classArmISA_1_1ArmFault_a955305710181a260a9ee0b419a6027fb}{AnnotationIDs} id, uint64\_\-t val)
\end{DoxyCompactItemize}
\subsection*{Public 変数}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classArmISA_1_1DataAbort_ab98211392ddb1f356f10c5688f55ec06}{isv}
\item 
uint8\_\-t \hyperlink{classArmISA_1_1DataAbort_a1186084bdb2d7947ab58dac309bb3557}{sas}
\item 
uint8\_\-t \hyperlink{classArmISA_1_1DataAbort_abba3874a6247f0df00a9dcc659cc2d67}{sse}
\item 
uint8\_\-t \hyperlink{classArmISA_1_1DataAbort_a46e1e6d22b710c280f39d97cb7ea8de9}{srt}
\item 
bool \hyperlink{classArmISA_1_1DataAbort_a9da2d5806018a5e01c9898d9c751ebb6}{sf}
\item 
bool \hyperlink{classArmISA_1_1DataAbort_a3fd520eea10c5d7eb8490a0f8a53dc0b}{ar}
\end{DoxyCompactItemize}
\subsection*{Static Public 変数}
\begin{DoxyCompactItemize}
\item 
static const \hyperlink{namespaceArmISA_a1e522017e015d4c7efd6b2360143aa67}{MiscRegIndex} \hyperlink{classArmISA_1_1DataAbort_a0fc945049ae4ebc86b2c2765b65ab5c8}{FsrIndex} = MISCREG\_\-DFSR
\item 
static const \hyperlink{namespaceArmISA_a1e522017e015d4c7efd6b2360143aa67}{MiscRegIndex} \hyperlink{classArmISA_1_1DataAbort_a3c751f200a61047c7edace6f38db43aa}{FarIndex} = MISCREG\_\-DFAR
\item 
static const \hyperlink{namespaceArmISA_a1e522017e015d4c7efd6b2360143aa67}{MiscRegIndex} \hyperlink{classArmISA_1_1DataAbort_adf1eccd205afd5770084542cc2295d6c}{HFarIndex} = MISCREG\_\-HDFAR
\end{DoxyCompactItemize}


\subsection{コンストラクタとデストラクタ}
\hypertarget{classArmISA_1_1DataAbort_aca4861c0042d8fa8b6d71b89d1ebe0e6}{
\index{ArmISA::DataAbort@{ArmISA::DataAbort}!DataAbort@{DataAbort}}
\index{DataAbort@{DataAbort}!ArmISA::DataAbort@{ArmISA::DataAbort}}
\subsubsection[{DataAbort}]{\setlength{\rightskip}{0pt plus 5cm}{\bf DataAbort} ({\bf Addr} {\em \_\-addr}, \/  {\bf TlbEntry::DomainType} {\em \_\-domain}, \/  bool {\em \_\-write}, \/  uint8\_\-t {\em \_\-source}, \/  bool {\em \_\-stage2} = {\ttfamily false}, \/  {\bf ArmFault::TranMethod} {\em \_\-tranMethod} = {\ttfamily ArmFault::UnknownTran})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classArmISA_1_1DataAbort_aca4861c0042d8fa8b6d71b89d1ebe0e6}



\begin{DoxyCode}
450                                                                                  
               :
451         AbortFault<DataAbort>(_addr, _write, _domain, _source, _stage2,
452                               _tranMethod),
453         isv(false), sas (0), sse(0), srt(0), sf(false), ar(false)
454     {}

\end{DoxyCode}


\subsection{関数}
\hypertarget{classArmISA_1_1DataAbort_a284956f8d8ec0f18434d857ae44c6a6c}{
\index{ArmISA::DataAbort@{ArmISA::DataAbort}!annotate@{annotate}}
\index{annotate@{annotate}!ArmISA::DataAbort@{ArmISA::DataAbort}}
\subsubsection[{annotate}]{\setlength{\rightskip}{0pt plus 5cm}void annotate ({\bf AnnotationIDs} {\em id}, \/  uint64\_\-t {\em val})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classArmISA_1_1DataAbort_a284956f8d8ec0f18434d857ae44c6a6c}


\hyperlink{classArmISA_1_1AbortFault_a1534ab135f3f8a49ad6274389bf77b51}{AbortFault$<$ DataAbort $>$}を再定義しています。


\begin{DoxyCode}
1209 {
1210     AbortFault<DataAbort>::annotate(id, val);
1211     switch (id)
1212     {
1213       case SAS:
1214         isv = true;
1215         sas = val;
1216         break;
1217       case SSE:
1218         isv = true;
1219         sse = val;
1220         break;
1221       case SRT:
1222         isv = true;
1223         srt = val;
1224         break;
1225       case SF:
1226         isv = true;
1227         sf  = val;
1228         break;
1229       case AR:
1230         isv = true;
1231         ar  = val;
1232         break;
1233       // Just ignore unknown ID's
1234       default:
1235         break;
1236     }
1237 }
\end{DoxyCode}
\hypertarget{classArmISA_1_1DataAbort_aefab73b22a74d7c48b8a23230906d7cd}{
\index{ArmISA::DataAbort@{ArmISA::DataAbort}!ec@{ec}}
\index{ec@{ec}!ArmISA::DataAbort@{ArmISA::DataAbort}}
\subsubsection[{ec}]{\setlength{\rightskip}{0pt plus 5cm}{\bf ExceptionClass} ec ({\bf ThreadContext} $\ast$ {\em tc}) const\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classArmISA_1_1DataAbort_aefab73b22a74d7c48b8a23230906d7cd}


\hyperlink{classArmISA_1_1ArmFaultVals_aa4dd5fb47a1253dbe17e692e905a8c7c}{ArmFaultVals$<$ DataAbort $>$}を再定義しています。


\begin{DoxyCode}
1119 {
1120     if (to64) {
1121         // AArch64
1122         if (source == ArmFault::AsynchronousExternalAbort) {
1123             panic("Asynchronous External Abort should be handled with \
1124                     SystemErrors (SErrors)!");
1125         }
1126         if (toEL == fromEL)
1127             return EC_DATA_ABORT_CURR_EL;
1128         else
1129             return EC_DATA_ABORT_LOWER_EL;
1130     } else {
1131         // AArch32
1132         // Abort faults have different EC codes depending on whether
1133         // the fault originated within HYP mode, or not. So override
1134         // the method and add the extra adjustment of the EC value.
1135 
1136         ExceptionClass ec = ArmFaultVals<DataAbort>::vals.ec;
1137 
1138         CPSR spsr = tc->readMiscReg(MISCREG_SPSR_HYP);
1139         if (spsr.mode == MODE_HYP) {
1140             ec = ((ExceptionClass) (((uint32_t) ec) + 1));
1141         }
1142         return ec;
1143     }
1144 }
\end{DoxyCode}
\hypertarget{classArmISA_1_1DataAbort_a54f4d33ac162a95fd5b3830cf7fab8ff}{
\index{ArmISA::DataAbort@{ArmISA::DataAbort}!iss@{iss}}
\index{iss@{iss}!ArmISA::DataAbort@{ArmISA::DataAbort}}
\subsubsection[{iss}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t} iss () const\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classArmISA_1_1DataAbort_a54f4d33ac162a95fd5b3830cf7fab8ff}


\hyperlink{classArmISA_1_1AbortFault_a54f4d33ac162a95fd5b3830cf7fab8ff}{AbortFault$<$ DataAbort $>$}を再定義しています。


\begin{DoxyCode}
1185 {
1186     uint32_t val;
1187 
1188     // Add on the data abort specific fields to the generic abort ISS value
1189     val  = AbortFault<DataAbort>::iss();
1190     // ISS is valid if not caused by a stage 1 page table walk, and when taken
1191     // to AArch64 only when directed to EL2
1192     if (!s1ptw && (!to64 || toEL == EL2)) {
1193         val |= isv << 24;
1194         if (isv) {
1195             val |= sas << 22;
1196             val |= sse << 21;
1197             val |= srt << 16;
1198             // AArch64 only. These assignments are safe on AArch32 as well
1199             // because these vars are initialized to false
1200             val |= sf << 15;
1201             val |= ar << 14;
1202         }
1203     }
1204     return (val);
1205 }
\end{DoxyCode}
\hypertarget{classArmISA_1_1DataAbort_a16facd13ba8e6d15d2b865882c379d5f}{
\index{ArmISA::DataAbort@{ArmISA::DataAbort}!routeToHyp@{routeToHyp}}
\index{routeToHyp@{routeToHyp}!ArmISA::DataAbort@{ArmISA::DataAbort}}
\subsubsection[{routeToHyp}]{\setlength{\rightskip}{0pt plus 5cm}bool routeToHyp ({\bf ThreadContext} $\ast$ {\em tc}) const\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classArmISA_1_1DataAbort_a16facd13ba8e6d15d2b865882c379d5f}


\hyperlink{classArmISA_1_1ArmFault_a6fa7b734487c2a8da04a28ace414a355}{ArmFault}を再定義しています。


\begin{DoxyCode}
1160 {
1161     bool toHyp;
1162 
1163     SCR  scr  = tc->readMiscRegNoEffect(MISCREG_SCR);
1164     HCR  hcr  = tc->readMiscRegNoEffect(MISCREG_HCR);
1165     CPSR cpsr = tc->readMiscRegNoEffect(MISCREG_CPSR);
1166     HDCR hdcr = tc->readMiscRegNoEffect(MISCREG_HDCR);
1167 
1168     // if in Hyp mode then stay in Hyp mode
1169     toHyp  = scr.ns && (cpsr.mode == MODE_HYP);
1170     // otherwise, check whether to take to Hyp mode through Hyp Trap vector
1171     toHyp |= (stage2 ||
1172                 ( (cpsr.mode != MODE_HYP) && ( ((source == 
      AsynchronousExternalAbort) && hcr.amo) ||
1173                                                ((source == DebugEvent) && hdcr.td
      e) )
1174                 ) ||
1175                 ( (cpsr.mode == MODE_USER) && hcr.tge &&
1176                   ((source == AlignmentFault)            ||
1177                    (source == SynchronousExternalAbort))
1178                 )
1179              ) && !inSecureState(scr, cpsr);
1180     return toHyp;
1181 }
\end{DoxyCode}
\hypertarget{classArmISA_1_1DataAbort_afd7a21fdb010230ad53094254739dde8}{
\index{ArmISA::DataAbort@{ArmISA::DataAbort}!routeToMonitor@{routeToMonitor}}
\index{routeToMonitor@{routeToMonitor}!ArmISA::DataAbort@{ArmISA::DataAbort}}
\subsubsection[{routeToMonitor}]{\setlength{\rightskip}{0pt plus 5cm}bool routeToMonitor ({\bf ThreadContext} $\ast$ {\em tc}) const\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classArmISA_1_1DataAbort_afd7a21fdb010230ad53094254739dde8}


\hyperlink{classArmISA_1_1ArmFaultVals_a9a0a467b98f43890c1d89d1d59a5923c}{ArmFaultVals$<$ DataAbort $>$}を再定義しています。


\begin{DoxyCode}
1148 {
1149     SCR scr = 0;
1150     if (from64)
1151         scr = tc->readMiscRegNoEffect(MISCREG_SCR_EL3);
1152     else
1153         scr = tc->readMiscRegNoEffect(MISCREG_SCR);
1154 
1155     return scr.ea && !isMMUFault();
1156 }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classArmISA_1_1DataAbort_a3fd520eea10c5d7eb8490a0f8a53dc0b}{
\index{ArmISA::DataAbort@{ArmISA::DataAbort}!ar@{ar}}
\index{ar@{ar}!ArmISA::DataAbort@{ArmISA::DataAbort}}
\subsubsection[{ar}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf ar}}}
\label{classArmISA_1_1DataAbort_a3fd520eea10c5d7eb8490a0f8a53dc0b}
\hypertarget{classArmISA_1_1DataAbort_a3c751f200a61047c7edace6f38db43aa}{
\index{ArmISA::DataAbort@{ArmISA::DataAbort}!FarIndex@{FarIndex}}
\index{FarIndex@{FarIndex}!ArmISA::DataAbort@{ArmISA::DataAbort}}
\subsubsection[{FarIndex}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf MiscRegIndex} {\bf FarIndex} = MISCREG\_\-DFAR\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classArmISA_1_1DataAbort_a3c751f200a61047c7edace6f38db43aa}
\hypertarget{classArmISA_1_1DataAbort_a0fc945049ae4ebc86b2c2765b65ab5c8}{
\index{ArmISA::DataAbort@{ArmISA::DataAbort}!FsrIndex@{FsrIndex}}
\index{FsrIndex@{FsrIndex}!ArmISA::DataAbort@{ArmISA::DataAbort}}
\subsubsection[{FsrIndex}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf MiscRegIndex} {\bf FsrIndex} = MISCREG\_\-DFSR\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classArmISA_1_1DataAbort_a0fc945049ae4ebc86b2c2765b65ab5c8}
\hypertarget{classArmISA_1_1DataAbort_adf1eccd205afd5770084542cc2295d6c}{
\index{ArmISA::DataAbort@{ArmISA::DataAbort}!HFarIndex@{HFarIndex}}
\index{HFarIndex@{HFarIndex}!ArmISA::DataAbort@{ArmISA::DataAbort}}
\subsubsection[{HFarIndex}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf MiscRegIndex} {\bf HFarIndex} = MISCREG\_\-HDFAR\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classArmISA_1_1DataAbort_adf1eccd205afd5770084542cc2295d6c}
\hypertarget{classArmISA_1_1DataAbort_ab98211392ddb1f356f10c5688f55ec06}{
\index{ArmISA::DataAbort@{ArmISA::DataAbort}!isv@{isv}}
\index{isv@{isv}!ArmISA::DataAbort@{ArmISA::DataAbort}}
\subsubsection[{isv}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf isv}}}
\label{classArmISA_1_1DataAbort_ab98211392ddb1f356f10c5688f55ec06}
\hypertarget{classArmISA_1_1DataAbort_a1186084bdb2d7947ab58dac309bb3557}{
\index{ArmISA::DataAbort@{ArmISA::DataAbort}!sas@{sas}}
\index{sas@{sas}!ArmISA::DataAbort@{ArmISA::DataAbort}}
\subsubsection[{sas}]{\setlength{\rightskip}{0pt plus 5cm}uint8\_\-t {\bf sas}}}
\label{classArmISA_1_1DataAbort_a1186084bdb2d7947ab58dac309bb3557}
\hypertarget{classArmISA_1_1DataAbort_a9da2d5806018a5e01c9898d9c751ebb6}{
\index{ArmISA::DataAbort@{ArmISA::DataAbort}!sf@{sf}}
\index{sf@{sf}!ArmISA::DataAbort@{ArmISA::DataAbort}}
\subsubsection[{sf}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf sf}}}
\label{classArmISA_1_1DataAbort_a9da2d5806018a5e01c9898d9c751ebb6}
\hypertarget{classArmISA_1_1DataAbort_a46e1e6d22b710c280f39d97cb7ea8de9}{
\index{ArmISA::DataAbort@{ArmISA::DataAbort}!srt@{srt}}
\index{srt@{srt}!ArmISA::DataAbort@{ArmISA::DataAbort}}
\subsubsection[{srt}]{\setlength{\rightskip}{0pt plus 5cm}uint8\_\-t {\bf srt}}}
\label{classArmISA_1_1DataAbort_a46e1e6d22b710c280f39d97cb7ea8de9}
\hypertarget{classArmISA_1_1DataAbort_abba3874a6247f0df00a9dcc659cc2d67}{
\index{ArmISA::DataAbort@{ArmISA::DataAbort}!sse@{sse}}
\index{sse@{sse}!ArmISA::DataAbort@{ArmISA::DataAbort}}
\subsubsection[{sse}]{\setlength{\rightskip}{0pt plus 5cm}uint8\_\-t {\bf sse}}}
\label{classArmISA_1_1DataAbort_abba3874a6247f0df00a9dcc659cc2d67}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
arch/arm/\hyperlink{arch_2arm_2faults_8hh}{faults.hh}\item 
arch/arm/\hyperlink{arch_2arm_2faults_8cc}{faults.cc}\end{DoxyCompactItemize}
