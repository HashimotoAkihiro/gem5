\hypertarget{classGenericTimer_1_1SystemCounter}{
\section{クラス SystemCounter}
\label{classGenericTimer_1_1SystemCounter}\index{GenericTimer::SystemCounter@{GenericTimer::SystemCounter}}
}


{\ttfamily \#include $<$generic\_\-timer.hh$>$}\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classGenericTimer_1_1SystemCounter_aa4747e677bcc91e4b46002512732f203}{SystemCounter} ()
\begin{DoxyCompactList}\small\item\em Ctor. \item\end{DoxyCompactList}\item 
uint64\_\-t \hyperlink{classGenericTimer_1_1SystemCounter_a22d235cc68f1573b7db58a6f13756797}{value} () const 
\begin{DoxyCompactList}\small\item\em Returns the current value of the physical counter. \item\end{DoxyCompactList}\item 
uint64\_\-t \hyperlink{classGenericTimer_1_1SystemCounter_a00e7a4566af18a56108947d8c929c0e3}{freq} () const 
\begin{DoxyCompactList}\small\item\em Returns the counter frequency. \item\end{DoxyCompactList}\item 
void \hyperlink{classGenericTimer_1_1SystemCounter_a3b94395b3dcff3869dd1f0a376d7eb65}{setFreq} (\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} freq)
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classGenericTimer_1_1SystemCounter_a03f23d1f4180d4c5fe907543679ca146}{period} () const 
\begin{DoxyCompactList}\small\item\em Returns the counter period. \item\end{DoxyCompactList}\item 
void \hyperlink{classGenericTimer_1_1SystemCounter_a53e036786d17361be4c7320d39c99b84}{serialize} (std::ostream \&os)
\item 
void \hyperlink{classGenericTimer_1_1SystemCounter_af22e5d6d660b97db37003ac61ac4ee49}{unserialize} (\hyperlink{classCheckpoint}{Checkpoint} $\ast$cp, const std::string \&section)
\end{DoxyCompactItemize}
\subsection*{Protected 変数}
\begin{DoxyCompactItemize}
\item 
uint64\_\-t \hyperlink{classGenericTimer_1_1SystemCounter_acf4c3a958c13bdb7f0115780a27dd982}{\_\-freq}
\begin{DoxyCompactList}\small\item\em Counter frequency (as specified by CNTFRQ). \item\end{DoxyCompactList}\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classGenericTimer_1_1SystemCounter_a8788f63b755d8a1d2a06a60f4738e970}{\_\-period}
\begin{DoxyCompactList}\small\item\em Cached copy of the counter period (inverse of the frequency). \item\end{DoxyCompactList}\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classGenericTimer_1_1SystemCounter_acaf0706f2d4dfb34660df9ceb3780897}{\_\-resetTick}
\begin{DoxyCompactList}\small\item\em Tick when the counter was reset. \item\end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{説明}
Global system counter. It is shared by the architected timers. \begin{Desc}
\item[\hyperlink{todo__todo000052}{TODO}]: implement memory-\/mapped controls \end{Desc}


\subsection{コンストラクタとデストラクタ}
\hypertarget{classGenericTimer_1_1SystemCounter_aa4747e677bcc91e4b46002512732f203}{
\index{GenericTimer::SystemCounter@{GenericTimer::SystemCounter}!SystemCounter@{SystemCounter}}
\index{SystemCounter@{SystemCounter}!GenericTimer::SystemCounter@{GenericTimer::SystemCounter}}
\subsubsection[{SystemCounter}]{\setlength{\rightskip}{0pt plus 5cm}{\bf SystemCounter} ()\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classGenericTimer_1_1SystemCounter_aa4747e677bcc91e4b46002512732f203}


Ctor. 


\begin{DoxyCode}
77             : _freq(0), _period(0), _resetTick(0)
78         {
79             setFreq(0x01800000);
80         }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classGenericTimer_1_1SystemCounter_a00e7a4566af18a56108947d8c929c0e3}{
\index{GenericTimer::SystemCounter@{GenericTimer::SystemCounter}!freq@{freq}}
\index{freq@{freq}!GenericTimer::SystemCounter@{GenericTimer::SystemCounter}}
\subsubsection[{freq}]{\setlength{\rightskip}{0pt plus 5cm}uint64\_\-t freq () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classGenericTimer_1_1SystemCounter_a00e7a4566af18a56108947d8c929c0e3}


Returns the counter frequency. 


\begin{DoxyCode}
91 { return _freq; }
\end{DoxyCode}
\hypertarget{classGenericTimer_1_1SystemCounter_a03f23d1f4180d4c5fe907543679ca146}{
\index{GenericTimer::SystemCounter@{GenericTimer::SystemCounter}!period@{period}}
\index{period@{period}!GenericTimer::SystemCounter@{GenericTimer::SystemCounter}}
\subsubsection[{period}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} period () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classGenericTimer_1_1SystemCounter_a03f23d1f4180d4c5fe907543679ca146}


Returns the counter period. 


\begin{DoxyCode}
97 { return _period; }
\end{DoxyCode}
\hypertarget{classGenericTimer_1_1SystemCounter_a53e036786d17361be4c7320d39c99b84}{
\index{GenericTimer::SystemCounter@{GenericTimer::SystemCounter}!serialize@{serialize}}
\index{serialize@{serialize}!GenericTimer::SystemCounter@{GenericTimer::SystemCounter}}
\subsubsection[{serialize}]{\setlength{\rightskip}{0pt plus 5cm}void serialize (std::ostream \& {\em os})}}
\label{classGenericTimer_1_1SystemCounter_a53e036786d17361be4c7320d39c99b84}



\begin{DoxyCode}
60 {
61     SERIALIZE_SCALAR(_freq);
62     SERIALIZE_SCALAR(_period);
63     SERIALIZE_SCALAR(_resetTick);
64 }
\end{DoxyCode}
\hypertarget{classGenericTimer_1_1SystemCounter_a3b94395b3dcff3869dd1f0a376d7eb65}{
\index{GenericTimer::SystemCounter@{GenericTimer::SystemCounter}!setFreq@{setFreq}}
\index{setFreq@{setFreq}!GenericTimer::SystemCounter@{GenericTimer::SystemCounter}}
\subsubsection[{setFreq}]{\setlength{\rightskip}{0pt plus 5cm}void setFreq ({\bf uint32\_\-t} {\em freq})}}
\label{classGenericTimer_1_1SystemCounter_a3b94395b3dcff3869dd1f0a376d7eb65}
Sets the counter frequency. 
\begin{DoxyParams}{引数}
\item[{\em freq}]frequency in Hz. \end{DoxyParams}



\begin{DoxyCode}
48 {
49     if (_freq != 0) {
50         // Altering the frequency after boot shouldn't be done in practice.
51         warn_once("The frequency of the system counter has already been set");
52     }
53     _freq = freq;
54     _period = (1.0 / freq) * SimClock::Frequency;
55     _resetTick = curTick();
56 }
\end{DoxyCode}
\hypertarget{classGenericTimer_1_1SystemCounter_af22e5d6d660b97db37003ac61ac4ee49}{
\index{GenericTimer::SystemCounter@{GenericTimer::SystemCounter}!unserialize@{unserialize}}
\index{unserialize@{unserialize}!GenericTimer::SystemCounter@{GenericTimer::SystemCounter}}
\subsubsection[{unserialize}]{\setlength{\rightskip}{0pt plus 5cm}void unserialize ({\bf Checkpoint} $\ast$ {\em cp}, \/  const std::string \& {\em section})}}
\label{classGenericTimer_1_1SystemCounter_af22e5d6d660b97db37003ac61ac4ee49}



\begin{DoxyCode}
69 {
70     UNSERIALIZE_SCALAR(_freq);
71     UNSERIALIZE_SCALAR(_period);
72     UNSERIALIZE_SCALAR(_resetTick);
73 }
\end{DoxyCode}
\hypertarget{classGenericTimer_1_1SystemCounter_a22d235cc68f1573b7db58a6f13756797}{
\index{GenericTimer::SystemCounter@{GenericTimer::SystemCounter}!value@{value}}
\index{value@{value}!GenericTimer::SystemCounter@{GenericTimer::SystemCounter}}
\subsubsection[{value}]{\setlength{\rightskip}{0pt plus 5cm}uint64\_\-t value () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classGenericTimer_1_1SystemCounter_a22d235cc68f1573b7db58a6f13756797}


Returns the current value of the physical counter. 


\begin{DoxyCode}
84         {
85             if (_freq == 0)
86                 return 0;  // Counter is still off.
87             return (curTick() - _resetTick) / _period;
88         }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classGenericTimer_1_1SystemCounter_acf4c3a958c13bdb7f0115780a27dd982}{
\index{GenericTimer::SystemCounter@{GenericTimer::SystemCounter}!\_\-freq@{\_\-freq}}
\index{\_\-freq@{\_\-freq}!GenericTimer::SystemCounter@{GenericTimer::SystemCounter}}
\subsubsection[{\_\-freq}]{\setlength{\rightskip}{0pt plus 5cm}uint64\_\-t {\bf \_\-freq}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classGenericTimer_1_1SystemCounter_acf4c3a958c13bdb7f0115780a27dd982}


Counter frequency (as specified by CNTFRQ). \hypertarget{classGenericTimer_1_1SystemCounter_a8788f63b755d8a1d2a06a60f4738e970}{
\index{GenericTimer::SystemCounter@{GenericTimer::SystemCounter}!\_\-period@{\_\-period}}
\index{\_\-period@{\_\-period}!GenericTimer::SystemCounter@{GenericTimer::SystemCounter}}
\subsubsection[{\_\-period}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} {\bf \_\-period}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classGenericTimer_1_1SystemCounter_a8788f63b755d8a1d2a06a60f4738e970}


Cached copy of the counter period (inverse of the frequency). \hypertarget{classGenericTimer_1_1SystemCounter_acaf0706f2d4dfb34660df9ceb3780897}{
\index{GenericTimer::SystemCounter@{GenericTimer::SystemCounter}!\_\-resetTick@{\_\-resetTick}}
\index{\_\-resetTick@{\_\-resetTick}!GenericTimer::SystemCounter@{GenericTimer::SystemCounter}}
\subsubsection[{\_\-resetTick}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} {\bf \_\-resetTick}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classGenericTimer_1_1SystemCounter_acaf0706f2d4dfb34660df9ceb3780897}


Tick when the counter was reset. 

このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
dev/arm/\hyperlink{generic__timer_8hh}{generic\_\-timer.hh}\item 
dev/arm/\hyperlink{generic__timer_8cc}{generic\_\-timer.cc}\end{DoxyCompactItemize}
