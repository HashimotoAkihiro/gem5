<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス RubyMemoryControl</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>クラス RubyMemoryControl</h1><!-- doxytag: class="RubyMemoryControl" --><!-- doxytag: inherits="MemoryControl" -->
<p><code>#include &lt;<a class="el" href="RubyMemoryControl_8hh_source.html">RubyMemoryControl.hh</a>&gt;</code></p>
<div class="dynheader">
RubyMemoryControlに対する継承グラフ</div>
<div class="dynsection">
 <div class="center">
  <img src="classRubyMemoryControl.gif" usemap="#RubyMemoryControl_map" alt=""/>
  <map id="RubyMemoryControl_map" name="RubyMemoryControl_map">
<area href="classMemoryControl.html" alt="MemoryControl" shape="rect" coords="207,168,335,192"/>
<area href="classClockedObject.html" alt="ClockedObject" shape="rect" coords="138,112,266,136"/>
<area href="classConsumer.html" alt="Consumer" shape="rect" coords="276,112,404,136"/>
<area href="classSimObject.html" alt="SimObject" shape="rect" coords="138,56,266,80"/>
<area href="classEventManager.html" alt="EventManager" shape="rect" coords="0,0,128,24"/>
<area href="classSerializable.html" alt="Serializable" shape="rect" coords="138,0,266,24"/>
<area href="classDrainable.html" alt="Drainable" shape="rect" coords="276,0,404,24"/>
</map>
 </div>
</div>

<p><a href="classRubyMemoryControl-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>構成</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl_1_1RubyMemoryControl.html">RubyMemoryControl</a></td></tr>
<tr><td colspan="2"><h2>Public 型</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef RubyMemoryControlParams&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#af43d4e91847a2856227bcb75a70a9a86">Params</a></td></tr>
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a4f3e4d7624fbb425e553c4e36cadcba9">RubyMemoryControl</a> (const <a class="el" href="classRubyMemoryControl.html#af43d4e91847a2856227bcb75a70a9a86">Params</a> *p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a02fd73d861ef2e4aabb38c0c9ff82947">init</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#ad20897c5c8bd47f5d4005989bead0e55">reset</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#ac811a91e31835fa2b05aec4314ca6870">~RubyMemoryControl</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#aa8a18d230dba7a674ac8a0b4f35bc36a">drain</a> (<a class="el" href="classDrainManager.html">DrainManager</a> *dm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#ae674290a26ecbd622c5160e38e8a4fe9">wakeup</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a8487c37680239f103e21ada9acf1726d">setConsumer</a> (<a class="el" href="classConsumer.html">Consumer</a> *consumer_ptr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classConsumer.html">Consumer</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a2417fc7252a612b5c976ceaa2d1be4f7">getConsumer</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a9cdbe64eebafb111a124edec55ed2340">setDescription</a> (const std::string &amp;name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a73da75c3e5ec30855a02eae2ba824e38">getDescription</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a068a03cd419d33592fd584ec5877bb64">enqueue</a> (const <a class="el" href="classRefCountingPtr.html">MsgPtr</a> &amp;message, <a class="el" href="classCycles.html">Cycles</a> latency)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#aadad7bc8b989cfe93247844131735f70">enqueueMemRef</a> (<a class="el" href="classMemoryNode.html">MemoryNode</a> *memRef)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a851b6644e3e336c07f8e6fe77234b97f">dequeue</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classMessage.html">Message</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#ab635dc32ebecf260c15d8fbbbb9b21e0">peek</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMemoryNode.html">MemoryNode</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a8ffbfb520369710755a1260b8451de3d">peekNode</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#acbed040576a7a18e2d9c46b2f15e0162">isReady</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a99a0d76f7266570912e6b0901cfaf9cf">areNSlotsAvailable</a> (int n)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#ac55fe386a101fbae38c716067c9966a0">print</a> (std::ostream &amp;out) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a4dc637449366fcdfc4e764cdf12d9b11">regStats</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a26f571eb9a81a077295b54c2ed398aea">getBank</a> (const <a class="el" href="TypeDefines_8hh.html#a7901e1a365850c5ff38ec6e12b6b9ffc">physical_address_t</a> addr) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#af8c39d7c9853a48fd242bda859e76222">getRank</a> (const <a class="el" href="TypeDefines_8hh.html#a7901e1a365850c5ff38ec6e12b6b9ffc">physical_address_t</a> addr) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a08f255b8eb3b262916a47fa8f7c12e63">getChannel</a> (const <a class="el" href="TypeDefines_8hh.html#a7901e1a365850c5ff38ec6e12b6b9ffc">physical_address_t</a> addr) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a65314c26cf3c85d8c911524ede56456c">getRow</a> (const <a class="el" href="TypeDefines_8hh.html#a7901e1a365850c5ff38ec6e12b6b9ffc">physical_address_t</a> addr) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#aba6f6d5c066193ae70ee43153051055b">getBanksPerRank</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a6dff017ebfbd9d5b021b86437ff67acc">getRanksPerDimm</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a5a9c0e20c20d0171bb8d8a96cb22576f">getDimmsPerChannel</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a898941f27bcf3a1c0383de5988406650">functionalReadBuffers</a> (<a class="el" href="classPacket.html">Packet</a> *pkt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a08f04f912fb872935cb2d40f8570c340">functionalWriteBuffers</a> (<a class="el" href="classPacket.html">Packet</a> *pkt)</td></tr>
<tr><td colspan="2"><h2>Private メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a5ad0e6ec636d4094ee1b89c121d37dd9">enqueueToDirectory</a> (<a class="el" href="classMemoryNode.html">MemoryNode</a> *req, <a class="el" href="classCycles.html">Cycles</a> latency)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a39abe91d99c7b551495766a397e212af">getRank</a> (int bank) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a839c1841354bab0a9007a04ba303ae2c">queueReady</a> (int bank)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a9dbeedd7a40a225736f517e46ef9915e">issueRequest</a> (int bank)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a3907d2ad8de317b5d9488e567b8c29de">issueRefresh</a> (int bank)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a8fb7d0c7e12bbd524e3bcd193e66426c">markTfaw</a> (int rank)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#ac776b02b70a3c6795e0823d77bf74c73">executeCycle</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a91e8e84c0a773621f4e6f5adafb726fb">RubyMemoryControl</a> (const <a class="el" href="classRubyMemoryControl_1_1RubyMemoryControl.html">RubyMemoryControl</a> &amp;obj)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRubyMemoryControl_1_1RubyMemoryControl.html">RubyMemoryControl</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a625dea61d2ea0f477b1310e9307a33d6">operator=</a> (const <a class="el" href="classRubyMemoryControl_1_1RubyMemoryControl.html">RubyMemoryControl</a> &amp;obj)</td></tr>
<tr><td colspan="2"><h2>Private 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classConsumer.html">Consumer</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a83dd1dc8eef330b0c0d184a4167b26b4">m_consumer_ptr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#ad50eef5f7fcfa30f62e14f0fac2a4f6e">m_description</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#acfac131e63985feff04ed11cbaf0d221">m_msg_counter</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#af5a8b76f5c8fdb638e49a8c11c61f492">m_banks_per_rank</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a734869c8bd10780ed7f61eadb638f30c">m_ranks_per_dimm</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#acf7c3dd8c1a61ce9fe7ca2e026150caf">m_dimms_per_channel</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a767e3298a0e794bb0c8f422021e6b67d">m_bank_bit_0</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a2262efb9776ae0e8119e999c6efed38b">m_rank_bit_0</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a9d9676a8a7c87644cefbe758f0ef719c">m_dimm_bit_0</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a6cbe212586b315223f76b124953ea4b2">m_bank_queue_size</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#ab11322175e2e2ec5d6ebef835774bc1a">m_bank_busy_time</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a88f33889677c076f1e5fdd8ce7cabc4d">m_rank_rank_delay</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a469ba8ed68dfdab637a67909cd7f494f">m_read_write_delay</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a0537255983f6c88ed3389efd814780e5">m_basic_bus_busy_time</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCycles.html">Cycles</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#aaf9472c80a44349fbb83ec29ce2de7ad">m_mem_ctl_latency</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#ab046d0568e576a3fd3e751aae694aa6c">m_refresh_period</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a84dc4df49177ba4931742af171541561">m_mem_random_arbitrate</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a278ccfdcd299cca636085e30b57bd77b">m_tFaw</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCycles.html">Cycles</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#add64256c91bc7722347f3a8dfe94d375">m_mem_fixed_delay</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#ad36478de555240b1cd80c5b0aa4b00cc">m_total_banks</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#ae56d0b2636a76e0d08eb304c9845540c">m_total_ranks</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#ac226affdfdce1041cdc1adcea108d2d9">m_refresh_period_system</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1list.html">std::list</a>&lt; <a class="el" href="classMemoryNode.html">MemoryNode</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a6ff73bc35f01b71460125c8973fdcf7f">m_response_queue</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1list.html">std::list</a>&lt; <a class="el" href="classMemoryNode.html">MemoryNode</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#ad59ead9befd4b8ed53d20e31025cc5f2">m_input_queue</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1list.html">std::list</a>&lt; <a class="el" href="classMemoryNode.html">MemoryNode</a> * &gt; *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a66d0e61e247049647c7e205d7898f593">m_bankQueues</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a258db92f2ca2cd3335e798fbe1cea189">m_bankBusyCounter</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a546d324998c9280e60ad0d3bdc33b660">m_oldRequest</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="TypeDefines_8hh.html#a29940ae63ec06c9998bba873e25407ad">uint64</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a9dd1941af4ea267b9f8e05a54c70d713">m_tfaw_shift</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a8399af800996db69e2cb64997f0123f4">m_tfaw_count</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a4c6490a8d96034781b7f019c9875637d">m_busBusyCounter_Write</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a9396a0f34b9eb0d3c51bedc04de53b10">m_busBusyCounter_ReadNewRank</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a9622fd6ccdf6aaac725dd5b199651e1f">m_busBusyCounter_Basic</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a0889f6b503357c0dee9ca27b3a777a61">m_busBusy_WhichRank</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#ae91016ac7543fa2d2e4fc5ba9748a134">m_roundRobin</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a11c845239e7ec76861ae230df7a575b2">m_refresh_count</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a81b8cb5d4100808f5d49ebb9e7f878bd">m_need_refresh</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a93843e73be2e39683d2b6ce21c8a6298">m_refresh_bank</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#aba1d5e3376d7d3bed53b2bafcd056c64">m_ageCounter</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a1b496ca0cf94387967ed0539a43fb126">m_idleCount</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMemCntrlProfiler.html">MemCntrlProfiler</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRubyMemoryControl.html#a1f70f7199575ca8bd58b685a72c37f84">m_profiler_ptr</a></td></tr>
</table>
<hr/><h2>型定義</h2>
<a class="anchor" id="af43d4e91847a2856227bcb75a70a9a86"></a><!-- doxytag: member="RubyMemoryControl::Params" ref="af43d4e91847a2856227bcb75a70a9a86" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef RubyMemoryControlParams <a class="el" href="classRubyMemoryControl.html#af43d4e91847a2856227bcb75a70a9a86">Params</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMemoryControl.html#aec6d67eaecba2a2311edc4c4c78fb0f5">MemoryControl</a>を再定義しています。</p>

</div>
</div>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="a4f3e4d7624fbb425e553c4e36cadcba9"></a><!-- doxytag: member="RubyMemoryControl::RubyMemoryControl" ref="a4f3e4d7624fbb425e553c4e36cadcba9" args="(const Params *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRubyMemoryControl_1_1RubyMemoryControl.html">RubyMemoryControl</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classRubyMemoryControl.html#af43d4e91847a2856227bcb75a70a9a86">Params</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00147"></a>00147     : <a class="code" href="classMemoryControl.html#a189a6ca42c937f0d9645cd5ea91be48f">MemoryControl</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>)
<a name="l00148"></a>00148 {
<a name="l00149"></a>00149     <a class="code" href="classRubyMemoryControl.html#af5a8b76f5c8fdb638e49a8c11c61f492">m_banks_per_rank</a> = <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;banks_per_rank;
<a name="l00150"></a>00150     <a class="code" href="classRubyMemoryControl.html#a734869c8bd10780ed7f61eadb638f30c">m_ranks_per_dimm</a> = <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;ranks_per_dimm;
<a name="l00151"></a>00151     <a class="code" href="classRubyMemoryControl.html#acf7c3dd8c1a61ce9fe7ca2e026150caf">m_dimms_per_channel</a> = <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;dimms_per_channel;
<a name="l00152"></a>00152     <a class="code" href="classRubyMemoryControl.html#a767e3298a0e794bb0c8f422021e6b67d">m_bank_bit_0</a> = <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;bank_bit_0;
<a name="l00153"></a>00153     <a class="code" href="classRubyMemoryControl.html#a2262efb9776ae0e8119e999c6efed38b">m_rank_bit_0</a> = <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;rank_bit_0;
<a name="l00154"></a>00154     <a class="code" href="classRubyMemoryControl.html#a9d9676a8a7c87644cefbe758f0ef719c">m_dimm_bit_0</a> = <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;dimm_bit_0;
<a name="l00155"></a>00155     <a class="code" href="classRubyMemoryControl.html#a6cbe212586b315223f76b124953ea4b2">m_bank_queue_size</a> = <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;bank_queue_size;
<a name="l00156"></a>00156     <a class="code" href="classRubyMemoryControl.html#ab11322175e2e2ec5d6ebef835774bc1a">m_bank_busy_time</a> = <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;bank_busy_time;
<a name="l00157"></a>00157     <a class="code" href="classRubyMemoryControl.html#a88f33889677c076f1e5fdd8ce7cabc4d">m_rank_rank_delay</a> = <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;rank_rank_delay;
<a name="l00158"></a>00158     <a class="code" href="classRubyMemoryControl.html#a469ba8ed68dfdab637a67909cd7f494f">m_read_write_delay</a> = <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;read_write_delay;
<a name="l00159"></a>00159     <a class="code" href="classRubyMemoryControl.html#a0537255983f6c88ed3389efd814780e5">m_basic_bus_busy_time</a> = <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;basic_bus_busy_time;
<a name="l00160"></a>00160     <a class="code" href="classRubyMemoryControl.html#aaf9472c80a44349fbb83ec29ce2de7ad">m_mem_ctl_latency</a> = <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;mem_ctl_latency;
<a name="l00161"></a>00161     <a class="code" href="classRubyMemoryControl.html#ab046d0568e576a3fd3e751aae694aa6c">m_refresh_period</a> = <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;refresh_period;
<a name="l00162"></a>00162     <a class="code" href="classRubyMemoryControl.html#a278ccfdcd299cca636085e30b57bd77b">m_tFaw</a> = <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;tFaw;
<a name="l00163"></a>00163     <a class="code" href="classRubyMemoryControl.html#a84dc4df49177ba4931742af171541561">m_mem_random_arbitrate</a> = <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;mem_random_arbitrate;
<a name="l00164"></a>00164     <a class="code" href="classRubyMemoryControl.html#add64256c91bc7722347f3a8dfe94d375">m_mem_fixed_delay</a> = <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;mem_fixed_delay;
<a name="l00165"></a>00165 
<a name="l00166"></a>00166     <a class="code" href="classRubyMemoryControl.html#a1f70f7199575ca8bd58b685a72c37f84">m_profiler_ptr</a> = <span class="keyword">new</span> <a class="code" href="classMemCntrlProfiler.html">MemCntrlProfiler</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>(),
<a name="l00167"></a>00167                                           <a class="code" href="classRubyMemoryControl.html#af5a8b76f5c8fdb638e49a8c11c61f492">m_banks_per_rank</a>,
<a name="l00168"></a>00168                                           <a class="code" href="classRubyMemoryControl.html#a734869c8bd10780ed7f61eadb638f30c">m_ranks_per_dimm</a>,
<a name="l00169"></a>00169                                           <a class="code" href="classRubyMemoryControl.html#acf7c3dd8c1a61ce9fe7ca2e026150caf">m_dimms_per_channel</a>);
<a name="l00170"></a>00170 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac811a91e31835fa2b05aec4314ca6870"></a><!-- doxytag: member="RubyMemoryControl::~RubyMemoryControl" ref="ac811a91e31835fa2b05aec4314ca6870" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classRubyMemoryControl_1_1RubyMemoryControl.html">RubyMemoryControl</a> </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00268"></a>00268 {
<a name="l00269"></a>00269     <span class="keyword">delete</span> [] <a class="code" href="classRubyMemoryControl.html#a66d0e61e247049647c7e205d7898f593">m_bankQueues</a>;
<a name="l00270"></a>00270     <span class="keyword">delete</span> [] <a class="code" href="classRubyMemoryControl.html#a258db92f2ca2cd3335e798fbe1cea189">m_bankBusyCounter</a>;
<a name="l00271"></a>00271     <span class="keyword">delete</span> [] <a class="code" href="classRubyMemoryControl.html#a546d324998c9280e60ad0d3bdc33b660">m_oldRequest</a>;
<a name="l00272"></a>00272     <span class="keyword">delete</span> <a class="code" href="classRubyMemoryControl.html#a1f70f7199575ca8bd58b685a72c37f84">m_profiler_ptr</a>;
<a name="l00273"></a>00273 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a91e8e84c0a773621f4e6f5adafb726fb"></a><!-- doxytag: member="RubyMemoryControl::RubyMemoryControl" ref="a91e8e84c0a773621f4e6f5adafb726fb" args="(const RubyMemoryControl &amp;obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRubyMemoryControl_1_1RubyMemoryControl.html">RubyMemoryControl</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classRubyMemoryControl_1_1RubyMemoryControl.html">RubyMemoryControl</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>obj</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="a99a0d76f7266570912e6b0901cfaf9cf"></a><!-- doxytag: member="RubyMemoryControl::areNSlotsAvailable" ref="a99a0d76f7266570912e6b0901cfaf9cf" args="(int n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool areNSlotsAvailable </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>n</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMemoryControl.html#ad5bc408383076d5b274d5c3be9b42c89">MemoryControl</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00081"></a>00081 { <span class="keywordflow">return</span> <span class="keyword">true</span>; };  <span class="comment">// infinite queue length</span>
</pre></div></p>

</div>
</div>
<a class="anchor" id="a851b6644e3e336c07f8e6fe77234b97f"></a><!-- doxytag: member="RubyMemoryControl::dequeue" ref="a851b6644e3e336c07f8e6fe77234b97f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dequeue </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMemoryControl.html#abc9fc85f4dd561e833bf6b34a78ebcb8">MemoryControl</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00317"></a>00317 {
<a name="l00318"></a>00318     assert(<a class="code" href="classRubyMemoryControl.html#acbed040576a7a18e2d9c46b2f15e0162">isReady</a>());
<a name="l00319"></a>00319     <a class="code" href="classMemoryNode.html">MemoryNode</a> *req = <a class="code" href="classRubyMemoryControl.html#a6ff73bc35f01b71460125c8973fdcf7f">m_response_queue</a>.front();
<a name="l00320"></a>00320     <a class="code" href="classRubyMemoryControl.html#a6ff73bc35f01b71460125c8973fdcf7f">m_response_queue</a>.pop_front();
<a name="l00321"></a>00321     <span class="keyword">delete</span> req;
<a name="l00322"></a>00322 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa8a18d230dba7a674ac8a0b4f35bc36a"></a><!-- doxytag: member="RubyMemoryControl::drain" ref="aa8a18d230dba7a674ac8a0b4f35bc36a" args="(DrainManager *dm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int drain </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDrainManager.html">DrainManager</a> *&nbsp;</td>
          <td class="paramname"> <em>drainManger</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Provide a default implementation of the drain interface that simply returns 0 (draining completed) and sets the drain state to Drained. </p>

<p><a class="el" href="classSimObject.html#a6bf479c521c7c3eb473822d953275b26">SimObject</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00675"></a>00675 {
<a name="l00676"></a>00676     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(RubyMemory, <span class="stringliteral">&quot;MemoryController drain\n&quot;</span>);
<a name="l00677"></a>00677     <span class="keywordflow">if</span>(<a class="code" href="classMemoryControl.html#abbf06cc9d10fae424e60034190a2b38f">m_event</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>()) {
<a name="l00678"></a>00678         <a class="code" href="classEventManager.html#a720e34da4db679fb3f30b20e55c23605">deschedule</a>(<a class="code" href="classMemoryControl.html#abbf06cc9d10fae424e60034190a2b38f">m_event</a>);
<a name="l00679"></a>00679     }
<a name="l00680"></a>00680     <span class="keywordflow">return</span> 0;
<a name="l00681"></a>00681 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a068a03cd419d33592fd584ec5877bb64"></a><!-- doxytag: member="RubyMemoryControl::enqueue" ref="a068a03cd419d33592fd584ec5877bb64" args="(const MsgPtr &amp;message, Cycles latency)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enqueue </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classRefCountingPtr.html">MsgPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCycles.html">Cycles</a>&nbsp;</td>
          <td class="paramname"> <em>latency</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMemoryControl.html#a8295a9f6c98555275292b9c1296ea35a">MemoryControl</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00278"></a>00278 {
<a name="l00279"></a>00279     <a class="code" href="classCycles.html">Cycles</a> arrival_time = <a class="code" href="classClockedObject.html#a3f6dfa1d3e7cd47666433b6caa4d34d6">curCycle</a>() + latency;
<a name="l00280"></a>00280     <span class="keyword">const</span> MemoryMsg* memMess = <a class="code" href="cast_8hh.html#a5f660f8e3c1002271ec98c59eeda331f">safe_cast</a>&lt;<span class="keyword">const</span> MemoryMsg*&gt;(message.<a class="code" href="classRefCountingPtr.html#a07f851191ad3a7c5c1598ef14f710f96" title="Directly access the pointer itself without taking a reference.">get</a>());
<a name="l00281"></a>00281     <a class="code" href="TypeDefines_8hh.html#a7901e1a365850c5ff38ec6e12b6b9ffc">physical_address_t</a> <a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a> = memMess-&gt;getAddr().getAddress();
<a name="l00282"></a>00282     MemoryRequestType <a class="code" href="namespaceX86ISA.html#ad805db903f6899f960fd9a982272096a">type</a> = memMess-&gt;getType();
<a name="l00283"></a>00283     <span class="keywordtype">bool</span> is_mem_read = (type == MemoryRequestType_MEMORY_READ);
<a name="l00284"></a>00284     <a class="code" href="classMemoryNode.html">MemoryNode</a> *thisReq = <span class="keyword">new</span> <a class="code" href="classMemoryNode.html">MemoryNode</a>(arrival_time, message, addr,
<a name="l00285"></a>00285                                          is_mem_read, !is_mem_read);
<a name="l00286"></a>00286     <a class="code" href="classRubyMemoryControl.html#aadad7bc8b989cfe93247844131735f70">enqueueMemRef</a>(thisReq);
<a name="l00287"></a>00287 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aadad7bc8b989cfe93247844131735f70"></a><!-- doxytag: member="RubyMemoryControl::enqueueMemRef" ref="aadad7bc8b989cfe93247844131735f70" args="(MemoryNode *memRef)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enqueueMemRef </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMemoryNode.html">MemoryNode</a> *&nbsp;</td>
          <td class="paramname"> <em>memRef</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMemoryControl.html#a8c508812a5b1b935117dc32877229599">MemoryControl</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00293"></a>00293 {
<a name="l00294"></a>00294     <a class="code" href="classRubyMemoryControl.html#acfac131e63985feff04ed11cbaf0d221">m_msg_counter</a>++;
<a name="l00295"></a>00295     memRef-&gt;<a class="code" href="classMemoryNode.html#acfac131e63985feff04ed11cbaf0d221">m_msg_counter</a> = <a class="code" href="classRubyMemoryControl.html#acfac131e63985feff04ed11cbaf0d221">m_msg_counter</a>;
<a name="l00296"></a>00296     <a class="code" href="TypeDefines_8hh.html#a7901e1a365850c5ff38ec6e12b6b9ffc">physical_address_t</a> <a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a> = memRef-&gt;<a class="code" href="classMemoryNode.html#a87dedd4d12dd06f03efa1a9c2301bfc6">m_addr</a>;
<a name="l00297"></a>00297     <span class="keywordtype">int</span> bank = <a class="code" href="classRubyMemoryControl.html#a26f571eb9a81a077295b54c2ed398aea">getBank</a>(addr);
<a name="l00298"></a>00298 
<a name="l00299"></a>00299     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(RubyMemory,
<a name="l00300"></a>00300             <span class="stringliteral">&quot;New memory request%7d: %#08x %c arrived at %10d bank = %3x sched %c\n&quot;</span>,
<a name="l00301"></a>00301             <a class="code" href="classRubyMemoryControl.html#acfac131e63985feff04ed11cbaf0d221">m_msg_counter</a>, addr, memRef-&gt;<a class="code" href="classMemoryNode.html#a364a76c8c3f0d9225ec87b42a36b9264">m_is_mem_read</a> ? <span class="charliteral">&apos;R&apos;</span>:<span class="charliteral">&apos;W&apos;</span>,
<a name="l00302"></a>00302             memRef-&gt;<a class="code" href="classMemoryNode.html#ac39faf9ea84c2e7518ba2f960c661636">m_time</a> * <a class="code" href="Global_8cc.html#ac7631ed7c7cc138c40a9e88e38d0ecb1">g_system_ptr</a>-&gt;<a class="code" href="classClockedObject.html#a78c89cef17196c60470c4f2f76d43d8a">clockPeriod</a>(),
<a name="l00303"></a>00303             bank, <a class="code" href="classMemoryControl.html#abbf06cc9d10fae424e60034190a2b38f">m_event</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>() ? <span class="charliteral">&apos;Y&apos;</span>:<span class="charliteral">&apos;N&apos;</span>);
<a name="l00304"></a>00304 
<a name="l00305"></a>00305     <a class="code" href="classRubyMemoryControl.html#a1f70f7199575ca8bd58b685a72c37f84">m_profiler_ptr</a>-&gt;<a class="code" href="classMemCntrlProfiler.html#a640cba10e9673e8081ddc1e8fcf2a0c9">profileMemReq</a>(bank);
<a name="l00306"></a>00306     <a class="code" href="classRubyMemoryControl.html#ad59ead9befd4b8ed53d20e31025cc5f2">m_input_queue</a>.push_back(memRef);
<a name="l00307"></a>00307 
<a name="l00308"></a>00308     <span class="keywordflow">if</span> (!<a class="code" href="classMemoryControl.html#abbf06cc9d10fae424e60034190a2b38f">m_event</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>()) {
<a name="l00309"></a>00309         <a class="code" href="classEventManager.html#a4ddebbfe9a12b95be6fb993ce892dcd3">schedule</a>(<a class="code" href="classMemoryControl.html#abbf06cc9d10fae424e60034190a2b38f">m_event</a>, <a class="code" href="classClockedObject.html#a773956693f216cafb7d4cad92ad582e5">clockEdge</a>());
<a name="l00310"></a>00310     }
<a name="l00311"></a>00311 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5ad0e6ec636d4094ee1b89c121d37dd9"></a><!-- doxytag: member="RubyMemoryControl::enqueueToDirectory" ref="a5ad0e6ec636d4094ee1b89c121d37dd9" args="(MemoryNode *req, Cycles latency)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enqueueToDirectory </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMemoryNode.html">MemoryNode</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCycles.html">Cycles</a>&nbsp;</td>
          <td class="paramname"> <em>latency</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00366"></a>00366 {
<a name="l00367"></a>00367     <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> arrival_time = <a class="code" href="classClockedObject.html#a773956693f216cafb7d4cad92ad582e5">clockEdge</a>(latency);
<a name="l00368"></a>00368     <a class="code" href="classCycles.html">Cycles</a> ruby_arrival_time = <a class="code" href="Global_8cc.html#ac7631ed7c7cc138c40a9e88e38d0ecb1">g_system_ptr</a>-&gt;<a class="code" href="classClockedObject.html#a91cfeb85669839d1ecafb7e62cf9d57a">ticksToCycles</a>(arrival_time);
<a name="l00369"></a>00369     req-&gt;<a class="code" href="classMemoryNode.html#ac39faf9ea84c2e7518ba2f960c661636">m_time</a> = ruby_arrival_time;
<a name="l00370"></a>00370     <a class="code" href="classRubyMemoryControl.html#a6ff73bc35f01b71460125c8973fdcf7f">m_response_queue</a>.push_back(req);
<a name="l00371"></a>00371 
<a name="l00372"></a>00372     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(RubyMemory, <span class="stringliteral">&quot;Enqueueing msg %#08x %c back to directory at %15d\n&quot;</span>,
<a name="l00373"></a>00373             req-&gt;<a class="code" href="classMemoryNode.html#a87dedd4d12dd06f03efa1a9c2301bfc6">m_addr</a>, req-&gt;<a class="code" href="classMemoryNode.html#a364a76c8c3f0d9225ec87b42a36b9264">m_is_mem_read</a> ? <span class="charliteral">&apos;R&apos;</span>:<span class="charliteral">&apos;W&apos;</span>, arrival_time);
<a name="l00374"></a>00374 
<a name="l00375"></a>00375     <span class="comment">// schedule the wake up</span>
<a name="l00376"></a>00376     <a class="code" href="classRubyMemoryControl.html#a83dd1dc8eef330b0c0d184a4167b26b4">m_consumer_ptr</a>-&gt;<a class="code" href="classConsumer.html#a0b26d8ce23c3ab271e7a746e57174721">scheduleEventAbsolute</a>(arrival_time);
<a name="l00377"></a>00377 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac776b02b70a3c6795e0823d77bf74c73"></a><!-- doxytag: member="RubyMemoryControl::executeCycle" ref="ac776b02b70a3c6795e0823d77bf74c73" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void executeCycle </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00573"></a>00573 {
<a name="l00574"></a>00574     <span class="comment">// Keep track of time by counting down the busy counters:</span>
<a name="l00575"></a>00575     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> bank=0; bank &lt; <a class="code" href="classRubyMemoryControl.html#ad36478de555240b1cd80c5b0aa4b00cc">m_total_banks</a>; bank++) {
<a name="l00576"></a>00576         <span class="keywordflow">if</span> (<a class="code" href="classRubyMemoryControl.html#a258db92f2ca2cd3335e798fbe1cea189">m_bankBusyCounter</a>[bank] &gt; 0) <a class="code" href="classRubyMemoryControl.html#a258db92f2ca2cd3335e798fbe1cea189">m_bankBusyCounter</a>[bank]--;
<a name="l00577"></a>00577     }
<a name="l00578"></a>00578     <span class="keywordflow">if</span> (<a class="code" href="classRubyMemoryControl.html#a4c6490a8d96034781b7f019c9875637d">m_busBusyCounter_Write</a> &gt; 0)
<a name="l00579"></a>00579         <a class="code" href="classRubyMemoryControl.html#a4c6490a8d96034781b7f019c9875637d">m_busBusyCounter_Write</a>--;
<a name="l00580"></a>00580     <span class="keywordflow">if</span> (<a class="code" href="classRubyMemoryControl.html#a9396a0f34b9eb0d3c51bedc04de53b10">m_busBusyCounter_ReadNewRank</a> &gt; 0)
<a name="l00581"></a>00581         <a class="code" href="classRubyMemoryControl.html#a9396a0f34b9eb0d3c51bedc04de53b10">m_busBusyCounter_ReadNewRank</a>--;
<a name="l00582"></a>00582     <span class="keywordflow">if</span> (<a class="code" href="classRubyMemoryControl.html#a9622fd6ccdf6aaac725dd5b199651e1f">m_busBusyCounter_Basic</a> &gt; 0)
<a name="l00583"></a>00583         <a class="code" href="classRubyMemoryControl.html#a9622fd6ccdf6aaac725dd5b199651e1f">m_busBusyCounter_Basic</a>--;
<a name="l00584"></a>00584 
<a name="l00585"></a>00585     <span class="comment">// Count down the tFAW shift registers:</span>
<a name="l00586"></a>00586     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> rank=0; rank &lt; <a class="code" href="classRubyMemoryControl.html#ae56d0b2636a76e0d08eb304c9845540c">m_total_ranks</a>; rank++) {
<a name="l00587"></a>00587         <span class="keywordflow">if</span> (<a class="code" href="classRubyMemoryControl.html#a9dd1941af4ea267b9f8e05a54c70d713">m_tfaw_shift</a>[rank] &amp; 1) <a class="code" href="classRubyMemoryControl.html#a8399af800996db69e2cb64997f0123f4">m_tfaw_count</a>[rank]--;
<a name="l00588"></a>00588         <a class="code" href="classRubyMemoryControl.html#a9dd1941af4ea267b9f8e05a54c70d713">m_tfaw_shift</a>[rank] &gt;&gt;= 1;
<a name="l00589"></a>00589     }
<a name="l00590"></a>00590 
<a name="l00591"></a>00591     <span class="comment">// After time period expires, latch an indication that we need a refresh.</span>
<a name="l00592"></a>00592     <span class="comment">// Disable refresh if in mem_fixed_delay mode.</span>
<a name="l00593"></a>00593     <span class="keywordflow">if</span> (!<a class="code" href="classRubyMemoryControl.html#add64256c91bc7722347f3a8dfe94d375">m_mem_fixed_delay</a>) <a class="code" href="classRubyMemoryControl.html#a11c845239e7ec76861ae230df7a575b2">m_refresh_count</a>--;
<a name="l00594"></a>00594     <span class="keywordflow">if</span> (<a class="code" href="classRubyMemoryControl.html#a11c845239e7ec76861ae230df7a575b2">m_refresh_count</a> == 0) {
<a name="l00595"></a>00595         <a class="code" href="classRubyMemoryControl.html#a11c845239e7ec76861ae230df7a575b2">m_refresh_count</a> = <a class="code" href="classRubyMemoryControl.html#ac226affdfdce1041cdc1adcea108d2d9">m_refresh_period_system</a>;
<a name="l00596"></a>00596 
<a name="l00597"></a>00597         <span class="comment">// Are we overrunning our ability to refresh?</span>
<a name="l00598"></a>00598         assert(<a class="code" href="classRubyMemoryControl.html#a81b8cb5d4100808f5d49ebb9e7f878bd">m_need_refresh</a> &lt; 10);
<a name="l00599"></a>00599         <a class="code" href="classRubyMemoryControl.html#a81b8cb5d4100808f5d49ebb9e7f878bd">m_need_refresh</a>++;
<a name="l00600"></a>00600     }
<a name="l00601"></a>00601 
<a name="l00602"></a>00602     <span class="comment">// If this batch of requests is all done, make a new batch:</span>
<a name="l00603"></a>00603     <a class="code" href="classRubyMemoryControl.html#aba1d5e3376d7d3bed53b2bafcd056c64">m_ageCounter</a>++;
<a name="l00604"></a>00604     <span class="keywordtype">int</span> anyOld = 0;
<a name="l00605"></a>00605     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> bank=0; bank &lt; m_total_banks; bank++) {
<a name="l00606"></a>00606         anyOld |= <a class="code" href="classRubyMemoryControl.html#a546d324998c9280e60ad0d3bdc33b660">m_oldRequest</a>[bank];
<a name="l00607"></a>00607     }
<a name="l00608"></a>00608     <span class="keywordflow">if</span> (!anyOld) {
<a name="l00609"></a>00609         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> bank=0; bank &lt; m_total_banks; bank++) {
<a name="l00610"></a>00610             <span class="keywordflow">if</span> (!<a class="code" href="classRubyMemoryControl.html#a66d0e61e247049647c7e205d7898f593">m_bankQueues</a>[bank].empty()) <a class="code" href="classRubyMemoryControl.html#a546d324998c9280e60ad0d3bdc33b660">m_oldRequest</a>[bank] = 1;
<a name="l00611"></a>00611         }
<a name="l00612"></a>00612         <a class="code" href="classRubyMemoryControl.html#aba1d5e3376d7d3bed53b2bafcd056c64">m_ageCounter</a> = 0;
<a name="l00613"></a>00613     }
<a name="l00614"></a>00614 
<a name="l00615"></a>00615     <span class="comment">// If randomness desired, re-randomize round-robin position each cycle</span>
<a name="l00616"></a>00616     <span class="keywordflow">if</span> (<a class="code" href="classRubyMemoryControl.html#a84dc4df49177ba4931742af171541561">m_mem_random_arbitrate</a>) {
<a name="l00617"></a>00617         <a class="code" href="classRubyMemoryControl.html#ae91016ac7543fa2d2e4fc5ba9748a134">m_roundRobin</a> = <a class="code" href="RubySlicc__Util_8hh.html#a054fe6e7aa3343d6fee7974f712d356f">random</a>() % m_total_banks;
<a name="l00618"></a>00618     }
<a name="l00619"></a>00619 
<a name="l00620"></a>00620     <span class="comment">// For each channel, scan round-robin, and pick an old, ready</span>
<a name="l00621"></a>00621     <span class="comment">// request and issue it.  Treat a refresh request as if it were at</span>
<a name="l00622"></a>00622     <span class="comment">// the head of its bank queue.  After we issue something, keep</span>
<a name="l00623"></a>00623     <span class="comment">// scanning the queues just to gather statistics about how many</span>
<a name="l00624"></a>00624     <span class="comment">// are waiting.  If in mem_fixed_delay mode, we can issue more</span>
<a name="l00625"></a>00625     <span class="comment">// than one request per cycle.</span>
<a name="l00626"></a>00626     <span class="keywordtype">int</span> queueHeads = 0;
<a name="l00627"></a>00627     <span class="keywordtype">int</span> banksIssued = 0;
<a name="l00628"></a>00628     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; m_total_banks; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00629"></a>00629         <a class="code" href="classRubyMemoryControl.html#ae91016ac7543fa2d2e4fc5ba9748a134">m_roundRobin</a>++;
<a name="l00630"></a>00630         <span class="keywordflow">if</span> (<a class="code" href="classRubyMemoryControl.html#ae91016ac7543fa2d2e4fc5ba9748a134">m_roundRobin</a> &gt;= m_total_banks) <a class="code" href="classRubyMemoryControl.html#ae91016ac7543fa2d2e4fc5ba9748a134">m_roundRobin</a> = 0;
<a name="l00631"></a>00631         <a class="code" href="classRubyMemoryControl.html#a3907d2ad8de317b5d9488e567b8c29de">issueRefresh</a>(<a class="code" href="classRubyMemoryControl.html#ae91016ac7543fa2d2e4fc5ba9748a134">m_roundRobin</a>);
<a name="l00632"></a>00632         <span class="keywordtype">int</span> qs = <a class="code" href="classRubyMemoryControl.html#a66d0e61e247049647c7e205d7898f593">m_bankQueues</a>[<a class="code" href="classRubyMemoryControl.html#ae91016ac7543fa2d2e4fc5ba9748a134">m_roundRobin</a>].size();
<a name="l00633"></a>00633         <span class="keywordflow">if</span> (qs &gt; 1) {
<a name="l00634"></a>00634             <a class="code" href="classRubyMemoryControl.html#a1f70f7199575ca8bd58b685a72c37f84">m_profiler_ptr</a>-&gt;<a class="code" href="classMemCntrlProfiler.html#aa3f67ffbded5f5e56923578d9854457c">profileMemBankQ</a>(qs-1);
<a name="l00635"></a>00635         }
<a name="l00636"></a>00636         <span class="keywordflow">if</span> (qs &gt; 0) {
<a name="l00637"></a>00637             <span class="comment">// we&apos;re not idle if anything is queued</span>
<a name="l00638"></a>00638             <a class="code" href="classRubyMemoryControl.html#a1b496ca0cf94387967ed0539a43fb126">m_idleCount</a> = <a class="code" href="RubyMemoryControl_8cc.html#a75e8916c10ff16ebf1ab9484171aa404">IDLECOUNT_MAX_VALUE</a>;
<a name="l00639"></a>00639             queueHeads++;
<a name="l00640"></a>00640             <span class="keywordflow">if</span> (<a class="code" href="classRubyMemoryControl.html#a839c1841354bab0a9007a04ba303ae2c">queueReady</a>(<a class="code" href="classRubyMemoryControl.html#ae91016ac7543fa2d2e4fc5ba9748a134">m_roundRobin</a>)) {
<a name="l00641"></a>00641                 <a class="code" href="classRubyMemoryControl.html#a9dbeedd7a40a225736f517e46ef9915e">issueRequest</a>(<a class="code" href="classRubyMemoryControl.html#ae91016ac7543fa2d2e4fc5ba9748a134">m_roundRobin</a>);
<a name="l00642"></a>00642                 banksIssued++;
<a name="l00643"></a>00643                 <span class="keywordflow">if</span> (<a class="code" href="classRubyMemoryControl.html#add64256c91bc7722347f3a8dfe94d375">m_mem_fixed_delay</a>) {
<a name="l00644"></a>00644                     <a class="code" href="classRubyMemoryControl.html#a1f70f7199575ca8bd58b685a72c37f84">m_profiler_ptr</a>-&gt;<a class="code" href="classMemCntrlProfiler.html#a1016c2b56b2e6a85e6aba27ec4f574a0">profileMemWaitCycles</a>(<a class="code" href="classRubyMemoryControl.html#add64256c91bc7722347f3a8dfe94d375">m_mem_fixed_delay</a>);
<a name="l00645"></a>00645                 }
<a name="l00646"></a>00646             }
<a name="l00647"></a>00647         }
<a name="l00648"></a>00648     }
<a name="l00649"></a>00649 
<a name="l00650"></a>00650     <span class="comment">// memWaitCycles is a redundant catch-all for the specific</span>
<a name="l00651"></a>00651     <span class="comment">// counters in queueReady</span>
<a name="l00652"></a>00652     <a class="code" href="classRubyMemoryControl.html#a1f70f7199575ca8bd58b685a72c37f84">m_profiler_ptr</a>-&gt;<a class="code" href="classMemCntrlProfiler.html#a1016c2b56b2e6a85e6aba27ec4f574a0">profileMemWaitCycles</a>(queueHeads - banksIssued);
<a name="l00653"></a>00653 
<a name="l00654"></a>00654     <span class="comment">// Check input queue and move anything to bank queues if not full.</span>
<a name="l00655"></a>00655     <span class="comment">// Since this is done here at the end of the cycle, there will</span>
<a name="l00656"></a>00656     <span class="comment">// always be at least one cycle of latency in the bank queue.  We</span>
<a name="l00657"></a>00657     <span class="comment">// deliberately move at most one request per cycle (to simulate</span>
<a name="l00658"></a>00658     <span class="comment">// typical hardware).  Note that if one bank queue fills up, other</span>
<a name="l00659"></a>00659     <span class="comment">// requests can get stuck behind it here.</span>
<a name="l00660"></a>00660     <span class="keywordflow">if</span> (!<a class="code" href="classRubyMemoryControl.html#ad59ead9befd4b8ed53d20e31025cc5f2">m_input_queue</a>.empty()) {
<a name="l00661"></a>00661         <span class="comment">// we&apos;re not idle if anything is pending</span>
<a name="l00662"></a>00662         <a class="code" href="classRubyMemoryControl.html#a1b496ca0cf94387967ed0539a43fb126">m_idleCount</a> = <a class="code" href="RubyMemoryControl_8cc.html#a75e8916c10ff16ebf1ab9484171aa404">IDLECOUNT_MAX_VALUE</a>;
<a name="l00663"></a>00663         <a class="code" href="classMemoryNode.html">MemoryNode</a> *req = <a class="code" href="classRubyMemoryControl.html#ad59ead9befd4b8ed53d20e31025cc5f2">m_input_queue</a>.front();
<a name="l00664"></a>00664         <span class="keywordtype">int</span> bank = <a class="code" href="classRubyMemoryControl.html#a26f571eb9a81a077295b54c2ed398aea">getBank</a>(req-&gt;<a class="code" href="classMemoryNode.html#a87dedd4d12dd06f03efa1a9c2301bfc6">m_addr</a>);
<a name="l00665"></a>00665         <span class="keywordflow">if</span> (<a class="code" href="classRubyMemoryControl.html#a66d0e61e247049647c7e205d7898f593">m_bankQueues</a>[bank].size() &lt; <a class="code" href="classRubyMemoryControl.html#a6cbe212586b315223f76b124953ea4b2">m_bank_queue_size</a>) {
<a name="l00666"></a>00666             <a class="code" href="classRubyMemoryControl.html#ad59ead9befd4b8ed53d20e31025cc5f2">m_input_queue</a>.pop_front();
<a name="l00667"></a>00667             <a class="code" href="classRubyMemoryControl.html#a66d0e61e247049647c7e205d7898f593">m_bankQueues</a>[bank].push_back(req);
<a name="l00668"></a>00668         }
<a name="l00669"></a>00669         <a class="code" href="classRubyMemoryControl.html#a1f70f7199575ca8bd58b685a72c37f84">m_profiler_ptr</a>-&gt;<a class="code" href="classMemCntrlProfiler.html#a4a3a012728231422d396cd10cbdf3d16">profileMemInputQ</a>(<a class="code" href="classRubyMemoryControl.html#ad59ead9befd4b8ed53d20e31025cc5f2">m_input_queue</a>.size());
<a name="l00670"></a>00670     }
<a name="l00671"></a>00671 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a898941f27bcf3a1c0383de5988406650"></a><!-- doxytag: member="RubyMemoryControl::functionalReadBuffers" ref="a898941f27bcf3a1c0383de5988406650" args="(Packet *pkt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool functionalReadBuffers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">Packet</a> *&nbsp;</td>
          <td class="paramname"> <em>pkt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function reads the different buffers that exist in the Ruby Memory <a class="el" href="namespaceController.html">Controller</a>, and figures out if any of the buffers hold a message that contains the data for the address provided in the packet. True is returned if any of the messages was read, otherwise false is returned.</p>
<p>I think we should move these buffers to being message buffers, instead of being lists. </p>

<p><a class="el" href="classMemoryControl.html#ad587c16967cd8dc8b1dcb52a1ce0002b">MemoryControl</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00709"></a>00709 {
<a name="l00710"></a>00710     <span class="keywordflow">for</span> (<a class="code" href="classstd_1_1list.html">std::list&lt;MemoryNode *&gt;::iterator</a> it = <a class="code" href="classRubyMemoryControl.html#ad59ead9befd4b8ed53d20e31025cc5f2">m_input_queue</a>.begin();
<a name="l00711"></a>00711          it != <a class="code" href="classRubyMemoryControl.html#ad59ead9befd4b8ed53d20e31025cc5f2">m_input_queue</a>.end(); ++it) {
<a name="l00712"></a>00712         <a class="code" href="classMessage.html">Message</a>* msg_ptr = (*it)-&gt;m_msgptr.get();
<a name="l00713"></a>00713         <span class="keywordflow">if</span> (msg_ptr-&gt;<a class="code" href="classMessage.html#a050cc08996aae4295aee40e8871788b7">functionalRead</a>(pkt)) {
<a name="l00714"></a>00714             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00715"></a>00715         }
<a name="l00716"></a>00716     }
<a name="l00717"></a>00717 
<a name="l00718"></a>00718     <span class="keywordflow">for</span> (<a class="code" href="classstd_1_1list.html">std::list&lt;MemoryNode *&gt;::iterator</a> it = <a class="code" href="classRubyMemoryControl.html#a6ff73bc35f01b71460125c8973fdcf7f">m_response_queue</a>.begin();
<a name="l00719"></a>00719          it != <a class="code" href="classRubyMemoryControl.html#a6ff73bc35f01b71460125c8973fdcf7f">m_response_queue</a>.end(); ++it) {
<a name="l00720"></a>00720         <a class="code" href="classMessage.html">Message</a>* msg_ptr = (*it)-&gt;m_msgptr.get();
<a name="l00721"></a>00721         <span class="keywordflow">if</span> (msg_ptr-&gt;<a class="code" href="classMessage.html#a050cc08996aae4295aee40e8871788b7">functionalRead</a>(pkt)) {
<a name="l00722"></a>00722             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00723"></a>00723         }
<a name="l00724"></a>00724     }
<a name="l00725"></a>00725 
<a name="l00726"></a>00726     <span class="keywordflow">for</span> (<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> bank = 0; bank &lt; <a class="code" href="classRubyMemoryControl.html#ad36478de555240b1cd80c5b0aa4b00cc">m_total_banks</a>; ++bank) {
<a name="l00727"></a>00727         <span class="keywordflow">for</span> (<a class="code" href="classstd_1_1list.html">std::list&lt;MemoryNode *&gt;::iterator</a> it = <a class="code" href="classRubyMemoryControl.html#a66d0e61e247049647c7e205d7898f593">m_bankQueues</a>[bank].begin();
<a name="l00728"></a>00728              it != <a class="code" href="classRubyMemoryControl.html#a66d0e61e247049647c7e205d7898f593">m_bankQueues</a>[bank].end(); ++it) {
<a name="l00729"></a>00729             <a class="code" href="classMessage.html">Message</a>* msg_ptr = (*it)-&gt;m_msgptr.get();
<a name="l00730"></a>00730             <span class="keywordflow">if</span> (msg_ptr-&gt;<a class="code" href="classMessage.html#a050cc08996aae4295aee40e8871788b7">functionalRead</a>(pkt)) {
<a name="l00731"></a>00731                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00732"></a>00732             }
<a name="l00733"></a>00733         }
<a name="l00734"></a>00734     }
<a name="l00735"></a>00735 
<a name="l00736"></a>00736     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00737"></a>00737 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a08f04f912fb872935cb2d40f8570c340"></a><!-- doxytag: member="RubyMemoryControl::functionalWriteBuffers" ref="a08f04f912fb872935cb2d40f8570c340" args="(Packet *pkt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> functionalWriteBuffers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">Packet</a> *&nbsp;</td>
          <td class="paramname"> <em>pkt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function reads the different buffers that exist in the Ruby Memory <a class="el" href="namespaceController.html">Controller</a>, and figures out if any of the buffers hold a message that needs to functionally written with the data in the packet.</p>
<p>The number of messages written is returned at the end. This is required for debugging purposes. </p>

<p><a class="el" href="classMemoryControl.html#aa1cf5fd9152389ffd0e21700945a149d">MemoryControl</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00749"></a>00749 {
<a name="l00750"></a>00750     <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> num_functional_writes = 0;
<a name="l00751"></a>00751 
<a name="l00752"></a>00752     <span class="keywordflow">for</span> (<a class="code" href="classstd_1_1list.html">std::list&lt;MemoryNode *&gt;::iterator</a> it = <a class="code" href="classRubyMemoryControl.html#ad59ead9befd4b8ed53d20e31025cc5f2">m_input_queue</a>.begin();
<a name="l00753"></a>00753          it != <a class="code" href="classRubyMemoryControl.html#ad59ead9befd4b8ed53d20e31025cc5f2">m_input_queue</a>.end(); ++it) {
<a name="l00754"></a>00754         <a class="code" href="classMessage.html">Message</a>* msg_ptr = (*it)-&gt;m_msgptr.get();
<a name="l00755"></a>00755         <span class="keywordflow">if</span> (msg_ptr-&gt;<a class="code" href="classMessage.html#a1a7af86f43fb867628a3c3cf76e4dcc9">functionalWrite</a>(pkt)) {
<a name="l00756"></a>00756             num_functional_writes++;
<a name="l00757"></a>00757         }
<a name="l00758"></a>00758     }
<a name="l00759"></a>00759 
<a name="l00760"></a>00760     <span class="keywordflow">for</span> (<a class="code" href="classstd_1_1list.html">std::list&lt;MemoryNode *&gt;::iterator</a> it = <a class="code" href="classRubyMemoryControl.html#a6ff73bc35f01b71460125c8973fdcf7f">m_response_queue</a>.begin();
<a name="l00761"></a>00761          it != <a class="code" href="classRubyMemoryControl.html#a6ff73bc35f01b71460125c8973fdcf7f">m_response_queue</a>.end(); ++it) {
<a name="l00762"></a>00762         <a class="code" href="classMessage.html">Message</a>* msg_ptr = (*it)-&gt;m_msgptr.get();
<a name="l00763"></a>00763         <span class="keywordflow">if</span> (msg_ptr-&gt;<a class="code" href="classMessage.html#a1a7af86f43fb867628a3c3cf76e4dcc9">functionalWrite</a>(pkt)) {
<a name="l00764"></a>00764             num_functional_writes++;
<a name="l00765"></a>00765         }
<a name="l00766"></a>00766     }
<a name="l00767"></a>00767 
<a name="l00768"></a>00768     <span class="keywordflow">for</span> (<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> bank = 0; bank &lt; <a class="code" href="classRubyMemoryControl.html#ad36478de555240b1cd80c5b0aa4b00cc">m_total_banks</a>; ++bank) {
<a name="l00769"></a>00769         <span class="keywordflow">for</span> (<a class="code" href="classstd_1_1list.html">std::list&lt;MemoryNode *&gt;::iterator</a> it = <a class="code" href="classRubyMemoryControl.html#a66d0e61e247049647c7e205d7898f593">m_bankQueues</a>[bank].begin();
<a name="l00770"></a>00770              it != <a class="code" href="classRubyMemoryControl.html#a66d0e61e247049647c7e205d7898f593">m_bankQueues</a>[bank].end(); ++it) {
<a name="l00771"></a>00771             <a class="code" href="classMessage.html">Message</a>* msg_ptr = (*it)-&gt;m_msgptr.get();
<a name="l00772"></a>00772             <span class="keywordflow">if</span> (msg_ptr-&gt;<a class="code" href="classMessage.html#a1a7af86f43fb867628a3c3cf76e4dcc9">functionalWrite</a>(pkt)) {
<a name="l00773"></a>00773                 num_functional_writes++;
<a name="l00774"></a>00774             }
<a name="l00775"></a>00775         }
<a name="l00776"></a>00776     }
<a name="l00777"></a>00777 
<a name="l00778"></a>00778     <span class="keywordflow">return</span> num_functional_writes;
<a name="l00779"></a>00779 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a26f571eb9a81a077295b54c2ed398aea"></a><!-- doxytag: member="RubyMemoryControl::getBank" ref="a26f571eb9a81a077295b54c2ed398aea" args="(const physical_address_t addr) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int getBank </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="TypeDefines_8hh.html#a7901e1a365850c5ff38ec6e12b6b9ffc">physical_address_t</a>&nbsp;</td>
          <td class="paramname"> <em>addr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMemoryControl.html#a7a4691e15d68d8bf9df636adff2c964f">MemoryControl</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00383"></a>00383 {
<a name="l00384"></a>00384     <span class="keywordtype">int</span> dimm = (<a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a> &gt;&gt; <a class="code" href="classRubyMemoryControl.html#a9d9676a8a7c87644cefbe758f0ef719c">m_dimm_bit_0</a>) &amp; (<a class="code" href="classRubyMemoryControl.html#acf7c3dd8c1a61ce9fe7ca2e026150caf">m_dimms_per_channel</a> - 1);
<a name="l00385"></a>00385     <span class="keywordtype">int</span> rank = (<a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a> &gt;&gt; <a class="code" href="classRubyMemoryControl.html#a2262efb9776ae0e8119e999c6efed38b">m_rank_bit_0</a>) &amp; (<a class="code" href="classRubyMemoryControl.html#a734869c8bd10780ed7f61eadb638f30c">m_ranks_per_dimm</a> - 1);
<a name="l00386"></a>00386     <span class="keywordtype">int</span> bank = (<a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a> &gt;&gt; <a class="code" href="classRubyMemoryControl.html#a767e3298a0e794bb0c8f422021e6b67d">m_bank_bit_0</a>) &amp; (<a class="code" href="classRubyMemoryControl.html#af5a8b76f5c8fdb638e49a8c11c61f492">m_banks_per_rank</a> - 1);
<a name="l00387"></a>00387     <span class="keywordflow">return</span> (dimm * <a class="code" href="classRubyMemoryControl.html#a734869c8bd10780ed7f61eadb638f30c">m_ranks_per_dimm</a> * <a class="code" href="classRubyMemoryControl.html#af5a8b76f5c8fdb638e49a8c11c61f492">m_banks_per_rank</a>)
<a name="l00388"></a>00388         + (rank * m_banks_per_rank)
<a name="l00389"></a>00389         + bank;
<a name="l00390"></a>00390 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aba6f6d5c066193ae70ee43153051055b"></a><!-- doxytag: member="RubyMemoryControl::getBanksPerRank" ref="aba6f6d5c066193ae70ee43153051055b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getBanksPerRank </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMemoryControl.html#a931e1da3d57d22fd7f4ba3583697c336">MemoryControl</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00094"></a>00094 { <span class="keywordflow">return</span> <a class="code" href="classRubyMemoryControl.html#af5a8b76f5c8fdb638e49a8c11c61f492">m_banks_per_rank</a>; };
</pre></div></p>

</div>
</div>
<a class="anchor" id="a08f255b8eb3b262916a47fa8f7c12e63"></a><!-- doxytag: member="RubyMemoryControl::getChannel" ref="a08f255b8eb3b262916a47fa8f7c12e63" args="(const physical_address_t addr) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int getChannel </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="TypeDefines_8hh.html#a7901e1a365850c5ff38ec6e12b6b9ffc">physical_address_t</a>&nbsp;</td>
          <td class="paramname"> <em>addr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMemoryControl.html#a439a91ae6f587e18a500ba947d0728d5">MemoryControl</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00414"></a>00414 {
<a name="l00415"></a>00415     assert(<span class="keyword">false</span>);
<a name="l00416"></a>00416     <span class="keywordflow">return</span> -1;
<a name="l00417"></a>00417 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2417fc7252a612b5c976ceaa2d1be4f7"></a><!-- doxytag: member="RubyMemoryControl::getConsumer" ref="a2417fc7252a612b5c976ceaa2d1be4f7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classConsumer.html">Consumer</a>* getConsumer </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMemoryControl.html#acb101bbbf38f858442ec618e9705d039">MemoryControl</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00070"></a>00070 { <span class="keywordflow">return</span> <a class="code" href="classRubyMemoryControl.html#a83dd1dc8eef330b0c0d184a4167b26b4">m_consumer_ptr</a>; };
</pre></div></p>

</div>
</div>
<a class="anchor" id="a73da75c3e5ec30855a02eae2ba824e38"></a><!-- doxytag: member="RubyMemoryControl::getDescription" ref="a73da75c3e5ec30855a02eae2ba824e38" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string getDescription </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMemoryControl.html#a907d681c378517c972b738f4286c25c5">MemoryControl</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00072"></a>00072 { <span class="keywordflow">return</span> <a class="code" href="classRubyMemoryControl.html#ad50eef5f7fcfa30f62e14f0fac2a4f6e">m_description</a>; };
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5a9c0e20c20d0171bb8d8a96cb22576f"></a><!-- doxytag: member="RubyMemoryControl::getDimmsPerChannel" ref="a5a9c0e20c20d0171bb8d8a96cb22576f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getDimmsPerChannel </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMemoryControl.html#a6f39efbb6d1f061b2f6467ac33f6ce34">MemoryControl</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00096"></a>00096 { <span class="keywordflow">return</span> <a class="code" href="classRubyMemoryControl.html#acf7c3dd8c1a61ce9fe7ca2e026150caf">m_dimms_per_channel</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a39abe91d99c7b551495766a397e212af"></a><!-- doxytag: member="RubyMemoryControl::getRank" ref="a39abe91d99c7b551495766a397e212af" args="(int bank) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int getRank </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>bank</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00405"></a>00405 {
<a name="l00406"></a>00406     <span class="keywordtype">int</span> rank = (bank / <a class="code" href="classRubyMemoryControl.html#af5a8b76f5c8fdb638e49a8c11c61f492">m_banks_per_rank</a>);
<a name="l00407"></a>00407     assert (rank &lt; (<a class="code" href="classRubyMemoryControl.html#a734869c8bd10780ed7f61eadb638f30c">m_ranks_per_dimm</a> * <a class="code" href="classRubyMemoryControl.html#acf7c3dd8c1a61ce9fe7ca2e026150caf">m_dimms_per_channel</a>));
<a name="l00408"></a>00408     <span class="keywordflow">return</span> rank;
<a name="l00409"></a>00409 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af8c39d7c9853a48fd242bda859e76222"></a><!-- doxytag: member="RubyMemoryControl::getRank" ref="af8c39d7c9853a48fd242bda859e76222" args="(const physical_address_t addr) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int getRank </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="TypeDefines_8hh.html#a7901e1a365850c5ff38ec6e12b6b9ffc">physical_address_t</a>&nbsp;</td>
          <td class="paramname"> <em>addr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMemoryControl.html#a22565804f54291d8c37b7456c157f814">MemoryControl</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00394"></a>00394 {
<a name="l00395"></a>00395     <span class="keywordtype">int</span> bank = <a class="code" href="classRubyMemoryControl.html#a26f571eb9a81a077295b54c2ed398aea">getBank</a>(<a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a>);
<a name="l00396"></a>00396     <span class="keywordtype">int</span> rank = (bank / <a class="code" href="classRubyMemoryControl.html#af5a8b76f5c8fdb638e49a8c11c61f492">m_banks_per_rank</a>);
<a name="l00397"></a>00397     assert (rank &lt; (<a class="code" href="classRubyMemoryControl.html#a734869c8bd10780ed7f61eadb638f30c">m_ranks_per_dimm</a> * <a class="code" href="classRubyMemoryControl.html#acf7c3dd8c1a61ce9fe7ca2e026150caf">m_dimms_per_channel</a>));
<a name="l00398"></a>00398     <span class="keywordflow">return</span> rank;
<a name="l00399"></a>00399 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6dff017ebfbd9d5b021b86437ff67acc"></a><!-- doxytag: member="RubyMemoryControl::getRanksPerDimm" ref="a6dff017ebfbd9d5b021b86437ff67acc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getRanksPerDimm </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMemoryControl.html#a8fc5f029d5373799975a32fcd559400c">MemoryControl</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00095"></a>00095 { <span class="keywordflow">return</span> <a class="code" href="classRubyMemoryControl.html#a734869c8bd10780ed7f61eadb638f30c">m_ranks_per_dimm</a>; };
</pre></div></p>

</div>
</div>
<a class="anchor" id="a65314c26cf3c85d8c911524ede56456c"></a><!-- doxytag: member="RubyMemoryControl::getRow" ref="a65314c26cf3c85d8c911524ede56456c" args="(const physical_address_t addr) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int getRow </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="TypeDefines_8hh.html#a7901e1a365850c5ff38ec6e12b6b9ffc">physical_address_t</a>&nbsp;</td>
          <td class="paramname"> <em>addr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMemoryControl.html#a86eabafc0d8d68214de261fc7a333a04">MemoryControl</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00422"></a>00422 {
<a name="l00423"></a>00423     assert(<span class="keyword">false</span>);
<a name="l00424"></a>00424     <span class="keywordflow">return</span> -1;
<a name="l00425"></a>00425 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a02fd73d861ef2e4aabb38c0c9ff82947"></a><!-- doxytag: member="RubyMemoryControl::init" ref="a02fd73d861ef2e4aabb38c0c9ff82947" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classRubyMemoryControl.html#a02fd73d861ef2e4aabb38c0c9ff82947">init()</a> is called after all C++ SimObjects have been created and all ports are connected. Initializations that are independent of unserialization but rely on a fully instantiated and connected <a class="el" href="classSimObject.html">SimObject</a> graph should be done here. </p>

<p><a class="el" href="classMemoryControl.html#ab5be7e5a13ea77d59aac45d21dceb6a0">MemoryControl</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00174"></a>00174 {
<a name="l00175"></a>00175     <a class="code" href="classRubyMemoryControl.html#acfac131e63985feff04ed11cbaf0d221">m_msg_counter</a> = 0;
<a name="l00176"></a>00176 
<a name="l00177"></a>00177     assert(<a class="code" href="classRubyMemoryControl.html#a278ccfdcd299cca636085e30b57bd77b">m_tFaw</a> &lt;= 62); <span class="comment">// must fit in a uint64 shift register</span>
<a name="l00178"></a>00178 
<a name="l00179"></a>00179     <a class="code" href="classRubyMemoryControl.html#ad36478de555240b1cd80c5b0aa4b00cc">m_total_banks</a> = <a class="code" href="classRubyMemoryControl.html#af5a8b76f5c8fdb638e49a8c11c61f492">m_banks_per_rank</a> * <a class="code" href="classRubyMemoryControl.html#a734869c8bd10780ed7f61eadb638f30c">m_ranks_per_dimm</a> * <a class="code" href="classRubyMemoryControl.html#acf7c3dd8c1a61ce9fe7ca2e026150caf">m_dimms_per_channel</a>;
<a name="l00180"></a>00180     <a class="code" href="classRubyMemoryControl.html#ae56d0b2636a76e0d08eb304c9845540c">m_total_ranks</a> = <a class="code" href="classRubyMemoryControl.html#a734869c8bd10780ed7f61eadb638f30c">m_ranks_per_dimm</a> * m_dimms_per_channel;
<a name="l00181"></a>00181     <a class="code" href="classRubyMemoryControl.html#ac226affdfdce1041cdc1adcea108d2d9">m_refresh_period_system</a> = <a class="code" href="classRubyMemoryControl.html#ab046d0568e576a3fd3e751aae694aa6c">m_refresh_period</a> / <a class="code" href="classRubyMemoryControl.html#ad36478de555240b1cd80c5b0aa4b00cc">m_total_banks</a>;
<a name="l00182"></a>00182 
<a name="l00183"></a>00183     <a class="code" href="classRubyMemoryControl.html#a66d0e61e247049647c7e205d7898f593">m_bankQueues</a> = <span class="keyword">new</span> <a class="code" href="classstd_1_1list.html">list&lt;MemoryNode *&gt;</a> [<a class="code" href="classRubyMemoryControl.html#ad36478de555240b1cd80c5b0aa4b00cc">m_total_banks</a>];
<a name="l00184"></a>00184     assert(<a class="code" href="classRubyMemoryControl.html#a66d0e61e247049647c7e205d7898f593">m_bankQueues</a>);
<a name="l00185"></a>00185 
<a name="l00186"></a>00186     <a class="code" href="classRubyMemoryControl.html#a258db92f2ca2cd3335e798fbe1cea189">m_bankBusyCounter</a> = <span class="keyword">new</span> <span class="keywordtype">int</span> [<a class="code" href="classRubyMemoryControl.html#ad36478de555240b1cd80c5b0aa4b00cc">m_total_banks</a>];
<a name="l00187"></a>00187     assert(<a class="code" href="classRubyMemoryControl.html#a258db92f2ca2cd3335e798fbe1cea189">m_bankBusyCounter</a>);
<a name="l00188"></a>00188 
<a name="l00189"></a>00189     <a class="code" href="classRubyMemoryControl.html#a546d324998c9280e60ad0d3bdc33b660">m_oldRequest</a> = <span class="keyword">new</span> <span class="keywordtype">int</span> [<a class="code" href="classRubyMemoryControl.html#ad36478de555240b1cd80c5b0aa4b00cc">m_total_banks</a>];
<a name="l00190"></a>00190     assert(<a class="code" href="classRubyMemoryControl.html#a546d324998c9280e60ad0d3bdc33b660">m_oldRequest</a>);
<a name="l00191"></a>00191 
<a name="l00192"></a>00192     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classRubyMemoryControl.html#ad36478de555240b1cd80c5b0aa4b00cc">m_total_banks</a>; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00193"></a>00193         <a class="code" href="classRubyMemoryControl.html#a258db92f2ca2cd3335e798fbe1cea189">m_bankBusyCounter</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>] = 0;
<a name="l00194"></a>00194         <a class="code" href="classRubyMemoryControl.html#a546d324998c9280e60ad0d3bdc33b660">m_oldRequest</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>] = 0;
<a name="l00195"></a>00195     }
<a name="l00196"></a>00196 
<a name="l00197"></a>00197     <a class="code" href="classRubyMemoryControl.html#a9622fd6ccdf6aaac725dd5b199651e1f">m_busBusyCounter_Basic</a> = 0;
<a name="l00198"></a>00198     <a class="code" href="classRubyMemoryControl.html#a4c6490a8d96034781b7f019c9875637d">m_busBusyCounter_Write</a> = 0;
<a name="l00199"></a>00199     <a class="code" href="classRubyMemoryControl.html#a9396a0f34b9eb0d3c51bedc04de53b10">m_busBusyCounter_ReadNewRank</a> = 0;
<a name="l00200"></a>00200     <a class="code" href="classRubyMemoryControl.html#a0889f6b503357c0dee9ca27b3a777a61">m_busBusy_WhichRank</a> = 0;
<a name="l00201"></a>00201 
<a name="l00202"></a>00202     <a class="code" href="classRubyMemoryControl.html#ae91016ac7543fa2d2e4fc5ba9748a134">m_roundRobin</a> = 0;
<a name="l00203"></a>00203     <a class="code" href="classRubyMemoryControl.html#a11c845239e7ec76861ae230df7a575b2">m_refresh_count</a> = 1;
<a name="l00204"></a>00204     <a class="code" href="classRubyMemoryControl.html#a81b8cb5d4100808f5d49ebb9e7f878bd">m_need_refresh</a> = 0;
<a name="l00205"></a>00205     <a class="code" href="classRubyMemoryControl.html#a93843e73be2e39683d2b6ce21c8a6298">m_refresh_bank</a> = 0;
<a name="l00206"></a>00206     <a class="code" href="classRubyMemoryControl.html#a1b496ca0cf94387967ed0539a43fb126">m_idleCount</a> = 0;
<a name="l00207"></a>00207     <a class="code" href="classRubyMemoryControl.html#aba1d5e3376d7d3bed53b2bafcd056c64">m_ageCounter</a> = 0;
<a name="l00208"></a>00208 
<a name="l00209"></a>00209     <span class="comment">// Each tfaw shift register keeps a moving bit pattern</span>
<a name="l00210"></a>00210     <span class="comment">// which shows when recent activates have occurred.</span>
<a name="l00211"></a>00211     <span class="comment">// m_tfaw_count keeps track of how many 1 bits are set</span>
<a name="l00212"></a>00212     <span class="comment">// in each shift register.  When m_tfaw_count is &gt;= 4,</span>
<a name="l00213"></a>00213     <span class="comment">// new activates are not allowed.</span>
<a name="l00214"></a>00214     <a class="code" href="classRubyMemoryControl.html#a9dd1941af4ea267b9f8e05a54c70d713">m_tfaw_shift</a> = <span class="keyword">new</span> <a class="code" href="TypeDefines_8hh.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>[<a class="code" href="classRubyMemoryControl.html#ae56d0b2636a76e0d08eb304c9845540c">m_total_ranks</a>];
<a name="l00215"></a>00215     <a class="code" href="classRubyMemoryControl.html#a8399af800996db69e2cb64997f0123f4">m_tfaw_count</a> = <span class="keyword">new</span> <span class="keywordtype">int</span>[<a class="code" href="classRubyMemoryControl.html#ae56d0b2636a76e0d08eb304c9845540c">m_total_ranks</a>];
<a name="l00216"></a>00216     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classRubyMemoryControl.html#ae56d0b2636a76e0d08eb304c9845540c">m_total_ranks</a>; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00217"></a>00217         <a class="code" href="classRubyMemoryControl.html#a9dd1941af4ea267b9f8e05a54c70d713">m_tfaw_shift</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>] = 0;
<a name="l00218"></a>00218         <a class="code" href="classRubyMemoryControl.html#a8399af800996db69e2cb64997f0123f4">m_tfaw_count</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>] = 0;
<a name="l00219"></a>00219     }
<a name="l00220"></a>00220 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acbed040576a7a18e2d9c46b2f15e0162"></a><!-- doxytag: member="RubyMemoryControl::isReady" ref="acbed040576a7a18e2d9c46b2f15e0162" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool isReady </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMemoryControl.html#a90b7287ef3808f6b4b355495d24a9b38">MemoryControl</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00347"></a>00347 {
<a name="l00348"></a>00348     <span class="keywordflow">return</span> ((!<a class="code" href="classRubyMemoryControl.html#a6ff73bc35f01b71460125c8973fdcf7f">m_response_queue</a>.empty()) &amp;&amp;
<a name="l00349"></a>00349             (<a class="code" href="classRubyMemoryControl.html#a6ff73bc35f01b71460125c8973fdcf7f">m_response_queue</a>.front()-&gt;m_time &lt;= <a class="code" href="Global_8cc.html#ac7631ed7c7cc138c40a9e88e38d0ecb1">g_system_ptr</a>-&gt;<a class="code" href="classClockedObject.html#a3f6dfa1d3e7cd47666433b6caa4d34d6">curCycle</a>()));
<a name="l00350"></a>00350 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3907d2ad8de317b5d9488e567b8c29de"></a><!-- doxytag: member="RubyMemoryControl::issueRefresh" ref="a3907d2ad8de317b5d9488e567b8c29de" args="(int bank)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool issueRefresh </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>bank</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00494"></a>00494 {
<a name="l00495"></a>00495     <span class="keywordflow">if</span> (!<a class="code" href="classRubyMemoryControl.html#a81b8cb5d4100808f5d49ebb9e7f878bd">m_need_refresh</a> || (<a class="code" href="classRubyMemoryControl.html#a93843e73be2e39683d2b6ce21c8a6298">m_refresh_bank</a> != bank))
<a name="l00496"></a>00496         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00497"></a>00497     <span class="keywordflow">if</span> (<a class="code" href="classRubyMemoryControl.html#a258db92f2ca2cd3335e798fbe1cea189">m_bankBusyCounter</a>[bank] &gt; 0)
<a name="l00498"></a>00498         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00499"></a>00499     <span class="comment">// Note that m_busBusyCounter will prevent multiple issues during</span>
<a name="l00500"></a>00500     <span class="comment">// the same cycle, as well as on different but close cycles:</span>
<a name="l00501"></a>00501     <span class="keywordflow">if</span> (<a class="code" href="classRubyMemoryControl.html#a9622fd6ccdf6aaac725dd5b199651e1f">m_busBusyCounter_Basic</a> &gt; 0)
<a name="l00502"></a>00502         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00503"></a>00503     <span class="keywordtype">int</span> rank = <a class="code" href="classRubyMemoryControl.html#af8c39d7c9853a48fd242bda859e76222">getRank</a>(bank);
<a name="l00504"></a>00504     <span class="keywordflow">if</span> (<a class="code" href="classRubyMemoryControl.html#a8399af800996db69e2cb64997f0123f4">m_tfaw_count</a>[rank] &gt;= <a class="code" href="RubyMemoryControl_8hh.html#a783700b32287aaa8e56e1b63a611a927">ACTIVATE_PER_TFAW</a>)
<a name="l00505"></a>00505         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00506"></a>00506 
<a name="l00507"></a>00507     <span class="comment">// Issue it:</span>
<a name="l00508"></a>00508     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(RubyMemory, <span class="stringliteral">&quot;Refresh bank %3x\n&quot;</span>, bank);
<a name="l00509"></a>00509 
<a name="l00510"></a>00510     <a class="code" href="classRubyMemoryControl.html#a1f70f7199575ca8bd58b685a72c37f84">m_profiler_ptr</a>-&gt;<a class="code" href="classMemCntrlProfiler.html#a40e2dc0236a3bc753d24a2bf77dc3b9f">profileMemRefresh</a>();
<a name="l00511"></a>00511     <a class="code" href="classRubyMemoryControl.html#a81b8cb5d4100808f5d49ebb9e7f878bd">m_need_refresh</a>--;
<a name="l00512"></a>00512     <a class="code" href="classRubyMemoryControl.html#a93843e73be2e39683d2b6ce21c8a6298">m_refresh_bank</a>++;
<a name="l00513"></a>00513     <span class="keywordflow">if</span> (<a class="code" href="classRubyMemoryControl.html#a93843e73be2e39683d2b6ce21c8a6298">m_refresh_bank</a> &gt;= <a class="code" href="classRubyMemoryControl.html#ad36478de555240b1cd80c5b0aa4b00cc">m_total_banks</a>)
<a name="l00514"></a>00514         <a class="code" href="classRubyMemoryControl.html#a93843e73be2e39683d2b6ce21c8a6298">m_refresh_bank</a> = 0;
<a name="l00515"></a>00515     <a class="code" href="classRubyMemoryControl.html#a258db92f2ca2cd3335e798fbe1cea189">m_bankBusyCounter</a>[bank] = <a class="code" href="classRubyMemoryControl.html#ab11322175e2e2ec5d6ebef835774bc1a">m_bank_busy_time</a>;
<a name="l00516"></a>00516     <a class="code" href="classRubyMemoryControl.html#a9622fd6ccdf6aaac725dd5b199651e1f">m_busBusyCounter_Basic</a> = <a class="code" href="classRubyMemoryControl.html#a0537255983f6c88ed3389efd814780e5">m_basic_bus_busy_time</a>;
<a name="l00517"></a>00517     <a class="code" href="classRubyMemoryControl.html#a4c6490a8d96034781b7f019c9875637d">m_busBusyCounter_Write</a> = <a class="code" href="classRubyMemoryControl.html#a0537255983f6c88ed3389efd814780e5">m_basic_bus_busy_time</a>;
<a name="l00518"></a>00518     <a class="code" href="classRubyMemoryControl.html#a9396a0f34b9eb0d3c51bedc04de53b10">m_busBusyCounter_ReadNewRank</a> = <a class="code" href="classRubyMemoryControl.html#a0537255983f6c88ed3389efd814780e5">m_basic_bus_busy_time</a>;
<a name="l00519"></a>00519     <a class="code" href="classRubyMemoryControl.html#a8fb7d0c7e12bbd524e3bcd193e66426c">markTfaw</a>(rank);
<a name="l00520"></a>00520     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00521"></a>00521 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9dbeedd7a40a225736f517e46ef9915e"></a><!-- doxytag: member="RubyMemoryControl::issueRequest" ref="a9dbeedd7a40a225736f517e46ef9915e" args="(int bank)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void issueRequest </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>bank</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00538"></a>00538 {
<a name="l00539"></a>00539     <span class="keywordtype">int</span> rank = <a class="code" href="classRubyMemoryControl.html#af8c39d7c9853a48fd242bda859e76222">getRank</a>(bank);
<a name="l00540"></a>00540     <a class="code" href="classMemoryNode.html">MemoryNode</a> *req = <a class="code" href="classRubyMemoryControl.html#a66d0e61e247049647c7e205d7898f593">m_bankQueues</a>[bank].front();
<a name="l00541"></a>00541     <a class="code" href="classRubyMemoryControl.html#a66d0e61e247049647c7e205d7898f593">m_bankQueues</a>[bank].pop_front();
<a name="l00542"></a>00542 
<a name="l00543"></a>00543     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(RubyMemory, <span class="stringliteral">&quot;Mem issue request%7d: %#08x %c &quot;</span>
<a name="l00544"></a>00544             <span class="stringliteral">&quot;bank=%3x sched %c\n&quot;</span>, req-&gt;<a class="code" href="classMemoryNode.html#acfac131e63985feff04ed11cbaf0d221">m_msg_counter</a>, req-&gt;<a class="code" href="classMemoryNode.html#a87dedd4d12dd06f03efa1a9c2301bfc6">m_addr</a>,
<a name="l00545"></a>00545             req-&gt;<a class="code" href="classMemoryNode.html#a364a76c8c3f0d9225ec87b42a36b9264">m_is_mem_read</a>? <span class="charliteral">&apos;R&apos;</span>:<span class="charliteral">&apos;W&apos;</span>,
<a name="l00546"></a>00546             bank, <a class="code" href="classMemoryControl.html#abbf06cc9d10fae424e60034190a2b38f">m_event</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>() ? <span class="charliteral">&apos;Y&apos;</span>:<span class="charliteral">&apos;N&apos;</span>);
<a name="l00547"></a>00547 
<a name="l00548"></a>00548     <span class="keywordflow">if</span> (req-&gt;<a class="code" href="classMemoryNode.html#a0190ebd96c557881596457a02c2f8743">m_msgptr</a>) {  <span class="comment">// don&apos;t enqueue L3 writebacks</span>
<a name="l00549"></a>00549         <a class="code" href="classRubyMemoryControl.html#a5ad0e6ec636d4094ee1b89c121d37dd9">enqueueToDirectory</a>(req, <a class="code" href="classCycles.html">Cycles</a>(<a class="code" href="classRubyMemoryControl.html#aaf9472c80a44349fbb83ec29ce2de7ad">m_mem_ctl_latency</a> + <a class="code" href="classRubyMemoryControl.html#add64256c91bc7722347f3a8dfe94d375">m_mem_fixed_delay</a>));
<a name="l00550"></a>00550     }
<a name="l00551"></a>00551     <a class="code" href="classRubyMemoryControl.html#a546d324998c9280e60ad0d3bdc33b660">m_oldRequest</a>[bank] = 0;
<a name="l00552"></a>00552     <a class="code" href="classRubyMemoryControl.html#a8fb7d0c7e12bbd524e3bcd193e66426c">markTfaw</a>(rank);
<a name="l00553"></a>00553     <a class="code" href="classRubyMemoryControl.html#a258db92f2ca2cd3335e798fbe1cea189">m_bankBusyCounter</a>[bank] = <a class="code" href="classRubyMemoryControl.html#ab11322175e2e2ec5d6ebef835774bc1a">m_bank_busy_time</a>;
<a name="l00554"></a>00554     <a class="code" href="classRubyMemoryControl.html#a0889f6b503357c0dee9ca27b3a777a61">m_busBusy_WhichRank</a> = rank;
<a name="l00555"></a>00555     <span class="keywordflow">if</span> (req-&gt;<a class="code" href="classMemoryNode.html#a364a76c8c3f0d9225ec87b42a36b9264">m_is_mem_read</a>) {
<a name="l00556"></a>00556         <a class="code" href="classRubyMemoryControl.html#a1f70f7199575ca8bd58b685a72c37f84">m_profiler_ptr</a>-&gt;<a class="code" href="classMemCntrlProfiler.html#aa24e89520b2477766f4955368b1782af">profileMemRead</a>();
<a name="l00557"></a>00557         <a class="code" href="classRubyMemoryControl.html#a9622fd6ccdf6aaac725dd5b199651e1f">m_busBusyCounter_Basic</a> = <a class="code" href="classRubyMemoryControl.html#a0537255983f6c88ed3389efd814780e5">m_basic_bus_busy_time</a>;
<a name="l00558"></a>00558         <a class="code" href="classRubyMemoryControl.html#a4c6490a8d96034781b7f019c9875637d">m_busBusyCounter_Write</a> = <a class="code" href="classRubyMemoryControl.html#a0537255983f6c88ed3389efd814780e5">m_basic_bus_busy_time</a> + <a class="code" href="classRubyMemoryControl.html#a469ba8ed68dfdab637a67909cd7f494f">m_read_write_delay</a>;
<a name="l00559"></a>00559         <a class="code" href="classRubyMemoryControl.html#a9396a0f34b9eb0d3c51bedc04de53b10">m_busBusyCounter_ReadNewRank</a> =
<a name="l00560"></a>00560             <a class="code" href="classRubyMemoryControl.html#a0537255983f6c88ed3389efd814780e5">m_basic_bus_busy_time</a> + <a class="code" href="classRubyMemoryControl.html#a88f33889677c076f1e5fdd8ce7cabc4d">m_rank_rank_delay</a>;
<a name="l00561"></a>00561     } <span class="keywordflow">else</span> {
<a name="l00562"></a>00562         <a class="code" href="classRubyMemoryControl.html#a1f70f7199575ca8bd58b685a72c37f84">m_profiler_ptr</a>-&gt;<a class="code" href="classMemCntrlProfiler.html#ad3a0650ce42e756305da022e6b226051">profileMemWrite</a>();
<a name="l00563"></a>00563         <a class="code" href="classRubyMemoryControl.html#a9622fd6ccdf6aaac725dd5b199651e1f">m_busBusyCounter_Basic</a> = <a class="code" href="classRubyMemoryControl.html#a0537255983f6c88ed3389efd814780e5">m_basic_bus_busy_time</a>;
<a name="l00564"></a>00564         <a class="code" href="classRubyMemoryControl.html#a4c6490a8d96034781b7f019c9875637d">m_busBusyCounter_Write</a> = <a class="code" href="classRubyMemoryControl.html#a0537255983f6c88ed3389efd814780e5">m_basic_bus_busy_time</a>;
<a name="l00565"></a>00565         <a class="code" href="classRubyMemoryControl.html#a9396a0f34b9eb0d3c51bedc04de53b10">m_busBusyCounter_ReadNewRank</a> = <a class="code" href="classRubyMemoryControl.html#a0537255983f6c88ed3389efd814780e5">m_basic_bus_busy_time</a>;
<a name="l00566"></a>00566     }
<a name="l00567"></a>00567 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8fb7d0c7e12bbd524e3bcd193e66426c"></a><!-- doxytag: member="RubyMemoryControl::markTfaw" ref="a8fb7d0c7e12bbd524e3bcd193e66426c" args="(int rank)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void markTfaw </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rank</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00526"></a>00526 {
<a name="l00527"></a>00527     <span class="keywordflow">if</span> (<a class="code" href="classRubyMemoryControl.html#a278ccfdcd299cca636085e30b57bd77b">m_tFaw</a>) {
<a name="l00528"></a>00528         <a class="code" href="classRubyMemoryControl.html#a9dd1941af4ea267b9f8e05a54c70d713">m_tfaw_shift</a>[rank] |= (1 &lt;&lt; (<a class="code" href="classRubyMemoryControl.html#a278ccfdcd299cca636085e30b57bd77b">m_tFaw</a>-1));
<a name="l00529"></a>00529         <a class="code" href="classRubyMemoryControl.html#a8399af800996db69e2cb64997f0123f4">m_tfaw_count</a>[rank]++;
<a name="l00530"></a>00530     }
<a name="l00531"></a>00531 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a625dea61d2ea0f477b1310e9307a33d6"></a><!-- doxytag: member="RubyMemoryControl::operator=" ref="a625dea61d2ea0f477b1310e9307a33d6" args="(const RubyMemoryControl &amp;obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRubyMemoryControl_1_1RubyMemoryControl.html">RubyMemoryControl</a>&amp; operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classRubyMemoryControl_1_1RubyMemoryControl.html">RubyMemoryControl</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>obj</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab635dc32ebecf260c15d8fbbbb9b21e0"></a><!-- doxytag: member="RubyMemoryControl::peek" ref="ab635dc32ebecf260c15d8fbbbb9b21e0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classMessage.html">Message</a> * peek </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMemoryControl.html#a822b263266795dc49c26e24dc6eb4b54">MemoryControl</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00326"></a>00326 {
<a name="l00327"></a>00327     <a class="code" href="classMemoryNode.html">MemoryNode</a> *node = <a class="code" href="classRubyMemoryControl.html#a8ffbfb520369710755a1260b8451de3d">peekNode</a>();
<a name="l00328"></a>00328     <a class="code" href="classMessage.html">Message</a>* msg_ptr = node-&gt;<a class="code" href="classMemoryNode.html#a0190ebd96c557881596457a02c2f8743">m_msgptr</a>.<a class="code" href="classRefCountingPtr.html#a07f851191ad3a7c5c1598ef14f710f96" title="Directly access the pointer itself without taking a reference.">get</a>();
<a name="l00329"></a>00329     assert(msg_ptr != <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>);
<a name="l00330"></a>00330     <span class="keywordflow">return</span> msg_ptr;
<a name="l00331"></a>00331 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8ffbfb520369710755a1260b8451de3d"></a><!-- doxytag: member="RubyMemoryControl::peekNode" ref="a8ffbfb520369710755a1260b8451de3d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMemoryNode.html">MemoryNode</a> * peekNode </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMemoryControl.html#a1daeb227a1c754432729a75c7997d275">MemoryControl</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00335"></a>00335 {
<a name="l00336"></a>00336     assert(<a class="code" href="classRubyMemoryControl.html#acbed040576a7a18e2d9c46b2f15e0162">isReady</a>());
<a name="l00337"></a>00337     <a class="code" href="classMemoryNode.html">MemoryNode</a> *req = <a class="code" href="classRubyMemoryControl.html#a6ff73bc35f01b71460125c8973fdcf7f">m_response_queue</a>.front();
<a name="l00338"></a>00338     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(RubyMemory, <span class="stringliteral">&quot;Peek: memory request%7d: %#08x %c sched %c\n&quot;</span>,
<a name="l00339"></a>00339             req-&gt;<a class="code" href="classMemoryNode.html#acfac131e63985feff04ed11cbaf0d221">m_msg_counter</a>, req-&gt;<a class="code" href="classMemoryNode.html#a87dedd4d12dd06f03efa1a9c2301bfc6">m_addr</a>, req-&gt;<a class="code" href="classMemoryNode.html#a364a76c8c3f0d9225ec87b42a36b9264">m_is_mem_read</a> ? <span class="charliteral">&apos;R&apos;</span>:<span class="charliteral">&apos;W&apos;</span>,
<a name="l00340"></a>00340             <a class="code" href="classMemoryControl.html#abbf06cc9d10fae424e60034190a2b38f">m_event</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>() ? <span class="charliteral">&apos;Y&apos;</span>:<span class="charliteral">&apos;N&apos;</span>);
<a name="l00341"></a>00341 
<a name="l00342"></a>00342     <span class="keywordflow">return</span> req;
<a name="l00343"></a>00343 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac55fe386a101fbae38c716067c9966a0"></a><!-- doxytag: member="RubyMemoryControl::print" ref="ac55fe386a101fbae38c716067c9966a0" args="(std::ostream &amp;out) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>out</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMemoryControl.html#a3ea5f7af5db62cc24f4e40df9ea5c971">MemoryControl</a>を実装しています。</p>

</div>
</div>
<a class="anchor" id="a839c1841354bab0a9007a04ba303ae2c"></a><!-- doxytag: member="RubyMemoryControl::queueReady" ref="a839c1841354bab0a9007a04ba303ae2c" args="(int bank)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool queueReady </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>bank</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00431"></a>00431 {
<a name="l00432"></a>00432     <span class="keywordflow">if</span> ((<a class="code" href="classRubyMemoryControl.html#a258db92f2ca2cd3335e798fbe1cea189">m_bankBusyCounter</a>[bank] &gt; 0) &amp;&amp; !<a class="code" href="classRubyMemoryControl.html#add64256c91bc7722347f3a8dfe94d375">m_mem_fixed_delay</a>) {
<a name="l00433"></a>00433         <a class="code" href="classRubyMemoryControl.html#a1f70f7199575ca8bd58b685a72c37f84">m_profiler_ptr</a>-&gt;<a class="code" href="classMemCntrlProfiler.html#acf390d1b60244779949c578e89bd28b4">profileMemBankBusy</a>();
<a name="l00434"></a>00434 
<a name="l00435"></a>00435         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(RubyMemory, <span class="stringliteral">&quot;bank %x busy %d\n&quot;</span>, bank, <a class="code" href="classRubyMemoryControl.html#a258db92f2ca2cd3335e798fbe1cea189">m_bankBusyCounter</a>[bank]);
<a name="l00436"></a>00436         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00437"></a>00437     }
<a name="l00438"></a>00438 
<a name="l00439"></a>00439     <span class="keywordflow">if</span> (<a class="code" href="classRubyMemoryControl.html#a84dc4df49177ba4931742af171541561">m_mem_random_arbitrate</a> &gt;= 2) {
<a name="l00440"></a>00440         <span class="keywordflow">if</span> ((<a class="code" href="RubySlicc__Util_8hh.html#a054fe6e7aa3343d6fee7974f712d356f">random</a>() % 100) &lt; <a class="code" href="classRubyMemoryControl.html#a84dc4df49177ba4931742af171541561">m_mem_random_arbitrate</a>) {
<a name="l00441"></a>00441             <a class="code" href="classRubyMemoryControl.html#a1f70f7199575ca8bd58b685a72c37f84">m_profiler_ptr</a>-&gt;<a class="code" href="classMemCntrlProfiler.html#a091de1a0e944399fbb9ee4311a8dc1c4">profileMemRandBusy</a>();
<a name="l00442"></a>00442             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00443"></a>00443         }
<a name="l00444"></a>00444     }
<a name="l00445"></a>00445 
<a name="l00446"></a>00446     <span class="keywordflow">if</span> (<a class="code" href="classRubyMemoryControl.html#add64256c91bc7722347f3a8dfe94d375">m_mem_fixed_delay</a>)
<a name="l00447"></a>00447         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00448"></a>00448 
<a name="l00449"></a>00449     <span class="keywordflow">if</span> ((<a class="code" href="classRubyMemoryControl.html#aba1d5e3376d7d3bed53b2bafcd056c64">m_ageCounter</a> &gt; (2 * <a class="code" href="classRubyMemoryControl.html#ab11322175e2e2ec5d6ebef835774bc1a">m_bank_busy_time</a>)) &amp;&amp; !<a class="code" href="classRubyMemoryControl.html#a546d324998c9280e60ad0d3bdc33b660">m_oldRequest</a>[bank]) {
<a name="l00450"></a>00450         <a class="code" href="classRubyMemoryControl.html#a1f70f7199575ca8bd58b685a72c37f84">m_profiler_ptr</a>-&gt;<a class="code" href="classMemCntrlProfiler.html#a9c6e4338190ce42950932dd07b6bd632">profileMemNotOld</a>();
<a name="l00451"></a>00451         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00452"></a>00452     }
<a name="l00453"></a>00453 
<a name="l00454"></a>00454     <span class="keywordflow">if</span> (<a class="code" href="classRubyMemoryControl.html#a9622fd6ccdf6aaac725dd5b199651e1f">m_busBusyCounter_Basic</a> == <a class="code" href="classRubyMemoryControl.html#a0537255983f6c88ed3389efd814780e5">m_basic_bus_busy_time</a>) {
<a name="l00455"></a>00455         <span class="comment">// Another bank must have issued this same cycle.  For</span>
<a name="l00456"></a>00456         <span class="comment">// profiling, we count this as an arb wait rather than a bus</span>
<a name="l00457"></a>00457         <span class="comment">// wait.  This is a little inaccurate since it MIGHT have also</span>
<a name="l00458"></a>00458         <span class="comment">// been blocked waiting for a read-write or a read-read</span>
<a name="l00459"></a>00459         <span class="comment">// instead, but it&apos;s pretty close.</span>
<a name="l00460"></a>00460         <a class="code" href="classRubyMemoryControl.html#a1f70f7199575ca8bd58b685a72c37f84">m_profiler_ptr</a>-&gt;<a class="code" href="classMemCntrlProfiler.html#ac4e5c37195851ad5b8c630f04595034b">profileMemArbWait</a>(1);
<a name="l00461"></a>00461         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00462"></a>00462     }
<a name="l00463"></a>00463 
<a name="l00464"></a>00464     <span class="keywordflow">if</span> (<a class="code" href="classRubyMemoryControl.html#a9622fd6ccdf6aaac725dd5b199651e1f">m_busBusyCounter_Basic</a> &gt; 0) {
<a name="l00465"></a>00465         <a class="code" href="classRubyMemoryControl.html#a1f70f7199575ca8bd58b685a72c37f84">m_profiler_ptr</a>-&gt;<a class="code" href="classMemCntrlProfiler.html#a264503c5439f1643d2c519c4ee8a5086">profileMemBusBusy</a>();
<a name="l00466"></a>00466         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00467"></a>00467     }
<a name="l00468"></a>00468 
<a name="l00469"></a>00469     <span class="keywordtype">int</span> rank = <a class="code" href="classRubyMemoryControl.html#af8c39d7c9853a48fd242bda859e76222">getRank</a>(bank);
<a name="l00470"></a>00470     <span class="keywordflow">if</span> (<a class="code" href="classRubyMemoryControl.html#a8399af800996db69e2cb64997f0123f4">m_tfaw_count</a>[rank] &gt;= <a class="code" href="RubyMemoryControl_8hh.html#a783700b32287aaa8e56e1b63a611a927">ACTIVATE_PER_TFAW</a>) {
<a name="l00471"></a>00471         <a class="code" href="classRubyMemoryControl.html#a1f70f7199575ca8bd58b685a72c37f84">m_profiler_ptr</a>-&gt;<a class="code" href="classMemCntrlProfiler.html#a32ce62393c41865363706bd304a6c376">profileMemTfawBusy</a>();
<a name="l00472"></a>00472         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00473"></a>00473     }
<a name="l00474"></a>00474 
<a name="l00475"></a>00475     <span class="keywordtype">bool</span> write = !<a class="code" href="classRubyMemoryControl.html#a66d0e61e247049647c7e205d7898f593">m_bankQueues</a>[bank].front()-&gt;m_is_mem_read;
<a name="l00476"></a>00476     <span class="keywordflow">if</span> (write &amp;&amp; (<a class="code" href="classRubyMemoryControl.html#a4c6490a8d96034781b7f019c9875637d">m_busBusyCounter_Write</a> &gt; 0)) {
<a name="l00477"></a>00477         <a class="code" href="classRubyMemoryControl.html#a1f70f7199575ca8bd58b685a72c37f84">m_profiler_ptr</a>-&gt;<a class="code" href="classMemCntrlProfiler.html#acb3938ae0f54dbc477209f4437ada024">profileMemReadWriteBusy</a>();
<a name="l00478"></a>00478         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00479"></a>00479     }
<a name="l00480"></a>00480 
<a name="l00481"></a>00481     <span class="keywordflow">if</span> (!write &amp;&amp; (rank != <a class="code" href="classRubyMemoryControl.html#a0889f6b503357c0dee9ca27b3a777a61">m_busBusy_WhichRank</a>)
<a name="l00482"></a>00482         &amp;&amp; (<a class="code" href="classRubyMemoryControl.html#a9396a0f34b9eb0d3c51bedc04de53b10">m_busBusyCounter_ReadNewRank</a> &gt; 0)) {
<a name="l00483"></a>00483         <a class="code" href="classRubyMemoryControl.html#a1f70f7199575ca8bd58b685a72c37f84">m_profiler_ptr</a>-&gt;<a class="code" href="classMemCntrlProfiler.html#adcebbabdff5cd5a8a99061b8d1d21136">profileMemDataBusBusy</a>();
<a name="l00484"></a>00484         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00485"></a>00485     }
<a name="l00486"></a>00486 
<a name="l00487"></a>00487     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00488"></a>00488 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4dc637449366fcdfc4e764cdf12d9b11"></a><!-- doxytag: member="RubyMemoryControl::regStats" ref="a4dc637449366fcdfc4e764cdf12d9b11" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void regStats </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classRegister.html">Register</a> statistics for this object. </p>

<p><a class="el" href="classMemoryControl.html#ac1739a9be0fbd5d96cf441cd3b2c1c78">MemoryControl</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00783"></a>00783 {
<a name="l00784"></a>00784     <a class="code" href="classRubyMemoryControl.html#a1f70f7199575ca8bd58b685a72c37f84">m_profiler_ptr</a>-&gt;<a class="code" href="classMemCntrlProfiler.html#a4dc637449366fcdfc4e764cdf12d9b11">regStats</a>();
<a name="l00785"></a>00785 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad20897c5c8bd47f5d4005989bead0e55"></a><!-- doxytag: member="RubyMemoryControl::reset" ref="ad20897c5c8bd47f5d4005989bead0e55" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reset </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMemoryControl.html#a20dcbdfbd0ec77afc802522bb7e379c1">MemoryControl</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00224"></a>00224 {
<a name="l00225"></a>00225     <a class="code" href="classRubyMemoryControl.html#acfac131e63985feff04ed11cbaf0d221">m_msg_counter</a> = 0;
<a name="l00226"></a>00226 
<a name="l00227"></a>00227     assert(<a class="code" href="classRubyMemoryControl.html#a278ccfdcd299cca636085e30b57bd77b">m_tFaw</a> &lt;= 62); <span class="comment">// must fit in a uint64 shift register</span>
<a name="l00228"></a>00228 
<a name="l00229"></a>00229     <a class="code" href="classRubyMemoryControl.html#ad36478de555240b1cd80c5b0aa4b00cc">m_total_banks</a> = <a class="code" href="classRubyMemoryControl.html#af5a8b76f5c8fdb638e49a8c11c61f492">m_banks_per_rank</a> * <a class="code" href="classRubyMemoryControl.html#a734869c8bd10780ed7f61eadb638f30c">m_ranks_per_dimm</a> * <a class="code" href="classRubyMemoryControl.html#acf7c3dd8c1a61ce9fe7ca2e026150caf">m_dimms_per_channel</a>;
<a name="l00230"></a>00230     <a class="code" href="classRubyMemoryControl.html#ae56d0b2636a76e0d08eb304c9845540c">m_total_ranks</a> = <a class="code" href="classRubyMemoryControl.html#a734869c8bd10780ed7f61eadb638f30c">m_ranks_per_dimm</a> * m_dimms_per_channel;
<a name="l00231"></a>00231     <a class="code" href="classRubyMemoryControl.html#ac226affdfdce1041cdc1adcea108d2d9">m_refresh_period_system</a> = <a class="code" href="classRubyMemoryControl.html#ab046d0568e576a3fd3e751aae694aa6c">m_refresh_period</a> / <a class="code" href="classRubyMemoryControl.html#ad36478de555240b1cd80c5b0aa4b00cc">m_total_banks</a>;
<a name="l00232"></a>00232 
<a name="l00233"></a>00233     assert(<a class="code" href="classRubyMemoryControl.html#a66d0e61e247049647c7e205d7898f593">m_bankQueues</a>);
<a name="l00234"></a>00234 
<a name="l00235"></a>00235     assert(<a class="code" href="classRubyMemoryControl.html#a258db92f2ca2cd3335e798fbe1cea189">m_bankBusyCounter</a>);
<a name="l00236"></a>00236 
<a name="l00237"></a>00237     assert(<a class="code" href="classRubyMemoryControl.html#a546d324998c9280e60ad0d3bdc33b660">m_oldRequest</a>);
<a name="l00238"></a>00238 
<a name="l00239"></a>00239     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classRubyMemoryControl.html#ad36478de555240b1cd80c5b0aa4b00cc">m_total_banks</a>; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00240"></a>00240         <a class="code" href="classRubyMemoryControl.html#a258db92f2ca2cd3335e798fbe1cea189">m_bankBusyCounter</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>] = 0;
<a name="l00241"></a>00241         <a class="code" href="classRubyMemoryControl.html#a546d324998c9280e60ad0d3bdc33b660">m_oldRequest</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>] = 0;
<a name="l00242"></a>00242     }
<a name="l00243"></a>00243 
<a name="l00244"></a>00244     <a class="code" href="classRubyMemoryControl.html#a9622fd6ccdf6aaac725dd5b199651e1f">m_busBusyCounter_Basic</a> = 0;
<a name="l00245"></a>00245     <a class="code" href="classRubyMemoryControl.html#a4c6490a8d96034781b7f019c9875637d">m_busBusyCounter_Write</a> = 0;
<a name="l00246"></a>00246     <a class="code" href="classRubyMemoryControl.html#a9396a0f34b9eb0d3c51bedc04de53b10">m_busBusyCounter_ReadNewRank</a> = 0;
<a name="l00247"></a>00247     <a class="code" href="classRubyMemoryControl.html#a0889f6b503357c0dee9ca27b3a777a61">m_busBusy_WhichRank</a> = 0;
<a name="l00248"></a>00248 
<a name="l00249"></a>00249     <a class="code" href="classRubyMemoryControl.html#ae91016ac7543fa2d2e4fc5ba9748a134">m_roundRobin</a> = 0;
<a name="l00250"></a>00250     <a class="code" href="classRubyMemoryControl.html#a11c845239e7ec76861ae230df7a575b2">m_refresh_count</a> = 1;
<a name="l00251"></a>00251     <a class="code" href="classRubyMemoryControl.html#a81b8cb5d4100808f5d49ebb9e7f878bd">m_need_refresh</a> = 0;
<a name="l00252"></a>00252     <a class="code" href="classRubyMemoryControl.html#a93843e73be2e39683d2b6ce21c8a6298">m_refresh_bank</a> = 0;
<a name="l00253"></a>00253     <a class="code" href="classRubyMemoryControl.html#a1b496ca0cf94387967ed0539a43fb126">m_idleCount</a> = 0;
<a name="l00254"></a>00254     <a class="code" href="classRubyMemoryControl.html#aba1d5e3376d7d3bed53b2bafcd056c64">m_ageCounter</a> = 0;
<a name="l00255"></a>00255 
<a name="l00256"></a>00256     <span class="comment">// Each tfaw shift register keeps a moving bit pattern</span>
<a name="l00257"></a>00257     <span class="comment">// which shows when recent activates have occurred.</span>
<a name="l00258"></a>00258     <span class="comment">// m_tfaw_count keeps track of how many 1 bits are set</span>
<a name="l00259"></a>00259     <span class="comment">// in each shift register.  When m_tfaw_count is &gt;= 4,</span>
<a name="l00260"></a>00260     <span class="comment">// new activates are not allowed.</span>
<a name="l00261"></a>00261     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classRubyMemoryControl.html#ae56d0b2636a76e0d08eb304c9845540c">m_total_ranks</a>; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00262"></a>00262         <a class="code" href="classRubyMemoryControl.html#a9dd1941af4ea267b9f8e05a54c70d713">m_tfaw_shift</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>] = 0;
<a name="l00263"></a>00263         <a class="code" href="classRubyMemoryControl.html#a8399af800996db69e2cb64997f0123f4">m_tfaw_count</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>] = 0;
<a name="l00264"></a>00264     }
<a name="l00265"></a>00265 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8487c37680239f103e21ada9acf1726d"></a><!-- doxytag: member="RubyMemoryControl::setConsumer" ref="a8487c37680239f103e21ada9acf1726d" args="(Consumer *consumer_ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setConsumer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classConsumer.html">Consumer</a> *&nbsp;</td>
          <td class="paramname"> <em>consumer_ptr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMemoryControl.html#ac57bc43eacdddc1423b4f98ead12fd1c">MemoryControl</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00354"></a>00354 {
<a name="l00355"></a>00355     <a class="code" href="classRubyMemoryControl.html#a83dd1dc8eef330b0c0d184a4167b26b4">m_consumer_ptr</a> = consumer_ptr;
<a name="l00356"></a>00356 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9cdbe64eebafb111a124edec55ed2340"></a><!-- doxytag: member="RubyMemoryControl::setDescription" ref="a9cdbe64eebafb111a124edec55ed2340" args="(const std::string &amp;name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setDescription </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>name</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMemoryControl.html#aaf16ee4e399ebed0a6434dd085a6fc10">MemoryControl</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00071"></a>00071 { <a class="code" href="classRubyMemoryControl.html#ad50eef5f7fcfa30f62e14f0fac2a4f6e">m_description</a> = <a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>; };
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae674290a26ecbd622c5160e38e8a4fe9"></a><!-- doxytag: member="RubyMemoryControl::wakeup" ref="ae674290a26ecbd622c5160e38e8a4fe9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wakeup </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMemoryControl.html#a623e3e7d1b1c725d70009f7b01a421b9">MemoryControl</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00686"></a>00686 {
<a name="l00687"></a>00687     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(RubyMemory, <span class="stringliteral">&quot;MemoryController wakeup\n&quot;</span>);
<a name="l00688"></a>00688     <span class="comment">// execute everything</span>
<a name="l00689"></a>00689     <a class="code" href="classRubyMemoryControl.html#ac776b02b70a3c6795e0823d77bf74c73">executeCycle</a>();
<a name="l00690"></a>00690 
<a name="l00691"></a>00691     <a class="code" href="classRubyMemoryControl.html#a1b496ca0cf94387967ed0539a43fb126">m_idleCount</a>--;
<a name="l00692"></a>00692     <span class="keywordflow">if</span> (<a class="code" href="classRubyMemoryControl.html#a1b496ca0cf94387967ed0539a43fb126">m_idleCount</a> &gt; 0) {
<a name="l00693"></a>00693         assert(!<a class="code" href="classMemoryControl.html#abbf06cc9d10fae424e60034190a2b38f">m_event</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>());
<a name="l00694"></a>00694         <a class="code" href="classEventManager.html#a4ddebbfe9a12b95be6fb993ce892dcd3">schedule</a>(<a class="code" href="classMemoryControl.html#abbf06cc9d10fae424e60034190a2b38f">m_event</a>, <a class="code" href="classClockedObject.html#a773956693f216cafb7d4cad92ad582e5">clockEdge</a>(<a class="code" href="classCycles.html">Cycles</a>(1)));
<a name="l00695"></a>00695     }
<a name="l00696"></a>00696 }
</pre></div></p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="aba1d5e3376d7d3bed53b2bafcd056c64"></a><!-- doxytag: member="RubyMemoryControl::m_ageCounter" ref="aba1d5e3376d7d3bed53b2bafcd056c64" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#aba1d5e3376d7d3bed53b2bafcd056c64">m_ageCounter</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a767e3298a0e794bb0c8f422021e6b67d"></a><!-- doxytag: member="RubyMemoryControl::m_bank_bit_0" ref="a767e3298a0e794bb0c8f422021e6b67d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#a767e3298a0e794bb0c8f422021e6b67d">m_bank_bit_0</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab11322175e2e2ec5d6ebef835774bc1a"></a><!-- doxytag: member="RubyMemoryControl::m_bank_busy_time" ref="ab11322175e2e2ec5d6ebef835774bc1a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#ab11322175e2e2ec5d6ebef835774bc1a">m_bank_busy_time</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a6cbe212586b315223f76b124953ea4b2"></a><!-- doxytag: member="RubyMemoryControl::m_bank_queue_size" ref="a6cbe212586b315223f76b124953ea4b2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="classRubyMemoryControl.html#a6cbe212586b315223f76b124953ea4b2">m_bank_queue_size</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a258db92f2ca2cd3335e798fbe1cea189"></a><!-- doxytag: member="RubyMemoryControl::m_bankBusyCounter" ref="a258db92f2ca2cd3335e798fbe1cea189" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int* <a class="el" href="classRubyMemoryControl.html#a258db92f2ca2cd3335e798fbe1cea189">m_bankBusyCounter</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a66d0e61e247049647c7e205d7898f593"></a><!-- doxytag: member="RubyMemoryControl::m_bankQueues" ref="a66d0e61e247049647c7e205d7898f593" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1list.html">std::list</a>&lt;<a class="el" href="classMemoryNode.html">MemoryNode</a> *&gt;* <a class="el" href="classRubyMemoryControl.html#a66d0e61e247049647c7e205d7898f593">m_bankQueues</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="af5a8b76f5c8fdb638e49a8c11c61f492"></a><!-- doxytag: member="RubyMemoryControl::m_banks_per_rank" ref="af5a8b76f5c8fdb638e49a8c11c61f492" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#af5a8b76f5c8fdb638e49a8c11c61f492">m_banks_per_rank</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0537255983f6c88ed3389efd814780e5"></a><!-- doxytag: member="RubyMemoryControl::m_basic_bus_busy_time" ref="a0537255983f6c88ed3389efd814780e5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#a0537255983f6c88ed3389efd814780e5">m_basic_bus_busy_time</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0889f6b503357c0dee9ca27b3a777a61"></a><!-- doxytag: member="RubyMemoryControl::m_busBusy_WhichRank" ref="a0889f6b503357c0dee9ca27b3a777a61" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#a0889f6b503357c0dee9ca27b3a777a61">m_busBusy_WhichRank</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9622fd6ccdf6aaac725dd5b199651e1f"></a><!-- doxytag: member="RubyMemoryControl::m_busBusyCounter_Basic" ref="a9622fd6ccdf6aaac725dd5b199651e1f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#a9622fd6ccdf6aaac725dd5b199651e1f">m_busBusyCounter_Basic</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9396a0f34b9eb0d3c51bedc04de53b10"></a><!-- doxytag: member="RubyMemoryControl::m_busBusyCounter_ReadNewRank" ref="a9396a0f34b9eb0d3c51bedc04de53b10" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#a9396a0f34b9eb0d3c51bedc04de53b10">m_busBusyCounter_ReadNewRank</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4c6490a8d96034781b7f019c9875637d"></a><!-- doxytag: member="RubyMemoryControl::m_busBusyCounter_Write" ref="a4c6490a8d96034781b7f019c9875637d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#a4c6490a8d96034781b7f019c9875637d">m_busBusyCounter_Write</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a83dd1dc8eef330b0c0d184a4167b26b4"></a><!-- doxytag: member="RubyMemoryControl::m_consumer_ptr" ref="a83dd1dc8eef330b0c0d184a4167b26b4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classConsumer.html">Consumer</a>* <a class="el" href="classRubyMemoryControl.html#a83dd1dc8eef330b0c0d184a4167b26b4">m_consumer_ptr</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad50eef5f7fcfa30f62e14f0fac2a4f6e"></a><!-- doxytag: member="RubyMemoryControl::m_description" ref="ad50eef5f7fcfa30f62e14f0fac2a4f6e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="classRubyMemoryControl.html#ad50eef5f7fcfa30f62e14f0fac2a4f6e">m_description</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9d9676a8a7c87644cefbe758f0ef719c"></a><!-- doxytag: member="RubyMemoryControl::m_dimm_bit_0" ref="a9d9676a8a7c87644cefbe758f0ef719c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#a9d9676a8a7c87644cefbe758f0ef719c">m_dimm_bit_0</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="acf7c3dd8c1a61ce9fe7ca2e026150caf"></a><!-- doxytag: member="RubyMemoryControl::m_dimms_per_channel" ref="acf7c3dd8c1a61ce9fe7ca2e026150caf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#acf7c3dd8c1a61ce9fe7ca2e026150caf">m_dimms_per_channel</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1b496ca0cf94387967ed0539a43fb126"></a><!-- doxytag: member="RubyMemoryControl::m_idleCount" ref="a1b496ca0cf94387967ed0539a43fb126" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#a1b496ca0cf94387967ed0539a43fb126">m_idleCount</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad59ead9befd4b8ed53d20e31025cc5f2"></a><!-- doxytag: member="RubyMemoryControl::m_input_queue" ref="ad59ead9befd4b8ed53d20e31025cc5f2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1list.html">std::list</a>&lt;<a class="el" href="classMemoryNode.html">MemoryNode</a> *&gt; <a class="el" href="classRubyMemoryControl.html#ad59ead9befd4b8ed53d20e31025cc5f2">m_input_queue</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aaf9472c80a44349fbb83ec29ce2de7ad"></a><!-- doxytag: member="RubyMemoryControl::m_mem_ctl_latency" ref="aaf9472c80a44349fbb83ec29ce2de7ad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCycles.html">Cycles</a> <a class="el" href="classRubyMemoryControl.html#aaf9472c80a44349fbb83ec29ce2de7ad">m_mem_ctl_latency</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="add64256c91bc7722347f3a8dfe94d375"></a><!-- doxytag: member="RubyMemoryControl::m_mem_fixed_delay" ref="add64256c91bc7722347f3a8dfe94d375" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCycles.html">Cycles</a> <a class="el" href="classRubyMemoryControl.html#add64256c91bc7722347f3a8dfe94d375">m_mem_fixed_delay</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a84dc4df49177ba4931742af171541561"></a><!-- doxytag: member="RubyMemoryControl::m_mem_random_arbitrate" ref="a84dc4df49177ba4931742af171541561" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#a84dc4df49177ba4931742af171541561">m_mem_random_arbitrate</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="acfac131e63985feff04ed11cbaf0d221"></a><!-- doxytag: member="RubyMemoryControl::m_msg_counter" ref="acfac131e63985feff04ed11cbaf0d221" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#acfac131e63985feff04ed11cbaf0d221">m_msg_counter</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a81b8cb5d4100808f5d49ebb9e7f878bd"></a><!-- doxytag: member="RubyMemoryControl::m_need_refresh" ref="a81b8cb5d4100808f5d49ebb9e7f878bd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#a81b8cb5d4100808f5d49ebb9e7f878bd">m_need_refresh</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a546d324998c9280e60ad0d3bdc33b660"></a><!-- doxytag: member="RubyMemoryControl::m_oldRequest" ref="a546d324998c9280e60ad0d3bdc33b660" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int* <a class="el" href="classRubyMemoryControl.html#a546d324998c9280e60ad0d3bdc33b660">m_oldRequest</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1f70f7199575ca8bd58b685a72c37f84"></a><!-- doxytag: member="RubyMemoryControl::m_profiler_ptr" ref="a1f70f7199575ca8bd58b685a72c37f84" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMemCntrlProfiler.html">MemCntrlProfiler</a>* <a class="el" href="classRubyMemoryControl.html#a1f70f7199575ca8bd58b685a72c37f84">m_profiler_ptr</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2262efb9776ae0e8119e999c6efed38b"></a><!-- doxytag: member="RubyMemoryControl::m_rank_bit_0" ref="a2262efb9776ae0e8119e999c6efed38b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#a2262efb9776ae0e8119e999c6efed38b">m_rank_bit_0</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a88f33889677c076f1e5fdd8ce7cabc4d"></a><!-- doxytag: member="RubyMemoryControl::m_rank_rank_delay" ref="a88f33889677c076f1e5fdd8ce7cabc4d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#a88f33889677c076f1e5fdd8ce7cabc4d">m_rank_rank_delay</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a734869c8bd10780ed7f61eadb638f30c"></a><!-- doxytag: member="RubyMemoryControl::m_ranks_per_dimm" ref="a734869c8bd10780ed7f61eadb638f30c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#a734869c8bd10780ed7f61eadb638f30c">m_ranks_per_dimm</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a469ba8ed68dfdab637a67909cd7f494f"></a><!-- doxytag: member="RubyMemoryControl::m_read_write_delay" ref="a469ba8ed68dfdab637a67909cd7f494f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#a469ba8ed68dfdab637a67909cd7f494f">m_read_write_delay</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a93843e73be2e39683d2b6ce21c8a6298"></a><!-- doxytag: member="RubyMemoryControl::m_refresh_bank" ref="a93843e73be2e39683d2b6ce21c8a6298" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#a93843e73be2e39683d2b6ce21c8a6298">m_refresh_bank</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a11c845239e7ec76861ae230df7a575b2"></a><!-- doxytag: member="RubyMemoryControl::m_refresh_count" ref="a11c845239e7ec76861ae230df7a575b2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#a11c845239e7ec76861ae230df7a575b2">m_refresh_count</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab046d0568e576a3fd3e751aae694aa6c"></a><!-- doxytag: member="RubyMemoryControl::m_refresh_period" ref="ab046d0568e576a3fd3e751aae694aa6c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#ab046d0568e576a3fd3e751aae694aa6c">m_refresh_period</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ac226affdfdce1041cdc1adcea108d2d9"></a><!-- doxytag: member="RubyMemoryControl::m_refresh_period_system" ref="ac226affdfdce1041cdc1adcea108d2d9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#ac226affdfdce1041cdc1adcea108d2d9">m_refresh_period_system</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a6ff73bc35f01b71460125c8973fdcf7f"></a><!-- doxytag: member="RubyMemoryControl::m_response_queue" ref="a6ff73bc35f01b71460125c8973fdcf7f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1list.html">std::list</a>&lt;<a class="el" href="classMemoryNode.html">MemoryNode</a> *&gt; <a class="el" href="classRubyMemoryControl.html#a6ff73bc35f01b71460125c8973fdcf7f">m_response_queue</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae91016ac7543fa2d2e4fc5ba9748a134"></a><!-- doxytag: member="RubyMemoryControl::m_roundRobin" ref="ae91016ac7543fa2d2e4fc5ba9748a134" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#ae91016ac7543fa2d2e4fc5ba9748a134">m_roundRobin</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a278ccfdcd299cca636085e30b57bd77b"></a><!-- doxytag: member="RubyMemoryControl::m_tFaw" ref="a278ccfdcd299cca636085e30b57bd77b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#a278ccfdcd299cca636085e30b57bd77b">m_tFaw</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8399af800996db69e2cb64997f0123f4"></a><!-- doxytag: member="RubyMemoryControl::m_tfaw_count" ref="a8399af800996db69e2cb64997f0123f4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int* <a class="el" href="classRubyMemoryControl.html#a8399af800996db69e2cb64997f0123f4">m_tfaw_count</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9dd1941af4ea267b9f8e05a54c70d713"></a><!-- doxytag: member="RubyMemoryControl::m_tfaw_shift" ref="a9dd1941af4ea267b9f8e05a54c70d713" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="TypeDefines_8hh.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>* <a class="el" href="classRubyMemoryControl.html#a9dd1941af4ea267b9f8e05a54c70d713">m_tfaw_shift</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad36478de555240b1cd80c5b0aa4b00cc"></a><!-- doxytag: member="RubyMemoryControl::m_total_banks" ref="ad36478de555240b1cd80c5b0aa4b00cc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#ad36478de555240b1cd80c5b0aa4b00cc">m_total_banks</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae56d0b2636a76e0d08eb304c9845540c"></a><!-- doxytag: member="RubyMemoryControl::m_total_ranks" ref="ae56d0b2636a76e0d08eb304c9845540c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRubyMemoryControl.html#ae56d0b2636a76e0d08eb304c9845540c">m_total_ranks</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>mem/ruby/system/<a class="el" href="RubyMemoryControl_8hh_source.html">RubyMemoryControl.hh</a></li>
<li>mem/ruby/system/<a class="el" href="RubyMemoryControl_8cc.html">RubyMemoryControl.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
