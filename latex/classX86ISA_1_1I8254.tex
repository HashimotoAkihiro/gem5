\hypertarget{classX86ISA_1_1I8254}{
\section{クラス I8254}
\label{classX86ISA_1_1I8254}\index{X86ISA::I8254@{X86ISA::I8254}}
}


{\ttfamily \#include $<$i8254.hh$>$}I8254に対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=7cm]{classX86ISA_1_1I8254}
\end{center}
\end{figure}
\subsection*{構成}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classX86ISA_1_1I8254_1_1X86Intel8254Timer}{X86Intel8254Timer}
\end{DoxyCompactItemize}
\subsection*{Public 型}
\begin{DoxyCompactItemize}
\item 
typedef I8254Params \hyperlink{classX86ISA_1_1I8254_aed9bbf7fa13cb3e5f1c7805d04bffb78}{Params}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
const \hyperlink{classX86ISA_1_1I8254_aed9bbf7fa13cb3e5f1c7805d04bffb78}{Params} $\ast$ \hyperlink{classX86ISA_1_1I8254_acd3c3feb78ae7a8f88fe0f110a718dff}{params} () const 
\item 
\hyperlink{classX86ISA_1_1I8254_a05e554921bd92c71c55863df9cea8564}{I8254} (\hyperlink{classX86ISA_1_1I8254_aed9bbf7fa13cb3e5f1c7805d04bffb78}{Params} $\ast$\hyperlink{namespaceX86ISA_af675c1d542a25b96e11164b80809a856}{p})
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classX86ISA_1_1I8254_a613ec7d5e1ec64f8d21fec78ae8e568e}{read} (\hyperlink{classPacket}{PacketPtr} pkt)
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classX86ISA_1_1I8254_a4cefab464e72b5dd42c003a0a4341802}{write} (\hyperlink{classPacket}{PacketPtr} pkt)
\item 
bool \hyperlink{classX86ISA_1_1I8254_ab3ebc39ad58dd927f9da6958c45203a2}{outputHigh} (unsigned int num)
\item 
uint8\_\-t \hyperlink{classX86ISA_1_1I8254_a4794298e519275c38d6d8a8f169fd53b}{readCounter} (unsigned int num)
\item 
void \hyperlink{classX86ISA_1_1I8254_aa5af88439002d1cfeb0189113dfe4627}{writeCounter} (unsigned int num, const uint8\_\-t data)
\item 
void \hyperlink{classX86ISA_1_1I8254_a7267b713581b4b13f0c1257103732da1}{writeControl} (uint8\_\-t \hyperlink{namespaceX86ISA_ae13bf1250853ff6b72aabe3c79b587cc}{val})
\item 
virtual void \hyperlink{classX86ISA_1_1I8254_a53e036786d17361be4c7320d39c99b84}{serialize} (std::ostream \&\hyperlink{namespaceX86ISA_a6b6e6ba763e7eaf46ac5b6372ca98d30}{os})
\item 
virtual void \hyperlink{classX86ISA_1_1I8254_af22e5d6d660b97db37003ac61ac4ee49}{unserialize} (\hyperlink{classCheckpoint}{Checkpoint} $\ast$cp, const std::string \&section)
\end{DoxyCompactItemize}
\subsection*{Protected メソッド}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classX86ISA_1_1I8254_abe266c027cb8a03b2e1e2f08d9398679}{counterInterrupt} (unsigned int num)
\end{DoxyCompactItemize}
\subsection*{Protected 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classX86ISA_1_1I8254_ac8d8966078cc047949fd1bca8feb21b6}{latency}
\item 
\hyperlink{classX86ISA_1_1I8254_1_1X86Intel8254Timer}{X86Intel8254Timer} \hyperlink{classX86ISA_1_1I8254_a5559b5258c033557490373c27bd673cc}{pit}
\item 
\hyperlink{classX86ISA_1_1IntSourcePin}{IntSourcePin} $\ast$ \hyperlink{classX86ISA_1_1I8254_abc04d372f6b8e69a72f4c25db91ede99}{intPin}
\end{DoxyCompactItemize}


\subsection{型定義}
\hypertarget{classX86ISA_1_1I8254_aed9bbf7fa13cb3e5f1c7805d04bffb78}{
\index{X86ISA::I8254@{X86ISA::I8254}!Params@{Params}}
\index{Params@{Params}!X86ISA::I8254@{X86ISA::I8254}}
\subsubsection[{Params}]{\setlength{\rightskip}{0pt plus 5cm}typedef I8254Params {\bf Params}}}
\label{classX86ISA_1_1I8254_aed9bbf7fa13cb3e5f1c7805d04bffb78}


\hyperlink{classBasicPioDevice_a2845515ac6467f10540747053c8a0449}{BasicPioDevice}を再定義しています。

\subsection{コンストラクタとデストラクタ}
\hypertarget{classX86ISA_1_1I8254_a05e554921bd92c71c55863df9cea8564}{
\index{X86ISA::I8254@{X86ISA::I8254}!I8254@{I8254}}
\index{I8254@{I8254}!X86ISA::I8254@{X86ISA::I8254}}
\subsubsection[{I8254}]{\setlength{\rightskip}{0pt plus 5cm}{\bf I8254} ({\bf Params} $\ast$ {\em p})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classX86ISA_1_1I8254_a05e554921bd92c71c55863df9cea8564}



\begin{DoxyCode}
80                      : BasicPioDevice(p, 4), latency(p->pio_latency),
81             pit(p->name, this), intPin(p->int_pin)
82     {
83     }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classX86ISA_1_1I8254_abe266c027cb8a03b2e1e2f08d9398679}{
\index{X86ISA::I8254@{X86ISA::I8254}!counterInterrupt@{counterInterrupt}}
\index{counterInterrupt@{counterInterrupt}!X86ISA::I8254@{X86ISA::I8254}}
\subsubsection[{counterInterrupt}]{\setlength{\rightskip}{0pt plus 5cm}void counterInterrupt (unsigned int {\em num})\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classX86ISA_1_1I8254_abe266c027cb8a03b2e1e2f08d9398679}



\begin{DoxyCode}
39 {
40     DPRINTF(I8254, "Interrupt from counter %d.\n", num);
41     if (num == 0) {
42         intPin->raise();
43         //XXX This is a hack.
44         intPin->lower();
45     }
46 }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1I8254_ab3ebc39ad58dd927f9da6958c45203a2}{
\index{X86ISA::I8254@{X86ISA::I8254}!outputHigh@{outputHigh}}
\index{outputHigh@{outputHigh}!X86ISA::I8254@{X86ISA::I8254}}
\subsubsection[{outputHigh}]{\setlength{\rightskip}{0pt plus 5cm}bool outputHigh (unsigned int {\em num})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classX86ISA_1_1I8254_ab3ebc39ad58dd927f9da6958c45203a2}



\begin{DoxyCode}
90     {
91         return pit.outputHigh(num);
92     }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1I8254_acd3c3feb78ae7a8f88fe0f110a718dff}{
\index{X86ISA::I8254@{X86ISA::I8254}!params@{params}}
\index{params@{params}!X86ISA::I8254@{X86ISA::I8254}}
\subsubsection[{params}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Params}$\ast$ params () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classX86ISA_1_1I8254_acd3c3feb78ae7a8f88fe0f110a718dff}


\hyperlink{classBasicPioDevice_acd3c3feb78ae7a8f88fe0f110a718dff}{BasicPioDevice}を再定義しています。


\begin{DoxyCode}
76     {
77         return dynamic_cast<const Params *>(_params);
78     }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1I8254_a613ec7d5e1ec64f8d21fec78ae8e568e}{
\index{X86ISA::I8254@{X86ISA::I8254}!read@{read}}
\index{read@{read}!X86ISA::I8254@{X86ISA::I8254}}
\subsubsection[{read}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} read ({\bf PacketPtr} {\em pkt})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classX86ISA_1_1I8254_a613ec7d5e1ec64f8d21fec78ae8e568e}
Pure virtual function that the device must implement. Called when a read command is recieved by the port. 
\begin{DoxyParams}{引数}
\item[{\em pkt}]\hyperlink{classPacket}{Packet} describing this request \end{DoxyParams}
\begin{DoxyReturn}{戻り値}
number of ticks it took to complete 
\end{DoxyReturn}


\hyperlink{classPioDevice_a842312590432036092c422c87a442358}{PioDevice}を実装しています。


\begin{DoxyCode}
50 {
51     assert(pkt->getSize() == 1);
52     Addr offset = pkt->getAddr() - pioAddr;
53     if (offset < 3) {
54         pkt->set(pit.readCounter(offset));
55     } else if (offset == 3) {
56         pkt->set(uint8_t(-1));
57     } else {
58         panic("Read from undefined i8254 register.\n");
59     }
60     pkt->makeAtomicResponse();
61     return latency;
62 }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1I8254_a4794298e519275c38d6d8a8f169fd53b}{
\index{X86ISA::I8254@{X86ISA::I8254}!readCounter@{readCounter}}
\index{readCounter@{readCounter}!X86ISA::I8254@{X86ISA::I8254}}
\subsubsection[{readCounter}]{\setlength{\rightskip}{0pt plus 5cm}uint8\_\-t readCounter (unsigned int {\em num})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classX86ISA_1_1I8254_a4794298e519275c38d6d8a8f169fd53b}



\begin{DoxyCode}
96     {
97         return pit.readCounter(num);
98     }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1I8254_a53e036786d17361be4c7320d39c99b84}{
\index{X86ISA::I8254@{X86ISA::I8254}!serialize@{serialize}}
\index{serialize@{serialize}!X86ISA::I8254@{X86ISA::I8254}}
\subsubsection[{serialize}]{\setlength{\rightskip}{0pt plus 5cm}void serialize (std::ostream \& {\em os})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classX86ISA_1_1I8254_a53e036786d17361be4c7320d39c99b84}


\hyperlink{classSerializable_ad6272f80ae37e8331e3969b3f072a801}{Serializable}を再定義しています。


\begin{DoxyCode}
82 {
83     pit.serialize("pit", os);
84 }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1I8254_af22e5d6d660b97db37003ac61ac4ee49}{
\index{X86ISA::I8254@{X86ISA::I8254}!unserialize@{unserialize}}
\index{unserialize@{unserialize}!X86ISA::I8254@{X86ISA::I8254}}
\subsubsection[{unserialize}]{\setlength{\rightskip}{0pt plus 5cm}void unserialize ({\bf Checkpoint} $\ast$ {\em cp}, \/  const std::string \& {\em section})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classX86ISA_1_1I8254_af22e5d6d660b97db37003ac61ac4ee49}


\hyperlink{classSerializable_af100c4e9feabf3cd918619c88c718387}{Serializable}を再定義しています。


\begin{DoxyCode}
88 {
89     pit.unserialize("pit", cp, section);
90 }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1I8254_a4cefab464e72b5dd42c003a0a4341802}{
\index{X86ISA::I8254@{X86ISA::I8254}!write@{write}}
\index{write@{write}!X86ISA::I8254@{X86ISA::I8254}}
\subsubsection[{write}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} write ({\bf PacketPtr} {\em pkt})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classX86ISA_1_1I8254_a4cefab464e72b5dd42c003a0a4341802}
Pure virtual function that the device must implement. Called when a write command is recieved by the port. 
\begin{DoxyParams}{引数}
\item[{\em pkt}]\hyperlink{classPacket}{Packet} describing this request \end{DoxyParams}
\begin{DoxyReturn}{戻り値}
number of ticks it took to complete 
\end{DoxyReturn}


\hyperlink{classPioDevice_afe8371668d023bb2516b286e5e399b6f}{PioDevice}を実装しています。


\begin{DoxyCode}
66 {
67     assert(pkt->getSize() == 1);
68     Addr offset = pkt->getAddr() - pioAddr;
69     if (offset < 3) {
70         pit.writeCounter(offset, pkt->get<uint8_t>());
71     } else if (offset == 3) {
72         pit.writeControl(pkt->get<uint8_t>());
73     } else {
74         panic("Write to undefined i8254 register.\n");
75     }
76     pkt->makeAtomicResponse();
77     return latency;
78 }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1I8254_a7267b713581b4b13f0c1257103732da1}{
\index{X86ISA::I8254@{X86ISA::I8254}!writeControl@{writeControl}}
\index{writeControl@{writeControl}!X86ISA::I8254@{X86ISA::I8254}}
\subsubsection[{writeControl}]{\setlength{\rightskip}{0pt plus 5cm}void writeControl (uint8\_\-t {\em val})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classX86ISA_1_1I8254_a7267b713581b4b13f0c1257103732da1}



\begin{DoxyCode}
108     {
109         pit.writeControl(val);
110     }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1I8254_aa5af88439002d1cfeb0189113dfe4627}{
\index{X86ISA::I8254@{X86ISA::I8254}!writeCounter@{writeCounter}}
\index{writeCounter@{writeCounter}!X86ISA::I8254@{X86ISA::I8254}}
\subsubsection[{writeCounter}]{\setlength{\rightskip}{0pt plus 5cm}void writeCounter (unsigned int {\em num}, \/  const uint8\_\-t {\em data})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classX86ISA_1_1I8254_aa5af88439002d1cfeb0189113dfe4627}



\begin{DoxyCode}
102     {
103         pit.writeCounter(num, data);
104     }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classX86ISA_1_1I8254_abc04d372f6b8e69a72f4c25db91ede99}{
\index{X86ISA::I8254@{X86ISA::I8254}!intPin@{intPin}}
\index{intPin@{intPin}!X86ISA::I8254@{X86ISA::I8254}}
\subsubsection[{intPin}]{\setlength{\rightskip}{0pt plus 5cm}{\bf IntSourcePin}$\ast$ {\bf intPin}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classX86ISA_1_1I8254_abc04d372f6b8e69a72f4c25db91ede99}
\hypertarget{classX86ISA_1_1I8254_ac8d8966078cc047949fd1bca8feb21b6}{
\index{X86ISA::I8254@{X86ISA::I8254}!latency@{latency}}
\index{latency@{latency}!X86ISA::I8254@{X86ISA::I8254}}
\subsubsection[{latency}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} {\bf latency}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classX86ISA_1_1I8254_ac8d8966078cc047949fd1bca8feb21b6}
\hypertarget{classX86ISA_1_1I8254_a5559b5258c033557490373c27bd673cc}{
\index{X86ISA::I8254@{X86ISA::I8254}!pit@{pit}}
\index{pit@{pit}!X86ISA::I8254@{X86ISA::I8254}}
\subsubsection[{pit}]{\setlength{\rightskip}{0pt plus 5cm}{\bf X86Intel8254Timer} {\bf pit}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classX86ISA_1_1I8254_a5559b5258c033557490373c27bd673cc}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
dev/x86/\hyperlink{i8254_8hh}{i8254.hh}\item 
dev/x86/\hyperlink{i8254_8cc}{i8254.cc}\end{DoxyCompactItemize}
