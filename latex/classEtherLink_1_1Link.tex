\hypertarget{classEtherLink_1_1Link}{
\section{クラス Link}
\label{classEtherLink_1_1Link}\index{EtherLink::Link@{EtherLink::Link}}
}


{\ttfamily \#include $<$etherlink.hh$>$}\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classEtherLink_1_1Link_a008072dca8221a9e8633f7a692bf8529}{Link} (const std::string \&name, \hyperlink{classEtherLink}{EtherLink} $\ast$p, int num, double rate, \hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} delay, \hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} delay\_\-var, \hyperlink{classEtherDump}{EtherDump} $\ast$\hyperlink{classEtherLink_1_1Link_ad5a0f1baca11c9598fdb6996bd03ac8c}{dump})
\item 
\hyperlink{classEtherLink_1_1Link_a2b6c85429ae38a687fbffb017cc773b9}{$\sim$Link} ()
\item 
const std::string \hyperlink{classEtherLink_1_1Link_a6490f765a824ced1cc94979609fe7e07}{name} () const 
\item 
bool \hyperlink{classEtherLink_1_1Link_ab4dfde754c39017408feef7294770646}{busy} () const 
\item 
bool \hyperlink{classEtherLink_1_1Link_a740c6672cf526da9b2acc1f438ac11c7}{transmit} (\hyperlink{classRefCountingPtr}{EthPacketPtr} \hyperlink{classEtherLink_1_1Link_a8bd0d3f7eb9e8d7189c7027028a5fac0}{packet})
\item 
void \hyperlink{classEtherLink_1_1Link_a47597f43046767553e7abc1b22851548}{setTxInt} (\hyperlink{classEtherLink_1_1Interface}{Interface} $\ast$i)
\item 
void \hyperlink{classEtherLink_1_1Link_a26ca203034b85f4ca99fae85c5cf5819}{setRxInt} (\hyperlink{classEtherLink_1_1Interface}{Interface} $\ast$i)
\item 
void \hyperlink{classEtherLink_1_1Link_ab4138b21b48e3371a8e20df72b675a88}{serialize} (const std::string \&base, std::ostream \&os)
\item 
void \hyperlink{classEtherLink_1_1Link_a147c320e3d6506edf5587a40cd8e430d}{unserialize} (const std::string \&base, \hyperlink{classCheckpoint}{Checkpoint} $\ast$cp, const std::string \&section)
\end{DoxyCompactItemize}
\subsection*{Protected 型}
\begin{DoxyCompactItemize}
\item 
typedef \hyperlink{classEventWrapper}{EventWrapper}$<$ \hyperlink{classEtherLink_1_1Link}{Link},\&Link::txDone $>$ \hyperlink{classEtherLink_1_1Link_ad78ef1129ed0f85428598d01a78019f3}{DoneEvent}
\end{DoxyCompactItemize}
\subsection*{Protected メソッド}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classEtherLink_1_1Link_ac06188e141ad966d9d760cfcfc258587}{txDone} ()
\item 
void \hyperlink{classEtherLink_1_1Link_adbafd80b139f69d1879a399e64f4dda2}{txComplete} (\hyperlink{classRefCountingPtr}{EthPacketPtr} \hyperlink{classEtherLink_1_1Link_a8bd0d3f7eb9e8d7189c7027028a5fac0}{packet})
\end{DoxyCompactItemize}
\subsection*{Protected 変数}
\begin{DoxyCompactItemize}
\item 
std::string \hyperlink{classEtherLink_1_1Link_acdd07b78b47375ca2a51a7a956b1697f}{objName}
\item 
\hyperlink{classEtherLink}{EtherLink} $\ast$ \hyperlink{classEtherLink_1_1Link_a1fab3300fd90e77f99da75330c48ea73}{parent}
\item 
int \hyperlink{classEtherLink_1_1Link_a7106e2abc437ad981830d14176d15f09}{number}
\item 
\hyperlink{classEtherLink_1_1Interface}{Interface} $\ast$ \hyperlink{classEtherLink_1_1Link_a2bd49a849a4ba011c246866c28d079c2}{txint}
\item 
\hyperlink{classEtherLink_1_1Interface}{Interface} $\ast$ \hyperlink{classEtherLink_1_1Link_a7af3399cea116d5b38428072fe507c10}{rxint}
\item 
double \hyperlink{classEtherLink_1_1Link_ab03ddf4a7f12da61f07e2e0c644ef06c}{ticksPerByte}
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classEtherLink_1_1Link_aa852d273392d09176609c253d66e4848}{linkDelay}
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classEtherLink_1_1Link_a8a7e67d4dbdb187bf31e657e093a27a6}{delayVar}
\item 
\hyperlink{classEtherDump}{EtherDump} $\ast$ \hyperlink{classEtherLink_1_1Link_ad5a0f1baca11c9598fdb6996bd03ac8c}{dump}
\item 
\hyperlink{classRefCountingPtr}{EthPacketPtr} \hyperlink{classEtherLink_1_1Link_a8bd0d3f7eb9e8d7189c7027028a5fac0}{packet}
\item 
\hyperlink{classEventWrapper}{DoneEvent} \hyperlink{classEtherLink_1_1Link_a26b1662898553a34788c05e358c985ad}{doneEvent}
\end{DoxyCompactItemize}
\subsection*{フレンド}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classEtherLink_1_1Link_ae08a8e78387040792a618717ab8c6332}{LinkDelayEvent}
\item 
void \hyperlink{classEtherLink_1_1Link_a0342b65d8e630110e69aa6fe485588d9}{DoneEvent::process} ()
\end{DoxyCompactItemize}


\subsection{型定義}
\hypertarget{classEtherLink_1_1Link_ad78ef1129ed0f85428598d01a78019f3}{
\index{EtherLink::Link@{EtherLink::Link}!DoneEvent@{DoneEvent}}
\index{DoneEvent@{DoneEvent}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{DoneEvent}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf EventWrapper}$<${\bf Link}, \&Link::txDone$>$ {\bf DoneEvent}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classEtherLink_1_1Link_ad78ef1129ed0f85428598d01a78019f3}


\subsection{コンストラクタとデストラクタ}
\hypertarget{classEtherLink_1_1Link_a008072dca8221a9e8633f7a692bf8529}{
\index{EtherLink::Link@{EtherLink::Link}!Link@{Link}}
\index{Link@{Link}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{Link}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Link} (const std::string \& {\em name}, \/  {\bf EtherLink} $\ast$ {\em p}, \/  int {\em num}, \/  double {\em rate}, \/  {\bf Tick} {\em delay}, \/  {\bf Tick} {\em delay\_\-var}, \/  {\bf EtherDump} $\ast$ {\em dump})}}
\label{classEtherLink_1_1Link_a008072dca8221a9e8633f7a692bf8529}
\hypertarget{classEtherLink_1_1Link_a2b6c85429ae38a687fbffb017cc773b9}{
\index{EtherLink::Link@{EtherLink::Link}!$\sim$Link@{$\sim$Link}}
\index{$\sim$Link@{$\sim$Link}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{$\sim$Link}]{\setlength{\rightskip}{0pt plus 5cm}$\sim${\bf Link} ()\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classEtherLink_1_1Link_a2b6c85429ae38a687fbffb017cc773b9}



\begin{DoxyCode}
92 {}
\end{DoxyCode}


\subsection{関数}
\hypertarget{classEtherLink_1_1Link_ab4dfde754c39017408feef7294770646}{
\index{EtherLink::Link@{EtherLink::Link}!busy@{busy}}
\index{busy@{busy}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{busy}]{\setlength{\rightskip}{0pt plus 5cm}bool busy () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classEtherLink_1_1Link_ab4dfde754c39017408feef7294770646}



\begin{DoxyCode}
96 { return (bool)packet; }
\end{DoxyCode}
\hypertarget{classEtherLink_1_1Link_a6490f765a824ced1cc94979609fe7e07}{
\index{EtherLink::Link@{EtherLink::Link}!name@{name}}
\index{name@{name}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{name}]{\setlength{\rightskip}{0pt plus 5cm}const std::string name () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classEtherLink_1_1Link_a6490f765a824ced1cc94979609fe7e07}



\begin{DoxyCode}
94 { return objName; }
\end{DoxyCode}
\hypertarget{classEtherLink_1_1Link_ab4138b21b48e3371a8e20df72b675a88}{
\index{EtherLink::Link@{EtherLink::Link}!serialize@{serialize}}
\index{serialize@{serialize}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{serialize}]{\setlength{\rightskip}{0pt plus 5cm}void serialize (const std::string \& {\em base}, \/  std::ostream \& {\em os})}}
\label{classEtherLink_1_1Link_ab4138b21b48e3371a8e20df72b675a88}
\hypertarget{classEtherLink_1_1Link_a26ca203034b85f4ca99fae85c5cf5819}{
\index{EtherLink::Link@{EtherLink::Link}!setRxInt@{setRxInt}}
\index{setRxInt@{setRxInt}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{setRxInt}]{\setlength{\rightskip}{0pt plus 5cm}void setRxInt ({\bf Interface} $\ast$ {\em i})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classEtherLink_1_1Link_a26ca203034b85f4ca99fae85c5cf5819}



\begin{DoxyCode}
100 { assert(!rxint); rxint = i; }
\end{DoxyCode}
\hypertarget{classEtherLink_1_1Link_a47597f43046767553e7abc1b22851548}{
\index{EtherLink::Link@{EtherLink::Link}!setTxInt@{setTxInt}}
\index{setTxInt@{setTxInt}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{setTxInt}]{\setlength{\rightskip}{0pt plus 5cm}void setTxInt ({\bf Interface} $\ast$ {\em i})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classEtherLink_1_1Link_a47597f43046767553e7abc1b22851548}



\begin{DoxyCode}
99 { assert(!txint); txint = i; }
\end{DoxyCode}
\hypertarget{classEtherLink_1_1Link_a740c6672cf526da9b2acc1f438ac11c7}{
\index{EtherLink::Link@{EtherLink::Link}!transmit@{transmit}}
\index{transmit@{transmit}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{transmit}]{\setlength{\rightskip}{0pt plus 5cm}bool transmit ({\bf EthPacketPtr} {\em packet})}}
\label{classEtherLink_1_1Link_a740c6672cf526da9b2acc1f438ac11c7}



\begin{DoxyCode}
174 {
175     if (busy()) {
176         DPRINTF(Ethernet, "packet not sent, link busy\n");
177         return false;
178     }
179 
180     DPRINTF(Ethernet, "packet sent: len=%d\n", pkt->length);
181     DDUMP(EthernetData, pkt->data, pkt->length);
182 
183     packet = pkt;
184     Tick delay = (Tick)ceil(((double)pkt->length * ticksPerByte) + 1.0);
185     if (delayVar != 0)
186         delay += random_mt.random<Tick>(0, delayVar);
187 
188     DPRINTF(Ethernet, "scheduling packet: delay=%d, (rate=%f)\n",
189             delay, ticksPerByte);
190     parent->schedule(doneEvent, curTick() + delay);
191 
192     return true;
193 }
\end{DoxyCode}
\hypertarget{classEtherLink_1_1Link_adbafd80b139f69d1879a399e64f4dda2}{
\index{EtherLink::Link@{EtherLink::Link}!txComplete@{txComplete}}
\index{txComplete@{txComplete}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{txComplete}]{\setlength{\rightskip}{0pt plus 5cm}void txComplete ({\bf EthPacketPtr} {\em packet})\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classEtherLink_1_1Link_adbafd80b139f69d1879a399e64f4dda2}



\begin{DoxyCode}
125 {
126     DPRINTF(Ethernet, "packet received: len=%d\n", packet->length);
127     DDUMP(EthernetData, packet->data, packet->length);
128     rxint->sendPacket(packet);
129 }
\end{DoxyCode}
\hypertarget{classEtherLink_1_1Link_ac06188e141ad966d9d760cfcfc258587}{
\index{EtherLink::Link@{EtherLink::Link}!txDone@{txDone}}
\index{txDone@{txDone}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{txDone}]{\setlength{\rightskip}{0pt plus 5cm}void txDone ()\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classEtherLink_1_1Link_ac06188e141ad966d9d760cfcfc258587}



\begin{DoxyCode}
154 {
155     if (dump)
156         dump->dump(packet);
157 
158     if (linkDelay > 0) {
159         DPRINTF(Ethernet, "packet delayed: delay=%d\n", linkDelay);
160         Event *event = new LinkDelayEvent(this, packet);
161         parent->schedule(event, curTick() + linkDelay);
162     } else {
163         txComplete(packet);
164     }
165 
166     packet = 0;
167     assert(!busy());
168 
169     txint->sendDone();
170 }
\end{DoxyCode}
\hypertarget{classEtherLink_1_1Link_a147c320e3d6506edf5587a40cd8e430d}{
\index{EtherLink::Link@{EtherLink::Link}!unserialize@{unserialize}}
\index{unserialize@{unserialize}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{unserialize}]{\setlength{\rightskip}{0pt plus 5cm}void unserialize (const std::string \& {\em base}, \/  {\bf Checkpoint} $\ast$ {\em cp}, \/  const std::string \& {\em section})}}
\label{classEtherLink_1_1Link_a147c320e3d6506edf5587a40cd8e430d}


\subsection{フレンドと関連する関数}
\hypertarget{classEtherLink_1_1Link_a0342b65d8e630110e69aa6fe485588d9}{
\index{EtherLink::Link@{EtherLink::Link}!DoneEvent::process@{DoneEvent::process}}
\index{DoneEvent::process@{DoneEvent::process}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{DoneEvent::process}]{\setlength{\rightskip}{0pt plus 5cm}void DoneEvent::process ()\hspace{0.3cm}{\ttfamily  \mbox{[}friend\mbox{]}}}}
\label{classEtherLink_1_1Link_a0342b65d8e630110e69aa6fe485588d9}
\hypertarget{classEtherLink_1_1Link_ae08a8e78387040792a618717ab8c6332}{
\index{EtherLink::Link@{EtherLink::Link}!LinkDelayEvent@{LinkDelayEvent}}
\index{LinkDelayEvent@{LinkDelayEvent}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{LinkDelayEvent}]{\setlength{\rightskip}{0pt plus 5cm}friend class {\bf LinkDelayEvent}\hspace{0.3cm}{\ttfamily  \mbox{[}friend\mbox{]}}}}
\label{classEtherLink_1_1Link_ae08a8e78387040792a618717ab8c6332}


\subsection{変数}
\hypertarget{classEtherLink_1_1Link_a8a7e67d4dbdb187bf31e657e093a27a6}{
\index{EtherLink::Link@{EtherLink::Link}!delayVar@{delayVar}}
\index{delayVar@{delayVar}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{delayVar}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} {\bf delayVar}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classEtherLink_1_1Link_a8a7e67d4dbdb187bf31e657e093a27a6}
\hypertarget{classEtherLink_1_1Link_a26b1662898553a34788c05e358c985ad}{
\index{EtherLink::Link@{EtherLink::Link}!doneEvent@{doneEvent}}
\index{doneEvent@{doneEvent}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{doneEvent}]{\setlength{\rightskip}{0pt plus 5cm}{\bf DoneEvent} {\bf doneEvent}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classEtherLink_1_1Link_a26b1662898553a34788c05e358c985ad}
\hypertarget{classEtherLink_1_1Link_ad5a0f1baca11c9598fdb6996bd03ac8c}{
\index{EtherLink::Link@{EtherLink::Link}!dump@{dump}}
\index{dump@{dump}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{dump}]{\setlength{\rightskip}{0pt plus 5cm}{\bf EtherDump}$\ast$ {\bf dump}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classEtherLink_1_1Link_ad5a0f1baca11c9598fdb6996bd03ac8c}
\hypertarget{classEtherLink_1_1Link_aa852d273392d09176609c253d66e4848}{
\index{EtherLink::Link@{EtherLink::Link}!linkDelay@{linkDelay}}
\index{linkDelay@{linkDelay}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{linkDelay}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} {\bf linkDelay}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classEtherLink_1_1Link_aa852d273392d09176609c253d66e4848}
\hypertarget{classEtherLink_1_1Link_a7106e2abc437ad981830d14176d15f09}{
\index{EtherLink::Link@{EtherLink::Link}!number@{number}}
\index{number@{number}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{number}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf number}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classEtherLink_1_1Link_a7106e2abc437ad981830d14176d15f09}
\hypertarget{classEtherLink_1_1Link_acdd07b78b47375ca2a51a7a956b1697f}{
\index{EtherLink::Link@{EtherLink::Link}!objName@{objName}}
\index{objName@{objName}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{objName}]{\setlength{\rightskip}{0pt plus 5cm}std::string {\bf objName}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classEtherLink_1_1Link_acdd07b78b47375ca2a51a7a956b1697f}
\hypertarget{classEtherLink_1_1Link_a8bd0d3f7eb9e8d7189c7027028a5fac0}{
\index{EtherLink::Link@{EtherLink::Link}!packet@{packet}}
\index{packet@{packet}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{packet}]{\setlength{\rightskip}{0pt plus 5cm}{\bf EthPacketPtr} {\bf packet}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classEtherLink_1_1Link_a8bd0d3f7eb9e8d7189c7027028a5fac0}
\hypertarget{classEtherLink_1_1Link_a1fab3300fd90e77f99da75330c48ea73}{
\index{EtherLink::Link@{EtherLink::Link}!parent@{parent}}
\index{parent@{parent}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{parent}]{\setlength{\rightskip}{0pt plus 5cm}{\bf EtherLink}$\ast$ {\bf parent}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classEtherLink_1_1Link_a1fab3300fd90e77f99da75330c48ea73}
\hypertarget{classEtherLink_1_1Link_a7af3399cea116d5b38428072fe507c10}{
\index{EtherLink::Link@{EtherLink::Link}!rxint@{rxint}}
\index{rxint@{rxint}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{rxint}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Interface}$\ast$ {\bf rxint}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classEtherLink_1_1Link_a7af3399cea116d5b38428072fe507c10}
\hypertarget{classEtherLink_1_1Link_ab03ddf4a7f12da61f07e2e0c644ef06c}{
\index{EtherLink::Link@{EtherLink::Link}!ticksPerByte@{ticksPerByte}}
\index{ticksPerByte@{ticksPerByte}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{ticksPerByte}]{\setlength{\rightskip}{0pt plus 5cm}double {\bf ticksPerByte}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classEtherLink_1_1Link_ab03ddf4a7f12da61f07e2e0c644ef06c}
\hypertarget{classEtherLink_1_1Link_a2bd49a849a4ba011c246866c28d079c2}{
\index{EtherLink::Link@{EtherLink::Link}!txint@{txint}}
\index{txint@{txint}!EtherLink::Link@{EtherLink::Link}}
\subsubsection[{txint}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Interface}$\ast$ {\bf txint}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classEtherLink_1_1Link_a2bd49a849a4ba011c246866c28d079c2}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
dev/\hyperlink{etherlink_8hh}{etherlink.hh}\item 
dev/\hyperlink{etherlink_8cc}{etherlink.cc}\end{DoxyCompactItemize}
