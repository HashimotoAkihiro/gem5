<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス BaseBus</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>クラス BaseBus</h1><!-- doxytag: class="BaseBus" --><!-- doxytag: inherits="MemObject" -->
<p><code>#include &lt;<a class="el" href="bus_8hh_source.html">bus.hh</a>&gt;</code></p>
<div class="dynheader">
BaseBusに対する継承グラフ</div>
<div class="dynsection">
 <div class="center">
  <img src="classBaseBus.gif" usemap="#BaseBus_map" alt=""/>
  <map id="BaseBus_map" name="BaseBus_map">
<area href="classMemObject.html" alt="MemObject" shape="rect" coords="116,168,222,192"/>
<area href="classClockedObject.html" alt="ClockedObject" shape="rect" coords="116,112,222,136"/>
<area href="classSimObject.html" alt="SimObject" shape="rect" coords="116,56,222,80"/>
<area href="classEventManager.html" alt="EventManager" shape="rect" coords="0,0,106,24"/>
<area href="classSerializable.html" alt="Serializable" shape="rect" coords="116,0,222,24"/>
<area href="classDrainable.html" alt="Drainable" shape="rect" coords="232,0,338,24"/>
<area href="classCoherentBus.html" alt="CoherentBus" shape="rect" coords="58,280,164,304"/>
<area href="classNoncoherentBus.html" alt="NoncoherentBus" shape="rect" coords="174,280,280,304"/>
</map>
 </div>
</div>

<p><a href="classBaseBus-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>構成</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus_1_1Layer.html">Layer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBaseBus_1_1PortCache.html">PortCache</a></td></tr>
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#a02fd73d861ef2e4aabb38c0c9ff82947">init</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBaseMasterPort.html">BaseMasterPort</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#adc4e675e51defbdd1e354dac729d0703">getMasterPort</a> (const std::string &amp;if_name, <a class="el" href="base_2types_8hh.html#acef4d7d41cb21fdc252e20c04cd7bb8e">PortID</a> idx=<a class="el" href="base_2types_8hh.html#a65bf40f138cf863f0c5e2d8ca1144126">InvalidPortID</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBaseSlavePort.html">BaseSlavePort</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#ac918a145092d7514ebc6dbd952dceafb">getSlavePort</a> (const std::string &amp;if_name, <a class="el" href="base_2types_8hh.html#acef4d7d41cb21fdc252e20c04cd7bb8e">PortID</a> idx=<a class="el" href="base_2types_8hh.html#a65bf40f138cf863f0c5e2d8ca1144126">InvalidPortID</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#ac8c1510f7e1591e75a5c79b4b873f6b4">drain</a> (<a class="el" href="classDrainManager.html">DrainManager</a> *dm)=0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#a4dc637449366fcdfc4e764cdf12d9b11">regStats</a> ()</td></tr>
<tr><td colspan="2"><h2>Protected 型</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classAddrRangeMap.html">AddrRangeMap</a>&lt; <a class="el" href="base_2types_8hh.html#acef4d7d41cb21fdc252e20c04cd7bb8e">PortID</a> &gt;<br class="typebreak"/>
::iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#adedf751dd92daa01137db6149c004ea7">PortMapIter</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classAddrRangeMap.html">AddrRangeMap</a>&lt; <a class="el" href="base_2types_8hh.html#acef4d7d41cb21fdc252e20c04cd7bb8e">PortID</a> &gt;<br class="typebreak"/>
::const_iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#ad31cae2c5a87fd020ee036a5d94c7420">PortMapConstIter</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classstd_1_1vector.html">std::vector</a>&lt; <a class="el" href="classSlavePort.html">SlavePort</a> * &gt;<br class="typebreak"/>
::iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#a2b00f9fc9ba7e236c9757ea764cda19d">SlavePortIter</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classstd_1_1vector.html">std::vector</a><br class="typebreak"/>
&lt; <a class="el" href="classMasterPort.html">MasterPort</a> * &gt;::iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#a44e87d907bdab92a2169caddd28979f9">MasterPortIter</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classstd_1_1vector.html">std::vector</a>&lt; <a class="el" href="classSlavePort.html">SlavePort</a> * &gt;<br class="typebreak"/>
::const_iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#a4cfbb26aa06c3132b77227f45f39e224">SlavePortConstIter</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classstd_1_1vector.html">std::vector</a><br class="typebreak"/>
&lt; <a class="el" href="classMasterPort.html">MasterPort</a> * &gt;<br class="typebreak"/>
::const_iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#a19db300fe0038b9addfe69a31ef83b3d">MasterPortConstIter</a></td></tr>
<tr><td colspan="2"><h2>Protected メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#a85a99f51d8fef63034675b40df7eea7e">recvRangeChange</a> (<a class="el" href="base_2types_8hh.html#acef4d7d41cb21fdc252e20c04cd7bb8e">PortID</a> master_port_id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#acef4d7d41cb21fdc252e20c04cd7bb8e">PortID</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#a16872a256ea6eae168abc47d498841cb">findPort</a> (<a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> addr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#acef4d7d41cb21fdc252e20c04cd7bb8e">PortID</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#a3ec7557ff2dd8a9390bbf310b3352ce2">checkPortCache</a> (<a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> addr) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#a3b429b2b5fe74236299bcb556d2308e7">updatePortCache</a> (short id, const <a class="el" href="classAddrRange.html">AddrRange</a> &amp;range)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#a2b259c34a080563d0e03d5a1fec2cd7a">clearPortCache</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1list.html">AddrRangeList</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#a36cf113d5e5e091ebddb32306c098fae">getAddrRanges</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#a0e69bf0fe1b87ac59689c3807a942ee7">calcPacketTiming</a> (<a class="el" href="classPacket.html">PacketPtr</a> pkt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#aafbb881b411bf8ecd7696a6b6c9fbf5c">BaseBus</a> (const BaseBusParams *p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#a4c37180f5639002a5c75b2c1ec3c3ab4">~BaseBus</a> ()</td></tr>
<tr><td colspan="2"><h2>Protected 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classCycles.html">Cycles</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#ab9c87c91aa592a3542152117cdb99c9b">headerCycles</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#a4c2292bdfd51cf112bcde1ad3fa55ac4">width</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classAddrRangeMap.html">AddrRangeMap</a>&lt; <a class="el" href="base_2types_8hh.html#acef4d7d41cb21fdc252e20c04cd7bb8e">PortID</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#a81c901d8c13bd997dee7a12453bb29e9">portMap</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1list.html">AddrRangeList</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#ae980bda7663fbe15e79dd75a91d8448c">busRanges</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classAddrRange.html">AddrRange</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#aacb632304c6d3351600303116de8870d">defaultRange</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structBaseBus_1_1PortCache.html">PortCache</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a> [3]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt; bool &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#ace0f90dcdbf1c53391c0971acc0269ec">gotAddrRanges</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#a0c924502f5e6c095ac7dcbdaf3e177a4">gotAllAddrRanges</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt; <a class="el" href="classSlavePort.html">SlavePort</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#a9f084bf86a306772d84ad52e839cce97">slavePorts</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt; <a class="el" href="classMasterPort.html">MasterPort</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#a0f7b2e1619b03085b0a28bb3216cd562">masterPorts</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#acef4d7d41cb21fdc252e20c04cd7bb8e">PortID</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#a769e7b27ddafebcc1228757f2c9ec1ba">defaultPortID</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#a1b0312e896847e0ef8bbad93fa73dc4c">useDefaultRange</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Formula.html">Stats::Formula</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#ac7ddaff47c2ff8945ba85797af602673">throughput</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#a3eb88cd36449bb56229422858d34194d">transDist</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Vector2d.html">Stats::Vector2d</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#a1444e1d672a8bfe518b9c3d05412985a">pktCount</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Vector2d.html">Stats::Vector2d</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseBus.html#a1b2222f1cfbd8c191ad8d1099fd24848">totPktSize</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>説明</h2>
<p>The base bus contains the common elements of the non-coherent and coherent bus. It is an abstract class that does not have any of the functionality relating to the actual reception and transmission of packets, as this is left for the subclasses.</p>
<p>The <a class="el" href="classBaseBus.html">BaseBus</a> is responsible for the basic flow control (busy or not), the administration of retries, and the address decoding. </p>
<hr/><h2>型定義</h2>
<a class="anchor" id="a19db300fe0038b9addfe69a31ef83b3d"></a><!-- doxytag: member="BaseBus::MasterPortConstIter" ref="a19db300fe0038b9addfe69a31ef83b3d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classstd_1_1vector.html">std::vector</a>&lt;<a class="el" href="classMasterPort.html">MasterPort</a>*&gt;::const_iterator <a class="el" href="classBaseBus.html#a19db300fe0038b9addfe69a31ef83b3d">MasterPortConstIter</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a44e87d907bdab92a2169caddd28979f9"></a><!-- doxytag: member="BaseBus::MasterPortIter" ref="a44e87d907bdab92a2169caddd28979f9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classstd_1_1vector.html">std::vector</a>&lt;<a class="el" href="classMasterPort.html">MasterPort</a>*&gt;::iterator <a class="el" href="classBaseBus.html#a44e87d907bdab92a2169caddd28979f9">MasterPortIter</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad31cae2c5a87fd020ee036a5d94c7420"></a><!-- doxytag: member="BaseBus::PortMapConstIter" ref="ad31cae2c5a87fd020ee036a5d94c7420" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classAddrRangeMap.html">AddrRangeMap</a>&lt;<a class="el" href="base_2types_8hh.html#acef4d7d41cb21fdc252e20c04cd7bb8e">PortID</a>&gt;::const_iterator <a class="el" href="classBaseBus.html#ad31cae2c5a87fd020ee036a5d94c7420">PortMapConstIter</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="adedf751dd92daa01137db6149c004ea7"></a><!-- doxytag: member="BaseBus::PortMapIter" ref="adedf751dd92daa01137db6149c004ea7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classAddrRangeMap.html">AddrRangeMap</a>&lt;<a class="el" href="base_2types_8hh.html#acef4d7d41cb21fdc252e20c04cd7bb8e">PortID</a>&gt;::iterator <a class="el" href="classBaseBus.html#adedf751dd92daa01137db6149c004ea7">PortMapIter</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4cfbb26aa06c3132b77227f45f39e224"></a><!-- doxytag: member="BaseBus::SlavePortConstIter" ref="a4cfbb26aa06c3132b77227f45f39e224" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classstd_1_1vector.html">std::vector</a>&lt;<a class="el" href="classSlavePort.html">SlavePort</a>*&gt;::const_iterator <a class="el" href="classBaseBus.html#a4cfbb26aa06c3132b77227f45f39e224">SlavePortConstIter</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2b00f9fc9ba7e236c9757ea764cda19d"></a><!-- doxytag: member="BaseBus::SlavePortIter" ref="a2b00f9fc9ba7e236c9757ea764cda19d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classstd_1_1vector.html">std::vector</a>&lt;<a class="el" href="classSlavePort.html">SlavePort</a>*&gt;::iterator <a class="el" href="classBaseBus.html#a2b00f9fc9ba7e236c9757ea764cda19d">SlavePortIter</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Convenience typedefs. </p>

</div>
</div>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="aafbb881b411bf8ecd7696a6b6c9fbf5c"></a><!-- doxytag: member="BaseBus::BaseBus" ref="aafbb881b411bf8ecd7696a6b6c9fbf5c" args="(const BaseBusParams *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBaseBus.html">BaseBus</a> </td>
          <td>(</td>
          <td class="paramtype">const BaseBusParams *&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00058"></a>00058     : <a class="code" href="classMemObject.html#a0390aa3eb5acd29074fac67b8d6472bd">MemObject</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>),
<a name="l00059"></a>00059       <a class="code" href="classBaseBus.html#ab9c87c91aa592a3542152117cdb99c9b">headerCycles</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;header_cycles), <a class="code" href="classBaseBus.html#a4c2292bdfd51cf112bcde1ad3fa55ac4">width</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;width),
<a name="l00060"></a>00060       <a class="code" href="classBaseBus.html#ace0f90dcdbf1c53391c0971acc0269ec">gotAddrRanges</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;port_default_connection_count +
<a name="l00061"></a>00061                           <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;port_master_connection_count, <span class="keyword">false</span>),
<a name="l00062"></a>00062       <a class="code" href="classBaseBus.html#a0c924502f5e6c095ac7dcbdaf3e177a4">gotAllAddrRanges</a>(<span class="keyword">false</span>), <a class="code" href="classBaseBus.html#a769e7b27ddafebcc1228757f2c9ec1ba">defaultPortID</a>(<a class="code" href="base_2types_8hh.html#a65bf40f138cf863f0c5e2d8ca1144126">InvalidPortID</a>),
<a name="l00063"></a>00063       <a class="code" href="classBaseBus.html#a1b0312e896847e0ef8bbad93fa73dc4c">useDefaultRange</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;use_default_range)
<a name="l00064"></a>00064 {}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4c37180f5639002a5c75b2c1ec3c3ab4"></a><!-- doxytag: member="BaseBus::~BaseBus" ref="a4c37180f5639002a5c75b2c1ec3c3ab4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classBaseBus.html">BaseBus</a> </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00067"></a>00067 {
<a name="l00068"></a>00068     <span class="keywordflow">for</span> (<a class="code" href="classBaseBus.html#a44e87d907bdab92a2169caddd28979f9">MasterPortIter</a> <a class="code" href="namespaceArmISA.html#afb747b54d0c5e3e4e1763be19ca9373b">m</a> = <a class="code" href="classBaseBus.html#a0f7b2e1619b03085b0a28bb3216cd562">masterPorts</a>.begin(); <a class="code" href="namespaceArmISA.html#afb747b54d0c5e3e4e1763be19ca9373b">m</a> != <a class="code" href="classBaseBus.html#a0f7b2e1619b03085b0a28bb3216cd562">masterPorts</a>.end();
<a name="l00069"></a>00069          ++<a class="code" href="namespaceArmISA.html#afb747b54d0c5e3e4e1763be19ca9373b">m</a>) {
<a name="l00070"></a>00070         <span class="keyword">delete</span> *<a class="code" href="namespaceArmISA.html#afb747b54d0c5e3e4e1763be19ca9373b">m</a>;
<a name="l00071"></a>00071     }
<a name="l00072"></a>00072 
<a name="l00073"></a>00073     <span class="keywordflow">for</span> (<a class="code" href="classBaseBus.html#a2b00f9fc9ba7e236c9757ea764cda19d">SlavePortIter</a> <a class="code" href="namespaceArmISA.html#afaeb18e17f862d8fcb76dfb68a18854f">s</a> = <a class="code" href="classBaseBus.html#a9f084bf86a306772d84ad52e839cce97">slavePorts</a>.begin(); <a class="code" href="namespaceArmISA.html#afaeb18e17f862d8fcb76dfb68a18854f">s</a> != <a class="code" href="classBaseBus.html#a9f084bf86a306772d84ad52e839cce97">slavePorts</a>.end();
<a name="l00074"></a>00074          ++<a class="code" href="namespaceArmISA.html#afaeb18e17f862d8fcb76dfb68a18854f">s</a>) {
<a name="l00075"></a>00075         <span class="keyword">delete</span> *<a class="code" href="namespaceArmISA.html#afaeb18e17f862d8fcb76dfb68a18854f">s</a>;
<a name="l00076"></a>00076     }
<a name="l00077"></a>00077 }
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="a0e69bf0fe1b87ac59689c3807a942ee7"></a><!-- doxytag: member="BaseBus::calcPacketTiming" ref="a0e69bf0fe1b87ac59689c3807a942ee7" args="(PacketPtr pkt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void calcPacketTiming </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pkt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Calculate the timing parameters for the packet. Updates the busFirstWordDelay and busLastWordDelay fields of the packet object with the relative number of ticks required to transmit the header and the first word, and the last word, respectively. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00110"></a>00110 {
<a name="l00111"></a>00111     <span class="comment">// the bus will be called at a time that is not necessarily</span>
<a name="l00112"></a>00112     <span class="comment">// coinciding with its own clock, so start by determining how long</span>
<a name="l00113"></a>00113     <span class="comment">// until the next clock edge (could be zero)</span>
<a name="l00114"></a>00114     <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="code" href="namespaceArmISA.html#a87b7a740701cddafb930a9460e9f4eba">offset</a> = <a class="code" href="classClockedObject.html#a773956693f216cafb7d4cad92ad582e5">clockEdge</a>() - <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>();
<a name="l00115"></a>00115 
<a name="l00116"></a>00116     <span class="comment">// determine how many cycles are needed to send the data</span>
<a name="l00117"></a>00117     <span class="keywordtype">unsigned</span> dataCycles = pkt-&gt;<a class="code" href="classPacket.html#a0effbd4cf91891700ac41e86defe4aa6">hasData</a>() ? <a class="code" href="intmath_8hh.html#ae842b412d3570df97a944085b8f85850">divCeil</a>(pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>(), <a class="code" href="classBaseBus.html#a4c2292bdfd51cf112bcde1ad3fa55ac4">width</a>) : 0;
<a name="l00118"></a>00118 
<a name="l00119"></a>00119     <span class="comment">// before setting the bus delay fields of the packet, ensure that</span>
<a name="l00120"></a>00120     <span class="comment">// the delay from any previous bus has been accounted for</span>
<a name="l00121"></a>00121     <span class="keywordflow">if</span> (pkt-&gt;<a class="code" href="classPacket.html#af8986a05caa6c5b96b0b01bb6cf47772">busFirstWordDelay</a> != 0 || pkt-&gt;<a class="code" href="classPacket.html#a7bf8ae0a056329f751eda8b39ca4c268">busLastWordDelay</a> != 0)
<a name="l00122"></a>00122         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Packet %s already has bus delay (%d, %d) that should be &quot;</span>
<a name="l00123"></a>00123               <span class="stringliteral">&quot;accounted for.\n&quot;</span>, pkt-&gt;<a class="code" href="classPacket.html#a863af57e28a01258236ea303155fc7ff">cmdString</a>(), pkt-&gt;<a class="code" href="classPacket.html#af8986a05caa6c5b96b0b01bb6cf47772">busFirstWordDelay</a>,
<a name="l00124"></a>00124               pkt-&gt;<a class="code" href="classPacket.html#a7bf8ae0a056329f751eda8b39ca4c268">busLastWordDelay</a>);
<a name="l00125"></a>00125 
<a name="l00126"></a>00126     <span class="comment">// The first word will be delivered on the cycle after the header.</span>
<a name="l00127"></a>00127     pkt-&gt;<a class="code" href="classPacket.html#af8986a05caa6c5b96b0b01bb6cf47772">busFirstWordDelay</a> = (<a class="code" href="classBaseBus.html#ab9c87c91aa592a3542152117cdb99c9b">headerCycles</a> + 1) * <a class="code" href="classClockedObject.html#a78c89cef17196c60470c4f2f76d43d8a">clockPeriod</a>() + offset;
<a name="l00128"></a>00128 
<a name="l00129"></a>00129     <span class="comment">// Note that currently busLastWordDelay can be smaller than</span>
<a name="l00130"></a>00130     <span class="comment">// busFirstWordDelay if the packet has no data</span>
<a name="l00131"></a>00131     pkt-&gt;<a class="code" href="classPacket.html#a7bf8ae0a056329f751eda8b39ca4c268">busLastWordDelay</a> = (<a class="code" href="classBaseBus.html#ab9c87c91aa592a3542152117cdb99c9b">headerCycles</a> + dataCycles) * <a class="code" href="classClockedObject.html#a78c89cef17196c60470c4f2f76d43d8a">clockPeriod</a>() +
<a name="l00132"></a>00132         offset;
<a name="l00133"></a>00133 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3ec7557ff2dd8a9390bbf310b3352ce2"></a><!-- doxytag: member="BaseBus::checkPortCache" ref="a3ec7557ff2dd8a9390bbf310b3352ce2" args="(Addr addr) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#acef4d7d41cb21fdc252e20c04cd7bb8e">PortID</a> checkPortCache </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>addr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00296"></a>00296                                                   {
<a name="l00297"></a>00297         <span class="keywordflow">if</span> (<a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[0].valid &amp;&amp; <a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[0].range.contains(<a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a>)) {
<a name="l00298"></a>00298             <span class="keywordflow">return</span> <a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[0].<a class="code" href="structBaseBus_1_1PortCache.html#a34ff492e343069602bcc51eb116a061f">id</a>;
<a name="l00299"></a>00299         }
<a name="l00300"></a>00300         <span class="keywordflow">if</span> (<a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[1].valid &amp;&amp; <a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[1].range.contains(<a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a>)) {
<a name="l00301"></a>00301             <span class="keywordflow">return</span> <a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[1].<a class="code" href="structBaseBus_1_1PortCache.html#a34ff492e343069602bcc51eb116a061f">id</a>;
<a name="l00302"></a>00302         }
<a name="l00303"></a>00303         <span class="keywordflow">if</span> (<a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[2].valid &amp;&amp; <a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[2].range.contains(<a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a>)) {
<a name="l00304"></a>00304             <span class="keywordflow">return</span> <a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[2].<a class="code" href="structBaseBus_1_1PortCache.html#a34ff492e343069602bcc51eb116a061f">id</a>;
<a name="l00305"></a>00305         }
<a name="l00306"></a>00306 
<a name="l00307"></a>00307         <span class="keywordflow">return</span> <a class="code" href="base_2types_8hh.html#a65bf40f138cf863f0c5e2d8ca1144126">InvalidPortID</a>;
<a name="l00308"></a>00308     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2b259c34a080563d0e03d5a1fec2cd7a"></a><!-- doxytag: member="BaseBus::clearPortCache" ref="a2b259c34a080563d0e03d5a1fec2cd7a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clearPortCache </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00326"></a>00326                                  {
<a name="l00327"></a>00327         <a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[2].<a class="code" href="structBaseBus_1_1PortCache.html#a28e3c179a86f337095088b3ca02a2b2a">valid</a> = <span class="keyword">false</span>;
<a name="l00328"></a>00328         <a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[1].<a class="code" href="structBaseBus_1_1PortCache.html#a28e3c179a86f337095088b3ca02a2b2a">valid</a> = <span class="keyword">false</span>;
<a name="l00329"></a>00329         <a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[0].<a class="code" href="structBaseBus_1_1PortCache.html#a28e3c179a86f337095088b3ca02a2b2a">valid</a> = <span class="keyword">false</span>;
<a name="l00330"></a>00330     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac8c1510f7e1591e75a5c79b4b873f6b4"></a><!-- doxytag: member="BaseBus::drain" ref="ac8c1510f7e1591e75a5c79b4b873f6b4" args="(DrainManager *dm)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual unsigned int drain </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDrainManager.html">DrainManager</a> *&nbsp;</td>
          <td class="paramname"> <em>drainManger</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Provide a default implementation of the drain interface that simply returns 0 (draining completed) and sets the drain state to Drained. </p>

<p><a class="el" href="classSimObject.html#a6bf479c521c7c3eb473822d953275b26">SimObject</a>を再定義しています。</p>

<p><a class="el" href="classCoherentBus.html#aa8a18d230dba7a674ac8a0b4f35bc36a">CoherentBus</a>, と <a class="el" href="classNoncoherentBus.html#aa8a18d230dba7a674ac8a0b4f35bc36a">NoncoherentBus</a>で実装されています。</p>

</div>
</div>
<a class="anchor" id="a16872a256ea6eae168abc47d498841cb"></a><!-- doxytag: member="BaseBus::findPort" ref="a16872a256ea6eae168abc47d498841cb" args="(Addr addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#acef4d7d41cb21fdc252e20c04cd7bb8e">PortID</a> findPort </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>addr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Find which port connected to this bus (if any) should be given a packet with this address. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td><a class="el" href="classAddress.html">Address</a> to find port for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>戻り値:</b></dt><dd>id of port that the packet should be sent out of. </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00319"></a>00319 {
<a name="l00320"></a>00320     <span class="comment">// we should never see any address lookups before we&apos;ve got the</span>
<a name="l00321"></a>00321     <span class="comment">// ranges of all connected slave modules</span>
<a name="l00322"></a>00322     assert(<a class="code" href="classBaseBus.html#a0c924502f5e6c095ac7dcbdaf3e177a4">gotAllAddrRanges</a>);
<a name="l00323"></a>00323 
<a name="l00324"></a>00324     <span class="comment">// Check the cache</span>
<a name="l00325"></a>00325     <a class="code" href="base_2types_8hh.html#acef4d7d41cb21fdc252e20c04cd7bb8e">PortID</a> dest_id = <a class="code" href="classBaseBus.html#a3ec7557ff2dd8a9390bbf310b3352ce2">checkPortCache</a>(<a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a>);
<a name="l00326"></a>00326     <span class="keywordflow">if</span> (dest_id != <a class="code" href="base_2types_8hh.html#a65bf40f138cf863f0c5e2d8ca1144126">InvalidPortID</a>)
<a name="l00327"></a>00327         <span class="keywordflow">return</span> dest_id;
<a name="l00328"></a>00328 
<a name="l00329"></a>00329     <span class="comment">// Check the address map interval tree</span>
<a name="l00330"></a>00330     <a class="code" href="classBaseBus.html#ad31cae2c5a87fd020ee036a5d94c7420">PortMapConstIter</a> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = <a class="code" href="classBaseBus.html#a81c901d8c13bd997dee7a12453bb29e9">portMap</a>.<a class="code" href="classAddrRangeMap.html#aa89a64932a83b0166c2d0ef2c3427473">find</a>(<a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a>);
<a name="l00331"></a>00331     <span class="keywordflow">if</span> (i != <a class="code" href="classBaseBus.html#a81c901d8c13bd997dee7a12453bb29e9">portMap</a>.<a class="code" href="classAddrRangeMap.html#a350132543d80a1c1e5be844e6d2878ea">end</a>()) {
<a name="l00332"></a>00332         dest_id = i-&gt;second;
<a name="l00333"></a>00333         <a class="code" href="classBaseBus.html#a3b429b2b5fe74236299bcb556d2308e7">updatePortCache</a>(dest_id, i-&gt;first);
<a name="l00334"></a>00334         <span class="keywordflow">return</span> dest_id;
<a name="l00335"></a>00335     }
<a name="l00336"></a>00336 
<a name="l00337"></a>00337     <span class="comment">// Check if this matches the default range</span>
<a name="l00338"></a>00338     <span class="keywordflow">if</span> (<a class="code" href="classBaseBus.html#a1b0312e896847e0ef8bbad93fa73dc4c">useDefaultRange</a>) {
<a name="l00339"></a>00339         <span class="keywordflow">if</span> (<a class="code" href="classBaseBus.html#aacb632304c6d3351600303116de8870d">defaultRange</a>.<a class="code" href="classAddrRange.html#aa839dbf0ffc0e871a3f08f1d23d78a18">contains</a>(<a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a>)) {
<a name="l00340"></a>00340             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BusAddrRanges, <span class="stringliteral">&quot;  found addr %#llx on default\n&quot;</span>,
<a name="l00341"></a>00341                     <a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a>);
<a name="l00342"></a>00342             <span class="keywordflow">return</span> <a class="code" href="classBaseBus.html#a769e7b27ddafebcc1228757f2c9ec1ba">defaultPortID</a>;
<a name="l00343"></a>00343         }
<a name="l00344"></a>00344     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classBaseBus.html#a769e7b27ddafebcc1228757f2c9ec1ba">defaultPortID</a> != <a class="code" href="base_2types_8hh.html#a65bf40f138cf863f0c5e2d8ca1144126">InvalidPortID</a>) {
<a name="l00345"></a>00345         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BusAddrRanges, <span class="stringliteral">&quot;Unable to find destination for addr %#llx, &quot;</span>
<a name="l00346"></a>00346                 <span class="stringliteral">&quot;will use default port\n&quot;</span>, <a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a>);
<a name="l00347"></a>00347         <span class="keywordflow">return</span> <a class="code" href="classBaseBus.html#a769e7b27ddafebcc1228757f2c9ec1ba">defaultPortID</a>;
<a name="l00348"></a>00348     }
<a name="l00349"></a>00349 
<a name="l00350"></a>00350     <span class="comment">// we should use the range for the default port and it did not</span>
<a name="l00351"></a>00351     <span class="comment">// match, or the default port is not set</span>
<a name="l00352"></a>00352     <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;Unable to find destination for addr %#llx on bus %s\n&quot;</span>, <a class="code" href="namespaceX86ISA.html#ab705917f60c5566f9ce56a93f798b2e2">addr</a>,
<a name="l00353"></a>00353           <a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>());
<a name="l00354"></a>00354 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a36cf113d5e5e091ebddb32306c098fae"></a><!-- doxytag: member="BaseBus::getAddrRanges" ref="a36cf113d5e5e091ebddb32306c098fae" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1list.html">AddrRangeList</a> getAddrRanges </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the address ranges the bus is responsible for.</p>
<dl class="return"><dt><b>戻り値:</b></dt><dd>a list of non-overlapping address ranges </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00522"></a>00522 {
<a name="l00523"></a>00523     <span class="comment">// we should never be asked without first having sent a range</span>
<a name="l00524"></a>00524     <span class="comment">// change, and the latter is only done once we have all the ranges</span>
<a name="l00525"></a>00525     <span class="comment">// of the connected devices</span>
<a name="l00526"></a>00526     assert(<a class="code" href="classBaseBus.html#a0c924502f5e6c095ac7dcbdaf3e177a4">gotAllAddrRanges</a>);
<a name="l00527"></a>00527 
<a name="l00528"></a>00528     <span class="comment">// at the moment, this never happens, as there are no cycles in</span>
<a name="l00529"></a>00529     <span class="comment">// the range queries and no devices on the master side of a bus</span>
<a name="l00530"></a>00530     <span class="comment">// (CPU, cache, bridge etc) actually care about the ranges of the</span>
<a name="l00531"></a>00531     <span class="comment">// ports they are connected to</span>
<a name="l00532"></a>00532 
<a name="l00533"></a>00533     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BusAddrRanges, <span class="stringliteral">&quot;Received address range request\n&quot;</span>);
<a name="l00534"></a>00534 
<a name="l00535"></a>00535     <span class="keywordflow">return</span> <a class="code" href="classBaseBus.html#ae980bda7663fbe15e79dd75a91d8448c">busRanges</a>;
<a name="l00536"></a>00536 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="adc4e675e51defbdd1e354dac729d0703"></a><!-- doxytag: member="BaseBus::getMasterPort" ref="adc4e675e51defbdd1e354dac729d0703" args="(const std::string &amp;if_name, PortID idx=InvalidPortID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBaseMasterPort.html">BaseMasterPort</a> &amp; getMasterPort </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>if_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#acef4d7d41cb21fdc252e20c04cd7bb8e">PortID</a>&nbsp;</td>
          <td class="paramname"> <em>idx</em> = <code><a class="el" href="base_2types_8hh.html#a65bf40f138cf863f0c5e2d8ca1144126">InvalidPortID</a></code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A function used to return the port associated with this bus object. </p>

<p><a class="el" href="classMemObject.html#adc4e675e51defbdd1e354dac729d0703">MemObject</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00086"></a>00086 {
<a name="l00087"></a>00087     <span class="keywordflow">if</span> (if_name == <span class="stringliteral">&quot;master&quot;</span> &amp;&amp; idx &lt; <a class="code" href="classBaseBus.html#a0f7b2e1619b03085b0a28bb3216cd562">masterPorts</a>.size()) {
<a name="l00088"></a>00088         <span class="comment">// the master port index translates directly to the vector position</span>
<a name="l00089"></a>00089         <span class="keywordflow">return</span> *<a class="code" href="classBaseBus.html#a0f7b2e1619b03085b0a28bb3216cd562">masterPorts</a>[idx];
<a name="l00090"></a>00090     } <span class="keywordflow">else</span>  <span class="keywordflow">if</span> (if_name == <span class="stringliteral">&quot;default&quot;</span>) {
<a name="l00091"></a>00091         <span class="keywordflow">return</span> *<a class="code" href="classBaseBus.html#a0f7b2e1619b03085b0a28bb3216cd562">masterPorts</a>[<a class="code" href="classBaseBus.html#a769e7b27ddafebcc1228757f2c9ec1ba">defaultPortID</a>];
<a name="l00092"></a>00092     } <span class="keywordflow">else</span> {
<a name="l00093"></a>00093         <span class="keywordflow">return</span> <a class="code" href="classBaseBus.html#adc4e675e51defbdd1e354dac729d0703">MemObject::getMasterPort</a>(if_name, idx);
<a name="l00094"></a>00094     }
<a name="l00095"></a>00095 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac918a145092d7514ebc6dbd952dceafb"></a><!-- doxytag: member="BaseBus::getSlavePort" ref="ac918a145092d7514ebc6dbd952dceafb" args="(const std::string &amp;if_name, PortID idx=InvalidPortID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBaseSlavePort.html">BaseSlavePort</a> &amp; getSlavePort </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>if_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#acef4d7d41cb21fdc252e20c04cd7bb8e">PortID</a>&nbsp;</td>
          <td class="paramname"> <em>idx</em> = <code><a class="el" href="base_2types_8hh.html#a65bf40f138cf863f0c5e2d8ca1144126">InvalidPortID</a></code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get a slave port with a given name and index. This is used at binding time and returns a reference to a protocol-agnostic base master port.</p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>if_name</em>&nbsp;</td><td><a class="el" href="classPort.html">Port</a> name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>idx</em>&nbsp;</td><td>Index in the case of a VectorPort</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>戻り値:</b></dt><dd>A reference to the given port </dd></dl>

<p><a class="el" href="classMemObject.html#ac918a145092d7514ebc6dbd952dceafb">MemObject</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00099"></a>00099 {
<a name="l00100"></a>00100     <span class="keywordflow">if</span> (if_name == <span class="stringliteral">&quot;slave&quot;</span> &amp;&amp; idx &lt; <a class="code" href="classBaseBus.html#a9f084bf86a306772d84ad52e839cce97">slavePorts</a>.size()) {
<a name="l00101"></a>00101         <span class="comment">// the slave port index translates directly to the vector position</span>
<a name="l00102"></a>00102         <span class="keywordflow">return</span> *<a class="code" href="classBaseBus.html#a9f084bf86a306772d84ad52e839cce97">slavePorts</a>[idx];
<a name="l00103"></a>00103     } <span class="keywordflow">else</span> {
<a name="l00104"></a>00104         <span class="keywordflow">return</span> <a class="code" href="classBaseBus.html#ac918a145092d7514ebc6dbd952dceafb">MemObject::getSlavePort</a>(if_name, idx);
<a name="l00105"></a>00105     }
<a name="l00106"></a>00106 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a02fd73d861ef2e4aabb38c0c9ff82947"></a><!-- doxytag: member="BaseBus::init" ref="a02fd73d861ef2e4aabb38c0c9ff82947" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classBaseBus.html#a02fd73d861ef2e4aabb38c0c9ff82947">init()</a> is called after all C++ SimObjects have been created and all ports are connected. Initializations that are independent of unserialization but rely on a fully instantiated and connected <a class="el" href="classSimObject.html">SimObject</a> graph should be done here. </p>

<p><a class="el" href="classSimObject.html#a02fd73d861ef2e4aabb38c0c9ff82947">SimObject</a>を再定義しています。</p>

<p><a class="el" href="classCoherentBus.html#a02fd73d861ef2e4aabb38c0c9ff82947">CoherentBus</a>で再定義されています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00081"></a>00081 {
<a name="l00082"></a>00082 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a85a99f51d8fef63034675b40df7eea7e"></a><!-- doxytag: member="BaseBus::recvRangeChange" ref="a85a99f51d8fef63034675b40df7eea7e" args="(PortID master_port_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void recvRangeChange </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#acef4d7d41cb21fdc252e20c04cd7bb8e">PortID</a>&nbsp;</td>
          <td class="paramname"> <em>master_port_id</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function called by the port when the bus is recieving a range change.</p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>master_port_id</em>&nbsp;</td><td>id of the port that received the change</td></tr>
  </table>
  </dd>
</dl>
<p>Function called by the port when the bus is receiving a range change. </p>

<p><div class="fragment"><pre class="fragment"><a name="l00359"></a>00359 {
<a name="l00360"></a>00360     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BusAddrRanges, <span class="stringliteral">&quot;Received range change from slave port %s\n&quot;</span>,
<a name="l00361"></a>00361             <a class="code" href="classBaseBus.html#a0f7b2e1619b03085b0a28bb3216cd562">masterPorts</a>[master_port_id]-&gt;<a class="code" href="classBaseBus.html#ac918a145092d7514ebc6dbd952dceafb">getSlavePort</a>().<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>());
<a name="l00362"></a>00362 
<a name="l00363"></a>00363     <span class="comment">// remember that we got a range from this master port and thus the</span>
<a name="l00364"></a>00364     <span class="comment">// connected slave module</span>
<a name="l00365"></a>00365     <a class="code" href="classBaseBus.html#ace0f90dcdbf1c53391c0971acc0269ec">gotAddrRanges</a>[master_port_id] = <span class="keyword">true</span>;
<a name="l00366"></a>00366 
<a name="l00367"></a>00367     <span class="comment">// update the global flag</span>
<a name="l00368"></a>00368     <span class="keywordflow">if</span> (!<a class="code" href="classBaseBus.html#a0c924502f5e6c095ac7dcbdaf3e177a4">gotAllAddrRanges</a>) {
<a name="l00369"></a>00369         <span class="comment">// take a logical AND of all the ports and see if we got</span>
<a name="l00370"></a>00370         <span class="comment">// ranges from everyone</span>
<a name="l00371"></a>00371         <a class="code" href="classBaseBus.html#a0c924502f5e6c095ac7dcbdaf3e177a4">gotAllAddrRanges</a> = <span class="keyword">true</span>;
<a name="l00372"></a>00372         <a class="code" href="classstd_1_1vector.html">std::vector&lt;bool&gt;::const_iterator</a> <a class="code" href="namespaceMipsISA.html#a7de4997f814ef7d6392df74a7a1c5e0d">r</a> = <a class="code" href="classBaseBus.html#ace0f90dcdbf1c53391c0971acc0269ec">gotAddrRanges</a>.begin();
<a name="l00373"></a>00373         <span class="keywordflow">while</span> (<a class="code" href="classBaseBus.html#a0c924502f5e6c095ac7dcbdaf3e177a4">gotAllAddrRanges</a> &amp;&amp;  r != <a class="code" href="classBaseBus.html#ace0f90dcdbf1c53391c0971acc0269ec">gotAddrRanges</a>.end()) {
<a name="l00374"></a>00374             <a class="code" href="classBaseBus.html#a0c924502f5e6c095ac7dcbdaf3e177a4">gotAllAddrRanges</a> &amp;= *r++;
<a name="l00375"></a>00375         }
<a name="l00376"></a>00376         <span class="keywordflow">if</span> (<a class="code" href="classBaseBus.html#a0c924502f5e6c095ac7dcbdaf3e177a4">gotAllAddrRanges</a>)
<a name="l00377"></a>00377             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BusAddrRanges, <span class="stringliteral">&quot;Got address ranges from all slaves\n&quot;</span>);
<a name="l00378"></a>00378     }
<a name="l00379"></a>00379 
<a name="l00380"></a>00380     <span class="comment">// note that we could get the range from the default port at any</span>
<a name="l00381"></a>00381     <span class="comment">// point in time, and we cannot assume that the default range is</span>
<a name="l00382"></a>00382     <span class="comment">// set before the other ones are, so we do additional checks once</span>
<a name="l00383"></a>00383     <span class="comment">// all ranges are provided</span>
<a name="l00384"></a>00384     <span class="keywordflow">if</span> (master_port_id == <a class="code" href="classBaseBus.html#a769e7b27ddafebcc1228757f2c9ec1ba">defaultPortID</a>) {
<a name="l00385"></a>00385         <span class="comment">// only update if we are indeed checking ranges for the</span>
<a name="l00386"></a>00386         <span class="comment">// default port since the port might not have a valid range</span>
<a name="l00387"></a>00387         <span class="comment">// otherwise</span>
<a name="l00388"></a>00388         <span class="keywordflow">if</span> (<a class="code" href="classBaseBus.html#a1b0312e896847e0ef8bbad93fa73dc4c">useDefaultRange</a>) {
<a name="l00389"></a>00389             <a class="code" href="classstd_1_1list.html">AddrRangeList</a> ranges = <a class="code" href="classBaseBus.html#a0f7b2e1619b03085b0a28bb3216cd562">masterPorts</a>[master_port_id]-&gt;getAddrRanges();
<a name="l00390"></a>00390 
<a name="l00391"></a>00391             <span class="keywordflow">if</span> (ranges.size() != 1)
<a name="l00392"></a>00392                 <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;Bus %s may only have a single default range&quot;</span>,
<a name="l00393"></a>00393                       <a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>());
<a name="l00394"></a>00394 
<a name="l00395"></a>00395             <a class="code" href="classBaseBus.html#aacb632304c6d3351600303116de8870d">defaultRange</a> = ranges.front();
<a name="l00396"></a>00396         }
<a name="l00397"></a>00397     } <span class="keywordflow">else</span> {
<a name="l00398"></a>00398         <span class="comment">// the ports are allowed to update their address ranges</span>
<a name="l00399"></a>00399         <span class="comment">// dynamically, so remove any existing entries</span>
<a name="l00400"></a>00400         <span class="keywordflow">if</span> (<a class="code" href="classBaseBus.html#ace0f90dcdbf1c53391c0971acc0269ec">gotAddrRanges</a>[master_port_id]) {
<a name="l00401"></a>00401             <span class="keywordflow">for</span> (<a class="code" href="classBaseBus.html#adedf751dd92daa01137db6149c004ea7">PortMapIter</a> <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a> = <a class="code" href="classBaseBus.html#a81c901d8c13bd997dee7a12453bb29e9">portMap</a>.<a class="code" href="classAddrRangeMap.html#aa4b02d4f1a8500fb07a551069060709f">begin</a>(); <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a> != <a class="code" href="classBaseBus.html#a81c901d8c13bd997dee7a12453bb29e9">portMap</a>.<a class="code" href="classAddrRangeMap.html#a350132543d80a1c1e5be844e6d2878ea">end</a>(); ) {
<a name="l00402"></a>00402                 <span class="keywordflow">if</span> (<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;second == master_port_id)
<a name="l00403"></a>00403                     <span class="comment">// erasing invalidates the iterator, so advance it</span>
<a name="l00404"></a>00404                     <span class="comment">// before the deletion takes place</span>
<a name="l00405"></a>00405                     <a class="code" href="classBaseBus.html#a81c901d8c13bd997dee7a12453bb29e9">portMap</a>.<a class="code" href="classAddrRangeMap.html#a1e39aaf15fad060923b688d4a936624b">erase</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>++);
<a name="l00406"></a>00406                 <span class="keywordflow">else</span>
<a name="l00407"></a>00407                     <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>++;
<a name="l00408"></a>00408             }
<a name="l00409"></a>00409         }
<a name="l00410"></a>00410 
<a name="l00411"></a>00411         <a class="code" href="classstd_1_1list.html">AddrRangeList</a> ranges = <a class="code" href="classBaseBus.html#a0f7b2e1619b03085b0a28bb3216cd562">masterPorts</a>[master_port_id]-&gt;getAddrRanges();
<a name="l00412"></a>00412 
<a name="l00413"></a>00413         <span class="keywordflow">for</span> (<a class="code" href="port_8hh.html#a0f4385f0a7bf93ed2e39e1a630b291b0">AddrRangeConstIter</a> r = ranges.begin(); r != ranges.end(); ++r) {
<a name="l00414"></a>00414             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BusAddrRanges, <span class="stringliteral">&quot;Adding range %s for id %d\n&quot;</span>,
<a name="l00415"></a>00415                     r-&gt;to_string(), master_port_id);
<a name="l00416"></a>00416             <span class="keywordflow">if</span> (<a class="code" href="classBaseBus.html#a81c901d8c13bd997dee7a12453bb29e9">portMap</a>.<a class="code" href="classAddrRangeMap.html#ae464dba77c85b35e01680a92bd80b4cd">insert</a>(*r, master_port_id) == <a class="code" href="classBaseBus.html#a81c901d8c13bd997dee7a12453bb29e9">portMap</a>.<a class="code" href="classAddrRangeMap.html#a350132543d80a1c1e5be844e6d2878ea">end</a>()) {
<a name="l00417"></a>00417                 <a class="code" href="base_2types_8hh.html#acef4d7d41cb21fdc252e20c04cd7bb8e">PortID</a> conflict_id = <a class="code" href="classBaseBus.html#a81c901d8c13bd997dee7a12453bb29e9">portMap</a>.<a class="code" href="classAddrRangeMap.html#aa89a64932a83b0166c2d0ef2c3427473">find</a>(*r)-&gt;second;
<a name="l00418"></a>00418                 <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;%s has two ports with same range:\n\t%s\n\t%s\n&quot;</span>,
<a name="l00419"></a>00419                       <a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>(),
<a name="l00420"></a>00420                       <a class="code" href="classBaseBus.html#a0f7b2e1619b03085b0a28bb3216cd562">masterPorts</a>[master_port_id]-&gt;<a class="code" href="classBaseBus.html#ac918a145092d7514ebc6dbd952dceafb">getSlavePort</a>().<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>(),
<a name="l00421"></a>00421                       <a class="code" href="classBaseBus.html#a0f7b2e1619b03085b0a28bb3216cd562">masterPorts</a>[conflict_id]-&gt;<a class="code" href="classBaseBus.html#ac918a145092d7514ebc6dbd952dceafb">getSlavePort</a>().<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>());
<a name="l00422"></a>00422             }
<a name="l00423"></a>00423         }
<a name="l00424"></a>00424     }
<a name="l00425"></a>00425 
<a name="l00426"></a>00426     <span class="comment">// if we have received ranges from all our neighbouring slave</span>
<a name="l00427"></a>00427     <span class="comment">// modules, go ahead and tell our connected master modules in</span>
<a name="l00428"></a>00428     <span class="comment">// turn, this effectively assumes a tree structure of the system</span>
<a name="l00429"></a>00429     <span class="keywordflow">if</span> (<a class="code" href="classBaseBus.html#a0c924502f5e6c095ac7dcbdaf3e177a4">gotAllAddrRanges</a>) {
<a name="l00430"></a>00430         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BusAddrRanges, <span class="stringliteral">&quot;Aggregating bus ranges\n&quot;</span>);
<a name="l00431"></a>00431         <a class="code" href="classBaseBus.html#ae980bda7663fbe15e79dd75a91d8448c">busRanges</a>.clear();
<a name="l00432"></a>00432 
<a name="l00433"></a>00433         <span class="comment">// start out with the default range</span>
<a name="l00434"></a>00434         <span class="keywordflow">if</span> (<a class="code" href="classBaseBus.html#a1b0312e896847e0ef8bbad93fa73dc4c">useDefaultRange</a>) {
<a name="l00435"></a>00435             <span class="keywordflow">if</span> (!<a class="code" href="classBaseBus.html#ace0f90dcdbf1c53391c0971acc0269ec">gotAddrRanges</a>[<a class="code" href="classBaseBus.html#a769e7b27ddafebcc1228757f2c9ec1ba">defaultPortID</a>])
<a name="l00436"></a>00436                 <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;Bus %s uses default range, but none provided&quot;</span>,
<a name="l00437"></a>00437                       <a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>());
<a name="l00438"></a>00438 
<a name="l00439"></a>00439             <a class="code" href="classBaseBus.html#ae980bda7663fbe15e79dd75a91d8448c">busRanges</a>.push_back(<a class="code" href="classBaseBus.html#aacb632304c6d3351600303116de8870d">defaultRange</a>);
<a name="l00440"></a>00440             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BusAddrRanges, <span class="stringliteral">&quot;-- Adding default %s\n&quot;</span>,
<a name="l00441"></a>00441                     <a class="code" href="classBaseBus.html#aacb632304c6d3351600303116de8870d">defaultRange</a>.<a class="code" href="classAddrRange.html#aa48c39f92bc04eded742f5310c74aafe">to_string</a>());
<a name="l00442"></a>00442         }
<a name="l00443"></a>00443 
<a name="l00444"></a>00444         <span class="comment">// merge all interleaved ranges and add any range that is not</span>
<a name="l00445"></a>00445         <span class="comment">// a subset of the default range</span>
<a name="l00446"></a>00446         <a class="code" href="classstd_1_1vector.html">std::vector&lt;AddrRange&gt;</a> intlv_ranges;
<a name="l00447"></a>00447         <span class="keywordflow">for</span> (<a class="code" href="classAddrRangeMap.html">AddrRangeMap&lt;PortID&gt;::const_iterator</a> r = <a class="code" href="classBaseBus.html#a81c901d8c13bd997dee7a12453bb29e9">portMap</a>.<a class="code" href="classAddrRangeMap.html#aa4b02d4f1a8500fb07a551069060709f">begin</a>();
<a name="l00448"></a>00448              r != <a class="code" href="classBaseBus.html#a81c901d8c13bd997dee7a12453bb29e9">portMap</a>.<a class="code" href="classAddrRangeMap.html#a350132543d80a1c1e5be844e6d2878ea">end</a>(); ++r) {
<a name="l00449"></a>00449             <span class="comment">// if the range is interleaved then save it for now</span>
<a name="l00450"></a>00450             <span class="keywordflow">if</span> (r-&gt;first.interleaved()) {
<a name="l00451"></a>00451                 <span class="comment">// if we already got interleaved ranges that are not</span>
<a name="l00452"></a>00452                 <span class="comment">// part of the same range, then first do a merge</span>
<a name="l00453"></a>00453                 <span class="comment">// before we add the new one</span>
<a name="l00454"></a>00454                 <span class="keywordflow">if</span> (!intlv_ranges.empty() &amp;&amp;
<a name="l00455"></a>00455                     !intlv_ranges.back().mergesWith(r-&gt;first)) {
<a name="l00456"></a>00456                     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BusAddrRanges, <span class="stringliteral">&quot;-- Merging range from %d ranges\n&quot;</span>,
<a name="l00457"></a>00457                             intlv_ranges.size());
<a name="l00458"></a>00458                     <a class="code" href="classAddrRange.html">AddrRange</a> merged_range(intlv_ranges);
<a name="l00459"></a>00459                     <span class="comment">// next decide if we keep the merged range or not</span>
<a name="l00460"></a>00460                     <span class="keywordflow">if</span> (!(<a class="code" href="classBaseBus.html#a1b0312e896847e0ef8bbad93fa73dc4c">useDefaultRange</a> &amp;&amp;
<a name="l00461"></a>00461                           merged_range.isSubset(<a class="code" href="classBaseBus.html#aacb632304c6d3351600303116de8870d">defaultRange</a>))) {
<a name="l00462"></a>00462                         <a class="code" href="classBaseBus.html#ae980bda7663fbe15e79dd75a91d8448c">busRanges</a>.push_back(merged_range);
<a name="l00463"></a>00463                         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BusAddrRanges, <span class="stringliteral">&quot;-- Adding merged range %s\n&quot;</span>,
<a name="l00464"></a>00464                                 merged_range.to_string());
<a name="l00465"></a>00465                     }
<a name="l00466"></a>00466                     intlv_ranges.clear();
<a name="l00467"></a>00467                 }
<a name="l00468"></a>00468                 intlv_ranges.push_back(r-&gt;first);
<a name="l00469"></a>00469             } <span class="keywordflow">else</span> {
<a name="l00470"></a>00470                 <span class="comment">// keep the current range if not a subset of the default</span>
<a name="l00471"></a>00471                 <span class="keywordflow">if</span> (!(<a class="code" href="classBaseBus.html#a1b0312e896847e0ef8bbad93fa73dc4c">useDefaultRange</a> &amp;&amp;
<a name="l00472"></a>00472                       r-&gt;first.isSubset(<a class="code" href="classBaseBus.html#aacb632304c6d3351600303116de8870d">defaultRange</a>))) {
<a name="l00473"></a>00473                     <a class="code" href="classBaseBus.html#ae980bda7663fbe15e79dd75a91d8448c">busRanges</a>.push_back(r-&gt;first);
<a name="l00474"></a>00474                     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BusAddrRanges, <span class="stringliteral">&quot;-- Adding range %s\n&quot;</span>,
<a name="l00475"></a>00475                             r-&gt;first.to_string());
<a name="l00476"></a>00476                 }
<a name="l00477"></a>00477             }
<a name="l00478"></a>00478         }
<a name="l00479"></a>00479 
<a name="l00480"></a>00480         <span class="comment">// if there is still interleaved ranges waiting to be merged,</span>
<a name="l00481"></a>00481         <span class="comment">// go ahead and do it</span>
<a name="l00482"></a>00482         <span class="keywordflow">if</span> (!intlv_ranges.empty()) {
<a name="l00483"></a>00483             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BusAddrRanges, <span class="stringliteral">&quot;-- Merging range from %d ranges\n&quot;</span>,
<a name="l00484"></a>00484                     intlv_ranges.size());
<a name="l00485"></a>00485             <a class="code" href="classAddrRange.html">AddrRange</a> merged_range(intlv_ranges);
<a name="l00486"></a>00486             <span class="keywordflow">if</span> (!(<a class="code" href="classBaseBus.html#a1b0312e896847e0ef8bbad93fa73dc4c">useDefaultRange</a> &amp;&amp; merged_range.isSubset(<a class="code" href="classBaseBus.html#aacb632304c6d3351600303116de8870d">defaultRange</a>))) {
<a name="l00487"></a>00487                 <a class="code" href="classBaseBus.html#ae980bda7663fbe15e79dd75a91d8448c">busRanges</a>.push_back(merged_range);
<a name="l00488"></a>00488                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(BusAddrRanges, <span class="stringliteral">&quot;-- Adding merged range %s\n&quot;</span>,
<a name="l00489"></a>00489                         merged_range.to_string());
<a name="l00490"></a>00490             }
<a name="l00491"></a>00491         }
<a name="l00492"></a>00492 
<a name="l00493"></a>00493         <span class="comment">// also check that no range partially overlaps with the</span>
<a name="l00494"></a>00494         <span class="comment">// default range, this has to be done after all ranges are set</span>
<a name="l00495"></a>00495         <span class="comment">// as there are no guarantees for when the default range is</span>
<a name="l00496"></a>00496         <span class="comment">// update with respect to the other ones</span>
<a name="l00497"></a>00497         <span class="keywordflow">if</span> (<a class="code" href="classBaseBus.html#a1b0312e896847e0ef8bbad93fa73dc4c">useDefaultRange</a>) {
<a name="l00498"></a>00498             <span class="keywordflow">for</span> (<a class="code" href="port_8hh.html#a0f4385f0a7bf93ed2e39e1a630b291b0">AddrRangeConstIter</a> r = <a class="code" href="classBaseBus.html#ae980bda7663fbe15e79dd75a91d8448c">busRanges</a>.begin();
<a name="l00499"></a>00499                  r != <a class="code" href="classBaseBus.html#ae980bda7663fbe15e79dd75a91d8448c">busRanges</a>.end(); ++r) {
<a name="l00500"></a>00500                 <span class="comment">// see if the new range is partially</span>
<a name="l00501"></a>00501                 <span class="comment">// overlapping the default range</span>
<a name="l00502"></a>00502                 <span class="keywordflow">if</span> (r-&gt;intersects(<a class="code" href="classBaseBus.html#aacb632304c6d3351600303116de8870d">defaultRange</a>) &amp;&amp;
<a name="l00503"></a>00503                     !r-&gt;isSubset(<a class="code" href="classBaseBus.html#aacb632304c6d3351600303116de8870d">defaultRange</a>))
<a name="l00504"></a>00504                     <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;Range %s intersects the &quot;</span>                    \
<a name="l00505"></a>00505                           <span class="stringliteral">&quot;default range of %s but is not a &quot;</span>           \
<a name="l00506"></a>00506                           <span class="stringliteral">&quot;subset\n&quot;</span>, r-&gt;to_string(), <a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>());
<a name="l00507"></a>00507             }
<a name="l00508"></a>00508         }
<a name="l00509"></a>00509 
<a name="l00510"></a>00510         <span class="comment">// tell all our neighbouring master ports that our address</span>
<a name="l00511"></a>00511         <span class="comment">// ranges have changed</span>
<a name="l00512"></a>00512         <span class="keywordflow">for</span> (<a class="code" href="classBaseBus.html#a4cfbb26aa06c3132b77227f45f39e224">SlavePortConstIter</a> <a class="code" href="namespaceArmISA.html#afaeb18e17f862d8fcb76dfb68a18854f">s</a> = <a class="code" href="classBaseBus.html#a9f084bf86a306772d84ad52e839cce97">slavePorts</a>.begin(); <a class="code" href="namespaceArmISA.html#afaeb18e17f862d8fcb76dfb68a18854f">s</a> != <a class="code" href="classBaseBus.html#a9f084bf86a306772d84ad52e839cce97">slavePorts</a>.end();
<a name="l00513"></a>00513              ++<a class="code" href="namespaceArmISA.html#afaeb18e17f862d8fcb76dfb68a18854f">s</a>)
<a name="l00514"></a>00514             (*s)-&gt;sendRangeChange();
<a name="l00515"></a>00515     }
<a name="l00516"></a>00516 
<a name="l00517"></a>00517     <a class="code" href="classBaseBus.html#a2b259c34a080563d0e03d5a1fec2cd7a">clearPortCache</a>();
<a name="l00518"></a>00518 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4dc637449366fcdfc4e764cdf12d9b11"></a><!-- doxytag: member="BaseBus::regStats" ref="a4dc637449366fcdfc4e764cdf12d9b11" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void regStats </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classRegister.html">Register</a> statistics for this object. </p>

<p><a class="el" href="classSimObject.html#a4dc637449366fcdfc4e764cdf12d9b11">SimObject</a>を再定義しています。</p>

<p><a class="el" href="classCoherentBus.html#a4dc637449366fcdfc4e764cdf12d9b11">CoherentBus</a>, と <a class="el" href="classNoncoherentBus.html#a4dc637449366fcdfc4e764cdf12d9b11">NoncoherentBus</a>で再定義されています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00540"></a>00540 {
<a name="l00541"></a>00541     <span class="keyword">using namespace </span>Stats;
<a name="l00542"></a>00542 
<a name="l00543"></a>00543     <a class="code" href="classBaseBus.html#a3eb88cd36449bb56229422858d34194d">transDist</a>
<a name="l00544"></a>00544         .<a class="code" href="classStats_1_1VectorBase.html#ae41cad1a02eeb7958df026d8e2cc7582">init</a>(<a class="code" href="classMemCmd.html#a2afce0a47a93eee73a314d53e4890153ab6c8ff23baaad61d567c54b53529e7e4">MemCmd::NUM_MEM_CMDS</a>)
<a name="l00545"></a>00545         .name(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.trans_dist&quot;</span>)
<a name="l00546"></a>00546         .desc(<span class="stringliteral">&quot;Transaction distribution&quot;</span>)
<a name="l00547"></a>00547         .flags(<a class="code" href="namespaceStats.html#aea66fede55fadabd06c458fb36736378">nozero</a>);
<a name="l00548"></a>00548 
<a name="l00549"></a>00549     <span class="comment">// get the string representation of the commands</span>
<a name="l00550"></a>00550     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classMemCmd.html#a2afce0a47a93eee73a314d53e4890153ab6c8ff23baaad61d567c54b53529e7e4">MemCmd::NUM_MEM_CMDS</a>; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00551"></a>00551         <a class="code" href="classMemCmd.html">MemCmd</a> cmd(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>);
<a name="l00552"></a>00552         <span class="keyword">const</span> std::string &amp;cstr = cmd.toString();
<a name="l00553"></a>00553         <a class="code" href="classBaseBus.html#a3eb88cd36449bb56229422858d34194d">transDist</a>.<a class="code" href="classStats_1_1DataWrapVec.html#a74726d23d92792c7c3cebdaf3bfd23f0">subname</a>(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>, cstr);
<a name="l00554"></a>00554     }
<a name="l00555"></a>00555 
<a name="l00556"></a>00556     <a class="code" href="classBaseBus.html#a1444e1d672a8bfe518b9c3d05412985a">pktCount</a>
<a name="l00557"></a>00557         .<a class="code" href="classStats_1_1Vector2dBase.html#ab9a02aa81f6a70a71d2dc2c155acbcac">init</a>(<a class="code" href="classBaseBus.html#a9f084bf86a306772d84ad52e839cce97">slavePorts</a>.size(), <a class="code" href="classBaseBus.html#a0f7b2e1619b03085b0a28bb3216cd562">masterPorts</a>.size())
<a name="l00558"></a>00558         .<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.pkt_count&quot;</span>)
<a name="l00559"></a>00559         .desc(<span class="stringliteral">&quot;Packet count per connected master and slave (bytes)&quot;</span>)
<a name="l00560"></a>00560         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a> | <a class="code" href="namespaceStats.html#aea66fede55fadabd06c458fb36736378">nozero</a> | <a class="code" href="namespaceStats.html#a8e574059d445838aa4d851c263cb0e78">nonan</a>);
<a name="l00561"></a>00561 
<a name="l00562"></a>00562     <a class="code" href="classBaseBus.html#a1b2222f1cfbd8c191ad8d1099fd24848">totPktSize</a>
<a name="l00563"></a>00563         .<a class="code" href="classStats_1_1Vector2dBase.html#ab9a02aa81f6a70a71d2dc2c155acbcac">init</a>(<a class="code" href="classBaseBus.html#a9f084bf86a306772d84ad52e839cce97">slavePorts</a>.size(), <a class="code" href="classBaseBus.html#a0f7b2e1619b03085b0a28bb3216cd562">masterPorts</a>.size())
<a name="l00564"></a>00564         .<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.tot_pkt_size&quot;</span>)
<a name="l00565"></a>00565         .desc(<span class="stringliteral">&quot;Cumulative packet size per connected master and slave (bytes)&quot;</span>)
<a name="l00566"></a>00566         .flags(<a class="code" href="namespaceStats.html#a4031dfee086a6a4cf1deea1fff2e0d5c">total</a> | <a class="code" href="namespaceStats.html#aea66fede55fadabd06c458fb36736378">nozero</a> | <a class="code" href="namespaceStats.html#a8e574059d445838aa4d851c263cb0e78">nonan</a>);
<a name="l00567"></a>00567 
<a name="l00568"></a>00568     <span class="comment">// both the packet count and total size are two-dimensional</span>
<a name="l00569"></a>00569     <span class="comment">// vectors, indexed by slave port id and master port id, thus the</span>
<a name="l00570"></a>00570     <span class="comment">// neighbouring master and slave, they do not differentiate what</span>
<a name="l00571"></a>00571     <span class="comment">// came from the master and was forwarded to the slave (requests</span>
<a name="l00572"></a>00572     <span class="comment">// and snoop responses) and what came from the slave and was</span>
<a name="l00573"></a>00573     <span class="comment">// forwarded to the master (responses and snoop requests)</span>
<a name="l00574"></a>00574     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; <a class="code" href="classBaseBus.html#a9f084bf86a306772d84ad52e839cce97">slavePorts</a>.size(); <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>++) {
<a name="l00575"></a>00575         <a class="code" href="classBaseBus.html#a1444e1d672a8bfe518b9c3d05412985a">pktCount</a>.<a class="code" href="classStats_1_1DataWrapVec.html#a74726d23d92792c7c3cebdaf3bfd23f0">subname</a>(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>, <a class="code" href="classBaseBus.html#a9f084bf86a306772d84ad52e839cce97">slavePorts</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>]-&gt;<a class="code" href="classBaseBus.html#adc4e675e51defbdd1e354dac729d0703">getMasterPort</a>().<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>());
<a name="l00576"></a>00576         <a class="code" href="classBaseBus.html#a1b2222f1cfbd8c191ad8d1099fd24848">totPktSize</a>.<a class="code" href="classStats_1_1DataWrapVec.html#a74726d23d92792c7c3cebdaf3bfd23f0">subname</a>(<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>, <a class="code" href="classBaseBus.html#a9f084bf86a306772d84ad52e839cce97">slavePorts</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>]-&gt;<a class="code" href="classBaseBus.html#adc4e675e51defbdd1e354dac729d0703">getMasterPort</a>().<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>());
<a name="l00577"></a>00577         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#adda8322536e2853111a71e4e2f911762">j</a> = 0; <a class="code" href="namespaceArmISA.html#adda8322536e2853111a71e4e2f911762">j</a> &lt; <a class="code" href="classBaseBus.html#a0f7b2e1619b03085b0a28bb3216cd562">masterPorts</a>.size(); <a class="code" href="namespaceArmISA.html#adda8322536e2853111a71e4e2f911762">j</a>++) {
<a name="l00578"></a>00578             <a class="code" href="classBaseBus.html#a1444e1d672a8bfe518b9c3d05412985a">pktCount</a>.<a class="code" href="classStats_1_1DataWrapVec2d.html#ac3f960761325c75597115739290c014f">ysubname</a>(<a class="code" href="namespaceArmISA.html#adda8322536e2853111a71e4e2f911762">j</a>, <a class="code" href="classBaseBus.html#a0f7b2e1619b03085b0a28bb3216cd562">masterPorts</a>[<a class="code" href="namespaceArmISA.html#adda8322536e2853111a71e4e2f911762">j</a>]-&gt;<a class="code" href="classBaseBus.html#ac918a145092d7514ebc6dbd952dceafb">getSlavePort</a>().<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>());
<a name="l00579"></a>00579             <a class="code" href="classBaseBus.html#a1b2222f1cfbd8c191ad8d1099fd24848">totPktSize</a>.<a class="code" href="classStats_1_1DataWrapVec2d.html#ac3f960761325c75597115739290c014f">ysubname</a>(<a class="code" href="namespaceArmISA.html#adda8322536e2853111a71e4e2f911762">j</a>, <a class="code" href="classBaseBus.html#a0f7b2e1619b03085b0a28bb3216cd562">masterPorts</a>[<a class="code" href="namespaceArmISA.html#adda8322536e2853111a71e4e2f911762">j</a>]-&gt;<a class="code" href="classBaseBus.html#ac918a145092d7514ebc6dbd952dceafb">getSlavePort</a>().<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>());
<a name="l00580"></a>00580         }
<a name="l00581"></a>00581     }
<a name="l00582"></a>00582 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3b429b2b5fe74236299bcb556d2308e7"></a><!-- doxytag: member="BaseBus::updatePortCache" ref="a3b429b2b5fe74236299bcb556d2308e7" args="(short id, const AddrRange &amp;range)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updatePortCache </td>
          <td>(</td>
          <td class="paramtype">short&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classAddrRange.html">AddrRange</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>range</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00311"></a>00311                                                                   {
<a name="l00312"></a>00312         <a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[2].<a class="code" href="structBaseBus_1_1PortCache.html#a28e3c179a86f337095088b3ca02a2b2a">valid</a> = <a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[1].<a class="code" href="structBaseBus_1_1PortCache.html#a28e3c179a86f337095088b3ca02a2b2a">valid</a>;
<a name="l00313"></a>00313         <a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[2].<a class="code" href="structBaseBus_1_1PortCache.html#a34ff492e343069602bcc51eb116a061f">id</a>    = <a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[1].<a class="code" href="structBaseBus_1_1PortCache.html#a34ff492e343069602bcc51eb116a061f">id</a>;
<a name="l00314"></a>00314         <a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[2].<a class="code" href="structBaseBus_1_1PortCache.html#a194876a072a83a9fd59dde82e5213f0d">range</a> = <a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[1].<a class="code" href="structBaseBus_1_1PortCache.html#a194876a072a83a9fd59dde82e5213f0d">range</a>;
<a name="l00315"></a>00315 
<a name="l00316"></a>00316         <a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[1].<a class="code" href="structBaseBus_1_1PortCache.html#a28e3c179a86f337095088b3ca02a2b2a">valid</a> = <a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[0].<a class="code" href="structBaseBus_1_1PortCache.html#a28e3c179a86f337095088b3ca02a2b2a">valid</a>;
<a name="l00317"></a>00317         <a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[1].<a class="code" href="structBaseBus_1_1PortCache.html#a34ff492e343069602bcc51eb116a061f">id</a>    = <a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[0].<a class="code" href="structBaseBus_1_1PortCache.html#a34ff492e343069602bcc51eb116a061f">id</a>;
<a name="l00318"></a>00318         <a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[1].<a class="code" href="structBaseBus_1_1PortCache.html#a194876a072a83a9fd59dde82e5213f0d">range</a> = <a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[0].<a class="code" href="structBaseBus_1_1PortCache.html#a194876a072a83a9fd59dde82e5213f0d">range</a>;
<a name="l00319"></a>00319 
<a name="l00320"></a>00320         <a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[0].<a class="code" href="structBaseBus_1_1PortCache.html#a28e3c179a86f337095088b3ca02a2b2a">valid</a> = <span class="keyword">true</span>;
<a name="l00321"></a>00321         <a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[0].<a class="code" href="structBaseBus_1_1PortCache.html#a34ff492e343069602bcc51eb116a061f">id</a>    = <a class="code" href="namespaceSparcISA.html#a2b4cf644f5af9ebaec502fb09986f302">id</a>;
<a name="l00322"></a>00322         <a class="code" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[0].<a class="code" href="structBaseBus_1_1PortCache.html#a194876a072a83a9fd59dde82e5213f0d">range</a> = range;
<a name="l00323"></a>00323     }
</pre></div></p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="ae980bda7663fbe15e79dd75a91d8448c"></a><!-- doxytag: member="BaseBus::busRanges" ref="ae980bda7663fbe15e79dd75a91d8448c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1list.html">AddrRangeList</a> <a class="el" href="classBaseBus.html#ae980bda7663fbe15e79dd75a91d8448c">busRanges</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>all contigous ranges seen by this bus </p>

</div>
</div>
<a class="anchor" id="a769e7b27ddafebcc1228757f2c9ec1ba"></a><!-- doxytag: member="BaseBus::defaultPortID" ref="a769e7b27ddafebcc1228757f2c9ec1ba" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#acef4d7d41cb21fdc252e20c04cd7bb8e">PortID</a> <a class="el" href="classBaseBus.html#a769e7b27ddafebcc1228757f2c9ec1ba">defaultPortID</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classPort.html">Port</a> that handles requests that don't match any of the interfaces. </p>

</div>
</div>
<a class="anchor" id="aacb632304c6d3351600303116de8870d"></a><!-- doxytag: member="BaseBus::defaultRange" ref="aacb632304c6d3351600303116de8870d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classAddrRange.html">AddrRange</a> <a class="el" href="classBaseBus.html#aacb632304c6d3351600303116de8870d">defaultRange</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ace0f90dcdbf1c53391c0971acc0269ec"></a><!-- doxytag: member="BaseBus::gotAddrRanges" ref="ace0f90dcdbf1c53391c0971acc0269ec" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt;bool&gt; <a class="el" href="classBaseBus.html#ace0f90dcdbf1c53391c0971acc0269ec">gotAddrRanges</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Remember for each of the master ports of the bus if we got an address range from the connected slave. For convenience, also keep track of if we got ranges from all the slave modules or not. </p>

</div>
</div>
<a class="anchor" id="a0c924502f5e6c095ac7dcbdaf3e177a4"></a><!-- doxytag: member="BaseBus::gotAllAddrRanges" ref="a0c924502f5e6c095ac7dcbdaf3e177a4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBaseBus.html#a0c924502f5e6c095ac7dcbdaf3e177a4">gotAllAddrRanges</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab9c87c91aa592a3542152117cdb99c9b"></a><!-- doxytag: member="BaseBus::headerCycles" ref="ab9c87c91aa592a3542152117cdb99c9b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classCycles.html">Cycles</a> <a class="el" href="classBaseBus.html#ab9c87c91aa592a3542152117cdb99c9b">headerCycles</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>cycles of overhead per transaction </p>

</div>
</div>
<a class="anchor" id="a0f7b2e1619b03085b0a28bb3216cd562"></a><!-- doxytag: member="BaseBus::masterPorts" ref="a0f7b2e1619b03085b0a28bb3216cd562" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt;<a class="el" href="classMasterPort.html">MasterPort</a>*&gt; <a class="el" href="classBaseBus.html#a0f7b2e1619b03085b0a28bb3216cd562">masterPorts</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1444e1d672a8bfe518b9c3d05412985a"></a><!-- doxytag: member="BaseBus::pktCount" ref="a1444e1d672a8bfe518b9c3d05412985a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Vector2d.html">Stats::Vector2d</a> <a class="el" href="classBaseBus.html#a1444e1d672a8bfe518b9c3d05412985a">pktCount</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab8fed472717f8738191c2977c81e530b"></a><!-- doxytag: member="BaseBus::portCache" ref="ab8fed472717f8738191c2977c81e530b" args="[3]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structBaseBus_1_1PortCache.html">PortCache</a> <a class="el" href="classBaseBus.html#ab8fed472717f8738191c2977c81e530b">portCache</a>[3]<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a81c901d8c13bd997dee7a12453bb29e9"></a><!-- doxytag: member="BaseBus::portMap" ref="a81c901d8c13bd997dee7a12453bb29e9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classAddrRangeMap.html">AddrRangeMap</a>&lt;<a class="el" href="base_2types_8hh.html#acef4d7d41cb21fdc252e20c04cd7bb8e">PortID</a>&gt; <a class="el" href="classBaseBus.html#a81c901d8c13bd997dee7a12453bb29e9">portMap</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9f084bf86a306772d84ad52e839cce97"></a><!-- doxytag: member="BaseBus::slavePorts" ref="a9f084bf86a306772d84ad52e839cce97" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt;<a class="el" href="classSlavePort.html">SlavePort</a>*&gt; <a class="el" href="classBaseBus.html#a9f084bf86a306772d84ad52e839cce97">slavePorts</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The master and slave ports of the bus </p>

</div>
</div>
<a class="anchor" id="ac7ddaff47c2ff8945ba85797af602673"></a><!-- doxytag: member="BaseBus::throughput" ref="ac7ddaff47c2ff8945ba85797af602673" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Formula.html">Stats::Formula</a> <a class="el" href="classBaseBus.html#ac7ddaff47c2ff8945ba85797af602673">throughput</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="namespaceStats.html">Stats</a> for transaction distribution and data passing through the bus. The transaction distribution is globally counting different types of commands. The packet count and total packet size are two-dimensional vectors that are indexed by the bus slave port and master port id (thus the neighbouring master and neighbouring slave), summing up both directions (request and response). </p>

</div>
</div>
<a class="anchor" id="a1b2222f1cfbd8c191ad8d1099fd24848"></a><!-- doxytag: member="BaseBus::totPktSize" ref="a1b2222f1cfbd8c191ad8d1099fd24848" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Vector2d.html">Stats::Vector2d</a> <a class="el" href="classBaseBus.html#a1b2222f1cfbd8c191ad8d1099fd24848">totPktSize</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3eb88cd36449bb56229422858d34194d"></a><!-- doxytag: member="BaseBus::transDist" ref="a3eb88cd36449bb56229422858d34194d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Vector.html">Stats::Vector</a> <a class="el" href="classBaseBus.html#a3eb88cd36449bb56229422858d34194d">transDist</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1b0312e896847e0ef8bbad93fa73dc4c"></a><!-- doxytag: member="BaseBus::useDefaultRange" ref="a1b0312e896847e0ef8bbad93fa73dc4c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const bool <a class="el" href="classBaseBus.html#a1b0312e896847e0ef8bbad93fa73dc4c">useDefaultRange</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>If true, use address range provided by default device. Any address not handled by another port and not in default device's range will cause a fatal error. If false, just send all addresses not handled by another port to default device. </p>

</div>
</div>
<a class="anchor" id="a4c2292bdfd51cf112bcde1ad3fa55ac4"></a><!-- doxytag: member="BaseBus::width" ref="a4c2292bdfd51cf112bcde1ad3fa55ac4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="classBaseBus.html#a4c2292bdfd51cf112bcde1ad3fa55ac4">width</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>the width of the bus in bytes </p>

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>mem/<a class="el" href="bus_8hh_source.html">bus.hh</a></li>
<li>mem/<a class="el" href="bus_8cc.html">bus.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
