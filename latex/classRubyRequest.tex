\hypertarget{classRubyRequest}{
\section{クラス RubyRequest}
\label{classRubyRequest}\index{RubyRequest@{RubyRequest}}
}


{\ttfamily \#include $<$RubyRequest.hh$>$}RubyRequestに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3cm]{classRubyRequest}
\end{center}
\end{figure}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classRubyRequest_addadf754744cca088ebfc27c8749f0e1}{RubyRequest} (\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} curTime, uint64\_\-t \_\-paddr, uint8\_\-t $\ast$\_\-data, int \_\-len, uint64\_\-t \_\-pc, RubyRequestType \_\-type, RubyAccessMode \_\-access\_\-mode, \hyperlink{classPacket}{PacketPtr} \_\-pkt, PrefetchBit \_\-pb=PrefetchBit\_\-No, unsigned \_\-proc\_\-id=100)
\item 
\hyperlink{classRubyRequest_a5b30411c5d1e4fa31513ce58b01b4c41}{RubyRequest} (\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} curTime)
\item 
\hyperlink{classRubyRequest}{RubyRequest} $\ast$ \hyperlink{classRubyRequest_a2589cd17f2bbc4a7cd72c3996d880819}{clone} () const 
\item 
const \hyperlink{classAddress}{Address} \& \hyperlink{classRubyRequest_a6cefddc635a0735c8131dbef85b4231c}{getLineAddress} () const 
\item 
const \hyperlink{classAddress}{Address} \& \hyperlink{classRubyRequest_abbc0034e2c929ff925dc7c9fd1128110}{getPhysicalAddress} () const 
\item 
const RubyRequestType \& \hyperlink{classRubyRequest_a0d40c12aa8cabb3a72487962e0b96f06}{getType} () const 
\item 
const \hyperlink{classAddress}{Address} \& \hyperlink{classRubyRequest_a9be9ffdd4d619ecc2572291d09e374ed}{getProgramCounter} () const 
\item 
const RubyAccessMode \& \hyperlink{classRubyRequest_ada8f61552814cdc121bec32f1ec92660}{getAccessMode} () const 
\item 
const int \& \hyperlink{classRubyRequest_a50b2018251eb77a7549ee1d6e99df50f}{getSize} () const 
\item 
const PrefetchBit \& \hyperlink{classRubyRequest_ad92e4eed0c01509c3469c38da385d0c0}{getPrefetch} () const 
\item 
void \hyperlink{classRubyRequest_ac55fe386a101fbae38c716067c9966a0}{print} (std::ostream \&out) const 
\item 
bool \hyperlink{classRubyRequest_a729f57f557bb42c045c47d9388f1030e}{functionalRead} (\hyperlink{classPacket}{Packet} $\ast$\hyperlink{classRubyRequest_a3a891bc2a0fcbe6be5297077d94e2df7}{pkt})
\item 
bool \hyperlink{classRubyRequest_a14bf46f4c6bb79e5357096af6b9dbffa}{functionalWrite} (\hyperlink{classPacket}{Packet} $\ast$\hyperlink{classRubyRequest_a3a891bc2a0fcbe6be5297077d94e2df7}{pkt})
\end{DoxyCompactItemize}
\subsection*{Public 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classAddress}{Address} \hyperlink{classRubyRequest_a7c96109098594912107df11d774fb074}{m\_\-PhysicalAddress}
\item 
\hyperlink{classAddress}{Address} \hyperlink{classRubyRequest_a6c03709bdb08697b25ef39357b680a2a}{m\_\-LineAddress}
\item 
RubyRequestType \hyperlink{classRubyRequest_a0af11cf356fee21e4efa5af9c04f899f}{m\_\-Type}
\item 
\hyperlink{classAddress}{Address} \hyperlink{classRubyRequest_a969946fed3bff0265b5fb26d9142020d}{m\_\-ProgramCounter}
\item 
RubyAccessMode \hyperlink{classRubyRequest_ad96100499e61560c3eabb53df1a36b3a}{m\_\-AccessMode}
\item 
int \hyperlink{classRubyRequest_a75eae7d22f07ee4b6bd79aca92932601}{m\_\-Size}
\item 
PrefetchBit \hyperlink{classRubyRequest_af0ed8dc909378d2f8109d2c4a97d9495}{m\_\-Prefetch}
\item 
uint8\_\-t $\ast$ \hyperlink{classRubyRequest_abe222f6d3581e7920dcad5306cc906a8}{data}
\item 
\hyperlink{classPacket}{PacketPtr} \hyperlink{classRubyRequest_a3a891bc2a0fcbe6be5297077d94e2df7}{pkt}
\item 
unsigned \hyperlink{classRubyRequest_aa37a0c2dd13f87bc0eccc95587a92d71}{m\_\-contextId}
\end{DoxyCompactItemize}


\subsection{コンストラクタとデストラクタ}
\hypertarget{classRubyRequest_addadf754744cca088ebfc27c8749f0e1}{
\index{RubyRequest@{RubyRequest}!RubyRequest@{RubyRequest}}
\index{RubyRequest@{RubyRequest}!RubyRequest@{RubyRequest}}
\subsubsection[{RubyRequest}]{\setlength{\rightskip}{0pt plus 5cm}{\bf RubyRequest} ({\bf Tick} {\em curTime}, \/  uint64\_\-t {\em \_\-paddr}, \/  uint8\_\-t $\ast$ {\em \_\-data}, \/  int {\em \_\-len}, \/  uint64\_\-t {\em \_\-pc}, \/  RubyRequestType {\em \_\-type}, \/  RubyAccessMode {\em \_\-access\_\-mode}, \/  {\bf PacketPtr} {\em \_\-pkt}, \/  PrefetchBit {\em \_\-pb} = {\ttfamily PrefetchBit\_\-No}, \/  unsigned {\em \_\-proc\_\-id} = {\ttfamily 100})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classRubyRequest_addadf754744cca088ebfc27c8749f0e1}



\begin{DoxyCode}
58         : Message(curTime),
59           m_PhysicalAddress(_paddr),
60           m_Type(_type),
61           m_ProgramCounter(_pc),
62           m_AccessMode(_access_mode),
63           m_Size(_len),
64           m_Prefetch(_pb),
65           data(_data),
66           pkt(_pkt),
67           m_contextId(_proc_id)
68     {
69       m_LineAddress = m_PhysicalAddress;
70       m_LineAddress.makeLineAddress();
71     }
\end{DoxyCode}
\hypertarget{classRubyRequest_a5b30411c5d1e4fa31513ce58b01b4c41}{
\index{RubyRequest@{RubyRequest}!RubyRequest@{RubyRequest}}
\index{RubyRequest@{RubyRequest}!RubyRequest@{RubyRequest}}
\subsubsection[{RubyRequest}]{\setlength{\rightskip}{0pt plus 5cm}{\bf RubyRequest} ({\bf Tick} {\em curTime})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classRubyRequest_a5b30411c5d1e4fa31513ce58b01b4c41}



\begin{DoxyCode}
73 : Message(curTime) {}
\end{DoxyCode}


\subsection{関数}
\hypertarget{classRubyRequest_a2589cd17f2bbc4a7cd72c3996d880819}{
\index{RubyRequest@{RubyRequest}!clone@{clone}}
\index{clone@{clone}!RubyRequest@{RubyRequest}}
\subsubsection[{clone}]{\setlength{\rightskip}{0pt plus 5cm}{\bf RubyRequest}$\ast$ clone () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}
\label{classRubyRequest_a2589cd17f2bbc4a7cd72c3996d880819}


\hyperlink{classMessage_a78f6e5c1dc41f5316e10bba31ee0d8a1}{Message}を実装しています。


\begin{DoxyCode}
74 { return new RubyRequest(*this); }
\end{DoxyCode}
\hypertarget{classRubyRequest_a729f57f557bb42c045c47d9388f1030e}{
\index{RubyRequest@{RubyRequest}!functionalRead@{functionalRead}}
\index{functionalRead@{functionalRead}!RubyRequest@{RubyRequest}}
\subsubsection[{functionalRead}]{\setlength{\rightskip}{0pt plus 5cm}bool functionalRead ({\bf Packet} $\ast$ {\em pkt})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classRubyRequest_a729f57f557bb42c045c47d9388f1030e}
The two functions below are used for reading / writing the message functionally. The methods return true if the address in the packet matches the address / address range in the message. Each message class that can be potentially searched for the address needs to implement these methods. 

\hyperlink{classMessage_a050cc08996aae4295aee40e8871788b7}{Message}を実装しています。


\begin{DoxyCode}
52 {
53     // This needs a little explanation. Initially I thought that this
54     // message should be read. But the way the memtester works for now,
55     // we should not be reading this message as memtester updates the
56     // functional memory only after a write has actually taken place.
57     return false;
58 }
\end{DoxyCode}
\hypertarget{classRubyRequest_a14bf46f4c6bb79e5357096af6b9dbffa}{
\index{RubyRequest@{RubyRequest}!functionalWrite@{functionalWrite}}
\index{functionalWrite@{functionalWrite}!RubyRequest@{RubyRequest}}
\subsubsection[{functionalWrite}]{\setlength{\rightskip}{0pt plus 5cm}bool functionalWrite ({\bf Packet} $\ast$ {\em pkt})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classRubyRequest_a14bf46f4c6bb79e5357096af6b9dbffa}


\hyperlink{classMessage_a1a7af86f43fb867628a3c3cf76e4dcc9}{Message}を実装しています。


\begin{DoxyCode}
62 {
63     // This needs a little explanation. I am not sure if this message
64     // should be written. Essentially the question is how are writes
65     // ordered. I am assuming that if a functional write is issued after
66     // a timing write to the same address, then the functional write
67     // has to overwrite the data for the timing request, even if the
68     // timing request has still not been ordered globally.
69 
70     Addr wBase = pkt->getAddr();
71     Addr wTail = wBase + pkt->getSize();
72     Addr mBase = m_PhysicalAddress.getAddress();
73     Addr mTail = mBase + m_Size;
74 
75     uint8_t * pktData = pkt->getPtr<uint8_t>(true);
76 
77     Addr cBase = std::max(wBase, mBase);
78     Addr cTail = std::min(wTail, mTail);
79 
80     for (Addr i = cBase; i < cTail; ++i) {
81         data[i - mBase] = pktData[i - wBase];
82     }
83 
84     return cBase < cTail;
85 }
\end{DoxyCode}
\hypertarget{classRubyRequest_ada8f61552814cdc121bec32f1ec92660}{
\index{RubyRequest@{RubyRequest}!getAccessMode@{getAccessMode}}
\index{getAccessMode@{getAccessMode}!RubyRequest@{RubyRequest}}
\subsubsection[{getAccessMode}]{\setlength{\rightskip}{0pt plus 5cm}const RubyAccessMode\& getAccessMode () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classRubyRequest_ada8f61552814cdc121bec32f1ec92660}



\begin{DoxyCode}
80 { return m_AccessMode; }
\end{DoxyCode}
\hypertarget{classRubyRequest_a6cefddc635a0735c8131dbef85b4231c}{
\index{RubyRequest@{RubyRequest}!getLineAddress@{getLineAddress}}
\index{getLineAddress@{getLineAddress}!RubyRequest@{RubyRequest}}
\subsubsection[{getLineAddress}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Address}\& getLineAddress () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classRubyRequest_a6cefddc635a0735c8131dbef85b4231c}



\begin{DoxyCode}
76 { return m_LineAddress; }
\end{DoxyCode}
\hypertarget{classRubyRequest_abbc0034e2c929ff925dc7c9fd1128110}{
\index{RubyRequest@{RubyRequest}!getPhysicalAddress@{getPhysicalAddress}}
\index{getPhysicalAddress@{getPhysicalAddress}!RubyRequest@{RubyRequest}}
\subsubsection[{getPhysicalAddress}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Address}\& getPhysicalAddress () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classRubyRequest_abbc0034e2c929ff925dc7c9fd1128110}



\begin{DoxyCode}
77 { return m_PhysicalAddress; }
\end{DoxyCode}
\hypertarget{classRubyRequest_ad92e4eed0c01509c3469c38da385d0c0}{
\index{RubyRequest@{RubyRequest}!getPrefetch@{getPrefetch}}
\index{getPrefetch@{getPrefetch}!RubyRequest@{RubyRequest}}
\subsubsection[{getPrefetch}]{\setlength{\rightskip}{0pt plus 5cm}const PrefetchBit\& getPrefetch () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classRubyRequest_ad92e4eed0c01509c3469c38da385d0c0}



\begin{DoxyCode}
82 { return m_Prefetch; }
\end{DoxyCode}
\hypertarget{classRubyRequest_a9be9ffdd4d619ecc2572291d09e374ed}{
\index{RubyRequest@{RubyRequest}!getProgramCounter@{getProgramCounter}}
\index{getProgramCounter@{getProgramCounter}!RubyRequest@{RubyRequest}}
\subsubsection[{getProgramCounter}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Address}\& getProgramCounter () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classRubyRequest_a9be9ffdd4d619ecc2572291d09e374ed}



\begin{DoxyCode}
79 { return m_ProgramCounter; }
\end{DoxyCode}
\hypertarget{classRubyRequest_a50b2018251eb77a7549ee1d6e99df50f}{
\index{RubyRequest@{RubyRequest}!getSize@{getSize}}
\index{getSize@{getSize}!RubyRequest@{RubyRequest}}
\subsubsection[{getSize}]{\setlength{\rightskip}{0pt plus 5cm}const int\& getSize () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classRubyRequest_a50b2018251eb77a7549ee1d6e99df50f}



\begin{DoxyCode}
81 { return m_Size; }
\end{DoxyCode}
\hypertarget{classRubyRequest_a0d40c12aa8cabb3a72487962e0b96f06}{
\index{RubyRequest@{RubyRequest}!getType@{getType}}
\index{getType@{getType}!RubyRequest@{RubyRequest}}
\subsubsection[{getType}]{\setlength{\rightskip}{0pt plus 5cm}const RubyRequestType\& getType () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classRubyRequest_a0d40c12aa8cabb3a72487962e0b96f06}



\begin{DoxyCode}
78 { return m_Type; }
\end{DoxyCode}
\hypertarget{classRubyRequest_ac55fe386a101fbae38c716067c9966a0}{
\index{RubyRequest@{RubyRequest}!print@{print}}
\index{print@{print}!RubyRequest@{RubyRequest}}
\subsubsection[{print}]{\setlength{\rightskip}{0pt plus 5cm}void print (std::ostream \& {\em out}) const\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classRubyRequest_ac55fe386a101fbae38c716067c9966a0}


\hyperlink{classMessage_a3ea5f7af5db62cc24f4e40df9ea5c971}{Message}を実装しています。

\subsection{変数}
\hypertarget{classRubyRequest_abe222f6d3581e7920dcad5306cc906a8}{
\index{RubyRequest@{RubyRequest}!data@{data}}
\index{data@{data}!RubyRequest@{RubyRequest}}
\subsubsection[{data}]{\setlength{\rightskip}{0pt plus 5cm}uint8\_\-t$\ast$ {\bf data}}}
\label{classRubyRequest_abe222f6d3581e7920dcad5306cc906a8}
\hypertarget{classRubyRequest_ad96100499e61560c3eabb53df1a36b3a}{
\index{RubyRequest@{RubyRequest}!m\_\-AccessMode@{m\_\-AccessMode}}
\index{m\_\-AccessMode@{m\_\-AccessMode}!RubyRequest@{RubyRequest}}
\subsubsection[{m\_\-AccessMode}]{\setlength{\rightskip}{0pt plus 5cm}RubyAccessMode {\bf m\_\-AccessMode}}}
\label{classRubyRequest_ad96100499e61560c3eabb53df1a36b3a}
\hypertarget{classRubyRequest_aa37a0c2dd13f87bc0eccc95587a92d71}{
\index{RubyRequest@{RubyRequest}!m\_\-contextId@{m\_\-contextId}}
\index{m\_\-contextId@{m\_\-contextId}!RubyRequest@{RubyRequest}}
\subsubsection[{m\_\-contextId}]{\setlength{\rightskip}{0pt plus 5cm}unsigned {\bf m\_\-contextId}}}
\label{classRubyRequest_aa37a0c2dd13f87bc0eccc95587a92d71}
\hypertarget{classRubyRequest_a6c03709bdb08697b25ef39357b680a2a}{
\index{RubyRequest@{RubyRequest}!m\_\-LineAddress@{m\_\-LineAddress}}
\index{m\_\-LineAddress@{m\_\-LineAddress}!RubyRequest@{RubyRequest}}
\subsubsection[{m\_\-LineAddress}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Address} {\bf m\_\-LineAddress}}}
\label{classRubyRequest_a6c03709bdb08697b25ef39357b680a2a}
\hypertarget{classRubyRequest_a7c96109098594912107df11d774fb074}{
\index{RubyRequest@{RubyRequest}!m\_\-PhysicalAddress@{m\_\-PhysicalAddress}}
\index{m\_\-PhysicalAddress@{m\_\-PhysicalAddress}!RubyRequest@{RubyRequest}}
\subsubsection[{m\_\-PhysicalAddress}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Address} {\bf m\_\-PhysicalAddress}}}
\label{classRubyRequest_a7c96109098594912107df11d774fb074}
\hypertarget{classRubyRequest_af0ed8dc909378d2f8109d2c4a97d9495}{
\index{RubyRequest@{RubyRequest}!m\_\-Prefetch@{m\_\-Prefetch}}
\index{m\_\-Prefetch@{m\_\-Prefetch}!RubyRequest@{RubyRequest}}
\subsubsection[{m\_\-Prefetch}]{\setlength{\rightskip}{0pt plus 5cm}PrefetchBit {\bf m\_\-Prefetch}}}
\label{classRubyRequest_af0ed8dc909378d2f8109d2c4a97d9495}
\hypertarget{classRubyRequest_a969946fed3bff0265b5fb26d9142020d}{
\index{RubyRequest@{RubyRequest}!m\_\-ProgramCounter@{m\_\-ProgramCounter}}
\index{m\_\-ProgramCounter@{m\_\-ProgramCounter}!RubyRequest@{RubyRequest}}
\subsubsection[{m\_\-ProgramCounter}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Address} {\bf m\_\-ProgramCounter}}}
\label{classRubyRequest_a969946fed3bff0265b5fb26d9142020d}
\hypertarget{classRubyRequest_a75eae7d22f07ee4b6bd79aca92932601}{
\index{RubyRequest@{RubyRequest}!m\_\-Size@{m\_\-Size}}
\index{m\_\-Size@{m\_\-Size}!RubyRequest@{RubyRequest}}
\subsubsection[{m\_\-Size}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf m\_\-Size}}}
\label{classRubyRequest_a75eae7d22f07ee4b6bd79aca92932601}
\hypertarget{classRubyRequest_a0af11cf356fee21e4efa5af9c04f899f}{
\index{RubyRequest@{RubyRequest}!m\_\-Type@{m\_\-Type}}
\index{m\_\-Type@{m\_\-Type}!RubyRequest@{RubyRequest}}
\subsubsection[{m\_\-Type}]{\setlength{\rightskip}{0pt plus 5cm}RubyRequestType {\bf m\_\-Type}}}
\label{classRubyRequest_a0af11cf356fee21e4efa5af9c04f899f}
\hypertarget{classRubyRequest_a3a891bc2a0fcbe6be5297077d94e2df7}{
\index{RubyRequest@{RubyRequest}!pkt@{pkt}}
\index{pkt@{pkt}!RubyRequest@{RubyRequest}}
\subsubsection[{pkt}]{\setlength{\rightskip}{0pt plus 5cm}{\bf PacketPtr} {\bf pkt}}}
\label{classRubyRequest_a3a891bc2a0fcbe6be5297077d94e2df7}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
mem/ruby/slicc\_\-interface/\hyperlink{RubyRequest_8hh}{RubyRequest.hh}\item 
mem/ruby/slicc\_\-interface/\hyperlink{RubyRequest_8cc}{RubyRequest.cc}\end{DoxyCompactItemize}
