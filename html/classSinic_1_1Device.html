<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File&nbsp;GEM5&nbsp;Wrapper: クラス Device</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- 作成： Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespaceSinic.html">Sinic</a>::<a class="el" href="classSinic_1_1Device.html">Device</a>
  </div>
</div>
<div class="contents">
<h1>クラス Device</h1><!-- doxytag: class="Sinic::Device" --><!-- doxytag: inherits="Sinic::Base" -->
<p><code>#include &lt;<a class="el" href="sinic_8hh_source.html">sinic.hh</a>&gt;</code></p>
<div class="dynheader">
Deviceに対する継承グラフ</div>
<div class="dynsection">
 <div class="center">
  <img src="classSinic_1_1Device.gif" usemap="#Device_map" alt=""/>
  <map id="Device_map" name="Device_map">
<area href="classSinic_1_1Base.html" alt="Base" shape="rect" coords="105,504,200,528"/>
<area href="classEtherDevBase.html" alt="EtherDevBase" shape="rect" coords="105,448,200,472"/>
<area href="classEtherDevice.html" alt="EtherDevice" shape="rect" coords="105,392,200,416"/>
<area href="classPciDevice.html" alt="PciDevice" shape="rect" coords="105,336,200,360"/>
<area href="classDmaDevice.html" alt="DmaDevice" shape="rect" coords="105,280,200,304"/>
<area href="classPioDevice.html" alt="PioDevice" shape="rect" coords="105,224,200,248"/>
<area href="classMemObject.html" alt="MemObject" shape="rect" coords="105,168,200,192"/>
<area href="classClockedObject.html" alt="ClockedObject" shape="rect" coords="105,112,200,136"/>
<area href="classSimObject.html" alt="SimObject" shape="rect" coords="105,56,200,80"/>
<area href="classEventManager.html" alt="EventManager" shape="rect" coords="0,0,95,24"/>
<area href="classSerializable.html" alt="Serializable" shape="rect" coords="105,0,200,24"/>
<area href="classDrainable.html" alt="Drainable" shape="rect" coords="210,0,305,24"/>
</map>
 </div>
</div>

<p><a href="classSinic_1_1Device-members.html">すべてのメンバ一覧</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>構成</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structSinic_1_1Device_1_1VirtualReg.html">VirtualReg</a></td></tr>
<tr><td colspan="2"><h2>Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#ad54e71348f53dfb5444979e9bfaf3164">recvPacket</a> (<a class="el" href="classRefCountingPtr.html">EthPacketPtr</a> packet)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#ac47b2c25cccfafe7e2c12673a1b3e793">transferDone</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classEtherInt.html">EtherInt</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a10260c5a583c0894dcdcd1ced50a53ae">getEthPort</a> (const std::string &amp;if_name, int idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a613ec7d5e1ec64f8d21fec78ae8e568e">read</a> (<a class="el" href="classPacket.html">PacketPtr</a> pkt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a4cefab464e72b5dd42c003a0a4341802">write</a> (<a class="el" href="classPacket.html">PacketPtr</a> pkt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a8f020d3237536fe007fc488c4125c5d8">drainResume</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a65d0ce31d782d0d1233ce4a464e21fe3">prepareIO</a> (int cpu, int index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a90e004f9ca30532075cace46234c6ad5">prepareRead</a> (int cpu, int index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a8527de0a20c247f91f96abe895bf4448">prepareWrite</a> (int cpu, int index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a4dc637449366fcdfc4e764cdf12d9b11">regStats</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a65880e61108132689a1bd769b9187fb7">resetStats</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a53e036786d17361be4c7320d39c99b84">serialize</a> (std::ostream &amp;os)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#af22e5d6d660b97db37003ac61ac4ee49">unserialize</a> (<a class="el" href="classCheckpoint.html">Checkpoint</a> *cp, const std::string &amp;section)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a3e931e68104ea04933647b3c2e08097b">Device</a> (const <a class="el" href="classSinic_1_1Base.html#ae32fbee6dea75ffbb01b7d869c7bedad">Params</a> *p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a3b1601f6f775f47420713f755d1ef320">~Device</a> ()</td></tr>
<tr><td colspan="2"><h2>Protected 型</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82">RxState</a> { <br/>
&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82ab702fffa03e4cec4b054f71cfe34ce7c">rxIdle</a>, 
<a class="el" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82acd42510cc5c902cc3b338fee8106b4ca">rxFifoBlock</a>, 
<a class="el" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82ad650f06241a5757f0fa65acae2960b1f">rxBeginCopy</a>, 
<a class="el" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82acc200faa35bf75419147de6b805d083b">rxCopy</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82a8fbf22d6f8cc55993cc2a09d07418446">rxCopyDone</a>
<br/>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6a">TxState</a> { <br/>
&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aa6ae23f58218fed48a3f17abba689fcb6">txIdle</a>, 
<a class="el" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aaf6571d0685a78da76fe4116ae36afdc3">txFifoBlock</a>, 
<a class="el" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aaf2c21c54301af068a37b641c220915c1">txBeginCopy</a>, 
<a class="el" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aa76918a4583683f130898f157b820164c">txCopy</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aa60ba4d6a047deb74d1eccb2904472127">txCopyDone</a>
<br/>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classstd_1_1vector.html">std::vector</a>&lt; <a class="el" href="structSinic_1_1Device_1_1VirtualReg.html">VirtualReg</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#aa30f329d058c1b4134f557c529c86ca2">VirtualRegs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classstd_1_1list.html">std::list</a>&lt; unsigned &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a825103ea4ae04062ca13fa65d29bcfc6">VirtualList</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classEventWrapper.html">EventWrapper</a>&lt; <a class="el" href="classSinic_1_1Device.html">Device</a>,&amp;Device::rxKick &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a1094ea52a2a9cb27d833549a0407932d">RxKickEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classEventWrapper.html">EventWrapper</a>&lt; <a class="el" href="classSinic_1_1Device.html">Device</a>,&amp;Device::txKick &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#ad902ad2446ba2b0506a150072f971da5">TxKickEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classEventWrapper.html">EventWrapper</a>&lt; <a class="el" href="classSinic_1_1Device.html">Device</a>,&amp;Device::txEventTransmit &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a9a650a51d23bb10d0de3cb621d918e50">TxEvent</a></td></tr>
<tr><td colspan="2"><h2>Protected メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#ab9d3fc8abcb0bc9a41665d6311d64106">regData8</a> (<a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> daddr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#af3697c3ddcc9030231a62c95ddcd193b">regData32</a> (<a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> daddr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a107fa1384335bcf976734520e213a501">regData64</a> (<a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> daddr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#ad20897c5c8bd47f5d4005989bead0e55">reset</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a5fa946a73db6f59c9819d457c991486a">rxKick</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#ac5484e8debdd6a2d3cf4c2902b832a76">txKick</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#af04463ca216d10ffa94db8463cee04c9">transmit</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a2b61c48d7a63b50007517c67e35dfd20">txEventTransmit</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#afe787c5d7928546256f34b65f485be32">txDump</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#aa1b380dc961134ace0f88ee7743b32b6">rxDump</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a5bcec2e17f6aca766b063f7a92289bdb">rxFilter</a> (const <a class="el" href="classRefCountingPtr.html">EthPacketPtr</a> &amp;packet)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#abac0082da5c2420162cd3d183fab4f1f">changeConfig</a> (<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> newconfig)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a8747db3299e3afcb225c4e64f725f453">command</a> (<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> command)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#ae8fff6d9b2bdd860ce365599560f67e7">rxDmaDone</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a5204e0ceaa6484825f9506e447e072c6">txDmaDone</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#ad1a6ea4f31e657c02d56bdf168fb988a">devIntrPost</a> (<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> interrupts)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#af2e6de78cabe5fab3233fb1b29fb478b">devIntrClear</a> (<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> interrupts=Regs::Intr_All)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a776f6f1cbea3e0200c28319eb0d5446b">devIntrChangeMask</a> (<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> newmask)</td></tr>
<tr><td colspan="2"><h2>Protected 変数</h2></td></tr>
<tr><td class="memItemLeft" >struct {</td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#a4ce7377178b8c0ee57726e8a73c06e66">Config</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#a04596aab9f96da6679ea03286f74b3df">Command</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#a48050ef73aa0e6da5537fca47130d76f">IntrStatus</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#aa3e3d884e5a8b959eeccc3660451c7ed">IntrMask</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#a40cf84e9a58828b94d92f3f4af8e2132">RxMaxCopy</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#a8dfcab9c852a1e3e564b4ccceb9a594d">TxMaxCopy</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#a0a6cb3337e941db43aff26f90444592a">ZeroCopySize</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#a93d85f8e9d6efa8d85cce98ef514c54d">ZeroCopyMark</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#a8e55d9d438f57f1cf9bee803876daf7e">VirtualCount</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#a29b4ff4ee34664ea46879c0fed891fe6">RxMaxIntr</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#ad95eeec9a1e7f6804da0d44916333d3c">RxFifoSize</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#a07afc60b5230368629f6b0eb9ab6c51a">TxFifoSize</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#a4d0eb17fd55782f70d98e6b96ccd8d16">RxFifoLow</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#a72783e023c789fe9ff7b3d526a202417">TxFifoLow</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#a5f1b0015444b58705dd253c2e0aed9b4">RxFifoHigh</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;<a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#ae282c8042fb1e67c966a0040eed2c37f">TxFifoHigh</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;uint64_t&nbsp;&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#a6c9104d7b097720d299cae2ffe977554">RxData</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;uint64_t&nbsp;&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#a3eeed0cb70c02a0da59c7a4c407dd6e9">RxDone</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;uint64_t&nbsp;&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#a49b873aef0e771896569f73b69ed5f6a">RxWait</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;uint64_t&nbsp;&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#a6f031a974796558748f14b7ba7f64985">TxData</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;uint64_t&nbsp;&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#ab0c6a1c886fdea04c1107ab914188fe7">TxDone</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;uint64_t&nbsp;&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#aee07d31d26bcedc3ec903158356f7d06">TxWait</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;uint64_t&nbsp;&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#acc1119b12c1f476a7aa533a975ac4249">HwAddr</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;uint64_t&nbsp;&nbsp;&nbsp;<a class="el" href="classSinic_1_1Device.html#a1d5b24603a5677cd3cf0a67f8c44d540">RxStatus</a></td></tr>
<tr><td class="memItemLeft" valign="top">}&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e">Counter</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a98e0c2747f2107c6f81f51e9ba3bdc8a">rxUnique</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e">Counter</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#addcc8e87969e32011941cd144fe23c73">txUnique</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1vector.html">VirtualRegs</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#acb438fcaae56ab29f35376e8b0726c23">virtualRegs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1list.html">VirtualList</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a45202257b5522a1436d8130249ee0a0d">rxList</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1list.html">VirtualList</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#afd33bf96a9045d1f90d0685ad3e33253">rxBusy</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a560efaee55571ea588551a80aadc6cda">rxActive</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1list.html">VirtualList</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a7010216dd085a0c2dac9d6b830a64f35">txList</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a508dbc989a9476f10e7622b054aac7e1">rxBusyCount</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a41d5a12c120010c50c75ea0dc2f01241">rxMappedCount</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a9e5a18ec7025db57fa6ff2f05a289804">rxDirtyCount</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82">RxState</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a17c506ad3a705ec9dbd1762e6a80fbf5">rxState</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPacketFifo.html">PacketFifo</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPacketFifo.html#a6905b6d8863a2eecd86b633802b68fda">PacketFifo::iterator</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#aee345bc47c94b616b04d8f502dab1826">rxFifoPtr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a62b6a5f468811226da2581374919b1a5">rxEmpty</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a1ef589f4a0a6d9baae11626a0d89b5ec">rxLow</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a4a609f84c6849bcfb6dee08329773fca">rxDmaAddr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#ae917f4bc2a610fed06749a854fb89d14">rxDmaData</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a0efc207ddfcff656cbe0237c3bc237c1">rxDmaLen</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6a">TxState</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a12e3a80bef638cd15c067541b96a4756">txState</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPacketFifo.html">PacketFifo</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#ae699c324753236e0a59aa2465920eb46">txFifo</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#aa09cc8a4752916111328b7353e64f3bb">txFull</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRefCountingPtr.html">EthPacketPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#ac0d074adcc00053882737a0009c84adb">txPacketOffset</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a1e82240f06ef6f0c8d8c0bb1a141a600">txPacketBytes</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#aef3a8dd866e8017fd7a675414596ec6b">txDmaAddr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#af56464970a8957faf3a1d35026db6a12">txDmaData</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a5782be4cae30f9377ab0c645a9f65892">txDmaLen</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#aa36d466a86f77d2c7afdc014e3a6f8b3">rxKickTick</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#acfce4fae6fa03f94e3d91d71302fe349">txKickTick</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classEventWrapper.html">TxEvent</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a324fed072a29716c20a98a82927bd2a2">txEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt; <a class="el" href="classSinic_1_1Device.html">Device</a>,&amp;Device::rxDmaDone &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a50d4f78a0a458835572bb101383bf692">rxDmaEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt; <a class="el" href="classSinic_1_1Device.html">Device</a>,&amp;Device::txDmaDone &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a3d31afcc8e7130b3e43e5dc1a0ef0e37">txDmaEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#abff269bf1752a04839eb356b47d4348b">dmaReadDelay</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a632abfe8a89dfa1d944547874f1b4fe4">dmaReadFactor</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#add556e09206ac9f4675d3e2da53339e8">dmaWriteDelay</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a396f950eb0d0a011cfa5790861e32608">dmaWriteFactor</a></td></tr>
<tr><td colspan="2"><h2>Private 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#aceabe9d2fb5f87ee602c22e0d0141479">totalVnicDistance</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a489a76c8b17d7dec4865d06b211218fb">numVnicDistance</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a55159ce061f8632637c330b0b101d370">maxVnicDistance</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Formula.html">Stats::Formula</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a6846633bb8f156a544f88825a26a3090">avgVnicDistance</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a3eb6949618cb5ab7fcb963974eb980a0">_maxVnicDistance</a></td></tr>
<tr><td colspan="2"><h2>フレンド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#aeca94de76c2e5173eca0cd628c06cb43">EventWrapper&lt; Device,&amp;Device::rxDmaDone &gt;</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#af2d0621641d94343bd091391cd6cf46f">EventWrapper&lt; Device,&amp;Device::txDmaDone &gt;</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#a97dc465a9dffe1cb8fcb2775d67610ca">RxKickEvent::process</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#ab1e1e9de6b0b4cbeee1a4c0bb61e07d9">TxKickEvent::process</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSinic_1_1Device.html#ac669bd618effa3395173bc2905568d54">TxEvent::process</a> ()</td></tr>
</table>
<hr/><h2>型定義</h2>
<a class="anchor" id="a1094ea52a2a9cb27d833549a0407932d"></a><!-- doxytag: member="Sinic::Device::RxKickEvent" ref="a1094ea52a2a9cb27d833549a0407932d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classEventWrapper.html">EventWrapper</a>&lt;<a class="el" href="classSinic_1_1Device.html">Device</a>, &amp;Device::rxKick&gt; <a class="el" href="classEventWrapper.html">RxKickEvent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9a650a51d23bb10d0de3cb621d918e50"></a><!-- doxytag: member="Sinic::Device::TxEvent" ref="a9a650a51d23bb10d0de3cb621d918e50" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classEventWrapper.html">EventWrapper</a>&lt;<a class="el" href="classSinic_1_1Device.html">Device</a>, &amp;Device::txEventTransmit&gt; <a class="el" href="classEventWrapper.html">TxEvent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad902ad2446ba2b0506a150072f971da5"></a><!-- doxytag: member="Sinic::Device::TxKickEvent" ref="ad902ad2446ba2b0506a150072f971da5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classEventWrapper.html">EventWrapper</a>&lt;<a class="el" href="classSinic_1_1Device.html">Device</a>, &amp;Device::txKick&gt; <a class="el" href="classEventWrapper.html">TxKickEvent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a825103ea4ae04062ca13fa65d29bcfc6"></a><!-- doxytag: member="Sinic::Device::VirtualList" ref="a825103ea4ae04062ca13fa65d29bcfc6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classstd_1_1list.html">std::list</a>&lt;unsigned&gt; <a class="el" href="classstd_1_1list.html">VirtualList</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa30f329d058c1b4134f557c529c86ca2"></a><!-- doxytag: member="Sinic::Device::VirtualRegs" ref="aa30f329d058c1b4134f557c529c86ca2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classstd_1_1vector.html">std::vector</a>&lt;<a class="el" href="structSinic_1_1Device_1_1VirtualReg.html">VirtualReg</a>&gt; <a class="el" href="classstd_1_1vector.html">VirtualRegs</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>列挙型</h2>
<a class="anchor" id="afa22e66eb5ea0daab0f0cd0360936f82"></a><!-- doxytag: member="Sinic::Device::RxState" ref="afa22e66eb5ea0daab0f0cd0360936f82" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82">RxState</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Receive State Machine States </p>
<dl><dt><b>列挙型の値: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="afa22e66eb5ea0daab0f0cd0360936f82ab702fffa03e4cec4b054f71cfe34ce7c"></a><!-- doxytag: member="rxIdle" ref="afa22e66eb5ea0daab0f0cd0360936f82ab702fffa03e4cec4b054f71cfe34ce7c" args="" -->rxIdle</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="afa22e66eb5ea0daab0f0cd0360936f82acd42510cc5c902cc3b338fee8106b4ca"></a><!-- doxytag: member="rxFifoBlock" ref="afa22e66eb5ea0daab0f0cd0360936f82acd42510cc5c902cc3b338fee8106b4ca" args="" -->rxFifoBlock</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="afa22e66eb5ea0daab0f0cd0360936f82ad650f06241a5757f0fa65acae2960b1f"></a><!-- doxytag: member="rxBeginCopy" ref="afa22e66eb5ea0daab0f0cd0360936f82ad650f06241a5757f0fa65acae2960b1f" args="" -->rxBeginCopy</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="afa22e66eb5ea0daab0f0cd0360936f82acc200faa35bf75419147de6b805d083b"></a><!-- doxytag: member="rxCopy" ref="afa22e66eb5ea0daab0f0cd0360936f82acc200faa35bf75419147de6b805d083b" args="" -->rxCopy</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="afa22e66eb5ea0daab0f0cd0360936f82a8fbf22d6f8cc55993cc2a09d07418446"></a><!-- doxytag: member="rxCopyDone" ref="afa22e66eb5ea0daab0f0cd0360936f82a8fbf22d6f8cc55993cc2a09d07418446" args="" -->rxCopyDone</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00092"></a>00092                  {
<a name="l00093"></a>00093         <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82ab702fffa03e4cec4b054f71cfe34ce7c">rxIdle</a>,
<a name="l00094"></a>00094         <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82acd42510cc5c902cc3b338fee8106b4ca">rxFifoBlock</a>,
<a name="l00095"></a>00095         <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82ad650f06241a5757f0fa65acae2960b1f">rxBeginCopy</a>,
<a name="l00096"></a>00096         <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82acc200faa35bf75419147de6b805d083b">rxCopy</a>,
<a name="l00097"></a>00097         <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82a8fbf22d6f8cc55993cc2a09d07418446">rxCopyDone</a>
<a name="l00098"></a>00098     };
</pre></div></p>

</div>
</div>
<a class="anchor" id="a96f29317c7f6628ea6a0c1bc5ab05d6a"></a><!-- doxytag: member="Sinic::Device::TxState" ref="a96f29317c7f6628ea6a0c1bc5ab05d6a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6a">TxState</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Transmit State Machine states </p>
<dl><dt><b>列挙型の値: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a96f29317c7f6628ea6a0c1bc5ab05d6aa6ae23f58218fed48a3f17abba689fcb6"></a><!-- doxytag: member="txIdle" ref="a96f29317c7f6628ea6a0c1bc5ab05d6aa6ae23f58218fed48a3f17abba689fcb6" args="" -->txIdle</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a96f29317c7f6628ea6a0c1bc5ab05d6aaf6571d0685a78da76fe4116ae36afdc3"></a><!-- doxytag: member="txFifoBlock" ref="a96f29317c7f6628ea6a0c1bc5ab05d6aaf6571d0685a78da76fe4116ae36afdc3" args="" -->txFifoBlock</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a96f29317c7f6628ea6a0c1bc5ab05d6aaf2c21c54301af068a37b641c220915c1"></a><!-- doxytag: member="txBeginCopy" ref="a96f29317c7f6628ea6a0c1bc5ab05d6aaf2c21c54301af068a37b641c220915c1" args="" -->txBeginCopy</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a96f29317c7f6628ea6a0c1bc5ab05d6aa76918a4583683f130898f157b820164c"></a><!-- doxytag: member="txCopy" ref="a96f29317c7f6628ea6a0c1bc5ab05d6aa76918a4583683f130898f157b820164c" args="" -->txCopy</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a96f29317c7f6628ea6a0c1bc5ab05d6aa60ba4d6a047deb74d1eccb2904472127"></a><!-- doxytag: member="txCopyDone" ref="a96f29317c7f6628ea6a0c1bc5ab05d6aa60ba4d6a047deb74d1eccb2904472127" args="" -->txCopyDone</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00101"></a>00101                  {
<a name="l00102"></a>00102         <a class="code" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aa6ae23f58218fed48a3f17abba689fcb6">txIdle</a>,
<a name="l00103"></a>00103         <a class="code" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aaf6571d0685a78da76fe4116ae36afdc3">txFifoBlock</a>,
<a name="l00104"></a>00104         <a class="code" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aaf2c21c54301af068a37b641c220915c1">txBeginCopy</a>,
<a name="l00105"></a>00105         <a class="code" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aa76918a4583683f130898f157b820164c">txCopy</a>,
<a name="l00106"></a>00106         <a class="code" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aa60ba4d6a047deb74d1eccb2904472127">txCopyDone</a>
<a name="l00107"></a>00107     };
</pre></div></p>

</div>
</div>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="a3e931e68104ea04933647b3c2e08097b"></a><!-- doxytag: member="Sinic::Device::Device" ref="a3e931e68104ea04933647b3c2e08097b" args="(const Params *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSinic_1_1Device.html">Device</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classSinic_1_1Base.html#ae32fbee6dea75ffbb01b7d869c7bedad">Params</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00088"></a>00088     : <a class="code" href="classSinic_1_1Base.html#ae02136eda3d063396056b352cc26f7e6">Base</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>), <a class="code" href="classSinic_1_1Device.html#a98e0c2747f2107c6f81f51e9ba3bdc8a">rxUnique</a>(0), <a class="code" href="classSinic_1_1Device.html#addcc8e87969e32011941cd144fe23c73">txUnique</a>(0),
<a name="l00089"></a>00089       <a class="code" href="classSinic_1_1Device.html#acb438fcaae56ab29f35376e8b0726c23">virtualRegs</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;virtual_count &lt; 1 ? 1 : <a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;virtual_count),
<a name="l00090"></a>00090       <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;rx_fifo_size), <a class="code" href="classSinic_1_1Device.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;tx_fifo_size),
<a name="l00091"></a>00091       <a class="code" href="classSinic_1_1Device.html#aa36d466a86f77d2c7afdc014e3a6f8b3">rxKickTick</a>(0), <a class="code" href="classSinic_1_1Device.html#acfce4fae6fa03f94e3d91d71302fe349">txKickTick</a>(0),
<a name="l00092"></a>00092       <a class="code" href="classSinic_1_1Device.html#a324fed072a29716c20a98a82927bd2a2">txEvent</a>(<span class="keyword">this</span>), <a class="code" href="classSinic_1_1Device.html#a50d4f78a0a458835572bb101383bf692">rxDmaEvent</a>(<span class="keyword">this</span>), <a class="code" href="classSinic_1_1Device.html#a3d31afcc8e7130b3e43e5dc1a0ef0e37">txDmaEvent</a>(<span class="keyword">this</span>),
<a name="l00093"></a>00093       <a class="code" href="classSinic_1_1Device.html#abff269bf1752a04839eb356b47d4348b">dmaReadDelay</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;dma_read_delay), <a class="code" href="classSinic_1_1Device.html#a632abfe8a89dfa1d944547874f1b4fe4">dmaReadFactor</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;dma_read_factor),
<a name="l00094"></a>00094       <a class="code" href="classSinic_1_1Device.html#add556e09206ac9f4675d3e2da53339e8">dmaWriteDelay</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;dma_write_delay), <a class="code" href="classSinic_1_1Device.html#a396f950eb0d0a011cfa5790861e32608">dmaWriteFactor</a>(<a class="code" href="namespaceMipsISA.html#a37d3f683959086eac7bcf24a002a9fb8">p</a>-&gt;dma_write_factor)
<a name="l00095"></a>00095 {
<a name="l00096"></a>00096     <a class="code" href="classSinic_1_1Base.html#a98d75f7466a1c032c9ba46044c3ad05e">interface</a> = <span class="keyword">new</span> Interface(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.int0&quot;</span>, <span class="keyword">this</span>);
<a name="l00097"></a>00097     <a class="code" href="classSinic_1_1Device.html#ad20897c5c8bd47f5d4005989bead0e55">reset</a>();
<a name="l00098"></a>00098 
<a name="l00099"></a>00099 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3b1601f6f775f47420713f755d1ef320"></a><!-- doxytag: member="Sinic::Device::~Device" ref="a3b1601f6f775f47420713f755d1ef320" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classSinic_1_1Device.html">Device</a> </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00102"></a>00102 {}
</pre></div></p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="abac0082da5c2420162cd3d183fab4f1f"></a><!-- doxytag: member="Sinic::Device::changeConfig" ref="abac0082da5c2420162cd3d183fab4f1f" args="(uint32_t newconfig)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void changeConfig </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>newconfig</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>device configuration </p>

<p><div class="fragment"><pre class="fragment"><a name="l00591"></a>00591 {
<a name="l00592"></a>00592     <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> changed = <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.Config ^ newconf;
<a name="l00593"></a>00593     <span class="keywordflow">if</span> (!changed)
<a name="l00594"></a>00594         <span class="keywordflow">return</span>;
<a name="l00595"></a>00595 
<a name="l00596"></a>00596     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.Config = newconf;
<a name="l00597"></a>00597 
<a name="l00598"></a>00598     <span class="keywordflow">if</span> ((changed &amp; Regs::Config_IntEn)) {
<a name="l00599"></a>00599         <a class="code" href="classSinic_1_1Base.html#a8bac804ce4074a5297817a10e2a11110">cpuIntrEnable</a> = <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.Config &amp; Regs::Config_IntEn;
<a name="l00600"></a>00600         <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Base.html#a8bac804ce4074a5297817a10e2a11110">cpuIntrEnable</a>) {
<a name="l00601"></a>00601             <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrStatus &amp; <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrMask)
<a name="l00602"></a>00602                 <a class="code" href="classSinic_1_1Base.html#af1fc872917f4ac5efa0d55c5c139bc9a">cpuIntrPost</a>(<a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>());
<a name="l00603"></a>00603         } <span class="keywordflow">else</span> {
<a name="l00604"></a>00604             <a class="code" href="classSinic_1_1Base.html#ab1873826f52c78bed89f2ee53382a4c2">cpuIntrClear</a>();
<a name="l00605"></a>00605         }
<a name="l00606"></a>00606     }
<a name="l00607"></a>00607 
<a name="l00608"></a>00608     <span class="keywordflow">if</span> ((changed &amp; Regs::Config_TxEn)) {
<a name="l00609"></a>00609         <a class="code" href="classSinic_1_1Base.html#a950ab5d638f497b596eacdbf60bcb3f0">txEnable</a> = <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.Config &amp; Regs::Config_TxEn;
<a name="l00610"></a>00610         <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Base.html#a950ab5d638f497b596eacdbf60bcb3f0">txEnable</a>)
<a name="l00611"></a>00611             <a class="code" href="classSinic_1_1Device.html#ac5484e8debdd6a2d3cf4c2902b832a76">txKick</a>();
<a name="l00612"></a>00612     }
<a name="l00613"></a>00613 
<a name="l00614"></a>00614     <span class="keywordflow">if</span> ((changed &amp; Regs::Config_RxEn)) {
<a name="l00615"></a>00615         <a class="code" href="classSinic_1_1Base.html#a62cd12a758780749d1ed0ec4d4cfbe71">rxEnable</a> = <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.Config &amp; Regs::Config_RxEn;
<a name="l00616"></a>00616         <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Base.html#a62cd12a758780749d1ed0ec4d4cfbe71">rxEnable</a>)
<a name="l00617"></a>00617             <a class="code" href="classSinic_1_1Device.html#a5fa946a73db6f59c9819d457c991486a">rxKick</a>();
<a name="l00618"></a>00618     }
<a name="l00619"></a>00619 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8747db3299e3afcb225c4e64f725f453"></a><!-- doxytag: member="Sinic::Device::command" ref="a8747db3299e3afcb225c4e64f725f453" args="(uint32_t command)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void command </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>command</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00623"></a>00623 {
<a name="l00624"></a>00624     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#a8747db3299e3afcb225c4e64f725f453">command</a> &amp; Regs::Command_Intr)
<a name="l00625"></a>00625         <a class="code" href="classSinic_1_1Device.html#ad1a6ea4f31e657c02d56bdf168fb988a">devIntrPost</a>(Regs::Intr_Soft);
<a name="l00626"></a>00626 
<a name="l00627"></a>00627     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#a8747db3299e3afcb225c4e64f725f453">command</a> &amp; Regs::Command_Reset)
<a name="l00628"></a>00628         <a class="code" href="classSinic_1_1Device.html#ad20897c5c8bd47f5d4005989bead0e55">reset</a>();
<a name="l00629"></a>00629 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a776f6f1cbea3e0200c28319eb0d5446b"></a><!-- doxytag: member="Sinic::Device::devIntrChangeMask" ref="a776f6f1cbea3e0200c28319eb0d5446b" args="(uint32_t newmask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void devIntrChangeMask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>newmask</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00486"></a>00486 {
<a name="l00487"></a>00487     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrMask == newmask)
<a name="l00488"></a>00488         <span class="keywordflow">return</span>;
<a name="l00489"></a>00489 
<a name="l00490"></a>00490     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrMask = newmask;
<a name="l00491"></a>00491 
<a name="l00492"></a>00492     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetIntr,
<a name="l00493"></a>00493             <span class="stringliteral">&quot;interrupt mask changed: intStatus=%x intMask=%x masked=%x\n&quot;</span>,
<a name="l00494"></a>00494             <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrStatus, <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrMask, <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrStatus &amp; <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrMask);
<a name="l00495"></a>00495 
<a name="l00496"></a>00496     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrStatus &amp; <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrMask)
<a name="l00497"></a>00497         <a class="code" href="classSinic_1_1Base.html#af1fc872917f4ac5efa0d55c5c139bc9a">cpuIntrPost</a>(<a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>());
<a name="l00498"></a>00498     <span class="keywordflow">else</span>
<a name="l00499"></a>00499         <a class="code" href="classSinic_1_1Base.html#ab1873826f52c78bed89f2ee53382a4c2">cpuIntrClear</a>();
<a name="l00500"></a>00500 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af2e6de78cabe5fab3233fb1b29fb478b"></a><!-- doxytag: member="Sinic::Device::devIntrClear" ref="af2e6de78cabe5fab3233fb1b29fb478b" args="(uint32_t interrupts=Regs::Intr_All)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void devIntrClear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>interrupts</em> = <code>Regs::Intr_All</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00470"></a>00470 {
<a name="l00471"></a>00471     <span class="keywordflow">if</span> ((interrupts &amp; Regs::Intr_Res))
<a name="l00472"></a>00472         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Cannot clear a reserved interrupt&quot;</span>);
<a name="l00473"></a>00473 
<a name="l00474"></a>00474     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrStatus &amp;= ~interrupts;
<a name="l00475"></a>00475 
<a name="l00476"></a>00476     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetIntr,
<a name="l00477"></a>00477             <span class="stringliteral">&quot;interrupt cleared from intStatus: intr=%x status=%x mask=%x\n&quot;</span>,
<a name="l00478"></a>00478             interrupts, <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrStatus, <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrMask);
<a name="l00479"></a>00479 
<a name="l00480"></a>00480     <span class="keywordflow">if</span> (!(<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrStatus &amp; <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrMask))
<a name="l00481"></a>00481         <a class="code" href="classSinic_1_1Base.html#ab1873826f52c78bed89f2ee53382a4c2">cpuIntrClear</a>();
<a name="l00482"></a>00482 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad1a6ea4f31e657c02d56bdf168fb988a"></a><!-- doxytag: member="Sinic::Device::devIntrPost" ref="ad1a6ea4f31e657c02d56bdf168fb988a" args="(uint32_t interrupts)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void devIntrPost </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&nbsp;</td>
          <td class="paramname"> <em>interrupts</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Interrupt management </p>

<p><div class="fragment"><pre class="fragment"><a name="l00434"></a>00434 {
<a name="l00435"></a>00435     <span class="keywordflow">if</span> ((interrupts &amp; Regs::Intr_Res))
<a name="l00436"></a>00436         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Cannot set a reserved interrupt&quot;</span>);
<a name="l00437"></a>00437 
<a name="l00438"></a>00438     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrStatus |= interrupts;
<a name="l00439"></a>00439 
<a name="l00440"></a>00440     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetIntr,
<a name="l00441"></a>00441             <span class="stringliteral">&quot;interrupt written to intStatus: intr=%#x status=%#x mask=%#x\n&quot;</span>,
<a name="l00442"></a>00442             interrupts, <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrStatus, <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrMask);
<a name="l00443"></a>00443 
<a name="l00444"></a>00444     interrupts = <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrStatus &amp; <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrMask;
<a name="l00445"></a>00445 
<a name="l00446"></a>00446     <span class="comment">// Intr_RxHigh is special, we only signal it if we&apos;ve emptied the fifo</span>
<a name="l00447"></a>00447     <span class="comment">// and then filled it above the high watermark</span>
<a name="l00448"></a>00448     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#a62b6a5f468811226da2581374919b1a5">rxEmpty</a>)
<a name="l00449"></a>00449         <a class="code" href="classSinic_1_1Device.html#a62b6a5f468811226da2581374919b1a5">rxEmpty</a> = <span class="keyword">false</span>;
<a name="l00450"></a>00450     <span class="keywordflow">else</span>
<a name="l00451"></a>00451         interrupts &amp;= ~Regs::Intr_RxHigh;
<a name="l00452"></a>00452 
<a name="l00453"></a>00453     <span class="comment">// Intr_TxLow is special, we only signal it if we&apos;ve filled up the fifo</span>
<a name="l00454"></a>00454     <span class="comment">// and then dropped below the low watermark</span>
<a name="l00455"></a>00455     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#aa09cc8a4752916111328b7353e64f3bb">txFull</a>)
<a name="l00456"></a>00456         <a class="code" href="classSinic_1_1Device.html#aa09cc8a4752916111328b7353e64f3bb">txFull</a> = <span class="keyword">false</span>;
<a name="l00457"></a>00457     <span class="keywordflow">else</span>
<a name="l00458"></a>00458         interrupts &amp;= ~Regs::Intr_TxLow;
<a name="l00459"></a>00459 
<a name="l00460"></a>00460     <span class="keywordflow">if</span> (interrupts) {
<a name="l00461"></a>00461         <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> when = <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>();
<a name="l00462"></a>00462         <span class="keywordflow">if</span> ((interrupts &amp; Regs::Intr_NoDelay) == 0)
<a name="l00463"></a>00463             when += <a class="code" href="classSinic_1_1Base.html#a2c0cc3d9993d1f77cdb0902bc5e257a9">intrDelay</a>;
<a name="l00464"></a>00464         <a class="code" href="classSinic_1_1Base.html#af1fc872917f4ac5efa0d55c5c139bc9a">cpuIntrPost</a>(when);
<a name="l00465"></a>00465     }
<a name="l00466"></a>00466 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8f020d3237536fe007fc488c4125c5d8"></a><!-- doxytag: member="Sinic::Device::drainResume" ref="a8f020d3237536fe007fc488c4125c5d8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void drainResume </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Resume execution after a successful drain.</p>
<dl class="note"><dt><b>覚え書き:</b></dt><dd>This method is normally only called from the simulation scripts. </dd></dl>

<p><a class="el" href="classDrainable.html#a8f020d3237536fe007fc488c4125c5d8">Drainable</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l01250"></a>01250 {
<a name="l01251"></a>01251     <a class="code" href="classSinic_1_1Device.html#a8f020d3237536fe007fc488c4125c5d8">Drainable::drainResume</a>();
<a name="l01252"></a>01252 
<a name="l01253"></a>01253     <span class="comment">// During drain we could have left the state machines in a waiting state and</span>
<a name="l01254"></a>01254     <span class="comment">// they wouldn&apos;t get out until some other event occured to kick them.</span>
<a name="l01255"></a>01255     <span class="comment">// This way they&apos;ll get out immediately</span>
<a name="l01256"></a>01256     <a class="code" href="classSinic_1_1Device.html#ac5484e8debdd6a2d3cf4c2902b832a76">txKick</a>();
<a name="l01257"></a>01257     <a class="code" href="classSinic_1_1Device.html#a5fa946a73db6f59c9819d457c991486a">rxKick</a>();
<a name="l01258"></a>01258 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a10260c5a583c0894dcdcd1ced50a53ae"></a><!-- doxytag: member="Sinic::Device::getEthPort" ref="a10260c5a583c0894dcdcd1ced50a53ae" args="(const std::string &amp;if_name, int idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEtherInt.html">EtherInt</a> * getEthPort </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>if_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Additional function to return the <a class="el" href="classPort.html">Port</a> of a memory object. </p>

<p><a class="el" href="classEtherDevice.html#ac1aa24c1f8c0f1ee8bdc3f3d3799f67c">EtherDevice</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00143"></a>00143 {
<a name="l00144"></a>00144     <span class="keywordflow">if</span> (if_name == <span class="stringliteral">&quot;interface&quot;</span>) {
<a name="l00145"></a>00145         <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Base.html#a98d75f7466a1c032c9ba46044c3ad05e">interface</a>-&gt;getPeer())
<a name="l00146"></a>00146             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;interface already connected to\n&quot;</span>);
<a name="l00147"></a>00147 
<a name="l00148"></a>00148         <span class="keywordflow">return</span> <a class="code" href="classSinic_1_1Base.html#a98d75f7466a1c032c9ba46044c3ad05e">interface</a>;
<a name="l00149"></a>00149     }
<a name="l00150"></a>00150     <span class="keywordflow">return</span> <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00151"></a>00151 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a65d0ce31d782d0d1233ce4a464e21fe3"></a><!-- doxytag: member="Sinic::Device::prepareIO" ref="a65d0ce31d782d0d1233ce4a464e21fe3" args="(int cpu, int index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prepareIO </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00156"></a>00156 {
<a name="l00157"></a>00157     <span class="keywordtype">int</span> size = <a class="code" href="classSinic_1_1Device.html#acb438fcaae56ab29f35376e8b0726c23">virtualRegs</a>.size();
<a name="l00158"></a>00158     <span class="keywordflow">if</span> (<a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> &gt; size)
<a name="l00159"></a>00159         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Trying to access a vnic that doesn&apos;t exist %d &gt; %d\n&quot;</span>,
<a name="l00160"></a>00160               <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a>, size);
<a name="l00161"></a>00161 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a90e004f9ca30532075cace46234c6ad5"></a><!-- doxytag: member="Sinic::Device::prepareRead" ref="a90e004f9ca30532075cace46234c6ad5" args="(int cpu, int index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prepareRead </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00169"></a>00169 {
<a name="l00170"></a>00170     <span class="keyword">using namespace </span>Regs;
<a name="l00171"></a>00171     <a class="code" href="classSinic_1_1Device.html#a65d0ce31d782d0d1233ce4a464e21fe3">prepareIO</a>(cpu, <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a>);
<a name="l00172"></a>00172 
<a name="l00173"></a>00173     VirtualReg &amp;vnic = <a class="code" href="classSinic_1_1Device.html#acb438fcaae56ab29f35376e8b0726c23">virtualRegs</a>[<a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a>];
<a name="l00174"></a>00174 
<a name="l00175"></a>00175     <span class="comment">// update rx registers</span>
<a name="l00176"></a>00176     uint64_t rxdone = vnic.RxDone;
<a name="l00177"></a>00177     rxdone = set_RxDone_Packets(rxdone, <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#af8cc52fa26b81200af7971e0f495ee00">countPacketsAfter</a>(<a class="code" href="classSinic_1_1Device.html#aee345bc47c94b616b04d8f502dab1826">rxFifoPtr</a>));
<a name="l00178"></a>00178     rxdone = set_RxDone_Empty(rxdone, <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#ac6e61de369e994009e36f344f99c15ad">empty</a>());
<a name="l00179"></a>00179     rxdone = set_RxDone_High(rxdone, <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#acdb549c592f948a9d973d4d84b02ef87">size</a>() &gt; <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.RxFifoHigh);
<a name="l00180"></a>00180     rxdone = set_RxDone_NotHigh(rxdone, <a class="code" href="classSinic_1_1Device.html#a1ef589f4a0a6d9baae11626a0d89b5ec">rxLow</a>);
<a name="l00181"></a>00181     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.RxData = vnic.RxData;
<a name="l00182"></a>00182     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.RxDone = rxdone;
<a name="l00183"></a>00183     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.RxWait = rxdone;
<a name="l00184"></a>00184 
<a name="l00185"></a>00185     <span class="comment">// update tx regsiters</span>
<a name="l00186"></a>00186     uint64_t txdone = vnic.TxDone;
<a name="l00187"></a>00187     txdone = set_TxDone_Packets(txdone, <a class="code" href="classSinic_1_1Device.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#a4c2cf4d8a6e10ea9a6a75a9a47044905">packets</a>());
<a name="l00188"></a>00188     txdone = set_TxDone_Full(txdone, <a class="code" href="classSinic_1_1Device.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#aaf2f31de7b8cd9bf2085049b07125b1e">avail</a>() &lt; <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.TxMaxCopy);
<a name="l00189"></a>00189     txdone = set_TxDone_Low(txdone, <a class="code" href="classSinic_1_1Device.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#acdb549c592f948a9d973d4d84b02ef87">size</a>() &lt; <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.TxFifoLow);
<a name="l00190"></a>00190     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.TxData = vnic.TxData;
<a name="l00191"></a>00191     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.TxDone = txdone;
<a name="l00192"></a>00192     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.TxWait = txdone;
<a name="l00193"></a>00193 
<a name="l00194"></a>00194     <span class="keywordtype">int</span> head = 0xffff;
<a name="l00195"></a>00195 
<a name="l00196"></a>00196     <span class="keywordflow">if</span> (!<a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#ac6e61de369e994009e36f344f99c15ad">empty</a>()) {
<a name="l00197"></a>00197         <span class="keywordtype">int</span> vnic = <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#ad69bd11391be1a1dba5c8202259664f8">begin</a>()-&gt;priv;
<a name="l00198"></a>00198         <span class="keywordflow">if</span> (vnic != -1 &amp;&amp; <a class="code" href="classSinic_1_1Device.html#acb438fcaae56ab29f35376e8b0726c23">virtualRegs</a>[vnic].rxPacketOffset &gt; 0)
<a name="l00199"></a>00199             head = vnic;
<a name="l00200"></a>00200     }
<a name="l00201"></a>00201 
<a name="l00202"></a>00202     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.RxStatus = set_RxStatus_Head(<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.RxStatus, head);
<a name="l00203"></a>00203     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.RxStatus = set_RxStatus_Busy(<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.RxStatus, <a class="code" href="classSinic_1_1Device.html#a508dbc989a9476f10e7622b054aac7e1">rxBusyCount</a>);
<a name="l00204"></a>00204     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.RxStatus = set_RxStatus_Mapped(<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.RxStatus, <a class="code" href="classSinic_1_1Device.html#a41d5a12c120010c50c75ea0dc2f01241">rxMappedCount</a>);
<a name="l00205"></a>00205     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.RxStatus = set_RxStatus_Dirty(<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.RxStatus, <a class="code" href="classSinic_1_1Device.html#a9e5a18ec7025db57fa6ff2f05a289804">rxDirtyCount</a>);
<a name="l00206"></a>00206 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8527de0a20c247f91f96abe895bf4448"></a><!-- doxytag: member="Sinic::Device::prepareWrite" ref="a8527de0a20c247f91f96abe895bf4448" args="(int cpu, int index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prepareWrite </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00210"></a>00210 {
<a name="l00211"></a>00211     <a class="code" href="classSinic_1_1Device.html#a65d0ce31d782d0d1233ce4a464e21fe3">prepareIO</a>(cpu, <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a>);
<a name="l00212"></a>00212 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a613ec7d5e1ec64f8d21fec78ae8e568e"></a><!-- doxytag: member="Sinic::Device::read" ref="a613ec7d5e1ec64f8d21fec78ae8e568e" args="(PacketPtr pkt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pkt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Memory <a class="el" href="classSinic_1_1Interface.html">Interface</a></p>
<p>I/O read of device register </p>

<p><a class="el" href="classPioDevice.html#a842312590432036092c422c87a442358">PioDevice</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00219"></a>00219 {
<a name="l00220"></a>00220     assert(<a class="code" href="classPciDevice.html#ade310e2edd87f54d175985e8f2a07169">config</a>.<a class="code" href="unionPCIConfig.html#a4635796d5c7e7a2639b11dfe83718acc">command</a> &amp; <a class="code" href="pcireg_8h.html#a19eeefdf3c3100d9ab29182cbbcba083">PCI_CMD_MSE</a>);
<a name="l00221"></a>00221     assert(pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>() &gt;= <a class="code" href="classPciDevice.html#af7b973e5ccbf88bd0019efd69c87e06c">BARAddrs</a>[0] &amp;&amp; pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>() &lt; <a class="code" href="classPciDevice.html#ad96459f9cb0f58d55bfff45109038d7b">BARSize</a>[0]);
<a name="l00222"></a>00222 
<a name="l00223"></a>00223     <span class="keywordtype">int</span> cpu = pkt-&gt;<a class="code" href="classPacket.html#a956cd41d82347558b9c0a5b0474903f2" title="A pointer to the original request.">req</a>-&gt;<a class="code" href="classRequest.html#a651d5d14e7a4e95ebe6d7f5b8ee5a107">contextId</a>();
<a name="l00224"></a>00224     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> daddr = pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>() - <a class="code" href="classPciDevice.html#af7b973e5ccbf88bd0019efd69c87e06c">BARAddrs</a>[0];
<a name="l00225"></a>00225     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = daddr &gt;&gt; <a class="code" href="namespaceSinic_1_1Regs.html#ad3df16c90c6e9c90e4fe95c9ad269661">Regs::VirtualShift</a>;
<a name="l00226"></a>00226     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> raddr = daddr &amp; <a class="code" href="namespaceSinic_1_1Regs.html#aac1ea6e4b2ca262e0a4bb0b729a7ef3e">Regs::VirtualMask</a>;
<a name="l00227"></a>00227 
<a name="l00228"></a>00228     pkt-&gt;<a class="code" href="classPacket.html#acaefe811b78a2fdc4a0dba0c4029c3ef">allocate</a>();
<a name="l00229"></a>00229 
<a name="l00230"></a>00230     <span class="keywordflow">if</span> (!<a class="code" href="namespaceSinic.html#af92abee16113e5012fa829e4935d917a">regValid</a>(raddr))
<a name="l00231"></a>00231         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;invalid register: cpu=%d vnic=%d da=%#x pa=%#x size=%d&quot;</span>,
<a name="l00232"></a>00232               cpu, index, daddr, pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>(), pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>());
<a name="l00233"></a>00233 
<a name="l00234"></a>00234     <span class="keyword">const</span> Regs::Info &amp;info = <a class="code" href="namespaceSinic.html#aed2d64d4f995743e60f0fee5cca4e739">regInfo</a>(raddr);
<a name="l00235"></a>00235     <span class="keywordflow">if</span> (!info.read)
<a name="l00236"></a>00236         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;read %s (write only): &quot;</span>
<a name="l00237"></a>00237               <span class="stringliteral">&quot;cpu=%d vnic=%d da=%#x pa=%#x size=%d&quot;</span>,
<a name="l00238"></a>00238               info.name, cpu, index, daddr, pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>(), pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>());
<a name="l00239"></a>00239 
<a name="l00240"></a>00240         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;read %s (invalid size): &quot;</span>
<a name="l00241"></a>00241               <span class="stringliteral">&quot;cpu=%d vnic=%d da=%#x pa=%#x size=%d&quot;</span>,
<a name="l00242"></a>00242               info.name, cpu, index, daddr, pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>(), pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>());
<a name="l00243"></a>00243 
<a name="l00244"></a>00244     <a class="code" href="classSinic_1_1Device.html#a90e004f9ca30532075cace46234c6ad5">prepareRead</a>(cpu, index);
<a name="l00245"></a>00245 
<a name="l00246"></a>00246     uint64_t <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a> M5_VAR_USED = 0;
<a name="l00247"></a>00247     <span class="keywordflow">if</span> (pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>() == 4) {
<a name="l00248"></a>00248         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="namespaceX86ISA.html#aeeb02ad833ab76f3430553ef93213a6b">reg</a> = <a class="code" href="classSinic_1_1Device.html#af3697c3ddcc9030231a62c95ddcd193b">regData32</a>(raddr);
<a name="l00249"></a>00249         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>(reg);
<a name="l00250"></a>00250         <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a> = reg;
<a name="l00251"></a>00251     }
<a name="l00252"></a>00252 
<a name="l00253"></a>00253     <span class="keywordflow">if</span> (pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>() == 8) {
<a name="l00254"></a>00254         uint64_t reg = <a class="code" href="classSinic_1_1Device.html#a107fa1384335bcf976734520e213a501">regData64</a>(raddr);
<a name="l00255"></a>00255         pkt-&gt;<a class="code" href="classPacket.html#a64d947d8dd285398050238bf26c1d8d2">set</a>(reg);
<a name="l00256"></a>00256         <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a> = reg;
<a name="l00257"></a>00257     }
<a name="l00258"></a>00258 
<a name="l00259"></a>00259     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetPIO,
<a name="l00260"></a>00260             <span class="stringliteral">&quot;read %s: cpu=%d vnic=%d da=%#x pa=%#x size=%d val=%#x\n&quot;</span>,
<a name="l00261"></a>00261             info.name, cpu, index, daddr, pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>(), pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>(), <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a>);
<a name="l00262"></a>00262 
<a name="l00263"></a>00263     <span class="comment">// reading the interrupt status register has the side effect of</span>
<a name="l00264"></a>00264     <span class="comment">// clearing it</span>
<a name="l00265"></a>00265     <span class="keywordflow">if</span> (raddr == Regs::IntrStatus)
<a name="l00266"></a>00266         <a class="code" href="classSinic_1_1Device.html#af2e6de78cabe5fab3233fb1b29fb478b">devIntrClear</a>();
<a name="l00267"></a>00267 
<a name="l00268"></a>00268     <span class="keywordflow">return</span> <a class="code" href="classPciDevice.html#ac8e969635a78ab9ab123904ccca434cc">pioDelay</a>;
<a name="l00269"></a>00269 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad54e71348f53dfb5444979e9bfaf3164"></a><!-- doxytag: member="Sinic::Device::recvPacket" ref="ad54e71348f53dfb5444979e9bfaf3164" args="(EthPacketPtr packet)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool recvPacket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRefCountingPtr.html">EthPacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>packet</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>device ethernet interface </p>

<p><div class="fragment"><pre class="fragment"><a name="l01212"></a>01212 {
<a name="l01213"></a>01213     <a class="code" href="classEtherDevice.html#a715fc1a9e846c381ddd90bd12b0e28d0">rxBytes</a> += packet-&gt;length;
<a name="l01214"></a>01214     <a class="code" href="classEtherDevice.html#a584f3731c2a58f40585474fab9b080b2">rxPackets</a>++;
<a name="l01215"></a>01215 
<a name="l01216"></a>01216     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;Receiving packet from wire, rxFifo Available is %d\n&quot;</span>,
<a name="l01217"></a>01217             <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#aaf2f31de7b8cd9bf2085049b07125b1e">avail</a>());
<a name="l01218"></a>01218 
<a name="l01219"></a>01219     <span class="keywordflow">if</span> (!<a class="code" href="classSinic_1_1Base.html#a62cd12a758780749d1ed0ec4d4cfbe71">rxEnable</a>) {
<a name="l01220"></a>01220         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;receive disabled...packet dropped\n&quot;</span>);
<a name="l01221"></a>01221         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01222"></a>01222     }
<a name="l01223"></a>01223 
<a name="l01224"></a>01224     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#a5bcec2e17f6aca766b063f7a92289bdb">rxFilter</a>(packet)) {
<a name="l01225"></a>01225         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;packet filtered...dropped\n&quot;</span>);
<a name="l01226"></a>01226         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01227"></a>01227     }
<a name="l01228"></a>01228 
<a name="l01229"></a>01229     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#acdb549c592f948a9d973d4d84b02ef87">size</a>() &gt;= <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.RxFifoHigh)
<a name="l01230"></a>01230         <a class="code" href="classSinic_1_1Device.html#ad1a6ea4f31e657c02d56bdf168fb988a">devIntrPost</a>(Regs::Intr_RxHigh);
<a name="l01231"></a>01231 
<a name="l01232"></a>01232     <span class="keywordflow">if</span> (!<a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#ac4382beafcf27ce14f59707bc7f4c3d7">push</a>(packet)) {
<a name="l01233"></a>01233         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet,
<a name="l01234"></a>01234                 <span class="stringliteral">&quot;packet will not fit in receive buffer...packet dropped\n&quot;</span>);
<a name="l01235"></a>01235         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01236"></a>01236     }
<a name="l01237"></a>01237 
<a name="l01238"></a>01238     <span class="comment">// If we were at the last element, back up one ot go to the new</span>
<a name="l01239"></a>01239     <span class="comment">// last element of the list.</span>
<a name="l01240"></a>01240     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#aee345bc47c94b616b04d8f502dab1826">rxFifoPtr</a> == <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#acad38d52497a975bfb6f2f6acd76631f">end</a>())
<a name="l01241"></a>01241         --<a class="code" href="classSinic_1_1Device.html#aee345bc47c94b616b04d8f502dab1826">rxFifoPtr</a>;
<a name="l01242"></a>01242 
<a name="l01243"></a>01243     <a class="code" href="classSinic_1_1Device.html#ad1a6ea4f31e657c02d56bdf168fb988a">devIntrPost</a>(Regs::Intr_RxPacket);
<a name="l01244"></a>01244     <a class="code" href="classSinic_1_1Device.html#a5fa946a73db6f59c9819d457c991486a">rxKick</a>();
<a name="l01245"></a>01245     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01246"></a>01246 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af3697c3ddcc9030231a62c95ddcd193b"></a><!-- doxytag: member="Sinic::Device::regData32" ref="af3697c3ddcc9030231a62c95ddcd193b" args="(Addr daddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&amp; regData32 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>daddr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00171"></a>00171 { <span class="keywordflow">return</span> *(<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> *)&amp;<a class="code" href="classSinic_1_1Device.html#ab9d3fc8abcb0bc9a41665d6311d64106">regData8</a>(daddr); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a107fa1384335bcf976734520e213a501"></a><!-- doxytag: member="Sinic::Device::regData64" ref="a107fa1384335bcf976734520e213a501" args="(Addr daddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t&amp; regData64 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>daddr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00172"></a>00172 { <span class="keywordflow">return</span> *(uint64_t *)&amp;<a class="code" href="classSinic_1_1Device.html#ab9d3fc8abcb0bc9a41665d6311d64106">regData8</a>(daddr); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab9d3fc8abcb0bc9a41665d6311d64106"></a><!-- doxytag: member="Sinic::Device::regData8" ref="ab9d3fc8abcb0bc9a41665d6311d64106" args="(Addr daddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t&amp; regData8 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>daddr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00170"></a>00170 { <span class="keywordflow">return</span> *((uint8_t *)&amp;<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a> + daddr); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4dc637449366fcdfc4e764cdf12d9b11"></a><!-- doxytag: member="Sinic::Device::regStats" ref="a4dc637449366fcdfc4e764cdf12d9b11" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void regStats </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classRegister.html">Register</a> statistics for this object. </p>

<p><a class="el" href="classEtherDevice.html#a4dc637449366fcdfc4e764cdf12d9b11">EtherDevice</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00106"></a>00106 {
<a name="l00107"></a>00107     <a class="code" href="classSinic_1_1Device.html#a4dc637449366fcdfc4e764cdf12d9b11">Base::regStats</a>();
<a name="l00108"></a>00108 
<a name="l00109"></a>00109     <a class="code" href="classSinic_1_1Device.html#a3eb6949618cb5ab7fcb963974eb980a0">_maxVnicDistance</a> = 0;
<a name="l00110"></a>00110 
<a name="l00111"></a>00111     <a class="code" href="classSinic_1_1Device.html#a55159ce061f8632637c330b0b101d370">maxVnicDistance</a>
<a name="l00112"></a>00112         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.maxVnicDistance&quot;</span>)
<a name="l00113"></a>00113         .desc(<span class="stringliteral">&quot;maximum vnic distance&quot;</span>)
<a name="l00114"></a>00114         ;
<a name="l00115"></a>00115 
<a name="l00116"></a>00116     <a class="code" href="classSinic_1_1Device.html#aceabe9d2fb5f87ee602c22e0d0141479">totalVnicDistance</a>
<a name="l00117"></a>00117         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.totalVnicDistance&quot;</span>)
<a name="l00118"></a>00118         .desc(<span class="stringliteral">&quot;total vnic distance&quot;</span>)
<a name="l00119"></a>00119         ;
<a name="l00120"></a>00120     <a class="code" href="classSinic_1_1Device.html#a489a76c8b17d7dec4865d06b211218fb">numVnicDistance</a>
<a name="l00121"></a>00121         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.numVnicDistance&quot;</span>)
<a name="l00122"></a>00122         .desc(<span class="stringliteral">&quot;number of vnic distance measurements&quot;</span>)
<a name="l00123"></a>00123         ;
<a name="l00124"></a>00124 
<a name="l00125"></a>00125     <a class="code" href="classSinic_1_1Device.html#a6846633bb8f156a544f88825a26a3090">avgVnicDistance</a>
<a name="l00126"></a>00126         .<a class="code" href="classStats_1_1DataWrap.html#a8eaf5c2b92132dfcacd7d9b10afb1726">name</a>(<a class="code" href="classSimObject.html#adbcff144e5e199d332a1352af1798148">name</a>() + <span class="stringliteral">&quot;.avgVnicDistance&quot;</span>)
<a name="l00127"></a>00127         .desc(<span class="stringliteral">&quot;average vnic distance&quot;</span>)
<a name="l00128"></a>00128         ;
<a name="l00129"></a>00129 
<a name="l00130"></a>00130     <a class="code" href="classSinic_1_1Device.html#a6846633bb8f156a544f88825a26a3090">avgVnicDistance</a> = <a class="code" href="classSinic_1_1Device.html#aceabe9d2fb5f87ee602c22e0d0141479">totalVnicDistance</a> / <a class="code" href="classSinic_1_1Device.html#a489a76c8b17d7dec4865d06b211218fb">numVnicDistance</a>;
<a name="l00131"></a>00131 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad20897c5c8bd47f5d4005989bead0e55"></a><!-- doxytag: member="Sinic::Device::reset" ref="ad20897c5c8bd47f5d4005989bead0e55" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reset </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00633"></a>00633 {
<a name="l00634"></a>00634     <span class="keyword">using namespace </span>Regs;
<a name="l00635"></a>00635 
<a name="l00636"></a>00636     memset(&amp;<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>));
<a name="l00637"></a>00637 
<a name="l00638"></a>00638     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.Config = 0;
<a name="l00639"></a>00639     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Base.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;rx_thread)
<a name="l00640"></a>00640         <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.Config |= Config_RxThread;
<a name="l00641"></a>00641     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Base.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;tx_thread)
<a name="l00642"></a>00642         <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.Config |= Config_TxThread;
<a name="l00643"></a>00643     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Base.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;rss)
<a name="l00644"></a>00644         <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.Config |= Config_RSS;
<a name="l00645"></a>00645     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Base.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;zero_copy)
<a name="l00646"></a>00646         <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.Config |= Config_ZeroCopy;
<a name="l00647"></a>00647     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Base.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;delay_copy)
<a name="l00648"></a>00648         <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.Config |= Config_DelayCopy;
<a name="l00649"></a>00649     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Base.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;virtual_addr)
<a name="l00650"></a>00650         <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.Config |= Config_Vaddr;
<a name="l00651"></a>00651 
<a name="l00652"></a>00652     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Base.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;delay_copy &amp;&amp; <a class="code" href="classSinic_1_1Base.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;zero_copy)
<a name="l00653"></a>00653         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Can&apos;t delay copy and zero copy&quot;</span>);
<a name="l00654"></a>00654 
<a name="l00655"></a>00655     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrMask = Intr_Soft | Intr_RxHigh | Intr_RxPacket | Intr_TxLow;
<a name="l00656"></a>00656     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.RxMaxCopy = <a class="code" href="classSinic_1_1Base.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;rx_max_copy;
<a name="l00657"></a>00657     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.TxMaxCopy = <a class="code" href="classSinic_1_1Base.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;tx_max_copy;
<a name="l00658"></a>00658     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.ZeroCopySize = <a class="code" href="classSinic_1_1Base.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;zero_copy_size;
<a name="l00659"></a>00659     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.ZeroCopyMark = <a class="code" href="classSinic_1_1Base.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;zero_copy_threshold;
<a name="l00660"></a>00660     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.VirtualCount = <a class="code" href="classSinic_1_1Base.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;virtual_count;
<a name="l00661"></a>00661     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.RxMaxIntr = <a class="code" href="classSinic_1_1Base.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;rx_max_intr;
<a name="l00662"></a>00662     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.RxFifoSize = <a class="code" href="classSinic_1_1Base.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;rx_fifo_size;
<a name="l00663"></a>00663     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.TxFifoSize = <a class="code" href="classSinic_1_1Base.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;tx_fifo_size;
<a name="l00664"></a>00664     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.RxFifoLow = <a class="code" href="classSinic_1_1Base.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;rx_fifo_low_mark;
<a name="l00665"></a>00665     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.TxFifoLow = <a class="code" href="classSinic_1_1Base.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;tx_fifo_threshold;
<a name="l00666"></a>00666     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.RxFifoHigh = <a class="code" href="classSinic_1_1Base.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;rx_fifo_threshold;
<a name="l00667"></a>00667     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.TxFifoHigh = <a class="code" href="classSinic_1_1Base.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;tx_fifo_high_mark;
<a name="l00668"></a>00668     <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.HwAddr = <a class="code" href="classSinic_1_1Base.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;hardware_address;
<a name="l00669"></a>00669 
<a name="l00670"></a>00670     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.RxMaxCopy &lt; <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.ZeroCopyMark)
<a name="l00671"></a>00671         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Must be able to copy at least as many bytes as the threshold&quot;</span>);
<a name="l00672"></a>00672 
<a name="l00673"></a>00673     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.ZeroCopySize &gt;= <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.ZeroCopyMark)
<a name="l00674"></a>00674         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;The number of bytes to copy must be less than the threshold&quot;</span>);
<a name="l00675"></a>00675 
<a name="l00676"></a>00676     <a class="code" href="classSinic_1_1Device.html#a45202257b5522a1436d8130249ee0a0d">rxList</a>.clear();
<a name="l00677"></a>00677     <a class="code" href="classSinic_1_1Device.html#afd33bf96a9045d1f90d0685ad3e33253">rxBusy</a>.clear();
<a name="l00678"></a>00678     <a class="code" href="classSinic_1_1Device.html#a560efaee55571ea588551a80aadc6cda">rxActive</a> = -1;
<a name="l00679"></a>00679     <a class="code" href="classSinic_1_1Device.html#a7010216dd085a0c2dac9d6b830a64f35">txList</a>.clear();
<a name="l00680"></a>00680     <a class="code" href="classSinic_1_1Device.html#a508dbc989a9476f10e7622b054aac7e1">rxBusyCount</a> = 0;
<a name="l00681"></a>00681     <a class="code" href="classSinic_1_1Device.html#a9e5a18ec7025db57fa6ff2f05a289804">rxDirtyCount</a> = 0;
<a name="l00682"></a>00682     <a class="code" href="classSinic_1_1Device.html#a41d5a12c120010c50c75ea0dc2f01241">rxMappedCount</a> = 0;
<a name="l00683"></a>00683 
<a name="l00684"></a>00684     <a class="code" href="classSinic_1_1Device.html#a17c506ad3a705ec9dbd1762e6a80fbf5">rxState</a> = <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82ab702fffa03e4cec4b054f71cfe34ce7c">rxIdle</a>;
<a name="l00685"></a>00685     <a class="code" href="classSinic_1_1Device.html#a12e3a80bef638cd15c067541b96a4756">txState</a> = <a class="code" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aa6ae23f58218fed48a3f17abba689fcb6">txIdle</a>;
<a name="l00686"></a>00686 
<a name="l00687"></a>00687     <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#ac8bb3912a3ce86b15842e79d0b421204">clear</a>();
<a name="l00688"></a>00688     <a class="code" href="classSinic_1_1Device.html#aee345bc47c94b616b04d8f502dab1826">rxFifoPtr</a> = <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#acad38d52497a975bfb6f2f6acd76631f">end</a>();
<a name="l00689"></a>00689     <a class="code" href="classSinic_1_1Device.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#ac8bb3912a3ce86b15842e79d0b421204">clear</a>();
<a name="l00690"></a>00690     <a class="code" href="classSinic_1_1Device.html#a62b6a5f468811226da2581374919b1a5">rxEmpty</a> = <span class="keyword">false</span>;
<a name="l00691"></a>00691     <a class="code" href="classSinic_1_1Device.html#a1ef589f4a0a6d9baae11626a0d89b5ec">rxLow</a> = <span class="keyword">true</span>;
<a name="l00692"></a>00692     <a class="code" href="classSinic_1_1Device.html#aa09cc8a4752916111328b7353e64f3bb">txFull</a> = <span class="keyword">false</span>;
<a name="l00693"></a>00693 
<a name="l00694"></a>00694     <span class="keywordtype">int</span> size = <a class="code" href="classSinic_1_1Device.html#acb438fcaae56ab29f35376e8b0726c23">virtualRegs</a>.size();
<a name="l00695"></a>00695     <a class="code" href="classSinic_1_1Device.html#acb438fcaae56ab29f35376e8b0726c23">virtualRegs</a>.clear();
<a name="l00696"></a>00696     <a class="code" href="classSinic_1_1Device.html#acb438fcaae56ab29f35376e8b0726c23">virtualRegs</a>.resize(size);
<a name="l00697"></a>00697     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; size; ++<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>)
<a name="l00698"></a>00698         <a class="code" href="classSinic_1_1Device.html#acb438fcaae56ab29f35376e8b0726c23">virtualRegs</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>].rxIndex = <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#acad38d52497a975bfb6f2f6acd76631f">end</a>();
<a name="l00699"></a>00699 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a65880e61108132689a1bd769b9187fb7"></a><!-- doxytag: member="Sinic::Device::resetStats" ref="a65880e61108132689a1bd769b9187fb7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void resetStats </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Reset statistics associated with this object. </p>

<p><a class="el" href="classSimObject.html#a65880e61108132689a1bd769b9187fb7">SimObject</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00135"></a>00135 {
<a name="l00136"></a>00136     <a class="code" href="classSinic_1_1Device.html#a65880e61108132689a1bd769b9187fb7">Base::resetStats</a>();
<a name="l00137"></a>00137 
<a name="l00138"></a>00138     <a class="code" href="classSinic_1_1Device.html#a3eb6949618cb5ab7fcb963974eb980a0">_maxVnicDistance</a> = 0;
<a name="l00139"></a>00139 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae8fff6d9b2bdd860ce365599560f67e7"></a><!-- doxytag: member="Sinic::Device::rxDmaDone" ref="ae8fff6d9b2bdd860ce365599560f67e7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rxDmaDone </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>DMA parameters </p>

<p><div class="fragment"><pre class="fragment"><a name="l00703"></a>00703 {
<a name="l00704"></a>00704     assert(<a class="code" href="classSinic_1_1Device.html#a17c506ad3a705ec9dbd1762e6a80fbf5">rxState</a> == <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82acc200faa35bf75419147de6b805d083b">rxCopy</a>);
<a name="l00705"></a>00705     <a class="code" href="classSinic_1_1Device.html#a17c506ad3a705ec9dbd1762e6a80fbf5">rxState</a> = <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82a8fbf22d6f8cc55993cc2a09d07418446">rxCopyDone</a>;
<a name="l00706"></a>00706     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDMA, <span class="stringliteral">&quot;end rx dma write paddr=%#x len=%d\n&quot;</span>,
<a name="l00707"></a>00707             <a class="code" href="classSinic_1_1Device.html#a4a609f84c6849bcfb6dee08329773fca">rxDmaAddr</a>, <a class="code" href="classSinic_1_1Device.html#a0efc207ddfcff656cbe0237c3bc237c1">rxDmaLen</a>);
<a name="l00708"></a>00708     <a class="code" href="trace_8hh.html#a556faf39d3fa9f7db5f344487ddbb397">DDUMP</a>(EthernetData, <a class="code" href="classSinic_1_1Device.html#ae917f4bc2a610fed06749a854fb89d14">rxDmaData</a>, <a class="code" href="classSinic_1_1Device.html#a0efc207ddfcff656cbe0237c3bc237c1">rxDmaLen</a>);
<a name="l00709"></a>00709 
<a name="l00710"></a>00710     <span class="comment">// If the transmit state machine  has a pending DMA, let it go first</span>
<a name="l00711"></a>00711     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#a12e3a80bef638cd15c067541b96a4756">txState</a> == <a class="code" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aaf2c21c54301af068a37b641c220915c1">txBeginCopy</a>)
<a name="l00712"></a>00712         <a class="code" href="classSinic_1_1Device.html#ac5484e8debdd6a2d3cf4c2902b832a76">txKick</a>();
<a name="l00713"></a>00713 
<a name="l00714"></a>00714     <a class="code" href="classSinic_1_1Device.html#a5fa946a73db6f59c9819d457c991486a">rxKick</a>();
<a name="l00715"></a>00715 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa1b380dc961134ace0f88ee7743b32b6"></a><!-- doxytag: member="Sinic::Device::rxDump" ref="aa1b380dc961134ace0f88ee7743b32b6" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rxDump </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a5bcec2e17f6aca766b063f7a92289bdb"></a><!-- doxytag: member="Sinic::Device::rxFilter" ref="a5bcec2e17f6aca766b063f7a92289bdb" args="(const EthPacketPtr &amp;packet)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rxFilter </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classRefCountingPtr.html">EthPacketPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>packet</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>receive address filter </p>

<p><div class="fragment"><pre class="fragment"><a name="l01167"></a>01167 {
<a name="l01168"></a>01168     <span class="keywordflow">if</span> (!Regs::get_Config_Filter(<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.Config))
<a name="l01169"></a>01169         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01170"></a>01170 
<a name="l01171"></a>01171     <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;receive filter not implemented\n&quot;</span>);
<a name="l01172"></a>01172     <span class="keywordtype">bool</span> drop = <span class="keyword">true</span>;
<a name="l01173"></a>01173 
<a name="l01174"></a>01174 <span class="preprocessor">#if 0</span>
<a name="l01175"></a>01175 <span class="preprocessor"></span>    <span class="keywordtype">string</span> <a class="code" href="namespaceX86ISA.html#ad805db903f6899f960fd9a982272096a">type</a>;
<a name="l01176"></a>01176 
<a name="l01177"></a>01177     <a class="code" href="structNet_1_1EthHdr.html">EthHdr</a> *eth = packet-&gt;eth();
<a name="l01178"></a>01178     <span class="keywordflow">if</span> (eth-&gt;unicast()) {
<a name="l01179"></a>01179         <span class="comment">// If we&apos;re accepting all unicast addresses</span>
<a name="l01180"></a>01180         <span class="keywordflow">if</span> (acceptUnicast)
<a name="l01181"></a>01181             drop = <span class="keyword">false</span>;
<a name="l01182"></a>01182 
<a name="l01183"></a>01183         <span class="comment">// If we make a perfect match</span>
<a name="l01184"></a>01184         <span class="keywordflow">if</span> (acceptPerfect &amp;&amp; <a class="code" href="classSinic_1_1Base.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>-&gt;eaddr == eth.<a class="code" href="structNet_1_1EthHdr.html#a69ca058eabf9eab6f3aba644b89a65e0">dst</a>())
<a name="l01185"></a>01185             drop = <span class="keyword">false</span>;
<a name="l01186"></a>01186 
<a name="l01187"></a>01187         <span class="keywordflow">if</span> (acceptArp &amp;&amp; eth-&gt;<a class="code" href="structNet_1_1EthHdr.html#a236542f3042d3c2ac7d98d1a7ad75269">type</a>() == ETH_TYPE_ARP)
<a name="l01188"></a>01188             drop = <span class="keyword">false</span>;
<a name="l01189"></a>01189 
<a name="l01190"></a>01190     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (eth-&gt;broadcast()) {
<a name="l01191"></a>01191         <span class="comment">// if we&apos;re accepting broadcasts</span>
<a name="l01192"></a>01192         <span class="keywordflow">if</span> (acceptBroadcast)
<a name="l01193"></a>01193             drop = <span class="keyword">false</span>;
<a name="l01194"></a>01194 
<a name="l01195"></a>01195     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (eth-&gt;multicast()) {
<a name="l01196"></a>01196         <span class="comment">// if we&apos;re accepting all multicasts</span>
<a name="l01197"></a>01197         <span class="keywordflow">if</span> (acceptMulticast)
<a name="l01198"></a>01198             drop = <span class="keyword">false</span>;
<a name="l01199"></a>01199 
<a name="l01200"></a>01200     }
<a name="l01201"></a>01201 
<a name="l01202"></a>01202     <span class="keywordflow">if</span> (drop) {
<a name="l01203"></a>01203         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;rxFilter drop\n&quot;</span>);
<a name="l01204"></a>01204         <a class="code" href="trace_8hh.html#a556faf39d3fa9f7db5f344487ddbb397">DDUMP</a>(EthernetData, packet-&gt;<a class="code" href="classRefCountingPtr.html#ac88dceffbecaed1137b0e27783adbcc5">data</a>, packet-&gt;length);
<a name="l01205"></a>01205     }
<a name="l01206"></a>01206 <span class="preprocessor">#endif</span>
<a name="l01207"></a>01207 <span class="preprocessor"></span>    <span class="keywordflow">return</span> drop;
<a name="l01208"></a>01208 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5fa946a73db6f59c9819d457c991486a"></a><!-- doxytag: member="Sinic::Device::rxKick" ref="a5fa946a73db6f59c9819d457c991486a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rxKick </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000071">TODO:</a></b></dt><dd>do we want to schedule a future kick? </dd></dl>
</p>

<p><div class="fragment"><pre class="fragment"><a name="l00719"></a>00719 {
<a name="l00720"></a>00720     VirtualReg *vnic = <a class="code" href="namespacem5_1_1params.html#a1e2e219ac4e913a2c59019be3094d3ca">NULL</a>;
<a name="l00721"></a>00721 
<a name="l00722"></a>00722     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;rxKick: rxState=%s (rxFifo.size=%d)\n&quot;</span>,
<a name="l00723"></a>00723             <a class="code" href="namespaceSinic.html#aafc3b60f55352a04a630cfd84d9d641a">RxStateStrings</a>[<a class="code" href="classSinic_1_1Device.html#a17c506ad3a705ec9dbd1762e6a80fbf5">rxState</a>], <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#acdb549c592f948a9d973d4d84b02ef87">size</a>());
<a name="l00724"></a>00724 
<a name="l00725"></a>00725     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#aa36d466a86f77d2c7afdc014e3a6f8b3">rxKickTick</a> &gt; <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>()) {
<a name="l00726"></a>00726         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;rxKick: exiting, can&apos;t run till %d\n&quot;</span>,
<a name="l00727"></a>00727                 <a class="code" href="classSinic_1_1Device.html#aa36d466a86f77d2c7afdc014e3a6f8b3">rxKickTick</a>);
<a name="l00728"></a>00728         <span class="keywordflow">return</span>;
<a name="l00729"></a>00729     }
<a name="l00730"></a>00730 
<a name="l00731"></a>00731   next:
<a name="l00732"></a>00732     <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#a83f8adca24e250bfb5c9a90a35503ae9">check</a>();
<a name="l00733"></a>00733     <span class="keywordflow">if</span> (rxState == <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82ab702fffa03e4cec4b054f71cfe34ce7c">rxIdle</a>)
<a name="l00734"></a>00734         <span class="keywordflow">goto</span> <a class="code" href="namespaceX86ISA.html#aab9b5a2e1cd2f24d08a9872895ded9c9">exit</a>;
<a name="l00735"></a>00735 
<a name="l00736"></a>00736     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#a560efaee55571ea588551a80aadc6cda">rxActive</a> == -1) {
<a name="l00737"></a>00737         <span class="keywordflow">if</span> (rxState != <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82acd42510cc5c902cc3b338fee8106b4ca">rxFifoBlock</a>)
<a name="l00738"></a>00738             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;no active vnic while in state %s&quot;</span>, <a class="code" href="namespaceSinic.html#aafc3b60f55352a04a630cfd84d9d641a">RxStateStrings</a>[rxState]);
<a name="l00739"></a>00739 
<a name="l00740"></a>00740         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;processing rxState=%s\n&quot;</span>,
<a name="l00741"></a>00741                 <a class="code" href="namespaceSinic.html#aafc3b60f55352a04a630cfd84d9d641a">RxStateStrings</a>[rxState]);
<a name="l00742"></a>00742     } <span class="keywordflow">else</span> {
<a name="l00743"></a>00743         vnic = &amp;<a class="code" href="classSinic_1_1Device.html#acb438fcaae56ab29f35376e8b0726c23">virtualRegs</a>[<a class="code" href="classSinic_1_1Device.html#a560efaee55571ea588551a80aadc6cda">rxActive</a>];
<a name="l00744"></a>00744         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM,
<a name="l00745"></a>00745                 <span class="stringliteral">&quot;processing rxState=%s for vnic %d (rxunique %d)\n&quot;</span>,
<a name="l00746"></a>00746                 <a class="code" href="namespaceSinic.html#aafc3b60f55352a04a630cfd84d9d641a">RxStateStrings</a>[rxState], <a class="code" href="classSinic_1_1Device.html#a560efaee55571ea588551a80aadc6cda">rxActive</a>, vnic-&gt;rxUnique);
<a name="l00747"></a>00747     }
<a name="l00748"></a>00748 
<a name="l00749"></a>00749     <span class="keywordflow">switch</span> (rxState) {
<a name="l00750"></a>00750       <span class="keywordflow">case</span> <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82acd42510cc5c902cc3b338fee8106b4ca">rxFifoBlock</a>:
<a name="l00751"></a>00751         <span class="keywordflow">if</span> (<a class="code" href="trace_8hh.html#af76c9f7776aade1bf9d7dfa8a0c6b341">DTRACE</a>(EthernetSM)) {
<a name="l00752"></a>00752             <a class="code" href="classPacketFifo.html#a6905b6d8863a2eecd86b633802b68fda">PacketFifo::iterator</a> end = <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#acad38d52497a975bfb6f2f6acd76631f">end</a>();
<a name="l00753"></a>00753             <span class="keywordtype">int</span> size = <a class="code" href="classSinic_1_1Device.html#acb438fcaae56ab29f35376e8b0726c23">virtualRegs</a>.size();
<a name="l00754"></a>00754             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; size; ++<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>) {
<a name="l00755"></a>00755                 VirtualReg *vn = &amp;<a class="code" href="classSinic_1_1Device.html#acb438fcaae56ab29f35376e8b0726c23">virtualRegs</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>];
<a name="l00756"></a>00756                 <span class="keywordtype">bool</span> busy = Regs::get_RxDone_Busy(vn-&gt;RxDone);
<a name="l00757"></a>00757                 <span class="keywordflow">if</span> (vn-&gt;rxIndex != end) {
<a name="l00758"></a>00758 <span class="preprocessor">#ifndef NDEBUG</span>
<a name="l00759"></a>00759 <span class="preprocessor"></span>                    <span class="keywordtype">bool</span> dirty = vn-&gt;rxPacketOffset &gt; 0;
<a name="l00760"></a>00760                     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespaceArmISA.html#a566327436c4c7e7a63ab9ac137e9d50e">status</a>;
<a name="l00761"></a>00761 
<a name="l00762"></a>00762                     <span class="keywordflow">if</span> (busy &amp;&amp; dirty)
<a name="l00763"></a>00763                         status = <span class="stringliteral">&quot;busy,dirty&quot;</span>;
<a name="l00764"></a>00764                     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (busy)
<a name="l00765"></a>00765                         status = <span class="stringliteral">&quot;busy&quot;</span>;
<a name="l00766"></a>00766                     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dirty)
<a name="l00767"></a>00767                         status = <span class="stringliteral">&quot;dirty&quot;</span>;
<a name="l00768"></a>00768                     <span class="keywordflow">else</span>
<a name="l00769"></a>00769                         status = <span class="stringliteral">&quot;mapped&quot;</span>;
<a name="l00770"></a>00770 
<a name="l00771"></a>00771                     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM,
<a name="l00772"></a>00772                             <span class="stringliteral">&quot;vnic %d %s (rxunique %d), packet %d, slack %d\n&quot;</span>,
<a name="l00773"></a>00773                             <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>, status, vn-&gt;rxUnique,
<a name="l00774"></a>00774                             <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#ac10df17121a3ec3c16e16de61b49df79">countPacketsBefore</a>(vn-&gt;rxIndex),
<a name="l00775"></a>00775                             vn-&gt;rxIndex-&gt;slack);
<a name="l00776"></a>00776 <span class="preprocessor">#endif</span>
<a name="l00777"></a>00777 <span class="preprocessor"></span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (busy) {
<a name="l00778"></a>00778                     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;vnic %d unmapped (rxunique %d)\n&quot;</span>,
<a name="l00779"></a>00779                             <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>, vn-&gt;rxUnique);
<a name="l00780"></a>00780                 }
<a name="l00781"></a>00781             }
<a name="l00782"></a>00782         }
<a name="l00783"></a>00783 
<a name="l00784"></a>00784         <span class="keywordflow">if</span> (!<a class="code" href="classSinic_1_1Device.html#afd33bf96a9045d1f90d0685ad3e33253">rxBusy</a>.empty()) {
<a name="l00785"></a>00785             <a class="code" href="classSinic_1_1Device.html#a560efaee55571ea588551a80aadc6cda">rxActive</a> = <a class="code" href="classSinic_1_1Device.html#afd33bf96a9045d1f90d0685ad3e33253">rxBusy</a>.front();
<a name="l00786"></a>00786             <a class="code" href="classSinic_1_1Device.html#afd33bf96a9045d1f90d0685ad3e33253">rxBusy</a>.pop_front();
<a name="l00787"></a>00787             vnic = &amp;<a class="code" href="classSinic_1_1Device.html#acb438fcaae56ab29f35376e8b0726c23">virtualRegs</a>[<a class="code" href="classSinic_1_1Device.html#a560efaee55571ea588551a80aadc6cda">rxActive</a>];
<a name="l00788"></a>00788 
<a name="l00789"></a>00789             <span class="keywordflow">if</span> (vnic-&gt;rxIndex == <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#acad38d52497a975bfb6f2f6acd76631f">end</a>())
<a name="l00790"></a>00790                 <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;continuing vnic without packet\n&quot;</span>);
<a name="l00791"></a>00791 
<a name="l00792"></a>00792             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM,
<a name="l00793"></a>00793                     <span class="stringliteral">&quot;continue processing for vnic %d (rxunique %d)\n&quot;</span>,
<a name="l00794"></a>00794                     <a class="code" href="classSinic_1_1Device.html#a560efaee55571ea588551a80aadc6cda">rxActive</a>, vnic-&gt;rxUnique);
<a name="l00795"></a>00795 
<a name="l00796"></a>00796             rxState = <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82ad650f06241a5757f0fa65acae2960b1f">rxBeginCopy</a>;
<a name="l00797"></a>00797 
<a name="l00798"></a>00798             <span class="keywordtype">int</span> vnic_distance = <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#ac10df17121a3ec3c16e16de61b49df79">countPacketsBefore</a>(vnic-&gt;rxIndex);
<a name="l00799"></a>00799             <a class="code" href="classSinic_1_1Device.html#aceabe9d2fb5f87ee602c22e0d0141479">totalVnicDistance</a> += vnic_distance;
<a name="l00800"></a>00800             <a class="code" href="classSinic_1_1Device.html#a489a76c8b17d7dec4865d06b211218fb">numVnicDistance</a> += 1;
<a name="l00801"></a>00801             <span class="keywordflow">if</span> (vnic_distance &gt; <a class="code" href="classSinic_1_1Device.html#a3eb6949618cb5ab7fcb963974eb980a0">_maxVnicDistance</a>) {
<a name="l00802"></a>00802                 <a class="code" href="classSinic_1_1Device.html#a55159ce061f8632637c330b0b101d370">maxVnicDistance</a> = vnic_distance;
<a name="l00803"></a>00803                 <a class="code" href="classSinic_1_1Device.html#a3eb6949618cb5ab7fcb963974eb980a0">_maxVnicDistance</a> = vnic_distance;
<a name="l00804"></a>00804             }
<a name="l00805"></a>00805 
<a name="l00806"></a>00806             <span class="keywordflow">break</span>;
<a name="l00807"></a>00807         }
<a name="l00808"></a>00808 
<a name="l00809"></a>00809         <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#aee345bc47c94b616b04d8f502dab1826">rxFifoPtr</a> == <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#acad38d52497a975bfb6f2f6acd76631f">end</a>()) {
<a name="l00810"></a>00810             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;receive waiting for data.  Nothing to do.\n&quot;</span>);
<a name="l00811"></a>00811             <span class="keywordflow">goto</span> <a class="code" href="namespaceX86ISA.html#aab9b5a2e1cd2f24d08a9872895ded9c9">exit</a>;
<a name="l00812"></a>00812         }
<a name="l00813"></a>00813 
<a name="l00814"></a>00814         <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#a45202257b5522a1436d8130249ee0a0d">rxList</a>.empty())
<a name="l00815"></a>00815             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Not idle, but nothing to do!&quot;</span>);
<a name="l00816"></a>00816 
<a name="l00817"></a>00817         assert(!<a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#ac6e61de369e994009e36f344f99c15ad">empty</a>());
<a name="l00818"></a>00818 
<a name="l00819"></a>00819         <a class="code" href="classSinic_1_1Device.html#a560efaee55571ea588551a80aadc6cda">rxActive</a> = <a class="code" href="classSinic_1_1Device.html#a45202257b5522a1436d8130249ee0a0d">rxList</a>.front();
<a name="l00820"></a>00820         <a class="code" href="classSinic_1_1Device.html#a45202257b5522a1436d8130249ee0a0d">rxList</a>.pop_front();
<a name="l00821"></a>00821         vnic = &amp;<a class="code" href="classSinic_1_1Device.html#acb438fcaae56ab29f35376e8b0726c23">virtualRegs</a>[rxActive];
<a name="l00822"></a>00822 
<a name="l00823"></a>00823         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM,
<a name="l00824"></a>00824                 <span class="stringliteral">&quot;processing new packet for vnic %d (rxunique %d)\n&quot;</span>,
<a name="l00825"></a>00825                 rxActive, vnic-&gt;rxUnique);
<a name="l00826"></a>00826 
<a name="l00827"></a>00827         <span class="comment">// Grab a new packet from the fifo.</span>
<a name="l00828"></a>00828         vnic-&gt;rxIndex = <a class="code" href="classSinic_1_1Device.html#aee345bc47c94b616b04d8f502dab1826">rxFifoPtr</a>++;
<a name="l00829"></a>00829         vnic-&gt;rxIndex-&gt;priv = rxActive;
<a name="l00830"></a>00830         vnic-&gt;rxPacketOffset = 0;
<a name="l00831"></a>00831         vnic-&gt;rxPacketBytes = vnic-&gt;rxIndex-&gt;packet-&gt;length;
<a name="l00832"></a>00832         assert(vnic-&gt;rxPacketBytes);
<a name="l00833"></a>00833         <a class="code" href="classSinic_1_1Device.html#a41d5a12c120010c50c75ea0dc2f01241">rxMappedCount</a>++;
<a name="l00834"></a>00834 
<a name="l00835"></a>00835         vnic-&gt;rxDoneData = 0;
<a name="l00836"></a>00836         <span class="comment">/* scope for variables */</span> {
<a name="l00837"></a>00837             <a class="code" href="classNet_1_1IpPtr.html">IpPtr</a> <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>(vnic-&gt;rxIndex-&gt;packet);
<a name="l00838"></a>00838             <span class="keywordflow">if</span> (<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>) {
<a name="l00839"></a>00839                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;ID is %d\n&quot;</span>, <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>-&gt;id());
<a name="l00840"></a>00840                 vnic-&gt;rxDoneData |= Regs::RxDone_IpPacket;
<a name="l00841"></a>00841                 <a class="code" href="classEtherDevice.html#a8ef538bf2e629f31a94678016ee92ddf">rxIpChecksums</a>++;
<a name="l00842"></a>00842                 <span class="keywordflow">if</span> (<a class="code" href="namespaceNet.html#a7c7758a7af16c9b808dcb8ddf7aa1a34">cksum</a>(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>) != 0) {
<a name="l00843"></a>00843                     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetCksum, <span class="stringliteral">&quot;Rx IP Checksum Error\n&quot;</span>);
<a name="l00844"></a>00844                     vnic-&gt;rxDoneData |= Regs::RxDone_IpError;
<a name="l00845"></a>00845                 }
<a name="l00846"></a>00846                 <a class="code" href="classNet_1_1TcpPtr.html">TcpPtr</a> <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>);
<a name="l00847"></a>00847                 <a class="code" href="classNet_1_1UdpPtr.html">UdpPtr</a> udp(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>);
<a name="l00848"></a>00848                 <span class="keywordflow">if</span> (<a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>) {
<a name="l00849"></a>00849                     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet,
<a name="l00850"></a>00850                             <span class="stringliteral">&quot;Src Port=%d, Dest Port=%d, Seq=%d, Ack=%d\n&quot;</span>,
<a name="l00851"></a>00851                             <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>-&gt;sport(), <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>-&gt;dport(), <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>-&gt;seq(),
<a name="l00852"></a>00852                             <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>-&gt;ack());
<a name="l00853"></a>00853                     vnic-&gt;rxDoneData |= Regs::RxDone_TcpPacket;
<a name="l00854"></a>00854                     <a class="code" href="classEtherDevice.html#a6e12a524415fd313cc9a396fa1f4addb">rxTcpChecksums</a>++;
<a name="l00855"></a>00855                     <span class="keywordflow">if</span> (<a class="code" href="namespaceNet.html#a7c7758a7af16c9b808dcb8ddf7aa1a34">cksum</a>(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>) != 0) {
<a name="l00856"></a>00856                         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetCksum, <span class="stringliteral">&quot;Rx TCP Checksum Error\n&quot;</span>);
<a name="l00857"></a>00857                         vnic-&gt;rxDoneData |= Regs::RxDone_TcpError;
<a name="l00858"></a>00858                     }
<a name="l00859"></a>00859                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (udp) {
<a name="l00860"></a>00860                     vnic-&gt;rxDoneData |= Regs::RxDone_UdpPacket;
<a name="l00861"></a>00861                     <a class="code" href="classEtherDevice.html#a17a288e255ab7c2ef29580d9aa1ddfe5">rxUdpChecksums</a>++;
<a name="l00862"></a>00862                     <span class="keywordflow">if</span> (<a class="code" href="namespaceNet.html#a7c7758a7af16c9b808dcb8ddf7aa1a34">cksum</a>(udp) != 0) {
<a name="l00863"></a>00863                         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetCksum, <span class="stringliteral">&quot;Rx UDP Checksum Error\n&quot;</span>);
<a name="l00864"></a>00864                         vnic-&gt;rxDoneData |= Regs::RxDone_UdpError;
<a name="l00865"></a>00865                     }
<a name="l00866"></a>00866                 }
<a name="l00867"></a>00867             }
<a name="l00868"></a>00868         }
<a name="l00869"></a>00869         rxState = <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82ad650f06241a5757f0fa65acae2960b1f">rxBeginCopy</a>;
<a name="l00870"></a>00870         <span class="keywordflow">break</span>;
<a name="l00871"></a>00871 
<a name="l00872"></a>00872       <span class="keywordflow">case</span> <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82ad650f06241a5757f0fa65acae2960b1f">rxBeginCopy</a>:
<a name="l00873"></a>00873         <span class="keywordflow">if</span> (<a class="code" href="classDmaDevice.html#a481b9352c138101d0f84f163a760c6e5">dmaPending</a>() || <a class="code" href="classDrainable.html#a5c95358f0e9355bcc3979baf3fb7307f">getDrainState</a>() != <a class="code" href="classDrainable.html#a5d74787dedbc4e11c1ab15bf487e61f8a2f5f2c4a8c4f4f0519d503dcdfbf55cb">Drainable::Running</a>)
<a name="l00874"></a>00874             <span class="keywordflow">goto</span> <a class="code" href="namespaceX86ISA.html#aab9b5a2e1cd2f24d08a9872895ded9c9">exit</a>;
<a name="l00875"></a>00875 
<a name="l00876"></a>00876         <a class="code" href="classSinic_1_1Device.html#a4a609f84c6849bcfb6dee08329773fca">rxDmaAddr</a> = <a class="code" href="classSinic_1_1Base.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;platform-&gt;pciToDma(
<a name="l00877"></a>00877                 Regs::get_RxData_Addr(vnic-&gt;RxData));
<a name="l00878"></a>00878         <a class="code" href="classSinic_1_1Device.html#a0efc207ddfcff656cbe0237c3bc237c1">rxDmaLen</a> = min&lt;unsigned&gt;(Regs::get_RxData_Len(vnic-&gt;RxData),
<a name="l00879"></a>00879                                  vnic-&gt;rxPacketBytes);
<a name="l00880"></a>00880 
<a name="l00881"></a>00881         <span class="comment">/*</span>
<a name="l00882"></a>00882 <span class="comment">         * if we&apos;re doing zero/delay copy and we&apos;re below the fifo</span>
<a name="l00883"></a>00883 <span class="comment">         * threshold, see if we should try to do the zero/defer copy</span>
<a name="l00884"></a>00884 <span class="comment">         */</span>
<a name="l00885"></a>00885         <span class="keywordflow">if</span> ((Regs::get_Config_ZeroCopy(<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.Config) ||
<a name="l00886"></a>00886              Regs::get_Config_DelayCopy(<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.Config)) &amp;&amp;
<a name="l00887"></a>00887             !Regs::get_RxData_NoDelay(vnic-&gt;RxData) &amp;&amp; <a class="code" href="classSinic_1_1Device.html#a1ef589f4a0a6d9baae11626a0d89b5ec">rxLow</a>) {
<a name="l00888"></a>00888             <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#a0efc207ddfcff656cbe0237c3bc237c1">rxDmaLen</a> &gt; <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.ZeroCopyMark)
<a name="l00889"></a>00889                 <a class="code" href="classSinic_1_1Device.html#a0efc207ddfcff656cbe0237c3bc237c1">rxDmaLen</a> = <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.ZeroCopySize;
<a name="l00890"></a>00890         }
<a name="l00891"></a>00891         <a class="code" href="classSinic_1_1Device.html#ae917f4bc2a610fed06749a854fb89d14">rxDmaData</a> = vnic-&gt;rxIndex-&gt;packet-&gt;data + vnic-&gt;rxPacketOffset;
<a name="l00892"></a>00892         rxState = <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82acc200faa35bf75419147de6b805d083b">rxCopy</a>;
<a name="l00893"></a>00893         <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#a4a609f84c6849bcfb6dee08329773fca">rxDmaAddr</a> == 1<a class="code" href="base_2types_8hh.html#a959db1cfc6f9f5c23aefcda92bfc763e">LL</a>) {
<a name="l00894"></a>00894             rxState = <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82a8fbf22d6f8cc55993cc2a09d07418446">rxCopyDone</a>;
<a name="l00895"></a>00895             <span class="keywordflow">break</span>;
<a name="l00896"></a>00896         }
<a name="l00897"></a>00897 
<a name="l00898"></a>00898         <a class="code" href="classDmaDevice.html#a4a2db8a9eb52a00a9a2e19c2eb3753dc">dmaWrite</a>(<a class="code" href="classSinic_1_1Device.html#a4a609f84c6849bcfb6dee08329773fca">rxDmaAddr</a>, <a class="code" href="classSinic_1_1Device.html#a0efc207ddfcff656cbe0237c3bc237c1">rxDmaLen</a>, &amp;<a class="code" href="classSinic_1_1Device.html#a50d4f78a0a458835572bb101383bf692">rxDmaEvent</a>, <a class="code" href="classSinic_1_1Device.html#ae917f4bc2a610fed06749a854fb89d14">rxDmaData</a>);
<a name="l00899"></a>00899         <span class="keywordflow">break</span>;
<a name="l00900"></a>00900 
<a name="l00901"></a>00901       <span class="keywordflow">case</span> <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82acc200faa35bf75419147de6b805d083b">rxCopy</a>:
<a name="l00902"></a>00902         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;receive machine still copying\n&quot;</span>);
<a name="l00903"></a>00903         <span class="keywordflow">goto</span> <a class="code" href="namespaceX86ISA.html#aab9b5a2e1cd2f24d08a9872895ded9c9">exit</a>;
<a name="l00904"></a>00904 
<a name="l00905"></a>00905       <span class="keywordflow">case</span> <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82a8fbf22d6f8cc55993cc2a09d07418446">rxCopyDone</a>:
<a name="l00906"></a>00906         vnic-&gt;RxDone = vnic-&gt;rxDoneData;
<a name="l00907"></a>00907         vnic-&gt;RxDone |= Regs::RxDone_Complete;
<a name="l00908"></a>00908         <a class="code" href="classSinic_1_1Device.html#a508dbc989a9476f10e7622b054aac7e1">rxBusyCount</a>--;
<a name="l00909"></a>00909 
<a name="l00910"></a>00910         <span class="keywordflow">if</span> (vnic-&gt;rxPacketBytes == <a class="code" href="classSinic_1_1Device.html#a0efc207ddfcff656cbe0237c3bc237c1">rxDmaLen</a>) {
<a name="l00911"></a>00911             <span class="keywordflow">if</span> (vnic-&gt;rxPacketOffset)
<a name="l00912"></a>00912                 <a class="code" href="classSinic_1_1Device.html#a9e5a18ec7025db57fa6ff2f05a289804">rxDirtyCount</a>--;
<a name="l00913"></a>00913 
<a name="l00914"></a>00914             <span class="comment">// Packet is complete.  Indicate how many bytes were copied</span>
<a name="l00915"></a>00915             vnic-&gt;RxDone = Regs::set_RxDone_CopyLen(vnic-&gt;RxDone, <a class="code" href="classSinic_1_1Device.html#a0efc207ddfcff656cbe0237c3bc237c1">rxDmaLen</a>);
<a name="l00916"></a>00916 
<a name="l00917"></a>00917             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM,
<a name="l00918"></a>00918                     <span class="stringliteral">&quot;rxKick: packet complete on vnic %d (rxunique %d)\n&quot;</span>,
<a name="l00919"></a>00919                     rxActive, vnic-&gt;rxUnique);
<a name="l00920"></a>00920             <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#a429e63f3d3384b4bb9e6514136c9e0f1">remove</a>(vnic-&gt;rxIndex);
<a name="l00921"></a>00921             vnic-&gt;rxIndex = <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#acad38d52497a975bfb6f2f6acd76631f">end</a>();
<a name="l00922"></a>00922             <a class="code" href="classSinic_1_1Device.html#a41d5a12c120010c50c75ea0dc2f01241">rxMappedCount</a>--;
<a name="l00923"></a>00923         } <span class="keywordflow">else</span> {
<a name="l00924"></a>00924             <span class="keywordflow">if</span> (!vnic-&gt;rxPacketOffset)
<a name="l00925"></a>00925                 <a class="code" href="classSinic_1_1Device.html#a9e5a18ec7025db57fa6ff2f05a289804">rxDirtyCount</a>++;
<a name="l00926"></a>00926 
<a name="l00927"></a>00927             vnic-&gt;rxPacketBytes -= <a class="code" href="classSinic_1_1Device.html#a0efc207ddfcff656cbe0237c3bc237c1">rxDmaLen</a>;
<a name="l00928"></a>00928             vnic-&gt;rxPacketOffset += <a class="code" href="classSinic_1_1Device.html#a0efc207ddfcff656cbe0237c3bc237c1">rxDmaLen</a>;
<a name="l00929"></a>00929             vnic-&gt;RxDone |= Regs::RxDone_More;
<a name="l00930"></a>00930             vnic-&gt;RxDone = Regs::set_RxDone_CopyLen(vnic-&gt;RxDone,
<a name="l00931"></a>00931                                                     vnic-&gt;rxPacketBytes);
<a name="l00932"></a>00932             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM,
<a name="l00933"></a>00933                     <span class="stringliteral">&quot;rxKick: packet not complete on vnic %d (rxunique %d): &quot;</span>
<a name="l00934"></a>00934                     <span class="stringliteral">&quot;%d bytes left\n&quot;</span>,
<a name="l00935"></a>00935                     rxActive, vnic-&gt;rxUnique, vnic-&gt;rxPacketBytes);
<a name="l00936"></a>00936         }
<a name="l00937"></a>00937 
<a name="l00938"></a>00938         rxActive = -1;
<a name="l00939"></a>00939         rxState = <a class="code" href="classSinic_1_1Device.html#afd33bf96a9045d1f90d0685ad3e33253">rxBusy</a>.empty() &amp;&amp; <a class="code" href="classSinic_1_1Device.html#a45202257b5522a1436d8130249ee0a0d">rxList</a>.empty() ? <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82ab702fffa03e4cec4b054f71cfe34ce7c">rxIdle</a> : <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82acd42510cc5c902cc3b338fee8106b4ca">rxFifoBlock</a>;
<a name="l00940"></a>00940 
<a name="l00941"></a>00941         <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#ac6e61de369e994009e36f344f99c15ad">empty</a>()) {
<a name="l00942"></a>00942             <a class="code" href="classSinic_1_1Device.html#ad1a6ea4f31e657c02d56bdf168fb988a">devIntrPost</a>(Regs::Intr_RxEmpty);
<a name="l00943"></a>00943             <a class="code" href="classSinic_1_1Device.html#a62b6a5f468811226da2581374919b1a5">rxEmpty</a> = <span class="keyword">true</span>;
<a name="l00944"></a>00944         }
<a name="l00945"></a>00945 
<a name="l00946"></a>00946         <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#acdb549c592f948a9d973d4d84b02ef87">size</a>() &lt; <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.RxFifoLow)
<a name="l00947"></a>00947             <a class="code" href="classSinic_1_1Device.html#a1ef589f4a0a6d9baae11626a0d89b5ec">rxLow</a> = <span class="keyword">true</span>;
<a name="l00948"></a>00948 
<a name="l00949"></a>00949         <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#acdb549c592f948a9d973d4d84b02ef87">size</a>() &gt; <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.RxFifoHigh)
<a name="l00950"></a>00950             <a class="code" href="classSinic_1_1Device.html#a1ef589f4a0a6d9baae11626a0d89b5ec">rxLow</a> = <span class="keyword">false</span>;
<a name="l00951"></a>00951 
<a name="l00952"></a>00952         <a class="code" href="classSinic_1_1Device.html#ad1a6ea4f31e657c02d56bdf168fb988a">devIntrPost</a>(Regs::Intr_RxDMA);
<a name="l00953"></a>00953         <span class="keywordflow">break</span>;
<a name="l00954"></a>00954 
<a name="l00955"></a>00955       <span class="keywordflow">default</span>:
<a name="l00956"></a>00956         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Invalid rxState!&quot;</span>);
<a name="l00957"></a>00957     }
<a name="l00958"></a>00958 
<a name="l00959"></a>00959     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;entering next rxState=%s\n&quot;</span>,
<a name="l00960"></a>00960             <a class="code" href="namespaceSinic.html#aafc3b60f55352a04a630cfd84d9d641a">RxStateStrings</a>[rxState]);
<a name="l00961"></a>00961 
<a name="l00962"></a>00962     <span class="keywordflow">goto</span> next;
<a name="l00963"></a>00963 
<a name="l00964"></a>00964   <a class="code" href="namespaceX86ISA.html#aab9b5a2e1cd2f24d08a9872895ded9c9">exit</a>:
<a name="l00968"></a>00968     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;rx state machine exited rxState=%s\n&quot;</span>,
<a name="l00969"></a>00969             <a class="code" href="namespaceSinic.html#aafc3b60f55352a04a630cfd84d9d641a">RxStateStrings</a>[rxState]);
<a name="l00970"></a>00970 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a53e036786d17361be4c7320d39c99b84"></a><!-- doxytag: member="Sinic::Device::serialize" ref="a53e036786d17361be4c7320d39c99b84" args="(std::ostream &amp;os)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void serialize </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>os</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Serialization stuff </p>

<p><a class="el" href="classSinic_1_1Base.html#a53e036786d17361be4c7320d39c99b84">Base</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l01309"></a>01309 {
<a name="l01310"></a>01310     <span class="keywordtype">int</span> <a class="code" href="namespaceX86ISA.html#a668f84c330035fdb72824eb18e09cd09">count</a>;
<a name="l01311"></a>01311 
<a name="l01312"></a>01312     <span class="comment">// Serialize the PciDevice base class</span>
<a name="l01313"></a>01313     <a class="code" href="classSinic_1_1Device.html#a53e036786d17361be4c7320d39c99b84">Base::serialize</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>);
<a name="l01314"></a>01314 
<a name="l01315"></a>01315     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#a17c506ad3a705ec9dbd1762e6a80fbf5">rxState</a> == <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82acc200faa35bf75419147de6b805d083b">rxCopy</a>)
<a name="l01316"></a>01316         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;can&apos;t serialize with an in flight dma request rxState=%s&quot;</span>,
<a name="l01317"></a>01317               <a class="code" href="namespaceSinic.html#aafc3b60f55352a04a630cfd84d9d641a">RxStateStrings</a>[<a class="code" href="classSinic_1_1Device.html#a17c506ad3a705ec9dbd1762e6a80fbf5">rxState</a>]);
<a name="l01318"></a>01318 
<a name="l01319"></a>01319     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#a12e3a80bef638cd15c067541b96a4756">txState</a> == <a class="code" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aa76918a4583683f130898f157b820164c">txCopy</a>)
<a name="l01320"></a>01320         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;can&apos;t serialize with an in flight dma request txState=%s&quot;</span>,
<a name="l01321"></a>01321               <a class="code" href="namespaceSinic.html#af3483fda812098251269cec3e53de3b7">TxStateStrings</a>[<a class="code" href="classSinic_1_1Device.html#a12e3a80bef638cd15c067541b96a4756">txState</a>]);
<a name="l01322"></a>01322 
<a name="l01323"></a>01323     <span class="comment">/*</span>
<a name="l01324"></a>01324 <span class="comment">     * Serialize the device registers that could be modified by the OS.</span>
<a name="l01325"></a>01325 <span class="comment">     */</span>
<a name="l01326"></a>01326     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.Config);
<a name="l01327"></a>01327     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrStatus);
<a name="l01328"></a>01328     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrMask);
<a name="l01329"></a>01329     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.RxData);
<a name="l01330"></a>01330     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.TxData);
<a name="l01331"></a>01331 
<a name="l01332"></a>01332     <span class="comment">/*</span>
<a name="l01333"></a>01333 <span class="comment">     * Serialize the virtual nic state</span>
<a name="l01334"></a>01334 <span class="comment">     */</span>
<a name="l01335"></a>01335     <span class="keywordtype">int</span> virtualRegsSize = <a class="code" href="classSinic_1_1Device.html#acb438fcaae56ab29f35376e8b0726c23">virtualRegs</a>.size();
<a name="l01336"></a>01336     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(virtualRegsSize);
<a name="l01337"></a>01337     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; virtualRegsSize; ++<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>) {
<a name="l01338"></a>01338         VirtualReg *vnic = &amp;<a class="code" href="classSinic_1_1Device.html#acb438fcaae56ab29f35376e8b0726c23">virtualRegs</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>];
<a name="l01339"></a>01339 
<a name="l01340"></a>01340         std::string <a class="code" href="namespaceX86ISA.html#aeeb02ad833ab76f3430553ef93213a6b">reg</a> = <a class="code" href="cprintf_8hh.html#ace22d1c39f2df58e593bc49d1613eca2">csprintf</a>(<span class="stringliteral">&quot;vnic%d&quot;</span>, <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>);
<a name="l01341"></a>01341         <a class="code" href="arch_2x86_2types_8cc.html#adc6b6ea750b0d7ff7441ea35588abbdb">paramOut</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>, reg + <span class="stringliteral">&quot;.RxData&quot;</span>, vnic-&gt;RxData);
<a name="l01342"></a>01342         <a class="code" href="arch_2x86_2types_8cc.html#adc6b6ea750b0d7ff7441ea35588abbdb">paramOut</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>, reg + <span class="stringliteral">&quot;.RxDone&quot;</span>, vnic-&gt;RxDone);
<a name="l01343"></a>01343         <a class="code" href="arch_2x86_2types_8cc.html#adc6b6ea750b0d7ff7441ea35588abbdb">paramOut</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>, reg + <span class="stringliteral">&quot;.TxData&quot;</span>, vnic-&gt;TxData);
<a name="l01344"></a>01344         <a class="code" href="arch_2x86_2types_8cc.html#adc6b6ea750b0d7ff7441ea35588abbdb">paramOut</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>, reg + <span class="stringliteral">&quot;.TxDone&quot;</span>, vnic-&gt;TxDone);
<a name="l01345"></a>01345 
<a name="l01346"></a>01346         <span class="keywordtype">bool</span> rxPacketExists = vnic-&gt;rxIndex != <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#acad38d52497a975bfb6f2f6acd76631f">end</a>();
<a name="l01347"></a>01347         <a class="code" href="arch_2x86_2types_8cc.html#adc6b6ea750b0d7ff7441ea35588abbdb">paramOut</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>, reg + <span class="stringliteral">&quot;.rxPacketExists&quot;</span>, rxPacketExists);
<a name="l01348"></a>01348         <span class="keywordflow">if</span> (rxPacketExists) {
<a name="l01349"></a>01349             <span class="keywordtype">int</span> rxPacket = 0;
<a name="l01350"></a>01350             <a class="code" href="classPacketFifo.html#a6905b6d8863a2eecd86b633802b68fda">PacketFifo::iterator</a> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#ad69bd11391be1a1dba5c8202259664f8">begin</a>();
<a name="l01351"></a>01351             <span class="keywordflow">while</span> (i != vnic-&gt;rxIndex) {
<a name="l01352"></a>01352                 assert(i != <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#acad38d52497a975bfb6f2f6acd76631f">end</a>());
<a name="l01353"></a>01353                 ++i;
<a name="l01354"></a>01354                 ++rxPacket;
<a name="l01355"></a>01355             }
<a name="l01356"></a>01356 
<a name="l01357"></a>01357             <a class="code" href="arch_2x86_2types_8cc.html#adc6b6ea750b0d7ff7441ea35588abbdb">paramOut</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>, reg + <span class="stringliteral">&quot;.rxPacket&quot;</span>, rxPacket);
<a name="l01358"></a>01358             <a class="code" href="arch_2x86_2types_8cc.html#adc6b6ea750b0d7ff7441ea35588abbdb">paramOut</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>, reg + <span class="stringliteral">&quot;.rxPacketOffset&quot;</span>, vnic-&gt;rxPacketOffset);
<a name="l01359"></a>01359             <a class="code" href="arch_2x86_2types_8cc.html#adc6b6ea750b0d7ff7441ea35588abbdb">paramOut</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>, reg + <span class="stringliteral">&quot;.rxPacketBytes&quot;</span>, vnic-&gt;rxPacketBytes);
<a name="l01360"></a>01360         }
<a name="l01361"></a>01361         <a class="code" href="arch_2x86_2types_8cc.html#adc6b6ea750b0d7ff7441ea35588abbdb">paramOut</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>, reg + <span class="stringliteral">&quot;.rxDoneData&quot;</span>, vnic-&gt;rxDoneData);
<a name="l01362"></a>01362     }
<a name="l01363"></a>01363 
<a name="l01364"></a>01364     <span class="keywordtype">int</span> <a class="code" href="classSinic_1_1Device.html#aee345bc47c94b616b04d8f502dab1826">rxFifoPtr</a> = -1;
<a name="l01365"></a>01365     <span class="keywordflow">if</span> (this-&gt;rxFifoPtr != <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#acad38d52497a975bfb6f2f6acd76631f">end</a>())
<a name="l01366"></a>01366         rxFifoPtr = <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#ac10df17121a3ec3c16e16de61b49df79">countPacketsBefore</a>(this-&gt;rxFifoPtr);
<a name="l01367"></a>01367     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(rxFifoPtr);
<a name="l01368"></a>01368 
<a name="l01369"></a>01369     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#a560efaee55571ea588551a80aadc6cda">rxActive</a>);
<a name="l01370"></a>01370     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#a508dbc989a9476f10e7622b054aac7e1">rxBusyCount</a>);
<a name="l01371"></a>01371     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#a9e5a18ec7025db57fa6ff2f05a289804">rxDirtyCount</a>);
<a name="l01372"></a>01372     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#a41d5a12c120010c50c75ea0dc2f01241">rxMappedCount</a>);
<a name="l01373"></a>01373 
<a name="l01374"></a>01374     VirtualList::iterator i, end;
<a name="l01375"></a>01375     <span class="keywordflow">for</span> (count = 0, i = <a class="code" href="classSinic_1_1Device.html#a45202257b5522a1436d8130249ee0a0d">rxList</a>.begin(), end = <a class="code" href="classSinic_1_1Device.html#a45202257b5522a1436d8130249ee0a0d">rxList</a>.end(); i != end; ++i)
<a name="l01376"></a>01376         <a class="code" href="arch_2x86_2types_8cc.html#adc6b6ea750b0d7ff7441ea35588abbdb">paramOut</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>, <a class="code" href="cprintf_8hh.html#ace22d1c39f2df58e593bc49d1613eca2">csprintf</a>(<span class="stringliteral">&quot;rxList%d&quot;</span>, count++), *i);
<a name="l01377"></a>01377     <span class="keywordtype">int</span> rxListSize = count;
<a name="l01378"></a>01378     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(rxListSize);
<a name="l01379"></a>01379 
<a name="l01380"></a>01380     <span class="keywordflow">for</span> (count = 0, i = <a class="code" href="classSinic_1_1Device.html#afd33bf96a9045d1f90d0685ad3e33253">rxBusy</a>.begin(), end = <a class="code" href="classSinic_1_1Device.html#afd33bf96a9045d1f90d0685ad3e33253">rxBusy</a>.end(); i != end; ++i)
<a name="l01381"></a>01381         <a class="code" href="arch_2x86_2types_8cc.html#adc6b6ea750b0d7ff7441ea35588abbdb">paramOut</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>, <a class="code" href="cprintf_8hh.html#ace22d1c39f2df58e593bc49d1613eca2">csprintf</a>(<span class="stringliteral">&quot;rxBusy%d&quot;</span>, count++), *i);
<a name="l01382"></a>01382     <span class="keywordtype">int</span> rxBusySize = count;
<a name="l01383"></a>01383     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(rxBusySize);
<a name="l01384"></a>01384 
<a name="l01385"></a>01385     <span class="keywordflow">for</span> (count = 0, i = <a class="code" href="classSinic_1_1Device.html#a7010216dd085a0c2dac9d6b830a64f35">txList</a>.begin(), end = <a class="code" href="classSinic_1_1Device.html#a7010216dd085a0c2dac9d6b830a64f35">txList</a>.end(); i != end; ++i)
<a name="l01386"></a>01386         <a class="code" href="arch_2x86_2types_8cc.html#adc6b6ea750b0d7ff7441ea35588abbdb">paramOut</a>(<a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>, <a class="code" href="cprintf_8hh.html#ace22d1c39f2df58e593bc49d1613eca2">csprintf</a>(<span class="stringliteral">&quot;txList%d&quot;</span>, count++), *i);
<a name="l01387"></a>01387     <span class="keywordtype">int</span> txListSize = count;
<a name="l01388"></a>01388     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(txListSize);
<a name="l01389"></a>01389 
<a name="l01390"></a>01390     <span class="comment">/*</span>
<a name="l01391"></a>01391 <span class="comment">     * Serialize rx state machine</span>
<a name="l01392"></a>01392 <span class="comment">     */</span>
<a name="l01393"></a>01393     <span class="keywordtype">int</span> <a class="code" href="classSinic_1_1Device.html#a17c506ad3a705ec9dbd1762e6a80fbf5">rxState</a> = this-&gt;rxState;
<a name="l01394"></a>01394     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(rxState);
<a name="l01395"></a>01395     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#a62b6a5f468811226da2581374919b1a5">rxEmpty</a>);
<a name="l01396"></a>01396     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#a1ef589f4a0a6d9baae11626a0d89b5ec">rxLow</a>);
<a name="l01397"></a>01397     <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#ab4138b21b48e3371a8e20df72b675a88">serialize</a>(<span class="stringliteral">&quot;rxFifo&quot;</span>, <a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>);
<a name="l01398"></a>01398 
<a name="l01399"></a>01399     <span class="comment">/*</span>
<a name="l01400"></a>01400 <span class="comment">     * Serialize tx state machine</span>
<a name="l01401"></a>01401 <span class="comment">     */</span>
<a name="l01402"></a>01402     <span class="keywordtype">int</span> <a class="code" href="classSinic_1_1Device.html#a12e3a80bef638cd15c067541b96a4756">txState</a> = this-&gt;txState;
<a name="l01403"></a>01403     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(txState);
<a name="l01404"></a>01404     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#aa09cc8a4752916111328b7353e64f3bb">txFull</a>);
<a name="l01405"></a>01405     <a class="code" href="classSinic_1_1Device.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#ab4138b21b48e3371a8e20df72b675a88">serialize</a>(<span class="stringliteral">&quot;txFifo&quot;</span>, <a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>);
<a name="l01406"></a>01406     <span class="keywordtype">bool</span> txPacketExists = <a class="code" href="classSinic_1_1Device.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a>;
<a name="l01407"></a>01407     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(txPacketExists);
<a name="l01408"></a>01408     <span class="keywordflow">if</span> (txPacketExists) {
<a name="l01409"></a>01409         <a class="code" href="classSinic_1_1Device.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a>-&gt;serialize(<span class="stringliteral">&quot;txPacket&quot;</span>, <a class="code" href="namespaceX86ISA.html#a6b6e6ba763e7eaf46ac5b6372ca98d30">os</a>);
<a name="l01410"></a>01410         <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#ac0d074adcc00053882737a0009c84adb">txPacketOffset</a>);
<a name="l01411"></a>01411         <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#a1e82240f06ef6f0c8d8c0bb1a141a600">txPacketBytes</a>);
<a name="l01412"></a>01412     }
<a name="l01413"></a>01413 
<a name="l01414"></a>01414     <span class="comment">/*</span>
<a name="l01415"></a>01415 <span class="comment">     * If there&apos;s a pending transmit, store the time so we can</span>
<a name="l01416"></a>01416 <span class="comment">     * reschedule it later</span>
<a name="l01417"></a>01417 <span class="comment">     */</span>
<a name="l01418"></a>01418     <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> transmitTick = <a class="code" href="classSinic_1_1Device.html#a324fed072a29716c20a98a82927bd2a2">txEvent</a>.<a class="code" href="classEvent.html#a9cd69a6b10cb037550943f177a0da688" title="Determine if the current event is scheduled.">scheduled</a>() ? <a class="code" href="classSinic_1_1Device.html#a324fed072a29716c20a98a82927bd2a2">txEvent</a>.<a class="code" href="classEvent.html#a1883243a0117678c5695f2435dcabbdc" title="Get the time that the event is scheduled.">when</a>() - <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>() : 0;
<a name="l01419"></a>01419     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(transmitTick);
<a name="l01420"></a>01420 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac47b2c25cccfafe7e2c12673a1b3e793"></a><!-- doxytag: member="Sinic::Device::transferDone" ref="ac47b2c25cccfafe7e2c12673a1b3e793" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void transferDone </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l01154"></a>01154 {
<a name="l01155"></a>01155     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#ac6e61de369e994009e36f344f99c15ad">empty</a>()) {
<a name="l01156"></a>01156         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;transfer complete: txFifo empty...nothing to do\n&quot;</span>);
<a name="l01157"></a>01157         <span class="keywordflow">return</span>;
<a name="l01158"></a>01158     }
<a name="l01159"></a>01159 
<a name="l01160"></a>01160     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;transfer complete: data in txFifo...schedule xmit\n&quot;</span>);
<a name="l01161"></a>01161 
<a name="l01162"></a>01162     <a class="code" href="classEventManager.html#a83fe8e2d06cd7c6e36743e5beb07298f">reschedule</a>(<a class="code" href="classSinic_1_1Device.html#a324fed072a29716c20a98a82927bd2a2">txEvent</a>, <a class="code" href="classClockedObject.html#a773956693f216cafb7d4cad92ad582e5">clockEdge</a>(<a class="code" href="classCycles.html">Cycles</a>(1)), <span class="keyword">true</span>);
<a name="l01163"></a>01163 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af04463ca216d10ffa94db8463cee04c9"></a><!-- doxytag: member="Sinic::Device::transmit" ref="af04463ca216d10ffa94db8463cee04c9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void transmit </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Retransmit event </p>

<p><div class="fragment"><pre class="fragment"><a name="l00990"></a>00990 {
<a name="l00991"></a>00991     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#ac6e61de369e994009e36f344f99c15ad">empty</a>()) {
<a name="l00992"></a>00992         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;nothing to transmit\n&quot;</span>);
<a name="l00993"></a>00993         <span class="keywordflow">return</span>;
<a name="l00994"></a>00994     }
<a name="l00995"></a>00995 
<a name="l00996"></a>00996     <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> interrupts;
<a name="l00997"></a>00997     <a class="code" href="classRefCountingPtr.html">EthPacketPtr</a> packet = <a class="code" href="classSinic_1_1Device.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#a12006410db3b841b4764c57a9546d246">front</a>();
<a name="l00998"></a>00998     <span class="keywordflow">if</span> (!<a class="code" href="classSinic_1_1Base.html#a98d75f7466a1c032c9ba46044c3ad05e">interface</a>-&gt;sendPacket(packet)) {
<a name="l00999"></a>00999         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;Packet Transmit: failed txFifo available %d\n&quot;</span>,
<a name="l01000"></a>01000                 <a class="code" href="classSinic_1_1Device.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#aaf2f31de7b8cd9bf2085049b07125b1e">avail</a>());
<a name="l01001"></a>01001         <span class="keywordflow">return</span>;
<a name="l01002"></a>01002     }
<a name="l01003"></a>01003 
<a name="l01004"></a>01004     <a class="code" href="classSinic_1_1Device.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#a312e7f6c761a199c1369fbe651e084f0">pop</a>();
<a name="l01005"></a>01005 <span class="preprocessor">#if TRACING_ON</span>
<a name="l01006"></a>01006 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="trace_8hh.html#af76c9f7776aade1bf9d7dfa8a0c6b341">DTRACE</a>(Ethernet)) {
<a name="l01007"></a>01007         <a class="code" href="classNet_1_1IpPtr.html">IpPtr</a> <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>(packet);
<a name="l01008"></a>01008         <span class="keywordflow">if</span> (<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>) {
<a name="l01009"></a>01009             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;ID is %d\n&quot;</span>, <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>-&gt;id());
<a name="l01010"></a>01010             <a class="code" href="classNet_1_1TcpPtr.html">TcpPtr</a> <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>);
<a name="l01011"></a>01011             <span class="keywordflow">if</span> (<a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>) {
<a name="l01012"></a>01012                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet,
<a name="l01013"></a>01013                         <span class="stringliteral">&quot;Src Port=%d, Dest Port=%d, Seq=%d, Ack=%d\n&quot;</span>,
<a name="l01014"></a>01014                         <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>-&gt;sport(), <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>-&gt;dport(), <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>-&gt;seq(),
<a name="l01015"></a>01015                         <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>-&gt;ack());
<a name="l01016"></a>01016             }
<a name="l01017"></a>01017         }
<a name="l01018"></a>01018     }
<a name="l01019"></a>01019 <span class="preprocessor">#endif</span>
<a name="l01020"></a>01020 <span class="preprocessor"></span>
<a name="l01021"></a>01021     <a class="code" href="trace_8hh.html#a556faf39d3fa9f7db5f344487ddbb397">DDUMP</a>(EthernetData, packet-&gt;<a class="code" href="classRefCountingPtr.html#ac88dceffbecaed1137b0e27783adbcc5">data</a>, packet-&gt;length);
<a name="l01022"></a>01022     <a class="code" href="classEtherDevice.html#abbcbcdf8c27d517363ead6a7f6d26e0d">txBytes</a> += packet-&gt;length;
<a name="l01023"></a>01023     <a class="code" href="classEtherDevice.html#a954bf8127dea683de5f15cb0e2103657">txPackets</a>++;
<a name="l01024"></a>01024 
<a name="l01025"></a>01025     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Ethernet, <span class="stringliteral">&quot;Packet Transmit: successful txFifo Available %d\n&quot;</span>,
<a name="l01026"></a>01026             <a class="code" href="classSinic_1_1Device.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#aaf2f31de7b8cd9bf2085049b07125b1e">avail</a>());
<a name="l01027"></a>01027 
<a name="l01028"></a>01028     interrupts = Regs::Intr_TxPacket;
<a name="l01029"></a>01029     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#acdb549c592f948a9d973d4d84b02ef87">size</a>() &lt; <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.TxFifoLow)
<a name="l01030"></a>01030         interrupts |= Regs::Intr_TxLow;
<a name="l01031"></a>01031     <a class="code" href="classSinic_1_1Device.html#ad1a6ea4f31e657c02d56bdf168fb988a">devIntrPost</a>(interrupts);
<a name="l01032"></a>01032 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5204e0ceaa6484825f9506e447e072c6"></a><!-- doxytag: member="Sinic::Device::txDmaDone" ref="a5204e0ceaa6484825f9506e447e072c6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void txDmaDone </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00974"></a>00974 {
<a name="l00975"></a>00975     assert(<a class="code" href="classSinic_1_1Device.html#a12e3a80bef638cd15c067541b96a4756">txState</a> == <a class="code" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aa76918a4583683f130898f157b820164c">txCopy</a>);
<a name="l00976"></a>00976     <a class="code" href="classSinic_1_1Device.html#a12e3a80bef638cd15c067541b96a4756">txState</a> = <a class="code" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aa60ba4d6a047deb74d1eccb2904472127">txCopyDone</a>;
<a name="l00977"></a>00977     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetDMA, <span class="stringliteral">&quot;tx dma read paddr=%#x len=%d\n&quot;</span>,
<a name="l00978"></a>00978             <a class="code" href="classSinic_1_1Device.html#aef3a8dd866e8017fd7a675414596ec6b">txDmaAddr</a>, <a class="code" href="classSinic_1_1Device.html#a5782be4cae30f9377ab0c645a9f65892">txDmaLen</a>);
<a name="l00979"></a>00979     <a class="code" href="trace_8hh.html#a556faf39d3fa9f7db5f344487ddbb397">DDUMP</a>(EthernetData, <a class="code" href="classSinic_1_1Device.html#af56464970a8957faf3a1d35026db6a12">txDmaData</a>, <a class="code" href="classSinic_1_1Device.html#a5782be4cae30f9377ab0c645a9f65892">txDmaLen</a>);
<a name="l00980"></a>00980 
<a name="l00981"></a>00981     <span class="comment">// If the receive state machine  has a pending DMA, let it go first</span>
<a name="l00982"></a>00982     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#a17c506ad3a705ec9dbd1762e6a80fbf5">rxState</a> == <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82ad650f06241a5757f0fa65acae2960b1f">rxBeginCopy</a>)
<a name="l00983"></a>00983         <a class="code" href="classSinic_1_1Device.html#a5fa946a73db6f59c9819d457c991486a">rxKick</a>();
<a name="l00984"></a>00984 
<a name="l00985"></a>00985     <a class="code" href="classSinic_1_1Device.html#ac5484e8debdd6a2d3cf4c2902b832a76">txKick</a>();
<a name="l00986"></a>00986 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="afe787c5d7928546256f34b65f485be32"></a><!-- doxytag: member="Sinic::Device::txDump" ref="afe787c5d7928546256f34b65f485be32" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void txDump </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2b61c48d7a63b50007517c67e35dfd20"></a><!-- doxytag: member="Sinic::Device::txEventTransmit" ref="a2b61c48d7a63b50007517c67e35dfd20" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void txEventTransmit </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00212"></a>00212     {
<a name="l00213"></a>00213         <a class="code" href="classSinic_1_1Device.html#af04463ca216d10ffa94db8463cee04c9">transmit</a>();
<a name="l00214"></a>00214         <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#a12e3a80bef638cd15c067541b96a4756">txState</a> == <a class="code" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aaf6571d0685a78da76fe4116ae36afdc3">txFifoBlock</a>)
<a name="l00215"></a>00215             <a class="code" href="classSinic_1_1Device.html#ac5484e8debdd6a2d3cf4c2902b832a76">txKick</a>();
<a name="l00216"></a>00216     }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac5484e8debdd6a2d3cf4c2902b832a76"></a><!-- doxytag: member="Sinic::Device::txKick" ref="ac5484e8debdd6a2d3cf4c2902b832a76" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void txKick </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000072">TODO:</a></b></dt><dd>do we want to schedule a future kick? </dd></dl>
</p>

<p><div class="fragment"><pre class="fragment"><a name="l01036"></a>01036 {
<a name="l01037"></a>01037     VirtualReg *vnic;
<a name="l01038"></a>01038     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;txKick: txState=%s (txFifo.size=%d)\n&quot;</span>,
<a name="l01039"></a>01039             <a class="code" href="namespaceSinic.html#af3483fda812098251269cec3e53de3b7">TxStateStrings</a>[<a class="code" href="classSinic_1_1Device.html#a12e3a80bef638cd15c067541b96a4756">txState</a>], <a class="code" href="classSinic_1_1Device.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#acdb549c592f948a9d973d4d84b02ef87">size</a>());
<a name="l01040"></a>01040 
<a name="l01041"></a>01041     <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#acfce4fae6fa03f94e3d91d71302fe349">txKickTick</a> &gt; <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>()) {
<a name="l01042"></a>01042         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;txKick: exiting, can&apos;t run till %d\n&quot;</span>,
<a name="l01043"></a>01043                 <a class="code" href="classSinic_1_1Device.html#acfce4fae6fa03f94e3d91d71302fe349">txKickTick</a>);
<a name="l01044"></a>01044         <span class="keywordflow">return</span>;
<a name="l01045"></a>01045     }
<a name="l01046"></a>01046 
<a name="l01047"></a>01047   next:
<a name="l01048"></a>01048     <span class="keywordflow">if</span> (txState == <a class="code" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aa6ae23f58218fed48a3f17abba689fcb6">txIdle</a>)
<a name="l01049"></a>01049         <span class="keywordflow">goto</span> <a class="code" href="namespaceX86ISA.html#aab9b5a2e1cd2f24d08a9872895ded9c9">exit</a>;
<a name="l01050"></a>01050 
<a name="l01051"></a>01051     assert(!<a class="code" href="classSinic_1_1Device.html#a7010216dd085a0c2dac9d6b830a64f35">txList</a>.empty());
<a name="l01052"></a>01052     vnic = &amp;<a class="code" href="classSinic_1_1Device.html#acb438fcaae56ab29f35376e8b0726c23">virtualRegs</a>[<a class="code" href="classSinic_1_1Device.html#a7010216dd085a0c2dac9d6b830a64f35">txList</a>.front()];
<a name="l01053"></a>01053 
<a name="l01054"></a>01054     <span class="keywordflow">switch</span> (txState) {
<a name="l01055"></a>01055       <span class="keywordflow">case</span> <a class="code" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aaf6571d0685a78da76fe4116ae36afdc3">txFifoBlock</a>:
<a name="l01056"></a>01056         assert(Regs::get_TxDone_Busy(vnic-&gt;TxDone));
<a name="l01057"></a>01057         <span class="keywordflow">if</span> (!<a class="code" href="classSinic_1_1Device.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a>) {
<a name="l01058"></a>01058             <span class="comment">// Grab a new packet from the fifo.</span>
<a name="l01059"></a>01059             <a class="code" href="classSinic_1_1Device.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a> = <span class="keyword">new</span> <a class="code" href="classEthPacketData.html">EthPacketData</a>(16384);
<a name="l01060"></a>01060             <a class="code" href="classSinic_1_1Device.html#ac0d074adcc00053882737a0009c84adb">txPacketOffset</a> = 0;
<a name="l01061"></a>01061         }
<a name="l01062"></a>01062 
<a name="l01063"></a>01063         <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#aaf2f31de7b8cd9bf2085049b07125b1e">avail</a>() - <a class="code" href="classSinic_1_1Device.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a>-&gt;length &lt;
<a name="l01064"></a>01064             Regs::get_TxData_Len(vnic-&gt;TxData)) {
<a name="l01065"></a>01065             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;transmit fifo full.  Nothing to do.\n&quot;</span>);
<a name="l01066"></a>01066             <span class="keywordflow">goto</span> <a class="code" href="namespaceX86ISA.html#aab9b5a2e1cd2f24d08a9872895ded9c9">exit</a>;
<a name="l01067"></a>01067         }
<a name="l01068"></a>01068 
<a name="l01069"></a>01069         txState = <a class="code" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aaf2c21c54301af068a37b641c220915c1">txBeginCopy</a>;
<a name="l01070"></a>01070         <span class="keywordflow">break</span>;
<a name="l01071"></a>01071 
<a name="l01072"></a>01072       <span class="keywordflow">case</span> <a class="code" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aaf2c21c54301af068a37b641c220915c1">txBeginCopy</a>:
<a name="l01073"></a>01073         <span class="keywordflow">if</span> (<a class="code" href="classDmaDevice.html#a481b9352c138101d0f84f163a760c6e5">dmaPending</a>() || <a class="code" href="classDrainable.html#a5c95358f0e9355bcc3979baf3fb7307f">getDrainState</a>() != <a class="code" href="classDrainable.html#a5d74787dedbc4e11c1ab15bf487e61f8a2f5f2c4a8c4f4f0519d503dcdfbf55cb">Drainable::Running</a>)
<a name="l01074"></a>01074             <span class="keywordflow">goto</span> <a class="code" href="namespaceX86ISA.html#aab9b5a2e1cd2f24d08a9872895ded9c9">exit</a>;
<a name="l01075"></a>01075 
<a name="l01076"></a>01076         <a class="code" href="classSinic_1_1Device.html#aef3a8dd866e8017fd7a675414596ec6b">txDmaAddr</a> = <a class="code" href="classSinic_1_1Base.html#acd3c3feb78ae7a8f88fe0f110a718dff">params</a>()-&gt;platform-&gt;pciToDma(
<a name="l01077"></a>01077                 Regs::get_TxData_Addr(vnic-&gt;TxData));
<a name="l01078"></a>01078         <a class="code" href="classSinic_1_1Device.html#a5782be4cae30f9377ab0c645a9f65892">txDmaLen</a> = Regs::get_TxData_Len(vnic-&gt;TxData);
<a name="l01079"></a>01079         <a class="code" href="classSinic_1_1Device.html#af56464970a8957faf3a1d35026db6a12">txDmaData</a> = <a class="code" href="classSinic_1_1Device.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a>-&gt;<a class="code" href="classRefCountingPtr.html#ac88dceffbecaed1137b0e27783adbcc5">data</a> + <a class="code" href="classSinic_1_1Device.html#ac0d074adcc00053882737a0009c84adb">txPacketOffset</a>;
<a name="l01080"></a>01080         txState = <a class="code" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aa76918a4583683f130898f157b820164c">txCopy</a>;
<a name="l01081"></a>01081 
<a name="l01082"></a>01082         <a class="code" href="classDmaDevice.html#a8ca93dacaa427cede08842a958aa1b23">dmaRead</a>(<a class="code" href="classSinic_1_1Device.html#aef3a8dd866e8017fd7a675414596ec6b">txDmaAddr</a>, <a class="code" href="classSinic_1_1Device.html#a5782be4cae30f9377ab0c645a9f65892">txDmaLen</a>, &amp;<a class="code" href="classSinic_1_1Device.html#a3d31afcc8e7130b3e43e5dc1a0ef0e37">txDmaEvent</a>, <a class="code" href="classSinic_1_1Device.html#af56464970a8957faf3a1d35026db6a12">txDmaData</a>);
<a name="l01083"></a>01083         <span class="keywordflow">break</span>;
<a name="l01084"></a>01084 
<a name="l01085"></a>01085       <span class="keywordflow">case</span> <a class="code" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aa76918a4583683f130898f157b820164c">txCopy</a>:
<a name="l01086"></a>01086         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;transmit machine still copying\n&quot;</span>);
<a name="l01087"></a>01087         <span class="keywordflow">goto</span> <a class="code" href="namespaceX86ISA.html#aab9b5a2e1cd2f24d08a9872895ded9c9">exit</a>;
<a name="l01088"></a>01088 
<a name="l01089"></a>01089       <span class="keywordflow">case</span> <a class="code" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aa60ba4d6a047deb74d1eccb2904472127">txCopyDone</a>:
<a name="l01090"></a>01090         vnic-&gt;TxDone = <a class="code" href="classSinic_1_1Device.html#a5782be4cae30f9377ab0c645a9f65892">txDmaLen</a> | Regs::TxDone_Complete;
<a name="l01091"></a>01091         <a class="code" href="classSinic_1_1Device.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a>-&gt;length += <a class="code" href="classSinic_1_1Device.html#a5782be4cae30f9377ab0c645a9f65892">txDmaLen</a>;
<a name="l01092"></a>01092         <span class="keywordflow">if</span> ((vnic-&gt;TxData &amp; Regs::TxData_More)) {
<a name="l01093"></a>01093             <a class="code" href="classSinic_1_1Device.html#ac0d074adcc00053882737a0009c84adb">txPacketOffset</a> += <a class="code" href="classSinic_1_1Device.html#a5782be4cae30f9377ab0c645a9f65892">txDmaLen</a>;
<a name="l01094"></a>01094             txState = <a class="code" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aa6ae23f58218fed48a3f17abba689fcb6">txIdle</a>;
<a name="l01095"></a>01095             <a class="code" href="classSinic_1_1Device.html#ad1a6ea4f31e657c02d56bdf168fb988a">devIntrPost</a>(Regs::Intr_TxDMA);
<a name="l01096"></a>01096             <span class="keywordflow">break</span>;
<a name="l01097"></a>01097         }
<a name="l01098"></a>01098 
<a name="l01099"></a>01099         assert(<a class="code" href="classSinic_1_1Device.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a>-&gt;length &lt;= <a class="code" href="classSinic_1_1Device.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#aaf2f31de7b8cd9bf2085049b07125b1e">avail</a>());
<a name="l01100"></a>01100         <span class="keywordflow">if</span> ((vnic-&gt;TxData &amp; Regs::TxData_Checksum)) {
<a name="l01101"></a>01101             <a class="code" href="classNet_1_1IpPtr.html">IpPtr</a> <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>(<a class="code" href="classSinic_1_1Device.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a>);
<a name="l01102"></a>01102             <span class="keywordflow">if</span> (<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>) {
<a name="l01103"></a>01103                 <a class="code" href="classNet_1_1TcpPtr.html">TcpPtr</a> <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>);
<a name="l01104"></a>01104                 <span class="keywordflow">if</span> (<a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>) {
<a name="l01105"></a>01105                     <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>-&gt;sum(0);
<a name="l01106"></a>01106                     <a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>-&gt;sum(<a class="code" href="namespaceNet.html#a7c7758a7af16c9b808dcb8ddf7aa1a34">cksum</a>(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#aff380643c92de5f84ae7d6675820723c">tcp</a>));
<a name="l01107"></a>01107                     <a class="code" href="classEtherDevice.html#a5eb11fbceeba64f33c20a6f83d47fa4c">txTcpChecksums</a>++;
<a name="l01108"></a>01108                 }
<a name="l01109"></a>01109 
<a name="l01110"></a>01110                 <a class="code" href="classNet_1_1UdpPtr.html">UdpPtr</a> udp(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>);
<a name="l01111"></a>01111                 <span class="keywordflow">if</span> (udp) {
<a name="l01112"></a>01112                     udp-&gt;sum(0);
<a name="l01113"></a>01113                     udp-&gt;sum(<a class="code" href="namespaceNet.html#a7c7758a7af16c9b808dcb8ddf7aa1a34">cksum</a>(udp));
<a name="l01114"></a>01114                     <a class="code" href="classEtherDevice.html#aa1217365fc3caee57fb3a21d3a51b237">txUdpChecksums</a>++;
<a name="l01115"></a>01115                 }
<a name="l01116"></a>01116 
<a name="l01117"></a>01117                 <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>-&gt;sum(0);
<a name="l01118"></a>01118                 <a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>-&gt;sum(<a class="code" href="namespaceNet.html#a7c7758a7af16c9b808dcb8ddf7aa1a34">cksum</a>(<a class="code" href="namespaceiGbReg_1_1TxdOp.html#a95c40243f7e4760653e10ce95673f381">ip</a>));
<a name="l01119"></a>01119                 <a class="code" href="classEtherDevice.html#ab8fd14604893c8e4a3972f2fdf9501e1">txIpChecksums</a>++;
<a name="l01120"></a>01120             }
<a name="l01121"></a>01121         }
<a name="l01122"></a>01122 
<a name="l01123"></a>01123         <a class="code" href="classSinic_1_1Device.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#ac4382beafcf27ce14f59707bc7f4c3d7">push</a>(<a class="code" href="classSinic_1_1Device.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a>);
<a name="l01124"></a>01124         <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#aaf2f31de7b8cd9bf2085049b07125b1e">avail</a>() &lt; <a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.TxMaxCopy) {
<a name="l01125"></a>01125             <a class="code" href="classSinic_1_1Device.html#ad1a6ea4f31e657c02d56bdf168fb988a">devIntrPost</a>(Regs::Intr_TxFull);
<a name="l01126"></a>01126             <a class="code" href="classSinic_1_1Device.html#aa09cc8a4752916111328b7353e64f3bb">txFull</a> = <span class="keyword">true</span>;
<a name="l01127"></a>01127         }
<a name="l01128"></a>01128         <a class="code" href="classSinic_1_1Device.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a> = 0;
<a name="l01129"></a>01129         <a class="code" href="classSinic_1_1Device.html#af04463ca216d10ffa94db8463cee04c9">transmit</a>();
<a name="l01130"></a>01130         <a class="code" href="classSinic_1_1Device.html#a7010216dd085a0c2dac9d6b830a64f35">txList</a>.pop_front();
<a name="l01131"></a>01131         txState = <a class="code" href="classSinic_1_1Device.html#a7010216dd085a0c2dac9d6b830a64f35">txList</a>.empty() ? <a class="code" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aa6ae23f58218fed48a3f17abba689fcb6">txIdle</a> : <a class="code" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aaf6571d0685a78da76fe4116ae36afdc3">txFifoBlock</a>;
<a name="l01132"></a>01132         <a class="code" href="classSinic_1_1Device.html#ad1a6ea4f31e657c02d56bdf168fb988a">devIntrPost</a>(Regs::Intr_TxDMA);
<a name="l01133"></a>01133         <span class="keywordflow">break</span>;
<a name="l01134"></a>01134 
<a name="l01135"></a>01135       <span class="keywordflow">default</span>:
<a name="l01136"></a>01136         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Invalid txState!&quot;</span>);
<a name="l01137"></a>01137     }
<a name="l01138"></a>01138 
<a name="l01139"></a>01139     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;entering next txState=%s\n&quot;</span>,
<a name="l01140"></a>01140             <a class="code" href="namespaceSinic.html#af3483fda812098251269cec3e53de3b7">TxStateStrings</a>[txState]);
<a name="l01141"></a>01141 
<a name="l01142"></a>01142     <span class="keywordflow">goto</span> next;
<a name="l01143"></a>01143 
<a name="l01144"></a>01144   <a class="code" href="namespaceX86ISA.html#aab9b5a2e1cd2f24d08a9872895ded9c9">exit</a>:
<a name="l01148"></a>01148     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetSM, <span class="stringliteral">&quot;tx state machine exited txState=%s\n&quot;</span>,
<a name="l01149"></a>01149             <a class="code" href="namespaceSinic.html#af3483fda812098251269cec3e53de3b7">TxStateStrings</a>[txState]);
<a name="l01150"></a>01150 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af22e5d6d660b97db37003ac61ac4ee49"></a><!-- doxytag: member="Sinic::Device::unserialize" ref="af22e5d6d660b97db37003ac61ac4ee49" args="(Checkpoint *cp, const std::string &amp;section)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void unserialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCheckpoint.html">Checkpoint</a> *&nbsp;</td>
          <td class="paramname"> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>section</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Reconstruct the state of this object from a checkpoint. </p>
<dl><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="namespacecp.html">cp</a></em>&nbsp;</td><td>The checkpoint use. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>section</em>&nbsp;</td><td>The section name of this object </td></tr>
  </table>
  </dd>
</dl>

<p><a class="el" href="classSinic_1_1Base.html#af22e5d6d660b97db37003ac61ac4ee49">Base</a>を再定義しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l01424"></a>01424 {
<a name="l01425"></a>01425     <span class="comment">// Unserialize the PciDevice base class</span>
<a name="l01426"></a>01426     <a class="code" href="classSinic_1_1Device.html#af22e5d6d660b97db37003ac61ac4ee49">Base::unserialize</a>(cp, section);
<a name="l01427"></a>01427 
<a name="l01428"></a>01428     <span class="comment">/*</span>
<a name="l01429"></a>01429 <span class="comment">     * Unserialize the device registers that may have been written by the OS.</span>
<a name="l01430"></a>01430 <span class="comment">     */</span>
<a name="l01431"></a>01431     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.Config);
<a name="l01432"></a>01432     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrStatus);
<a name="l01433"></a>01433     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrMask);
<a name="l01434"></a>01434     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.RxData);
<a name="l01435"></a>01435     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.TxData);
<a name="l01436"></a>01436 
<a name="l01437"></a>01437     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#a560efaee55571ea588551a80aadc6cda">rxActive</a>);
<a name="l01438"></a>01438     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#a508dbc989a9476f10e7622b054aac7e1">rxBusyCount</a>);
<a name="l01439"></a>01439     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#a9e5a18ec7025db57fa6ff2f05a289804">rxDirtyCount</a>);
<a name="l01440"></a>01440     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#a41d5a12c120010c50c75ea0dc2f01241">rxMappedCount</a>);
<a name="l01441"></a>01441 
<a name="l01442"></a>01442     <span class="keywordtype">int</span> rxListSize;
<a name="l01443"></a>01443     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(rxListSize);
<a name="l01444"></a>01444     <a class="code" href="classSinic_1_1Device.html#a45202257b5522a1436d8130249ee0a0d">rxList</a>.clear();
<a name="l01445"></a>01445     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; rxListSize; ++<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>) {
<a name="l01446"></a>01446         <span class="keywordtype">int</span> <a class="code" href="namespacegenini.html#a7e5f482a3a8a4f98bd1a9c124485f572">value</a>;
<a name="l01447"></a>01447         <a class="code" href="arch_2x86_2types_8cc.html#a2c99d2d69578d585494e1182085cb158">paramIn</a>(cp, section, <a class="code" href="cprintf_8hh.html#ace22d1c39f2df58e593bc49d1613eca2">csprintf</a>(<span class="stringliteral">&quot;rxList%d&quot;</span>, <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>), value);
<a name="l01448"></a>01448         <a class="code" href="classSinic_1_1Device.html#a45202257b5522a1436d8130249ee0a0d">rxList</a>.push_back(value);
<a name="l01449"></a>01449     }
<a name="l01450"></a>01450 
<a name="l01451"></a>01451     <span class="keywordtype">int</span> rxBusySize;
<a name="l01452"></a>01452     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(rxBusySize);
<a name="l01453"></a>01453     <a class="code" href="classSinic_1_1Device.html#afd33bf96a9045d1f90d0685ad3e33253">rxBusy</a>.clear();
<a name="l01454"></a>01454     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; rxBusySize; ++<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>) {
<a name="l01455"></a>01455         <span class="keywordtype">int</span> value;
<a name="l01456"></a>01456         <a class="code" href="arch_2x86_2types_8cc.html#a2c99d2d69578d585494e1182085cb158">paramIn</a>(cp, section, <a class="code" href="cprintf_8hh.html#ace22d1c39f2df58e593bc49d1613eca2">csprintf</a>(<span class="stringliteral">&quot;rxBusy%d&quot;</span>, <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>), value);
<a name="l01457"></a>01457         <a class="code" href="classSinic_1_1Device.html#afd33bf96a9045d1f90d0685ad3e33253">rxBusy</a>.push_back(value);
<a name="l01458"></a>01458     }
<a name="l01459"></a>01459 
<a name="l01460"></a>01460     <span class="keywordtype">int</span> txListSize;
<a name="l01461"></a>01461     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(txListSize);
<a name="l01462"></a>01462     <a class="code" href="classSinic_1_1Device.html#a7010216dd085a0c2dac9d6b830a64f35">txList</a>.clear();
<a name="l01463"></a>01463     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; txListSize; ++<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>) {
<a name="l01464"></a>01464         <span class="keywordtype">int</span> value;
<a name="l01465"></a>01465         <a class="code" href="arch_2x86_2types_8cc.html#a2c99d2d69578d585494e1182085cb158">paramIn</a>(cp, section, <a class="code" href="cprintf_8hh.html#ace22d1c39f2df58e593bc49d1613eca2">csprintf</a>(<span class="stringliteral">&quot;txList%d&quot;</span>, <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>), value);
<a name="l01466"></a>01466         <a class="code" href="classSinic_1_1Device.html#a7010216dd085a0c2dac9d6b830a64f35">txList</a>.push_back(value);
<a name="l01467"></a>01467     }
<a name="l01468"></a>01468 
<a name="l01469"></a>01469     <span class="comment">/*</span>
<a name="l01470"></a>01470 <span class="comment">     * Unserialize rx state machine</span>
<a name="l01471"></a>01471 <span class="comment">     */</span>
<a name="l01472"></a>01472     <span class="keywordtype">int</span> <a class="code" href="classSinic_1_1Device.html#a17c506ad3a705ec9dbd1762e6a80fbf5">rxState</a>;
<a name="l01473"></a>01473     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(rxState);
<a name="l01474"></a>01474     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#a62b6a5f468811226da2581374919b1a5">rxEmpty</a>);
<a name="l01475"></a>01475     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#a1ef589f4a0a6d9baae11626a0d89b5ec">rxLow</a>);
<a name="l01476"></a>01476     this-&gt;rxState = (<a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82">RxState</a>) rxState;
<a name="l01477"></a>01477     <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#a147c320e3d6506edf5587a40cd8e430d">unserialize</a>(<span class="stringliteral">&quot;rxFifo&quot;</span>, cp, section);
<a name="l01478"></a>01478 
<a name="l01479"></a>01479     <span class="keywordtype">int</span> <a class="code" href="classSinic_1_1Device.html#aee345bc47c94b616b04d8f502dab1826">rxFifoPtr</a>;
<a name="l01480"></a>01480     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(rxFifoPtr);
<a name="l01481"></a>01481     <span class="keywordflow">if</span> (rxFifoPtr &gt;= 0) {
<a name="l01482"></a>01482         this-&gt;rxFifoPtr = <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#ad69bd11391be1a1dba5c8202259664f8">begin</a>();
<a name="l01483"></a>01483         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; rxFifoPtr; ++<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>)
<a name="l01484"></a>01484             ++this-&gt;rxFifoPtr;
<a name="l01485"></a>01485     } <span class="keywordflow">else</span> {
<a name="l01486"></a>01486         this-&gt;rxFifoPtr = <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#acad38d52497a975bfb6f2f6acd76631f">end</a>();
<a name="l01487"></a>01487     }
<a name="l01488"></a>01488 
<a name="l01489"></a>01489     <span class="comment">/*</span>
<a name="l01490"></a>01490 <span class="comment">     * Unserialize tx state machine</span>
<a name="l01491"></a>01491 <span class="comment">     */</span>
<a name="l01492"></a>01492     <span class="keywordtype">int</span> <a class="code" href="classSinic_1_1Device.html#a12e3a80bef638cd15c067541b96a4756">txState</a>;
<a name="l01493"></a>01493     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(txState);
<a name="l01494"></a>01494     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#aa09cc8a4752916111328b7353e64f3bb">txFull</a>);
<a name="l01495"></a>01495     this-&gt;txState = (<a class="code" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6a">TxState</a>) txState;
<a name="l01496"></a>01496     <a class="code" href="classSinic_1_1Device.html#ae699c324753236e0a59aa2465920eb46">txFifo</a>.<a class="code" href="classPacketFifo.html#a147c320e3d6506edf5587a40cd8e430d">unserialize</a>(<span class="stringliteral">&quot;txFifo&quot;</span>, cp, section);
<a name="l01497"></a>01497     <span class="keywordtype">bool</span> txPacketExists;
<a name="l01498"></a>01498     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(txPacketExists);
<a name="l01499"></a>01499     <a class="code" href="classSinic_1_1Device.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a> = 0;
<a name="l01500"></a>01500     <span class="keywordflow">if</span> (txPacketExists) {
<a name="l01501"></a>01501         <a class="code" href="classSinic_1_1Device.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a> = <span class="keyword">new</span> <a class="code" href="classEthPacketData.html">EthPacketData</a>(16384);
<a name="l01502"></a>01502         <a class="code" href="classSinic_1_1Device.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a>-&gt;unserialize(<span class="stringliteral">&quot;txPacket&quot;</span>, cp, section);
<a name="l01503"></a>01503         <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#ac0d074adcc00053882737a0009c84adb">txPacketOffset</a>);
<a name="l01504"></a>01504         <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classSinic_1_1Device.html#a1e82240f06ef6f0c8d8c0bb1a141a600">txPacketBytes</a>);
<a name="l01505"></a>01505     }
<a name="l01506"></a>01506 
<a name="l01507"></a>01507     <span class="comment">/*</span>
<a name="l01508"></a>01508 <span class="comment">     * unserialize the virtual nic registers/state</span>
<a name="l01509"></a>01509 <span class="comment">     *</span>
<a name="l01510"></a>01510 <span class="comment">     * this must be done after the unserialization of the rxFifo</span>
<a name="l01511"></a>01511 <span class="comment">     * because the packet iterators depend on the fifo being populated</span>
<a name="l01512"></a>01512 <span class="comment">     */</span>
<a name="l01513"></a>01513     <span class="keywordtype">int</span> virtualRegsSize;
<a name="l01514"></a>01514     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(virtualRegsSize);
<a name="l01515"></a>01515     <a class="code" href="classSinic_1_1Device.html#acb438fcaae56ab29f35376e8b0726c23">virtualRegs</a>.clear();
<a name="l01516"></a>01516     <a class="code" href="classSinic_1_1Device.html#acb438fcaae56ab29f35376e8b0726c23">virtualRegs</a>.resize(virtualRegsSize);
<a name="l01517"></a>01517     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> = 0; <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a> &lt; virtualRegsSize; ++<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>) {
<a name="l01518"></a>01518         VirtualReg *vnic = &amp;<a class="code" href="classSinic_1_1Device.html#acb438fcaae56ab29f35376e8b0726c23">virtualRegs</a>[<a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>];
<a name="l01519"></a>01519         std::string <a class="code" href="namespaceX86ISA.html#aeeb02ad833ab76f3430553ef93213a6b">reg</a> = <a class="code" href="cprintf_8hh.html#ace22d1c39f2df58e593bc49d1613eca2">csprintf</a>(<span class="stringliteral">&quot;vnic%d&quot;</span>, <a class="code" href="namespaceArmISA.html#aca8175497376fbb9f0e71fefa122cef7">i</a>);
<a name="l01520"></a>01520 
<a name="l01521"></a>01521         <a class="code" href="arch_2x86_2types_8cc.html#a2c99d2d69578d585494e1182085cb158">paramIn</a>(cp, section, reg + <span class="stringliteral">&quot;.RxData&quot;</span>, vnic-&gt;RxData);
<a name="l01522"></a>01522         <a class="code" href="arch_2x86_2types_8cc.html#a2c99d2d69578d585494e1182085cb158">paramIn</a>(cp, section, reg + <span class="stringliteral">&quot;.RxDone&quot;</span>, vnic-&gt;RxDone);
<a name="l01523"></a>01523         <a class="code" href="arch_2x86_2types_8cc.html#a2c99d2d69578d585494e1182085cb158">paramIn</a>(cp, section, reg + <span class="stringliteral">&quot;.TxData&quot;</span>, vnic-&gt;TxData);
<a name="l01524"></a>01524         <a class="code" href="arch_2x86_2types_8cc.html#a2c99d2d69578d585494e1182085cb158">paramIn</a>(cp, section, reg + <span class="stringliteral">&quot;.TxDone&quot;</span>, vnic-&gt;TxDone);
<a name="l01525"></a>01525 
<a name="l01526"></a>01526         vnic-&gt;rxUnique = <a class="code" href="classSinic_1_1Device.html#a98e0c2747f2107c6f81f51e9ba3bdc8a">rxUnique</a>++;
<a name="l01527"></a>01527         vnic-&gt;txUnique = <a class="code" href="classSinic_1_1Device.html#addcc8e87969e32011941cd144fe23c73">txUnique</a>++;
<a name="l01528"></a>01528 
<a name="l01529"></a>01529         <span class="keywordtype">bool</span> rxPacketExists;
<a name="l01530"></a>01530         <a class="code" href="arch_2x86_2types_8cc.html#a2c99d2d69578d585494e1182085cb158">paramIn</a>(cp, section, reg + <span class="stringliteral">&quot;.rxPacketExists&quot;</span>, rxPacketExists);
<a name="l01531"></a>01531         <span class="keywordflow">if</span> (rxPacketExists) {
<a name="l01532"></a>01532             <span class="keywordtype">int</span> rxPacket;
<a name="l01533"></a>01533             <a class="code" href="arch_2x86_2types_8cc.html#a2c99d2d69578d585494e1182085cb158">paramIn</a>(cp, section, reg + <span class="stringliteral">&quot;.rxPacket&quot;</span>, rxPacket);
<a name="l01534"></a>01534             vnic-&gt;rxIndex = <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#ad69bd11391be1a1dba5c8202259664f8">begin</a>();
<a name="l01535"></a>01535             <span class="keywordflow">while</span> (rxPacket--)
<a name="l01536"></a>01536                 ++vnic-&gt;rxIndex;
<a name="l01537"></a>01537 
<a name="l01538"></a>01538             <a class="code" href="arch_2x86_2types_8cc.html#a2c99d2d69578d585494e1182085cb158">paramIn</a>(cp, section, reg + <span class="stringliteral">&quot;.rxPacketOffset&quot;</span>,
<a name="l01539"></a>01539                     vnic-&gt;rxPacketOffset);
<a name="l01540"></a>01540             <a class="code" href="arch_2x86_2types_8cc.html#a2c99d2d69578d585494e1182085cb158">paramIn</a>(cp, section, reg + <span class="stringliteral">&quot;.rxPacketBytes&quot;</span>, vnic-&gt;rxPacketBytes);
<a name="l01541"></a>01541         } <span class="keywordflow">else</span> {
<a name="l01542"></a>01542             vnic-&gt;rxIndex = <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#acad38d52497a975bfb6f2f6acd76631f">end</a>();
<a name="l01543"></a>01543         }
<a name="l01544"></a>01544         <a class="code" href="arch_2x86_2types_8cc.html#a2c99d2d69578d585494e1182085cb158">paramIn</a>(cp, section, reg + <span class="stringliteral">&quot;.rxDoneData&quot;</span>, vnic-&gt;rxDoneData);
<a name="l01545"></a>01545     }
<a name="l01546"></a>01546 
<a name="l01547"></a>01547     <span class="comment">/*</span>
<a name="l01548"></a>01548 <span class="comment">     * If there&apos;s a pending transmit, reschedule it now</span>
<a name="l01549"></a>01549 <span class="comment">     */</span>
<a name="l01550"></a>01550     <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> transmitTick;
<a name="l01551"></a>01551     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(transmitTick);
<a name="l01552"></a>01552     <span class="keywordflow">if</span> (transmitTick)
<a name="l01553"></a>01553         <a class="code" href="classEventManager.html#a4ddebbfe9a12b95be6fb993ce892dcd3">schedule</a>(<a class="code" href="classSinic_1_1Device.html#a324fed072a29716c20a98a82927bd2a2">txEvent</a>, <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The universal simulation clock.">curTick</a>() + transmitTick);
<a name="l01554"></a>01554 
<a name="l01555"></a>01555     <a class="code" href="classPioDevice.html#a13e5e3439c77b7b772e2e11df33fd700">pioPort</a>.<a class="code" href="classSlavePort.html#afb438cc39c4c679860c791bcef6dc7f3">sendRangeChange</a>();
<a name="l01556"></a>01556 
<a name="l01557"></a>01557 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4cefab464e72b5dd42c003a0a4341802"></a><!-- doxytag: member="Sinic::Device::write" ref="a4cefab464e72b5dd42c003a0a4341802" args="(PacketPtr pkt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pkt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>IPR read of device register</p>
<p>Fault Device::iprRead(Addr daddr, int cpu, uint64_t &amp;result) { if (!regValid(daddr)) panic("invalid address: da=%#x", daddr);</p>
<p>const <a class="el" href="structSinic_1_1Regs_1_1Info.html">Regs::Info</a> &amp;info = regInfo(daddr); if (!info.read) panic("reading %s (write only): cpu=%d da=%#x", <a class="el" href="trace_8hh.html#a166fa10b86d8faa127fb7c78191e3e60">info.name</a>, cpu, daddr);</p>
<p>DPRINTF(EthernetPIO, "IPR read %s: cpu=%d da=%#x\n", <a class="el" href="trace_8hh.html#a166fa10b86d8faa127fb7c78191e3e60">info.name</a>, cpu, daddr);</p>
<p>prepareRead(cpu, 0);</p>
<p>if (info.size == 4) result = regData32(daddr);</p>
<p>if (info.size == 8) result = regData64(daddr);</p>
<p>DPRINTF(EthernetPIO, "IPR read %s: cpu=%s da=%#x val=%#x\n", <a class="el" href="trace_8hh.html#a166fa10b86d8faa127fb7c78191e3e60">info.name</a>, cpu, result);</p>
<p>return NoFault; } I/O write of device register </p>

<p><a class="el" href="classPioDevice.html#afe8371668d023bb2516b286e5e399b6f">PioDevice</a>を実装しています。</p>

<p><div class="fragment"><pre class="fragment"><a name="l00306"></a>00306 {
<a name="l00307"></a>00307     assert(<a class="code" href="classPciDevice.html#ade310e2edd87f54d175985e8f2a07169">config</a>.<a class="code" href="unionPCIConfig.html#a4635796d5c7e7a2639b11dfe83718acc">command</a> &amp; <a class="code" href="pcireg_8h.html#a19eeefdf3c3100d9ab29182cbbcba083">PCI_CMD_MSE</a>);
<a name="l00308"></a>00308     assert(pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>() &gt;= <a class="code" href="classPciDevice.html#af7b973e5ccbf88bd0019efd69c87e06c">BARAddrs</a>[0] &amp;&amp; pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>() &lt; <a class="code" href="classPciDevice.html#ad96459f9cb0f58d55bfff45109038d7b">BARSize</a>[0]);
<a name="l00309"></a>00309 
<a name="l00310"></a>00310     <span class="keywordtype">int</span> cpu = pkt-&gt;<a class="code" href="classPacket.html#a956cd41d82347558b9c0a5b0474903f2" title="A pointer to the original request.">req</a>-&gt;<a class="code" href="classRequest.html#a651d5d14e7a4e95ebe6d7f5b8ee5a107">contextId</a>();
<a name="l00311"></a>00311     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> daddr = pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>() - <a class="code" href="classPciDevice.html#af7b973e5ccbf88bd0019efd69c87e06c">BARAddrs</a>[0];
<a name="l00312"></a>00312     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="code" href="namespaceMipsISA.html#ae6714ce3c5ef82205cecbd410556edf3">index</a> = daddr &gt;&gt; <a class="code" href="namespaceSinic_1_1Regs.html#ad3df16c90c6e9c90e4fe95c9ad269661">Regs::VirtualShift</a>;
<a name="l00313"></a>00313     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> raddr = daddr &amp; <a class="code" href="namespaceSinic_1_1Regs.html#aac1ea6e4b2ca262e0a4bb0b729a7ef3e">Regs::VirtualMask</a>;
<a name="l00314"></a>00314 
<a name="l00315"></a>00315     <span class="keywordflow">if</span> (!<a class="code" href="namespaceSinic.html#af92abee16113e5012fa829e4935d917a">regValid</a>(raddr))
<a name="l00316"></a>00316         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;invalid register: cpu=%d, da=%#x pa=%#x size=%d&quot;</span>,
<a name="l00317"></a>00317                 cpu, daddr, pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>(), pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>());
<a name="l00318"></a>00318 
<a name="l00319"></a>00319     <span class="keyword">const</span> Regs::Info &amp;info = <a class="code" href="namespaceSinic.html#aed2d64d4f995743e60f0fee5cca4e739">regInfo</a>(raddr);
<a name="l00320"></a>00320     <span class="keywordflow">if</span> (!info.write)
<a name="l00321"></a>00321         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;write %s (read only): &quot;</span>
<a name="l00322"></a>00322               <span class="stringliteral">&quot;cpu=%d vnic=%d da=%#x pa=%#x size=%d&quot;</span>,
<a name="l00323"></a>00323               info.name, cpu, index, daddr, pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>(), pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>());
<a name="l00324"></a>00324 
<a name="l00325"></a>00325     <span class="keywordflow">if</span> (pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>() != info.size)
<a name="l00326"></a>00326         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;write %s (invalid size): &quot;</span>
<a name="l00327"></a>00327               <span class="stringliteral">&quot;cpu=%d vnic=%d da=%#x pa=%#x size=%d&quot;</span>,
<a name="l00328"></a>00328               info.name, cpu, index, daddr, pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>(), pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>());
<a name="l00329"></a>00329 
<a name="l00330"></a>00330     VirtualReg &amp;vnic = <a class="code" href="classSinic_1_1Device.html#acb438fcaae56ab29f35376e8b0726c23">virtualRegs</a>[index];
<a name="l00331"></a>00331 
<a name="l00332"></a>00332     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetPIO,
<a name="l00333"></a>00333             <span class="stringliteral">&quot;write %s vnic %d: cpu=%d val=%#x da=%#x pa=%#x size=%d\n&quot;</span>,
<a name="l00334"></a>00334             info.name, index, cpu, info.size == 4 ? pkt-&gt;<a class="code" href="classPacket.html#af6ea056c8af82f08af9fd0d857967f9b">get</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;() :
<a name="l00335"></a>00335             pkt-&gt;<a class="code" href="classPacket.html#af6ea056c8af82f08af9fd0d857967f9b">get</a>&lt;uint64_t&gt;(), daddr, pkt-&gt;<a class="code" href="classPacket.html#afca9af4d83a57836baba87603463a6e0">getAddr</a>(), pkt-&gt;<a class="code" href="classPacket.html#a1d18ba49c7be427da1f4a42d53e35f48">getSize</a>());
<a name="l00336"></a>00336 
<a name="l00337"></a>00337     <a class="code" href="classSinic_1_1Device.html#a8527de0a20c247f91f96abe895bf4448">prepareWrite</a>(cpu, index);
<a name="l00338"></a>00338 
<a name="l00339"></a>00339     <span class="keywordflow">switch</span> (raddr) {
<a name="l00340"></a>00340       <span class="keywordflow">case</span> Regs::Config:
<a name="l00341"></a>00341         <a class="code" href="classSinic_1_1Device.html#abac0082da5c2420162cd3d183fab4f1f">changeConfig</a>(pkt-&gt;<a class="code" href="classPacket.html#af6ea056c8af82f08af9fd0d857967f9b">get</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;());
<a name="l00342"></a>00342         <span class="keywordflow">break</span>;
<a name="l00343"></a>00343 
<a name="l00344"></a>00344       <span class="keywordflow">case</span> Regs::Command:
<a name="l00345"></a>00345         <a class="code" href="classSinic_1_1Device.html#a8747db3299e3afcb225c4e64f725f453">command</a>(pkt-&gt;<a class="code" href="classPacket.html#af6ea056c8af82f08af9fd0d857967f9b">get</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;());
<a name="l00346"></a>00346         <span class="keywordflow">break</span>;
<a name="l00347"></a>00347 
<a name="l00348"></a>00348       <span class="keywordflow">case</span> Regs::IntrStatus:
<a name="l00349"></a>00349         <a class="code" href="classSinic_1_1Device.html#af2e6de78cabe5fab3233fb1b29fb478b">devIntrClear</a>(<a class="code" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a>.IntrStatus &amp; pkt-&gt;<a class="code" href="classPacket.html#af6ea056c8af82f08af9fd0d857967f9b">get</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;());
<a name="l00350"></a>00350         <span class="keywordflow">break</span>;
<a name="l00351"></a>00351 
<a name="l00352"></a>00352       <span class="keywordflow">case</span> Regs::IntrMask:
<a name="l00353"></a>00353         <a class="code" href="classSinic_1_1Device.html#a776f6f1cbea3e0200c28319eb0d5446b">devIntrChangeMask</a>(pkt-&gt;<a class="code" href="classPacket.html#af6ea056c8af82f08af9fd0d857967f9b">get</a>&lt;<a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&gt;());
<a name="l00354"></a>00354         <span class="keywordflow">break</span>;
<a name="l00355"></a>00355 
<a name="l00356"></a>00356       <span class="keywordflow">case</span> Regs::RxData:
<a name="l00357"></a>00357         <span class="keywordflow">if</span> (Regs::get_RxDone_Busy(vnic.RxDone))
<a name="l00358"></a>00358             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;receive machine busy with another request! rxState=%s&quot;</span>,
<a name="l00359"></a>00359                   <a class="code" href="namespaceSinic.html#aafc3b60f55352a04a630cfd84d9d641a">RxStateStrings</a>[<a class="code" href="classSinic_1_1Device.html#a17c506ad3a705ec9dbd1762e6a80fbf5">rxState</a>]);
<a name="l00360"></a>00360 
<a name="l00361"></a>00361         vnic.rxUnique = <a class="code" href="classSinic_1_1Device.html#a98e0c2747f2107c6f81f51e9ba3bdc8a">rxUnique</a>++;
<a name="l00362"></a>00362         vnic.RxDone = Regs::RxDone_Busy;
<a name="l00363"></a>00363         vnic.RxData = pkt-&gt;<a class="code" href="classPacket.html#af6ea056c8af82f08af9fd0d857967f9b">get</a>&lt;uint64_t&gt;();
<a name="l00364"></a>00364         <a class="code" href="classSinic_1_1Device.html#a508dbc989a9476f10e7622b054aac7e1">rxBusyCount</a>++;
<a name="l00365"></a>00365 
<a name="l00366"></a>00366         <span class="keywordflow">if</span> (Regs::get_RxData_Vaddr(pkt-&gt;<a class="code" href="classPacket.html#af6ea056c8af82f08af9fd0d857967f9b">get</a>&lt;uint64_t&gt;())) {
<a name="l00367"></a>00367             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;vtophys not implemented in newmem&quot;</span>);
<a name="l00368"></a>00368 <span class="preprocessor">#ifdef SINIC_VTOPHYS</span>
<a name="l00369"></a>00369 <span class="preprocessor"></span>            <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="code" href="namespaceMipsISA.html#ac78d9788b3f9a366df64485c9afaf1b1">vaddr</a> = Regs::get_RxData_Addr(reg64);
<a name="l00370"></a>00370             <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> paddr = <a class="code" href="namespaceAlphaISA.html#a3828815371ad2b0a1be60abdcb405cf9">vtophys</a>(req-&gt;xc, vaddr);
<a name="l00371"></a>00371             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetPIO, <span class="stringliteral">&quot;write RxData vnic %d (rxunique %d): &quot;</span>
<a name="l00372"></a>00372                     <span class="stringliteral">&quot;vaddr=%#x, paddr=%#x\n&quot;</span>,
<a name="l00373"></a>00373                     index, vnic.rxUnique, vaddr, paddr);
<a name="l00374"></a>00374 
<a name="l00375"></a>00375             vnic.RxData = Regs::set_RxData_Addr(vnic.RxData, paddr);
<a name="l00376"></a>00376 <span class="preprocessor">#endif</span>
<a name="l00377"></a>00377 <span class="preprocessor"></span>        } <span class="keywordflow">else</span> {
<a name="l00378"></a>00378             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetPIO, <span class="stringliteral">&quot;write RxData vnic %d (rxunique %d)\n&quot;</span>,
<a name="l00379"></a>00379                     index, vnic.rxUnique);
<a name="l00380"></a>00380         }
<a name="l00381"></a>00381 
<a name="l00382"></a>00382         <span class="keywordflow">if</span> (vnic.rxIndex == <a class="code" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a>.<a class="code" href="classPacketFifo.html#acad38d52497a975bfb6f2f6acd76631f">end</a>()) {
<a name="l00383"></a>00383             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetPIO, <span class="stringliteral">&quot;request new packet...appending to rxList\n&quot;</span>);
<a name="l00384"></a>00384             <a class="code" href="classSinic_1_1Device.html#a45202257b5522a1436d8130249ee0a0d">rxList</a>.push_back(index);
<a name="l00385"></a>00385         } <span class="keywordflow">else</span> {
<a name="l00386"></a>00386             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetPIO, <span class="stringliteral">&quot;packet exists...appending to rxBusy\n&quot;</span>);
<a name="l00387"></a>00387             <a class="code" href="classSinic_1_1Device.html#afd33bf96a9045d1f90d0685ad3e33253">rxBusy</a>.push_back(index);
<a name="l00388"></a>00388         }
<a name="l00389"></a>00389 
<a name="l00390"></a>00390         <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Base.html#a62cd12a758780749d1ed0ec4d4cfbe71">rxEnable</a> &amp;&amp; (<a class="code" href="classSinic_1_1Device.html#a17c506ad3a705ec9dbd1762e6a80fbf5">rxState</a> == <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82ab702fffa03e4cec4b054f71cfe34ce7c">rxIdle</a> || <a class="code" href="classSinic_1_1Device.html#a17c506ad3a705ec9dbd1762e6a80fbf5">rxState</a> == <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82acd42510cc5c902cc3b338fee8106b4ca">rxFifoBlock</a>)) {
<a name="l00391"></a>00391             <a class="code" href="classSinic_1_1Device.html#a17c506ad3a705ec9dbd1762e6a80fbf5">rxState</a> = <a class="code" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82acd42510cc5c902cc3b338fee8106b4ca">rxFifoBlock</a>;
<a name="l00392"></a>00392             <a class="code" href="classSinic_1_1Device.html#a5fa946a73db6f59c9819d457c991486a">rxKick</a>();
<a name="l00393"></a>00393         }
<a name="l00394"></a>00394         <span class="keywordflow">break</span>;
<a name="l00395"></a>00395 
<a name="l00396"></a>00396       <span class="keywordflow">case</span> Regs::TxData:
<a name="l00397"></a>00397         <span class="keywordflow">if</span> (Regs::get_TxDone_Busy(vnic.TxDone))
<a name="l00398"></a>00398             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;transmit machine busy with another request! txState=%s&quot;</span>,
<a name="l00399"></a>00399                   <a class="code" href="namespaceSinic.html#af3483fda812098251269cec3e53de3b7">TxStateStrings</a>[<a class="code" href="classSinic_1_1Device.html#a12e3a80bef638cd15c067541b96a4756">txState</a>]);
<a name="l00400"></a>00400 
<a name="l00401"></a>00401         vnic.txUnique = <a class="code" href="classSinic_1_1Device.html#addcc8e87969e32011941cd144fe23c73">txUnique</a>++;
<a name="l00402"></a>00402         vnic.TxDone = Regs::TxDone_Busy;
<a name="l00403"></a>00403 
<a name="l00404"></a>00404         <span class="keywordflow">if</span> (Regs::get_TxData_Vaddr(pkt-&gt;<a class="code" href="classPacket.html#af6ea056c8af82f08af9fd0d857967f9b">get</a>&lt;uint64_t&gt;())) {
<a name="l00405"></a>00405             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;vtophys won&apos;t work here in newmem.\n&quot;</span>);
<a name="l00406"></a>00406 <span class="preprocessor">#ifdef SINIC_VTOPHYS</span>
<a name="l00407"></a>00407 <span class="preprocessor"></span>            <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="code" href="namespaceMipsISA.html#ac78d9788b3f9a366df64485c9afaf1b1">vaddr</a> = Regs::get_TxData_Addr(reg64);
<a name="l00408"></a>00408             <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> paddr = <a class="code" href="namespaceAlphaISA.html#a3828815371ad2b0a1be60abdcb405cf9">vtophys</a>(req-&gt;xc, vaddr);
<a name="l00409"></a>00409             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetPIO, <span class="stringliteral">&quot;write TxData vnic %d (txunique %d): &quot;</span>
<a name="l00410"></a>00410                     <span class="stringliteral">&quot;vaddr=%#x, paddr=%#x\n&quot;</span>,
<a name="l00411"></a>00411                     index, vnic.txUnique, vaddr, paddr);
<a name="l00412"></a>00412 
<a name="l00413"></a>00413             vnic.TxData = Regs::set_TxData_Addr(vnic.TxData, paddr);
<a name="l00414"></a>00414 <span class="preprocessor">#endif</span>
<a name="l00415"></a>00415 <span class="preprocessor"></span>        } <span class="keywordflow">else</span> {
<a name="l00416"></a>00416             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(EthernetPIO, <span class="stringliteral">&quot;write TxData vnic %d (txunique %d)\n&quot;</span>,
<a name="l00417"></a>00417                     index, vnic.txUnique);
<a name="l00418"></a>00418         }
<a name="l00419"></a>00419 
<a name="l00420"></a>00420         <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Device.html#a7010216dd085a0c2dac9d6b830a64f35">txList</a>.empty() || <a class="code" href="classSinic_1_1Device.html#a7010216dd085a0c2dac9d6b830a64f35">txList</a>.front() != index)
<a name="l00421"></a>00421             <a class="code" href="classSinic_1_1Device.html#a7010216dd085a0c2dac9d6b830a64f35">txList</a>.push_back(index);
<a name="l00422"></a>00422         <span class="keywordflow">if</span> (<a class="code" href="classSinic_1_1Base.html#a950ab5d638f497b596eacdbf60bcb3f0">txEnable</a> &amp;&amp; <a class="code" href="classSinic_1_1Device.html#a12e3a80bef638cd15c067541b96a4756">txState</a> == <a class="code" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aa6ae23f58218fed48a3f17abba689fcb6">txIdle</a> &amp;&amp; <a class="code" href="classSinic_1_1Device.html#a7010216dd085a0c2dac9d6b830a64f35">txList</a>.front() == index) {
<a name="l00423"></a>00423             <a class="code" href="classSinic_1_1Device.html#a12e3a80bef638cd15c067541b96a4756">txState</a> = <a class="code" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6aaf6571d0685a78da76fe4116ae36afdc3">txFifoBlock</a>;
<a name="l00424"></a>00424             <a class="code" href="classSinic_1_1Device.html#ac5484e8debdd6a2d3cf4c2902b832a76">txKick</a>();
<a name="l00425"></a>00425         }
<a name="l00426"></a>00426         <span class="keywordflow">break</span>;
<a name="l00427"></a>00427     }
<a name="l00428"></a>00428 
<a name="l00429"></a>00429     <span class="keywordflow">return</span> <a class="code" href="classPciDevice.html#ac8e969635a78ab9ab123904ccca434cc">pioDelay</a>;
<a name="l00430"></a>00430 }
</pre></div></p>

</div>
</div>
<hr/><h2>フレンドと関連する関数</h2>
<a class="anchor" id="aeca94de76c2e5173eca0cd628c06cb43"></a><!-- doxytag: member="Sinic::Device::EventWrapper&lt; Device,&amp;Device::rxDmaDone &gt;" ref="aeca94de76c2e5173eca0cd628c06cb43" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classEventWrapper.html">EventWrapper</a>&lt; <a class="el" href="classSinic_1_1Device.html">Device</a>,&amp;Device::rxDmaDone &gt;<code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="af2d0621641d94343bd091391cd6cf46f"></a><!-- doxytag: member="Sinic::Device::EventWrapper&lt; Device,&amp;Device::txDmaDone &gt;" ref="af2d0621641d94343bd091391cd6cf46f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classEventWrapper.html">EventWrapper</a>&lt; <a class="el" href="classSinic_1_1Device.html">Device</a>,&amp;Device::txDmaDone &gt;<code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a97dc465a9dffe1cb8fcb2775d67610ca"></a><!-- doxytag: member="Sinic::Device::RxKickEvent::process" ref="a97dc465a9dffe1cb8fcb2775d67610ca" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RxKickEvent::process </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ac669bd618effa3395173bc2905568d54"></a><!-- doxytag: member="Sinic::Device::TxEvent::process" ref="ac669bd618effa3395173bc2905568d54" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TxEvent::process </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab1e1e9de6b0b4cbeee1a4c0bb61e07d9"></a><!-- doxytag: member="Sinic::Device::TxKickEvent::process" ref="ab1e1e9de6b0b4cbeee1a4c0bb61e07d9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TxKickEvent::process </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="a3eb6949618cb5ab7fcb963974eb980a0"></a><!-- doxytag: member="Sinic::Device::_maxVnicDistance" ref="a3eb6949618cb5ab7fcb963974eb980a0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classSinic_1_1Device.html#a3eb6949618cb5ab7fcb963974eb980a0">_maxVnicDistance</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a6846633bb8f156a544f88825a26a3090"></a><!-- doxytag: member="Sinic::Device::avgVnicDistance" ref="a6846633bb8f156a544f88825a26a3090" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Formula.html">Stats::Formula</a> <a class="el" href="classSinic_1_1Device.html#a6846633bb8f156a544f88825a26a3090">avgVnicDistance</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a04596aab9f96da6679ea03286f74b3df"></a><!-- doxytag: member="Sinic::Device::Command" ref="a04596aab9f96da6679ea03286f74b3df" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="classSinic_1_1Device.html#a04596aab9f96da6679ea03286f74b3df">Command</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4ce7377178b8c0ee57726e8a73c06e66"></a><!-- doxytag: member="Sinic::Device::Config" ref="a4ce7377178b8c0ee57726e8a73c06e66" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="classSinic_1_1Device.html#a4ce7377178b8c0ee57726e8a73c06e66">Config</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="abff269bf1752a04839eb356b47d4348b"></a><!-- doxytag: member="Sinic::Device::dmaReadDelay" ref="abff269bf1752a04839eb356b47d4348b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="el" href="classSinic_1_1Device.html#abff269bf1752a04839eb356b47d4348b">dmaReadDelay</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a632abfe8a89dfa1d944547874f1b4fe4"></a><!-- doxytag: member="Sinic::Device::dmaReadFactor" ref="a632abfe8a89dfa1d944547874f1b4fe4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="el" href="classSinic_1_1Device.html#a632abfe8a89dfa1d944547874f1b4fe4">dmaReadFactor</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="add556e09206ac9f4675d3e2da53339e8"></a><!-- doxytag: member="Sinic::Device::dmaWriteDelay" ref="add556e09206ac9f4675d3e2da53339e8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="el" href="classSinic_1_1Device.html#add556e09206ac9f4675d3e2da53339e8">dmaWriteDelay</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a396f950eb0d0a011cfa5790861e32608"></a><!-- doxytag: member="Sinic::Device::dmaWriteFactor" ref="a396f950eb0d0a011cfa5790861e32608" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="el" href="classSinic_1_1Device.html#a396f950eb0d0a011cfa5790861e32608">dmaWriteFactor</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="acc1119b12c1f476a7aa533a975ac4249"></a><!-- doxytag: member="Sinic::Device::HwAddr" ref="acc1119b12c1f476a7aa533a975ac4249" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="classSinic_1_1Device.html#acc1119b12c1f476a7aa533a975ac4249">HwAddr</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa3e3d884e5a8b959eeccc3660451c7ed"></a><!-- doxytag: member="Sinic::Device::IntrMask" ref="aa3e3d884e5a8b959eeccc3660451c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="classSinic_1_1Device.html#aa3e3d884e5a8b959eeccc3660451c7ed">IntrMask</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a48050ef73aa0e6da5537fca47130d76f"></a><!-- doxytag: member="Sinic::Device::IntrStatus" ref="a48050ef73aa0e6da5537fca47130d76f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="classSinic_1_1Device.html#a48050ef73aa0e6da5537fca47130d76f">IntrStatus</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a55159ce061f8632637c330b0b101d370"></a><!-- doxytag: member="Sinic::Device::maxVnicDistance" ref="a55159ce061f8632637c330b0b101d370" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classSinic_1_1Device.html#a55159ce061f8632637c330b0b101d370">maxVnicDistance</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a489a76c8b17d7dec4865d06b211218fb"></a><!-- doxytag: member="Sinic::Device::numVnicDistance" ref="a489a76c8b17d7dec4865d06b211218fb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classSinic_1_1Device.html#a489a76c8b17d7dec4865d06b211218fb">numVnicDistance</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1898630b26f531edc311e99e742572af"></a><!-- doxytag: member="Sinic::Device::regs" ref="a1898630b26f531edc311e99e742572af" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct { ... }   <a class="el" href="classSinic_1_1Device.html#a1898630b26f531edc311e99e742572af">regs</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>device register file </p>

</div>
</div>
<a class="anchor" id="a560efaee55571ea588551a80aadc6cda"></a><!-- doxytag: member="Sinic::Device::rxActive" ref="a560efaee55571ea588551a80aadc6cda" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classSinic_1_1Device.html#a560efaee55571ea588551a80aadc6cda">rxActive</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="afd33bf96a9045d1f90d0685ad3e33253"></a><!-- doxytag: member="Sinic::Device::rxBusy" ref="afd33bf96a9045d1f90d0685ad3e33253" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1list.html">VirtualList</a> <a class="el" href="classSinic_1_1Device.html#afd33bf96a9045d1f90d0685ad3e33253">rxBusy</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a508dbc989a9476f10e7622b054aac7e1"></a><!-- doxytag: member="Sinic::Device::rxBusyCount" ref="a508dbc989a9476f10e7622b054aac7e1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classSinic_1_1Device.html#a508dbc989a9476f10e7622b054aac7e1">rxBusyCount</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a6c9104d7b097720d299cae2ffe977554"></a><!-- doxytag: member="Sinic::Device::RxData" ref="a6c9104d7b097720d299cae2ffe977554" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="classSinic_1_1Device.html#a6c9104d7b097720d299cae2ffe977554">RxData</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9e5a18ec7025db57fa6ff2f05a289804"></a><!-- doxytag: member="Sinic::Device::rxDirtyCount" ref="a9e5a18ec7025db57fa6ff2f05a289804" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classSinic_1_1Device.html#a9e5a18ec7025db57fa6ff2f05a289804">rxDirtyCount</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4a609f84c6849bcfb6dee08329773fca"></a><!-- doxytag: member="Sinic::Device::rxDmaAddr" ref="a4a609f84c6849bcfb6dee08329773fca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="el" href="classSinic_1_1Device.html#a4a609f84c6849bcfb6dee08329773fca">rxDmaAddr</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae917f4bc2a610fed06749a854fb89d14"></a><!-- doxytag: member="Sinic::Device::rxDmaData" ref="ae917f4bc2a610fed06749a854fb89d14" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* <a class="el" href="classSinic_1_1Device.html#ae917f4bc2a610fed06749a854fb89d14">rxDmaData</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a50d4f78a0a458835572bb101383bf692"></a><!-- doxytag: member="Sinic::Device::rxDmaEvent" ref="a50d4f78a0a458835572bb101383bf692" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt;<a class="el" href="classSinic_1_1Device.html">Device</a>, &amp;Device::rxDmaDone&gt; <a class="el" href="classSinic_1_1Device.html#a50d4f78a0a458835572bb101383bf692">rxDmaEvent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0efc207ddfcff656cbe0237c3bc237c1"></a><!-- doxytag: member="Sinic::Device::rxDmaLen" ref="a0efc207ddfcff656cbe0237c3bc237c1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classSinic_1_1Device.html#a0efc207ddfcff656cbe0237c3bc237c1">rxDmaLen</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3eeed0cb70c02a0da59c7a4c407dd6e9"></a><!-- doxytag: member="Sinic::Device::RxDone" ref="a3eeed0cb70c02a0da59c7a4c407dd6e9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="classSinic_1_1Device.html#a3eeed0cb70c02a0da59c7a4c407dd6e9">RxDone</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a62b6a5f468811226da2581374919b1a5"></a><!-- doxytag: member="Sinic::Device::rxEmpty" ref="a62b6a5f468811226da2581374919b1a5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classSinic_1_1Device.html#a62b6a5f468811226da2581374919b1a5">rxEmpty</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a45c9c6a3665bcd91e57ff35aa9089fa7"></a><!-- doxytag: member="Sinic::Device::rxFifo" ref="a45c9c6a3665bcd91e57ff35aa9089fa7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPacketFifo.html">PacketFifo</a> <a class="el" href="classSinic_1_1Device.html#a45c9c6a3665bcd91e57ff35aa9089fa7">rxFifo</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a5f1b0015444b58705dd253c2e0aed9b4"></a><!-- doxytag: member="Sinic::Device::RxFifoHigh" ref="a5f1b0015444b58705dd253c2e0aed9b4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="classSinic_1_1Device.html#a5f1b0015444b58705dd253c2e0aed9b4">RxFifoHigh</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4d0eb17fd55782f70d98e6b96ccd8d16"></a><!-- doxytag: member="Sinic::Device::RxFifoLow" ref="a4d0eb17fd55782f70d98e6b96ccd8d16" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="classSinic_1_1Device.html#a4d0eb17fd55782f70d98e6b96ccd8d16">RxFifoLow</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aee345bc47c94b616b04d8f502dab1826"></a><!-- doxytag: member="Sinic::Device::rxFifoPtr" ref="aee345bc47c94b616b04d8f502dab1826" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPacketFifo.html#a6905b6d8863a2eecd86b633802b68fda">PacketFifo::iterator</a> <a class="el" href="classSinic_1_1Device.html#aee345bc47c94b616b04d8f502dab1826">rxFifoPtr</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad95eeec9a1e7f6804da0d44916333d3c"></a><!-- doxytag: member="Sinic::Device::RxFifoSize" ref="ad95eeec9a1e7f6804da0d44916333d3c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="classSinic_1_1Device.html#ad95eeec9a1e7f6804da0d44916333d3c">RxFifoSize</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa36d466a86f77d2c7afdc014e3a6f8b3"></a><!-- doxytag: member="Sinic::Device::rxKickTick" ref="aa36d466a86f77d2c7afdc014e3a6f8b3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="el" href="classSinic_1_1Device.html#aa36d466a86f77d2c7afdc014e3a6f8b3">rxKickTick</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a45202257b5522a1436d8130249ee0a0d"></a><!-- doxytag: member="Sinic::Device::rxList" ref="a45202257b5522a1436d8130249ee0a0d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1list.html">VirtualList</a> <a class="el" href="classSinic_1_1Device.html#a45202257b5522a1436d8130249ee0a0d">rxList</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1ef589f4a0a6d9baae11626a0d89b5ec"></a><!-- doxytag: member="Sinic::Device::rxLow" ref="a1ef589f4a0a6d9baae11626a0d89b5ec" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classSinic_1_1Device.html#a1ef589f4a0a6d9baae11626a0d89b5ec">rxLow</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a41d5a12c120010c50c75ea0dc2f01241"></a><!-- doxytag: member="Sinic::Device::rxMappedCount" ref="a41d5a12c120010c50c75ea0dc2f01241" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classSinic_1_1Device.html#a41d5a12c120010c50c75ea0dc2f01241">rxMappedCount</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a40cf84e9a58828b94d92f3f4af8e2132"></a><!-- doxytag: member="Sinic::Device::RxMaxCopy" ref="a40cf84e9a58828b94d92f3f4af8e2132" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="classSinic_1_1Device.html#a40cf84e9a58828b94d92f3f4af8e2132">RxMaxCopy</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a29b4ff4ee34664ea46879c0fed891fe6"></a><!-- doxytag: member="Sinic::Device::RxMaxIntr" ref="a29b4ff4ee34664ea46879c0fed891fe6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="classSinic_1_1Device.html#a29b4ff4ee34664ea46879c0fed891fe6">RxMaxIntr</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a17c506ad3a705ec9dbd1762e6a80fbf5"></a><!-- doxytag: member="Sinic::Device::rxState" ref="a17c506ad3a705ec9dbd1762e6a80fbf5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSinic_1_1Device.html#afa22e66eb5ea0daab0f0cd0360936f82">RxState</a> <a class="el" href="classSinic_1_1Device.html#a17c506ad3a705ec9dbd1762e6a80fbf5">rxState</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1d5b24603a5677cd3cf0a67f8c44d540"></a><!-- doxytag: member="Sinic::Device::RxStatus" ref="a1d5b24603a5677cd3cf0a67f8c44d540" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="classSinic_1_1Device.html#a1d5b24603a5677cd3cf0a67f8c44d540">RxStatus</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a98e0c2747f2107c6f81f51e9ba3bdc8a"></a><!-- doxytag: member="Sinic::Device::rxUnique" ref="a98e0c2747f2107c6f81f51e9ba3bdc8a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e">Counter</a> <a class="el" href="classSinic_1_1Device.html#a98e0c2747f2107c6f81f51e9ba3bdc8a">rxUnique</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a49b873aef0e771896569f73b69ed5f6a"></a><!-- doxytag: member="Sinic::Device::RxWait" ref="a49b873aef0e771896569f73b69ed5f6a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="classSinic_1_1Device.html#a49b873aef0e771896569f73b69ed5f6a">RxWait</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aceabe9d2fb5f87ee602c22e0d0141479"></a><!-- doxytag: member="Sinic::Device::totalVnicDistance" ref="aceabe9d2fb5f87ee602c22e0d0141479" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classSinic_1_1Device.html#aceabe9d2fb5f87ee602c22e0d0141479">totalVnicDistance</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Statistics </p>

</div>
</div>
<a class="anchor" id="a6f031a974796558748f14b7ba7f64985"></a><!-- doxytag: member="Sinic::Device::TxData" ref="a6f031a974796558748f14b7ba7f64985" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="classSinic_1_1Device.html#a6f031a974796558748f14b7ba7f64985">TxData</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aef3a8dd866e8017fd7a675414596ec6b"></a><!-- doxytag: member="Sinic::Device::txDmaAddr" ref="aef3a8dd866e8017fd7a675414596ec6b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> <a class="el" href="classSinic_1_1Device.html#aef3a8dd866e8017fd7a675414596ec6b">txDmaAddr</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="af56464970a8957faf3a1d35026db6a12"></a><!-- doxytag: member="Sinic::Device::txDmaData" ref="af56464970a8957faf3a1d35026db6a12" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* <a class="el" href="classSinic_1_1Device.html#af56464970a8957faf3a1d35026db6a12">txDmaData</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3d31afcc8e7130b3e43e5dc1a0ef0e37"></a><!-- doxytag: member="Sinic::Device::txDmaEvent" ref="a3d31afcc8e7130b3e43e5dc1a0ef0e37" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEventWrapper.html">EventWrapper</a>&lt;<a class="el" href="classSinic_1_1Device.html">Device</a>, &amp;Device::txDmaDone&gt; <a class="el" href="classSinic_1_1Device.html#a3d31afcc8e7130b3e43e5dc1a0ef0e37">txDmaEvent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a5782be4cae30f9377ab0c645a9f65892"></a><!-- doxytag: member="Sinic::Device::txDmaLen" ref="a5782be4cae30f9377ab0c645a9f65892" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classSinic_1_1Device.html#a5782be4cae30f9377ab0c645a9f65892">txDmaLen</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab0c6a1c886fdea04c1107ab914188fe7"></a><!-- doxytag: member="Sinic::Device::TxDone" ref="ab0c6a1c886fdea04c1107ab914188fe7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="classSinic_1_1Device.html#ab0c6a1c886fdea04c1107ab914188fe7">TxDone</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a324fed072a29716c20a98a82927bd2a2"></a><!-- doxytag: member="Sinic::Device::txEvent" ref="a324fed072a29716c20a98a82927bd2a2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEventWrapper.html">TxEvent</a> <a class="el" href="classSinic_1_1Device.html#a324fed072a29716c20a98a82927bd2a2">txEvent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae699c324753236e0a59aa2465920eb46"></a><!-- doxytag: member="Sinic::Device::txFifo" ref="ae699c324753236e0a59aa2465920eb46" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPacketFifo.html">PacketFifo</a> <a class="el" href="classSinic_1_1Device.html#ae699c324753236e0a59aa2465920eb46">txFifo</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae282c8042fb1e67c966a0040eed2c37f"></a><!-- doxytag: member="Sinic::Device::TxFifoHigh" ref="ae282c8042fb1e67c966a0040eed2c37f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="classSinic_1_1Device.html#ae282c8042fb1e67c966a0040eed2c37f">TxFifoHigh</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a72783e023c789fe9ff7b3d526a202417"></a><!-- doxytag: member="Sinic::Device::TxFifoLow" ref="a72783e023c789fe9ff7b3d526a202417" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="classSinic_1_1Device.html#a72783e023c789fe9ff7b3d526a202417">TxFifoLow</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a07afc60b5230368629f6b0eb9ab6c51a"></a><!-- doxytag: member="Sinic::Device::TxFifoSize" ref="a07afc60b5230368629f6b0eb9ab6c51a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="classSinic_1_1Device.html#a07afc60b5230368629f6b0eb9ab6c51a">TxFifoSize</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa09cc8a4752916111328b7353e64f3bb"></a><!-- doxytag: member="Sinic::Device::txFull" ref="aa09cc8a4752916111328b7353e64f3bb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classSinic_1_1Device.html#aa09cc8a4752916111328b7353e64f3bb">txFull</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="acfce4fae6fa03f94e3d91d71302fe349"></a><!-- doxytag: member="Sinic::Device::txKickTick" ref="acfce4fae6fa03f94e3d91d71302fe349" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> <a class="el" href="classSinic_1_1Device.html#acfce4fae6fa03f94e3d91d71302fe349">txKickTick</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a7010216dd085a0c2dac9d6b830a64f35"></a><!-- doxytag: member="Sinic::Device::txList" ref="a7010216dd085a0c2dac9d6b830a64f35" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1list.html">VirtualList</a> <a class="el" href="classSinic_1_1Device.html#a7010216dd085a0c2dac9d6b830a64f35">txList</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8dfcab9c852a1e3e564b4ccceb9a594d"></a><!-- doxytag: member="Sinic::Device::TxMaxCopy" ref="a8dfcab9c852a1e3e564b4ccceb9a594d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="classSinic_1_1Device.html#a8dfcab9c852a1e3e564b4ccceb9a594d">TxMaxCopy</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8d22e1a154942ff0d4ab9048e7e844bb"></a><!-- doxytag: member="Sinic::Device::txPacket" ref="a8d22e1a154942ff0d4ab9048e7e844bb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRefCountingPtr.html">EthPacketPtr</a> <a class="el" href="classSinic_1_1Device.html#a8d22e1a154942ff0d4ab9048e7e844bb">txPacket</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1e82240f06ef6f0c8d8c0bb1a141a600"></a><!-- doxytag: member="Sinic::Device::txPacketBytes" ref="a1e82240f06ef6f0c8d8c0bb1a141a600" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classSinic_1_1Device.html#a1e82240f06ef6f0c8d8c0bb1a141a600">txPacketBytes</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ac0d074adcc00053882737a0009c84adb"></a><!-- doxytag: member="Sinic::Device::txPacketOffset" ref="ac0d074adcc00053882737a0009c84adb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classSinic_1_1Device.html#ac0d074adcc00053882737a0009c84adb">txPacketOffset</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a12e3a80bef638cd15c067541b96a4756"></a><!-- doxytag: member="Sinic::Device::txState" ref="a12e3a80bef638cd15c067541b96a4756" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSinic_1_1Device.html#a96f29317c7f6628ea6a0c1bc5ab05d6a">TxState</a> <a class="el" href="classSinic_1_1Device.html#a12e3a80bef638cd15c067541b96a4756">txState</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="addcc8e87969e32011941cd144fe23c73"></a><!-- doxytag: member="Sinic::Device::txUnique" ref="addcc8e87969e32011941cd144fe23c73" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e">Counter</a> <a class="el" href="classSinic_1_1Device.html#addcc8e87969e32011941cd144fe23c73">txUnique</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aee07d31d26bcedc3ec903158356f7d06"></a><!-- doxytag: member="Sinic::Device::TxWait" ref="aee07d31d26bcedc3ec903158356f7d06" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="classSinic_1_1Device.html#aee07d31d26bcedc3ec903158356f7d06">TxWait</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8e55d9d438f57f1cf9bee803876daf7e"></a><!-- doxytag: member="Sinic::Device::VirtualCount" ref="a8e55d9d438f57f1cf9bee803876daf7e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="classSinic_1_1Device.html#a8e55d9d438f57f1cf9bee803876daf7e">VirtualCount</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="acb438fcaae56ab29f35376e8b0726c23"></a><!-- doxytag: member="Sinic::Device::virtualRegs" ref="acb438fcaae56ab29f35376e8b0726c23" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1vector.html">VirtualRegs</a> <a class="el" href="classSinic_1_1Device.html#acb438fcaae56ab29f35376e8b0726c23">virtualRegs</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a93d85f8e9d6efa8d85cce98ef514c54d"></a><!-- doxytag: member="Sinic::Device::ZeroCopyMark" ref="a93d85f8e9d6efa8d85cce98ef514c54d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="classSinic_1_1Device.html#a93d85f8e9d6efa8d85cce98ef514c54d">ZeroCopyMark</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0a6cb3337e941db43aff26f90444592a"></a><!-- doxytag: member="Sinic::Device::ZeroCopySize" ref="a0a6cb3337e941db43aff26f90444592a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="classSinic_1_1Device.html#a0a6cb3337e941db43aff26f90444592a">ZeroCopySize</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li>dev/<a class="el" href="sinic_8hh_source.html">sinic.hh</a></li>
<li>dev/<a class="el" href="sinic_8cc.html">sinic.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>File&nbsp;GEM5&nbsp;Wrapperに対して25 May 2015に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
