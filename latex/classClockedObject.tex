\hypertarget{classClockedObject}{
\section{クラス ClockedObject}
\label{classClockedObject}\index{ClockedObject@{ClockedObject}}
}


{\ttfamily \#include $<$clocked\_\-object.hh$>$}ClockedObjectに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=12cm]{classClockedObject}
\end{center}
\end{figure}
\subsection*{構成}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classClockedObject_1_1ClockedObject}{ClockedObject}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classClockedObject_a2b1ce4e5fff654f673292b09c44780c0}{updateClockPeriod} () const 
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classClockedObject_a773956693f216cafb7d4cad92ad582e5}{clockEdge} (\hyperlink{classCycles}{Cycles} cycles=\hyperlink{classCycles}{Cycles}(0)) const 
\item 
\hyperlink{classCycles}{Cycles} \hyperlink{classClockedObject_a3f6dfa1d3e7cd47666433b6caa4d34d6}{curCycle} () const 
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classClockedObject_abbbab15df430cd1edc7f3ef750198a0c}{nextCycle} () const 
\item 
uint64\_\-t \hyperlink{classClockedObject_a47ad0ff313f0dcb63b8223b1f11d49d8}{frequency} () const 
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classClockedObject_a78c89cef17196c60470c4f2f76d43d8a}{clockPeriod} () const 
\item 
\hyperlink{classCycles}{Cycles} \hyperlink{classClockedObject_a91cfeb85669839d1ecafb7e62cf9d57a}{ticksToCycles} (\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} t) const 
\end{DoxyCompactItemize}
\subsection*{Protected メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classClockedObject_a3106e3ad89e9d5ed67751bd9a2ee8c68}{ClockedObject} (const ClockedObjectParams $\ast$p)
\item 
virtual \hyperlink{classClockedObject_a2f1ff92cfe792a99c7d65f11bccb3d79}{$\sim$ClockedObject} ()
\item 
void \hyperlink{classClockedObject_a7c7c8afaf47b89e48578fabd1ce491da}{resetClock} () const 
\end{DoxyCompactItemize}
\subsection*{Private メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classClockedObject_a92f78d5c8554a264a3b22b90b452de45}{ClockedObject} (\hyperlink{classClockedObject_1_1ClockedObject}{ClockedObject} \&)
\item 
\hyperlink{classClockedObject_1_1ClockedObject}{ClockedObject} \& \hyperlink{classClockedObject_a2ade080e5da78e3b6e5821d3ad92623a}{operator=} (\hyperlink{classClockedObject_1_1ClockedObject}{ClockedObject} \&)
\item 
void \hyperlink{classClockedObject_ac277f12bf13b157b9686a275f723612f}{update} () const 
\end{DoxyCompactItemize}
\subsection*{Private 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classClockedObject_a4daae57fbf09ee5423d123f5ce330e92}{tick}
\item 
\hyperlink{classCycles}{Cycles} \hyperlink{classClockedObject_a5dd7a975aae396561aafab3faa698033}{cycle}
\item 
\hyperlink{classClockDomain}{ClockDomain} \& \hyperlink{classClockedObject_a17a99a3f3123d51a0fcd65c59a58763d}{clockDomain}
\end{DoxyCompactItemize}


\subsection{説明}
The \hyperlink{classClockedObject}{ClockedObject} class extends the \hyperlink{classSimObject}{SimObject} with a clock and accessor functions to relate ticks to the cycles of the object. 

\subsection{コンストラクタとデストラクタ}
\hypertarget{classClockedObject_a92f78d5c8554a264a3b22b90b452de45}{
\index{ClockedObject@{ClockedObject}!ClockedObject@{ClockedObject}}
\index{ClockedObject@{ClockedObject}!ClockedObject@{ClockedObject}}
\subsubsection[{ClockedObject}]{\setlength{\rightskip}{0pt plus 5cm}{\bf ClockedObject} ({\bf ClockedObject} \&)\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classClockedObject_a92f78d5c8554a264a3b22b90b452de45}
Prevent inadvertent use of the copy constructor and assignment operator by making them private. \hypertarget{classClockedObject_a3106e3ad89e9d5ed67751bd9a2ee8c68}{
\index{ClockedObject@{ClockedObject}!ClockedObject@{ClockedObject}}
\index{ClockedObject@{ClockedObject}!ClockedObject@{ClockedObject}}
\subsubsection[{ClockedObject}]{\setlength{\rightskip}{0pt plus 5cm}{\bf ClockedObject} (const ClockedObjectParams $\ast$ {\em p})\hspace{0.3cm}{\ttfamily  \mbox{[}inline, protected\mbox{]}}}}
\label{classClockedObject_a3106e3ad89e9d5ed67751bd9a2ee8c68}
Create a clocked object and set the clock domain based on the parameters. 


\begin{DoxyCode}
120                                                 :
121         SimObject(p), tick(0), cycle(0), clockDomain(*p->clk_domain)
122     {
123         // Register with the clock domain, so that if the clock domain
124         // frequency changes, we can update this object's tick.
125         clockDomain.registerWithClockDomain(this);
126     }

\end{DoxyCode}
\hypertarget{classClockedObject_a2f1ff92cfe792a99c7d65f11bccb3d79}{
\index{ClockedObject@{ClockedObject}!$\sim$ClockedObject@{$\sim$ClockedObject}}
\index{$\sim$ClockedObject@{$\sim$ClockedObject}!ClockedObject@{ClockedObject}}
\subsubsection[{$\sim$ClockedObject}]{\setlength{\rightskip}{0pt plus 5cm}virtual $\sim${\bf ClockedObject} ()\hspace{0.3cm}{\ttfamily  \mbox{[}inline, protected, virtual\mbox{]}}}}
\label{classClockedObject_a2f1ff92cfe792a99c7d65f11bccb3d79}
Virtual destructor due to inheritance. 


\begin{DoxyCode}
131 { }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classClockedObject_a773956693f216cafb7d4cad92ad582e5}{
\index{ClockedObject@{ClockedObject}!clockEdge@{clockEdge}}
\index{clockEdge@{clockEdge}!ClockedObject@{ClockedObject}}
\subsubsection[{clockEdge}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} clockEdge ({\bf Cycles} {\em cycles} = {\ttfamily {\bf Cycles}(0)}) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classClockedObject_a773956693f216cafb7d4cad92ad582e5}
Determine the tick when a cycle begins, by default the current one, but the argument also enables the caller to determine a future cycle.


\begin{DoxyParams}{引数}
\item[{\em cycles}]The number of cycles into the future\end{DoxyParams}
\begin{DoxyReturn}{戻り値}
The tick when the clock edge occurs 
\end{DoxyReturn}



\begin{DoxyCode}
166     {
167         // align tick to the next clock edge
168         update();
169 
170         // figure out when this future cycle is
171         return tick + clockPeriod() * cycles;
172     }
\end{DoxyCode}
\hypertarget{classClockedObject_a78c89cef17196c60470c4f2f76d43d8a}{
\index{ClockedObject@{ClockedObject}!clockPeriod@{clockPeriod}}
\index{clockPeriod@{clockPeriod}!ClockedObject@{ClockedObject}}
\subsubsection[{clockPeriod}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} clockPeriod () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classClockedObject_a78c89cef17196c60470c4f2f76d43d8a}



\begin{DoxyCode}
204     {
205         return clockDomain.clockPeriod();
206     }
\end{DoxyCode}
\hypertarget{classClockedObject_a3f6dfa1d3e7cd47666433b6caa4d34d6}{
\index{ClockedObject@{ClockedObject}!curCycle@{curCycle}}
\index{curCycle@{curCycle}!ClockedObject@{ClockedObject}}
\subsubsection[{curCycle}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Cycles} curCycle () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classClockedObject_a3f6dfa1d3e7cd47666433b6caa4d34d6}
Determine the current cycle, corresponding to a tick aligned to a clock edge.

\begin{DoxyReturn}{戻り値}
The current cycle count 
\end{DoxyReturn}



\begin{DoxyCode}
181     {
182         // align cycle to the next clock edge.
183         update();
184 
185         return cycle;
186     }
\end{DoxyCode}
\hypertarget{classClockedObject_a47ad0ff313f0dcb63b8223b1f11d49d8}{
\index{ClockedObject@{ClockedObject}!frequency@{frequency}}
\index{frequency@{frequency}!ClockedObject@{ClockedObject}}
\subsubsection[{frequency}]{\setlength{\rightskip}{0pt plus 5cm}uint64\_\-t frequency () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classClockedObject_a47ad0ff313f0dcb63b8223b1f11d49d8}


\hyperlink{classTsunamiIO_ae7d31c6aab76d9d4e74e5e7227337651}{TsunamiIO}, と \hyperlink{classMaltaIO_ae7d31c6aab76d9d4e74e5e7227337651}{MaltaIO}で再定義されています。


\begin{DoxyCode}
199     {
200         return SimClock::Frequency / clockPeriod();
201     }
\end{DoxyCode}
\hypertarget{classClockedObject_abbbab15df430cd1edc7f3ef750198a0c}{
\index{ClockedObject@{ClockedObject}!nextCycle@{nextCycle}}
\index{nextCycle@{nextCycle}!ClockedObject@{ClockedObject}}
\subsubsection[{nextCycle}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} nextCycle () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classClockedObject_abbbab15df430cd1edc7f3ef750198a0c}
Based on the clock of the object, determine the tick when the next cycle begins, in other words, return the next clock edge. (This can never be the current tick.)

\begin{DoxyReturn}{戻り値}
The tick when the next cycle starts 
\end{DoxyReturn}



\begin{DoxyCode}
196     { return clockEdge(Cycles(1)); }
\end{DoxyCode}
\hypertarget{classClockedObject_a2ade080e5da78e3b6e5821d3ad92623a}{
\index{ClockedObject@{ClockedObject}!operator=@{operator=}}
\index{operator=@{operator=}!ClockedObject@{ClockedObject}}
\subsubsection[{operator=}]{\setlength{\rightskip}{0pt plus 5cm}{\bf ClockedObject}\& operator= ({\bf ClockedObject} \&)\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classClockedObject_a2ade080e5da78e3b6e5821d3ad92623a}
\hypertarget{classClockedObject_a7c7c8afaf47b89e48578fabd1ce491da}{
\index{ClockedObject@{ClockedObject}!resetClock@{resetClock}}
\index{resetClock@{resetClock}!ClockedObject@{ClockedObject}}
\subsubsection[{resetClock}]{\setlength{\rightskip}{0pt plus 5cm}void resetClock () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline, protected\mbox{]}}}}
\label{classClockedObject_a7c7c8afaf47b89e48578fabd1ce491da}
Reset the object's clock using the current global tick value. Likely to be used only when the global clock is reset. Currently, this done only when Ruby is done warming up the memory system. 


\begin{DoxyCode}
139     {
140         Cycles elapsedCycles(divCeil(curTick(), clockPeriod()));
141         cycle = elapsedCycles;
142         tick = elapsedCycles * clockPeriod();
143     }
\end{DoxyCode}
\hypertarget{classClockedObject_a91cfeb85669839d1ecafb7e62cf9d57a}{
\index{ClockedObject@{ClockedObject}!ticksToCycles@{ticksToCycles}}
\index{ticksToCycles@{ticksToCycles}!ClockedObject@{ClockedObject}}
\subsubsection[{ticksToCycles}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Cycles} ticksToCycles ({\bf Tick} {\em t}) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classClockedObject_a91cfeb85669839d1ecafb7e62cf9d57a}



\begin{DoxyCode}
209     { return Cycles(divCeil(t, clockPeriod())); }
\end{DoxyCode}
\hypertarget{classClockedObject_ac277f12bf13b157b9686a275f723612f}{
\index{ClockedObject@{ClockedObject}!update@{update}}
\index{update@{update}!ClockedObject@{ClockedObject}}
\subsubsection[{update}]{\setlength{\rightskip}{0pt plus 5cm}void update () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline, private\mbox{]}}}}
\label{classClockedObject_ac277f12bf13b157b9686a275f723612f}
Align cycle and tick to the next clock edge if not already done. 


\begin{DoxyCode}
85     {
86         // both tick and cycle are up-to-date and we are done, note
87         // that the >= is important as it captures cases where tick
88         // has already passed curTick()
89         if (tick >= curTick())
90             return;
91 
92         // optimise for the common case and see if the tick should be
93         // advanced by a single clock period
94         tick += clockPeriod();
95         ++cycle;
96 
97         // see if we are done at this point
98         if (tick >= curTick())
99             return;
100 
101         // if not, we have to recalculate the cycle and tick, we
102         // perform the calculations in terms of relative cycles to
103         // allow changes to the clock period in the future
104         Cycles elapsedCycles(divCeil(curTick() - tick, clockPeriod()));
105         cycle += elapsedCycles;
106         tick += elapsedCycles * clockPeriod();
107     }
\end{DoxyCode}
\hypertarget{classClockedObject_a2b1ce4e5fff654f673292b09c44780c0}{
\index{ClockedObject@{ClockedObject}!updateClockPeriod@{updateClockPeriod}}
\index{updateClockPeriod@{updateClockPeriod}!ClockedObject@{ClockedObject}}
\subsubsection[{updateClockPeriod}]{\setlength{\rightskip}{0pt plus 5cm}void updateClockPeriod () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classClockedObject_a2b1ce4e5fff654f673292b09c44780c0}
Update the tick to the current tick. 


\begin{DoxyCode}
152     {
153         update();
154     }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classClockedObject_a17a99a3f3123d51a0fcd65c59a58763d}{
\index{ClockedObject@{ClockedObject}!clockDomain@{clockDomain}}
\index{clockDomain@{clockDomain}!ClockedObject@{ClockedObject}}
\subsubsection[{clockDomain}]{\setlength{\rightskip}{0pt plus 5cm}{\bf ClockDomain}\& {\bf clockDomain}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classClockedObject_a17a99a3f3123d51a0fcd65c59a58763d}
The clock domain this clocked object belongs to \hypertarget{classClockedObject_a5dd7a975aae396561aafab3faa698033}{
\index{ClockedObject@{ClockedObject}!cycle@{cycle}}
\index{cycle@{cycle}!ClockedObject@{ClockedObject}}
\subsubsection[{cycle}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Cycles} {\bf cycle}\hspace{0.3cm}{\ttfamily  \mbox{[}mutable, private\mbox{]}}}}
\label{classClockedObject_a5dd7a975aae396561aafab3faa698033}
\hypertarget{classClockedObject_a4daae57fbf09ee5423d123f5ce330e92}{
\index{ClockedObject@{ClockedObject}!tick@{tick}}
\index{tick@{tick}!ClockedObject@{ClockedObject}}
\subsubsection[{tick}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} {\bf tick}\hspace{0.3cm}{\ttfamily  \mbox{[}mutable, private\mbox{]}}}}
\label{classClockedObject_a4daae57fbf09ee5423d123f5ce330e92}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
sim/\hyperlink{clocked__object_8hh}{clocked\_\-object.hh}\end{DoxyCompactItemize}
