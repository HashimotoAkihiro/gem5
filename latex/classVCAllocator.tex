\hypertarget{classVCAllocator}{
\section{クラス VCAllocator}
\label{classVCAllocator}\index{VCAllocator@{VCAllocator}}
}


{\ttfamily \#include $<$VCAllocator.hh$>$}\subsection*{Public 型}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{classVCAllocator_a3d177565c3d0e6810797e2aed095e676}{VAModel} \{ \hyperlink{classVCAllocator_a3d177565c3d0e6810797e2aed095e676abab57b6e2c553e4d983f415a1f4ea75b}{NO\_\-MODEL} =  0, 
\hyperlink{classVCAllocator_a3d177565c3d0e6810797e2aed095e676a697b6845c1304ebbb56043d5762dcf4e}{ONE\_\-STAGE\_\-ARB}, 
\hyperlink{classVCAllocator_a3d177565c3d0e6810797e2aed095e676aaafb21d259c6e2b8097a333796168b25}{TWO\_\-STAGE\_\-ARB}, 
\hyperlink{classVCAllocator_a3d177565c3d0e6810797e2aed095e676a82c81de8a36cf3d4940817716356c671}{VC\_\-SELECT}
 \}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classVCAllocator_a3c65801087ea345f2733a3742c59db1b}{$\sim$VCAllocator} ()
\item 
double \hyperlink{classVCAllocator_aa89f985c9cd023b702cc81a72880abc9}{get\_\-dynamic\_\-energy\_\-local\_\-vc\_\-arb} (double num\_\-req\_\-, bool is\_\-max\_\-) const 
\item 
double \hyperlink{classVCAllocator_a3df740a0f60313b241b2570396aa8e75}{get\_\-dynamic\_\-energy\_\-global\_\-vc\_\-arb} (double num\_\-req\_\-, bool is\_\-max\_\-) const 
\item 
double \hyperlink{classVCAllocator_a6e17c2da843c6ed97d67718438367eb4}{get\_\-dynamic\_\-energy\_\-vc\_\-select} (bool is\_\-read\_\-, bool is\_\-max\_\-) const 
\item 
double \hyperlink{classVCAllocator_aeb5933543cfdeb1668baed5ce7c68351}{get\_\-static\_\-power} () const 
\item 
void \hyperlink{classVCAllocator_a8404831790e4809674f0249ef6505cd5}{print\_\-all} () const 
\end{DoxyCompactItemize}
\subsection*{Static Public メソッド}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classVCAllocator}{VCAllocator} $\ast$ \hyperlink{classVCAllocator_a745bd92fa44e4cfb30420743174c318d}{create\_\-vcallocator} (const string \&vcalloc\_\-model\_\-str\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-in\_\-port\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-out\_\-port\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-vclass\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-vchannel\_\-, const \hyperlink{classOrionConfig}{OrionConfig} $\ast$orion\_\-cfg\_\-ptr\_\-)
\end{DoxyCompactItemize}
\subsection*{Protected メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classVCAllocator_aecc1c32dc5dcfb2f4cb618d6f3a56c16}{VCAllocator} (\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-in\_\-port\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-out\_\-port\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-vclass\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-vchannel\_\-, const string \&arb\_\-model\_\-str\_\-, const string \&arb\_\-ff\_\-model\_\-str\_\-, const \hyperlink{classTechParameter}{TechParameter} $\ast$tech\_\-param\_\-ptr\_\-)
\item 
\hyperlink{classVCAllocator_a5b05efc72373929d96a89a3fd24feb6e}{VCAllocator} (\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-in\_\-port\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-out\_\-port\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-vclass\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-vchannel\_\-, const string \&local\_\-arb\_\-model\_\-str\_\-, const string \&local\_\-arb\_\-ff\_\-model\_\-str\_\-, const string \&global\_\-arb\_\-model\_\-str\_\-, const string \&global\_\-arb\_\-ff\_\-model\_\-str\_\-, const \hyperlink{classTechParameter}{TechParameter} $\ast$tech\_\-param\_\-ptr\_\-)
\item 
\hyperlink{classVCAllocator_a0b2080a0d054daf29949a238a93fe76e}{VCAllocator} (\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-in\_\-port\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-out\_\-port\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-vclass\_\-, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} num\_\-vchannel\_\-, const string \&vc\_\-select\_\-buf\_\-model\_\-str\_\-, const \hyperlink{classOrionConfig}{OrionConfig} $\ast$orion\_\-cfg\_\-ptr\_\-)
\end{DoxyCompactItemize}
\subsection*{Protected 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classVCAllocator_a3d177565c3d0e6810797e2aed095e676}{VAModel} \hyperlink{classVCAllocator_aed33459ed8901eb1f02e4f90785a655f}{m\_\-va\_\-model}
\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} \hyperlink{classVCAllocator_aac6d2a4ff86073212e8ef4ac53742ddc}{m\_\-num\_\-in\_\-port}
\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} \hyperlink{classVCAllocator_a56cb909217f28866d2a08a40adb3ef08}{m\_\-num\_\-out\_\-port}
\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} \hyperlink{classVCAllocator_ac6cc31c075b331538b0aaa0bb593b2e3}{m\_\-num\_\-vclass}
\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} \hyperlink{classVCAllocator_ac0b1d8a0523e7c7ce285c7917a764c9f}{m\_\-num\_\-vchannel}
\item 
\hyperlink{classArbiter}{Arbiter} $\ast$ \hyperlink{classVCAllocator_a3fec644111569687c929cb731f8b34b6}{m\_\-local\_\-arb\_\-ptr}
\item 
\hyperlink{classArbiter}{Arbiter} $\ast$ \hyperlink{classVCAllocator_a6d083f13327cb48999835d4710329be8}{m\_\-global\_\-arb\_\-ptr}
\item 
\hyperlink{classBuffer}{Buffer} $\ast$ \hyperlink{classVCAllocator_aebc14356cedcf94a99d5ec2d6cde741f}{m\_\-vc\_\-select\_\-ptr}
\end{DoxyCompactItemize}


\subsection{列挙型}
\hypertarget{classVCAllocator_a3d177565c3d0e6810797e2aed095e676}{
\index{VCAllocator@{VCAllocator}!VAModel@{VAModel}}
\index{VAModel@{VAModel}!VCAllocator@{VCAllocator}}
\subsubsection[{VAModel}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf VAModel}}}
\label{classVCAllocator_a3d177565c3d0e6810797e2aed095e676}
\begin{Desc}
\item[列挙型の値: ]\par
\begin{description}
\index{NO\_\-MODEL@{NO\_\-MODEL}!VCAllocator@{VCAllocator}}\index{VCAllocator@{VCAllocator}!NO\_\-MODEL@{NO\_\-MODEL}}\item[{\em 
\hypertarget{classVCAllocator_a3d177565c3d0e6810797e2aed095e676abab57b6e2c553e4d983f415a1f4ea75b}{
NO\_\-MODEL}
\label{classVCAllocator_a3d177565c3d0e6810797e2aed095e676abab57b6e2c553e4d983f415a1f4ea75b}
}]\index{ONE\_\-STAGE\_\-ARB@{ONE\_\-STAGE\_\-ARB}!VCAllocator@{VCAllocator}}\index{VCAllocator@{VCAllocator}!ONE\_\-STAGE\_\-ARB@{ONE\_\-STAGE\_\-ARB}}\item[{\em 
\hypertarget{classVCAllocator_a3d177565c3d0e6810797e2aed095e676a697b6845c1304ebbb56043d5762dcf4e}{
ONE\_\-STAGE\_\-ARB}
\label{classVCAllocator_a3d177565c3d0e6810797e2aed095e676a697b6845c1304ebbb56043d5762dcf4e}
}]\index{TWO\_\-STAGE\_\-ARB@{TWO\_\-STAGE\_\-ARB}!VCAllocator@{VCAllocator}}\index{VCAllocator@{VCAllocator}!TWO\_\-STAGE\_\-ARB@{TWO\_\-STAGE\_\-ARB}}\item[{\em 
\hypertarget{classVCAllocator_a3d177565c3d0e6810797e2aed095e676aaafb21d259c6e2b8097a333796168b25}{
TWO\_\-STAGE\_\-ARB}
\label{classVCAllocator_a3d177565c3d0e6810797e2aed095e676aaafb21d259c6e2b8097a333796168b25}
}]\index{VC\_\-SELECT@{VC\_\-SELECT}!VCAllocator@{VCAllocator}}\index{VCAllocator@{VCAllocator}!VC\_\-SELECT@{VC\_\-SELECT}}\item[{\em 
\hypertarget{classVCAllocator_a3d177565c3d0e6810797e2aed095e676a82c81de8a36cf3d4940817716356c671}{
VC\_\-SELECT}
\label{classVCAllocator_a3d177565c3d0e6810797e2aed095e676a82c81de8a36cf3d4940817716356c671}
}]\end{description}
\end{Desc}




\begin{DoxyCode}
50     {
51       NO_MODEL = 0,
52       ONE_STAGE_ARB,
53       TWO_STAGE_ARB,
54       VC_SELECT
55     };
\end{DoxyCode}


\subsection{コンストラクタとデストラクタ}
\hypertarget{classVCAllocator_a3c65801087ea345f2733a3742c59db1b}{
\index{VCAllocator@{VCAllocator}!$\sim$VCAllocator@{$\sim$VCAllocator}}
\index{$\sim$VCAllocator@{$\sim$VCAllocator}!VCAllocator@{VCAllocator}}
\subsubsection[{$\sim$VCAllocator}]{\setlength{\rightskip}{0pt plus 5cm}$\sim${\bf VCAllocator} ()}}
\label{classVCAllocator_a3c65801087ea345f2733a3742c59db1b}



\begin{DoxyCode}
144 {
145     delete m_local_arb_ptr;
146     delete m_global_arb_ptr;
147     delete m_vc_select_ptr;
148 }
\end{DoxyCode}
\hypertarget{classVCAllocator_aecc1c32dc5dcfb2f4cb618d6f3a56c16}{
\index{VCAllocator@{VCAllocator}!VCAllocator@{VCAllocator}}
\index{VCAllocator@{VCAllocator}!VCAllocator@{VCAllocator}}
\subsubsection[{VCAllocator}]{\setlength{\rightskip}{0pt plus 5cm}{\bf VCAllocator} ({\bf uint32\_\-t} {\em num\_\-in\_\-port\_\-}, \/  {\bf uint32\_\-t} {\em num\_\-out\_\-port\_\-}, \/  {\bf uint32\_\-t} {\em num\_\-vclass\_\-}, \/  {\bf uint32\_\-t} {\em num\_\-vchannel\_\-}, \/  const string \& {\em arb\_\-model\_\-str\_\-}, \/  const string \& {\em arb\_\-ff\_\-model\_\-str\_\-}, \/  const {\bf TechParameter} $\ast$ {\em tech\_\-param\_\-ptr\_\-})\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classVCAllocator_aecc1c32dc5dcfb2f4cb618d6f3a56c16}



\begin{DoxyCode}
57 {
58     assert(num_in_port_ == num_in_port_);
59     assert(num_out_port_ == num_out_port_);
60     assert(num_vclass_ == num_vclass_);
61     assert(num_vchannel_ == num_vchannel_);
62 
63     m_va_model = ONE_STAGE_ARB;
64     m_num_in_port = num_in_port_;
65     m_num_out_port = num_out_port_;
66     m_num_vclass = num_vclass_;
67     m_num_vchannel = num_vchannel_;
68 
69     m_local_arb_ptr = NULL;
70 
71     m_global_arb_ptr = Arbiter::create_arbiter(
72             arb_model_str_, arb_ff_model_str_,
73             (m_num_in_port-1)*m_num_vchannel, 0, tech_param_ptr_);
74 
75     m_vc_select_ptr = NULL;
76 }
\end{DoxyCode}
\hypertarget{classVCAllocator_a5b05efc72373929d96a89a3fd24feb6e}{
\index{VCAllocator@{VCAllocator}!VCAllocator@{VCAllocator}}
\index{VCAllocator@{VCAllocator}!VCAllocator@{VCAllocator}}
\subsubsection[{VCAllocator}]{\setlength{\rightskip}{0pt plus 5cm}{\bf VCAllocator} ({\bf uint32\_\-t} {\em num\_\-in\_\-port\_\-}, \/  {\bf uint32\_\-t} {\em num\_\-out\_\-port\_\-}, \/  {\bf uint32\_\-t} {\em num\_\-vclass\_\-}, \/  {\bf uint32\_\-t} {\em num\_\-vchannel\_\-}, \/  const string \& {\em local\_\-arb\_\-model\_\-str\_\-}, \/  const string \& {\em local\_\-arb\_\-ff\_\-model\_\-str\_\-}, \/  const string \& {\em global\_\-arb\_\-model\_\-str\_\-}, \/  const string \& {\em global\_\-arb\_\-ff\_\-model\_\-str\_\-}, \/  const {\bf TechParameter} $\ast$ {\em tech\_\-param\_\-ptr\_\-})\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classVCAllocator_a5b05efc72373929d96a89a3fd24feb6e}



\begin{DoxyCode}
89 {
90     assert(num_in_port_ == num_in_port_);
91     assert(num_out_port_ == num_out_port_);
92     assert(num_vclass_ == num_vclass_);
93     assert(num_vchannel_ == num_vchannel_);
94 
95     m_va_model = TWO_STAGE_ARB;
96     m_num_in_port = num_in_port_;
97     m_num_out_port = num_out_port_;
98     m_num_vclass = num_vclass_;
99     m_num_vchannel = num_vchannel_;
100 
101     // first stage
102     m_local_arb_ptr = Arbiter::create_arbiter(
103             local_arb_model_str_, local_arb_ff_model_str_,
104             m_num_vchannel, 0, tech_param_ptr_);
105 
106     // second stage
107     m_global_arb_ptr = Arbiter::create_arbiter(
108             global_arb_model_str_, global_arb_ff_model_str_,
109             (m_num_in_port-1)*m_num_vchannel, 0, tech_param_ptr_);
110 
111     m_vc_select_ptr = NULL;
112 }
\end{DoxyCode}
\hypertarget{classVCAllocator_a0b2080a0d054daf29949a238a93fe76e}{
\index{VCAllocator@{VCAllocator}!VCAllocator@{VCAllocator}}
\index{VCAllocator@{VCAllocator}!VCAllocator@{VCAllocator}}
\subsubsection[{VCAllocator}]{\setlength{\rightskip}{0pt plus 5cm}{\bf VCAllocator} ({\bf uint32\_\-t} {\em num\_\-in\_\-port\_\-}, \/  {\bf uint32\_\-t} {\em num\_\-out\_\-port\_\-}, \/  {\bf uint32\_\-t} {\em num\_\-vclass\_\-}, \/  {\bf uint32\_\-t} {\em num\_\-vchannel\_\-}, \/  const string \& {\em vc\_\-select\_\-buf\_\-model\_\-str\_\-}, \/  const {\bf OrionConfig} $\ast$ {\em orion\_\-cfg\_\-ptr\_\-})\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classVCAllocator_a0b2080a0d054daf29949a238a93fe76e}



\begin{DoxyCode}
122 {
123     assert(num_in_port_ == num_in_port_);
124     assert(num_out_port_ == num_out_port_);
125     assert(num_vclass_ == num_vclass_);
126     assert(num_vchannel_ == num_vchannel_);
127 
128     m_va_model = VC_SELECT;
129     m_num_in_port = num_in_port_;
130     m_num_out_port = num_out_port_;
131     m_num_vclass = num_vclass_;
132     m_num_vchannel = num_vchannel_;
133 
134     m_local_arb_ptr = NULL;
135     m_global_arb_ptr = NULL;
136 
137     uint32_t vc_select_buf_num_set = m_num_vchannel;
138     uint32_t vc_select_buf_line_width = (uint32_t)ceil(log2(m_num_vchannel));
139     m_vc_select_ptr = new Buffer(vc_select_buf_model_str_, true, false, 
140             vc_select_buf_num_set, vc_select_buf_line_width, 1, 1, orion_cfg_ptr_
      );
141 }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classVCAllocator_a745bd92fa44e4cfb30420743174c318d}{
\index{VCAllocator@{VCAllocator}!create\_\-vcallocator@{create\_\-vcallocator}}
\index{create\_\-vcallocator@{create\_\-vcallocator}!VCAllocator@{VCAllocator}}
\subsubsection[{create\_\-vcallocator}]{\setlength{\rightskip}{0pt plus 5cm}{\bf VCAllocator} $\ast$ create\_\-vcallocator (const string \& {\em vcalloc\_\-model\_\-str\_\-}, \/  {\bf uint32\_\-t} {\em num\_\-in\_\-port\_\-}, \/  {\bf uint32\_\-t} {\em num\_\-out\_\-port\_\-}, \/  {\bf uint32\_\-t} {\em num\_\-vclass\_\-}, \/  {\bf uint32\_\-t} {\em num\_\-vchannel\_\-}, \/  const {\bf OrionConfig} $\ast$ {\em orion\_\-cfg\_\-ptr\_\-})\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classVCAllocator_a745bd92fa44e4cfb30420743174c318d}



\begin{DoxyCode}
262 {
263     if (num_vchannel_ > 1)
264     {
265         if (vcalloc_model_str_ == string("ONE_STAGE_ARB"))
266         {
267             const string& arb_model_str = orion_cfg_ptr_->get<string>("VA_OUT_ARB
      _MODEL");
268             const string& arb_ff_model_str = orion_cfg_ptr_->get<string>("VA_OUT_
      ARB_FF_MODEL");
269             const TechParameter* tech_param_ptr = orion_cfg_ptr_->
      get_tech_param_ptr();
270             return new VCAllocator(num_in_port_, num_out_port_, num_vclass_, num_
      vchannel_, 
271                     arb_model_str, arb_ff_model_str, tech_param_ptr);
272         }
273         else if (vcalloc_model_str_ == string("TWO_STAGE_ARB"))
274         {
275             const string& local_arb_model_str = orion_cfg_ptr_->get<string>("VA_I
      N_ARB_MODEL");
276             const string& local_arb_ff_model_str = orion_cfg_ptr_->get<string>("V
      A_IN_ARB_FF_MODEL");
277             const string& global_arb_model_str = orion_cfg_ptr_->get<string>("VA_
      OUT_ARB_MODEL");
278             const string& global_arb_ff_model_str = orion_cfg_ptr_->get<string>("
      VA_OUT_ARB_FF_MODEL");
279             const TechParameter* tech_param_ptr = orion_cfg_ptr_->
      get_tech_param_ptr();
280             return new VCAllocator(num_in_port_, num_out_port_, num_vclass_, num_
      vchannel_, 
281                     local_arb_model_str, local_arb_ff_model_str, 
282                     global_arb_model_str, global_arb_ff_model_str,tech_param_ptr)
      ;
283         }
284         else if (vcalloc_model_str_ == string("VC_SELECT"))
285         {
286             const string& vc_select_buf_model_str = orion_cfg_ptr_->get<string>("
      VA_BUF_MODEL");
287             return new VCAllocator(num_in_port_, num_out_port_, num_vclass_, num_
      vchannel_,
288                     vc_select_buf_model_str, orion_cfg_ptr_);
289         }
290         else
291         {
292             cerr << "WARNING: No VC allocator model" << endl;
293             return (VCAllocator*)NULL;
294         }
295     }
296     else
297     {
298         // reduce to a register
299         return new VCAllocator(num_in_port_, num_out_port_, num_vclass_, 1,
300                 "REGISTER", orion_cfg_ptr_);
301     }
302 }
\end{DoxyCode}
\hypertarget{classVCAllocator_a3df740a0f60313b241b2570396aa8e75}{
\index{VCAllocator@{VCAllocator}!get\_\-dynamic\_\-energy\_\-global\_\-vc\_\-arb@{get\_\-dynamic\_\-energy\_\-global\_\-vc\_\-arb}}
\index{get\_\-dynamic\_\-energy\_\-global\_\-vc\_\-arb@{get\_\-dynamic\_\-energy\_\-global\_\-vc\_\-arb}!VCAllocator@{VCAllocator}}
\subsubsection[{get\_\-dynamic\_\-energy\_\-global\_\-vc\_\-arb}]{\setlength{\rightskip}{0pt plus 5cm}double get\_\-dynamic\_\-energy\_\-global\_\-vc\_\-arb (double {\em num\_\-req\_\-}, \/  bool {\em is\_\-max\_\-}) const}}
\label{classVCAllocator_a3df740a0f60313b241b2570396aa8e75}



\begin{DoxyCode}
167 {
168     double e_global_arb = 0;
169     switch(m_va_model)
170     {
171         case ONE_STAGE_ARB:
172         case TWO_STAGE_ARB:
173             e_global_arb = m_global_arb_ptr->calc_dynamic_energy(num_req_, is_max
      _);
174             break;
175         case VC_SELECT:
176         default:
177             e_global_arb = 0;
178     }
179     return e_global_arb;
180 }
\end{DoxyCode}
\hypertarget{classVCAllocator_aa89f985c9cd023b702cc81a72880abc9}{
\index{VCAllocator@{VCAllocator}!get\_\-dynamic\_\-energy\_\-local\_\-vc\_\-arb@{get\_\-dynamic\_\-energy\_\-local\_\-vc\_\-arb}}
\index{get\_\-dynamic\_\-energy\_\-local\_\-vc\_\-arb@{get\_\-dynamic\_\-energy\_\-local\_\-vc\_\-arb}!VCAllocator@{VCAllocator}}
\subsubsection[{get\_\-dynamic\_\-energy\_\-local\_\-vc\_\-arb}]{\setlength{\rightskip}{0pt plus 5cm}double get\_\-dynamic\_\-energy\_\-local\_\-vc\_\-arb (double {\em num\_\-req\_\-}, \/  bool {\em is\_\-max\_\-}) const}}
\label{classVCAllocator_aa89f985c9cd023b702cc81a72880abc9}



\begin{DoxyCode}
151 {
152     double e_local_arb = 0;
153     switch(m_va_model)
154     {
155         case TWO_STAGE_ARB:
156             e_local_arb = m_local_arb_ptr->calc_dynamic_energy(num_req_, is_max_)
      ;
157             break;
158         case ONE_STAGE_ARB:
159         case VC_SELECT:
160         default:
161             e_local_arb = 0;
162     }
163     return e_local_arb;
164 }
\end{DoxyCode}
\hypertarget{classVCAllocator_a6e17c2da843c6ed97d67718438367eb4}{
\index{VCAllocator@{VCAllocator}!get\_\-dynamic\_\-energy\_\-vc\_\-select@{get\_\-dynamic\_\-energy\_\-vc\_\-select}}
\index{get\_\-dynamic\_\-energy\_\-vc\_\-select@{get\_\-dynamic\_\-energy\_\-vc\_\-select}!VCAllocator@{VCAllocator}}
\subsubsection[{get\_\-dynamic\_\-energy\_\-vc\_\-select}]{\setlength{\rightskip}{0pt plus 5cm}double get\_\-dynamic\_\-energy\_\-vc\_\-select (bool {\em is\_\-read\_\-}, \/  bool {\em is\_\-max\_\-}) const}}
\label{classVCAllocator_a6e17c2da843c6ed97d67718438367eb4}



\begin{DoxyCode}
183 {
184     double e_vc_select = 0;
185     switch(m_va_model)
186     {
187         case VC_SELECT:
188             e_vc_select = m_vc_select_ptr->get_dynamic_energy(is_read_, is_max_);
      
189             break;
190         case ONE_STAGE_ARB:
191         case TWO_STAGE_ARB:
192         default:
193             e_vc_select = 0;
194     }
195     return e_vc_select;
196 }
\end{DoxyCode}
\hypertarget{classVCAllocator_aeb5933543cfdeb1668baed5ce7c68351}{
\index{VCAllocator@{VCAllocator}!get\_\-static\_\-power@{get\_\-static\_\-power}}
\index{get\_\-static\_\-power@{get\_\-static\_\-power}!VCAllocator@{VCAllocator}}
\subsubsection[{get\_\-static\_\-power}]{\setlength{\rightskip}{0pt plus 5cm}double get\_\-static\_\-power () const}}
\label{classVCAllocator_aeb5933543cfdeb1668baed5ce7c68351}



\begin{DoxyCode}
199 {
200     double p_va = 0;
201     switch(m_va_model)
202     {
203         case ONE_STAGE_ARB:
204             p_va = m_global_arb_ptr->get_static_power()*m_num_out_port*
      m_num_vclass*m_num_vchannel;
205             break;
206         case TWO_STAGE_ARB:
207             p_va += m_local_arb_ptr->get_static_power()*m_num_in_port*
      m_num_vclass*m_num_vchannel;
208             p_va += m_global_arb_ptr->get_static_power()*m_num_out_port*
      m_num_vclass*m_num_vchannel;
209             break;   
210         case VC_SELECT:
211             p_va = m_vc_select_ptr->get_static_power()*m_num_out_port*
      m_num_vclass;
212             break;
213         default:
214             cerr << "ERROR: Invalid VA model" << endl;
215             exit(1);
216     }
217     return p_va;
218 }
\end{DoxyCode}
\hypertarget{classVCAllocator_a8404831790e4809674f0249ef6505cd5}{
\index{VCAllocator@{VCAllocator}!print\_\-all@{print\_\-all}}
\index{print\_\-all@{print\_\-all}!VCAllocator@{VCAllocator}}
\subsubsection[{print\_\-all}]{\setlength{\rightskip}{0pt plus 5cm}void print\_\-all () const}}
\label{classVCAllocator_a8404831790e4809674f0249ef6505cd5}



\begin{DoxyCode}
221 {
222     switch(m_va_model)
223     {
224         case ONE_STAGE_ARB:
225             cout << "VCAllocator: ONE_STAGE_ARB" << endl;
226             for (uint32_t i = 0; i <  (m_num_in_port-1)*m_num_vchannel; i++)
227             {
228                 cout << "\t" << "Global arb (" << i << ") = " << 
      get_dynamic_energy_global_vc_arb(i, false) << endl;
229             }
230             break;
231         case TWO_STAGE_ARB:
232             cout << "VCAllocator: TWO_STAGE_ARB" << endl;
233             for (uint32_t i = 0; i < m_num_vchannel; i++)
234             {
235                 cout << "\t" << "Local arb (" << i << ") = " << 
      get_dynamic_energy_local_vc_arb(i, false) << endl;
236             }
237             for (uint32_t i = 0; i <  (m_num_in_port-1)*m_num_vchannel; i++)
238             {
239                 cout << "\t" << "Global arb (" << i << ") = " << 
      get_dynamic_energy_global_vc_arb(i, false) << endl;
240             }
241             break;
242         case VC_SELECT:
243             cout << "VCAllocator: VC_SELECT" << endl;
244             cout << "\t" << "Read = " << get_dynamic_energy_vc_select(true, false
      ) << endl;
245             cout << "\t" << "Write = " << get_dynamic_energy_vc_select(false, fal
      se) << endl;
246             break;
247         default:
248             ;
249     }
250     cout << "\t" << "Static power = " << get_static_power() << endl;
251     return;
252 }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classVCAllocator_a6d083f13327cb48999835d4710329be8}{
\index{VCAllocator@{VCAllocator}!m\_\-global\_\-arb\_\-ptr@{m\_\-global\_\-arb\_\-ptr}}
\index{m\_\-global\_\-arb\_\-ptr@{m\_\-global\_\-arb\_\-ptr}!VCAllocator@{VCAllocator}}
\subsubsection[{m\_\-global\_\-arb\_\-ptr}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Arbiter}$\ast$ {\bf m\_\-global\_\-arb\_\-ptr}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classVCAllocator_a6d083f13327cb48999835d4710329be8}
\hypertarget{classVCAllocator_a3fec644111569687c929cb731f8b34b6}{
\index{VCAllocator@{VCAllocator}!m\_\-local\_\-arb\_\-ptr@{m\_\-local\_\-arb\_\-ptr}}
\index{m\_\-local\_\-arb\_\-ptr@{m\_\-local\_\-arb\_\-ptr}!VCAllocator@{VCAllocator}}
\subsubsection[{m\_\-local\_\-arb\_\-ptr}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Arbiter}$\ast$ {\bf m\_\-local\_\-arb\_\-ptr}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classVCAllocator_a3fec644111569687c929cb731f8b34b6}
\hypertarget{classVCAllocator_aac6d2a4ff86073212e8ef4ac53742ddc}{
\index{VCAllocator@{VCAllocator}!m\_\-num\_\-in\_\-port@{m\_\-num\_\-in\_\-port}}
\index{m\_\-num\_\-in\_\-port@{m\_\-num\_\-in\_\-port}!VCAllocator@{VCAllocator}}
\subsubsection[{m\_\-num\_\-in\_\-port}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t} {\bf m\_\-num\_\-in\_\-port}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classVCAllocator_aac6d2a4ff86073212e8ef4ac53742ddc}
\hypertarget{classVCAllocator_a56cb909217f28866d2a08a40adb3ef08}{
\index{VCAllocator@{VCAllocator}!m\_\-num\_\-out\_\-port@{m\_\-num\_\-out\_\-port}}
\index{m\_\-num\_\-out\_\-port@{m\_\-num\_\-out\_\-port}!VCAllocator@{VCAllocator}}
\subsubsection[{m\_\-num\_\-out\_\-port}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t} {\bf m\_\-num\_\-out\_\-port}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classVCAllocator_a56cb909217f28866d2a08a40adb3ef08}
\hypertarget{classVCAllocator_ac0b1d8a0523e7c7ce285c7917a764c9f}{
\index{VCAllocator@{VCAllocator}!m\_\-num\_\-vchannel@{m\_\-num\_\-vchannel}}
\index{m\_\-num\_\-vchannel@{m\_\-num\_\-vchannel}!VCAllocator@{VCAllocator}}
\subsubsection[{m\_\-num\_\-vchannel}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t} {\bf m\_\-num\_\-vchannel}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classVCAllocator_ac0b1d8a0523e7c7ce285c7917a764c9f}
\hypertarget{classVCAllocator_ac6cc31c075b331538b0aaa0bb593b2e3}{
\index{VCAllocator@{VCAllocator}!m\_\-num\_\-vclass@{m\_\-num\_\-vclass}}
\index{m\_\-num\_\-vclass@{m\_\-num\_\-vclass}!VCAllocator@{VCAllocator}}
\subsubsection[{m\_\-num\_\-vclass}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t} {\bf m\_\-num\_\-vclass}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classVCAllocator_ac6cc31c075b331538b0aaa0bb593b2e3}
\hypertarget{classVCAllocator_aed33459ed8901eb1f02e4f90785a655f}{
\index{VCAllocator@{VCAllocator}!m\_\-va\_\-model@{m\_\-va\_\-model}}
\index{m\_\-va\_\-model@{m\_\-va\_\-model}!VCAllocator@{VCAllocator}}
\subsubsection[{m\_\-va\_\-model}]{\setlength{\rightskip}{0pt plus 5cm}{\bf VAModel} {\bf m\_\-va\_\-model}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classVCAllocator_aed33459ed8901eb1f02e4f90785a655f}
\hypertarget{classVCAllocator_aebc14356cedcf94a99d5ec2d6cde741f}{
\index{VCAllocator@{VCAllocator}!m\_\-vc\_\-select\_\-ptr@{m\_\-vc\_\-select\_\-ptr}}
\index{m\_\-vc\_\-select\_\-ptr@{m\_\-vc\_\-select\_\-ptr}!VCAllocator@{VCAllocator}}
\subsubsection[{m\_\-vc\_\-select\_\-ptr}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Buffer}$\ast$ {\bf m\_\-vc\_\-select\_\-ptr}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classVCAllocator_aebc14356cedcf94a99d5ec2d6cde741f}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
mem/ruby/network/orion/Allocator/\hyperlink{VCAllocator_8hh}{VCAllocator.hh}\item 
mem/ruby/network/orion/Allocator/\hyperlink{VCAllocator_8cc}{VCAllocator.cc}\end{DoxyCompactItemize}
