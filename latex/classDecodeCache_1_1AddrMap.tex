\hypertarget{classDecodeCache_1_1AddrMap}{
\section{クラス テンプレート AddrMap$<$ Value $>$}
\label{classDecodeCache_1_1AddrMap}\index{DecodeCache::AddrMap@{DecodeCache::AddrMap}}
}


A sparse map from an Addr to a Value, stored in page chunks.  


{\ttfamily \#include $<$decode\_\-cache.hh$>$}\subsection*{構成}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structDecodeCache_1_1AddrMap_1_1CachePage}{CachePage}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classDecodeCache_1_1AddrMap_a3214943b0a8ea1081d074586e075edde}{AddrMap} ()
\begin{DoxyCompactList}\small\item\em Constructor. \item\end{DoxyCompactList}\item 
Value \& \hyperlink{classDecodeCache_1_1AddrMap_a758c7479d2ee5aa3d4f1e7584d30379a}{lookup} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} addr)
\end{DoxyCompactItemize}
\subsection*{Protected 型}
\begin{DoxyCompactItemize}
\item 
typedef m5::hash\_\-map$<$ \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr}, \hyperlink{structDecodeCache_1_1AddrMap_1_1CachePage}{CachePage} $\ast$ $>$ \hyperlink{classDecodeCache_1_1AddrMap_a975f1d72d35f5fb84de6f419b04bf347}{PageMap}
\item 
typedef PageMap::iterator \hyperlink{classDecodeCache_1_1AddrMap_af0021638c8ab5f47787c8c1973a125b8}{PageIt}
\end{DoxyCompactItemize}
\subsection*{Protected メソッド}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classDecodeCache_1_1AddrMap_a64083eea3dfcfac02ed16f18d154f852}{update} (\hyperlink{classDecodeCache_1_1AddrMap_af0021638c8ab5f47787c8c1973a125b8}{PageIt} recentest)
\item 
\hyperlink{structDecodeCache_1_1AddrMap_1_1CachePage}{CachePage} $\ast$ \hyperlink{classDecodeCache_1_1AddrMap_a5eb5de403aecd89f1133b26ad171f51c}{getPage} (\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} addr)
\end{DoxyCompactItemize}
\subsection*{Protected 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classDecodeCache_1_1AddrMap_af0021638c8ab5f47787c8c1973a125b8}{PageIt} \hyperlink{classDecodeCache_1_1AddrMap_ad803f96f3c59c58b1bcf96eb322bec9e}{recent} \mbox{[}2\mbox{]}
\item 
\hyperlink{classDecodeCache_1_1AddrMap_a975f1d72d35f5fb84de6f419b04bf347}{PageMap} \hyperlink{classDecodeCache_1_1AddrMap_a4bcb45c0276447d77068a80d6def657d}{pageMap}
\end{DoxyCompactItemize}


\subsection{説明}
\subsubsection*{template$<$class Value$>$ class DecodeCache::AddrMap$<$ Value $>$}

A sparse map from an Addr to a Value, stored in page chunks. 

\subsection{型定義}
\hypertarget{classDecodeCache_1_1AddrMap_af0021638c8ab5f47787c8c1973a125b8}{
\index{DecodeCache::AddrMap@{DecodeCache::AddrMap}!PageIt@{PageIt}}
\index{PageIt@{PageIt}!DecodeCache::AddrMap@{DecodeCache::AddrMap}}
\subsubsection[{PageIt}]{\setlength{\rightskip}{0pt plus 5cm}typedef PageMap::iterator {\bf PageIt}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classDecodeCache_1_1AddrMap_af0021638c8ab5f47787c8c1973a125b8}
\hypertarget{classDecodeCache_1_1AddrMap_a975f1d72d35f5fb84de6f419b04bf347}{
\index{DecodeCache::AddrMap@{DecodeCache::AddrMap}!PageMap@{PageMap}}
\index{PageMap@{PageMap}!DecodeCache::AddrMap@{DecodeCache::AddrMap}}
\subsubsection[{PageMap}]{\setlength{\rightskip}{0pt plus 5cm}typedef m5::hash\_\-map$<${\bf Addr}, {\bf CachePage} $\ast$$>$ {\bf PageMap}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classDecodeCache_1_1AddrMap_a975f1d72d35f5fb84de6f419b04bf347}


\subsection{コンストラクタとデストラクタ}
\hypertarget{classDecodeCache_1_1AddrMap_a3214943b0a8ea1081d074586e075edde}{
\index{DecodeCache::AddrMap@{DecodeCache::AddrMap}!AddrMap@{AddrMap}}
\index{AddrMap@{AddrMap}!DecodeCache::AddrMap@{DecodeCache::AddrMap}}
\subsubsection[{AddrMap}]{\setlength{\rightskip}{0pt plus 5cm}{\bf AddrMap} ()\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classDecodeCache_1_1AddrMap_a3214943b0a8ea1081d074586e075edde}


Constructor. 


\begin{DoxyCode}
115     {
116         recent[0] = recent[1] = pageMap.end();
117     }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classDecodeCache_1_1AddrMap_a5eb5de403aecd89f1133b26ad171f51c}{
\index{DecodeCache::AddrMap@{DecodeCache::AddrMap}!getPage@{getPage}}
\index{getPage@{getPage}!DecodeCache::AddrMap@{DecodeCache::AddrMap}}
\subsubsection[{getPage}]{\setlength{\rightskip}{0pt plus 5cm}{\bf CachePage}$\ast$ getPage ({\bf Addr} {\em addr})\hspace{0.3cm}{\ttfamily  \mbox{[}inline, protected\mbox{]}}}}
\label{classDecodeCache_1_1AddrMap_a5eb5de403aecd89f1133b26ad171f51c}
Attempt to find the CacheePage which goes with a particular address. First check the small cache of recent results, then actually look in the hash\_\-map. 
\begin{DoxyParams}{引数}
\item[{\em addr}]The address to look up. \end{DoxyParams}



\begin{DoxyCode}
82     {
83         Addr page_addr = addr & ~(TheISA::PageBytes - 1);
84 
85         // Check against recent lookups.
86         if (recent[0] != pageMap.end()) {
87             if (recent[0]->first == page_addr)
88                 return recent[0]->second;
89             if (recent[1] != pageMap.end() &&
90                     recent[1]->first == page_addr) {
91                 update(recent[1]);
92                 // recent[1] has just become recent[0].
93                 return recent[0]->second;
94             }
95         }
96 
97         // Actually look in the has_map.
98         PageIt it = pageMap.find(page_addr);
99         if (it != pageMap.end()) {
100             update(it);
101             return it->second;
102         }
103 
104         // Didn't find an existing page, so add a new one.
105         CachePage *newPage = new CachePage;
106         page_addr = page_addr & ~(TheISA::PageBytes - 1);
107         typename PageMap::value_type to_insert(page_addr, newPage);
108         update(pageMap.insert(to_insert).first);
109         return newPage;
110     }
\end{DoxyCode}
\hypertarget{classDecodeCache_1_1AddrMap_a758c7479d2ee5aa3d4f1e7584d30379a}{
\index{DecodeCache::AddrMap@{DecodeCache::AddrMap}!lookup@{lookup}}
\index{lookup@{lookup}!DecodeCache::AddrMap@{DecodeCache::AddrMap}}
\subsubsection[{lookup}]{\setlength{\rightskip}{0pt plus 5cm}Value\& lookup ({\bf Addr} {\em addr})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classDecodeCache_1_1AddrMap_a758c7479d2ee5aa3d4f1e7584d30379a}



\begin{DoxyCode}
121     {
122         CachePage *page = getPage(addr);
123         return page->items[addr & (TheISA::PageBytes - 1)];
124     }
\end{DoxyCode}
\hypertarget{classDecodeCache_1_1AddrMap_a64083eea3dfcfac02ed16f18d154f852}{
\index{DecodeCache::AddrMap@{DecodeCache::AddrMap}!update@{update}}
\index{update@{update}!DecodeCache::AddrMap@{DecodeCache::AddrMap}}
\subsubsection[{update}]{\setlength{\rightskip}{0pt plus 5cm}void update ({\bf PageIt} {\em recentest})\hspace{0.3cm}{\ttfamily  \mbox{[}inline, protected\mbox{]}}}}
\label{classDecodeCache_1_1AddrMap_a64083eea3dfcfac02ed16f18d154f852}
Update the mini cache of recent lookups. 
\begin{DoxyParams}{引数}
\item[{\em recentest}]The most recent result; \end{DoxyParams}



\begin{DoxyCode}
71     {
72         recent[1] = recent[0];
73         recent[0] = recentest;
74     }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classDecodeCache_1_1AddrMap_a4bcb45c0276447d77068a80d6def657d}{
\index{DecodeCache::AddrMap@{DecodeCache::AddrMap}!pageMap@{pageMap}}
\index{pageMap@{pageMap}!DecodeCache::AddrMap@{DecodeCache::AddrMap}}
\subsubsection[{pageMap}]{\setlength{\rightskip}{0pt plus 5cm}{\bf PageMap} {\bf pageMap}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classDecodeCache_1_1AddrMap_a4bcb45c0276447d77068a80d6def657d}
\hypertarget{classDecodeCache_1_1AddrMap_ad803f96f3c59c58b1bcf96eb322bec9e}{
\index{DecodeCache::AddrMap@{DecodeCache::AddrMap}!recent@{recent}}
\index{recent@{recent}!DecodeCache::AddrMap@{DecodeCache::AddrMap}}
\subsubsection[{recent}]{\setlength{\rightskip}{0pt plus 5cm}{\bf PageIt} {\bf recent}\mbox{[}2\mbox{]}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classDecodeCache_1_1AddrMap_ad803f96f3c59c58b1bcf96eb322bec9e}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
cpu/\hyperlink{cpu_2decode__cache_8hh}{decode\_\-cache.hh}\end{DoxyCompactItemize}
