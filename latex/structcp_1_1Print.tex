\hypertarget{structcp_1_1Print}{
\section{構造体 Print}
\label{structcp_1_1Print}\index{cp::Print@{cp::Print}}
}


{\ttfamily \#include $<$cprintf.hh$>$}\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{structcp_1_1Print_a259002c581889b88e75dd96c5d20e3f9}{Print} (std::ostream \&\hyperlink{structcp_1_1Print_aeacb68b8c7e9ae9b97ab9c6ab41940cb}{stream}, const std::string \&\hyperlink{structcp_1_1Print_a6bd2bb5fcc7628a640958994a22f997c}{format})
\item 
\hyperlink{structcp_1_1Print_a1921a2904d61acd5e33435e425be63ae}{Print} (std::ostream \&\hyperlink{structcp_1_1Print_aeacb68b8c7e9ae9b97ab9c6ab41940cb}{stream}, const char $\ast$\hyperlink{structcp_1_1Print_a6bd2bb5fcc7628a640958994a22f997c}{format})
\item 
\hyperlink{structcp_1_1Print_a01f5243d7613ac5562749ebddfdeae13}{$\sim$Print} ()
\item 
int \hyperlink{structcp_1_1Print_a7ff779b170c64fe8385baa7cd803a40b}{get\_\-number} (int data)
\item 
{\footnotesize template$<$typename T $>$ }\\int \hyperlink{structcp_1_1Print_ae054da72c78b75437feddec4c6ad9f3d}{get\_\-number} (const T \&data)
\item 
{\footnotesize template$<$typename T $>$ }\\void \hyperlink{structcp_1_1Print_a1b90bbb1a9c690bf6a6688f386a20b99}{add\_\-arg} (const T \&data)
\item 
void \hyperlink{structcp_1_1Print_a0ae4493963eb6565c9bba273103eebef}{end\_\-args} ()
\end{DoxyCompactItemize}
\subsection*{Protected メソッド}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{structcp_1_1Print_a2e9c5136d19b1a95fc427e0852deab5c}{process} ()
\item 
void \hyperlink{structcp_1_1Print_a1e5dfe5d2bf85ee51a28043a5eb50d91}{process\_\-flag} ()
\end{DoxyCompactItemize}
\subsection*{Protected 変数}
\begin{DoxyCompactItemize}
\item 
std::ostream \& \hyperlink{structcp_1_1Print_aeacb68b8c7e9ae9b97ab9c6ab41940cb}{stream}
\item 
const char $\ast$ \hyperlink{structcp_1_1Print_a6bd2bb5fcc7628a640958994a22f997c}{format}
\item 
const char $\ast$ \hyperlink{structcp_1_1Print_a35de73b2bf3f7b4e96f38f4c7ff85b26}{ptr}
\item 
bool \hyperlink{structcp_1_1Print_a3f7d640f7eaaa11a888cb98ec1816e28}{cont}
\item 
std::ios::fmtflags \hyperlink{structcp_1_1Print_ab596cd0773ceeffee59a2988768c7fb0}{saved\_\-flags}
\item 
char \hyperlink{structcp_1_1Print_a5fbcf9cf4d309f66f61f423eb2edc2f3}{saved\_\-fill}
\item 
int \hyperlink{structcp_1_1Print_ace88513f3f4c11ac821a4ec110ecdfc4}{saved\_\-precision}
\item 
\hyperlink{structcp_1_1Format}{Format} \hyperlink{structcp_1_1Print_afdcbc01123b620b7cef57d09f7c8187a}{fmt}
\end{DoxyCompactItemize}


\subsection{コンストラクタとデストラクタ}
\hypertarget{structcp_1_1Print_a259002c581889b88e75dd96c5d20e3f9}{
\index{cp::Print@{cp::Print}!Print@{Print}}
\index{Print@{Print}!cp::Print@{cp::Print}}
\subsubsection[{Print}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Print} (std::ostream \& {\em stream}, \/  const std::string \& {\em format})}}
\label{structcp_1_1Print_a259002c581889b88e75dd96c5d20e3f9}



\begin{DoxyCode}
43     : stream(stream), format(format.c_str()), ptr(format.c_str()), cont(false)
44 {
45     saved_flags = stream.flags();
46     saved_fill = stream.fill();
47     saved_precision = stream.precision();
48 }
\end{DoxyCode}
\hypertarget{structcp_1_1Print_a1921a2904d61acd5e33435e425be63ae}{
\index{cp::Print@{cp::Print}!Print@{Print}}
\index{Print@{Print}!cp::Print@{cp::Print}}
\subsubsection[{Print}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Print} (std::ostream \& {\em stream}, \/  const char $\ast$ {\em format})}}
\label{structcp_1_1Print_a1921a2904d61acd5e33435e425be63ae}



\begin{DoxyCode}
51     : stream(stream), format(format), ptr(format), cont(false)
52 {
53     saved_flags = stream.flags();
54     saved_fill = stream.fill();
55     saved_precision = stream.precision();
56 }
\end{DoxyCode}
\hypertarget{structcp_1_1Print_a01f5243d7613ac5562749ebddfdeae13}{
\index{cp::Print@{cp::Print}!$\sim$Print@{$\sim$Print}}
\index{$\sim$Print@{$\sim$Print}!cp::Print@{cp::Print}}
\subsubsection[{$\sim$Print}]{\setlength{\rightskip}{0pt plus 5cm}$\sim${\bf Print} ()}}
\label{structcp_1_1Print_a01f5243d7613ac5562749ebddfdeae13}



\begin{DoxyCode}
59 {
60 }
\end{DoxyCode}


\subsection{関数}
\hypertarget{structcp_1_1Print_a1b90bbb1a9c690bf6a6688f386a20b99}{
\index{cp::Print@{cp::Print}!add\_\-arg@{add\_\-arg}}
\index{add\_\-arg@{add\_\-arg}!cp::Print@{cp::Print}}
\subsubsection[{add\_\-arg}]{\setlength{\rightskip}{0pt plus 5cm}void add\_\-arg (const T \& {\em data})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{structcp_1_1Print_a1b90bbb1a9c690bf6a6688f386a20b99}



\begin{DoxyCode}
85     {
86         if (!cont)
87             process();
88 
89         if (fmt.get_width) {
90             fmt.get_width = false;
91             cont = true;
92             fmt.width = get_number(data);
93             return;
94         }
95             
96         if (fmt.get_precision) {
97             fmt.get_precision = false;
98             cont = true;
99             fmt.precision = get_number(data);
100             return;
101         }
102 
103         switch (fmt.format) {
104           case Format::character:
105             format_char(stream, data, fmt);
106             break;
107 
108           case Format::integer:
109             format_integer(stream, data, fmt);
110             break;
111 
112           case Format::floating:
113             format_float(stream, data, fmt);
114             break;
115 
116           case Format::string:
117             format_string(stream, data, fmt);
118             break;
119 
120           default:
121             stream << "<bad format>";
122             break;
123         }
124     }
\end{DoxyCode}
\hypertarget{structcp_1_1Print_a0ae4493963eb6565c9bba273103eebef}{
\index{cp::Print@{cp::Print}!end\_\-args@{end\_\-args}}
\index{end\_\-args@{end\_\-args}!cp::Print@{cp::Print}}
\subsubsection[{end\_\-args}]{\setlength{\rightskip}{0pt plus 5cm}void end\_\-args ()}}
\label{structcp_1_1Print_a0ae4493963eb6565c9bba273103eebef}



\begin{DoxyCode}
273 {
274     size_t len;
275 
276     while (*ptr) {
277         switch (*ptr) {
278           case '%':
279             if (ptr[1] != '%')
280                 stream << "<extra arg>";
281 
282             stream.put('%');
283             ptr += 2;
284             break;
285 
286           case '\n':
287             stream << endl;
288             ++ptr;
289             break;
290           case '\r':
291             ++ptr;
292             if (*ptr != '\n')
293                 stream << endl;
294             break;
295 
296           default:
297             len = strcspn(ptr, "%\n\r\0");
298             stream.write(ptr, len);
299             ptr += len;
300             break;
301         }
302     }
303 
304     stream.flags(saved_flags);
305     stream.fill(saved_fill);
306     stream.precision(saved_precision);
307 }
\end{DoxyCode}
\hypertarget{structcp_1_1Print_ae054da72c78b75437feddec4c6ad9f3d}{
\index{cp::Print@{cp::Print}!get\_\-number@{get\_\-number}}
\index{get\_\-number@{get\_\-number}!cp::Print@{cp::Print}}
\subsubsection[{get\_\-number}]{\setlength{\rightskip}{0pt plus 5cm}int get\_\-number (const T \& {\em data})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{structcp_1_1Print_ae054da72c78b75437feddec4c6ad9f3d}



\begin{DoxyCode}
78     {
79         return 0;
80     }
\end{DoxyCode}
\hypertarget{structcp_1_1Print_a7ff779b170c64fe8385baa7cd803a40b}{
\index{cp::Print@{cp::Print}!get\_\-number@{get\_\-number}}
\index{get\_\-number@{get\_\-number}!cp::Print@{cp::Print}}
\subsubsection[{get\_\-number}]{\setlength{\rightskip}{0pt plus 5cm}int get\_\-number (int {\em data})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{structcp_1_1Print_a7ff779b170c64fe8385baa7cd803a40b}



\begin{DoxyCode}
71     {
72         return data;
73     }
\end{DoxyCode}
\hypertarget{structcp_1_1Print_a2e9c5136d19b1a95fc427e0852deab5c}{
\index{cp::Print@{cp::Print}!process@{process}}
\index{process@{process}!cp::Print@{cp::Print}}
\subsubsection[{process}]{\setlength{\rightskip}{0pt plus 5cm}void process ()\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{structcp_1_1Print_a2e9c5136d19b1a95fc427e0852deab5c}



\begin{DoxyCode}
64 {
65     fmt.clear();
66 
67     size_t len;
68 
69     while (*ptr) {
70         switch (*ptr) {
71           case '%':
72             if (ptr[1] != '%') {
73                 process_flag();
74                 return;
75             }
76             stream.put('%');
77             ptr += 2;
78             break;
79 
80           case '\n':
81             stream << endl;
82             ++ptr;
83             break;
84           case '\r':
85             ++ptr;
86             if (*ptr != '\n')
87                 stream << endl;
88             break;
89 
90           default:
91             len = strcspn(ptr, "%\n\r\0");
92             stream.write(ptr, len);
93             ptr += len;
94             break;
95         }
96     }
97 }
\end{DoxyCode}
\hypertarget{structcp_1_1Print_a1e5dfe5d2bf85ee51a28043a5eb50d91}{
\index{cp::Print@{cp::Print}!process\_\-flag@{process\_\-flag}}
\index{process\_\-flag@{process\_\-flag}!cp::Print@{cp::Print}}
\subsubsection[{process\_\-flag}]{\setlength{\rightskip}{0pt plus 5cm}void process\_\-flag ()\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{structcp_1_1Print_a1e5dfe5d2bf85ee51a28043a5eb50d91}



\begin{DoxyCode}
101 {
102     bool done = false;
103     bool end_number = false;
104     bool have_precision = false;
105     int number = 0;
106 
107     stream.fill(' ');
108     stream.flags((ios::fmtflags)0);
109 
110     while (!done) {
111         ++ptr;
112         if (*ptr >= '0' && *ptr <= '9') {
113             if (end_number)
114                 continue;
115         } else if (number > 0)
116             end_number = true;
117 
118         switch (*ptr) {
119           case 's':
120             fmt.format = Format::string;
121             done = true;
122             break;
123 
124           case 'c':
125             fmt.format = Format::character;
126             done = true;
127             break;
128 
129           case 'l':
130             continue;
131 
132           case 'p':
133             fmt.format = Format::integer;
134             fmt.base = Format::hex;
135             fmt.alternate_form = true;
136             done = true;
137             break;
138 
139           case 'X':
140             fmt.uppercase = true;
141           case 'x':
142             fmt.base = Format::hex;
143             fmt.format = Format::integer;
144             done = true;
145             break;
146 
147           case 'o':
148             fmt.base = Format::oct;
149             fmt.format = Format::integer;
150             done = true;
151             break;
152 
153           case 'd':
154           case 'i':
155           case 'u':
156             fmt.format = Format::integer;
157             done = true;
158             break;
159 
160           case 'G':
161             fmt.uppercase = true;
162           case 'g':
163             fmt.format = Format::floating;
164             fmt.float_format = Format::best;
165             done = true;
166             break;
167 
168           case 'E':
169             fmt.uppercase = true;
170           case 'e':
171             fmt.format = Format::floating;
172             fmt.float_format = Format::scientific;
173             done = true;
174             break;
175 
176           case 'f':
177             fmt.format = Format::floating;
178             fmt.float_format = Format::fixed;
179             done = true;
180             break;
181 
182           case 'n':
183             stream << "we don't do %n!!!\n";
184             done = true;
185             break;
186 
187           case '#':
188             fmt.alternate_form = true;
189             break;
190 
191           case '-':
192             fmt.flush_left = true;
193             break;
194 
195           case '+':
196             fmt.print_sign = true;
197             break;
198 
199           case ' ':
200             fmt.blank_space = true;
201             break;
202 
203           case '.':
204             fmt.width = number;
205             fmt.precision = 0;
206             have_precision = true;
207             number = 0;
208             end_number = false;
209             break;
210 
211           case '0':
212             if (number == 0) {
213                 fmt.fill_zero = true;
214                 break;
215             }
216           case '1':
217           case '2':
218           case '3':
219           case '4':
220           case '5':
221           case '6':
222           case '7':
223           case '8':
224           case '9':
225             number = number * 10 + (*ptr - '0');
226             break;
227 
228           case '*':
229             if (have_precision)
230                 fmt.get_precision = true;
231             else
232                 fmt.get_width = true;
233             break;
234 
235           case '%':
236             assert(false && "we shouldn't get here");
237             break;
238 
239           default:
240             done = true;
241             break;
242         }
243 
244         if (end_number) {
245             if (have_precision)
246                 fmt.precision = number;
247             else
248                 fmt.width = number;
249 
250             end_number = false;
251             number = 0;
252         }
253 
254         if (done) {
255             if ((fmt.format == Format::integer) && have_precision) {
256                 // specified a . but not a float, set width
257                 fmt.width = fmt.precision;
258                 // precision requries digits for width, must fill with 0
259                 fmt.fill_zero = true;
260             } else if ((fmt.format == Format::floating) && !have_precision &&
261                         fmt.fill_zero) {
262                 // ambiguous case, matching printf
263                 fmt.precision = fmt.width;
264             }
265         }
266     } // end while
267 
268     ++ptr;
269 }
\end{DoxyCode}


\subsection{変数}
\hypertarget{structcp_1_1Print_a3f7d640f7eaaa11a888cb98ec1816e28}{
\index{cp::Print@{cp::Print}!cont@{cont}}
\index{cont@{cont}!cp::Print@{cp::Print}}
\subsubsection[{cont}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf cont}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{structcp_1_1Print_a3f7d640f7eaaa11a888cb98ec1816e28}
\hypertarget{structcp_1_1Print_afdcbc01123b620b7cef57d09f7c8187a}{
\index{cp::Print@{cp::Print}!fmt@{fmt}}
\index{fmt@{fmt}!cp::Print@{cp::Print}}
\subsubsection[{fmt}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Format} {\bf fmt}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{structcp_1_1Print_afdcbc01123b620b7cef57d09f7c8187a}
\hypertarget{structcp_1_1Print_a6bd2bb5fcc7628a640958994a22f997c}{
\index{cp::Print@{cp::Print}!format@{format}}
\index{format@{format}!cp::Print@{cp::Print}}
\subsubsection[{format}]{\setlength{\rightskip}{0pt plus 5cm}const char$\ast$ {\bf format}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{structcp_1_1Print_a6bd2bb5fcc7628a640958994a22f997c}
\hypertarget{structcp_1_1Print_a35de73b2bf3f7b4e96f38f4c7ff85b26}{
\index{cp::Print@{cp::Print}!ptr@{ptr}}
\index{ptr@{ptr}!cp::Print@{cp::Print}}
\subsubsection[{ptr}]{\setlength{\rightskip}{0pt plus 5cm}const char$\ast$ {\bf ptr}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{structcp_1_1Print_a35de73b2bf3f7b4e96f38f4c7ff85b26}
\hypertarget{structcp_1_1Print_a5fbcf9cf4d309f66f61f423eb2edc2f3}{
\index{cp::Print@{cp::Print}!saved\_\-fill@{saved\_\-fill}}
\index{saved\_\-fill@{saved\_\-fill}!cp::Print@{cp::Print}}
\subsubsection[{saved\_\-fill}]{\setlength{\rightskip}{0pt plus 5cm}char {\bf saved\_\-fill}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{structcp_1_1Print_a5fbcf9cf4d309f66f61f423eb2edc2f3}
\hypertarget{structcp_1_1Print_ab596cd0773ceeffee59a2988768c7fb0}{
\index{cp::Print@{cp::Print}!saved\_\-flags@{saved\_\-flags}}
\index{saved\_\-flags@{saved\_\-flags}!cp::Print@{cp::Print}}
\subsubsection[{saved\_\-flags}]{\setlength{\rightskip}{0pt plus 5cm}std::ios::fmtflags {\bf saved\_\-flags}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{structcp_1_1Print_ab596cd0773ceeffee59a2988768c7fb0}
\hypertarget{structcp_1_1Print_ace88513f3f4c11ac821a4ec110ecdfc4}{
\index{cp::Print@{cp::Print}!saved\_\-precision@{saved\_\-precision}}
\index{saved\_\-precision@{saved\_\-precision}!cp::Print@{cp::Print}}
\subsubsection[{saved\_\-precision}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf saved\_\-precision}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{structcp_1_1Print_ace88513f3f4c11ac821a4ec110ecdfc4}
\hypertarget{structcp_1_1Print_aeacb68b8c7e9ae9b97ab9c6ab41940cb}{
\index{cp::Print@{cp::Print}!stream@{stream}}
\index{stream@{stream}!cp::Print@{cp::Print}}
\subsubsection[{stream}]{\setlength{\rightskip}{0pt plus 5cm}std::ostream\& {\bf stream}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{structcp_1_1Print_aeacb68b8c7e9ae9b97ab9c6ab41940cb}


この構造体の説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
base/\hyperlink{cprintf_8hh}{cprintf.hh}\item 
base/\hyperlink{cprintf_8cc}{cprintf.cc}\end{DoxyCompactItemize}
