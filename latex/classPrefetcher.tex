\hypertarget{classPrefetcher}{
\section{クラス Prefetcher}
\label{classPrefetcher}\index{Prefetcher@{Prefetcher}}
}


{\ttfamily \#include $<$Prefetcher.hh$>$}Prefetcherに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3cm]{classPrefetcher}
\end{center}
\end{figure}
\subsection*{Public 型}
\begin{DoxyCompactItemize}
\item 
typedef PrefetcherParams \hyperlink{classPrefetcher_aa178e3582d29b08c028c11634875499c}{Params}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classPrefetcher_a103945d22642f41049b79540b7b03773}{Prefetcher} (const \hyperlink{classPrefetcher_aa178e3582d29b08c028c11634875499c}{Params} $\ast$p)
\item 
\hyperlink{classPrefetcher_a7b071405fe38f9da007866b7510e773c}{$\sim$Prefetcher} ()
\item 
void \hyperlink{classPrefetcher_a837cf1d68756e156957f5d7c36d5da7e}{issueNextPrefetch} (const \hyperlink{classAddress}{Address} \&address, \hyperlink{classPrefetchEntry}{PrefetchEntry} $\ast$stream)
\item 
void \hyperlink{classPrefetcher_ad42b59b907f12b2820fda827538f272f}{observePfHit} (const \hyperlink{classAddress}{Address} \&address)
\item 
void \hyperlink{classPrefetcher_a54bad4fe990aa1c8c9e3910c7c972089}{observePfMiss} (const \hyperlink{classAddress}{Address} \&address)
\item 
void \hyperlink{classPrefetcher_a0aeb99b55e0ebe2fe1ebc894a1f08ebc}{observeMiss} (const \hyperlink{classAddress}{Address} \&address, const RubyRequestType \&type)
\item 
void \hyperlink{classPrefetcher_ac55fe386a101fbae38c716067c9966a0}{print} (std::ostream \&out) const 
\item 
void \hyperlink{classPrefetcher_ad1772ea493bb64a517a46484972c9efc}{setController} (\hyperlink{classAbstractController}{AbstractController} $\ast$\_\-ctrl)
\item 
void \hyperlink{classPrefetcher_a4dc637449366fcdfc4e764cdf12d9b11}{regStats} ()
\end{DoxyCompactItemize}
\subsection*{Private メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} \hyperlink{classPrefetcher_ae2a3897ee6d47f9e162f17bea5f21a11}{getLRUindex} (void)
\item 
void \hyperlink{classPrefetcher_a6bd67ad0a5fd462f191abb16d3c6bfa8}{clearNonunitEntry} (\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} index)
\begin{DoxyCompactList}\small\item\em clear a non-\/unit stride prefetcher entry \item\end{DoxyCompactList}\item 
void \hyperlink{classPrefetcher_a5125f46f95961714c0ebdf658b6bb745}{initializeStream} (const \hyperlink{classAddress}{Address} \&address, int stride, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} index, const RubyRequestType \&type)
\begin{DoxyCompactList}\small\item\em allocate a new stream buffer at a specific index \item\end{DoxyCompactList}\item 
\hyperlink{classPrefetchEntry}{PrefetchEntry} $\ast$ \hyperlink{classPrefetcher_a9d6cbff2a87bd34af85710cae48c6077}{getPrefetchEntry} (const \hyperlink{classAddress}{Address} \&address, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} \&index)
\item 
bool \hyperlink{classPrefetcher_ab7279136d42cc2cc34787356c5dc6f67}{accessUnitFilter} (\hyperlink{classstd_1_1vector}{std::vector}$<$ \hyperlink{classAddress}{Address} $>$ \&filter\_\-table, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} $\ast$hit\_\-table, \hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} \&index, const \hyperlink{classAddress}{Address} \&address, int stride, bool \&alloc)
\begin{DoxyCompactList}\small\item\em access a unit stride filter to determine if there is a hit \item\end{DoxyCompactList}\item 
bool \hyperlink{classPrefetcher_a11579c7a5838c568fb11ac662a82d6f5}{accessNonunitFilter} (const \hyperlink{classAddress}{Address} \&address, int $\ast$stride, bool \&alloc)
\begin{DoxyCompactList}\small\item\em access a unit stride filter to determine if there is a hit \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} \hyperlink{classPrefetcher_af24cc9f3fcde8ff672f65b91689b1c9c}{m\_\-num\_\-streams}
\begin{DoxyCompactList}\small\item\em number of prefetch streams available \item\end{DoxyCompactList}\item 
\hyperlink{classstd_1_1vector}{std::vector}$<$ \hyperlink{classPrefetchEntry}{PrefetchEntry} $>$ \hyperlink{classPrefetcher_ac70c7174698e1bb57e75d7ee4d31db32}{m\_\-array}
\begin{DoxyCompactList}\small\item\em an array of the active prefetch streams \item\end{DoxyCompactList}\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} \hyperlink{classPrefetcher_ab90010829f9a17cf9fc34b16723e3d75}{m\_\-train\_\-misses}
\begin{DoxyCompactList}\small\item\em number of misses I must see before allocating a stream \item\end{DoxyCompactList}\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} \hyperlink{classPrefetcher_a0a4656906ae582dc063cb6d703f1c3d6}{m\_\-num\_\-startup\_\-pfs}
\begin{DoxyCompactList}\small\item\em number of initial prefetches to startup a stream \item\end{DoxyCompactList}\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} \hyperlink{classPrefetcher_a05a4b7a047922b33e9ce39b879a2ae6b}{m\_\-num\_\-unit\_\-filters}
\begin{DoxyCompactList}\small\item\em number of stride filters \item\end{DoxyCompactList}\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} \hyperlink{classPrefetcher_ad6f212487f4bbedaa6d22125da88fa04}{m\_\-num\_\-nonunit\_\-filters}
\begin{DoxyCompactList}\small\item\em number of non-\/stride filters \item\end{DoxyCompactList}\item 
\hyperlink{classstd_1_1vector}{std::vector}$<$ \hyperlink{classAddress}{Address} $>$ \hyperlink{classPrefetcher_a22e41c52e5646478755d6c2a699f2a3e}{m\_\-unit\_\-filter}
\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} \hyperlink{classPrefetcher_aa7152e0ba18507f4499632ccffc8ddad}{m\_\-unit\_\-filter\_\-index}
\begin{DoxyCompactList}\small\item\em a round robin pointer into the unit filter group \item\end{DoxyCompactList}\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} $\ast$ \hyperlink{classPrefetcher_adb0b4ed5c68fa291f0f0b1e5a08dd1e8}{m\_\-unit\_\-filter\_\-hit}
\item 
\hyperlink{classstd_1_1vector}{std::vector}$<$ \hyperlink{classAddress}{Address} $>$ \hyperlink{classPrefetcher_a596c08c70ae40df3eb032cbdf16db62f}{m\_\-negative\_\-filter}
\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} \hyperlink{classPrefetcher_a515ce9fec5ecb09164d1915f41bdd881}{m\_\-negative\_\-filter\_\-index}
\begin{DoxyCompactList}\small\item\em a round robin pointer into the negative filter group \item\end{DoxyCompactList}\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} $\ast$ \hyperlink{classPrefetcher_a634a8a03b20af61b964bf187317ff430}{m\_\-negative\_\-filter\_\-hit}
\item 
\hyperlink{classstd_1_1vector}{std::vector}$<$ \hyperlink{classAddress}{Address} $>$ \hyperlink{classPrefetcher_a561535cdda35027c698a573b6b3e5e52}{m\_\-nonunit\_\-filter}
\item 
int $\ast$ \hyperlink{classPrefetcher_ae5f5874d1f5f2ae17e490bc3e932e2bc}{m\_\-nonunit\_\-stride}
\begin{DoxyCompactList}\small\item\em An array of strides (in \# of cache lines) for the filter entries. \item\end{DoxyCompactList}\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} $\ast$ \hyperlink{classPrefetcher_ad152c2b22b30ca16bd8a4247fbf54e41}{m\_\-nonunit\_\-hit}
\item 
\hyperlink{Type_8hh_a435d1572bf3f880d55459d9805097f62}{uint32\_\-t} \hyperlink{classPrefetcher_abf85cabfde70657a26802059aeb4b971}{m\_\-nonunit\_\-index}
\begin{DoxyCompactList}\small\item\em a round robin pointer into the unit filter group \item\end{DoxyCompactList}\item 
bool \hyperlink{classPrefetcher_ac07a573d2ab82546c1d3291e9124db84}{m\_\-prefetch\_\-cross\_\-pages}
\begin{DoxyCompactList}\small\item\em Used for allowing prefetches across pages. \item\end{DoxyCompactList}\item 
\hyperlink{classAbstractController}{AbstractController} $\ast$ \hyperlink{classPrefetcher_a1e7049f2cd244dc3944af370eb3e979a}{m\_\-controller}
\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classPrefetcher_ad1e6c9fb59c342c342de2ec92e395174}{numMissObserved}
\begin{DoxyCompactList}\small\item\em Count of accesses to the prefetcher. \item\end{DoxyCompactList}\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classPrefetcher_a9fa8a2d34e0af70cb6db907ad8df7470}{numAllocatedStreams}
\begin{DoxyCompactList}\small\item\em Count of prefetch streams allocated. \item\end{DoxyCompactList}\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classPrefetcher_a112363546083c7fbefe26b74e3181baf}{numPrefetchRequested}
\begin{DoxyCompactList}\small\item\em Count of prefetch requests made. \item\end{DoxyCompactList}\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classPrefetcher_a9644f1356b157e6cf7e86db7a9356be7}{numPrefetchAccepted}
\begin{DoxyCompactList}\small\item\em Count of prefetch requests accepted. \item\end{DoxyCompactList}\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classPrefetcher_a4165aaa9b3590259a258114e9469c74e}{numDroppedPrefetches}
\begin{DoxyCompactList}\small\item\em Count of prefetches dropped. \item\end{DoxyCompactList}\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classPrefetcher_a1651af6d8d96734f82a6e95a8aea4af0}{numHits}
\begin{DoxyCompactList}\small\item\em Count of successful prefetches. \item\end{DoxyCompactList}\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classPrefetcher_a46a96500ada7b244799f94064bf2b24d}{numPartialHits}
\begin{DoxyCompactList}\small\item\em Count of partial successful prefetches. \item\end{DoxyCompactList}\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classPrefetcher_a40bc6d68ddd4537932b2ac90e93dee85}{numPagesCrossed}
\begin{DoxyCompactList}\small\item\em Count of pages crossed. \item\end{DoxyCompactList}\item 
\hyperlink{classStats_1_1Scalar}{Stats::Scalar} \hyperlink{classPrefetcher_a7131480b702efc8b888a80270c77aab2}{numMissedPrefetchedBlocks}
\begin{DoxyCompactList}\small\item\em Count of misses incurred for blocks that were prefetched. \item\end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{型定義}
\hypertarget{classPrefetcher_aa178e3582d29b08c028c11634875499c}{
\index{Prefetcher@{Prefetcher}!Params@{Params}}
\index{Params@{Params}!Prefetcher@{Prefetcher}}
\subsubsection[{Params}]{\setlength{\rightskip}{0pt plus 5cm}typedef PrefetcherParams {\bf Params}}}
\label{classPrefetcher_aa178e3582d29b08c028c11634875499c}


\hyperlink{classSimObject_a0f0761d2db586a23bb2a2880b8f387bb}{SimObject}を再定義しています。

\subsection{コンストラクタとデストラクタ}
\hypertarget{classPrefetcher_a103945d22642f41049b79540b7b03773}{
\index{Prefetcher@{Prefetcher}!Prefetcher@{Prefetcher}}
\index{Prefetcher@{Prefetcher}!Prefetcher@{Prefetcher}}
\subsubsection[{Prefetcher}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Prefetcher} (const {\bf Params} $\ast$ {\em p})}}
\label{classPrefetcher_a103945d22642f41049b79540b7b03773}



\begin{DoxyCode}
41     : SimObject(p), m_num_streams(p->num_streams),
42     m_array(p->num_streams), m_train_misses(p->train_misses),
43     m_num_startup_pfs(p->num_startup_pfs), m_num_unit_filters(p->unit_filter),
44     m_num_nonunit_filters(p->nonunit_filter),
45     m_unit_filter(p->unit_filter, Address(0)),
46     m_negative_filter(p->unit_filter, Address(0)),
47     m_nonunit_filter(p->nonunit_filter, Address(0)),
48     m_prefetch_cross_pages(p->cross_page)
49 {
50     assert(m_num_streams > 0);
51     assert(m_num_startup_pfs <= MAX_PF_INFLIGHT);
52 
53     // create +1 stride filter
54     m_unit_filter_index = 0;
55     m_unit_filter_hit = new uint32_t[m_num_unit_filters];
56     for (uint32_t i =0; i < m_num_unit_filters; i++) {
57         m_unit_filter_hit[i] = 0;
58     }
59 
60     // create -1 stride filter
61     m_negative_filter_index = 0;
62     m_negative_filter_hit = new uint32_t[m_num_unit_filters];
63     for (int i =0; i < m_num_unit_filters; i++) {
64         m_negative_filter_hit[i] = 0;
65     }
66 
67     // create nonunit stride filter
68     m_nonunit_index = 0;
69     m_nonunit_stride = new int[m_num_nonunit_filters];
70     m_nonunit_hit    = new uint32_t[m_num_nonunit_filters];
71     for (int i =0; i < m_num_nonunit_filters; i++) {
72         m_nonunit_stride[i] = 0;
73         m_nonunit_hit[i]    = 0;
74     }
75 }
\end{DoxyCode}
\hypertarget{classPrefetcher_a7b071405fe38f9da007866b7510e773c}{
\index{Prefetcher@{Prefetcher}!$\sim$Prefetcher@{$\sim$Prefetcher}}
\index{$\sim$Prefetcher@{$\sim$Prefetcher}!Prefetcher@{Prefetcher}}
\subsubsection[{$\sim$Prefetcher}]{\setlength{\rightskip}{0pt plus 5cm}$\sim${\bf Prefetcher} ()}}
\label{classPrefetcher_a7b071405fe38f9da007866b7510e773c}



\begin{DoxyCode}
78 {
79     delete m_unit_filter_hit;
80     delete m_negative_filter_hit;
81     delete m_nonunit_stride;
82     delete m_nonunit_hit;
83 }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classPrefetcher_a11579c7a5838c568fb11ac662a82d6f5}{
\index{Prefetcher@{Prefetcher}!accessNonunitFilter@{accessNonunitFilter}}
\index{accessNonunitFilter@{accessNonunitFilter}!Prefetcher@{Prefetcher}}
\subsubsection[{accessNonunitFilter}]{\setlength{\rightskip}{0pt plus 5cm}bool accessNonunitFilter (const {\bf Address} \& {\em address}, \/  int $\ast$ {\em stride}, \/  bool \& {\em alloc})\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_a11579c7a5838c568fb11ac662a82d6f5}


access a unit stride filter to determine if there is a hit 

look for non-\/unit strides based on a (user-\/defined) page size 


\begin{DoxyCode}
380 {
381     //reset the alloc flag
382     alloc = false;
383 
385     Address page_addr = page_address(address);
386     Address line_addr = line_address(address);
387 
388     for (uint32_t i = 0; i < m_num_nonunit_filters; i++) {
389         if (page_address(m_nonunit_filter[i]) == page_addr) {
390             // hit in the non-unit filter
391             // compute the actual stride (for this reference)
392             int delta = line_addr.getAddress() - m_nonunit_filter[i].getAddress()
      ;
393 
394             if (delta != 0) {
395                 // no zero stride prefetches
396                 // check that the stride matches (for the last N times)
397                 if (delta == m_nonunit_stride[i]) {
398                     // -> stride hit
399                     // increment count (if > 2) allocate stream
400                     m_nonunit_hit[i]++;
401                     if (m_nonunit_hit[i] > m_train_misses) {
402                         //This stride HAS to be the multiplicative constant of
403                         //dataBlockBytes (bc next_stride_address is calculated ba
      sed
404                         //on this multiplicative constant!)
405                         *stride = m_nonunit_stride[i]/
      RubySystem::getBlockSizeBytes();
406 
407                         // clear this filter entry
408                         clearNonunitEntry(i);
409                         alloc = true;
410                     }
411                 } else {
412                     // delta didn't match ... reset m_nonunit_hit count for this 
      entry
413                     m_nonunit_hit[i] = 0;
414                 }
415 
416                 // update the last address seen & the stride
417                 m_nonunit_stride[i] = delta;
418                 m_nonunit_filter[i] = line_addr;
419                 return true;
420             } else {
421                 return false;
422             }
423         }
424     }
425 
426     // not found: enter this address in the table
427     m_nonunit_filter[m_nonunit_index] = line_addr;
428     m_nonunit_stride[m_nonunit_index] = 0;
429     m_nonunit_hit[m_nonunit_index]    = 0;
430 
431     m_nonunit_index = m_nonunit_index + 1;
432     if (m_nonunit_index >= m_num_nonunit_filters) {
433         m_nonunit_index = 0;
434     }
435     return false;
436 }
\end{DoxyCode}
\hypertarget{classPrefetcher_ab7279136d42cc2cc34787356c5dc6f67}{
\index{Prefetcher@{Prefetcher}!accessUnitFilter@{accessUnitFilter}}
\index{accessUnitFilter@{accessUnitFilter}!Prefetcher@{Prefetcher}}
\subsubsection[{accessUnitFilter}]{\setlength{\rightskip}{0pt plus 5cm}bool accessUnitFilter ({\bf std::vector}$<$ {\bf Address} $>$ \& {\em filter\_\-table}, \/  {\bf uint32\_\-t} $\ast$ {\em hit\_\-table}, \/  {\bf uint32\_\-t} \& {\em index}, \/  const {\bf Address} \& {\em address}, \/  int {\em stride}, \/  bool \& {\em alloc})\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_ab7279136d42cc2cc34787356c5dc6f67}


access a unit stride filter to determine if there is a hit 


\begin{DoxyCode}
348 {
349     //reset the alloc flag
350     alloc = false;
351 
352     Address line_addr = line_address(address);
353     for (int i = 0; i < m_num_unit_filters; i++) {
354         if (filter_table[i] == line_addr) {
355             filter_table[i] = next_stride_address(filter_table[i], stride);
356             filter_hit[i]++;
357             if (filter_hit[i] >= m_train_misses) {
358                 alloc = true;
359             }
360             return true;
361         }
362     }
363 
364     // enter this address in the table
365     int local_index = index;
366     filter_table[local_index] = next_stride_address(line_addr, stride);
367     filter_hit[local_index] = 0;
368     local_index = local_index + 1;
369     if (local_index >= m_num_unit_filters) {
370         local_index = 0;
371     }
372 
373     index = local_index;
374     return false;
375 }
\end{DoxyCode}
\hypertarget{classPrefetcher_a6bd67ad0a5fd462f191abb16d3c6bfa8}{
\index{Prefetcher@{Prefetcher}!clearNonunitEntry@{clearNonunitEntry}}
\index{clearNonunitEntry@{clearNonunitEntry}!Prefetcher@{Prefetcher}}
\subsubsection[{clearNonunitEntry}]{\setlength{\rightskip}{0pt plus 5cm}void clearNonunitEntry ({\bf uint32\_\-t} {\em index})\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_a6bd67ad0a5fd462f191abb16d3c6bfa8}


clear a non-\/unit stride prefetcher entry 


\begin{DoxyCode}
277 {
278     m_nonunit_filter[index].setAddress(0);
279     m_nonunit_stride[index] = 0;
280     m_nonunit_hit[index]    = 0;
281 }
\end{DoxyCode}
\hypertarget{classPrefetcher_ae2a3897ee6d47f9e162f17bea5f21a11}{
\index{Prefetcher@{Prefetcher}!getLRUindex@{getLRUindex}}
\index{getLRUindex@{getLRUindex}!Prefetcher@{Prefetcher}}
\subsubsection[{getLRUindex}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t} getLRUindex (void)\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_ae2a3897ee6d47f9e162f17bea5f21a11}
Returns an unused stream buffer (or if all are used, returns the least recently used (accessed) stream buffer). \begin{DoxyReturn}{戻り値}
The index of the least recently used stream buffer. 
\end{DoxyReturn}



\begin{DoxyCode}
258 {
259     uint32_t lru_index = 0;
260     Cycles lru_access = m_array[lru_index].m_use_time;
261 
262     for (uint32_t i = 0; i < m_num_streams; i++) {
263         if (!m_array[i].m_is_valid) {
264             return i;
265         }
266         if (m_array[i].m_use_time < lru_access) {
267             lru_access = m_array[i].m_use_time;
268             lru_index = i;
269         }
270     }
271 
272     return lru_index;
273 }
\end{DoxyCode}
\hypertarget{classPrefetcher_a9d6cbff2a87bd34af85710cae48c6077}{
\index{Prefetcher@{Prefetcher}!getPrefetchEntry@{getPrefetchEntry}}
\index{getPrefetchEntry@{getPrefetchEntry}!Prefetcher@{Prefetcher}}
\subsubsection[{getPrefetchEntry}]{\setlength{\rightskip}{0pt plus 5cm}{\bf PrefetchEntry} $\ast$ getPrefetchEntry (const {\bf Address} \& {\em address}, \/  {\bf uint32\_\-t} \& {\em index})\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_a9d6cbff2a87bd34af85710cae48c6077}
get pointer to the matching stream entry, returns NULL if not found index holds the multiple of the stride this address is. 


\begin{DoxyCode}
328 {
329     // search all streams for a match
330     for (int i = 0; i < m_num_streams; i++) {
331         // search all the outstanding prefetches for this stream
332         if (m_array[i].m_is_valid) {
333             for (int j = 0; j < m_num_startup_pfs; j++) {
334                 if (next_stride_address(m_array[i].m_address,
335                     -(m_array[i].m_stride*j)) == address) {
336                     return &(m_array[i]);
337                 }
338             }
339         }
340     }
341     return NULL;
342 }
\end{DoxyCode}
\hypertarget{classPrefetcher_a5125f46f95961714c0ebdf658b6bb745}{
\index{Prefetcher@{Prefetcher}!initializeStream@{initializeStream}}
\index{initializeStream@{initializeStream}!Prefetcher@{Prefetcher}}
\subsubsection[{initializeStream}]{\setlength{\rightskip}{0pt plus 5cm}void initializeStream (const {\bf Address} \& {\em address}, \/  int {\em stride}, \/  {\bf uint32\_\-t} {\em index}, \/  const RubyRequestType \& {\em type})\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_a5125f46f95961714c0ebdf658b6bb745}


allocate a new stream buffer at a specific index 


\begin{DoxyCode}
286 {
287     numAllocatedStreams++;
288 
289     // initialize the stream prefetcher
290     PrefetchEntry *mystream = &(m_array[index]);
291     mystream->m_address = line_address(address);
292     mystream->m_stride = stride;
293     mystream->m_use_time = m_controller->curCycle();
294     mystream->m_is_valid = true;
295     mystream->m_type = type;
296 
297     // create a number of initial prefetches for this stream
298     Address page_addr = page_address(mystream->m_address);
299     Address line_addr = line_address(mystream->m_address);
300     Address prev_addr = line_addr;
301 
302     // insert a number of prefetches into the prefetch table
303     for (int k = 0; k < m_num_startup_pfs; k++) {
304         line_addr = next_stride_address(line_addr, stride);
305         // possibly stop prefetching at page boundaries
306         if (page_addr != page_address(line_addr)) {
307             numPagesCrossed++;
308             if (!m_prefetch_cross_pages) {
309                 // deallocate this stream prefetcher
310                 mystream->m_is_valid = false;
311                 return;
312             }
313         }
314 
315         // launch prefetch
316         numPrefetchRequested++;
317         DPRINTF(RubyPrefetcher, "Requesting prefetch for %s\n", line_addr);
318         m_controller->enqueuePrefetch(line_addr, m_array[index].m_type);
319         prev_addr = line_addr;
320     }
321 
322     // update the address to be the last address prefetched
323     mystream->m_address = line_addr;
324 }
\end{DoxyCode}
\hypertarget{classPrefetcher_a837cf1d68756e156957f5d7c36d5da7e}{
\index{Prefetcher@{Prefetcher}!issueNextPrefetch@{issueNextPrefetch}}
\index{issueNextPrefetch@{issueNextPrefetch}!Prefetcher@{Prefetcher}}
\subsubsection[{issueNextPrefetch}]{\setlength{\rightskip}{0pt plus 5cm}void issueNextPrefetch (const {\bf Address} \& {\em address}, \/  {\bf PrefetchEntry} $\ast$ {\em stream})}}
\label{classPrefetcher_a837cf1d68756e156957f5d7c36d5da7e}



\begin{DoxyCode}
220 {
221     // get our corresponding stream fetcher
222     if (stream == NULL) {
223         uint32_t index = 0;
224         stream = getPrefetchEntry(address, index);
225     }
226 
227     // if (for some reason), this stream is unallocated, return.
228     if (stream == NULL) {
229         DPRINTF(RubyPrefetcher, "Unallocated stream, returning\n");
230         return;
231     }
232 
233     // extend this prefetching stream by 1 (or more)
234     Address page_addr = page_address(stream->m_address);
235     Address line_addr = next_stride_address(stream->m_address,
236                                             stream->m_stride);
237 
238     // possibly stop prefetching at page boundaries
239     if (page_addr != page_address(line_addr)) {
240         numPagesCrossed++;
241         if (!m_prefetch_cross_pages) {
242             // Deallocate the stream since we are not prefetching
243             // across page boundries
244             stream->m_is_valid = false;
245             return;
246         }
247     }
248 
249     // launch next prefetch
250     stream->m_address = line_addr;
251     stream->m_use_time = m_controller->curCycle();
252     DPRINTF(RubyPrefetcher, "Requesting prefetch for %s\n", line_addr);
253     m_controller->enqueuePrefetch(line_addr, stream->m_type);
254 }
\end{DoxyCode}
\hypertarget{classPrefetcher_a0aeb99b55e0ebe2fe1ebc894a1f08ebc}{
\index{Prefetcher@{Prefetcher}!observeMiss@{observeMiss}}
\index{observeMiss@{observeMiss}!Prefetcher@{Prefetcher}}
\subsubsection[{observeMiss}]{\setlength{\rightskip}{0pt plus 5cm}void observeMiss (const {\bf Address} \& {\em address}, \/  const RubyRequestType \& {\em type})}}
\label{classPrefetcher_a0aeb99b55e0ebe2fe1ebc894a1f08ebc}
Observe a memory miss from the cache.


\begin{DoxyParams}{引数}
\item[{\em address}]The physical address that missed out of the cache. \end{DoxyParams}



\begin{DoxyCode}
136 {
137     DPRINTF(RubyPrefetcher, "Observed miss for %s\n", address);
138     Address line_addr = line_address(address);
139     numMissObserved++;
140 
141     // check to see if we have already issued a prefetch for this block
142     uint32_t index = 0;
143     PrefetchEntry *pfEntry = getPrefetchEntry(line_addr, index);
144     if (pfEntry != NULL) {
145         if (pfEntry->requestIssued[index]) {
146             if (pfEntry->requestCompleted[index]) {
147                 // We prefetched too early and now the prefetch block no
148                 // longer exists in the cache
149                 numMissedPrefetchedBlocks++;
150                 return;
151             } else {
152                 // The controller has issued the prefetch request,
153                 // but the request for the block arrived earlier.
154                 numPartialHits++;
155                 observePfHit(line_addr);
156                 return;
157             }
158         } else {
159             // The request is still in the prefetch queue of the controller.
160             // Or was evicted because of other requests.
161             return;
162         }
163     }
164 
165     // check to see if this address is in the unit stride filter
166     bool alloc = false;
167     bool hit = accessUnitFilter(m_unit_filter, m_unit_filter_hit,
168                                 m_unit_filter_index, line_addr, 1, alloc);
169     if (alloc) {
170         // allocate a new prefetch stream
171         initializeStream(line_addr, 1, getLRUindex(), type);
172     }
173     if (hit) {
174         DPRINTF(RubyPrefetcher, "  *** hit in unit stride buffer\n");
175         return;
176     }
177 
178     hit = accessUnitFilter(m_negative_filter, m_negative_filter_hit,
179         m_negative_filter_index, line_addr, -1, alloc);
180     if (alloc) {
181         // allocate a new prefetch stream
182         initializeStream(line_addr, -1, getLRUindex(), type);
183     }
184     if (hit) {
185         DPRINTF(RubyPrefetcher, "  *** hit in unit negative unit buffer\n");
186         return;
187     }
188 
189     // check to see if this address is in the non-unit stride filter
190     int stride = 0;  // NULL value
191     hit = accessNonunitFilter(address, &stride, alloc);
192     if (alloc) {
193         assert(stride != 0);  // ensure non-zero stride prefetches
194         initializeStream(line_addr, stride, getLRUindex(), type);
195     }
196     if (hit) {
197         DPRINTF(RubyPrefetcher, "  *** hit in non-unit stride buffer\n");
198         return;
199     }
200 }
\end{DoxyCode}
\hypertarget{classPrefetcher_ad42b59b907f12b2820fda827538f272f}{
\index{Prefetcher@{Prefetcher}!observePfHit@{observePfHit}}
\index{observePfHit@{observePfHit}!Prefetcher@{Prefetcher}}
\subsubsection[{observePfHit}]{\setlength{\rightskip}{0pt plus 5cm}void observePfHit (const {\bf Address} \& {\em address})}}
\label{classPrefetcher_ad42b59b907f12b2820fda827538f272f}
Implement the prefetch hit(miss) callback interface. These functions are called by the cache when it hits(misses) on a line with the line's prefetch bit set. If this address hits in m\_\-array we will continue prefetching the stream. 


\begin{DoxyCode}
212 {
213     numHits++;
214     DPRINTF(RubyPrefetcher, "Observed hit for %s\n", address);
215     issueNextPrefetch(address, NULL);
216 }
\end{DoxyCode}
\hypertarget{classPrefetcher_a54bad4fe990aa1c8c9e3910c7c972089}{
\index{Prefetcher@{Prefetcher}!observePfMiss@{observePfMiss}}
\index{observePfMiss@{observePfMiss}!Prefetcher@{Prefetcher}}
\subsubsection[{observePfMiss}]{\setlength{\rightskip}{0pt plus 5cm}void observePfMiss (const {\bf Address} \& {\em address})}}
\label{classPrefetcher_a54bad4fe990aa1c8c9e3910c7c972089}



\begin{DoxyCode}
204 {
205     numPartialHits++;
206     DPRINTF(RubyPrefetcher, "Observed partial hit for %s\n", address);
207     issueNextPrefetch(address, NULL);
208 }
\end{DoxyCode}
\hypertarget{classPrefetcher_ac55fe386a101fbae38c716067c9966a0}{
\index{Prefetcher@{Prefetcher}!print@{print}}
\index{print@{print}!Prefetcher@{Prefetcher}}
\subsubsection[{print}]{\setlength{\rightskip}{0pt plus 5cm}void print (std::ostream \& {\em out}) const}}
\label{classPrefetcher_ac55fe386a101fbae38c716067c9966a0}
Print out some statistics 


\begin{DoxyCode}
440 {
441     out << name() << " Prefetcher State\n";
442     // print out unit filter
443     out << "unit table:\n";
444     for (int i = 0; i < m_num_unit_filters; i++) {
445         out << m_unit_filter[i] << std::endl;
446     }
447 
448     out << "negative table:\n";
449     for (int i = 0; i < m_num_unit_filters; i++) {
450         out << m_negative_filter[i] << std::endl;
451     }
452 
453     // print out non-unit stride filter
454     out << "non-unit table:\n";
455     for (int i = 0; i < m_num_nonunit_filters; i++) {
456         out << m_nonunit_filter[i] << " "
457             << m_nonunit_stride[i] << " "
458             << m_nonunit_hit[i] << std::endl;
459     }
460 
461     // print out allocated stream buffers
462     out << "streams:\n";
463     for (int i = 0; i < m_num_streams; i++) {
464         out << m_array[i].m_address << " "
465             << m_array[i].m_stride << " "
466             << m_array[i].m_is_valid << " "
467             << m_array[i].m_use_time << std::endl;
468     }
469 }
\end{DoxyCode}
\hypertarget{classPrefetcher_a4dc637449366fcdfc4e764cdf12d9b11}{
\index{Prefetcher@{Prefetcher}!regStats@{regStats}}
\index{regStats@{regStats}!Prefetcher@{Prefetcher}}
\subsubsection[{regStats}]{\setlength{\rightskip}{0pt plus 5cm}void regStats ()\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classPrefetcher_a4dc637449366fcdfc4e764cdf12d9b11}
\hyperlink{classRegister}{Register} statistics for this object. 

\hyperlink{classSimObject_a4dc637449366fcdfc4e764cdf12d9b11}{SimObject}を再定義しています。


\begin{DoxyCode}
87 {
88     numMissObserved
89         .name(name() + ".miss_observed")
90         .desc("number of misses observed")
91         ;
92 
93     numAllocatedStreams
94         .name(name() + ".allocated_streams")
95         .desc("number of streams allocated for prefetching")
96         ;
97 
98     numPrefetchRequested
99         .name(name() + ".prefetches_requested")
100         .desc("number of prefetch requests made")
101         ;
102 
103     numPrefetchAccepted
104         .name(name() + ".prefetches_accepted")
105         .desc("number of prefetch requests accepted")
106         ;
107 
108     numDroppedPrefetches
109         .name(name() + ".dropped_prefetches")
110         .desc("number of prefetch requests dropped")
111         ;
112 
113     numHits
114         .name(name() + ".hits")
115         .desc("number of prefetched blocks accessed")
116         ;
117 
118     numPartialHits
119         .name(name() + ".partial_hits")
120         .desc("number of misses observed for a block being prefetched")
121         ;
122 
123     numPagesCrossed
124         .name(name() + ".pages_crossed")
125         .desc("number of prefetches across pages")
126         ;
127 
128     numMissedPrefetchedBlocks
129         .name(name() + ".misses_on_prefetched_blocks")
130         .desc("number of misses for blocks that were prefetched, yet missed")
131         ;
132 }
\end{DoxyCode}
\hypertarget{classPrefetcher_ad1772ea493bb64a517a46484972c9efc}{
\index{Prefetcher@{Prefetcher}!setController@{setController}}
\index{setController@{setController}!Prefetcher@{Prefetcher}}
\subsubsection[{setController}]{\setlength{\rightskip}{0pt plus 5cm}void setController ({\bf AbstractController} $\ast$ {\em \_\-ctrl})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classPrefetcher_ad1772ea493bb64a517a46484972c9efc}



\begin{DoxyCode}
109         { m_controller = _ctrl; }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classPrefetcher_ac70c7174698e1bb57e75d7ee4d31db32}{
\index{Prefetcher@{Prefetcher}!m\_\-array@{m\_\-array}}
\index{m\_\-array@{m\_\-array}!Prefetcher@{Prefetcher}}
\subsubsection[{m\_\-array}]{\setlength{\rightskip}{0pt plus 5cm}{\bf std::vector}$<${\bf PrefetchEntry}$>$ {\bf m\_\-array}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_ac70c7174698e1bb57e75d7ee4d31db32}


an array of the active prefetch streams \hypertarget{classPrefetcher_a1e7049f2cd244dc3944af370eb3e979a}{
\index{Prefetcher@{Prefetcher}!m\_\-controller@{m\_\-controller}}
\index{m\_\-controller@{m\_\-controller}!Prefetcher@{Prefetcher}}
\subsubsection[{m\_\-controller}]{\setlength{\rightskip}{0pt plus 5cm}{\bf AbstractController}$\ast$ {\bf m\_\-controller}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_a1e7049f2cd244dc3944af370eb3e979a}
\hypertarget{classPrefetcher_a596c08c70ae40df3eb032cbdf16db62f}{
\index{Prefetcher@{Prefetcher}!m\_\-negative\_\-filter@{m\_\-negative\_\-filter}}
\index{m\_\-negative\_\-filter@{m\_\-negative\_\-filter}!Prefetcher@{Prefetcher}}
\subsubsection[{m\_\-negative\_\-filter}]{\setlength{\rightskip}{0pt plus 5cm}{\bf std::vector}$<${\bf Address}$>$ {\bf m\_\-negative\_\-filter}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_a596c08c70ae40df3eb032cbdf16db62f}
a negative nit stride filter array: helps reduce BW requirement of prefetching \hypertarget{classPrefetcher_a634a8a03b20af61b964bf187317ff430}{
\index{Prefetcher@{Prefetcher}!m\_\-negative\_\-filter\_\-hit@{m\_\-negative\_\-filter\_\-hit}}
\index{m\_\-negative\_\-filter\_\-hit@{m\_\-negative\_\-filter\_\-hit}!Prefetcher@{Prefetcher}}
\subsubsection[{m\_\-negative\_\-filter\_\-hit}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t}$\ast$ {\bf m\_\-negative\_\-filter\_\-hit}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_a634a8a03b20af61b964bf187317ff430}
An array used to count the of times particular filter entries have been hit \hypertarget{classPrefetcher_a515ce9fec5ecb09164d1915f41bdd881}{
\index{Prefetcher@{Prefetcher}!m\_\-negative\_\-filter\_\-index@{m\_\-negative\_\-filter\_\-index}}
\index{m\_\-negative\_\-filter\_\-index@{m\_\-negative\_\-filter\_\-index}!Prefetcher@{Prefetcher}}
\subsubsection[{m\_\-negative\_\-filter\_\-index}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t} {\bf m\_\-negative\_\-filter\_\-index}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_a515ce9fec5ecb09164d1915f41bdd881}


a round robin pointer into the negative filter group \hypertarget{classPrefetcher_a561535cdda35027c698a573b6b3e5e52}{
\index{Prefetcher@{Prefetcher}!m\_\-nonunit\_\-filter@{m\_\-nonunit\_\-filter}}
\index{m\_\-nonunit\_\-filter@{m\_\-nonunit\_\-filter}!Prefetcher@{Prefetcher}}
\subsubsection[{m\_\-nonunit\_\-filter}]{\setlength{\rightskip}{0pt plus 5cm}{\bf std::vector}$<${\bf Address}$>$ {\bf m\_\-nonunit\_\-filter}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_a561535cdda35027c698a573b6b3e5e52}
a non-\/unit stride filter array: helps reduce BW requirement of prefetching \hypertarget{classPrefetcher_ad152c2b22b30ca16bd8a4247fbf54e41}{
\index{Prefetcher@{Prefetcher}!m\_\-nonunit\_\-hit@{m\_\-nonunit\_\-hit}}
\index{m\_\-nonunit\_\-hit@{m\_\-nonunit\_\-hit}!Prefetcher@{Prefetcher}}
\subsubsection[{m\_\-nonunit\_\-hit}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t}$\ast$ {\bf m\_\-nonunit\_\-hit}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_ad152c2b22b30ca16bd8a4247fbf54e41}
An array used to count the of times particular filter entries have been hit \hypertarget{classPrefetcher_abf85cabfde70657a26802059aeb4b971}{
\index{Prefetcher@{Prefetcher}!m\_\-nonunit\_\-index@{m\_\-nonunit\_\-index}}
\index{m\_\-nonunit\_\-index@{m\_\-nonunit\_\-index}!Prefetcher@{Prefetcher}}
\subsubsection[{m\_\-nonunit\_\-index}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t} {\bf m\_\-nonunit\_\-index}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_abf85cabfde70657a26802059aeb4b971}


a round robin pointer into the unit filter group \hypertarget{classPrefetcher_ae5f5874d1f5f2ae17e490bc3e932e2bc}{
\index{Prefetcher@{Prefetcher}!m\_\-nonunit\_\-stride@{m\_\-nonunit\_\-stride}}
\index{m\_\-nonunit\_\-stride@{m\_\-nonunit\_\-stride}!Prefetcher@{Prefetcher}}
\subsubsection[{m\_\-nonunit\_\-stride}]{\setlength{\rightskip}{0pt plus 5cm}int$\ast$ {\bf m\_\-nonunit\_\-stride}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_ae5f5874d1f5f2ae17e490bc3e932e2bc}


An array of strides (in \# of cache lines) for the filter entries. \hypertarget{classPrefetcher_ad6f212487f4bbedaa6d22125da88fa04}{
\index{Prefetcher@{Prefetcher}!m\_\-num\_\-nonunit\_\-filters@{m\_\-num\_\-nonunit\_\-filters}}
\index{m\_\-num\_\-nonunit\_\-filters@{m\_\-num\_\-nonunit\_\-filters}!Prefetcher@{Prefetcher}}
\subsubsection[{m\_\-num\_\-nonunit\_\-filters}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t} {\bf m\_\-num\_\-nonunit\_\-filters}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_ad6f212487f4bbedaa6d22125da88fa04}


number of non-\/stride filters \hypertarget{classPrefetcher_a0a4656906ae582dc063cb6d703f1c3d6}{
\index{Prefetcher@{Prefetcher}!m\_\-num\_\-startup\_\-pfs@{m\_\-num\_\-startup\_\-pfs}}
\index{m\_\-num\_\-startup\_\-pfs@{m\_\-num\_\-startup\_\-pfs}!Prefetcher@{Prefetcher}}
\subsubsection[{m\_\-num\_\-startup\_\-pfs}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t} {\bf m\_\-num\_\-startup\_\-pfs}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_a0a4656906ae582dc063cb6d703f1c3d6}


number of initial prefetches to startup a stream \hypertarget{classPrefetcher_af24cc9f3fcde8ff672f65b91689b1c9c}{
\index{Prefetcher@{Prefetcher}!m\_\-num\_\-streams@{m\_\-num\_\-streams}}
\index{m\_\-num\_\-streams@{m\_\-num\_\-streams}!Prefetcher@{Prefetcher}}
\subsubsection[{m\_\-num\_\-streams}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t} {\bf m\_\-num\_\-streams}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_af24cc9f3fcde8ff672f65b91689b1c9c}


number of prefetch streams available \hypertarget{classPrefetcher_a05a4b7a047922b33e9ce39b879a2ae6b}{
\index{Prefetcher@{Prefetcher}!m\_\-num\_\-unit\_\-filters@{m\_\-num\_\-unit\_\-filters}}
\index{m\_\-num\_\-unit\_\-filters@{m\_\-num\_\-unit\_\-filters}!Prefetcher@{Prefetcher}}
\subsubsection[{m\_\-num\_\-unit\_\-filters}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t} {\bf m\_\-num\_\-unit\_\-filters}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_a05a4b7a047922b33e9ce39b879a2ae6b}


number of stride filters \hypertarget{classPrefetcher_ac07a573d2ab82546c1d3291e9124db84}{
\index{Prefetcher@{Prefetcher}!m\_\-prefetch\_\-cross\_\-pages@{m\_\-prefetch\_\-cross\_\-pages}}
\index{m\_\-prefetch\_\-cross\_\-pages@{m\_\-prefetch\_\-cross\_\-pages}!Prefetcher@{Prefetcher}}
\subsubsection[{m\_\-prefetch\_\-cross\_\-pages}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf m\_\-prefetch\_\-cross\_\-pages}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_ac07a573d2ab82546c1d3291e9124db84}


Used for allowing prefetches across pages. \hypertarget{classPrefetcher_ab90010829f9a17cf9fc34b16723e3d75}{
\index{Prefetcher@{Prefetcher}!m\_\-train\_\-misses@{m\_\-train\_\-misses}}
\index{m\_\-train\_\-misses@{m\_\-train\_\-misses}!Prefetcher@{Prefetcher}}
\subsubsection[{m\_\-train\_\-misses}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t} {\bf m\_\-train\_\-misses}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_ab90010829f9a17cf9fc34b16723e3d75}


number of misses I must see before allocating a stream \hypertarget{classPrefetcher_a22e41c52e5646478755d6c2a699f2a3e}{
\index{Prefetcher@{Prefetcher}!m\_\-unit\_\-filter@{m\_\-unit\_\-filter}}
\index{m\_\-unit\_\-filter@{m\_\-unit\_\-filter}!Prefetcher@{Prefetcher}}
\subsubsection[{m\_\-unit\_\-filter}]{\setlength{\rightskip}{0pt plus 5cm}{\bf std::vector}$<${\bf Address}$>$ {\bf m\_\-unit\_\-filter}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_a22e41c52e5646478755d6c2a699f2a3e}
a unit stride filter array: helps reduce BW requirement of prefetching \hypertarget{classPrefetcher_adb0b4ed5c68fa291f0f0b1e5a08dd1e8}{
\index{Prefetcher@{Prefetcher}!m\_\-unit\_\-filter\_\-hit@{m\_\-unit\_\-filter\_\-hit}}
\index{m\_\-unit\_\-filter\_\-hit@{m\_\-unit\_\-filter\_\-hit}!Prefetcher@{Prefetcher}}
\subsubsection[{m\_\-unit\_\-filter\_\-hit}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t}$\ast$ {\bf m\_\-unit\_\-filter\_\-hit}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_adb0b4ed5c68fa291f0f0b1e5a08dd1e8}
An array used to count the of times particular filter entries have been hit \hypertarget{classPrefetcher_aa7152e0ba18507f4499632ccffc8ddad}{
\index{Prefetcher@{Prefetcher}!m\_\-unit\_\-filter\_\-index@{m\_\-unit\_\-filter\_\-index}}
\index{m\_\-unit\_\-filter\_\-index@{m\_\-unit\_\-filter\_\-index}!Prefetcher@{Prefetcher}}
\subsubsection[{m\_\-unit\_\-filter\_\-index}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t} {\bf m\_\-unit\_\-filter\_\-index}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_aa7152e0ba18507f4499632ccffc8ddad}


a round robin pointer into the unit filter group \hypertarget{classPrefetcher_a9fa8a2d34e0af70cb6db907ad8df7470}{
\index{Prefetcher@{Prefetcher}!numAllocatedStreams@{numAllocatedStreams}}
\index{numAllocatedStreams@{numAllocatedStreams}!Prefetcher@{Prefetcher}}
\subsubsection[{numAllocatedStreams}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf numAllocatedStreams}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_a9fa8a2d34e0af70cb6db907ad8df7470}


Count of prefetch streams allocated. \hypertarget{classPrefetcher_a4165aaa9b3590259a258114e9469c74e}{
\index{Prefetcher@{Prefetcher}!numDroppedPrefetches@{numDroppedPrefetches}}
\index{numDroppedPrefetches@{numDroppedPrefetches}!Prefetcher@{Prefetcher}}
\subsubsection[{numDroppedPrefetches}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf numDroppedPrefetches}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_a4165aaa9b3590259a258114e9469c74e}


Count of prefetches dropped. \hypertarget{classPrefetcher_a1651af6d8d96734f82a6e95a8aea4af0}{
\index{Prefetcher@{Prefetcher}!numHits@{numHits}}
\index{numHits@{numHits}!Prefetcher@{Prefetcher}}
\subsubsection[{numHits}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf numHits}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_a1651af6d8d96734f82a6e95a8aea4af0}


Count of successful prefetches. \hypertarget{classPrefetcher_a7131480b702efc8b888a80270c77aab2}{
\index{Prefetcher@{Prefetcher}!numMissedPrefetchedBlocks@{numMissedPrefetchedBlocks}}
\index{numMissedPrefetchedBlocks@{numMissedPrefetchedBlocks}!Prefetcher@{Prefetcher}}
\subsubsection[{numMissedPrefetchedBlocks}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf numMissedPrefetchedBlocks}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_a7131480b702efc8b888a80270c77aab2}


Count of misses incurred for blocks that were prefetched. \hypertarget{classPrefetcher_ad1e6c9fb59c342c342de2ec92e395174}{
\index{Prefetcher@{Prefetcher}!numMissObserved@{numMissObserved}}
\index{numMissObserved@{numMissObserved}!Prefetcher@{Prefetcher}}
\subsubsection[{numMissObserved}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf numMissObserved}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_ad1e6c9fb59c342c342de2ec92e395174}


Count of accesses to the prefetcher. \hypertarget{classPrefetcher_a40bc6d68ddd4537932b2ac90e93dee85}{
\index{Prefetcher@{Prefetcher}!numPagesCrossed@{numPagesCrossed}}
\index{numPagesCrossed@{numPagesCrossed}!Prefetcher@{Prefetcher}}
\subsubsection[{numPagesCrossed}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf numPagesCrossed}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_a40bc6d68ddd4537932b2ac90e93dee85}


Count of pages crossed. \hypertarget{classPrefetcher_a46a96500ada7b244799f94064bf2b24d}{
\index{Prefetcher@{Prefetcher}!numPartialHits@{numPartialHits}}
\index{numPartialHits@{numPartialHits}!Prefetcher@{Prefetcher}}
\subsubsection[{numPartialHits}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf numPartialHits}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_a46a96500ada7b244799f94064bf2b24d}


Count of partial successful prefetches. \hypertarget{classPrefetcher_a9644f1356b157e6cf7e86db7a9356be7}{
\index{Prefetcher@{Prefetcher}!numPrefetchAccepted@{numPrefetchAccepted}}
\index{numPrefetchAccepted@{numPrefetchAccepted}!Prefetcher@{Prefetcher}}
\subsubsection[{numPrefetchAccepted}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf numPrefetchAccepted}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_a9644f1356b157e6cf7e86db7a9356be7}


Count of prefetch requests accepted. \hypertarget{classPrefetcher_a112363546083c7fbefe26b74e3181baf}{
\index{Prefetcher@{Prefetcher}!numPrefetchRequested@{numPrefetchRequested}}
\index{numPrefetchRequested@{numPrefetchRequested}!Prefetcher@{Prefetcher}}
\subsubsection[{numPrefetchRequested}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stats::Scalar} {\bf numPrefetchRequested}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classPrefetcher_a112363546083c7fbefe26b74e3181baf}


Count of prefetch requests made. 

このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
mem/ruby/structures/\hyperlink{Prefetcher_8hh}{Prefetcher.hh}\item 
mem/ruby/structures/\hyperlink{Prefetcher_8cc}{Prefetcher.cc}\end{DoxyCompactItemize}
