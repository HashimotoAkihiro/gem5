\hypertarget{classArmISA_1_1Stage2MMU_1_1Stage2Translation}{
\section{クラス Stage2Translation}
\label{classArmISA_1_1Stage2MMU_1_1Stage2Translation}\index{ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}}
}


{\ttfamily \#include $<$stage2\_\-mmu.hh$>$}Stage2Translationに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2cm]{classArmISA_1_1Stage2MMU_1_1Stage2Translation}
\end{center}
\end{figure}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classArmISA_1_1Stage2MMU_1_1Stage2Translation_adf800121ce2b6492781f7252444b8eff}{Stage2Translation} (\hyperlink{classArmISA_1_1Stage2MMU}{Stage2MMU} \&\hyperlink{classm5_1_1SimObject_1_1SimObject_a8365c86d70a25bb54ee36278d93237a9}{\_\-parent}, uint8\_\-t $\ast$\_\-data, Event $\ast$\_\-event, \hyperlink{classm5_1_1params_1_1Addr}{Addr} \_\-oVAddr)
\item 
void \hyperlink{classArmISA_1_1Stage2MMU_1_1Stage2Translation_ad1fd11d1e352cfc4b329d29b46a19fc4}{markDelayed} ()
\item 
void \hyperlink{classArmISA_1_1Stage2MMU_1_1Stage2Translation_a01e7d945def8d2e5df87a169954fa89f}{finish} (\hyperlink{classRefCountingPtr}{Fault} \hyperlink{classArmISA_1_1Stage2MMU_1_1Stage2Translation_a68714ceb74c60ea7ef5dec335bb6c5d7}{fault}, \hyperlink{classRequest}{RequestPtr} \hyperlink{classArmISA_1_1Stage2MMU_1_1Stage2Translation_a76fdf11ae9d2e0af47b6362edcc4aaef}{req}, \hyperlink{classThreadContext}{ThreadContext} $\ast$\hyperlink{namespaceArmISA_a5aff829af55e65b802d83dfcef4e9dd0}{tc}, \hyperlink{classBaseTLB_a46c8a310cf4c094f8c80e1cb8dc1f911}{BaseTLB::Mode} \hyperlink{namespaceArmISA_a5f3b9b97eb2dfa29d33e74878455f90d}{mode})
\item 
void \hyperlink{classArmISA_1_1Stage2MMU_1_1Stage2Translation_abd5f91bfdaada4162c7e1974268f748a}{setVirt} (\hyperlink{classm5_1_1params_1_1Addr}{Addr} vaddr, int size, \hyperlink{classFlags}{Request::Flags} flags, int masterId)
\item 
\hyperlink{classRefCountingPtr}{Fault} \hyperlink{classArmISA_1_1Stage2MMU_1_1Stage2Translation_a10760907ae83cf02c1bb5cd0eafd6497}{translateTiming} (\hyperlink{classThreadContext}{ThreadContext} $\ast$\hyperlink{namespaceArmISA_a5aff829af55e65b802d83dfcef4e9dd0}{tc})
\end{DoxyCompactItemize}
\subsection*{Public 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classRefCountingPtr}{Fault} \hyperlink{classArmISA_1_1Stage2MMU_1_1Stage2Translation_a68714ceb74c60ea7ef5dec335bb6c5d7}{fault}
\end{DoxyCompactItemize}
\subsection*{Private 変数}
\begin{DoxyCompactItemize}
\item 
uint8\_\-t $\ast$ \hyperlink{classArmISA_1_1Stage2MMU_1_1Stage2Translation_abe222f6d3581e7920dcad5306cc906a8}{data}
\item 
int \hyperlink{classArmISA_1_1Stage2MMU_1_1Stage2Translation_ad741d06221ef9f2ad307bffc9c9f4077}{numBytes}
\item 
\hyperlink{classRequest}{Request} \hyperlink{classArmISA_1_1Stage2MMU_1_1Stage2Translation_a76fdf11ae9d2e0af47b6362edcc4aaef}{req}
\item 
Event $\ast$ \hyperlink{classArmISA_1_1Stage2MMU_1_1Stage2Translation_a765488c8f26c7f8713d5245212dcae01}{event}
\item 
\hyperlink{classArmISA_1_1Stage2MMU}{Stage2MMU} \& \hyperlink{classArmISA_1_1Stage2MMU_1_1Stage2Translation_a61a3813700dc41c57c3a8a1c5fa32d15}{parent}
\item 
\hyperlink{classm5_1_1params_1_1Addr}{Addr} \hyperlink{classArmISA_1_1Stage2MMU_1_1Stage2Translation_a149cd9069ec9b6bd746ad320e99ff69d}{oVAddr}
\end{DoxyCompactItemize}


\subsection{説明}
This translation class is used to trigger the data fetch once a timing translation returns the translated physical address 

\subsection{コンストラクタとデストラクタ}
\hypertarget{classArmISA_1_1Stage2MMU_1_1Stage2Translation_adf800121ce2b6492781f7252444b8eff}{
\index{ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}!Stage2Translation@{Stage2Translation}}
\index{Stage2Translation@{Stage2Translation}!ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}}
\subsubsection[{Stage2Translation}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stage2Translation} ({\bf Stage2MMU} \& {\em \_\-parent}, \/  uint8\_\-t $\ast$ {\em \_\-data}, \/  Event $\ast$ {\em \_\-event}, \/  {\bf Addr} {\em \_\-oVAddr})}}
\label{classArmISA_1_1Stage2MMU_1_1Stage2Translation_adf800121ce2b6492781f7252444b8eff}



\begin{DoxyCode}
111     : data(_data), event(_event), parent(_parent), oVAddr(_oVAddr),
112     fault(NoFault)
113 {
114 }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classArmISA_1_1Stage2MMU_1_1Stage2Translation_a01e7d945def8d2e5df87a169954fa89f}{
\index{ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}!finish@{finish}}
\index{finish@{finish}!ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}}
\subsubsection[{finish}]{\setlength{\rightskip}{0pt plus 5cm}void finish ({\bf Fault} {\em fault}, \/  {\bf RequestPtr} {\em req}, \/  {\bf ThreadContext} $\ast$ {\em tc}, \/  {\bf BaseTLB::Mode} {\em mode})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classArmISA_1_1Stage2MMU_1_1Stage2Translation_a01e7d945def8d2e5df87a169954fa89f}


\hyperlink{classBaseTLB_1_1Translation_a5698e0a932f298729d10355d4384e565}{Translation}を実装しています。


\begin{DoxyCode}
119 {
120     fault = _fault;
121 
122     // If there was a fault annotate it with the flag saying the foult occured
123     // while doing a translation for a stage 1 page table walk.
124     if (fault != NoFault) {
125         ArmFault *armFault = reinterpret_cast<ArmFault *>(fault.get());
126         armFault->annotate(ArmFault::S1PTW, true);
127         armFault->annotate(ArmFault::OVA, oVAddr);
128     }
129 
130     if (_fault == NoFault && !req->getFlags().isSet(Request::NO_ACCESS)) {
131         DmaPort& port = parent.stage1Tlb()->getWalkerPort();
132         port.dmaAction(MemCmd::ReadReq, req->getPaddr(), numBytes,
133                        event, data, tc->getCpuPtr()->clockPeriod(),
134                        req->getFlags());
135     } else {
136         // We can't do the DMA access as there's been a problem, so tell the
137         // event we're done
138         event->process();
139     }
140 }
\end{DoxyCode}
\hypertarget{classArmISA_1_1Stage2MMU_1_1Stage2Translation_ad1fd11d1e352cfc4b329d29b46a19fc4}{
\index{ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}!markDelayed@{markDelayed}}
\index{markDelayed@{markDelayed}!ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}}
\subsubsection[{markDelayed}]{\setlength{\rightskip}{0pt plus 5cm}void markDelayed ()\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}
\label{classArmISA_1_1Stage2MMU_1_1Stage2Translation_ad1fd11d1e352cfc4b329d29b46a19fc4}
Signal that the translation has been delayed due to a hw page table walk. 

\hyperlink{classBaseTLB_1_1Translation_ab88d5e1938190b55d7859d5cc4d10446}{Translation}を実装しています。


\begin{DoxyCode}
78 {}
\end{DoxyCode}
\hypertarget{classArmISA_1_1Stage2MMU_1_1Stage2Translation_abd5f91bfdaada4162c7e1974268f748a}{
\index{ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}!setVirt@{setVirt}}
\index{setVirt@{setVirt}!ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}}
\subsubsection[{setVirt}]{\setlength{\rightskip}{0pt plus 5cm}void setVirt ({\bf Addr} {\em vaddr}, \/  int {\em size}, \/  {\bf Request::Flags} {\em flags}, \/  int {\em masterId})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classArmISA_1_1Stage2MMU_1_1Stage2Translation_abd5f91bfdaada4162c7e1974268f748a}



\begin{DoxyCode}
85         {
86             numBytes = size;
87             req.setVirt(0, vaddr, size, flags, masterId, 0);
88         }
\end{DoxyCode}
\hypertarget{classArmISA_1_1Stage2MMU_1_1Stage2Translation_a10760907ae83cf02c1bb5cd0eafd6497}{
\index{ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}!translateTiming@{translateTiming}}
\index{translateTiming@{translateTiming}!ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}}
\subsubsection[{translateTiming}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Fault} translateTiming ({\bf ThreadContext} $\ast$ {\em tc})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classArmISA_1_1Stage2MMU_1_1Stage2Translation_a10760907ae83cf02c1bb5cd0eafd6497}



\begin{DoxyCode}
91         {
92             return (parent.stage2Tlb()->translateTiming(&req, tc, this, 
      BaseTLB::Read));
93         }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classArmISA_1_1Stage2MMU_1_1Stage2Translation_abe222f6d3581e7920dcad5306cc906a8}{
\index{ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}!data@{data}}
\index{data@{data}!ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}}
\subsubsection[{data}]{\setlength{\rightskip}{0pt plus 5cm}uint8\_\-t$\ast$ {\bf data}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classArmISA_1_1Stage2MMU_1_1Stage2Translation_abe222f6d3581e7920dcad5306cc906a8}
\hypertarget{classArmISA_1_1Stage2MMU_1_1Stage2Translation_a765488c8f26c7f8713d5245212dcae01}{
\index{ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}!event@{event}}
\index{event@{event}!ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}}
\subsubsection[{event}]{\setlength{\rightskip}{0pt plus 5cm}Event$\ast$ {\bf event}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classArmISA_1_1Stage2MMU_1_1Stage2Translation_a765488c8f26c7f8713d5245212dcae01}
\hypertarget{classArmISA_1_1Stage2MMU_1_1Stage2Translation_a68714ceb74c60ea7ef5dec335bb6c5d7}{
\index{ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}!fault@{fault}}
\index{fault@{fault}!ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}}
\subsubsection[{fault}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Fault} {\bf fault}}}
\label{classArmISA_1_1Stage2MMU_1_1Stage2Translation_a68714ceb74c60ea7ef5dec335bb6c5d7}
\hypertarget{classArmISA_1_1Stage2MMU_1_1Stage2Translation_ad741d06221ef9f2ad307bffc9c9f4077}{
\index{ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}!numBytes@{numBytes}}
\index{numBytes@{numBytes}!ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}}
\subsubsection[{numBytes}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf numBytes}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classArmISA_1_1Stage2MMU_1_1Stage2Translation_ad741d06221ef9f2ad307bffc9c9f4077}
\hypertarget{classArmISA_1_1Stage2MMU_1_1Stage2Translation_a149cd9069ec9b6bd746ad320e99ff69d}{
\index{ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}!oVAddr@{oVAddr}}
\index{oVAddr@{oVAddr}!ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}}
\subsubsection[{oVAddr}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Addr} {\bf oVAddr}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classArmISA_1_1Stage2MMU_1_1Stage2Translation_a149cd9069ec9b6bd746ad320e99ff69d}
\hypertarget{classArmISA_1_1Stage2MMU_1_1Stage2Translation_a61a3813700dc41c57c3a8a1c5fa32d15}{
\index{ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}!parent@{parent}}
\index{parent@{parent}!ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}}
\subsubsection[{parent}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Stage2MMU}\& {\bf parent}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classArmISA_1_1Stage2MMU_1_1Stage2Translation_a61a3813700dc41c57c3a8a1c5fa32d15}
\hypertarget{classArmISA_1_1Stage2MMU_1_1Stage2Translation_a76fdf11ae9d2e0af47b6362edcc4aaef}{
\index{ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}!req@{req}}
\index{req@{req}!ArmISA::Stage2MMU::Stage2Translation@{ArmISA::Stage2MMU::Stage2Translation}}
\subsubsection[{req}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Request} {\bf req}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classArmISA_1_1Stage2MMU_1_1Stage2Translation_a76fdf11ae9d2e0af47b6362edcc4aaef}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
arch/arm/\hyperlink{stage2__mmu_8hh}{stage2\_\-mmu.hh}\item 
arch/arm/\hyperlink{stage2__mmu_8cc}{stage2\_\-mmu.cc}\end{DoxyCompactItemize}
