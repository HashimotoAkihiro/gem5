\hypertarget{classRandomGen}{
\section{クラス RandomGen}
\label{classRandomGen}\index{RandomGen@{RandomGen}}
}


{\ttfamily \#include $<$generators.hh$>$}RandomGenに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3cm]{classRandomGen}
\end{center}
\end{figure}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classRandomGen_adee762769ba5fd3bc9fe1224c8f7ee78}{RandomGen} (const std::string \&\hyperlink{classBaseGen_a1b003dc5cfce1a4d8f9a0c4b9b589045}{\_\-name}, \hyperlink{request_8hh_ac366b729262fd8e7cbd3283da6f775cf}{MasterID} master\_\-id, \hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \_\-duration, \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} start\_\-addr, \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} end\_\-addr, \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \_\-blocksize, \hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} min\_\-period, \hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} max\_\-period, uint8\_\-t read\_\-percent, \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} data\_\-limit)
\item 
void \hyperlink{classRandomGen_a2759dad6560aaf485b16356d7142d69d}{enter} ()
\item 
\hyperlink{classPacket}{PacketPtr} \hyperlink{classRandomGen_a938aa9841a9a62a776afbd0768af5379}{getNextPacket} ()
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classRandomGen_a65f805b54c24ac3ce0a37716de3e8abc}{nextPacketTick} (bool elastic, \hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} delay) const 
\end{DoxyCompactItemize}
\subsection*{Protected 変数}
\begin{DoxyCompactItemize}
\item 
const \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{classRandomGen_a6aeb968ddd05c079215ef147ed22708a}{startAddr}
\item 
const \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{classRandomGen_a1f198116a3da3ee4d73abf4760f70815}{endAddr}
\item 
const \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{classRandomGen_aebddb11d20f173e7a5ec2c9f2f591171}{blocksize}
\item 
const \hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classRandomGen_a4e49eae3c2467df5de83a296f8123619}{minPeriod}
\item 
const \hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classRandomGen_a1c8c13cc371c24fa5cbb14c737c97f9d}{maxPeriod}
\item 
const uint8\_\-t \hyperlink{classRandomGen_af72793641cb115852317a23ca19dc514}{readPercent}
\item 
const \hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{classRandomGen_ad6ef2f2a9a6167b2d84c3246a2dd2e92}{dataLimit}
\item 
\hyperlink{base_2types_8hh_af1bb03d6a4ee096394a6749f0a169232}{Addr} \hyperlink{classRandomGen_a708cc056d3a52d0f8f5a2cceffdc6d99}{dataManipulated}
\end{DoxyCompactItemize}


\subsection{説明}
The random generator is similar to the linear one, but does not generate sequential addresses. Instead it randomly picks an address in the range, aligned to the block size. 

\subsection{コンストラクタとデストラクタ}
\hypertarget{classRandomGen_adee762769ba5fd3bc9fe1224c8f7ee78}{
\index{RandomGen@{RandomGen}!RandomGen@{RandomGen}}
\index{RandomGen@{RandomGen}!RandomGen@{RandomGen}}
\subsubsection[{RandomGen}]{\setlength{\rightskip}{0pt plus 5cm}{\bf RandomGen} (const std::string \& {\em \_\-name}, \/  {\bf MasterID} {\em master\_\-id}, \/  {\bf Tick} {\em \_\-duration}, \/  {\bf Addr} {\em start\_\-addr}, \/  {\bf Addr} {\em end\_\-addr}, \/  {\bf Addr} {\em \_\-blocksize}, \/  {\bf Tick} {\em min\_\-period}, \/  {\bf Tick} {\em max\_\-period}, \/  uint8\_\-t {\em read\_\-percent}, \/  {\bf Addr} {\em data\_\-limit})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classRandomGen_adee762769ba5fd3bc9fe1224c8f7ee78}
Create a random address sequence generator. \hyperlink{classSet}{Set} min\_\-period == max\_\-period for a fixed inter-\/transaction time.


\begin{DoxyParams}{引数}
\item[{\em \_\-name}]Name to use for status and debug \item[{\em master\_\-id}]MasterID set on each request \item[{\em \_\-duration}]duration of this state before transitioning \item[{\em start\_\-addr}]Start address \item[{\em end\_\-addr}]End address \item[{\em \_\-blocksize}]Size used for transactions injected \item[{\em min\_\-period}]Lower limit of random inter-\/transaction time \item[{\em max\_\-period}]Upper limit of random inter-\/transaction time \item[{\em read\_\-percent}]Percent of transactions that are reads \item[{\em data\_\-limit}]Upper limit on how much data to read/write \end{DoxyParams}



\begin{DoxyCode}
266         : BaseGen(_name, master_id, _duration),
267           startAddr(start_addr), endAddr(end_addr),
268           blocksize(_blocksize), minPeriod(min_period),
269           maxPeriod(max_period), readPercent(read_percent),
270           dataLimit(data_limit)
271     { }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classRandomGen_a2759dad6560aaf485b16356d7142d69d}{
\index{RandomGen@{RandomGen}!enter@{enter}}
\index{enter@{enter}!RandomGen@{RandomGen}}
\subsubsection[{enter}]{\setlength{\rightskip}{0pt plus 5cm}void enter ()\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classRandomGen_a2759dad6560aaf485b16356d7142d69d}
Enter this generator state. 

\hyperlink{classBaseGen_ac51895063c53dfbc0f47a01940a3aa05}{BaseGen}を実装しています。


\begin{DoxyCode}
145 {
146     // reset the counter to zero
147     dataManipulated = 0;
148 }
\end{DoxyCode}
\hypertarget{classRandomGen_a938aa9841a9a62a776afbd0768af5379}{
\index{RandomGen@{RandomGen}!getNextPacket@{getNextPacket}}
\index{getNextPacket@{getNextPacket}!RandomGen@{RandomGen}}
\subsubsection[{getNextPacket}]{\setlength{\rightskip}{0pt plus 5cm}{\bf PacketPtr} getNextPacket ()\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classRandomGen_a938aa9841a9a62a776afbd0768af5379}
Get the next generated packet.

\begin{DoxyReturn}{戻り値}
A packet to be sent at the current tick 
\end{DoxyReturn}


\hyperlink{classBaseGen_a6cdb7c977e91dfc33aeea10a3dfcefed}{BaseGen}を実装しています。

\hyperlink{classDramGen_a938aa9841a9a62a776afbd0768af5379}{DramGen}で再定義されています。


\begin{DoxyCode}
152 {
153     // choose if we generate a read or a write here
154     bool isRead = readPercent != 0 &&
155         (readPercent == 100 || random_mt.random<uint8_t>(0, 100) < readPercent);
156 
157     assert((readPercent == 0 && !isRead) || (readPercent == 100 && isRead) ||
158            readPercent != 100);
159 
160     // address of the request
161     Addr addr = random_mt.random<Addr>(startAddr, endAddr - 1);
162 
163     // round down to start address of block
164     addr -= addr % blocksize;
165 
166     DPRINTF(TrafficGen, "RandomGen::getNextPacket: %c to addr %x, size %d\n",
167             isRead ? 'r' : 'w', addr, blocksize);
168 
169     // add the amount of data manipulated to the total
170     dataManipulated += blocksize;
171 
172     // create a new request packet
173     return getPacket(addr, blocksize,
174                      isRead ? MemCmd::ReadReq : MemCmd::WriteReq);
175 }
\end{DoxyCode}
\hypertarget{classRandomGen_a65f805b54c24ac3ce0a37716de3e8abc}{
\index{RandomGen@{RandomGen}!nextPacketTick@{nextPacketTick}}
\index{nextPacketTick@{nextPacketTick}!RandomGen@{RandomGen}}
\subsubsection[{nextPacketTick}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} nextPacketTick (bool {\em elastic}, \/  {\bf Tick} {\em delay}) const\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classRandomGen_a65f805b54c24ac3ce0a37716de3e8abc}
Determine the tick when the next packet is available. MaxTick means that there will not be any further packets in the current activation cycle of the generator.


\begin{DoxyParams}{引数}
\item[{\em elastic}]should the injection respond to flow control or not \item[{\em delay}]time the previous packet spent waiting \end{DoxyParams}
\begin{DoxyReturn}{戻り値}
next tick when a packet is available 
\end{DoxyReturn}


\hyperlink{classBaseGen_abee7e4d35054bbc37e9332bbd17f4a69}{BaseGen}を実装しています。


\begin{DoxyCode}
267 {
268     // Check to see if we have reached the data limit. If dataLimit is
269     // zero we do not have a data limit and therefore we will keep
270     // generating requests for the entire residency in this state.
271     if (dataLimit && dataManipulated >= dataLimit)
272     {
273         DPRINTF(TrafficGen, "Data limit for RandomGen reached.\n");
274         // No more requests. Return MaxTick.
275         return MaxTick;
276     } else {
277         // return the time when the next request should take place
278         Tick wait = random_mt.random<Tick>(minPeriod, maxPeriod);
279 
280         // compensate for the delay experienced to not be elastic, by
281         // default the value we generate is from the time we are
282         // asked, so the elasticity happens automatically
283         if (!elastic) {
284             if (wait < delay)
285                 wait = 0;
286             else
287                 wait -= delay;
288         }
289 
290         return curTick() + wait;
291     }
292 }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classRandomGen_aebddb11d20f173e7a5ec2c9f2f591171}{
\index{RandomGen@{RandomGen}!blocksize@{blocksize}}
\index{blocksize@{blocksize}!RandomGen@{RandomGen}}
\subsubsection[{blocksize}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Addr} {\bf blocksize}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classRandomGen_aebddb11d20f173e7a5ec2c9f2f591171}
Block size \hypertarget{classRandomGen_ad6ef2f2a9a6167b2d84c3246a2dd2e92}{
\index{RandomGen@{RandomGen}!dataLimit@{dataLimit}}
\index{dataLimit@{dataLimit}!RandomGen@{RandomGen}}
\subsubsection[{dataLimit}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Addr} {\bf dataLimit}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classRandomGen_ad6ef2f2a9a6167b2d84c3246a2dd2e92}
Maximum amount of data to manipulate \hypertarget{classRandomGen_a708cc056d3a52d0f8f5a2cceffdc6d99}{
\index{RandomGen@{RandomGen}!dataManipulated@{dataManipulated}}
\index{dataManipulated@{dataManipulated}!RandomGen@{RandomGen}}
\subsubsection[{dataManipulated}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Addr} {\bf dataManipulated}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classRandomGen_a708cc056d3a52d0f8f5a2cceffdc6d99}
Counter to determine the amount of data manipulated. Used to determine if we should continue generating requests. \hypertarget{classRandomGen_a1f198116a3da3ee4d73abf4760f70815}{
\index{RandomGen@{RandomGen}!endAddr@{endAddr}}
\index{endAddr@{endAddr}!RandomGen@{RandomGen}}
\subsubsection[{endAddr}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Addr} {\bf endAddr}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classRandomGen_a1f198116a3da3ee4d73abf4760f70815}
End of address range \hypertarget{classRandomGen_a1c8c13cc371c24fa5cbb14c737c97f9d}{
\index{RandomGen@{RandomGen}!maxPeriod@{maxPeriod}}
\index{maxPeriod@{maxPeriod}!RandomGen@{RandomGen}}
\subsubsection[{maxPeriod}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Tick} {\bf maxPeriod}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classRandomGen_a1c8c13cc371c24fa5cbb14c737c97f9d}
\hypertarget{classRandomGen_a4e49eae3c2467df5de83a296f8123619}{
\index{RandomGen@{RandomGen}!minPeriod@{minPeriod}}
\index{minPeriod@{minPeriod}!RandomGen@{RandomGen}}
\subsubsection[{minPeriod}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Tick} {\bf minPeriod}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classRandomGen_a4e49eae3c2467df5de83a296f8123619}
\hyperlink{classRequest}{Request} generation period \hypertarget{classRandomGen_af72793641cb115852317a23ca19dc514}{
\index{RandomGen@{RandomGen}!readPercent@{readPercent}}
\index{readPercent@{readPercent}!RandomGen@{RandomGen}}
\subsubsection[{readPercent}]{\setlength{\rightskip}{0pt plus 5cm}const uint8\_\-t {\bf readPercent}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classRandomGen_af72793641cb115852317a23ca19dc514}
Percent of generated transactions that should be reads \hypertarget{classRandomGen_a6aeb968ddd05c079215ef147ed22708a}{
\index{RandomGen@{RandomGen}!startAddr@{startAddr}}
\index{startAddr@{startAddr}!RandomGen@{RandomGen}}
\subsubsection[{startAddr}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Addr} {\bf startAddr}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classRandomGen_a6aeb968ddd05c079215ef147ed22708a}
Start of address range 

このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
cpu/testers/traffic\_\-gen/\hyperlink{generators_8hh}{generators.hh}\item 
cpu/testers/traffic\_\-gen/\hyperlink{generators_8cc}{generators.cc}\end{DoxyCompactItemize}
