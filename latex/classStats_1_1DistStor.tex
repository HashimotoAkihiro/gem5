\hypertarget{classStats_1_1DistStor}{
\section{クラス DistStor}
\label{classStats_1_1DistStor}\index{Stats::DistStor@{Stats::DistStor}}
}


{\ttfamily \#include $<$statistics.hh$>$}\subsection*{構成}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structStats_1_1DistStor_1_1Params}{Params}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classStats_1_1DistStor_a38de6f559415738e1cc7bb30ecaaba97}{DistStor} (\hyperlink{classStats_1_1Info}{Info} $\ast$info)
\item 
void \hyperlink{classStats_1_1DistStor_a57fea70de4ed8fee9ec9e9d9cca6f9fa}{sample} (\hyperlink{namespaceStats_ac35128c026c72bb36af9cea00774e8a6}{Counter} val, int number)
\item 
\hyperlink{namespaceStats_ada51e68d31936547d3729c82daf6b7c6}{size\_\-type} \hyperlink{classStats_1_1DistStor_a503ab01f6c0142145d3434f6924714e7}{size} () const 
\item 
bool \hyperlink{classStats_1_1DistStor_a4e72b01b727d3165e75cba84eb507491}{zero} () const 
\item 
void \hyperlink{classStats_1_1DistStor_a2e5e3cd36b4a3d6ab774aed4e3fcd641}{prepare} (\hyperlink{classStats_1_1Info}{Info} $\ast$info, \hyperlink{structStats_1_1DistData}{DistData} \&data)
\item 
void \hyperlink{classStats_1_1DistStor_a10d9d71be6e0d2194999bb5dd5280e2d}{reset} (\hyperlink{classStats_1_1Info}{Info} $\ast$info)
\end{DoxyCompactItemize}
\subsection*{Private 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{namespaceStats_ac35128c026c72bb36af9cea00774e8a6}{Counter} \hyperlink{classStats_1_1DistStor_aa555699f5f2296783768934f45a2aa2f}{min\_\-track}
\item 
\hyperlink{namespaceStats_ac35128c026c72bb36af9cea00774e8a6}{Counter} \hyperlink{classStats_1_1DistStor_accafe9095e4349276ea4de5ce8376dfc}{max\_\-track}
\item 
\hyperlink{namespaceStats_ac35128c026c72bb36af9cea00774e8a6}{Counter} \hyperlink{classStats_1_1DistStor_acf3483d9fb89e37ad01724a4428b3dd2}{bucket\_\-size}
\item 
\hyperlink{namespaceStats_ac35128c026c72bb36af9cea00774e8a6}{Counter} \hyperlink{classStats_1_1DistStor_a99ee5c8f5894036e88e7d30de9fa4211}{min\_\-val}
\item 
\hyperlink{namespaceStats_ac35128c026c72bb36af9cea00774e8a6}{Counter} \hyperlink{classStats_1_1DistStor_a9791349c8134f44e46aa7688b0a9e92b}{max\_\-val}
\item 
\hyperlink{namespaceStats_ac35128c026c72bb36af9cea00774e8a6}{Counter} \hyperlink{classStats_1_1DistStor_af9e29e4a48415bdab1a3273284c1f7d2}{underflow}
\item 
\hyperlink{namespaceStats_ac35128c026c72bb36af9cea00774e8a6}{Counter} \hyperlink{classStats_1_1DistStor_a25f45345808703e64848f43dd7aa9ee7}{overflow}
\item 
\hyperlink{namespaceStats_ac35128c026c72bb36af9cea00774e8a6}{Counter} \hyperlink{classStats_1_1DistStor_ab5b201cce7e10c48f62b71605e75707e}{sum}
\item 
\hyperlink{namespaceStats_ac35128c026c72bb36af9cea00774e8a6}{Counter} \hyperlink{classStats_1_1DistStor_a0c02ec1e072d692448ce4429a78e3675}{squares}
\item 
\hyperlink{namespaceStats_ac35128c026c72bb36af9cea00774e8a6}{Counter} \hyperlink{classStats_1_1DistStor_ab4db99aba3dd28686061dd3d5475b3bd}{samples}
\item 
\hyperlink{classstd_1_1vector}{VCounter} \hyperlink{classStats_1_1DistStor_a8cc2f3a565a2e54ab797f717802bc894}{cvec}
\end{DoxyCompactItemize}


\subsection{説明}
Templatized storage and interface for a distrbution stat. 

\subsection{コンストラクタとデストラクタ}
\hypertarget{classStats_1_1DistStor_a38de6f559415738e1cc7bb30ecaaba97}{
\index{Stats::DistStor@{Stats::DistStor}!DistStor@{DistStor}}
\index{DistStor@{DistStor}!Stats::DistStor@{Stats::DistStor}}
\subsubsection[{DistStor}]{\setlength{\rightskip}{0pt plus 5cm}{\bf DistStor} ({\bf Info} $\ast$ {\em info})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classStats_1_1DistStor_a38de6f559415738e1cc7bb30ecaaba97}



\begin{DoxyCode}
1394         : cvec(safe_cast<const Params *>(info->storageParams)->buckets)
1395     {
1396         reset(info);
1397     }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classStats_1_1DistStor_a2e5e3cd36b4a3d6ab774aed4e3fcd641}{
\index{Stats::DistStor@{Stats::DistStor}!prepare@{prepare}}
\index{prepare@{prepare}!Stats::DistStor@{Stats::DistStor}}
\subsubsection[{prepare}]{\setlength{\rightskip}{0pt plus 5cm}void prepare ({\bf Info} $\ast$ {\em info}, \/  {\bf DistData} \& {\em data})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classStats_1_1DistStor_a2e5e3cd36b4a3d6ab774aed4e3fcd641}



\begin{DoxyCode}
1447     {
1448         const Params *params = safe_cast<const Params *>(info->storageParams);
1449 
1450         assert(params->type == Dist);
1451         data.type = params->type;
1452         data.min = params->min;
1453         data.max = params->max;
1454         data.bucket_size = params->bucket_size;
1455 
1456         data.min_val = (min_val == CounterLimits::max()) ? 0 : min_val;
1457         data.max_val = (max_val == CounterLimits::min()) ? 0 : max_val;
1458         data.underflow = underflow;
1459         data.overflow = overflow;
1460 
1461         data.cvec.resize(params->buckets);
1462         for (off_type i = 0; i < params->buckets; ++i)
1463             data.cvec[i] = cvec[i];
1464 
1465         data.sum = sum;
1466         data.squares = squares;
1467         data.samples = samples;
1468     }
\end{DoxyCode}
\hypertarget{classStats_1_1DistStor_a10d9d71be6e0d2194999bb5dd5280e2d}{
\index{Stats::DistStor@{Stats::DistStor}!reset@{reset}}
\index{reset@{reset}!Stats::DistStor@{Stats::DistStor}}
\subsubsection[{reset}]{\setlength{\rightskip}{0pt plus 5cm}void reset ({\bf Info} $\ast$ {\em info})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classStats_1_1DistStor_a10d9d71be6e0d2194999bb5dd5280e2d}
Reset stat value to default 


\begin{DoxyCode}
1475     {
1476         const Params *params = safe_cast<const Params *>(info->storageParams);
1477         min_track = params->min;
1478         max_track = params->max;
1479         bucket_size = params->bucket_size;
1480 
1481         min_val = CounterLimits::max();
1482         max_val = CounterLimits::min();
1483         underflow = Counter();
1484         overflow = Counter();
1485 
1486         size_type size = cvec.size();
1487         for (off_type i = 0; i < size; ++i)
1488             cvec[i] = Counter();
1489 
1490         sum = Counter();
1491         squares = Counter();
1492         samples = Counter();
1493     }
\end{DoxyCode}
\hypertarget{classStats_1_1DistStor_a57fea70de4ed8fee9ec9e9d9cca6f9fa}{
\index{Stats::DistStor@{Stats::DistStor}!sample@{sample}}
\index{sample@{sample}!Stats::DistStor@{Stats::DistStor}}
\subsubsection[{sample}]{\setlength{\rightskip}{0pt plus 5cm}void sample ({\bf Counter} {\em val}, \/  int {\em number})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classStats_1_1DistStor_a57fea70de4ed8fee9ec9e9d9cca6f9fa}
Add a value to the distribution for the given number of times. 
\begin{DoxyParams}{引数}
\item[{\em val}]The value to add. \item[{\em number}]The number of times to add the value. \end{DoxyParams}



\begin{DoxyCode}
1406     {
1407         if (val < min_track)
1408             underflow += number;
1409         else if (val > max_track)
1410             overflow += number;
1411         else {
1412             size_type index =
1413                 (size_type)std::floor((val - min_track) / bucket_size);
1414             assert(index < size());
1415             cvec[index] += number;
1416         }
1417 
1418         if (val < min_val)
1419             min_val = val;
1420 
1421         if (val > max_val)
1422             max_val = val;
1423 
1424         sum += val * number;
1425         squares += val * val * number;
1426         samples += number;
1427     }
\end{DoxyCode}
\hypertarget{classStats_1_1DistStor_a503ab01f6c0142145d3434f6924714e7}{
\index{Stats::DistStor@{Stats::DistStor}!size@{size}}
\index{size@{size}!Stats::DistStor@{Stats::DistStor}}
\subsubsection[{size}]{\setlength{\rightskip}{0pt plus 5cm}{\bf size\_\-type} size () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classStats_1_1DistStor_a503ab01f6c0142145d3434f6924714e7}
Return the number of buckets in this distribution. \begin{DoxyReturn}{戻り値}
the number of buckets. 
\end{DoxyReturn}



\begin{DoxyCode}
1433 { return cvec.size(); }
\end{DoxyCode}
\hypertarget{classStats_1_1DistStor_a4e72b01b727d3165e75cba84eb507491}{
\index{Stats::DistStor@{Stats::DistStor}!zero@{zero}}
\index{zero@{zero}!Stats::DistStor@{Stats::DistStor}}
\subsubsection[{zero}]{\setlength{\rightskip}{0pt plus 5cm}bool zero () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classStats_1_1DistStor_a4e72b01b727d3165e75cba84eb507491}
Returns true if any calls to sample have been made. \begin{DoxyReturn}{戻り値}
True if any values have been sampled. 
\end{DoxyReturn}



\begin{DoxyCode}
1441     {
1442         return samples == Counter();
1443     }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classStats_1_1DistStor_acf3483d9fb89e37ad01724a4428b3dd2}{
\index{Stats::DistStor@{Stats::DistStor}!bucket\_\-size@{bucket\_\-size}}
\index{bucket\_\-size@{bucket\_\-size}!Stats::DistStor@{Stats::DistStor}}
\subsubsection[{bucket\_\-size}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Counter} {\bf bucket\_\-size}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classStats_1_1DistStor_acf3483d9fb89e37ad01724a4428b3dd2}
The number of entries in each bucket. \hypertarget{classStats_1_1DistStor_a8cc2f3a565a2e54ab797f717802bc894}{
\index{Stats::DistStor@{Stats::DistStor}!cvec@{cvec}}
\index{cvec@{cvec}!Stats::DistStor@{Stats::DistStor}}
\subsubsection[{cvec}]{\setlength{\rightskip}{0pt plus 5cm}{\bf VCounter} {\bf cvec}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classStats_1_1DistStor_a8cc2f3a565a2e54ab797f717802bc894}
Counter for each bucket. \hypertarget{classStats_1_1DistStor_accafe9095e4349276ea4de5ce8376dfc}{
\index{Stats::DistStor@{Stats::DistStor}!max\_\-track@{max\_\-track}}
\index{max\_\-track@{max\_\-track}!Stats::DistStor@{Stats::DistStor}}
\subsubsection[{max\_\-track}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Counter} {\bf max\_\-track}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classStats_1_1DistStor_accafe9095e4349276ea4de5ce8376dfc}
The maximum value to track. \hypertarget{classStats_1_1DistStor_a9791349c8134f44e46aa7688b0a9e92b}{
\index{Stats::DistStor@{Stats::DistStor}!max\_\-val@{max\_\-val}}
\index{max\_\-val@{max\_\-val}!Stats::DistStor@{Stats::DistStor}}
\subsubsection[{max\_\-val}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Counter} {\bf max\_\-val}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classStats_1_1DistStor_a9791349c8134f44e46aa7688b0a9e92b}
The largest value sampled. \hypertarget{classStats_1_1DistStor_aa555699f5f2296783768934f45a2aa2f}{
\index{Stats::DistStor@{Stats::DistStor}!min\_\-track@{min\_\-track}}
\index{min\_\-track@{min\_\-track}!Stats::DistStor@{Stats::DistStor}}
\subsubsection[{min\_\-track}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Counter} {\bf min\_\-track}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classStats_1_1DistStor_aa555699f5f2296783768934f45a2aa2f}
The minimum value to track. \hypertarget{classStats_1_1DistStor_a99ee5c8f5894036e88e7d30de9fa4211}{
\index{Stats::DistStor@{Stats::DistStor}!min\_\-val@{min\_\-val}}
\index{min\_\-val@{min\_\-val}!Stats::DistStor@{Stats::DistStor}}
\subsubsection[{min\_\-val}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Counter} {\bf min\_\-val}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classStats_1_1DistStor_a99ee5c8f5894036e88e7d30de9fa4211}
The smallest value sampled. \hypertarget{classStats_1_1DistStor_a25f45345808703e64848f43dd7aa9ee7}{
\index{Stats::DistStor@{Stats::DistStor}!overflow@{overflow}}
\index{overflow@{overflow}!Stats::DistStor@{Stats::DistStor}}
\subsubsection[{overflow}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Counter} {\bf overflow}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classStats_1_1DistStor_a25f45345808703e64848f43dd7aa9ee7}
The number of values sampled more than max. \hypertarget{classStats_1_1DistStor_ab4db99aba3dd28686061dd3d5475b3bd}{
\index{Stats::DistStor@{Stats::DistStor}!samples@{samples}}
\index{samples@{samples}!Stats::DistStor@{Stats::DistStor}}
\subsubsection[{samples}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Counter} {\bf samples}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classStats_1_1DistStor_ab4db99aba3dd28686061dd3d5475b3bd}
The number of samples. \hypertarget{classStats_1_1DistStor_a0c02ec1e072d692448ce4429a78e3675}{
\index{Stats::DistStor@{Stats::DistStor}!squares@{squares}}
\index{squares@{squares}!Stats::DistStor@{Stats::DistStor}}
\subsubsection[{squares}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Counter} {\bf squares}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classStats_1_1DistStor_a0c02ec1e072d692448ce4429a78e3675}
The sum of squares. \hypertarget{classStats_1_1DistStor_ab5b201cce7e10c48f62b71605e75707e}{
\index{Stats::DistStor@{Stats::DistStor}!sum@{sum}}
\index{sum@{sum}!Stats::DistStor@{Stats::DistStor}}
\subsubsection[{sum}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Counter} {\bf sum}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classStats_1_1DistStor_ab5b201cce7e10c48f62b71605e75707e}
The current sum. \hypertarget{classStats_1_1DistStor_af9e29e4a48415bdab1a3273284c1f7d2}{
\index{Stats::DistStor@{Stats::DistStor}!underflow@{underflow}}
\index{underflow@{underflow}!Stats::DistStor@{Stats::DistStor}}
\subsubsection[{underflow}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Counter} {\bf underflow}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classStats_1_1DistStor_af9e29e4a48415bdab1a3273284c1f7d2}
The number of values sampled less than min. 

このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
base/\hyperlink{statistics_8hh}{statistics.hh}\end{DoxyCompactItemize}
