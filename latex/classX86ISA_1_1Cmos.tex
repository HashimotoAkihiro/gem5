\hypertarget{classX86ISA_1_1Cmos}{
\section{クラス Cmos}
\label{classX86ISA_1_1Cmos}\index{X86ISA::Cmos@{X86ISA::Cmos}}
}


{\ttfamily \#include $<$cmos.hh$>$}Cmosに対する継承グラフ:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=7cm]{classX86ISA_1_1Cmos}
\end{center}
\end{figure}
\subsection*{構成}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classX86ISA_1_1Cmos_1_1X86RTC}{X86RTC}
\end{DoxyCompactItemize}
\subsection*{Public 型}
\begin{DoxyCompactItemize}
\item 
typedef CmosParams \hyperlink{classX86ISA_1_1Cmos_a22dfc4a3fb18df74d309b9996cd9943c}{Params}
\end{DoxyCompactItemize}
\subsection*{Public メソッド}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classX86ISA_1_1Cmos_a7ecd69b26388cf0408175e7cde6de621}{Cmos} (const \hyperlink{classX86ISA_1_1Cmos_a22dfc4a3fb18df74d309b9996cd9943c}{Params} $\ast$\hyperlink{namespaceX86ISA_af675c1d542a25b96e11164b80809a856}{p})
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classX86ISA_1_1Cmos_a613ec7d5e1ec64f8d21fec78ae8e568e}{read} (\hyperlink{classPacket}{PacketPtr} pkt)
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classX86ISA_1_1Cmos_a4cefab464e72b5dd42c003a0a4341802}{write} (\hyperlink{classPacket}{PacketPtr} pkt)
\item 
virtual void \hyperlink{classX86ISA_1_1Cmos_a53e036786d17361be4c7320d39c99b84}{serialize} (std::ostream \&\hyperlink{namespaceX86ISA_a6b6e6ba763e7eaf46ac5b6372ca98d30}{os})
\item 
virtual void \hyperlink{classX86ISA_1_1Cmos_af22e5d6d660b97db37003ac61ac4ee49}{unserialize} (\hyperlink{classCheckpoint}{Checkpoint} $\ast$cp, const std::string \&section)
\end{DoxyCompactItemize}
\subsection*{Protected メソッド}
\begin{DoxyCompactItemize}
\item 
uint8\_\-t \hyperlink{classX86ISA_1_1Cmos_aa6db46255cb370c4b02a204daefb40c2}{readRegister} (uint8\_\-t \hyperlink{namespaceX86ISA_aeeb02ad833ab76f3430553ef93213a6b}{reg})
\item 
void \hyperlink{classX86ISA_1_1Cmos_aad1a7f357917d79e46039f8a7875055a}{writeRegister} (uint8\_\-t \hyperlink{namespaceX86ISA_aeeb02ad833ab76f3430553ef93213a6b}{reg}, uint8\_\-t \hyperlink{namespaceX86ISA_ae13bf1250853ff6b72aabe3c79b587cc}{val})
\end{DoxyCompactItemize}
\subsection*{Protected 変数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{base_2types_8hh_a5c8ed81b7d238c9083e1037ba6d61643}{Tick} \hyperlink{classX86ISA_1_1Cmos_ac8d8966078cc047949fd1bca8feb21b6}{latency}
\item 
uint8\_\-t \hyperlink{classX86ISA_1_1Cmos_af3f726014b044194def151079f1f2d89}{address}
\item 
uint8\_\-t \hyperlink{classX86ISA_1_1Cmos_a4d417c6dbc62e1223649ce26f948735f}{regs} \mbox{[}\hyperlink{classX86ISA_1_1Cmos_a443de50008cc375e38503522f5f3cf02}{numRegs}\mbox{]}
\item 
\hyperlink{classX86ISA_1_1Cmos_1_1X86RTC}{X86ISA::Cmos::X86RTC} \hyperlink{classX86ISA_1_1Cmos_a9ad248cc4414fc5e93d51266f7461e7d}{rtc}
\end{DoxyCompactItemize}
\subsection*{Static Protected 変数}
\begin{DoxyCompactItemize}
\item 
static const int \hyperlink{classX86ISA_1_1Cmos_a443de50008cc375e38503522f5f3cf02}{numRegs} = 128
\end{DoxyCompactItemize}


\subsection{型定義}
\hypertarget{classX86ISA_1_1Cmos_a22dfc4a3fb18df74d309b9996cd9943c}{
\index{X86ISA::Cmos@{X86ISA::Cmos}!Params@{Params}}
\index{Params@{Params}!X86ISA::Cmos@{X86ISA::Cmos}}
\subsubsection[{Params}]{\setlength{\rightskip}{0pt plus 5cm}typedef CmosParams {\bf Params}}}
\label{classX86ISA_1_1Cmos_a22dfc4a3fb18df74d309b9996cd9943c}


\hyperlink{classBasicPioDevice_a2845515ac6467f10540747053c8a0449}{BasicPioDevice}を再定義しています。

\subsection{コンストラクタとデストラクタ}
\hypertarget{classX86ISA_1_1Cmos_a7ecd69b26388cf0408175e7cde6de621}{
\index{X86ISA::Cmos@{X86ISA::Cmos}!Cmos@{Cmos}}
\index{Cmos@{Cmos}!X86ISA::Cmos@{X86ISA::Cmos}}
\subsubsection[{Cmos}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Cmos} (const {\bf Params} $\ast$ {\em p})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classX86ISA_1_1Cmos_a7ecd69b26388cf0408175e7cde6de621}



\begin{DoxyCode}
74                           : BasicPioDevice(p, 2), latency(p->pio_latency),
75         rtc(this, "rtc", p->time, true, ULL(5000000000), p->int_pin)
76     {
77         memset(regs, 0, numRegs * sizeof(uint8_t));
78         address = 0;
79     }
\end{DoxyCode}


\subsection{関数}
\hypertarget{classX86ISA_1_1Cmos_a613ec7d5e1ec64f8d21fec78ae8e568e}{
\index{X86ISA::Cmos@{X86ISA::Cmos}!read@{read}}
\index{read@{read}!X86ISA::Cmos@{X86ISA::Cmos}}
\subsubsection[{read}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} read ({\bf PacketPtr} {\em pkt})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classX86ISA_1_1Cmos_a613ec7d5e1ec64f8d21fec78ae8e568e}
Pure virtual function that the device must implement. Called when a read command is recieved by the port. 
\begin{DoxyParams}{引数}
\item[{\em pkt}]\hyperlink{classPacket}{Packet} describing this request \end{DoxyParams}
\begin{DoxyReturn}{戻り値}
number of ticks it took to complete 
\end{DoxyReturn}


\hyperlink{classPioDevice_a842312590432036092c422c87a442358}{PioDevice}を実装しています。


\begin{DoxyCode}
47 {
48     assert(pkt->getSize() == 1);
49     switch(pkt->getAddr() - pioAddr)
50     {
51       case 0x0:
52         pkt->set(address);
53         break;
54       case 0x1:
55         pkt->set(readRegister(address));
56         break;
57       default:
58         panic("Read from undefined CMOS port.\n");
59     }
60     pkt->makeAtomicResponse();
61     return latency;
62 }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1Cmos_aa6db46255cb370c4b02a204daefb40c2}{
\index{X86ISA::Cmos@{X86ISA::Cmos}!readRegister@{readRegister}}
\index{readRegister@{readRegister}!X86ISA::Cmos@{X86ISA::Cmos}}
\subsubsection[{readRegister}]{\setlength{\rightskip}{0pt plus 5cm}uint8\_\-t readRegister (uint8\_\-t {\em reg})\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classX86ISA_1_1Cmos_aa6db46255cb370c4b02a204daefb40c2}



\begin{DoxyCode}
85 {
86     assert(reg < numRegs);
87     uint8_t val;
88     if (reg <= 0xD) {
89         val = rtc.readData(reg);
90         DPRINTF(CMOS,
91             "Reading CMOS RTC reg %x as %x.\n", reg, val);
92     } else {
93         val = regs[reg];
94         DPRINTF(CMOS,
95             "Reading non-volitile CMOS address %x as %x.\n", reg, val);
96     }
97     return val;
98 }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1Cmos_a53e036786d17361be4c7320d39c99b84}{
\index{X86ISA::Cmos@{X86ISA::Cmos}!serialize@{serialize}}
\index{serialize@{serialize}!X86ISA::Cmos@{X86ISA::Cmos}}
\subsubsection[{serialize}]{\setlength{\rightskip}{0pt plus 5cm}void serialize (std::ostream \& {\em os})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classX86ISA_1_1Cmos_a53e036786d17361be4c7320d39c99b84}


\hyperlink{classSerializable_ad6272f80ae37e8331e3969b3f072a801}{Serializable}を再定義しています。


\begin{DoxyCode}
117 {
118     SERIALIZE_SCALAR(address);
119     SERIALIZE_ARRAY(regs, numRegs);
120 
121     // Serialize the timer
122     rtc.serialize("rtc", os);
123 }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1Cmos_af22e5d6d660b97db37003ac61ac4ee49}{
\index{X86ISA::Cmos@{X86ISA::Cmos}!unserialize@{unserialize}}
\index{unserialize@{unserialize}!X86ISA::Cmos@{X86ISA::Cmos}}
\subsubsection[{unserialize}]{\setlength{\rightskip}{0pt plus 5cm}void unserialize ({\bf Checkpoint} $\ast$ {\em cp}, \/  const std::string \& {\em section})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classX86ISA_1_1Cmos_af22e5d6d660b97db37003ac61ac4ee49}


\hyperlink{classSerializable_af100c4e9feabf3cd918619c88c718387}{Serializable}を再定義しています。


\begin{DoxyCode}
127 {
128     UNSERIALIZE_SCALAR(address);
129     UNSERIALIZE_ARRAY(regs, numRegs);
130 
131     // Serialize the timer
132     rtc.unserialize("rtc", cp, section);
133 }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1Cmos_a4cefab464e72b5dd42c003a0a4341802}{
\index{X86ISA::Cmos@{X86ISA::Cmos}!write@{write}}
\index{write@{write}!X86ISA::Cmos@{X86ISA::Cmos}}
\subsubsection[{write}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} write ({\bf PacketPtr} {\em pkt})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classX86ISA_1_1Cmos_a4cefab464e72b5dd42c003a0a4341802}
Pure virtual function that the device must implement. Called when a write command is recieved by the port. 
\begin{DoxyParams}{引数}
\item[{\em pkt}]\hyperlink{classPacket}{Packet} describing this request \end{DoxyParams}
\begin{DoxyReturn}{戻り値}
number of ticks it took to complete 
\end{DoxyReturn}


\hyperlink{classPioDevice_afe8371668d023bb2516b286e5e399b6f}{PioDevice}を実装しています。


\begin{DoxyCode}
66 {
67     assert(pkt->getSize() == 1);
68     switch(pkt->getAddr() - pioAddr)
69     {
70       case 0x0:
71         address = pkt->get<uint8_t>();
72         break;
73       case 0x1:
74         writeRegister(address, pkt->get<uint8_t>());
75         break;
76       default:
77         panic("Write to undefined CMOS port.\n");
78     }
79     pkt->makeAtomicResponse();
80     return latency;
81 }
\end{DoxyCode}
\hypertarget{classX86ISA_1_1Cmos_aad1a7f357917d79e46039f8a7875055a}{
\index{X86ISA::Cmos@{X86ISA::Cmos}!writeRegister@{writeRegister}}
\index{writeRegister@{writeRegister}!X86ISA::Cmos@{X86ISA::Cmos}}
\subsubsection[{writeRegister}]{\setlength{\rightskip}{0pt plus 5cm}void writeRegister (uint8\_\-t {\em reg}, \/  uint8\_\-t {\em val})\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classX86ISA_1_1Cmos_aad1a7f357917d79e46039f8a7875055a}



\begin{DoxyCode}
102 {
103     assert(reg < numRegs);
104     if (reg <= 0xD) {
105         DPRINTF(CMOS, "Writing CMOS RTC reg %x with %x.\n",
106                 reg, val);
107         rtc.writeData(reg, val);
108     } else {
109         DPRINTF(CMOS, "Writing non-volitile CMOS address %x with %x.\n",
110                 reg, val);
111         regs[reg] = val;
112     }
113 }
\end{DoxyCode}


\subsection{変数}
\hypertarget{classX86ISA_1_1Cmos_af3f726014b044194def151079f1f2d89}{
\index{X86ISA::Cmos@{X86ISA::Cmos}!address@{address}}
\index{address@{address}!X86ISA::Cmos@{X86ISA::Cmos}}
\subsubsection[{address}]{\setlength{\rightskip}{0pt plus 5cm}uint8\_\-t {\bf address}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classX86ISA_1_1Cmos_af3f726014b044194def151079f1f2d89}
\hypertarget{classX86ISA_1_1Cmos_ac8d8966078cc047949fd1bca8feb21b6}{
\index{X86ISA::Cmos@{X86ISA::Cmos}!latency@{latency}}
\index{latency@{latency}!X86ISA::Cmos@{X86ISA::Cmos}}
\subsubsection[{latency}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tick} {\bf latency}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classX86ISA_1_1Cmos_ac8d8966078cc047949fd1bca8feb21b6}
\hypertarget{classX86ISA_1_1Cmos_a443de50008cc375e38503522f5f3cf02}{
\index{X86ISA::Cmos@{X86ISA::Cmos}!numRegs@{numRegs}}
\index{numRegs@{numRegs}!X86ISA::Cmos@{X86ISA::Cmos}}
\subsubsection[{numRegs}]{\setlength{\rightskip}{0pt plus 5cm}const int {\bf numRegs} = 128\hspace{0.3cm}{\ttfamily  \mbox{[}static, protected\mbox{]}}}}
\label{classX86ISA_1_1Cmos_a443de50008cc375e38503522f5f3cf02}
\hypertarget{classX86ISA_1_1Cmos_a4d417c6dbc62e1223649ce26f948735f}{
\index{X86ISA::Cmos@{X86ISA::Cmos}!regs@{regs}}
\index{regs@{regs}!X86ISA::Cmos@{X86ISA::Cmos}}
\subsubsection[{regs}]{\setlength{\rightskip}{0pt plus 5cm}uint8\_\-t {\bf regs}\mbox{[}{\bf numRegs}\mbox{]}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classX86ISA_1_1Cmos_a4d417c6dbc62e1223649ce26f948735f}
\hypertarget{classX86ISA_1_1Cmos_a9ad248cc4414fc5e93d51266f7461e7d}{
\index{X86ISA::Cmos@{X86ISA::Cmos}!rtc@{rtc}}
\index{rtc@{rtc}!X86ISA::Cmos@{X86ISA::Cmos}}
\subsubsection[{rtc}]{\setlength{\rightskip}{0pt plus 5cm} {\bf X86ISA::Cmos::X86RTC}  {\bf rtc}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classX86ISA_1_1Cmos_a9ad248cc4414fc5e93d51266f7461e7d}


このクラスの説明は次のファイルから生成されました:\begin{DoxyCompactItemize}
\item 
dev/x86/\hyperlink{cmos_8hh}{cmos.hh}\item 
dev/x86/\hyperlink{cmos_8cc}{cmos.cc}\end{DoxyCompactItemize}
